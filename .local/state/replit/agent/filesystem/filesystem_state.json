{"file_contents":{"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}\n","path":null,"size_bytes":116,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/pages/profile.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ProfileImageUpload } from \"@/components/ProfileImageUpload\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n  SheetTrigger,\n} from \"@/components/ui/sheet\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { motion } from \"framer-motion\";\nimport { \n  User,\n  BookOpen,\n  MessageSquare,\n  Award,\n  TrendingUp,\n  Calendar,\n  Target,\n  Settings,\n  BookmarkIcon,\n  Highlighter,\n  FileText,\n  CheckCircle2,\n  Clock,\n  Heart,\n  Share2,\n  HandHeart,\n  Menu,\n  HelpCircle,\n  Info,\n  FileText as FileTextIcon,\n  Shield,\n  Mail,\n  LogOut,\n  Edit,\n  AlertTriangle,\n  Loader2\n} from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Link } from \"wouter\";\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { APP_VERSION, APP_NAME } from \"@/lib/config\";\nimport type { ReadingPlan, Highlight, Note, Bookmark, Prayer, Achievement as AchievementType } from \"@shared/schema\";\n\nimport { getLevelByXp, getXpProgressInLevel, GAMIFICATION_LEVELS } from \"@/lib/gamification-levels\";\n\nexport default function Profile() {\n  const { user, isLoading, isAuthenticated } = useAuth();\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [activeTab, setActiveTab] = useState(\"plans\");\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [editFirstName, setEditFirstName] = useState(user?.firstName || \"\");\n  const [editLastName, setEditLastName] = useState(user?.lastName || \"\");\n  \n  // Fetch user data\n  const { data: readingPlans = [] } = useQuery<ReadingPlan[]>({\n    queryKey: [\"/api/reading-plans\"],\n    enabled: !!user,\n  });\n\n  const { data: highlights = [] } = useQuery<Highlight[]>({\n    queryKey: [\"/api/bible/highlights\"],\n    enabled: !!user,\n  });\n\n  const { data: notes = [] } = useQuery<Note[]>({\n    queryKey: [\"/api/bible/notes\"],\n    enabled: !!user,\n  });\n\n  const { data: bookmarks = [] } = useQuery<Bookmark[]>({\n    queryKey: [\"/api/bible/bookmarks\"],\n    enabled: !!user,\n  });\n\n  const { data: prayers = [] } = useQuery<Prayer[]>({\n    queryKey: [\"/api/prayers\"],\n    enabled: !!user,\n  });\n\n  const { data: achievements = [] } = useQuery<AchievementType[]>({\n    queryKey: [\"/api/achievements/user\"],\n    enabled: !!user,\n  });\n\n  const updateNameMutation = useMutation({\n    mutationFn: async () => {\n      return apiRequest(\"PATCH\", \"/api/user/profile\", {\n        firstName: editFirstName,\n        lastName: editLastName,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/user\"] });\n      setEditDialogOpen(false);\n      toast({ title: \"Sucesso!\", description: \"Nome atualizado com sucesso\" });\n    },\n    onError: () => {\n      toast({ title: \"Erro\", description: \"Não foi possível atualizar o nome\", variant: \"destructive\" });\n    },\n  });\n\n  const cancelSubscriptionMutation = useMutation({\n    mutationFn: async () => {\n      return apiRequest(\"POST\", \"/api/subscriptions/cancel\", {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/user\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/subscriptions/status\"] });\n      toast({ title: \"Sucesso!\", description: \"Assinatura cancelada com sucesso\" });\n    },\n    onError: () => {\n      toast({ title: \"Erro\", description: \"Não foi possível cancelar a assinatura\", variant: \"destructive\" });\n    },\n  });\n\n  // Show loading state while auth is being checked\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center space-y-3\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary mx-auto\" />\n          <p className=\"text-sm text-muted-foreground font-bold italic\">{t.common?.loading || \"Carregando...\"}</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Show login prompt if not authenticated\n  if (!isAuthenticated && !isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center p-4 mesh-primary\">\n        <Card className=\"max-w-md w-full rounded-3xl border-none glass-premium hover-premium shadow-xl\">\n          <CardHeader className=\"text-center pt-8\">\n            <div className=\"h-20 w-20 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-6\">\n              <User className=\"h-10 w-10 text-primary\" />\n            </div>\n            <CardTitle className=\"text-2xl font-semibold\">{t.profile?.title || \"Meu Perfil\"}</CardTitle>\n            <CardDescription className=\"text-base px-6\">\n              Faça login para acessar suas conquistas, planos de leitura e configurações personalizadas.\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"flex justify-center pb-12 px-8\">\n            <a href=\"/api/login\" className=\"w-full\">\n              <Button size=\"lg\" className=\"w-full h-14 rounded-2xl font-semibold text-lg shadow-xl shadow-primary/20\">\n                Entrar agora\n              </Button>\n            </a>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  // Double check if user is still null even if isLoading is false\n  if (!user && isAuthenticated) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center space-y-3\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary mx-auto\" />\n          <p className=\"text-sm text-muted-foreground font-bold italic\">Carregando dados do usuário...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) return null;\n\n  const xp = user.experiencePoints || 0;\n  const currentLevel = getLevelByXp(xp);\n  const xpProgressInfo = getXpProgressInLevel(xp, currentLevel.level);\n  const isMaxLevel = currentLevel.level >= 50;\n  const nextLevel = isMaxLevel ? currentLevel : GAMIFICATION_LEVELS[currentLevel.level];\n\n  const activePlans = readingPlans.filter(p => !p.isCompleted);\n  const completedPlans = readingPlans.filter(p => p.isCompleted);\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden mesh-primary\">\n      {/* Decorative background elements */}\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      \n      {/* Mobile Header with Action Buttons */}\n      <div className=\"md:hidden sticky top-0 z-20 bg-background/90 backdrop-blur-2xl border-b border-border px-4 py-3\">\n        <div className=\"flex items-center justify-end gap-2\">\n          <Button variant=\"ghost\" size=\"icon\" className=\"rounded-xl\" data-testid=\"button-share-profile-mobile\">\n            <Share2 className=\"h-5 w-5\" />\n          </Button>\n          <Link href=\"/configurações\">\n            <Button variant=\"ghost\" size=\"icon\" className=\"rounded-xl\" data-testid=\"button-settings-mobile\">\n              <Settings className=\"h-5 w-5\" />\n            </Button>\n          </Link>\n          <Sheet>\n            <SheetTrigger asChild>\n              <Button variant=\"ghost\" size=\"icon\" data-testid=\"button-menu-mobile\">\n                <Menu className=\"h-5 w-5\" />\n              </Button>\n            </SheetTrigger>\n            <SheetContent>\n              <SheetHeader>\n                <SheetTitle>Menu</SheetTitle>\n                <SheetDescription>\n                  Acesse informações e recursos adicionais\n                </SheetDescription>\n              </SheetHeader>\n              <div className=\"mt-6 space-y-2\">\n                <Link href=\"/donate\">\n                  <Button variant=\"ghost\" className=\"w-full justify-start\" data-testid=\"menu-donate\">\n                    <Heart className=\"h-4 w-4 mr-3 fill-current text-pink-600\" />\n                    Doar\n                  </Button>\n                </Link>\n                <Separator />\n                <Link href=\"/help\">\n                  <Button variant=\"ghost\" className=\"w-full justify-start\" data-testid=\"menu-help\">\n                    <HelpCircle className=\"h-4 w-4 mr-3 text-blue-500\" />\n                    Ajuda e Suporte\n                  </Button>\n                </Link>\n                <Link href=\"/about\">\n                  <Button variant=\"ghost\" className=\"w-full justify-start\" data-testid=\"menu-about\">\n                    <Info className=\"h-4 w-4 mr-3 text-emerald-500\" />\n                    Sobre o BíbliaFS\n                  </Button>\n                </Link>\n                <Link href=\"/terms\">\n                  <Button variant=\"ghost\" className=\"w-full justify-start\" data-testid=\"menu-terms\">\n                    <FileTextIcon className=\"h-4 w-4 mr-3 text-amber-500\" />\n                    Termos de Uso\n                  </Button>\n                </Link>\n                <Link href=\"/privacy\">\n                  <Button variant=\"ghost\" className=\"w-full justify-start\" data-testid=\"menu-privacy\">\n                    <Shield className=\"h-4 w-4 mr-3 text-muted-foreground\" />\n                    Política de Privacidade\n                  </Button>\n                </Link>\n                <Link href=\"/contact\">\n                  <Button variant=\"ghost\" className=\"w-full justify-start\" data-testid=\"menu-contact\">\n                    <Mail className=\"h-4 w-4 mr-3 text-pink-500\" />\n                    Fale Conosco\n                  </Button>\n                </Link>\n                <Separator />\n                <Button \n                  variant=\"ghost\" \n                  className=\"w-full justify-start text-destructive hover:text-destructive\" \n                  onClick={async () => {\n                    const { supabase } = await import(\"@/lib/supabase\");\n                    await supabase.auth.signOut();\n                    window.location.href = \"/\";\n                  }}\n                  data-testid=\"menu-logout\"\n                >\n                  <LogOut className=\"h-4 w-4 mr-3\" />\n                  {t.profile.logout}\n                </Button>\n              </div>\n            </SheetContent>\n          </Sheet>\n        </div>\n      </div>\n\n      <div className=\"relative z-10 max-w-6xl mx-auto p-4 md:p-8 space-y-8\">\n        {/* Profile Header */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n        >\n        <Card className=\"rounded-[2.5rem] border-none profile-hero-card shadow-xl relative overflow-hidden\">\n          <div className=\"absolute top-0 right-0 w-48 h-48 bg-gradient-to-bl from-primary/10 via-purple-500/10 to-transparent rounded-bl-full z-0\" />\n          <div className=\"absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-amber-500/10 to-transparent rounded-tr-full z-0\" />\n          <CardContent className=\"pt-10 pb-10 px-10 relative z-10\">\n            <div className=\"flex flex-col md:flex-row gap-8 items-start md:items-center\">\n              <ProfileImageUpload \n                currentImage={user.profileImageUrl} \n                userName={`${user.firstName} ${user.lastName}`}\n              />\n              \n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <h1 className=\"font-display text-xl md:text-2xl font-bold tracking-tight text-foreground whitespace-nowrap\" data-testid=\"text-profile-name\">\n                    {user.firstName} {user.lastName}\n                  </h1>\n                  <Dialog open={editDialogOpen} onOpenChange={setEditDialogOpen}>\n                    <DialogTrigger asChild>\n                      <Button size=\"icon\" variant=\"ghost\" data-testid=\"button-edit-name\">\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                    </DialogTrigger>\n                    <DialogContent>\n                      <DialogHeader>\n                        <DialogTitle>Editar Nome</DialogTitle>\n                        <DialogDescription>Altere seu primeiro e último nome</DialogDescription>\n                      </DialogHeader>\n                      <div className=\"space-y-4 py-4\">\n                        <div className=\"space-y-2\">\n                          <Label htmlFor=\"first-name\">Primeiro Nome</Label>\n                          <Input \n                            id=\"first-name\"\n                            value={editFirstName}\n                            onChange={(e) => setEditFirstName(e.target.value)}\n                            data-testid=\"input-first-name\"\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label htmlFor=\"last-name\">Último Nome</Label>\n                          <Input \n                            id=\"last-name\"\n                            value={editLastName}\n                            onChange={(e) => setEditLastName(e.target.value)}\n                            data-testid=\"input-last-name\"\n                          />\n                        </div>\n                      </div>\n                      <DialogFooter>\n                        <Button variant=\"outline\" onClick={() => setEditDialogOpen(false)}>Cancelar</Button>\n                        <Button \n                          onClick={() => updateNameMutation.mutate()}\n                          disabled={updateNameMutation.isPending}\n                          data-testid=\"button-save-name\"\n                        >\n                          {updateNameMutation.isPending ? \"Salvando...\" : \"Salvar\"}\n                        </Button>\n                      </DialogFooter>\n                    </DialogContent>\n                  </Dialog>\n                  {user.isTeacher && (\n                    <Badge className=\"bg-orange-500/10 text-orange-700 border-orange-200\">\n                      Professor\n                    </Badge>\n                  )}\n                  <Badge variant=\"secondary\" className=\"bg-primary/10 text-primary\">\n                    Nível {currentLevel.level} - {currentLevel.title}\n                  </Badge>\n                  <Badge className=\"bg-gradient-to-r from-primary via-purple-600 to-indigo-600 text-white border-none shadow-[0_0_15px_rgba(var(--primary),0.4)] font-semibold italic tracking-tighter\">\n                    v{APP_VERSION}\n                  </Badge>\n                </div>\n                <p className=\"text-muted-foreground mb-2 font-bold\">{user.email}</p>\n                {user.subscriptionPlan && user.subscriptionPlan !== 'free' && (\n                  <div className=\"mb-4 p-3 bg-primary/5 rounded-lg\">\n                    <p className=\"text-sm\">\n                      Plano: <span className=\"font-semibold\">{user.subscriptionPlan === 'monthly' ? 'Premium Mensal' : user.subscriptionPlan === 'yearly' ? 'Premium Anual' : 'Premium Plus'}</span>\n                    </p>\n                  </div>\n                )}\n                \n                {/* Quick Stats */}\n                <div className=\"flex flex-wrap gap-4 md:gap-6\">\n                  <div className=\"flex items-center gap-2 p-3 rounded-2xl stat-card-primary\">\n                    <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-primary/20 to-purple-500/20\">\n                      <TrendingUp className=\"h-5 w-5 text-primary\" />\n                    </div>\n                    <div>\n                      <p className=\"text-lg font-bold text-foreground tracking-tight\">{user.readingStreak || 0}</p>\n                      <p className=\"text-[10px] font-semibold text-muted-foreground uppercase tracking-widest leading-none\">{t.profile.reading_streak}</p>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-2 p-3 rounded-2xl stat-card-green\">\n                    <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-green-500/20 to-emerald-500/20\">\n                      <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\n                    </div>\n                    <div>\n                      <p className=\"text-lg font-bold text-foreground tracking-tight\">{completedPlans.length}</p>\n                      <p className=\"text-[10px] font-semibold text-muted-foreground uppercase tracking-widest leading-none\">{t.plans.completedPlans}</p>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-2 p-3 rounded-2xl stat-card-amber\">\n                    <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/20\">\n                      <Award className=\"h-5 w-5 text-amber-600\" />\n                    </div>\n                    <div>\n                      <p className=\"text-lg font-bold text-foreground tracking-tight\">{achievements.length}</p>\n                      <p className=\"text-[10px] font-semibold text-muted-foreground uppercase tracking-widest leading-none\">{t.profile.achievements}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              {/* Desktop Action Buttons */}\n              <div className=\"hidden md:flex flex-row gap-2\">\n                <Button variant=\"outline\" data-testid=\"button-share-profile\">\n                  <Share2 className=\"h-4 w-4 mr-2\" />\n                  Compartilhar\n                </Button>\n                {user.subscriptionPlan && user.subscriptionPlan !== 'free' && (\n                  <Dialog>\n                    <DialogTrigger asChild>\n                      <Button variant=\"destructive\" data-testid=\"button-cancel-subscription\">\n                        <AlertTriangle className=\"h-4 w-4 mr-2\" />\n                        Cancelar Plano\n                      </Button>\n                    </DialogTrigger>\n                    <DialogContent>\n                      <DialogHeader>\n                        <DialogTitle>Cancelar Assinatura?</DialogTitle>\n                        <DialogDescription>\n                          Tem certeza que deseja cancelar sua assinatura? Você perderá todos os benefícios premium.\n                        </DialogDescription>\n                      </DialogHeader>\n                      <DialogFooter>\n                        <Button variant=\"outline\" data-testid=\"button-cancel-dialog\">\n                          Voltar\n                        </Button>\n                        <Button \n                          variant=\"destructive\"\n                          onClick={() => cancelSubscriptionMutation.mutate()}\n                          disabled={cancelSubscriptionMutation.isPending}\n                          data-testid=\"button-confirm-cancel\"\n                        >\n                          {cancelSubscriptionMutation.isPending ? \"Cancelando...\" : \"Sim, Cancelar\"}\n                        </Button>\n                      </DialogFooter>\n                    </DialogContent>\n                  </Dialog>\n                )}\n                <Link href=\"/configurações\">\n                  <Button variant=\"outline\" data-testid=\"button-settings\">\n                    <Settings className=\"h-4 w-4\" />\n                  </Button>\n                </Link>\n                <Sheet>\n                  <SheetTrigger asChild>\n                    <Button variant=\"outline\" data-testid=\"button-menu\">\n                      <Menu className=\"h-4 w-4\" />\n                    </Button>\n                  </SheetTrigger>\n                  <SheetContent>\n                    <SheetHeader>\n                      <SheetTitle>Menu</SheetTitle>\n                      <SheetDescription>\n                        Acesse informações e recursos adicionais\n                      </SheetDescription>\n                    </SheetHeader>\n                    <div className=\"mt-6 space-y-2\">\n                      <Link href=\"/donate\">\n                        <Button variant=\"ghost\" className=\"w-full justify-start\" data-testid=\"menu-donate\">\n                          <Heart className=\"h-4 w-4 mr-3 fill-current text-pink-600\" />\n                          Doar\n                        </Button>\n                      </Link>\n                      <Separator />\n                      <Link href=\"/help\">\n                        <Button variant=\"ghost\" className=\"w-full justify-start\" data-testid=\"menu-help\">\n                          <HelpCircle className=\"h-4 w-4 mr-3 text-blue-500\" />\n                          Ajuda e Suporte\n                        </Button>\n                      </Link>\n                      <Link href=\"/about\">\n                        <Button variant=\"ghost\" className=\"w-full justify-start\" data-testid=\"menu-about\">\n                          <Info className=\"h-4 w-4 mr-3 text-emerald-500\" />\n                          Sobre o BíbliaFS\n                        </Button>\n                      </Link>\n                      <Link href=\"/terms\">\n                        <Button variant=\"ghost\" className=\"w-full justify-start\" data-testid=\"menu-terms\">\n                          <FileTextIcon className=\"h-4 w-4 mr-3 text-amber-500\" />\n                          Termos de Uso\n                        </Button>\n                      </Link>\n                      <Link href=\"/privacy\">\n                        <Button variant=\"ghost\" className=\"w-full justify-start\" data-testid=\"menu-privacy\">\n                          <Shield className=\"h-4 w-4 mr-3 text-muted-foreground\" />\n                          Política de Privacidade\n                        </Button>\n                      </Link>\n                      <Link href=\"/contact\">\n                        <Button variant=\"ghost\" className=\"w-full justify-start\" data-testid=\"menu-contact\">\n                          <Mail className=\"h-4 w-4 mr-3 text-pink-500\" />\n                          Fale Conosco\n                        </Button>\n                      </Link>\n                      <Separator />\n                      <Button \n                        variant=\"ghost\" \n                        className=\"w-full justify-start text-destructive hover:text-destructive\" \n                        onClick={async () => {\n                          const { supabase } = await import(\"@/lib/supabase\");\n                          await supabase.auth.signOut();\n                          window.location.href = \"/\";\n                        }}\n                        data-testid=\"menu-logout\"\n                      >\n                        <LogOut className=\"h-4 w-4 mr-3\" />\n                        {t.profile.logout}\n                      </Button>\n                    </div>\n                  </SheetContent>\n                </Sheet>\n              </div>\n            </div>\n\n            {/* XP Progress Bar */}\n            <div className=\"mt-8 pt-8 border-t border-border\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <span className=\"text-[10px] font-semibold text-muted-foreground uppercase tracking-[0.2em]\">\n                  {t.progress.level} {currentLevel.title}\n                </span>\n                <span className=\"text-[10px] font-semibold text-muted-foreground uppercase tracking-widest\">\n                  {isMaxLevel ? `${xp} ${t.progress.xp} (Máximo)` : `${xpProgressInfo.current} / ${xpProgressInfo.needed} ${t.progress.xp}`}\n                </span>\n              </div>\n              <Progress value={Math.min(xpProgressInfo.percent, 100)} className=\"h-2 bg-muted\" />\n              {!isMaxLevel && (\n                <p className=\"text-[10px] font-bold text-muted-foreground mt-2 italic\">\n                  Próximo nível: {nextLevel.title}\n                </p>\n              )}\n              {isMaxLevel && (\n                <p className=\"text-[10px] text-primary font-semibold uppercase tracking-widest mt-2 italic\">\n                  Nível máximo alcançado!\n                </p>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n        </motion.div>\n\n        {/* Tabs Navigation */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5, delay: 0.1 }}\n        >\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-3 h-auto bg-muted/50 backdrop-blur-xl rounded-2xl p-1.5 shadow-xl border border-border\" data-testid=\"tabs-profile\">\n            <TabsTrigger value=\"plans\" className=\"flex-col gap-1.5 py-4 rounded-xl data-[state=active]:bg-primary/10 data-[state=active]:shadow-sm transition-all text-muted-foreground data-[state=active]:text-primary\" data-testid=\"tab-plans\">\n              <BookOpen className=\"h-5 w-5\" />\n              <span className=\"text-[10px] font-semibold uppercase tracking-widest\">{t.profile.my_plans}</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"prayers\" className=\"flex-col gap-1.5 py-4 rounded-xl data-[state=active]:bg-primary/10 data-[state=active]:shadow-sm transition-all text-muted-foreground data-[state=active]:text-primary\" data-testid=\"tab-prayers\">\n              <HandHeart className=\"h-5 w-5\" />\n              <span className=\"text-[10px] font-semibold uppercase tracking-widest\">{t.nav.prayers}</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"donate\" className=\"flex-col gap-1.5 py-4 rounded-xl data-[state=active]:bg-primary/10 data-[state=active]:shadow-sm transition-all text-muted-foreground data-[state=active]:text-primary\" data-testid=\"tab-donate\">\n              <Heart className=\"h-5 w-5\" />\n              <span className=\"text-[10px] font-semibold uppercase tracking-widest\">Doar</span>\n            </TabsTrigger>\n          </TabsList>\n\n          {/* Donate Tab */}\n          <TabsContent value=\"donate\" className=\"space-y-6 mt-10\">\n            <Card className=\"rounded-[2.5rem] border-none glass-premium hover-premium shadow-xl relative overflow-hidden group\">\n              <div className=\"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-pink-500/5 via-transparent to-transparent rounded-bl-full z-0\" />\n              <CardHeader className=\"p-8 sm:p-10 relative z-10\">\n                <CardTitle className=\"flex items-start gap-4 text-xl font-semibold text-foreground uppercase italic tracking-tighter leading-tight\">\n                  <Heart className=\"h-6 w-6 text-pink-600 fill-pink-600 mt-1 shrink-0 animate-pulse\" />\n                  <span>Sua doação ajuda a levar a Palavra a mais pessoas, em mais idiomas, e mantém o app acessível para todos.</span>\n                </CardTitle>\n                <CardDescription className=\"mt-4 text-base font-bold text-muted-foreground italic leading-relaxed\">\n                  Mas não é só isso: cada contribuição sustenta os desenvolvedores que trabalham incansavelmente — dia e noite — para aprimorar a experiência, corrigir bugs, adicionar recursos e tornar o app mais leve, rápido e acessível para todos.\n                  <br /><br />\n                  Você não está só doando. Você está sendo parte da história de quem busca a Palavra, onde quer que esteja.\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"p-8 sm:p-10 pt-0 relative z-10\">\n                <Link href=\"/donate\">\n                  <Button className=\"w-full h-16 rounded-2xl text-xl font-semibold italic uppercase tracking-widest shadow-xl shadow-primary/20\" size=\"lg\" data-testid=\"button-go-donate\">\n                    <Heart className=\"h-5 w-5 mr-3 fill-current\" />\n                    Fazer uma Doação\n                  </Button>\n                </Link>\n                <div className=\"mt-10 pt-8 border-t border-border space-y-4\">\n                  <p className=\"text-[10px] font-semibold uppercase tracking-[0.3em] text-muted-foreground ml-2 italic\">Suas doações ajudam em:</p>\n                  <ul className=\"space-y-4\">\n                    <li className=\"flex items-center gap-4 bg-muted p-4 rounded-2xl border border-border/50\">\n                      <div className=\"p-1 rounded-full bg-green-500/10 shadow-inner\">\n                        <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\n                      </div>\n                      <span className=\"font-bold text-muted-foreground\">Manter o aplicativo gratuito para todos</span>\n                    </li>\n                    <li className=\"flex items-center gap-4 bg-muted p-4 rounded-2xl border border-border/50\">\n                      <div className=\"p-1 rounded-full bg-green-500/10 shadow-inner\">\n                        <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\n                      </div>\n                      <span className=\"font-bold text-muted-foreground\">Traduzir a Bíblia para mais idiomas</span>\n                    </li>\n                    <li className=\"flex items-center gap-4 bg-muted p-4 rounded-2xl border border-border/50\">\n                      <div className=\"p-1 rounded-full bg-green-500/10 shadow-inner\">\n                        <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\n                      </div>\n                      <span className=\"font-bold text-muted-foreground\">Desenvolver novos recursos e melhorias</span>\n                    </li>\n                  </ul>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Old Activity Tab - Removed */}\n          <TabsContent value=\"activity\" className=\"space-y-6 mt-6 hidden\">\n            <div className=\"grid md:grid-cols-3 gap-6\">\n              {/* Highlights */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2 text-lg\">\n                    <Highlighter className=\"h-5 w-5 text-yellow-600\" />\n                    Destaques\n                  </CardTitle>\n                  <CardDescription>{highlights.length} versículos destacados</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {highlights.length === 0 ? (\n                    <p className=\"text-sm text-muted-foreground\">Nenhum destaque ainda</p>\n                  ) : (\n                    <div className=\"space-y-3\">\n                      {highlights.slice(0, 5).map((highlight) => (\n                        <div key={highlight.id} className=\"text-sm\">\n                          <p className=\"font-medium\">{highlight.book} {highlight.chapter}:{highlight.verse}</p>\n                          <div className=\"flex items-center gap-2 mt-1\">\n                            <div \n                              className=\"h-3 w-3 rounded-full\" \n                              style={{ backgroundColor: highlight.color }}\n                            />\n                            <p className=\"text-xs text-muted-foreground\">\n                              {new Date(highlight.createdAt!).toLocaleDateString()}\n                            </p>\n                          </div>\n                        </div>\n                      ))}\n                      {highlights.length > 5 && (\n                        <Link href=\"/favorites\">\n                          <Button variant=\"ghost\" size=\"sm\" className=\"p-0 h-auto text-primary\">\n                            Ver todos ({highlights.length})\n                          </Button>\n                        </Link>\n                      )}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Notes */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2 text-lg\">\n                    <FileText className=\"h-5 w-5 text-blue-600\" />\n                    Notas\n                  </CardTitle>\n                  <CardDescription>{notes.length} notas criadas</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {notes.length === 0 ? (\n                    <p className=\"text-sm text-muted-foreground\">Nenhuma nota ainda</p>\n                  ) : (\n                    <div className=\"space-y-3\">\n                      {notes.slice(0, 5).map((note) => (\n                        <div key={note.id} className=\"text-sm\">\n                          <p className=\"font-medium\">{note.book} {note.chapter}{note.verse ? `:${note.verse}` : ''}</p>\n                          <p className=\"text-xs text-muted-foreground line-clamp-2 mt-1\">\n                            {note.content}\n                          </p>\n                        </div>\n                      ))}\n                      {notes.length > 5 && (\n                        <Link href=\"/favorites\">\n                          <Button variant=\"ghost\" size=\"sm\" className=\"p-0 h-auto text-primary\">\n                            Ver todas ({notes.length})\n                          </Button>\n                        </Link>\n                      )}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Bookmarks */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2 text-lg\">\n                    <BookmarkIcon className=\"h-5 w-5 text-green-600\" />\n                    Favoritos\n                  </CardTitle>\n                  <CardDescription>{bookmarks.length} favoritos salvos</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {bookmarks.length === 0 ? (\n                    <p className=\"text-sm text-muted-foreground\">Nenhum favorito ainda</p>\n                  ) : (\n                    <div className=\"space-y-3\">\n                      {bookmarks.slice(0, 5).map((bookmark) => (\n                        <div key={bookmark.id} className=\"text-sm\">\n                          <p className=\"font-medium\">{bookmark.book} {bookmark.chapter}:{bookmark.verse}</p>\n                          {bookmark.note && (\n                            <p className=\"text-xs text-muted-foreground line-clamp-1 mt-1\">\n                              {bookmark.note}\n                            </p>\n                          )}\n                        </div>\n                      ))}\n                      {bookmarks.length > 5 && (\n                        <Link href=\"/favorites\">\n                          <Button variant=\"ghost\" size=\"sm\" className=\"p-0 h-auto text-primary\">\n                            Ver todos ({bookmarks.length})\n                          </Button>\n                        </Link>\n                      )}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          {/* Plans Tab */}\n          <TabsContent value=\"plans\" className=\"space-y-6 mt-6\">\n            <div className=\"grid gap-6\">\n              {/* Active Plans */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Clock className=\"h-5 w-5 text-primary\" />\n                    {t.plans.activePlans}\n                  </CardTitle>\n                  <CardDescription>\n                    {activePlans.length} plano{activePlans.length !== 1 ? 's' : ''} em andamento\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {activePlans.length === 0 ? (\n                    <div className=\"text-center py-8\">\n                      <BookOpen className=\"h-12 w-12 text-muted-foreground mx-auto mb-3\" />\n                      <p className=\"text-muted-foreground mb-4\">{t.plans.noActivePlans}</p>\n                      <Link href=\"/plans\">\n                        <Button>Explorar Planos</Button>\n                      </Link>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      {activePlans.map((plan) => {\n                        const planProgress = Math.round(((plan.currentDay || 1) / plan.totalDays) * 100);\n                        return (\n                          <div key={plan.id} className=\"border rounded-lg p-4\">\n                            <div className=\"flex items-start justify-between mb-3\">\n                              <div>\n                                <h3 className=\"font-semibold\">{plan.title}</h3>\n                                <p className=\"text-sm text-muted-foreground\">\n                                  {t.plans.day} {plan.currentDay || 1} de {plan.totalDays}\n                                </p>\n                              </div>\n                              <Badge variant=\"secondary\">\n                                {planProgress}%\n                              </Badge>\n                            </div>\n                            <Progress value={planProgress} className=\"h-2\" />\n                          </div>\n                        );\n                      })}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Completed Plans */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\n                    {t.plans.completedPlans}\n                  </CardTitle>\n                  <CardDescription>\n                    {completedPlans.length} plano{completedPlans.length !== 1 ? 's' : ''} finalizado{completedPlans.length !== 1 ? 's' : ''}\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {completedPlans.length === 0 ? (\n                    <p className=\"text-sm text-muted-foreground text-center py-4\">\n                      Complete seu primeiro plano para ver aqui!\n                    </p>\n                  ) : (\n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      {completedPlans.map((plan) => (\n                        <div key={plan.id} className=\"border border-border rounded-lg p-4 bg-green-50\">\n                          <div className=\"flex items-start justify-between\">\n                            <div className=\"flex-1\">\n                              <h3 className=\"font-semibold text-sm\">{plan.title}</h3>\n                              <p className=\"text-xs text-muted-foreground mt-1\">\n                                {plan.totalDays} {t.plans.days}\n                              </p>\n                            </div>\n                            <CheckCircle2 className=\"h-5 w-5 text-green-600 shrink-0\" />\n                          </div>\n                          {plan.completedAt && (\n                            <p className=\"text-xs text-muted-foreground mt-2\">\n                              {t.plans.completedOn} {new Date(plan.completedAt).toLocaleDateString()}\n                            </p>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          {/* Old Achievements Tab - Removed */}\n          <TabsContent value=\"achievements\" className=\"space-y-6 mt-6 hidden\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Award className=\"h-5 w-5 text-primary\" />\n                  {t.profile.achievements}\n                </CardTitle>\n                <CardDescription>\n                  {achievements.length} conquista{achievements.length !== 1 ? 's' : ''} desbloqueada{achievements.length !== 1 ? 's' : ''}\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                {achievements.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <Award className=\"h-12 w-12 text-muted-foreground mx-auto mb-3\" />\n                    <p className=\"text-muted-foreground\">\n                      Continue lendo a Bíblia para desbloquear conquistas!\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    {achievements.map((achievement) => (\n                      <div\n                        key={achievement.id}\n                        className=\"flex items-start gap-3 p-4 rounded-lg border bg-primary/5 border-primary/20\"\n                        data-testid={`achievement-${achievement.id}`}\n                      >\n                        <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-primary/20 shrink-0\">\n                          <Award className=\"h-6 w-6 text-primary\" />\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"font-semibold mb-1\">{achievement.name}</p>\n                          <p className=\"text-sm text-muted-foreground\">{achievement.description}</p>\n                          <p className=\"text-xs text-muted-foreground mt-2\">\n                            +{achievement.xpReward} XP\n                          </p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n                <div className=\"mt-6 pt-6 border-t\">\n                  <Link href=\"/progress\">\n                    <Button variant=\"outline\" className=\"w-full\">\n                      Ver Todas as Conquistas\n                    </Button>\n                  </Link>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Prayers Tab */}\n          <TabsContent value=\"prayers\" className=\"space-y-6 mt-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <HandHeart className=\"h-5 w-5 text-pink-600\" />\n                  Diário de Orações\n                </CardTitle>\n                <CardDescription>\n                  {prayers.length} oração{prayers.length !== 1 ? 'ões' : ''} registrada{prayers.length !== 1 ? 's' : ''}\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                {prayers.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <HandHeart className=\"h-12 w-12 text-muted-foreground mx-auto mb-3\" />\n                    <p className=\"text-muted-foreground mb-4\">\n                      Nenhuma oração registrada ainda\n                    </p>\n                    <Link href=\"/prayers\">\n                      <Button>Criar Oração</Button>\n                    </Link>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {prayers.slice(0, 10).map((prayer) => (\n                      <div key={prayer.id} className=\"border rounded-lg p-4\">\n                        <div className=\"flex items-start justify-between gap-4\">\n                          <div className=\"flex-1 min-w-0\">\n                            <h3 className=\"font-semibold mb-1\">{prayer.title}</h3>\n                            {prayer.content && (\n                              <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                                {prayer.content}\n                              </p>\n                            )}\n                            {prayer.isAnswered && (\n                              <div className=\"mt-2\">\n                                <Badge className=\"bg-green-500/10 text-green-700 border-green-200 text-xs\">\n                                  Respondida\n                                </Badge>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                        <p className=\"text-xs text-muted-foreground mt-3\">\n                          {new Date(prayer.createdAt!).toLocaleDateString()}\n                        </p>\n                      </div>\n                    ))}\n                    <Link href=\"/prayers\">\n                      <Button variant=\"outline\" className=\"w-full\">\n                        Ver Todas as Orações\n                      </Button>\n                    </Link>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Old Stats Tab - Removed */}\n          <TabsContent value=\"stats\" className=\"space-y-6 mt-6 hidden\">\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Resumo Geral</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-muted-foreground\">Membro desde</span>\n                    <span className=\"font-medium\">\n                      {new Date(user.createdAt!).toLocaleDateString('pt-BR', { \n                        month: 'long', \n                        year: 'numeric' \n                      })}\n                    </span>\n                  </div>\n                  <Separator />\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-muted-foreground\">Tema Atual</span>\n                    <Badge variant=\"secondary\" className=\"capitalize\">\n                      {user.selectedTheme?.replace('_', ' ') || 'Clássico'}\n                    </Badge>\n                  </div>\n                  <Separator />\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-muted-foreground\">Total de XP</span>\n                    <span className=\"font-bold text-primary\">{xp}</span>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Atividades</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <Highlighter className=\"h-4 w-4 text-yellow-600\" />\n                      <span className=\"text-sm\">Destaques</span>\n                    </div>\n                    <span className=\"font-bold\">{highlights.length}</span>\n                  </div>\n                  <Separator />\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <FileText className=\"h-4 w-4 text-blue-600\" />\n                      <span className=\"text-sm\">Notas</span>\n                    </div>\n                    <span className=\"font-bold\">{notes.length}</span>\n                  </div>\n                  <Separator />\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <BookmarkIcon className=\"h-4 w-4 text-green-600\" />\n                      <span className=\"text-sm\">Favoritos</span>\n                    </div>\n                    <span className=\"font-bold\">{bookmarks.length}</span>\n                  </div>\n                  <Separator />\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <Heart className=\"h-4 w-4 text-pink-600\" />\n                      <span className=\"text-sm\">Orações</span>\n                    </div>\n                    <span className=\"font-bold\">{prayers.length}</span>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n        </Tabs>\n        </motion.div>\n        \n        {/* Version Footer */}\n        <div className=\"text-center py-8 mt-8 border-t border-primary/20 bg-gradient-to-r from-primary/5 via-transparent to-primary/5\">\n          <p className=\"text-base font-medium text-primary\">\n            {APP_NAME} v{APP_VERSION}\n          </p>\n          <p className=\"text-xs text-muted-foreground mt-1 font-bold italic\">Desenvolvido por FabriSite</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":49258,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1592,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4420,"size_tokens":null},"client/src/pages/community.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardFooter, CardHeader } from \"@/components/ui/card\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { \n  Users, \n  Plus, \n  Heart,\n  MessageCircle,\n  Share2,\n  Sparkles,\n  BookOpen,\n  TrendingUp,\n  Loader2\n} from \"lucide-react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { insertCommunityPostSchema, type CommunityPost } from \"@shared/schema\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\n\n// Form schema\nconst formSchema = insertCommunityPostSchema.extend({\n  verseReference: z.string().min(1, \"Digite a referência do versículo\"),\n  verseText: z.string().min(5, \"Digite o texto do versículo\"),\n  note: z.string().min(10, \"A reflexão deve ter pelo menos 10 caracteres\"),\n}).omit({ userId: true });\n\ntype FormData = z.infer<typeof formSchema>;\n\nexport default function Community() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const { t } = useLanguage();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n\n  const { data: posts = [], isLoading, error } = useQuery<(CommunityPost & { user: any; isLikedByCurrentUser?: boolean })[]>({\n    queryKey: [\"/api/community/posts\"],\n    retry: 2,\n  });\n\n  const form = useForm<FormData>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      verseReference: \"\",\n      verseText: \"\",\n      note: \"\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: FormData) => {\n      return await apiRequest(\"POST\", \"/api/community/posts\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/community/posts\"] });\n      setIsCreateDialogOpen(false);\n      form.reset();\n      toast({\n        title: \"Publicado com sucesso!\",\n        description: \"Seu post foi compartilhado com a comunidade.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao publicar\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const toggleLikeMutation = useMutation({\n    mutationFn: async ({ postId, isLiked }: { postId: string; isLiked: boolean }) => {\n      if (isLiked) {\n        return await apiRequest(\"DELETE\", `/api/community/posts/${postId}/like`);\n      } else {\n        return await apiRequest(\"POST\", `/api/community/posts/${postId}/like`);\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/community/posts\"] });\n    },\n  });\n\n  const onSubmit = (data: FormData) => {\n    createMutation.mutate(data);\n  };\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center space-y-3\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary mx-auto\" />\n          <p className=\"text-sm text-muted-foreground\">Carregando posts...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"max-w-4xl mx-auto p-6\">\n          <Card className=\"border-destructive\">\n            <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <div className=\"flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10 mb-4\">\n                <Users className=\"h-8 w-8 text-destructive\" />\n              </div>\n              <h3 className=\"font-semibold text-lg mb-2\">Erro ao carregar posts</h3>\n              <p className=\"text-muted-foreground mb-4\">\n                Não foi possível carregar os posts da comunidade. Tente novamente.\n              </p>\n              <Button onClick={() => window.location.reload()} data-testid=\"button-retry\">\n                Tentar Novamente\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden mesh-primary\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"max-w-4xl mx-auto px-6 sm:px-8 py-6 sm:py-8 relative z-10\">\n        {/* Header */}\n        <div className=\"text-center space-y-2 mb-8\">\n          <p className=\"text-[10px] font-semibold text-primary uppercase tracking-[0.2em]\">CONEXÕES</p>\n          <h1 className=\"font-display text-xl sm:text-2xl font-bold text-foreground\" data-testid=\"text-page-title\">\n            {t.community.title}\n          </h1>\n          <p className=\"text-sm text-muted-foreground\">\n            Compartilhe insights e conecte-se com outros\n          </p>\n        </div>\n        \n        <div className=\"flex justify-center mb-8\">\n          <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n            <DialogTrigger asChild>\n              <Button size=\"lg\" data-testid=\"button-create-post\" className=\"flex-shrink-0\">\n                <Plus className=\"h-5 w-5 mr-2\" />\n                <span className=\"hidden sm:inline\">{t.community.post}</span>\n                <span className=\"sm:hidden\">Post</span>\n              </Button>\n            </DialogTrigger>\n            <DialogContent>\n              <DialogHeader>\n                <DialogTitle>{t.community.what_studying}</DialogTitle>\n                <DialogDescription>\n                  Compartilhe um versículo e sua reflexão\n                </DialogDescription>\n              </DialogHeader>\n              \n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"verseReference\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>{t.community.verse_reference}</FormLabel>\n                        <FormControl>\n                          <Input \n                            placeholder=\"Ex: João 3:16\"\n                            data-testid=\"input-verse-reference\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"verseText\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Texto do Versículo</FormLabel>\n                        <FormControl>\n                          <Textarea \n                            placeholder=\"Cole o texto do versículo...\"\n                            className=\"min-h-[100px] font-serif\"\n                            data-testid=\"textarea-verse-text\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"note\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>{t.community.your_reflection}</FormLabel>\n                        <FormControl>\n                          <Textarea \n                            placeholder=\"Compartilhe o que você aprendeu ou como esse versículo te tocou...\"\n                            className=\"min-h-[120px]\"\n                            data-testid=\"textarea-post-note\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <DialogFooter>\n                    <Button \n                      type=\"button\" \n                      variant=\"outline\" \n                      onClick={() => setIsCreateDialogOpen(false)}\n                      data-testid=\"button-cancel-post\"\n                    >\n                      Cancelar\n                    </Button>\n                    <Button \n                      type=\"submit\" \n                      disabled={createMutation.isPending}\n                      data-testid=\"button-publish-post\"\n                    >\n                      {createMutation.isPending ? (\n                        <>\n                          <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                          Publicando...\n                        </>\n                      ) : (\n                        t.community.post\n                      )}\n                    </Button>\n                  </DialogFooter>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n        </div>\n\n        {/* Stats Banner */}\n        <Card className=\"mb-8 glass-premium hover-premium border-none rounded-2xl ring-2 ring-primary/10\">\n          <CardContent className=\"pt-6\">\n            <div className=\"grid grid-cols-3 gap-6 text-center\">\n              <div>\n                <div className=\"text-3xl font-bold text-primary\" data-testid=\"text-total-posts\">{posts.length}</div>\n                <p className=\"text-[10px] text-muted-foreground font-semibold uppercase tracking-wider\">Publicações</p>\n              </div>\n              <div>\n                <div className=\"text-3xl font-bold\">127</div>\n                <p className=\"text-[10px] text-muted-foreground font-semibold uppercase tracking-wider\">Membros</p>\n              </div>\n              <div>\n                <div className=\"text-3xl font-bold\">1.2k</div>\n                <p className=\"text-[10px] text-muted-foreground font-semibold uppercase tracking-wider\">Conexões</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Feed */}\n        <div className=\"space-y-6\">\n          {posts.length === 0 ? (\n            <Card className=\"border-dashed\">\n              <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\n                <div className=\"flex h-16 w-16 items-center justify-center rounded-full bg-muted mb-4\">\n                  <Users className=\"h-8 w-8 text-muted-foreground\" />\n                </div>\n                <h3 className=\"font-semibold text-lg mb-2\">Nenhuma publicação ainda</h3>\n                <p className=\"text-muted-foreground mb-4\">\n                  Seja o primeiro a compartilhar um estudo\n                </p>\n                <Button onClick={() => setIsCreateDialogOpen(true)}>\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Criar Primeira Publicação\n                </Button>\n              </CardContent>\n            </Card>\n          ) : (\n            <>\n              {/* AI Suggestion Card */}\n              <Card className=\"glass-premium hover-premium border-none rounded-2xl ring-2 ring-slate-500/20\">\n                <CardHeader className=\"pb-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <Sparkles className=\"h-4 w-4 text-muted-foreground\" />\n                    <h3 className=\"font-bold text-sm\">Sugestão da IA</h3>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-xs text-muted-foreground mb-4 font-medium\">\n                    Conecte-se com outros que estão estudando temas similares:\n                  </p>\n                  <div className=\"flex items-center gap-3\">\n                    <Avatar className=\"h-10 w-10 border-2 border-background\">\n                      <AvatarFallback className=\"bg-muted-foreground text-white font-bold\">MS</AvatarFallback>\n                    </Avatar>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"font-bold text-sm truncate\">Maria Silva</p>\n                      <p className=\"text-[10px] text-muted-foreground font-medium\">Estudando Provérbios</p>\n                    </div>\n                    <Button size=\"sm\" variant=\"outline\" className=\"rounded-full px-4 h-8 text-xs font-bold\">Conectar</Button>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Posts */}\n              {posts.map((post) => (\n                <Card key={post.id} className=\"border-0 glass rounded-2xl hover-elevate overflow-hidden\" data-testid={`card-post-${post.id}`}>\n                  <CardHeader className=\"pb-2\">\n                    <div className=\"flex items-start gap-3\">\n                      <Avatar className=\"h-10 w-10 border-2 border-background shadow-sm\">\n                        <AvatarImage src={post.user?.profileImageUrl} />\n                        <AvatarFallback className=\"bg-gradient-to-br from-blue-800 to-foreground text-white font-bold\">\n                          {post.user?.firstName?.[0] || \"U\"}\n                        </AvatarFallback>\n                      </Avatar>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2\">\n                          <p className=\"font-bold text-sm truncate\">{post.user?.firstName} {post.user?.lastName}</p>\n                          <Badge variant=\"secondary\" className=\"text-[10px] font-bold px-2 py-0 h-4 bg-primary/10 text-primary border-0\">\n                            {post.user?.level}\n                          </Badge>\n                        </div>\n                        <p className=\"text-[10px] text-muted-foreground font-medium\">\n                          {formatDistanceToNow(new Date(post.createdAt!), {\n                            addSuffix: true,\n                            locale: ptBR\n                          })}\n                        </p>\n                      </div>\n                    </div>\n                  </CardHeader>\n\n                  <CardContent className=\"space-y-4 pt-2\">\n                    {/* Verse */}\n                    <div className=\"relative overflow-hidden p-4 bg-muted/30 rounded-2xl\">\n                      <div className=\"absolute left-0 top-0 bottom-0 w-1 bg-primary/40\" />\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <BookOpen className=\"h-3.5 w-3.5 text-primary\" />\n                        <span className=\"font-bold text-xs text-primary\">{post.verseReference}</span>\n                      </div>\n                      <p className=\"font-serif text-base sm:text-lg leading-relaxed italic text-foreground/90\">\n                        \"{post.verseText}\"\n                      </p>\n                    </div>\n\n                    {/* User's Note */}\n                    <p className=\"text-sm leading-relaxed text-foreground/80 font-medium\">{post.note}</p>\n                  </CardContent>\n\n                  <Separator className=\"opacity-50\" />\n\n                  <CardFooter className=\"py-2 px-2\">\n                    <div className=\"flex items-center gap-1 w-full\">\n                      <Button \n                        variant=\"ghost\" \n                        size=\"sm\"\n                        className=\"flex-1 rounded-xl h-9 font-bold text-xs\"\n                        onClick={() => toggleLikeMutation.mutate({ \n                          postId: post.id, \n                          isLiked: post.isLikedByCurrentUser || false \n                        })}\n                        disabled={toggleLikeMutation.isPending}\n                        data-testid={`button-like-post-${post.id}`}\n                      >\n                        <Heart \n                          className={`h-4 w-4 mr-2 ${post.isLikedByCurrentUser ? 'fill-rose-500 text-rose-500' : 'text-muted-foreground'}`} \n                        />\n                        {post.likeCount || 0}\n                      </Button>\n                      <Button \n                        variant=\"ghost\" \n                        size=\"sm\"\n                        className=\"flex-1 rounded-xl h-9 font-bold text-xs text-muted-foreground\"\n                        data-testid=\"button-comment-post\"\n                      >\n                        <MessageCircle className=\"h-4 w-4 mr-2\" />\n                        {post.commentCount || 0}\n                      </Button>\n                      <Button \n                        variant=\"ghost\" \n                        size=\"sm\"\n                        className=\"flex-1 rounded-xl h-9 font-bold text-xs text-muted-foreground\"\n                        data-testid=\"button-share-post\"\n                      >\n                        <Share2 className=\"h-4 w-4 mr-2\" />\n                        Compartilhar\n                      </Button>\n                    </div>\n                  </CardFooter>\n                </Card>\n              ))}\n            </>\n          )}\n        </div>\n\n        {/* Trending Topics */}\n        <Card className=\"mt-8\">\n          <CardHeader>\n            <h3 className=\"font-semibold flex items-center gap-2\">\n              <TrendingUp className=\"h-5 w-5 text-primary\" />\n              {t.community.trending_topics}\n            </h3>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              {[\"Fé e Obras\", \"Jejum Bíblico\", \"Perdão\", \"Oração Eficaz\"].map((topic, index) => (\n                <div\n                  key={index}\n                  className=\"flex items-center justify-between gap-2 p-2 rounded hover-elevate cursor-pointer\"\n                >\n                  <span className=\"text-sm\">{topic}</span>\n                  <Badge variant=\"secondary\">\n                    {Math.floor(Math.random() * 50) + 10} posts\n                  </Badge>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":18980,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 data-[state=inactive]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1912,"size_tokens":null},"client/src/pages/prayers.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { \n  MessageSquare, \n  Plus, \n  Mic, \n  MapPin,\n  Play,\n  Pause,\n  Check,\n  Calendar,\n  Clock,\n  Loader2,\n  Heart,\n  Sparkles,\n  CheckCircle2,\n  Trash2\n} from \"lucide-react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { insertPrayerSchema, type Prayer } from \"@shared/schema\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\n\nconst formSchema = insertPrayerSchema.extend({\n  title: z.string().min(3, \"O título deve ter pelo menos 3 caracteres\"),\n  content: z.string().min(5, \"O conteúdo deve ter pelo menos 5 caracteres\"),\n}).omit({ userId: true });\n\ntype FormData = z.infer<typeof formSchema>;\n\nexport default function Prayers() {\n  const { toast } = useToast();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [activeTab, setActiveTab] = useState(\"active\");\n\n  const { data: prayers = [], isLoading, error } = useQuery<Prayer[]>({\n    queryKey: [\"/api/prayers\"],\n    retry: 2,\n  });\n\n  const form = useForm<FormData>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      title: \"\",\n      content: \"\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: any) => {\n      return await apiRequest(\"POST\", \"/api/prayers\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/prayers\"] });\n      setIsCreateDialogOpen(false);\n      form.reset();\n      setAudioBlob(null);\n      setRecordingTime(0);\n      toast({\n        title: \"Oração registrada!\",\n        description: \"Sua oração foi salva com sucesso.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao registrar oração\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const markAnsweredMutation = useMutation({\n    mutationFn: async ({ id, isAnswered }: { id: string; isAnswered: boolean }) => {\n      return await apiRequest(\"PATCH\", `/api/prayers/${id}`, { \n        isAnswered, \n        answeredAt: isAnswered ? new Date().toISOString() : null \n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/prayers\"] });\n      toast({ title: \"Atualizado!\", description: \"Status da oração atualizado\" });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/prayers/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/prayers\"] });\n      toast({ title: \"Removido!\", description: \"Oração excluída\" });\n    },\n  });\n\n  const onSubmit = async (data: FormData) => {\n    let audioUrl: string | undefined;\n    if (audioBlob) {\n      const base64 = await new Promise<string>((resolve) => {\n        const reader = new FileReader();\n        reader.onloadend = () => resolve(reader.result as string);\n        reader.readAsDataURL(audioBlob);\n      });\n      audioUrl = base64;\n    }\n    createMutation.mutate({ ...data, audioUrl, audioDuration: recordingTime });\n  };\n\n  const activePrayers = prayers.filter(p => !p.isAnswered);\n  const answeredPrayers = prayers.filter(p => p.isAnswered);\n\n  const [audioBlob, setAudioBlob] = useState<Blob | null>(null);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n  const [isPlayingPreview, setIsPlayingPreview] = useState(false);\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const audioChunksRef = useRef<Blob[]>([]);\n  const recordingIntervalRef = useRef<number | null>(null);\n  const streamRef = useRef<MediaStream | null>(null);\n  const previewAudioRef = useRef<HTMLAudioElement | null>(null);\n\n  const MAX_RECORDING_SECONDS = 300;\n  const MAX_AUDIO_SIZE_MB = 5;\n\n  const cleanupRecording = () => {\n    if (recordingIntervalRef.current) {\n      clearInterval(recordingIntervalRef.current);\n      recordingIntervalRef.current = null;\n    }\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n  };\n\n  useEffect(() => {\n    return () => {\n      cleanupRecording();\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!isCreateDialogOpen) {\n      if (isRecording) {\n        handleStopRecording();\n      }\n      cleanupRecording();\n      if (previewUrl) {\n        URL.revokeObjectURL(previewUrl);\n      }\n      setAudioBlob(null);\n      setPreviewUrl(null);\n      setRecordingTime(0);\n      setIsPlayingPreview(false);\n    }\n  }, [isCreateDialogOpen]);\n\n  const handleStartRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      streamRef.current = stream;\n      const mediaRecorder = new MediaRecorder(stream);\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n\n      mediaRecorder.ondataavailable = (event) => {\n        audioChunksRef.current.push(event.data);\n      };\n\n      mediaRecorder.onstop = () => {\n        const audioBlob = new Blob(audioChunksRef.current, { type: \"audio/webm;codecs=opus\" });\n        const sizeMB = audioBlob.size / (1024 * 1024);\n        \n        if (sizeMB > MAX_AUDIO_SIZE_MB) {\n          toast({\n            title: \"Áudio muito grande\",\n            description: `O arquivo excede ${MAX_AUDIO_SIZE_MB}MB. Grave um áudio mais curto.`,\n            variant: \"destructive\",\n          });\n          setAudioBlob(null);\n          setPreviewUrl(null);\n        } else {\n          setAudioBlob(audioBlob);\n          const url = URL.createObjectURL(audioBlob);\n          setPreviewUrl(url);\n          toast({\n            title: \"Áudio gravado!\",\n            description: \"Ouça o preview antes de salvar.\",\n          });\n        }\n        \n        cleanupRecording();\n      };\n\n      mediaRecorder.start();\n      setIsRecording(true);\n      setRecordingTime(0);\n      \n      recordingIntervalRef.current = window.setInterval(() => {\n        setRecordingTime(prev => {\n          const newTime = prev + 1;\n          if (newTime >= MAX_RECORDING_SECONDS) {\n            handleStopRecording();\n            toast({\n              title: \"Gravação finalizada\",\n              description: \"Tempo máximo de 5 minutos atingido\",\n            });\n          }\n          return newTime;\n        });\n      }, 1000);\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"Permissão de microfone negada\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleStopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <Loader2 className=\"h-12 w-12 animate-spin text-primary mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">Carregando orações...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-background p-6\">\n        <div className=\"max-w-5xl mx-auto\">\n          <Card className=\"border-destructive\">\n            <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <div className=\"flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10 mb-4\">\n                <MessageSquare className=\"h-8 w-8 text-destructive\" />\n              </div>\n              <h3 className=\"font-semibold text-lg mb-2\">Erro ao carregar orações</h3>\n              <p className=\"text-muted-foreground mb-4\">\n                Não foi possível carregar suas orações. Tente novamente.\n              </p>\n              <Button onClick={() => window.location.reload()} data-testid=\"button-retry\">\n                Tentar Novamente\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden mesh-primary\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"relative z-10 max-w-5xl mx-auto p-6\">\n        <motion.div \n          initial={{ opacity: 0, y: -20 }} \n          animate={{ opacity: 1, y: 0 }}\n          className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-10\"\n        >\n          <div className=\"flex items-center gap-4\">\n            <div className=\"h-16 w-16 rounded-2xl bg-primary flex items-center justify-center shadow-lg shadow-primary/20\">\n              <Heart className=\"h-8 w-8 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"font-display text-4xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent\" data-testid=\"text-page-title\">\n                Minhas Orações\n              </h1>\n              <p className=\"text-lg text-muted-foreground\">\n                Registre e acompanhe suas orações\n              </p>\n            </div>\n          </div>\n          \n          <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n            <DialogTrigger asChild>\n              <Button size=\"lg\" className=\"rounded-xl h-12 px-6 shadow-lg shadow-primary/20\" data-testid=\"button-new-prayer\">\n                <Plus className=\"h-5 w-5 mr-2\" />\n                Nova Oração\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"rounded-2xl\">\n              <DialogHeader>\n                <DialogTitle>Registrar Nova Oração</DialogTitle>\n                <DialogDescription>\n                  Escreva ou grave sua oração em áudio\n                </DialogDescription>\n              </DialogHeader>\n              \n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"title\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Título</FormLabel>\n                        <FormControl>\n                          <Input \n                            placeholder=\"Ex: Pela saúde da família\"\n                            className=\"rounded-xl\"\n                            data-testid=\"input-prayer-title\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"content\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Conteúdo</FormLabel>\n                        <FormControl>\n                          <Textarea \n                            placeholder=\"Escreva sua oração...\"\n                            className=\"min-h-[120px] rounded-xl\"\n                            data-testid=\"textarea-prayer-content\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <div className=\"space-y-2\">\n                    <FormLabel>Ou grave em áudio</FormLabel>\n                    <div className=\"flex items-center gap-3\">\n                      {!isRecording ? (\n                        <Button \n                          type=\"button\"\n                          variant=\"outline\" \n                          className=\"flex-1 rounded-xl\"\n                          onClick={handleStartRecording}\n                          data-testid=\"button-start-recording\"\n                        >\n                          <Mic className=\"h-4 w-4 mr-2\" />\n                          Gravar Oração\n                        </Button>\n                      ) : (\n                        <Button \n                          type=\"button\"\n                          variant=\"destructive\" \n                          className=\"flex-1 rounded-xl\"\n                          onClick={handleStopRecording}\n                          data-testid=\"button-stop-recording\"\n                        >\n                          <Pause className=\"h-4 w-4 mr-2\" />\n                          Parar Gravação\n                        </Button>\n                      )}\n                    </div>\n                    {isRecording && (\n                      <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                        <div className=\"h-2 w-2 rounded-full bg-red-500 animate-pulse\" />\n                        <span>Gravando... {Math.floor(recordingTime / 60)}:{String(recordingTime % 60).padStart(2, '0')}</span>\n                    </div>\n                  )}\n                  \n                  {audioBlob && previewUrl && (\n                    <div className=\"space-y-3 p-4 bg-muted rounded-xl\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm font-medium\">Preview da Gravação</span>\n                        <span className=\"text-xs text-muted-foreground\">\n                          {Math.floor(recordingTime / 60)}:{String(recordingTime % 60).padStart(2, '0')}\n                        </span>\n                      </div>\n                      <audio \n                        ref={previewAudioRef}\n                        controls \n                        className=\"w-full h-8\"\n                        src={previewUrl}\n                        onPlay={() => setIsPlayingPreview(true)}\n                        onPause={() => setIsPlayingPreview(false)}\n                        onEnded={() => setIsPlayingPreview(false)}\n                      />\n                      <Button \n                        type=\"button\"\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"w-full rounded-xl\"\n                        onClick={() => {\n                          setAudioBlob(null);\n                          setPreviewUrl(null);\n                          setRecordingTime(0);\n                        }}\n                      >\n                        <Mic className=\"h-3 w-3 mr-2\" />\n                        Gravar Novamente\n                      </Button>\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <MapPin className=\"h-4 w-4\" />\n                  <span>Adicionar localização (opcional)</span>\n                </div>\n                \n                <DialogFooter>\n                  <Button \n                    type=\"button\"\n                    variant=\"outline\" \n                    className=\"rounded-xl\"\n                    onClick={() => setIsCreateDialogOpen(false)}\n                    data-testid=\"button-cancel-prayer\"\n                  >\n                    Cancelar\n                  </Button>\n                  <Button \n                    type=\"submit\"\n                    className=\"rounded-xl\"\n                    disabled={createMutation.isPending}\n                    data-testid=\"button-save-prayer\"\n                  >\n                    {createMutation.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n                    {createMutation.isPending ? \"Salvando...\" : \"Salvar Oração\"}\n                  </Button>\n                </DialogFooter>\n              </form>\n            </Form>\n          </DialogContent>\n          </Dialog>\n        </motion.div>\n\n        <motion.div \n          initial={{ opacity: 0, y: 20 }} \n          animate={{ opacity: 1, y: 0 }} \n          transition={{ delay: 0.1 }}\n          className=\"grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 mb-10\"\n        >\n          {[\n            { label: \"Orações Ativas\", value: activePrayers.length, icon: MessageSquare, color: \"text-primary\", testId: \"text-active-prayers\" },\n            { label: \"Respondidas\", value: answeredPrayers.length, icon: CheckCircle2, color: \"text-green-600\", testId: \"text-answered-prayers\" },\n            { label: \"Total\", value: prayers.length, icon: Sparkles, color: \"text-amber-600\", testId: \"text-total-prayers\" },\n          ].map((stat, idx) => (\n            <motion.div\n              key={stat.label}\n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ delay: 0.1 + idx * 0.05 }}\n            >\n              <Card className=\"rounded-2xl border-none glass-premium hover-premium\">\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2 gap-2\">\n                  <CardTitle className=\"text-sm font-medium text-muted-foreground\">{stat.label}</CardTitle>\n                  <div className=\"p-2 rounded-xl bg-muted/50\">\n                    <stat.icon className={`h-4 w-4 ${stat.color}`} />\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <div className={`text-3xl font-bold ${stat.color}`} data-testid={stat.testId}>\n                    {stat.value}\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          ))}\n        </motion.div>\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }}>\n          <Tabs value={activeTab} onValueChange={setActiveTab}>\n            <TabsList className=\"mb-8 bg-muted/50 p-1.5 rounded-2xl h-auto\">\n              <TabsTrigger \n                value=\"active\" \n                className=\"rounded-xl data-[state=active]:bg-background data-[state=active]:shadow-lg transition-all py-3 px-6\"\n                data-testid=\"tab-active-prayers\"\n              >\n                Ativas ({activePrayers.length})\n              </TabsTrigger>\n              <TabsTrigger \n                value=\"answered\" \n                className=\"rounded-xl data-[state=active]:bg-background data-[state=active]:shadow-lg transition-all py-3 px-6\"\n                data-testid=\"tab-answered-prayers\"\n              >\n                Respondidas ({answeredPrayers.length})\n              </TabsTrigger>\n            </TabsList>\n            \n            <TabsContent value=\"active\">\n              {activePrayers.length === 0 ? (\n                <Card className=\"rounded-2xl border-dashed border-none bg-muted/30\">\n                  <CardContent className=\"flex flex-col items-center justify-center py-16 text-center\">\n                    <div className=\"flex h-20 w-20 items-center justify-center rounded-[2rem] bg-muted/50 mb-6\">\n                      <Heart className=\"h-10 w-10 text-muted-foreground\" />\n                    </div>\n                    <h3 className=\"font-bold text-xl mb-2\">Nenhuma oração ativa</h3>\n                    <p className=\"text-muted-foreground mb-6 max-w-md\">\n                      Registre sua primeira oração e acompanhe as bênçãos de Deus\n                    </p>\n                    <Button className=\"rounded-xl\" onClick={() => setIsCreateDialogOpen(true)}>\n                      <Plus className=\"h-4 w-4 mr-2\" />\n                      Nova Oração\n                    </Button>\n                  </CardContent>\n                </Card>\n              ) : (\n                <div className=\"space-y-4\">\n                  <AnimatePresence mode=\"popLayout\">\n                    {activePrayers.map((prayer, idx) => (\n                      <motion.div\n                        key={prayer.id}\n                        layout\n                        initial={{ opacity: 0, y: 20 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        exit={{ opacity: 0, scale: 0.95 }}\n                        transition={{ delay: idx * 0.05 }}\n                      >\n                        <Card className=\"rounded-2xl border-none glass-premium hover-premium group transition-all\" data-testid={`card-prayer-${prayer.id}`}>\n                          <CardHeader className=\"pb-3\">\n                            <div className=\"flex items-start justify-between gap-4\">\n                              <div className=\"flex-1\">\n                                <CardTitle className=\"text-xl font-bold mb-2 group-hover:text-primary transition-colors\">{prayer.title}</CardTitle>\n                                <div className=\"flex items-center gap-3 text-sm text-muted-foreground\">\n                                  <div className=\"flex items-center gap-1.5\">\n                                    <Clock className=\"h-3.5 w-3.5\" />\n                                    {formatDistanceToNow(new Date(prayer.createdAt!), { \n                                      addSuffix: true,\n                                      locale: ptBR \n                                    })}\n                                  </div>\n                                  {prayer.location && (\n                                    <div className=\"flex items-center gap-1.5\">\n                                      <MapPin className=\"h-3.5 w-3.5\" />\n                                      {prayer.location.name || \"Localização salva\"}\n                                    </div>\n                                  )}\n                                </div>\n                              </div>\n                              <Badge variant=\"secondary\" className=\"rounded-full px-3 py-1 font-bold text-[10px] uppercase tracking-widest\">Ativa</Badge>\n                            </div>\n                          </CardHeader>\n                          \n                          <CardContent>\n                            {prayer.content && (\n                              <p className=\"text-muted-foreground leading-relaxed mb-4\">\n                                {prayer.content}\n                              </p>\n                            )}\n                            \n                            {prayer.audioUrl && (\n                              <div className=\"p-4 bg-muted/50 rounded-xl\">\n                                <div className=\"flex items-center gap-2 mb-3\">\n                                  <div className=\"p-1.5 rounded-lg bg-primary/10\">\n                                    <Mic className=\"h-4 w-4 text-primary\" />\n                                  </div>\n                                  <span className=\"text-sm font-medium\">\n                                    Gravação de {Math.floor((prayer.audioDuration || 0) / 60)}:\n                                    {String((prayer.audioDuration || 0) % 60).padStart(2, '0')}\n                                  </span>\n                                </div>\n                                <audio \n                                  controls \n                                  className=\"w-full\" \n                                  src={prayer.audioUrl}\n                                  data-testid={`audio-prayer-${prayer.id}`}\n                                />\n                              </div>\n                            )}\n                          </CardContent>\n                          \n                          <CardFooter className=\"gap-3 pt-2\">\n                            <Button \n                              variant=\"default\" \n                              size=\"sm\"\n                              className=\"rounded-xl\"\n                              onClick={() => markAnsweredMutation.mutate({ id: prayer.id, isAnswered: true })}\n                              data-testid={`button-mark-answered-${prayer.id}`}\n                            >\n                              <Check className=\"h-4 w-4 mr-1\" />\n                              Marcar Respondida\n                            </Button>\n                            <Button \n                              variant=\"ghost\" \n                              size=\"icon\"\n                              className=\"rounded-xl hover:bg-destructive/10\"\n                              onClick={() => deleteMutation.mutate(prayer.id)}\n                              data-testid={`button-delete-prayer-${prayer.id}`}\n                            >\n                              <Trash2 className=\"h-4 w-4 text-destructive/70\" />\n                            </Button>\n                          </CardFooter>\n                        </Card>\n                      </motion.div>\n                    ))}\n                  </AnimatePresence>\n                </div>\n              )}\n            </TabsContent>\n            \n            <TabsContent value=\"answered\">\n              {answeredPrayers.length === 0 ? (\n                <Card className=\"rounded-2xl border-dashed border-none bg-muted/30\">\n                  <CardContent className=\"flex flex-col items-center justify-center py-16 text-center\">\n                    <div className=\"flex h-20 w-20 items-center justify-center rounded-[2rem] bg-green-500/10 mb-6\">\n                      <CheckCircle2 className=\"h-10 w-10 text-green-600\" />\n                    </div>\n                    <h3 className=\"font-bold text-xl mb-2\">Nenhuma oração respondida ainda</h3>\n                    <p className=\"text-muted-foreground max-w-md\">\n                      Quando Deus responder suas orações, marque-as aqui para celebrar!\n                    </p>\n                  </CardContent>\n                </Card>\n              ) : (\n                <div className=\"space-y-4\">\n                  <AnimatePresence mode=\"popLayout\">\n                    {answeredPrayers.map((prayer, idx) => (\n                      <motion.div\n                        key={prayer.id}\n                        layout\n                        initial={{ opacity: 0, y: 20 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        exit={{ opacity: 0, scale: 0.95 }}\n                        transition={{ delay: idx * 0.05 }}\n                      >\n                        <Card className=\"rounded-2xl border-none glass-premium hover-premium ring-2 ring-green-500/20 hover:ring-green-500/40 transition-all\" data-testid={`card-answered-${prayer.id}`}>\n                          <CardHeader className=\"pb-3\">\n                            <div className=\"flex items-start justify-between gap-4\">\n                              <div className=\"flex-1\">\n                                <CardTitle className=\"text-xl font-bold mb-2\">{prayer.title}</CardTitle>\n                                <div className=\"flex items-center gap-3 text-sm text-muted-foreground\">\n                                  <div className=\"flex items-center gap-1.5\">\n                                    <Calendar className=\"h-3.5 w-3.5\" />\n                                    Respondida {prayer.answeredAt && formatDistanceToNow(new Date(prayer.answeredAt), { \n                                      addSuffix: true,\n                                      locale: ptBR \n                                    })}\n                                  </div>\n                                </div>\n                              </div>\n                              <Badge className=\"rounded-full px-3 py-1 bg-green-500/10 text-green-600 border-none font-bold text-[10px] uppercase tracking-widest\">Respondida</Badge>\n                            </div>\n                          </CardHeader>\n                          \n                          {prayer.content && (\n                            <CardContent>\n                              <p className=\"text-muted-foreground leading-relaxed\">\n                                {prayer.content}\n                              </p>\n                            </CardContent>\n                          )}\n                          \n                          <CardFooter className=\"gap-3 pt-2\">\n                            <Button \n                              variant=\"outline\" \n                              size=\"sm\"\n                              className=\"rounded-xl\"\n                              onClick={() => markAnsweredMutation.mutate({ id: prayer.id, isAnswered: false })}\n                              data-testid={`button-unmark-answered-${prayer.id}`}\n                            >\n                              Mover para Ativas\n                            </Button>\n                            <Button \n                              variant=\"ghost\" \n                              size=\"icon\"\n                              className=\"rounded-xl hover:bg-destructive/10\"\n                              onClick={() => deleteMutation.mutate(prayer.id)}\n                              data-testid={`button-delete-answered-${prayer.id}`}\n                            >\n                              <Trash2 className=\"h-4 w-4 text-destructive/70\" />\n                            </Button>\n                          </CardFooter>\n                        </Card>\n                      </motion.div>\n                    ))}\n                  </AnimatePresence>\n                </div>\n              )}\n            </TabsContent>\n          </Tabs>\n        </motion.div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":30490,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"server/replitAuth.ts":{"content":"// Simple session-based authentication (no external OAuth)\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport connectPg from \"connect-pg-simple\";\nimport { readFileSync } from \"fs\";\nimport { join } from \"path\";\n\nfunction getDatabaseUrl(): string {\n  // First, try to get from internal environment cache (most stable)\n  try {\n    const envCachePath = join(process.env.HOME || '/home/runner', 'workspace/.cache/replit/env/latest.json');\n    const envCache = JSON.parse(readFileSync(envCachePath, 'utf8'));\n    if (envCache.environment?.DATABASE_URL && envCache.environment.DATABASE_URL.startsWith('postgresql://')) {\n      return envCache.environment.DATABASE_URL;\n    }\n  } catch (e) {\n    // Ignore cache read errors\n  }\n\n  // Fallback to environment variable\n  if (process.env.DATABASE_URL && process.env.DATABASE_URL.startsWith('postgresql://')) {\n    return process.env.DATABASE_URL;\n  }\n\n  throw new Error(\"No valid database URL found for sessions\");\n}\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const databaseUrl = getDatabaseUrl();\n  console.log(\"[Session] Initializing session store with PostgreSQL...\");\n  \n  const sessionStore = new pgStore({\n    conString: databaseUrl,\n    createTableIfMissing: true, // Auto-create sessions table if missing\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n    errorLog: (err: any) => {\n      console.error(\"[Session Store Error]\", err);\n    },\n  });\n  \n  return session({\n    secret: process.env.SESSION_SECRET || 'bibliafs-session-secret-key-2024',\n    store: sessionStore,\n    resave: true,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: false, // Allow cookies over HTTP in development\n      sameSite: 'lax',\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n\n  // Simple logout route - just destroy session\n  app.get(\"/api/logout\", (req, res) => {\n    req.session.destroy((err) => {\n      if (err) {\n        console.error(\"Error destroying session:\", err);\n      }\n      res.redirect(\"/\");\n    });\n  });\n\n  // POST logout for API calls\n  app.post(\"/api/auth/logout\", (req, res) => {\n    req.session.destroy((err) => {\n      if (err) {\n        console.error(\"Error destroying session:\", err);\n        return res.status(500).json({ message: \"Erro ao fazer logout\" });\n      }\n      res.json({ success: true });\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = (req.session as any)?.user;\n\n  if (!user || !user.claims || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    // Restore user to req for route handlers\n    (req as any).user = user;\n    return next();\n  }\n\n  // Session expired\n  return res.status(401).json({ message: \"Session expired\" });\n};\n","path":null,"size_bytes":3038,"size_tokens":null},"server/index.ts":{"content":"import \"dotenv/config\";\nimport express, { type Request, Response, NextFunction } from \"express\";\nimport helmet from \"helmet\";\nimport rateLimit from \"express-rate-limit\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport { startNotificationScheduler } from \"./notification-scheduler\";\n\nconst app = express();\n\n// Trust proxy for rate limiting behind reverse proxy (Replit)\napp.set('trust proxy', 1);\n\n// Security headers with Helmet\nconst isProduction = process.env.NODE_ENV === 'production' || process.env.REPLIT_DEPLOYMENT === '1';\n\nif (isProduction) {\n  app.use(helmet({\n    contentSecurityPolicy: {\n      directives: {\n        defaultSrc: [\"'self'\"],\n        scriptSrc: [\"'self'\", \"'unsafe-eval'\", \"'unsafe-hashes'\", \"https://js.stripe.com\", \"https://m.stripe.network\"],\n        styleSrc: [\"'self'\", \"'unsafe-inline'\", \"https://fonts.googleapis.com\"],\n        fontSrc: [\"'self'\", \"https://fonts.gstatic.com\", \"data:\"],\n        imgSrc: [\"'self'\", \"data:\", \"https:\", \"blob:\", \"https://*.stripe.com\"],\n        mediaSrc: [\"'self'\", \"blob:\"],\n        connectSrc: [\n          \"'self'\", \n          \"https://api.stripe.com\", \n          \"https://m.stripe.network\",\n          \"https://*.supabase.co\", \n          \"wss://*.supabase.co\", \n          \"https://api.openai.com\",\n          \"https://sql.js.org\"\n        ],\n        frameSrc: [\n          \"'self'\", \n          \"https://js.stripe.com\", \n          \"https://hooks.stripe.com\",\n          \"https://checkout.stripe.com\"\n        ],\n        objectSrc: [\"'none'\"],\n        upgradeInsecureRequests: [],\n      },\n    },\n    crossOriginEmbedderPolicy: false,\n    crossOriginResourcePolicy: { policy: \"cross-origin\" },\n    frameguard: { action: 'sameorigin' },\n  }));\n} else {\n  // In development, set permissive headers for Replit preview\n  // MUST run before any other middleware to ensure headers are set first\n  app.use((req, res, next) => {\n    // Completely disable security headers that might block iframes in dev\n    res.removeHeader('X-Frame-Options');\n    res.removeHeader('Content-Security-Policy');\n    \n    // Explicitly set permissive headers for Replit\n    res.setHeader('Access-Control-Allow-Origin', '*');\n    res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\n    res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');\n\n    // Diagnostic log (internal only)\n    if (req.path === '/debug-csp') {\n      return res.json({\n        csp: res.getHeader('Content-Security-Policy'),\n        xfo: res.getHeader('X-Frame-Options'),\n        env: process.env.NODE_ENV,\n        isDev: !isProduction\n      });\n    }\n    next();\n  });\n}\n\n// Rate limiting ONLY for API endpoints (not static assets)\nconst apiLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 200, // Limit each IP to 200 API requests per windowMs\n  message: { error: \"Muitas requisições. Tente novamente em alguns minutos.\" },\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\n// Stricter rate limiting for auth endpoints\nconst authLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 10, // Limit each IP to 10 auth attempts per windowMs\n  message: { error: \"Muitas tentativas de login. Aguarde 15 minutos.\" },\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\n// Apply rate limiting only to /api routes\napp.use('/api', apiLimiter);\napp.use('/api/auth/login', authLimiter);\napp.use('/api/auth/register', authLimiter);\napp.use('/api/auth/forgot-password', authLimiter);\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n    \n    startNotificationScheduler();\n  });\n})();\n","path":null,"size_bytes":5584,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"Inter\", \"var(--font-sans)\"],\n        serif: [\"Crimson Text\", \"var(--font-serif)\"],\n        display: [\"Playfair Display\", \"serif\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":4123,"size_tokens":null},"client/src/components/ThemeToggle.tsx":{"content":"import { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useTheme } from \"@/contexts/ThemeContext\";\n\nexport function ThemeToggle() {\n  const { theme, toggleTheme } = useTheme();\n\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      data-testid=\"button-theme-toggle\"\n      className=\"h-10 w-10 rounded-xl bg-background/50 dark:bg-card/40 backdrop-blur-sm border-primary/20 dark:border-primary/30 hover:border-primary/50 hover:bg-primary/10 dark:hover:bg-primary/20 hover:text-primary transition-all shadow-sm active-elevate-2 group relative overflow-hidden\"\n    >\n      <div className=\"absolute inset-0 bg-gradient-to-tr from-primary/10 via-transparent to-primary/5 dark:from-primary/20 dark:to-primary/10 opacity-0 group-hover:opacity-100 transition-opacity\" />\n      <div className=\"relative z-10 flex items-center justify-center\">\n        {theme === \"light\" ? (\n          <Moon className=\"h-5 w-5 text-indigo-500\" />\n        ) : (\n          <Sun className=\"h-5 w-5 text-yellow-500\" />\n        )}\n      </div>\n      <span className=\"sr-only\">Alternar tema</span>\n    </Button>\n  );\n}\n","path":null,"size_bytes":1174,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"outline\"\n      size=\"icon\"\n      className={cn(\"h-10 w-10 rounded-xl bg-background/50 dark:bg-card/40 backdrop-blur-sm border-primary/20 dark:border-primary/30 hover:border-primary/50 hover:bg-primary/10 dark:hover:bg-primary/20 hover:text-primary transition-all shadow-sm active-elevate-2 group relative overflow-hidden\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <div className=\"absolute inset-0 bg-gradient-to-tr from-primary/10 via-transparent to-primary/5 dark:from-primary/20 dark:to-primary/10 opacity-0 group-hover:opacity-100 transition-opacity\" />\n      <PanelLeftIcon className=\"relative z-10 text-primary\" />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":22351,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/pages/bible.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { \n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { \n  ChevronLeft, \n  ChevronRight, \n  Search,\n  Highlighter,\n  StickyNote,\n  Type\n} from \"lucide-react\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { getBookName } from \"@/lib/i18n\";\n\nconst highlightColors = [\n  { name: \"Amarelo\", value: \"yellow\", class: \"bg-yellow-200 dark:bg-yellow-900/40\" },\n  { name: \"Verde\", value: \"green\", class: \"bg-green-200 dark:bg-green-900/40\" },\n  { name: \"Azul\", value: \"blue\", class: \"bg-blue-200 dark:bg-blue-900/40\" },\n  { name: \"Roxo\", value: \"purple\", class: \"bg-purple-200 dark:bg-purple-900/40\" },\n  { name: \"Rosa\", value: \"pink\", class: \"bg-pink-200 dark:bg-pink-900/40\" },\n  { name: \"Laranja\", value: \"orange\", class: \"bg-orange-200 dark:bg-orange-900/40\" },\n];\n\n// Bible book abbreviations\nconst bibleBookAbbrevs = [\n  'gn', 'ex', 'lv', 'nm', 'dt', 'js', 'jz', 'rt', '1sm', '2sm',\n  '1rs', '2rs', '1cr', '2cr', 'ed', 'ne', 'et', 'job', 'sl', 'pv',\n  'ec', 'ct', 'is', 'jr', 'lm', 'ez', 'dn', 'os', 'jl', 'am',\n  'ob', 'jn', 'mq', 'na', 'hc', 'sf', 'ag', 'zc', 'ml',\n  'mt', 'mc', 'lc', 'jo', 'at', 'rm', '1co', '2co', 'gl', 'ef',\n  'fp', 'cl', '1ts', '2ts', '1tm', '2tm', 'tt', 'fm', 'hb', 'tg',\n  '1pe', '2pe', '1jo', '2jo', '3jo', 'jd', 'ap'\n];\n\nexport default function Bible() {\n  const { language } = useLanguage();\n  const [selectedBook, setSelectedBook] = useState(\"jo\");\n  const [selectedChapter, setSelectedChapter] = useState(3);\n  const [selectedVersion, setSelectedVersion] = useState(\"nvi\");\n  const [fontSize, setFontSize] = useState(18);\n  const [selectedVerse, setSelectedVerse] = useState<number | null>(null);\n\n  // Sample verses from John 3\n  const sampleVerses = [\n    { verse: 1, text: \"Havia, entre os fariseus, um homem chamado Nicodemos, um dos principais dos judeus.\" },\n    { verse: 2, text: \"Este, de noite, foi ter com Jesus e lhe disse: Rabi, sabemos que és Mestre vindo da parte de Deus; porque ninguém pode fazer estes sinais que tu fazes, se Deus não estiver com ele.\" },\n    { verse: 3, text: \"A isto, respondeu Jesus: Em verdade, em verdade te digo que, se alguém não nascer de novo, não pode ver o reino de Deus.\" },\n    { verse: 16, text: \"Porque Deus amou ao mundo de tal maneira que deu o seu Filho unigênito, para que todo o que nele crê não pereça, mas tenha a vida eterna.\" },\n    { verse: 17, text: \"Porquanto Deus enviou o seu Filho ao mundo, não para que julgasse o mundo, mas para que o mundo fosse salvo por ele.\" },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Floating Toolbar */}\n      <div className=\"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 border-b\">\n        <div className=\"max-w-4xl mx-auto px-6 py-4 sm:px-8\">\n          <div className=\"flex flex-col gap-4 sm:gap-3\">\n            {/* Navigation Row */}\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <Button variant=\"outline\" size=\"icon\" data-testid=\"button-prev-chapter\">\n                <ChevronLeft className=\"h-4 w-4\" />\n              </Button>\n              \n              <Select value={selectedVersion} onValueChange={setSelectedVersion}>\n                <SelectTrigger className=\"w-20 sm:w-28\" data-testid=\"select-version\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"nvi\">NVI</SelectItem>\n                  <SelectItem value=\"acf\">ACF</SelectItem>\n                  <SelectItem value=\"arc\">ARC</SelectItem>\n                  <SelectItem value=\"ra\">RA</SelectItem>\n                </SelectContent>\n              </Select>\n              \n              <Select value={selectedBook} onValueChange={setSelectedBook}>\n                <SelectTrigger className=\"w-32 sm:w-40\" data-testid=\"select-book\">\n                  <SelectValue>{getBookName(selectedBook, language)}</SelectValue>\n                </SelectTrigger>\n                <SelectContent>\n                  {bibleBookAbbrevs.map((abbrev) => (\n                    <SelectItem key={abbrev} value={abbrev}>\n                      {getBookName(abbrev, language)}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              \n              <Select value={selectedChapter.toString()} onValueChange={(v) => setSelectedChapter(parseInt(v))}>\n                <SelectTrigger className=\"w-20 sm:w-24\" data-testid=\"select-chapter\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {Array.from({ length: 50 }, (_, i) => i + 1).map((ch) => (\n                    <SelectItem key={ch} value={ch.toString()}>\n                      Cap. {ch}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              \n              <Button variant=\"outline\" size=\"icon\" data-testid=\"button-next-chapter\">\n                <ChevronRight className=\"h-4 w-4\" />\n              </Button>\n\n              {/* Font Size Controls - Mobile */}\n              <div className=\"flex items-center gap-1 ml-auto sm:ml-2\">\n                <Type className=\"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground\" />\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  onClick={() => setFontSize(Math.max(14, fontSize - 2))}\n                  className=\"px-2\"\n                  data-testid=\"button-decrease-font\"\n                >\n                  A-\n                </Button>\n                <span className=\"text-xs sm:text-sm min-w-10 text-center\">{fontSize}px</span>\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  onClick={() => setFontSize(Math.min(24, fontSize + 2))}\n                  className=\"px-2\"\n                  data-testid=\"button-increase-font\"\n                >\n                  A+\n                </Button>\n              </div>\n            </div>\n\n            {/* Tools Row */}\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <Popover>\n                <PopoverTrigger asChild>\n                  <Button variant=\"outline\" size=\"sm\" data-testid=\"button-highlight-tool\">\n                    <Highlighter className=\"h-4 w-4 mr-1 sm:mr-2\" />\n                    <span className=\"hidden sm:inline\">Destacar</span>\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent className=\"w-56\">\n                  <div className=\"space-y-3\">\n                    <h4 className=\"font-medium text-sm\">Cores de Destaque</h4>\n                    <div className=\"grid grid-cols-3 gap-2\">\n                      {highlightColors.map((color) => (\n                        <button\n                          key={color.value}\n                          className={`${color.class} rounded-md p-3 border-2 border-transparent hover:border-primary transition-colors`}\n                          data-testid={`button-highlight-${color.value}`}\n                        >\n                          <span className=\"sr-only\">{color.name}</span>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </PopoverContent>\n              </Popover>\n\n              {/* Search */}\n              <div className=\"flex-1 sm:flex-none ml-auto\">\n                <div className=\"relative w-full sm:w-56\">\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                  <Input \n                    placeholder=\"Buscar...\" \n                    className=\"pl-9 text-sm\"\n                    data-testid=\"input-search-bible\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Bible Reading Area */}\n      <div className=\"max-w-4xl mx-auto px-6 sm:px-8 py-6 sm:py-12\">\n        <Card className=\"border-none shadow-none\">\n          <CardHeader className=\"text-center pb-8\">\n            <div className=\"space-y-2\">\n              <Badge variant=\"secondary\" className=\"mb-2\">{selectedBook}</Badge>\n              <CardTitle className=\"font-display text-3xl md:text-4xl\">\n                Capítulo {selectedChapter}\n              </CardTitle>\n            </div>\n          </CardHeader>\n          \n          <CardContent>\n            <div className=\"space-y-6 font-serif\" style={{ fontSize: `${fontSize}px`, lineHeight: 1.8 }}>\n              {sampleVerses.map((item) => (\n                <div \n                  key={item.verse} \n                  className=\"group relative\"\n                  data-testid={`verse-${item.verse}`}\n                >\n                  <span className=\"absolute -left-12 top-0 text-sm font-sans text-muted-foreground select-none\">\n                    {item.verse}\n                  </span>\n                  <p\n                    className={`cursor-pointer rounded px-2 py-1 transition-colors ${\n                      selectedVerse === item.verse ? 'bg-primary/10' : 'hover:bg-muted/50'\n                    }`}\n                    onClick={() => setSelectedVerse(item.verse)}\n                  >\n                    {item.text}\n                  </p>\n                </div>\n              ))}\n            </div>\n\n            {/* Verse Actions (appears when verse is selected) */}\n            {selectedVerse && (\n              <div className=\"mt-8 p-4 bg-muted rounded-lg\">\n                <div className=\"flex items-center gap-2 mb-3\">\n                  <Badge variant=\"secondary\">{selectedBook} {selectedChapter}:{selectedVerse}</Badge>\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button size=\"sm\" variant=\"outline\" data-testid=\"button-add-note\">\n                    <StickyNote className=\"h-4 w-4 mr-2\" />\n                    Adicionar Nota\n                  </Button>\n                  <Button size=\"sm\" variant=\"outline\" data-testid=\"button-share-verse\">\n                    Compartilhar\n                  </Button>\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":10695,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1202,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/pages/home.tsx":{"content":"import { useEffect } from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { \n  BookOpen, \n  MessageSquare, \n  Users, \n  Brain,\n  Headphones,\n  Sparkles,\n  Calendar,\n  ChevronRight,\n  Flame,\n  GraduationCap,\n  Loader2,\n  TrendingUp,\n  Star,\n  Zap,\n  Crown,\n  Heart\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport type { ReadingPlan } from \"@shared/schema\";\nimport { DailyVerse } from \"@/components/DailyVerse\";\nimport { GamificationBanner } from \"@/components/GamificationBanner\";\nimport { AISearch } from \"@/components/AISearch\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nexport default function Home() {\n  const { toast } = useToast();\n  const { isAuthenticated, isLoading, user } = useAuth();\n\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      toast({\n        title: \"Não autenticado\",\n        description: \"Redirecionando para login...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/api/login\";\n      }, 500);\n    }\n  }, [isAuthenticated, isLoading, toast]);\n\n  const { data: stats } = useQuery<{ communityPosts: string | number }>({\n    queryKey: [\"/api/stats/dashboard\"],\n    enabled: isAuthenticated,\n  });\n\n  const { data: currentPlan } = useQuery<ReadingPlan>({\n    queryKey: [\"/api/reading-plans/current\"],\n    enabled: isAuthenticated,\n  });\n\n  const { data: recentActivity, isLoading: isLoadingActivity } = useQuery<any[]>({\n    queryKey: [\"/api/activity/recent\"],\n    enabled: isAuthenticated,\n  });\n\n  if (isLoading || !isAuthenticated) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center space-y-3\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary mx-auto\" />\n          <p className=\"text-sm text-muted-foreground font-bold uppercase tracking-widest animate-pulse\">Iniciando Experiência Premium...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const quickActions = [\n    { icon: GraduationCap, label: \"Modo Professor\", href: \"/teacher\", gradient: \"from-blue-700 to-indigo-900\", shadow: \"shadow-blue-500/30\" },\n    { icon: MessageSquare, label: \"Nova Oração\", href: \"/prayers\", gradient: \"from-rose-500 to-pink-700\", shadow: \"shadow-rose-500/30\" },\n    { icon: Headphones, label: \"Ouvir Podcast\", href: \"/podcasts\", gradient: \"from-teal-500 to-emerald-700\", shadow: \"shadow-teal-500/30\" },\n    { icon: Users, label: \"Comunidade\", href: \"/community\", gradient: \"from-amber-500 to-orange-700\", shadow: \"shadow-amber-500/30\" },\n  ];\n\n  const containerVariants = {\n    hidden: { opacity: 0 },\n    visible: {\n      opacity: 1,\n      transition: { staggerChildren: 0.1 }\n    }\n  };\n\n  const itemVariants = {\n    hidden: { opacity: 0, y: 20 },\n    visible: { opacity: 1, y: 0, transition: { duration: 0.5, ease: \"easeOut\" } }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden mesh-primary\">\n      <Helmet>\n        <title>Dashboard - BíbliaFS | Sua Jornada Espiritual</title>\n        <meta name=\"description\" content=\"Acesse seu progresso de leitura, planos de estudo e ferramentas de IA teológica no BíbliaFS.\" />\n        <link rel=\"canonical\" href=\"https://bibliafs.com.br/home\" />\n      </Helmet>\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n\n      <motion.div \n        variants={containerVariants}\n        initial=\"hidden\"\n        animate=\"visible\"\n        className=\"relative z-10 max-w-5xl mx-auto px-4 sm:px-6 py-6 sm:py-10 space-y-8\"\n      >\n        <motion.div variants={itemVariants} className=\"text-center space-y-3\">\n          <div className=\"flex items-center justify-center gap-2 mb-2\">\n            <div className=\"h-px w-12 bg-gradient-to-r from-transparent via-amber-400 to-transparent shadow-[0_0_15px_rgba(251,191,36,0.4)]\" />\n            <Crown className=\"h-8 w-8 text-amber-500 fill-amber-500/30 drop-shadow-[0_0_12px_rgba(245,158,11,0.7)] animate-pulse\" />\n            <div className=\"h-px w-12 bg-gradient-to-l from-transparent via-amber-400 to-transparent shadow-[0_0_15px_rgba(251,191,36,0.4)]\" />\n          </div>\n          <p className=\"text-[12px] font-semibold text-muted-foreground uppercase tracking-[0.5em] drop-shadow-sm\">RECONHECIMENTO DE USUÁRIO</p>\n          <h1 className=\"font-display text-2xl sm:text-3xl font-semibold bg-gradient-to-r from-foreground via-primary/80 to-foreground bg-clip-text text-transparent\" data-testid=\"text-welcome\">\n            Olá, {user?.firstName || \"Estudante\"}\n          </h1>\n          <p className=\"text-base text-muted-foreground font-medium\">\n            Sua jornada espiritual continua com força total hoje.\n          </p>\n        </motion.div>\n\n        <motion.div variants={itemVariants}>\n          <AISearch />\n        </motion.div>\n\n        <motion.div variants={itemVariants}>\n          <GamificationBanner />\n        </motion.div>\n\n        <motion.div variants={itemVariants}>\n          <DailyVerse />\n        </motion.div>\n\n        {currentPlan && (\n          <motion.div variants={itemVariants}>\n            <Card className=\"relative glass-premium hover-premium border-none overflow-hidden rounded-[2rem] group hover:shadow-primary/20 transition-all duration-500 ring-2 ring-primary/20 hover:ring-primary/40\">\n              <div className=\"absolute inset-0 bg-gradient-to-br from-primary/10 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity\" />\n              <div className=\"absolute left-0 top-0 bottom-0 w-2 bg-gradient-to-b from-primary to-indigo-600\" />\n              <CardHeader className=\"pb-4 relative\">\n                <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"p-3.5 rounded-2xl bg-gradient-to-br from-primary to-indigo-700 shadow-xl shadow-primary/20\">\n                      <Calendar className=\"h-6 w-6 text-white\" />\n                    </div>\n                    <div>\n                      <CardTitle className=\"text-xl font-semibold tracking-tight\">Leitura de Hoje</CardTitle>\n                      <CardDescription className=\"text-sm font-bold opacity-70 mt-0.5 uppercase tracking-wider\">{currentPlan.title}</CardDescription>\n                    </div>\n                  </div>\n                  <Badge className=\"bg-gradient-to-r from-primary to-indigo-600 text-white border-none font-semibold px-6 py-2 rounded-full text-xs shadow-lg shadow-primary/20\">\n                    DIA {currentPlan.currentDay}\n                  </Badge>\n                </div>\n              </CardHeader>\n              <CardContent className=\"space-y-6 pt-2 relative\">\n                <div className=\"bg-muted/30 p-6 rounded-2xl border border-white/5\">\n                  <div className=\"flex items-center justify-between text-xs mb-3 font-semibold uppercase tracking-widest text-muted-foreground\">\n                    <span>PROGRESSO DO PLANO</span>\n                    <span className=\"text-primary\">\n                      {Math.round(((currentPlan.currentDay || 1) / (currentPlan.schedule?.length || 1)) * 100)}%\n                    </span>\n                  </div>\n                  <div className=\"h-3 bg-muted/50 rounded-full overflow-hidden shadow-inner\">\n                    <motion.div \n                      initial={{ width: 0 }}\n                      animate={{ width: `${((currentPlan.currentDay || 1) / (currentPlan.schedule?.length || 1)) * 100}%` }}\n                      transition={{ duration: 1, ease: \"easeOut\", delay: 0.5 }}\n                      className=\"h-full bg-gradient-to-r from-primary via-indigo-500 to-purple-600 rounded-full shadow-lg\"\n                    />\n                  </div>\n                </div>\n                \n                <Button size=\"lg\" className=\"w-full h-14 rounded-2xl font-semibold text-xs uppercase tracking-[0.2em] shadow-2xl  bg-gradient-to-r from-primary to-indigo-700 border-0\" asChild data-testid=\"button-continue-reading\">\n                  <Link href=\"/bible\">\n                    <BookOpen className=\"mr-3 h-5 w-5\" />\n                    CONTINUAR LEITURA\n                    <ChevronRight className=\"ml-3 h-5 w-5\" />\n                  </Link>\n                </Button>\n              </CardContent>\n            </Card>\n          </motion.div>\n        )}\n\n        <motion.div variants={itemVariants} className=\"space-y-6\">\n          <div className=\"flex items-center gap-3\">\n             <div className=\"h-8 w-1 bg-primary rounded-full\" />\n             <h2 className=\"font-semibold text-xl text-foreground tracking-tight uppercase\">Ações Rápidas</h2>\n          </div>\n          <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n            {quickActions.map((action, index) => (\n              <Link key={index} href={action.href}>\n                <Card className=\"cursor-pointer border-none glass-premium hover-premium transition-all duration-300 rounded-[2rem] overflow-visible group\" data-testid={`card-quick-action-${index}`}>\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex flex-col items-center text-center space-y-4\">\n                      <div className={`p-4 rounded-2xl bg-gradient-to-br ${action.gradient} shadow-2xl ${action.shadow} transform group-hover:scale-110 transition-transform duration-300`}>\n                        <action.icon className=\"h-6 w-6 text-white\" />\n                      </div>\n                      <p className=\"font-semibold text-xs text-foreground uppercase tracking-widest\">{action.label}</p>\n                    </div>\n                  </CardContent>\n                </Card>\n              </Link>\n            ))}\n          </div>\n        </motion.div>\n\n        <motion.div variants={itemVariants}>\n          <Card className=\"glass-premium hover-premium border-none rounded-xl overflow-hidden transition-all duration-500\">\n            <div className=\"absolute inset-0 bg-gradient-to-br from-indigo-500/10 via-transparent to-purple-500/10 pointer-events-none\" />\n            <CardHeader className=\"p-4 sm:p-5 pb-2 relative\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-800 shadow-lg shadow-indigo-500/30\">\n                    <Sparkles className=\"h-5 w-5 text-white\" />\n                  </div>\n                  <div>\n                    <CardTitle className=\"text-lg sm:text-xl font-semibold bg-gradient-to-r from-indigo-400 via-primary to-purple-500 bg-clip-text text-transparent tracking-tight\">Atividade Recente</CardTitle>\n                    <p className=\"text-[10px] text-primary font-semibold uppercase tracking-[0.2em] mt-0.5\">Sua Trilha de Evolução</p>\n                  </div>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent className=\"p-4 sm:p-5 pt-2 relative\">\n              <div className=\"space-y-3\">\n                {isLoadingActivity ? (\n                  <div className=\"flex justify-center py-8\">\n                    <div className=\"flex flex-col items-center gap-3\">\n                      <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n                      <p className=\"text-xs font-semibold uppercase tracking-widest text-primary animate-pulse\">Sincronizando...</p>\n                    </div>\n                  </div>\n                ) : recentActivity && recentActivity.length > 0 ? (\n                  recentActivity.map((item, i) => (\n                    <motion.div \n                      key={i}\n                      initial={{ opacity: 0, x: -20 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      transition={{ delay: 0.4 + i * 0.1, type: \"spring\", stiffness: 100 }}\n                      className=\"flex items-center gap-3 p-3 rounded-xl bg-gradient-to-r from-white/5 to-transparent hover:from-primary/10 hover:to-transparent transition-all duration-300 group cursor-pointer border border-white/5 hover:border-primary/20\"\n                    >\n                      <div className={`p-2.5 rounded-xl bg-gradient-to-br ${\n                        item.type === 'read' ? 'from-blue-600 to-indigo-900 shadow-blue-600/30' :\n                        item.type === 'prayer' ? 'from-rose-600 to-pink-800 shadow-rose-600/30' :\n                        item.type === 'post' ? 'from-amber-500 to-orange-800 shadow-amber-500/30' :\n                        'from-muted-foreground to-foreground shadow-slate-600/30'\n                      } shadow-md ring-2 ring-white/10 transition-all`}>\n                        {item.type === 'read' ? <BookOpen className=\"h-4 w-4 text-white\" /> :\n                         item.type === 'prayer' ? <MessageSquare className=\"h-4 w-4 text-white\" /> :\n                         item.type === 'post' ? <Users className=\"h-4 w-4 text-white\" /> :\n                         <Sparkles className=\"h-4 w-4 text-white\" />}\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"font-semibold text-sm text-foreground truncate group-hover:text-primary transition-colors\">{item.text}</p>\n                        <p className=\"text-[10px] font-medium text-muted-foreground mt-0.5 uppercase tracking-wider opacity-80\">{item.time}</p>\n                      </div>\n                      <div className=\"p-2 rounded-full bg-primary/10 group-hover:bg-primary group-hover:text-white transition-all\">\n                        <ChevronRight className=\"h-4 w-4 group-hover:translate-x-0.5 transition-transform\" />\n                      </div>\n                    </motion.div>\n                  ))\n                ) : (\n                  <motion.div \n                    initial={{ opacity: 0, scale: 0.95 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    transition={{ delay: 0.5 }}\n                    className=\"flex items-center justify-center py-8 px-4 rounded-xl bg-gradient-to-br from-primary/5 to-transparent border-2 border-dashed border-primary/20\"\n                  >\n                    <div className=\"text-center\">\n                      <div className=\"h-14 w-14 rounded-xl bg-gradient-to-br from-primary/20 to-indigo-600/20 flex items-center justify-center mx-auto mb-3 animate-pulse\">\n                        <Sparkles className=\"h-7 w-7 text-primary/40\" />\n                      </div>\n                      <p className=\"text-base font-semibold text-foreground mb-1\">O Livro está em Branco</p>\n                      <p className=\"text-sm text-muted-foreground max-w-[260px] mx-auto\">Sua jornada começa quando você abre as Escrituras pela primeira vez.</p>\n                    </div>\n                  </motion.div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n      </motion.div>\n    </div>\n  );\n}\n","path":null,"size_bytes":15552,"size_tokens":null},"client/src/pages/settings.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Input } from \"@/components/ui/input\";\nimport { \n  Settings as SettingsIcon, \n  Palette,\n  Bell,\n  Shield,\n  User,\n  LogOut,\n  Check,\n  BellRing,\n  Clock,\n  Send,\n  Loader2,\n  BookOpen,\n  Info,\n  Star,\n  Share2\n} from \"lucide-react\";\nimport { APP_VERSION, APP_NAME } from \"@/lib/config\";\nimport { motion } from \"framer-motion\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { usePushNotifications } from \"@/hooks/usePushNotifications\";\nimport { useTheme, readingThemes } from \"@/contexts/ThemeContext\";\nimport { useLanguage, Language } from \"@/contexts/LanguageContext\";\nimport { Globe } from \"lucide-react\";\n\nconst PLAY_STORE_URL = \"https://play.google.com/store/apps/details?id=com.bibliafullstack.app&pcampaignid=web_share\";\n\nconst predefinedThemes = [\n  { \n    id: \"classico\", \n    name: \"Clássico\", \n    primary: \"#5711D9\", \n    accent: \"#FFD700\",\n    description: \"Roxo premium + dourado\" \n  },\n  { \n    id: \"noite_sagrada\", \n    name: \"Noite Sagrada\", \n    primary: \"#9D44C0\", \n    accent: \"#E0E0E0\",\n    description: \"Roxo neon + cinza claro\" \n  },\n  { \n    id: \"luz_do_dia\", \n    name: \"Luz do Dia\", \n    primary: \"#00A0E3\", \n    accent: \"#2C2C2C\",\n    description: \"Azul celeste + cinza escuro\" \n  },\n  { \n    id: \"terra_santa\", \n    name: \"Terra Santa\", \n    primary: \"#8B4513\", \n    accent: \"#D4AF37\",\n    description: \"Marrom suave + dourado antigo\" \n  },\n];\n\n// Helper to convert hex to HSL\nfunction hexToHSL(hex: string) {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  if (!result) return \"0 0% 50%\";\n  \n  let r = parseInt(result[1], 16) / 255;\n  let g = parseInt(result[2], 16) / 255;\n  let b = parseInt(result[3], 16) / 255;\n  \n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  let h = 0, s = 0, l = (max + min) / 2;\n  \n  if (max !== min) {\n    const d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;\n      case g: h = ((b - r) / d + 2) / 6; break;\n      case b: h = ((r - g) / d + 4) / 6; break;\n    }\n  }\n  \n  return `${Math.round(h * 360)} ${Math.round(s * 100)}% ${Math.round(l * 100)}%`;\n}\n\ninterface NotificationPreferences {\n  readingReminders: boolean;\n  readingReminderTime: string;\n  prayerReminders: boolean;\n  prayerReminderTime: string;\n  dailyVerseNotification: boolean;\n  dailyVerseTime: string;\n  communityActivity: boolean;\n  teacherModeUpdates: boolean;\n  weekendOnly: boolean;\n  timezone: string;\n}\n\nfunction LanguageSelector() {\n  const { language, setLanguage, t } = useLanguage();\n  \n  const languages = [\n    { id: \"pt\" as Language, name: \"Português (Brasil)\", flag: \"🇧🇷\" },\n    { id: \"en\" as Language, name: \"English\", flag: \"🇺🇸\" },\n    { id: \"es\" as Language, name: \"Español\", flag: \"🇪🇸\" },\n    { id: \"nl\" as Language, name: \"Nederlands\", flag: \"🇳🇱\" },\n  ];\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Globe className=\"h-5 w-5\" />\n          Idioma do Aplicativo\n        </CardTitle>\n        <CardDescription>\n          Escolha o idioma de sua preferência\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <RadioGroup \n          value={language} \n          onValueChange={(value) => setLanguage(value as Language)}\n          className=\"grid grid-cols-2 gap-3\"\n        >\n          {languages.map((lang) => (\n            <Label\n              key={lang.id}\n              htmlFor={`lang-${lang.id}`}\n              className={`flex items-center gap-3 rounded-lg border-2 p-3 cursor-pointer hover-elevate transition-colors [&:has([data-state=checked])]:border-primary`}\n            >\n              <span className=\"text-xl\">{lang.flag}</span>\n              <span className=\"font-medium text-sm\">{lang.name}</span>\n              <RadioGroupItem value={lang.id} id={`lang-${lang.id}`} className=\"sr-only\" />\n            </Label>\n          ))}\n        </RadioGroup>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction ReadingThemeCard() {\n  const { readingTheme, setReadingTheme } = useTheme();\n  \n  const themes = [\n    { id: \"default\" as const, name: \"Padrão\", bg: \"bg-background\", text: \"text-foreground\", description: \"Tema do sistema\" },\n    { id: \"sepia\" as const, name: \"Sépia\", bg: \"bg-[#f4ecd8]\", text: \"text-[#5c4b37]\", description: \"Tom quente e acolhedor\" },\n    { id: \"paper\" as const, name: \"Papel\", bg: \"bg-[#faf9f6]\", text: \"text-[#333333]\", description: \"Branco suave como papel\" },\n    { id: \"night\" as const, name: \"Noturno\", bg: \"bg-[#1a1a2e]\", text: \"text-[#e8e8e8]\", description: \"Ideal para leitura à noite\" },\n  ];\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <BookOpen className=\"h-5 w-5\" />\n          Tema de Leitura\n        </CardTitle>\n        <CardDescription>\n          Escolha um tema de fundo para leitura da Bíblia mais confortável\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <RadioGroup \n          value={readingTheme} \n          onValueChange={(value) => setReadingTheme(value as typeof readingTheme)}\n          className=\"grid grid-cols-2 gap-4\"\n        >\n          {themes.map((theme) => (\n            <Label\n              key={theme.id}\n              htmlFor={`reading-${theme.id}`}\n              className={`flex flex-col items-center gap-3 rounded-2xl border-2 p-4 cursor-pointer hover-elevate transition-all [&:has([data-state=checked])]:border-primary [&:has([data-state=checked])]:bg-primary/5`}\n            >\n              <div className={`w-full h-24 rounded-xl ${theme.bg} ${theme.text} flex items-center justify-center font-serif text-sm border shadow-inner p-4 text-center overflow-hidden leading-tight`}>\n                \"Porque Deus amou o mundo...\"\n              </div>\n              <div className=\"text-center space-y-1\">\n                <p className=\"font-bold text-sm tracking-tight\">{theme.name}</p>\n                <p className=\"text-[10px] leading-tight text-muted-foreground font-medium px-1\">{theme.description}</p>\n              </div>\n              <RadioGroupItem value={theme.id} id={`reading-${theme.id}`} className=\"sr-only\" />\n            </Label>\n          ))}\n        </RadioGroup>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default function Settings() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [selectedTheme, setSelectedTheme] = useState(user?.selectedTheme || \"classico\");\n  const [customColor, setCustomColor] = useState(user?.customTheme?.primaryColor || \"#5711D9\");\n  const [fontSize, setFontSize] = useState(16);\n  \n  const headerClass = \"font-display text-2xl sm:text-3xl lg:text-4xl font-bold mb-2\";\n  \n  const {\n    isSupported: pushSupported,\n    isSubscribed: pushSubscribed,\n    isLoading: pushLoading,\n    permission: pushPermission,\n    subscribe: subscribePush,\n    unsubscribe: unsubscribePush,\n    sendTestNotification,\n  } = usePushNotifications();\n\n  const [notificationPrefs, setNotificationPrefs] = useState<NotificationPreferences>({\n    readingReminders: true,\n    readingReminderTime: \"08:00\",\n    prayerReminders: true,\n    prayerReminderTime: \"07:00\",\n    dailyVerseNotification: true,\n    dailyVerseTime: \"06:00\",\n    communityActivity: false,\n    teacherModeUpdates: true,\n    weekendOnly: false,\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n  });\n\n  const { data: savedPrefs, isLoading: prefsLoading } = useQuery<NotificationPreferences>({\n    queryKey: [\"/api/notifications/preferences\"],\n    enabled: !!user,\n  });\n\n  useEffect(() => {\n    if (savedPrefs) {\n      setNotificationPrefs(savedPrefs);\n    }\n  }, [savedPrefs]);\n\n  const savePreferencesMutation = useMutation({\n    mutationFn: async (prefs: Partial<NotificationPreferences>) => {\n      const response = await apiRequest(\"PATCH\", \"/api/notifications/preferences\", prefs);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications/preferences\"] });\n      toast({\n        title: \"Preferências salvas\",\n        description: \"Suas configurações de notificação foram atualizadas.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Não foi possível salvar as preferências.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handlePrefChange = <K extends keyof NotificationPreferences>(\n    key: K,\n    value: NotificationPreferences[K],\n    immediate = true\n  ) => {\n    const newPrefs = { ...notificationPrefs, [key]: value };\n    setNotificationPrefs(newPrefs);\n    if (immediate) {\n      savePreferencesMutation.mutate({ [key]: value });\n    }\n  };\n\n  const handleTimeBlur = (key: keyof NotificationPreferences) => {\n    const value = notificationPrefs[key];\n    if (typeof value === 'string' && /^\\d{2}:\\d{2}$/.test(value)) {\n      savePreferencesMutation.mutate({ [key]: value });\n    }\n  };\n\n  const [testingSending, setTestingSending] = useState(false);\n  const handleTestNotification = async () => {\n    setTestingSending(true);\n    await sendTestNotification();\n    setTestingSending(false);\n  };\n\n  // Apply theme colors to CSS variables\n  useEffect(() => {\n    const root = document.documentElement;\n    \n    if (selectedTheme === \"custom\") {\n      const hsl = hexToHSL(customColor);\n      root.style.setProperty(\"--primary\", hsl);\n      root.style.setProperty(\"--sidebar-primary\", hsl);\n      root.style.setProperty(\"--sidebar-accent-foreground\", hsl);\n    } else {\n      const theme = predefinedThemes.find(t => t.id === selectedTheme);\n      if (theme) {\n        const primaryHSL = hexToHSL(theme.primary);\n        root.style.setProperty(\"--primary\", primaryHSL);\n        root.style.setProperty(\"--sidebar-primary\", primaryHSL);\n        root.style.setProperty(\"--sidebar-accent-foreground\", primaryHSL);\n      }\n    }\n  }, [selectedTheme, customColor]);\n\n  // Mutation to save theme\n  const saveThemeMutation = useMutation({\n    mutationFn: async (data: { selectedTheme: string; customTheme?: any }) => {\n      const response = await apiRequest(\"PATCH\", \"/api/settings/theme\", data);\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      toast({\n        title: \"Tema salvo\",\n        description: \"Suas preferências foram atualizadas.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao salvar tema\",\n        description: error.message || \"Tente novamente.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSaveTheme = () => {\n    if (!selectedTheme) {\n      toast({\n        title: \"Erro\",\n        description: \"Selecione um tema primeiro.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    const themeData: any = {\n      selectedTheme: selectedTheme || \"classico\",\n    };\n    \n    if (selectedTheme === \"custom\") {\n      themeData.customTheme = {\n        name: \"Personalizado\",\n        primaryColor: customColor,\n        accentColor: \"#FFFFFF\",\n        backgroundColor: \"#FFFFFF\",\n      };\n    }\n    \n    saveThemeMutation.mutate(themeData);\n  };\n\n  const handleLogout = () => {\n    window.location.href = \"/api/logout\";\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      \n      <div className=\"relative z-10 max-w-4xl mx-auto p-6 md:p-8\">\n        {/* Header */}\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"mb-10\"\n        >\n          <h1 className=\"font-display text-2xl md:text-3xl font-extrabold mb-3 flex items-center gap-4 tracking-tight\" data-testid=\"text-page-title\">\n            <div className=\"flex h-14 w-14 items-center justify-center rounded-2xl bg-gradient-to-br from-primary to-indigo-600 shadow-lg shadow-primary/30\">\n              <SettingsIcon className=\"h-7 w-7 text-white\" />\n            </div>\n            Configurações\n          </h1>\n          <p className=\"text-lg text-muted-foreground font-medium\">\n            Personalize sua experiência\n          </p>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5, delay: 0.1 }}\n        >\n        <Tabs defaultValue=\"appearance\" className=\"space-y-8\">\n          <TabsList className=\"grid w-full grid-cols-4 bg-card/80 backdrop-blur-xl rounded-2xl p-1.5 shadow-lg border-none h-auto\">\n            <TabsTrigger value=\"appearance\" className=\"flex items-center gap-2 py-3 rounded-xl data-[state=active]:bg-primary/10 data-[state=active]:shadow-md transition-all\" data-testid=\"tab-appearance\">\n              <Palette className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline font-medium\">Aparência</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"notifications\" className=\"flex items-center gap-2 py-3 rounded-xl data-[state=active]:bg-primary/10 data-[state=active]:shadow-md transition-all\" data-testid=\"tab-notifications\">\n              <Bell className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline font-medium\">Notificações</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"account\" className=\"flex items-center gap-2 py-3 rounded-xl data-[state=active]:bg-primary/10 data-[state=active]:shadow-md transition-all\" data-testid=\"tab-account\">\n              <User className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline font-medium\">Conta</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"privacy\" className=\"flex items-center gap-2 py-3 rounded-xl data-[state=active]:bg-primary/10 data-[state=active]:shadow-md transition-all\" data-testid=\"tab-privacy\">\n              <Shield className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline font-medium\">Privacidade</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"feedback\" className=\"flex items-center gap-2 py-3 rounded-xl data-[state=active]:bg-primary/10 data-[state=active]:shadow-md transition-all\" data-testid=\"tab-feedback\">\n              <Send className=\"h-4 w-4\" />\n              <span className=\"font-medium\">Feedback</span>\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"appearance\" className=\"space-y-6\">\n            {/* Theme Selection */}\n            <Card className=\"rounded-3xl border-none glass-premium hover-premium\">\n              <CardHeader>\n                <CardTitle>Tema de Cores</CardTitle>\n                <CardDescription>\n                  Escolha um tema predefinido ou crie seu próprio\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <RadioGroup value={selectedTheme} onValueChange={setSelectedTheme}>\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    {predefinedThemes.map((theme) => (\n                      <div key={theme.id}>\n                        <Label\n                          htmlFor={theme.id}\n                          className=\"flex flex-col items-start gap-3 rounded-lg border-2 p-4 cursor-pointer hover-elevate active-elevate-2 transition-colors [&:has([data-state=checked])]:border-primary\"\n                        >\n                          <div className=\"flex items-center justify-between w-full\">\n                            <div className=\"flex items-center gap-3\">\n                              <div className=\"flex gap-2\">\n                                <div \n                                  className=\"h-8 w-8 rounded-full border-2 border-border\"\n                                  style={{ backgroundColor: theme.primary }}\n                                />\n                                <div \n                                  className=\"h-8 w-8 rounded-full border-2 border-border\"\n                                  style={{ backgroundColor: theme.accent }}\n                                />\n                              </div>\n                              <div>\n                                <p className=\"font-medium\">{theme.name}</p>\n                                <p className=\"text-xs text-muted-foreground\">{theme.description}</p>\n                              </div>\n                            </div>\n                            <RadioGroupItem value={theme.id} id={theme.id} />\n                          </div>\n                        </Label>\n                      </div>\n                    ))}\n                  </div>\n\n                  {/* Custom Theme */}\n                  <div className=\"pt-4 border-t\">\n                    <Label\n                      htmlFor=\"custom\"\n                      className=\"flex flex-col gap-3 rounded-lg border-2 p-4 cursor-pointer hover-elevate [&:has([data-state=checked])]:border-primary\"\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"flex gap-2\">\n                            <input\n                              type=\"color\"\n                              value={customColor}\n                              onChange={(e) => setCustomColor(e.target.value)}\n                              className=\"h-8 w-8 rounded-full cursor-pointer\"\n                              data-testid=\"input-custom-color\"\n                            />\n                            <div className=\"h-8 w-8 rounded-full border-2 border-border bg-white\" />\n                          </div>\n                          <div>\n                            <p className=\"font-medium\">Personalizado</p>\n                            <p className=\"text-xs text-muted-foreground\">Escolha sua própria cor</p>\n                          </div>\n                        </div>\n                        <RadioGroupItem value=\"custom\" id=\"custom\" />\n                      </div>\n                    </Label>\n                  </div>\n                </RadioGroup>\n              </CardContent>\n              <CardFooter>\n                <Button \n                  onClick={handleSaveTheme} \n                  disabled={saveThemeMutation.isPending}\n                  data-testid=\"button-save-theme\"\n                >\n                  <Check className=\"h-4 w-4 mr-2\" />\n                  {saveThemeMutation.isPending ? \"Salvando...\" : \"Salvar Tema\"}\n                </Button>\n              </CardFooter>\n            </Card>\n\n            {/* Font Size */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Tamanho da Fonte</CardTitle>\n                <CardDescription>\n                  Ajuste o tamanho do texto para leitura da Bíblia\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <Slider\n                    value={[fontSize]}\n                    onValueChange={([value]) => setFontSize(value)}\n                    min={14}\n                    max={24}\n                    step={1}\n                    className=\"w-full\"\n                  />\n                  <div className=\"flex justify-between text-sm text-muted-foreground\">\n                    <span>Pequeno</span>\n                    <span className=\"font-medium text-foreground\">{fontSize}px</span>\n                    <span>Grande</span>\n                  </div>\n                  <div className=\"p-4 bg-muted rounded-lg\">\n                    <p className=\"font-serif\" style={{ fontSize: `${fontSize}px` }}>\n                      Porque Deus amou ao mundo de tal maneira que deu o seu Filho unigênito...\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Reading Theme */}\n            <ReadingThemeCard />\n          </TabsContent>\n\n          <TabsContent value=\"notifications\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <BellRing className=\"h-5 w-5\" />\n                  Notificações Push\n                </CardTitle>\n                <CardDescription>\n                  Receba lembretes diretamente no seu dispositivo para leitura e oração\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {!pushSupported ? (\n                  <div className=\"p-4 bg-muted rounded-lg text-muted-foreground\">\n                    Seu navegador não suporta notificações push.\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between p-4 border rounded-lg bg-accent/30 hover:bg-accent/50 transition-all\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"p-2 bg-primary/10 rounded-full\">\n                          <Bell className=\"h-5 w-5 text-primary\" />\n                        </div>\n                        <div>\n                          <p className=\"font-medium\">Status do Serviço</p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {pushSubscribed\n                              ? \"Você está inscrito para receber notificações\"\n                              : \"Receba lembretes de leitura e avisos\"}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        {pushSubscribed ? (\n                          <Button \n                            variant=\"outline\" \n                            size=\"sm\" \n                            onClick={unsubscribePush} \n                            disabled={pushLoading}\n                            className=\"text-destructive hover:text-destructive\"\n                          >\n                            Desativar\n                          </Button>\n                        ) : (\n                          <Button \n                            variant=\"default\" \n                            size=\"sm\" \n                            onClick={subscribePush} \n                            disabled={pushLoading}\n                            className=\"bg-primary hover:bg-primary/90\"\n                          >\n                            Ativar Agora\n                          </Button>\n                        )}\n                        {pushSubscribed && (\n                          <Button \n                            variant=\"ghost\" \n                            size=\"sm\" \n                            onClick={handleTestNotification}\n                            disabled={testingSending}\n                          >\n                            {testingSending ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : \"Testar\"}\n                          </Button>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Notification Preferences */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Preferências de Notificação</CardTitle>\n                <CardDescription>\n                  Configure quando e quais lembretes deseja receber\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                {prefsLoading ? (\n                  <div className=\"flex items-center justify-center py-8\">\n                    <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\n                  </div>\n                ) : (\n                  <>\n                    {/* Reading Reminders */}\n                    <div className=\"space-y-3 pb-4 border-b\">\n                      <div className=\"flex items-center justify-between gap-4\">\n                        <div className=\"space-y-0.5\">\n                          <Label htmlFor=\"reading-reminders\">Lembretes de Leitura</Label>\n                          <p className=\"text-sm text-muted-foreground\">\n                            Receba lembretes diários para sua leitura bíblica\n                          </p>\n                        </div>\n                        <Switch\n                          id=\"reading-reminders\"\n                          checked={notificationPrefs.readingReminders}\n                          onCheckedChange={(checked) => handlePrefChange(\"readingReminders\", checked)}\n                          data-testid=\"switch-reading-reminders\"\n                        />\n                      </div>\n                      {notificationPrefs.readingReminders && (\n                        <div className=\"flex items-center gap-2 pl-4\">\n                          <Clock className=\"h-4 w-4 text-muted-foreground\" />\n                          <Label htmlFor=\"reading-time\" className=\"text-sm\">Horário:</Label>\n                          <Input\n                            id=\"reading-time\"\n                            type=\"time\"\n                            value={notificationPrefs.readingReminderTime}\n                            onChange={(e) => handlePrefChange(\"readingReminderTime\", e.target.value, false)}\n                            onBlur={() => handleTimeBlur(\"readingReminderTime\")}\n                            className=\"w-32\"\n                            data-testid=\"input-reading-time\"\n                          />\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Prayer Reminders */}\n                    <div className=\"space-y-3 pb-4 border-b\">\n                      <div className=\"flex items-center justify-between gap-4\">\n                        <div className=\"space-y-0.5\">\n                          <Label htmlFor=\"prayer-reminders\">Lembretes de Oração</Label>\n                          <p className=\"text-sm text-muted-foreground\">\n                            Receba lembretes para suas orações ativas\n                          </p>\n                        </div>\n                        <Switch\n                          id=\"prayer-reminders\"\n                          checked={notificationPrefs.prayerReminders}\n                          onCheckedChange={(checked) => handlePrefChange(\"prayerReminders\", checked)}\n                          data-testid=\"switch-prayer-reminders\"\n                        />\n                      </div>\n                      {notificationPrefs.prayerReminders && (\n                        <div className=\"flex items-center gap-2 pl-4\">\n                          <Clock className=\"h-4 w-4 text-muted-foreground\" />\n                          <Label htmlFor=\"prayer-time\" className=\"text-sm\">Horário:</Label>\n                          <Input\n                            id=\"prayer-time\"\n                            type=\"time\"\n                            value={notificationPrefs.prayerReminderTime}\n                            onChange={(e) => handlePrefChange(\"prayerReminderTime\", e.target.value, false)}\n                            onBlur={() => handleTimeBlur(\"prayerReminderTime\")}\n                            className=\"w-32\"\n                            data-testid=\"input-prayer-time\"\n                          />\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Daily Verse */}\n                    <div className=\"space-y-3 pb-4 border-b\">\n                      <div className=\"flex items-center justify-between gap-4\">\n                        <div className=\"space-y-0.5\">\n                          <Label htmlFor=\"daily-verse\">Versículo do Dia</Label>\n                          <p className=\"text-sm text-muted-foreground\">\n                            Receba um versículo inspirador todas as manhãs\n                          </p>\n                        </div>\n                        <Switch\n                          id=\"daily-verse\"\n                          checked={notificationPrefs.dailyVerseNotification}\n                          onCheckedChange={(checked) => handlePrefChange(\"dailyVerseNotification\", checked)}\n                          data-testid=\"switch-daily-verse\"\n                        />\n                      </div>\n                      {notificationPrefs.dailyVerseNotification && (\n                        <div className=\"flex items-center gap-2 pl-4\">\n                          <Clock className=\"h-4 w-4 text-muted-foreground\" />\n                          <Label htmlFor=\"verse-time\" className=\"text-sm\">Horário:</Label>\n                          <Input\n                            id=\"verse-time\"\n                            type=\"time\"\n                            value={notificationPrefs.dailyVerseTime}\n                            onChange={(e) => handlePrefChange(\"dailyVerseTime\", e.target.value, false)}\n                            onBlur={() => handleTimeBlur(\"dailyVerseTime\")}\n                            className=\"w-32\"\n                            data-testid=\"input-verse-time\"\n                          />\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Community Activity */}\n                    <div className=\"flex items-center justify-between gap-4 pb-4 border-b\">\n                      <div className=\"space-y-0.5\">\n                        <Label htmlFor=\"community-activity\">Atividade da Comunidade</Label>\n                        <p className=\"text-sm text-muted-foreground\">\n                          Notificações de curtidas e comentários\n                        </p>\n                      </div>\n                      <Switch\n                        id=\"community-activity\"\n                        checked={notificationPrefs.communityActivity}\n                        onCheckedChange={(checked) => handlePrefChange(\"communityActivity\", checked)}\n                        data-testid=\"switch-community-activity\"\n                      />\n                    </div>\n\n                    {/* Teacher Mode */}\n                    <div className=\"flex items-center justify-between gap-4 pb-4 border-b\">\n                      <div className=\"space-y-0.5\">\n                        <Label htmlFor=\"teacher-mode\">Modo Professor</Label>\n                        <p className=\"text-sm text-muted-foreground\">\n                          Atualizações sobre aulas e progresso dos alunos\n                        </p>\n                      </div>\n                      <Switch\n                        id=\"teacher-mode\"\n                        checked={notificationPrefs.teacherModeUpdates}\n                        onCheckedChange={(checked) => handlePrefChange(\"teacherModeUpdates\", checked)}\n                        data-testid=\"switch-teacher-mode\"\n                      />\n                    </div>\n\n                    {/* Weekend Only */}\n                    <div className=\"flex items-center justify-between gap-4\">\n                      <div className=\"space-y-0.5\">\n                        <Label htmlFor=\"weekend-only\">Apenas Fins de Semana</Label>\n                        <p className=\"text-sm text-muted-foreground\">\n                          Receber lembretes apenas aos sábados e domingos\n                        </p>\n                      </div>\n                      <Switch\n                        id=\"weekend-only\"\n                        checked={notificationPrefs.weekendOnly}\n                        onCheckedChange={(checked) => handlePrefChange(\"weekendOnly\", checked)}\n                        data-testid=\"switch-weekend-only\"\n                      />\n                    </div>\n                  </>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"account\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Informações da Conta</CardTitle>\n                <CardDescription>\n                  Gerencie seus dados pessoais\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label>Nome</Label>\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    {user?.firstName} {user?.lastName}\n                  </p>\n                </div>\n                <div>\n                  <Label>Email</Label>\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    {user?.email}\n                  </p>\n                </div>\n                <div>\n                  <Label>Nível</Label>\n                  <p className=\"text-sm text-muted-foreground mt-1 capitalize\">\n                    {user?.level}\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n\n            <LanguageSelector />\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Plano de Assinatura</CardTitle>\n                <CardDescription>\n                  Visualize seu plano atual e faça upgrade\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label>Plano Atual</Label>\n                  <p className=\"text-sm text-muted-foreground mt-1 capitalize font-semibold\">\n                    {user?.subscriptionPlan === 'free' ? 'Gratuito' : \n                     user?.subscriptionPlan === 'monthly' ? 'Mensal' : \n                     user?.subscriptionPlan === 'yearly' ? 'Anual' : \n                     user?.subscriptionPlan === 'premium_plus' ? 'Premium Plus' :\n                     user?.subscriptionPlan || 'Gratuito'}\n                  </p>\n                </div>\n                {user?.subscriptionExpiresAt && (\n                  <div>\n                    <Label>Válido Até</Label>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      {new Date(user.subscriptionExpiresAt).toLocaleDateString('pt-BR')}\n                    </p>\n                  </div>\n                )}\n              </CardContent>\n              <CardFooter>\n                <Button \n                  onClick={() => window.location.href = '/planos'}\n                  data-testid=\"button-upgrade-plan\"\n                >\n                  {user?.subscriptionPlan === 'free' ? 'Fazer Upgrade' : 'Ver Planos'}\n                </Button>\n              </CardFooter>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Modo Professor</CardTitle>\n                <CardDescription>\n                  Ative recursos de ensino\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"space-y-0.5\">\n                    <Label>Habilitar Modo Professor</Label>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Acesso a criação de aulas e gerenciamento de alunos\n                    </p>\n                  </div>\n                  <Switch\n                    checked={user?.isTeacher || false}\n                    data-testid=\"switch-teacher-mode-enable\"\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-destructive\">Zona de Perigo</CardTitle>\n                <CardDescription>\n                  Ações irreversíveis\n                </CardDescription>\n              </CardHeader>\n              <CardFooter>\n                <Button variant=\"destructive\" onClick={handleLogout} data-testid=\"button-logout\">\n                  <LogOut className=\"h-4 w-4 mr-2\" />\n                  Sair da Conta\n                </Button>\n              </CardFooter>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"privacy\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Privacidade e Dados</CardTitle>\n                <CardDescription>\n                  Controle seus dados e privacidade\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"space-y-0.5\">\n                    <Label>Perfil Público</Label>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Permitir que outros vejam seu perfil e atividade\n                    </p>\n                  </div>\n                  <Switch defaultChecked data-testid=\"switch-public-profile\" />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"space-y-0.5\">\n                    <Label>Compartilhar Estatísticas</Label>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Compartilhe seu progresso de leitura com a comunidade\n                    </p>\n                  </div>\n                  <Switch defaultChecked data-testid=\"switch-share-stats\" />\n                </div>\n              </CardContent>\n              <CardFooter className=\"flex flex-col items-start gap-4\">\n                <Button variant=\"outline\" data-testid=\"button-export-data\">\n                  Exportar Meus Dados\n                </Button>\n                <Button variant=\"outline\" className=\"text-destructive\" data-testid=\"button-delete-account\">\n                  Excluir Minha Conta\n                </Button>\n              </CardFooter>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Links Úteis</CardTitle>\n                <CardDescription>\n                  Acesse informações importantes\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-2\">\n                <Button \n                  variant=\"ghost\" \n                  className=\"w-full justify-start text-primary underline-offset-4 hover:underline\"\n                  onClick={() => window.open('/terms', '_blank')}\n                  data-testid=\"link-terms\"\n                >\n                  Termos de Uso\n                </Button>\n                <Button \n                  variant=\"ghost\" \n                  className=\"w-full justify-start text-primary underline-offset-4 hover:underline\"\n                  onClick={() => window.open('/privacy', '_blank')}\n                  data-testid=\"link-privacy\"\n                >\n                  Política de Privacidade\n                </Button>\n                <Button \n                  variant=\"ghost\" \n                  className=\"w-full justify-start text-primary underline-offset-4 hover:underline\"\n                  onClick={() => window.open('/help', '_blank')}\n                  data-testid=\"link-help\"\n                >\n                  Central de Ajuda\n                </Button>\n                <Button \n                  variant=\"ghost\" \n                  className=\"w-full justify-start text-primary underline-offset-4 hover:underline\"\n                  onClick={() => window.open('/contact', '_blank')}\n                  data-testid=\"link-contact\"\n                >\n                  Falar com Suporte\n                </Button>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"feedback\" className=\"space-y-6\">\n            <div className=\"grid sm:grid-cols-2 gap-4\">\n              <Card className=\"rounded-3xl border-none bg-gradient-to-br from-amber-500/10 via-card to-yellow-500/5 shadow-md\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center gap-3 mb-3\">\n                    <div className=\"p-2 rounded-xl bg-gradient-to-br from-amber-500 to-yellow-600 shadow-lg\">\n                      <Star className=\"h-5 w-5 text-white\" />\n                    </div>\n                    <div>\n                      <h3 className=\"font-semibold text-foreground text-sm\">Avalie o App</h3>\n                      <p className=\"text-xs text-muted-foreground\">Sua nota nos ajuda a crescer</p>\n                    </div>\n                  </div>\n                  <Button\n                    variant=\"outline\"\n                    className=\"w-full rounded-xl gap-2\"\n                    onClick={() => window.open(PLAY_STORE_URL, '_blank')}\n                    data-testid=\"button-rate-app-settings\"\n                  >\n                    <Star className=\"h-4 w-4\" />\n                    Avaliar na Play Store\n                  </Button>\n                </CardContent>\n              </Card>\n\n              <Card className=\"rounded-3xl border-none bg-gradient-to-br from-emerald-500/10 via-card to-teal-500/5 shadow-md\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center gap-3 mb-3\">\n                    <div className=\"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 shadow-lg\">\n                      <Share2 className=\"h-5 w-5 text-white\" />\n                    </div>\n                    <div>\n                      <h3 className=\"font-semibold text-foreground text-sm\">Compartilhar</h3>\n                      <p className=\"text-xs text-muted-foreground\">Convide amigos para o app</p>\n                    </div>\n                  </div>\n                  <Button\n                    variant=\"outline\"\n                    className=\"w-full rounded-xl gap-2\"\n                    onClick={async () => {\n                      const shareData = {\n                        title: \"BíbliaFS - Estudo Bíblico Premium\",\n                        text: \"Conheça o BíbliaFS! Estudo bíblico com IA teológica, planos de leitura, comunidade e muito mais. Baixe agora:\",\n                        url: PLAY_STORE_URL,\n                      };\n                      try {\n                        if (navigator.share) {\n                          await navigator.share(shareData);\n                        } else {\n                          await navigator.clipboard.writeText(`${shareData.text}\\n${shareData.url}`);\n                          toast({ title: \"Link copiado!\", description: \"O link do app foi copiado.\" });\n                        }\n                      } catch (err: any) {\n                        if (err.name !== \"AbortError\") {\n                          await navigator.clipboard.writeText(`${shareData.text}\\n${shareData.url}`);\n                          toast({ title: \"Link copiado!\", description: \"O link do app foi copiado.\" });\n                        }\n                      }\n                    }}\n                    data-testid=\"button-share-app-settings\"\n                  >\n                    <Share2 className=\"h-4 w-4\" />\n                    Compartilhar o App\n                  </Button>\n                </CardContent>\n              </Card>\n            </div>\n\n            <Card className=\"rounded-3xl border-none glass-premium hover-premium\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Send className=\"h-5 w-5\" />\n                  Feedback\n                </CardTitle>\n                <CardDescription>\n                  Sua opinião é muito importante para nós. Conte-nos como está sendo sua experiência.\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"p-6 bg-primary/5 rounded-2xl border border-primary/10\">\n                  <h3 className=\"text-lg font-semibold mb-2\">Como está sua experiência?</h3>\n                  <p className=\"text-muted-foreground mb-6\">\n                    Em uma escala de 0 a 10, o quanto você recomendaria o BíbliaFS para um amigo?\n                  </p>\n                  \n                  <div className=\"flex justify-between gap-1 flex-wrap mb-8\">\n                    {[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((num) => (\n                      <button\n                        key={num}\n                        type=\"button\"\n                        data-nps-score={num}\n                        data-testid={`settings-nps-score-${num}`}\n                        onClick={() => {\n                          const event = new CustomEvent('open-nps-score', { detail: { score: num } });\n                          window.dispatchEvent(event);\n                        }}\n                        className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full text-xs sm:text-sm font-bold bg-muted hover:bg-primary hover:text-primary-foreground transition-all transform hover:scale-110 shadow-sm\"\n                      >\n                        {num}\n                      </button>\n                    ))}\n                  </div>\n\n                  <div className=\"space-y-4\">\n                    <p className=\"text-sm text-muted-foreground text-center\">\n                      Sua participação é voluntária e nos ajuda a crescer. 🙏\n                    </p>\n                    <Button \n                      variant=\"outline\" \n                      className=\"w-full rounded-xl py-6\"\n                      onClick={() => {\n                        const event = new CustomEvent('open-nps-dialog');\n                        window.dispatchEvent(event);\n                      }}\n                    >\n                      Enviar feedback detalhado\n                    </Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n\n        <div className=\"mt-12 pt-8 border-t border-border/50\">\n          <div className=\"flex flex-col items-center justify-center text-center space-y-3\">\n            <div className=\"flex items-center gap-2 text-muted-foreground\">\n              <Info className=\"h-4 w-4\" />\n              <span className=\"text-sm font-medium\">Informações do App</span>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <span className=\"text-2xl font-semibold bg-gradient-to-r from-primary to-indigo-600 bg-clip-text text-transparent\" data-testid=\"text-app-name\">\n                {APP_NAME}\n              </span>\n              <span className=\"px-3 py-1 rounded-full bg-primary/10 text-primary text-sm font-bold ring-1 ring-primary/20\" data-testid=\"text-app-version\">\n                v{APP_VERSION}\n              </span>\n            </div>\n            <p className=\"text-xs text-muted-foreground max-w-md\">\n              Estudo Bíblico Premium com IA Teológica\n            </p>\n            <p className=\"text-[10px] text-muted-foreground/60 uppercase tracking-widest\">\n              Desenvolvido com amor para a glória de Deus\n            </p>\n          </div>\n        </div>\n        </motion.div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":47984,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1080,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":844,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2359,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { \n  pgTable, \n  text, \n  varchar, \n  timestamp, \n  integer, \n  boolean, \n  jsonb,\n  index,\n  unique,\n  decimal,\n  date\n} from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// ============================================\n// 1. USERS AND PROFILES\n// ============================================\n\n// Session storage table\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// Churches/Organizations table\nexport const churches = pgTable(\"churches\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  denomination: varchar(\"denomination\", { length: 100 }),\n  country: varchar(\"country\", { length: 100 }),\n  city: varchar(\"city\", { length: 100 }),\n  ssoConfig: jsonb(\"sso_config\"),\n  adminId: varchar(\"admin_id\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Email OTP table for registration verification\nexport const emailOtp = pgTable(\n  \"email_otp\",\n  {\n    id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n    email: varchar(\"email\", { length: 255 }).notNull(),\n    code: varchar(\"code\", { length: 6 }).notNull(),\n    expiresAt: timestamp(\"expires_at\").notNull(),\n    verified: boolean(\"verified\").default(false),\n    createdAt: timestamp(\"created_at\").defaultNow(),\n  },\n  (table) => [index(\"IDX_email_otp_email\").on(table.email)]\n);\n\n// Users table\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\", { length: 255 }).unique(),\n  passwordHash: varchar(\"password_hash\", { length: 255 }),\n  username: varchar(\"username\", { length: 255 }),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  fullName: varchar(\"full_name\", { length: 255 }),\n  displayName: varchar(\"display_name\", { length: 255 }),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  avatarUrl: text(\"avatar_url\"),\n  profileImage: text(\"profile_image\"),\n  \n  // Profile type for role-based access\n  profileType: varchar(\"profile_type\", { length: 50 }).default(\"basic_user\"),\n  // Profiles: super_admin, church_admin, group_leader, advanced_study, premium_user, basic_user\n  \n  // Church association\n  churchId: varchar(\"church_id\").references(() => churches.id),\n  theologicalBackground: text(\"theological_background\"),\n  \n  // Role-based access control (legacy)\n  role: varchar(\"role\").default(\"user\"), // user, admin\n  \n  // Custom theme settings\n  customTheme: jsonb(\"custom_theme\").$type<{\n    name: string;\n    primaryColor: string;\n    accentColor: string;\n    backgroundColor: string;\n  }>(),\n  selectedTheme: varchar(\"selected_theme\", { length: 50 }).default(\"classico\"),\n  \n  // Gamification\n  level: varchar(\"level\").default(\"iniciante\"),\n  experiencePoints: integer(\"experience_points\").default(0),\n  readingStreak: integer(\"reading_streak\").default(0),\n  lastReadDate: timestamp(\"last_read_date\"),\n  \n  // Teacher mode flag\n  isTeacher: boolean(\"is_teacher\").default(false),\n  \n  // Subscription\n  subscriptionPlan: varchar(\"subscription_plan\", { length: 20 }).default(\"free\"), // free, monthly, annual\n  subscriptionExpiresAt: timestamp(\"subscription_expires_at\"),\n  stripeCustomerId: varchar(\"stripe_customer_id\"),\n  stripeSubscriptionId: varchar(\"stripe_subscription_id\"),\n  aiRequestsToday: integer(\"ai_requests_today\").default(0),\n  aiRequestsResetAt: timestamp(\"ai_requests_reset_at\"),\n  aiRequestsCount: integer(\"ai_requests_count\").default(0), // Total AI requests for free users (20 total limit)\n  \n  // AI Spending Limits (25% of budget for monthly and annual)\n  aiSpendMonth: decimal(\"ai_spend_month\", { precision: 10, scale: 4 }).default(\"0\"),\n  aiSpendYear: decimal(\"ai_spend_year\", { precision: 10, scale: 4 }).default(\"0\"),\n  aiMonthlyBudgetLimit: decimal(\"ai_monthly_budget_limit\", { precision: 10, scale: 4 }).default(\"0\"),\n  aiAnnualBudgetLimit: decimal(\"ai_annual_budget_limit\", { precision: 10, scale: 4 }).default(\"0\"),\n  aiSpendMonthResetAt: timestamp(\"ai_spend_month_reset_at\"),\n  aiSpendYearResetAt: timestamp(\"ai_spend_year_reset_at\"),\n  \n  preferences: jsonb(\"preferences\").default({}),\n  \n  // Timestamps\n  lastLogin: timestamp(\"last_login\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Community groups table\nexport const groups = pgTable(\"groups\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  description: text(\"description\"),\n  churchId: varchar(\"church_id\").references(() => churches.id),\n  leaderId: varchar(\"leader_id\").references(() => users.id),\n  isPublic: boolean(\"is_public\").default(true),\n  maxMembers: integer(\"max_members\").default(50),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Group members\nexport const groupMembers = pgTable(\"group_members\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  groupId: varchar(\"group_id\").notNull().references(() => groups.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  role: varchar(\"role\", { length: 20 }).default(\"member\"), // member, moderator, leader\n  joinedAt: timestamp(\"joined_at\").defaultNow(),\n}, (table) => ({\n  uniqueGroupUser: unique().on(table.groupId, table.userId),\n}));\n\n// ============================================\n// 2. BIBLE CONTENT\n// ============================================\n\n// Bible translations\nexport const bibleTranslations = pgTable(\"bible_translations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\", { length: 100 }).notNull(),\n  language: varchar(\"language\", { length: 50 }).default(\"portuguese\"),\n  abbreviation: varchar(\"abbreviation\", { length: 10 }).notNull(),\n  copyrightInfo: text(\"copyright_info\"),\n  isAvailable: boolean(\"is_available\").default(true),\n  accessLevel: varchar(\"access_level\", { length: 20 }).default(\"free\"), // free, premium, advanced\n});\n\n// Bible books\nexport const bibleBooks = pgTable(\"bible_books\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\", { length: 100 }).notNull(),\n  abbreviation: varchar(\"abbreviation\", { length: 10 }).notNull(),\n  testament: varchar(\"testament\", { length: 10 }).notNull(), // old, new\n  orderIndex: integer(\"order_index\").notNull(),\n  chapterCount: integer(\"chapter_count\").notNull(),\n});\n\n// Bible chapters\nexport const bibleChapters = pgTable(\"bible_chapters\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  bookId: varchar(\"book_id\").notNull().references(() => bibleBooks.id),\n  chapterNumber: integer(\"chapter_number\").notNull(),\n  verseCount: integer(\"verse_count\").notNull(),\n}, (table) => ({\n  uniqueBookChapter: unique().on(table.bookId, table.chapterNumber),\n}));\n\n// Bible verses\nexport const bibleVerses = pgTable(\"bible_verses\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  translationId: varchar(\"translation_id\").notNull().references(() => bibleTranslations.id),\n  bookId: varchar(\"book_id\").notNull().references(() => bibleBooks.id),\n  chapterNumber: integer(\"chapter_number\").notNull(),\n  verseNumber: integer(\"verse_number\").notNull(),\n  verseText: text(\"verse_text\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => ({\n  uniqueVerse: unique().on(table.translationId, table.bookId, table.chapterNumber, table.verseNumber),\n}));\n\n// Cross references between verses\nexport const crossReferences = pgTable(\"cross_references\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  sourceVerseId: varchar(\"source_verse_id\").notNull().references(() => bibleVerses.id),\n  targetVerseId: varchar(\"target_verse_id\").notNull().references(() => bibleVerses.id),\n  referenceType: varchar(\"reference_type\", { length: 50 }), // parallel, explanation, prophecy\n  strengthScore: decimal(\"strength_score\", { precision: 3, scale: 2 }).default(\"1.0\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// ============================================\n// 3. PERSONAL STUDY\n// ============================================\n\n// Reading Plan Templates (predefined plans)\nexport const readingPlanTemplates = pgTable(\"reading_plan_templates\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  duration: integer(\"duration\").notNull(),\n  category: varchar(\"category\").default(\"bible\"),\n  schedule: jsonb(\"schedule\").$type<Array<{\n    day: number;\n    readings: { book: string; chapter: number; verses?: string }[];\n  }>>().notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// User Reading Plans\nexport const readingPlans = pgTable(\"reading_plans\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  templateId: varchar(\"template_id\").references(() => readingPlanTemplates.id),\n  \n  title: text(\"title\").notNull(),\n  name: varchar(\"name\", { length: 255 }),\n  description: text(\"description\"),\n  planType: varchar(\"plan_type\", { length: 50 }), // chronological, thematic, book_by_book\n  \n  schedule: jsonb(\"schedule\").$type<Array<{\n    day: number;\n    readings: { book: string; chapter: number; verses?: string }[];\n    isCompleted: boolean;\n  }>>().notNull(),\n  \n  durationDays: integer(\"duration_days\"),\n  totalDays: integer(\"total_days\").notNull(),\n  currentDay: integer(\"current_day\").default(1),\n  isPublic: boolean(\"is_public\").default(false),\n  isActive: boolean(\"is_active\").default(true),\n  isCompleted: boolean(\"is_completed\").default(false),\n  \n  startedAt: timestamp(\"started_at\").defaultNow(),\n  completedAt: timestamp(\"completed_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Reading plan items\nexport const readingPlanItems = pgTable(\"reading_plan_items\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  planId: varchar(\"plan_id\").notNull().references(() => readingPlans.id),\n  bookId: varchar(\"book_id\").references(() => bibleBooks.id),\n  book: varchar(\"book\", { length: 50 }),\n  chapterNumber: integer(\"chapter_number\").notNull(),\n  dayNumber: integer(\"day_number\").notNull(),\n  isCompleted: boolean(\"is_completed\").default(false),\n  completedAt: timestamp(\"completed_at\"),\n  userNotes: text(\"user_notes\"),\n});\n\n// Reading history\nexport const readingHistory = pgTable(\"reading_history\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  book: varchar(\"book\", { length: 50 }).notNull(),\n  chapterNumber: integer(\"chapter_number\").notNull(),\n  translationId: varchar(\"translation_id\").references(() => bibleTranslations.id),\n  readDurationSeconds: integer(\"read_duration_seconds\"),\n  readAt: timestamp(\"read_at\").defaultNow(),\n});\n\n// Verse highlights\nexport const highlights = pgTable(\"highlights\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  \n  book: text(\"book\").notNull(),\n  chapter: integer(\"chapter\").notNull(),\n  verse: integer(\"verse\").notNull(),\n  verseText: text(\"verse_text\").notNull(),\n  version: varchar(\"version\").default(\"nvi\"),\n  verseId: varchar(\"verse_id\").references(() => bibleVerses.id),\n  \n  color: varchar(\"color\").notNull(),\n  highlightText: text(\"highlight_text\"),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Bookmarks\nexport const bookmarks = pgTable(\"bookmarks\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  \n  book: text(\"book\").notNull(),\n  chapter: integer(\"chapter\").notNull(),\n  verse: integer(\"verse\").notNull(),\n  verseText: text(\"verse_text\").notNull(),\n  version: varchar(\"version\").default(\"nvi\"),\n  title: varchar(\"title\"),\n  \n  note: text(\"note\"),\n  tags: text(\"tags\").array(),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Personal notes\nexport const notes = pgTable(\"notes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  \n  book: text(\"book\").notNull(),\n  chapter: integer(\"chapter\").notNull(),\n  verse: integer(\"verse\"),\n  version: varchar(\"version\").default(\"nvi\"),\n  verseId: varchar(\"verse_id\").references(() => bibleVerses.id),\n  \n  noteTitle: varchar(\"note_title\", { length: 255 }),\n  content: text(\"content\").notNull(),\n  noteType: varchar(\"note_type\", { length: 50 }).default(\"personal\"), // personal, study, sermon\n  tags: text(\"tags\").array(),\n  isPublic: boolean(\"is_public\").default(false),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// AI-generated verse commentaries\nexport const verseCommentaries = pgTable(\"verse_commentaries\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  \n  book: varchar(\"book\").notNull(),\n  chapter: integer(\"chapter\").notNull(),\n  verse: integer(\"verse\").notNull(),\n  version: varchar(\"version\").notNull(),\n  \n  commentaryType: varchar(\"commentary_type\").notNull(),\n  content: text(\"content\").notNull(),\n  commentary: text(\"commentary\"),\n  \n  source: varchar(\"source\").default(\"ai\"),\n  teacherId: varchar(\"teacher_id\").references(() => users.id, { onDelete: \"cascade\" }),\n  \n  generatedAt: timestamp(\"generated_at\").defaultNow(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => ({\n  uniqueCommentary: unique().on(table.userId, table.version, table.book, table.chapter, table.verse, table.commentaryType),\n}));\n\n// Prayers journal\nexport const prayers = pgTable(\"prayers\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  \n  title: text(\"title\").notNull(),\n  content: text(\"content\"),\n  prayerType: varchar(\"prayer_type\", { length: 50 }).default(\"request\"), // request, thanksgiving, confession\n  category: varchar(\"category\", { length: 100 }),\n  emotionalState: varchar(\"emotional_state\", { length: 50 }), // happy, sad, anxious, peaceful\n  \n  audioUrl: text(\"audio_url\"),\n  audioDuration: integer(\"audio_duration\"),\n  location: jsonb(\"location\").$type<{ latitude: number; longitude: number; name?: string }>(),\n  \n  isAnswered: boolean(\"is_answered\").default(false),\n  answeredAt: timestamp(\"answered_at\"),\n  answerNotes: text(\"answer_notes\"),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Bible Reading Settings\nexport const bibleSettings = pgTable(\"bible_settings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }).unique(),\n  \n  preferredVersion: varchar(\"preferred_version\").default(\"nvi\"),\n  fontSize: integer(\"font_size\").default(16),\n  lineHeight: integer(\"line_height\").default(28),\n  verseNumbers: boolean(\"verse_numbers\").default(true),\n  redLetters: boolean(\"red_letters\").default(false),\n  \n  lastBook: text(\"last_book\"),\n  lastChapter: integer(\"last_chapter\"),\n  lastVerse: integer(\"last_verse\"),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// ============================================\n// 4. COMMUNITY\n// ============================================\n\n// Community Posts\nexport const communityPosts = pgTable(\"community_posts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  groupId: varchar(\"group_id\").references(() => groups.id),\n  verseId: varchar(\"verse_id\").references(() => bibleVerses.id),\n  \n  verseReference: text(\"verse_reference\").notNull(),\n  verseText: text(\"verse_text\").notNull(),\n  scriptureReference: jsonb(\"scripture_reference\"),\n  \n  title: varchar(\"title\", { length: 255 }),\n  note: text(\"note\").notNull(),\n  content: text(\"content\"),\n  postType: varchar(\"post_type\", { length: 50 }).default(\"reflection\"), // reflection, question, testimony\n  tags: text(\"tags\").array(),\n  \n  isPublic: boolean(\"is_public\").default(true),\n  likeCount: integer(\"like_count\").default(0),\n  likesCount: integer(\"likes_count\").default(0),\n  commentCount: integer(\"comment_count\").default(0),\n  commentsCount: integer(\"comments_count\").default(0),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Community Post Likes\nexport const postLikes = pgTable(\"post_likes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  postId: varchar(\"post_id\").notNull().references(() => communityPosts.id, { onDelete: \"cascade\" }),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => ({\n  uniquePostUser: unique().on(table.postId, table.userId),\n}));\n\n// Community Post Comments\nexport const postComments = pgTable(\"post_comments\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  postId: varchar(\"post_id\").notNull().references(() => communityPosts.id, { onDelete: \"cascade\" }),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  parentCommentId: varchar(\"parent_comment_id\").references((): any => postComments.id),\n  \n  content: text(\"content\").notNull(),\n  likeCount: integer(\"like_count\").default(0),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Post Reactions (advanced)\nexport const postReactions = pgTable(\"post_reactions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  postId: varchar(\"post_id\").references(() => communityPosts.id),\n  commentId: varchar(\"comment_id\").references(() => postComments.id),\n  userId: varchar(\"user_id\").notNull(),\n  reactionType: varchar(\"reaction_type\", { length: 20 }).notNull(), // like, love, thankful, insightful\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Group Meetings (Schedule/Calendar)\nexport const groupMeetings = pgTable(\"group_meetings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  groupId: varchar(\"group_id\").notNull().references(() => groups.id, { onDelete: \"cascade\" }),\n  title: text(\"title\").notNull(),\n  description: text(\"description\"),\n  meetingDate: timestamp(\"meeting_date\").notNull(),\n  location: text(\"location\"), // Physical address or online link\n  isOnline: boolean(\"is_online\").default(false),\n  meetingLink: text(\"meeting_link\"),\n  createdBy: varchar(\"created_by\").notNull().references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Group Resources (Repository/Files)\nexport const groupResources = pgTable(\"group_resources\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  groupId: varchar(\"group_id\").notNull().references(() => groups.id, { onDelete: \"cascade\" }),\n  title: text(\"title\").notNull(),\n  description: text(\"description\"),\n  resourceType: varchar(\"resource_type\", { length: 50 }).default(\"link\"), // link, file, lesson_ref\n  url: text(\"url\"),\n  lessonId: varchar(\"lesson_id\").references(() => lessons.id, { onDelete: \"set null\" }),\n  tags: text(\"tags\").array(),\n  createdBy: varchar(\"created_by\").notNull().references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Zod schemas for new tables\nexport const insertGroupMeetingSchema = createInsertSchema(groupMeetings).omit({ id: true, createdAt: true, updatedAt: true });\nexport type GroupMeeting = typeof groupMeetings.$inferSelect;\nexport type InsertGroupMeeting = z.infer<typeof insertGroupMeetingSchema>;\n\nexport const insertGroupResourceSchema = createInsertSchema(groupResources).omit({ id: true, createdAt: true, });\nexport type GroupResource = typeof groupResources.$inferSelect;\nexport type InsertGroupResource = z.infer<typeof insertGroupResourceSchema>;\n\n// ============================================\n// 5. GAMIFICATION\n// ============================================\n\n// User progress (XP, levels, streaks)\nexport const userProgress = pgTable(\"user_progress\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().unique(),\n  totalXp: integer(\"total_xp\").default(0),\n  level: integer(\"level\").default(1),\n  currentStreak: integer(\"current_streak\").default(0),\n  longestStreak: integer(\"longest_streak\").default(0),\n  lastActivityDate: date(\"last_activity_date\"),\n  lastReadingDate: date(\"last_reading_date\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Achievement definitions\nexport const achievementDefinitions = pgTable(\"achievement_definitions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  description: text(\"description\").notNull(),\n  iconUrl: text(\"icon_url\"),\n  achievementType: varchar(\"achievement_type\", { length: 50 }).notNull(), // reading, community, consistency\n  requirementValue: integer(\"requirement_value\").notNull(),\n  requirementMetric: varchar(\"requirement_metric\", { length: 50 }).notNull(), // days_streak, chapters_read\n  tier: varchar(\"tier\", { length: 20 }).default(\"bronze\"), // bronze, silver, gold, platinum\n});\n\n// Achievements (legacy + new)\nexport const achievements = pgTable(\"achievements\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\"),\n  description: text(\"description\"),\n  icon: varchar(\"icon\").default(\"trophy\"),\n  category: varchar(\"category\").default(\"reading\"),\n  requirement: jsonb(\"requirement\").$type<{\n    type: string;\n    value: number;\n  }>(),\n  xpReward: integer(\"xp_reward\").default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// User Achievements\nexport const userAchievements = pgTable(\"user_achievements\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  achievementId: varchar(\"achievement_id\").references(() => achievements.id, { onDelete: \"cascade\" }),\n  achievementType: varchar(\"achievement_type\"),\n  achievementValue: integer(\"achievement_value\").default(1),\n  \n  progress: integer(\"progress\").default(0),\n  progressValue: integer(\"progress_value\").default(0),\n  isUnlocked: boolean(\"is_unlocked\").default(false),\n  unlockedAt: timestamp(\"unlocked_at\"),\n  earnedAt: timestamp(\"earned_at\").defaultNow(),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// ============================================\n// 6. CONTENT & MEDIA\n// ============================================\n\n// Podcasts\nexport const podcasts = pgTable(\"podcasts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  description: text(\"description\"),\n  author: varchar(\"author\", { length: 255 }),\n  category: varchar(\"category\", { length: 100 }),\n  language: varchar(\"language\", { length: 10 }).default(\"pt\"),\n  imageUrl: text(\"image_url\"),\n  rssUrl: text(\"rss_url\"),\n  rssFeed: varchar(\"rss_feed\").unique(),\n  totalEpisodes: integer(\"total_episodes\").default(0),\n  isActive: boolean(\"is_active\").default(true),\n  accessLevel: varchar(\"access_level\", { length: 20 }).default(\"free\"),\n  \n  // Creator info for user-generated podcasts\n  creatorId: varchar(\"creator_id\").references(() => users.id, { onDelete: \"set null\" }),\n  bibleBook: varchar(\"bible_book\", { length: 100 }),\n  bibleChapter: integer(\"bible_chapter\"),\n  \n  episodes: jsonb(\"episodes\").$type<Array<{\n    id: string;\n    title: string;\n    description: string;\n    audioData: string; // base64 encoded audio\n    duration: number;\n    publishedAt: string;\n  }>>(),\n  subscriberCount: integer(\"subscriber_count\").default(0),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Shared links tracking\nexport const sharedLinks = pgTable(\"shared_links\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: \"set null\" }),\n  book: text(\"book\").notNull(),\n  chapter: integer(\"chapter\").notNull(),\n  verse: integer(\"verse\").notNull(),\n  version: varchar(\"version\").notNull(),\n  platform: varchar(\"platform\", { length: 50 }), // whatsapp, facebook, twitter, telegram, copy\n  sharedAt: timestamp(\"shared_at\").defaultNow(),\n});\n\nexport const insertSharedLinkSchema = createInsertSchema(sharedLinks).omit({ \n  id: true, \n  sharedAt: true \n});\n\nexport type SharedLink = typeof sharedLinks.$inferSelect;\nexport type InsertSharedLink = z.infer<typeof insertSharedLinkSchema>;\n\n// Podcast subscriptions\nexport const podcastSubscriptions = pgTable(\"podcast_subscriptions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  podcastId: varchar(\"podcast_id\").notNull().references(() => podcasts.id, { onDelete: \"cascade\" }),\n  currentEpisodeId: text(\"current_episode_id\"),\n  currentPosition: integer(\"current_position\").default(0),\n  subscribedAt: timestamp(\"subscribed_at\").defaultNow(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => ({\n  uniqueUserPodcast: unique().on(table.userId, table.podcastId),\n}));\n\n// Teacher Lessons\nexport const lessons = pgTable(\"lessons\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  teacherId: varchar(\"teacher_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  \n  title: text(\"title\").notNull(),\n  description: text(\"description\"),\n  content: text(\"content\"),\n  tags: text(\"tags\").array(),\n  \n  scriptureReferences: jsonb(\"scripture_references\").$type<Array<{\n    book: string;\n    chapter: number;\n    verses: string;\n  }>>(),\n  resources: jsonb(\"resources\"),\n  \n  objectives: text(\"objectives\").array(),\n  questions: jsonb(\"questions\").$type<Array<{\n    id: string;\n    question: string;\n    options: string[];\n    correctAnswer: number;\n  }>>(),\n  \n  scheduledFor: timestamp(\"scheduled_for\"),\n  isPublished: boolean(\"is_published\").default(false),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Student Lesson Progress / Enrollments\nexport const lessonProgress = pgTable(\"lesson_progress\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  lessonId: varchar(\"lesson_id\").notNull().references(() => lessons.id, { onDelete: \"cascade\" }),\n  studentId: varchar(\"student_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  \n  progress: integer(\"progress\").default(0),\n  isCompleted: boolean(\"is_completed\").default(false),\n  score: integer(\"score\"),\n  answers: jsonb(\"answers\").$type<Record<string, number>>(),\n  \n  enrolledAt: timestamp(\"enrolled_at\").defaultNow(),\n  completedAt: timestamp(\"completed_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Additional content (devotionals, study guides)\nexport const additionalContent = pgTable(\"additional_content\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\", { length: 255 }).notNull(),\n  description: text(\"description\"),\n  contentType: varchar(\"content_type\", { length: 50 }).notNull(), // podcast, devotional, study_guide\n  audioUrl: text(\"audio_url\"),\n  durationSeconds: integer(\"duration_seconds\"),\n  author: varchar(\"author\", { length: 255 }),\n  accessLevel: varchar(\"access_level\", { length: 20 }).default(\"premium\"),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Content-Bible verse references\nexport const contentVerseReferences = pgTable(\"content_verse_references\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  contentId: varchar(\"content_id\").notNull().references(() => additionalContent.id),\n  verseId: varchar(\"verse_id\").notNull().references(() => bibleVerses.id),\n  relevanceScore: decimal(\"relevance_score\", { precision: 3, scale: 2 }).default(\"1.0\"),\n}, (table) => ({\n  uniqueContentVerse: unique().on(table.contentId, table.verseId),\n}));\n\n// NPS and Feedback table\nexport const feedback = pgTable(\"feedback\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: \"cascade\" }),\n  type: varchar(\"type\", { length: 20 }).notNull(), // 'nps', 'general'\n  score: integer(\"score\"), // 1-10 for NPS\n  comment: text(\"comment\"),\n  metadata: jsonb(\"metadata\").default({}),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertFeedbackSchema = createInsertSchema(feedback);\nexport type InsertFeedback = z.infer<typeof insertFeedbackSchema>;\nexport type Feedback = typeof feedback.$inferSelect;\n\n// ============================================\n// 7. DAILY & OFFLINE\n// ============================================\n\n// Daily verses\nexport const dailyVerses = pgTable(\"daily_verses\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  dayOfYear: integer(\"day_of_year\").notNull().unique(),\n  book: varchar(\"book\").notNull(),\n  chapter: integer(\"chapter\").notNull(),\n  verse: integer(\"verse\").notNull(),\n  version: varchar(\"version\").notNull(),\n  theme: varchar(\"theme\", { length: 100 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertDailyVerseSchema = createInsertSchema(dailyVerses).omit({ id: true, createdAt: true });\nexport type DailyVerse = typeof dailyVerses.$inferSelect;\nexport type InsertDailyVerse = z.infer<typeof insertDailyVerseSchema>;\n\n// Offline content cache\nexport const offlineContent = pgTable(\"offline_content\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  \n  book: varchar(\"book\").notNull(),\n  chapter: integer(\"chapter\").notNull(),\n  version: varchar(\"version\").notNull(),\n  content: jsonb(\"content\").notNull(),\n  \n  size: integer(\"size\").default(0),\n  verseCount: integer(\"verse_count\").default(0),\n  \n  downloadedAt: timestamp(\"downloaded_at\").defaultNow(),\n  lastAccessedAt: timestamp(\"last_accessed_at\").defaultNow(),\n  expiresAt: timestamp(\"expires_at\"),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => ({\n  uniqueUserBookChapterVersion: unique().on(table.userId, table.book, table.chapter, table.version),\n}));\n\n// ============================================\n// 8. PAYMENTS\n// ============================================\n\n// Donations\nexport const donations = pgTable(\"donations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull(),\n  amount: integer(\"amount\").notNull(),\n  currency: varchar(\"currency\", { length: 10 }).default(\"BRL\"),\n  type: varchar(\"type\", { length: 50 }).notNull(), // one_time, recurring\n  frequency: varchar(\"frequency\"),\n  destination: varchar(\"destination\", { length: 50 }).default(\"app_operations\"),\n  stripePaymentIntentId: varchar(\"stripe_payment_intent_id\"),\n  stripeCustomerId: varchar(\"stripe_customer_id\"),\n  stripeSubscriptionId: varchar(\"stripe_subscription_id\"),\n  status: varchar(\"status\", { length: 20 }).default(\"pending\"), // pending, completed, failed, cancelled\n  isAnonymous: boolean(\"is_anonymous\").default(false),\n  message: text(\"message\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// ============================================\n// RELATIONS\n// ============================================\n\nexport const churchesRelations = relations(churches, ({ one, many }) => ({\n  admin: one(users, {\n    fields: [churches.adminId],\n    references: [users.id],\n  }),\n  groups: many(groups),\n  members: many(users),\n}));\n\nexport const usersRelations = relations(users, ({ one, many }) => ({\n  church: one(churches, {\n    fields: [users.churchId],\n    references: [churches.id],\n  }),\n  readingPlans: many(readingPlans),\n  prayers: many(prayers),\n  notes: many(notes),\n  highlights: many(highlights),\n  bookmarks: many(bookmarks),\n  podcastSubscriptions: many(podcastSubscriptions),\n  lessonsCreated: many(lessons),\n  lessonProgress: many(lessonProgress),\n  communityPosts: many(communityPosts),\n  postLikes: many(postLikes),\n  postComments: many(postComments),\n  userAchievements: many(userAchievements),\n  groupMemberships: many(groupMembers),\n}));\n\nexport const groupsRelations = relations(groups, ({ one, many }) => ({\n  church: one(churches, {\n    fields: [groups.churchId],\n    references: [churches.id],\n  }),\n  leader: one(users, {\n    fields: [groups.leaderId],\n    references: [users.id],\n  }),\n  members: many(groupMembers),\n  posts: many(communityPosts),\n}));\n\nexport const groupMembersRelations = relations(groupMembers, ({ one }) => ({\n  group: one(groups, {\n    fields: [groupMembers.groupId],\n    references: [groups.id],\n  }),\n  user: one(users, {\n    fields: [groupMembers.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const bibleTranslationsRelations = relations(bibleTranslations, ({ many }) => ({\n  verses: many(bibleVerses),\n}));\n\nexport const bibleBooksRelations = relations(bibleBooks, ({ many }) => ({\n  chapters: many(bibleChapters),\n  verses: many(bibleVerses),\n}));\n\nexport const bibleChaptersRelations = relations(bibleChapters, ({ one }) => ({\n  book: one(bibleBooks, {\n    fields: [bibleChapters.bookId],\n    references: [bibleBooks.id],\n  }),\n}));\n\nexport const bibleVersesRelations = relations(bibleVerses, ({ one }) => ({\n  translation: one(bibleTranslations, {\n    fields: [bibleVerses.translationId],\n    references: [bibleTranslations.id],\n  }),\n  book: one(bibleBooks, {\n    fields: [bibleVerses.bookId],\n    references: [bibleBooks.id],\n  }),\n}));\n\nexport const readingPlanTemplatesRelations = relations(readingPlanTemplates, ({ many }) => ({\n  userPlans: many(readingPlans),\n}));\n\nexport const readingPlansRelations = relations(readingPlans, ({ one, many }) => ({\n  user: one(users, {\n    fields: [readingPlans.userId],\n    references: [users.id],\n  }),\n  template: one(readingPlanTemplates, {\n    fields: [readingPlans.templateId],\n    references: [readingPlanTemplates.id],\n  }),\n  items: many(readingPlanItems),\n}));\n\nexport const readingPlanItemsRelations = relations(readingPlanItems, ({ one }) => ({\n  plan: one(readingPlans, {\n    fields: [readingPlanItems.planId],\n    references: [readingPlans.id],\n  }),\n  book: one(bibleBooks, {\n    fields: [readingPlanItems.bookId],\n    references: [bibleBooks.id],\n  }),\n}));\n\nexport const achievementsRelations = relations(achievements, ({ many }) => ({\n  userAchievements: many(userAchievements),\n}));\n\nexport const userAchievementsRelations = relations(userAchievements, ({ one }) => ({\n  user: one(users, {\n    fields: [userAchievements.userId],\n    references: [users.id],\n  }),\n  achievement: one(achievements, {\n    fields: [userAchievements.achievementId],\n    references: [achievements.id],\n  }),\n}));\n\nexport const prayersRelations = relations(prayers, ({ one }) => ({\n  user: one(users, {\n    fields: [prayers.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const notesRelations = relations(notes, ({ one }) => ({\n  user: one(users, {\n    fields: [notes.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const highlightsRelations = relations(highlights, ({ one }) => ({\n  user: one(users, {\n    fields: [highlights.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const bookmarksRelations = relations(bookmarks, ({ one }) => ({\n  user: one(users, {\n    fields: [bookmarks.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const bibleSettingsRelations = relations(bibleSettings, ({ one }) => ({\n  user: one(users, {\n    fields: [bibleSettings.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const podcastsRelations = relations(podcasts, ({ many }) => ({\n  subscriptions: many(podcastSubscriptions),\n}));\n\nexport const podcastSubscriptionsRelations = relations(podcastSubscriptions, ({ one }) => ({\n  user: one(users, {\n    fields: [podcastSubscriptions.userId],\n    references: [users.id],\n  }),\n  podcast: one(podcasts, {\n    fields: [podcastSubscriptions.podcastId],\n    references: [podcasts.id],\n  }),\n}));\n\nexport const lessonsRelations = relations(lessons, ({ one, many }) => ({\n  teacher: one(users, {\n    fields: [lessons.teacherId],\n    references: [users.id],\n  }),\n  progress: many(lessonProgress),\n}));\n\nexport const lessonProgressRelations = relations(lessonProgress, ({ one }) => ({\n  lesson: one(lessons, {\n    fields: [lessonProgress.lessonId],\n    references: [lessons.id],\n  }),\n  student: one(users, {\n    fields: [lessonProgress.studentId],\n    references: [users.id],\n  }),\n}));\n\nexport const communityPostsRelations = relations(communityPosts, ({ one, many }) => ({\n  user: one(users, {\n    fields: [communityPosts.userId],\n    references: [users.id],\n  }),\n  group: one(groups, {\n    fields: [communityPosts.groupId],\n    references: [groups.id],\n  }),\n  likes: many(postLikes),\n  comments: many(postComments),\n}));\n\nexport const postLikesRelations = relations(postLikes, ({ one }) => ({\n  post: one(communityPosts, {\n    fields: [postLikes.postId],\n    references: [communityPosts.id],\n  }),\n  user: one(users, {\n    fields: [postLikes.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const postCommentsRelations = relations(postComments, ({ one }) => ({\n  post: one(communityPosts, {\n    fields: [postComments.postId],\n    references: [communityPosts.id],\n  }),\n  user: one(users, {\n    fields: [postComments.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const offlineContentRelations = relations(offlineContent, ({ one }) => ({\n  user: one(users, {\n    fields: [offlineContent.userId],\n    references: [users.id],\n  }),\n}));\n\n// ============================================\n// ZOD SCHEMAS\n// ============================================\n\nexport const upsertUserSchema = createInsertSchema(users);\nexport type UpsertUser = z.infer<typeof upsertUserSchema>;\nexport type User = typeof users.$inferSelect;\n\nexport const insertChurchSchema = createInsertSchema(churches).omit({ id: true, createdAt: true, updatedAt: true });\nexport type InsertChurch = z.infer<typeof insertChurchSchema>;\nexport type Church = typeof churches.$inferSelect;\n\nexport const insertGroupSchema = createInsertSchema(groups).omit({ id: true, createdAt: true, updatedAt: true });\nexport type InsertGroup = z.infer<typeof insertGroupSchema>;\nexport type Group = typeof groups.$inferSelect;\n\nexport const insertReadingPlanTemplateSchema = createInsertSchema(readingPlanTemplates).omit({ id: true, createdAt: true });\nexport type InsertReadingPlanTemplate = z.infer<typeof insertReadingPlanTemplateSchema>;\nexport type ReadingPlanTemplate = typeof readingPlanTemplates.$inferSelect;\n\nexport const insertReadingPlanSchema = createInsertSchema(readingPlans)\n  .omit({ id: true, createdAt: true, updatedAt: true, startedAt: true, completedAt: true })\n  .extend({\n    title: z.string().min(3, \"Título deve ter pelo menos 3 caracteres\").max(200),\n    totalDays: z.number().int().min(1, \"Plano deve ter pelo menos 1 dia\").max(365, \"Plano não pode ter mais de 365 dias\"),\n    currentDay: z.number().int().min(1).max(365).optional().nullable(),\n  });\nexport type InsertReadingPlan = z.infer<typeof insertReadingPlanSchema>;\nexport type ReadingPlan = typeof readingPlans.$inferSelect;\n\nexport const insertAchievementSchema = createInsertSchema(achievements).omit({ id: true, createdAt: true });\nexport type InsertAchievement = z.infer<typeof insertAchievementSchema>;\nexport type Achievement = typeof achievements.$inferSelect;\n\nexport const insertUserAchievementSchema = createInsertSchema(userAchievements).omit({ id: true, createdAt: true, unlockedAt: true });\nexport type InsertUserAchievement = z.infer<typeof insertUserAchievementSchema>;\nexport type UserAchievement = typeof userAchievements.$inferSelect;\n\nexport const insertPrayerSchema = createInsertSchema(prayers)\n  .omit({ id: true, createdAt: true, updatedAt: true })\n  .extend({\n    title: z.string().min(3, \"Título deve ter pelo menos 3 caracteres\").max(200, \"Título muito longo\"),\n    content: z.string().min(10, \"Oração deve ter pelo menos 10 caracteres\").max(10000, \"Oração muito longa\").optional().nullable(),\n    audioUrl: z.string().max(5000000, \"Áudio muito grande\").optional().nullable(),\n    audioDuration: z.number().min(1).max(600).optional().nullable(),\n  });\nexport type InsertPrayer = z.infer<typeof insertPrayerSchema>;\nexport type Prayer = typeof prayers.$inferSelect;\n\nexport const insertNoteSchema = createInsertSchema(notes)\n  .omit({ id: true, createdAt: true, updatedAt: true })\n  .extend({\n    book: z.string().min(2, \"Nome do livro inválido\").max(50),\n    chapter: z.number().int().min(1, \"Capítulo deve ser maior que 0\").max(150, \"Capítulo inválido\"),\n    verse: z.number().int().min(1).max(176).optional().nullable(),\n    content: z.string().min(1, \"Nota não pode estar vazia\").max(5000, \"Nota muito longa\"),\n  });\nexport type InsertNote = z.infer<typeof insertNoteSchema>;\nexport type Note = typeof notes.$inferSelect;\n\nexport const insertHighlightSchema = createInsertSchema(highlights)\n  .omit({ id: true, createdAt: true })\n  .extend({\n    book: z.string().min(2, \"Nome do livro inválido\").max(50),\n    chapter: z.number().int().min(1).max(150),\n    verse: z.number().int().min(1).max(176),\n    verseText: z.string().min(1).max(1000),\n    color: z.enum([\"yellow\", \"green\", \"blue\", \"purple\", \"pink\", \"orange\"], {\n      errorMap: () => ({ message: \"Cor deve ser: yellow, green, blue, purple, pink ou orange\" })\n    }),\n  });\nexport type InsertHighlight = z.infer<typeof insertHighlightSchema>;\nexport type Highlight = typeof highlights.$inferSelect;\n\nexport const insertBookmarkSchema = createInsertSchema(bookmarks)\n  .omit({ id: true, createdAt: true })\n  .extend({\n    book: z.string().min(1).max(50),\n    chapter: z.number().int().min(1).max(150),\n    verse: z.number().int().min(1).max(176),\n    verseText: z.string().min(1).max(2000),\n    version: z.string().max(20).optional().nullable(),\n    note: z.string().max(1000).optional().nullable(),\n  });\nexport type InsertBookmark = z.infer<typeof insertBookmarkSchema>;\nexport type Bookmark = typeof bookmarks.$inferSelect;\n\nexport const insertBibleSettingsSchema = createInsertSchema(bibleSettings).omit({ id: true, createdAt: true, updatedAt: true });\nexport type InsertBibleSettings = z.infer<typeof insertBibleSettingsSchema>;\nexport type BibleSettings = typeof bibleSettings.$inferSelect;\n\nexport const insertPodcastSchema = createInsertSchema(podcasts).omit({ id: true, createdAt: true, updatedAt: true });\nexport type InsertPodcast = z.infer<typeof insertPodcastSchema>;\nexport type Podcast = typeof podcasts.$inferSelect;\n\nexport const insertPodcastSubscriptionSchema = createInsertSchema(podcastSubscriptions).omit({ id: true, createdAt: true });\nexport type InsertPodcastSubscription = z.infer<typeof insertPodcastSubscriptionSchema>;\nexport type PodcastSubscription = typeof podcastSubscriptions.$inferSelect;\n\nexport const insertLessonSchema = createInsertSchema(lessons).omit({ id: true, createdAt: true, updatedAt: true });\nexport type InsertLesson = z.infer<typeof insertLessonSchema>;\nexport type Lesson = typeof lessons.$inferSelect;\n\nexport const updateLessonSchema = createInsertSchema(lessons).omit({ id: true, teacherId: true, createdAt: true, updatedAt: true }).partial();\nexport type UpdateLesson = z.infer<typeof updateLessonSchema>;\n\nexport const insertLessonProgressSchema = createInsertSchema(lessonProgress).omit({ id: true, createdAt: true });\nexport type InsertLessonProgress = z.infer<typeof insertLessonProgressSchema>;\nexport type LessonProgress = typeof lessonProgress.$inferSelect;\n\nexport const insertCommunityPostSchema = createInsertSchema(communityPosts)\n  .omit({ id: true, createdAt: true, updatedAt: true, likeCount: true, commentCount: true })\n  .extend({\n    verseReference: z.string().min(3, \"Referência do versículo inválida\").max(100),\n    verseText: z.string().min(5, \"Texto do versículo inválido\").max(2000),\n    note: z.string().min(10, \"Reflexão deve ter pelo menos 10 caracteres\").max(5000, \"Reflexão muito longa\"),\n  });\nexport type InsertCommunityPost = z.infer<typeof insertCommunityPostSchema>;\nexport type CommunityPost = typeof communityPosts.$inferSelect;\n\nexport const insertPostLikeSchema = createInsertSchema(postLikes).omit({ id: true, createdAt: true });\nexport type InsertPostLike = z.infer<typeof insertPostLikeSchema>;\nexport type PostLike = typeof postLikes.$inferSelect;\n\nexport const insertPostCommentSchema = createInsertSchema(postComments)\n  .omit({ id: true, createdAt: true, updatedAt: true })\n  .extend({\n    content: z.string().min(1, \"Comentário não pode estar vazio\").max(2000, \"Comentário muito longo\"),\n  });\nexport type InsertPostComment = z.infer<typeof insertPostCommentSchema>;\nexport type PostComment = typeof postComments.$inferSelect;\n\nexport const insertOfflineContentSchema = createInsertSchema(offlineContent).omit({ id: true, createdAt: true });\nexport type InsertOfflineContent = z.infer<typeof insertOfflineContentSchema>;\nexport type OfflineContent = typeof offlineContent.$inferSelect;\n\nexport const insertVerseCommentarySchema = createInsertSchema(verseCommentaries).omit({ id: true, createdAt: true, generatedAt: true });\nexport type InsertVerseCommentary = z.infer<typeof insertVerseCommentarySchema>;\nexport type VerseCommentary = typeof verseCommentaries.$inferSelect;\n\nexport const insertDonationSchema = createInsertSchema(donations).omit({ id: true, createdAt: true });\nexport type InsertDonation = z.infer<typeof insertDonationSchema>;\nexport type Donation = typeof donations.$inferSelect;\n\nexport const insertUserProgressSchema = createInsertSchema(userProgress).omit({ id: true, createdAt: true, updatedAt: true });\nexport type InsertUserProgress = z.infer<typeof insertUserProgressSchema>;\nexport type UserProgress = typeof userProgress.$inferSelect;\n\n// Daily Verse schemas removed from here as they are defined earlier in section 7\n\n// ============================================\n// PUSH NOTIFICATIONS\n// ============================================\n\nexport const pushSubscriptions = pgTable(\"push_subscriptions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  endpoint: text(\"endpoint\").notNull(),\n  p256dh: text(\"p256dh\").notNull(),\n  auth: text(\"auth\").notNull(),\n  userAgent: text(\"user_agent\"),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const notificationPreferences = pgTable(\"notification_preferences\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }).unique(),\n  readingReminders: boolean(\"reading_reminders\").default(true),\n  readingReminderTime: varchar(\"reading_reminder_time\", { length: 5 }).default(\"08:00\"),\n  prayerReminders: boolean(\"prayer_reminders\").default(true),\n  prayerReminderTime: varchar(\"prayer_reminder_time\", { length: 5 }).default(\"07:00\"),\n  dailyVerseNotification: boolean(\"daily_verse_notification\").default(true),\n  dailyVerseTime: varchar(\"daily_verse_time\", { length: 5 }).default(\"06:00\"),\n  communityActivity: boolean(\"community_activity\").default(false),\n  teacherModeUpdates: boolean(\"teacher_mode_updates\").default(true),\n  weekendOnly: boolean(\"weekend_only\").default(false),\n  timezone: varchar(\"timezone\", { length: 50 }).default(\"America/Sao_Paulo\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const notificationHistory = pgTable(\"notification_history\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  type: varchar(\"type\", { length: 50 }).notNull(),\n  title: varchar(\"title\", { length: 255 }).notNull(),\n  body: text(\"body\").notNull(),\n  data: jsonb(\"data\"),\n  sentAt: timestamp(\"sent_at\").defaultNow(),\n  clicked: boolean(\"clicked\").default(false),\n  clickedAt: timestamp(\"clicked_at\"),\n});\n\n// Audio cache for chapters and verses\nexport const audioCache = pgTable(\"audio_cache\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  language: varchar(\"language\", { length: 10 }).notNull(),\n  version: varchar(\"version\", { length: 20 }).notNull(),\n  book: varchar(\"book\", { length: 50 }).notNull(),\n  chapter: integer(\"chapter\").notNull(),\n  verse: integer(\"verse\"), // NULL for full chapters, set for verses\n  audioData: text(\"audio_data\").notNull(), // Base64 encoded MP3\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  index(\"IDX_audio_cache\").on(table.language, table.version, table.book, table.chapter, table.verse),\n]);\n\nexport const insertPushSubscriptionSchema = createInsertSchema(pushSubscriptions).omit({ id: true, createdAt: true, updatedAt: true });\nexport type InsertPushSubscription = z.infer<typeof insertPushSubscriptionSchema>;\nexport type PushSubscription = typeof pushSubscriptions.$inferSelect;\n\nexport const insertNotificationPreferencesSchema = createInsertSchema(notificationPreferences).omit({ id: true, createdAt: true, updatedAt: true });\nexport type InsertNotificationPreferences = z.infer<typeof insertNotificationPreferencesSchema>;\nexport type NotificationPreferences = typeof notificationPreferences.$inferSelect;\n\nexport const insertNotificationHistorySchema = createInsertSchema(notificationHistory).omit({ id: true, sentAt: true });\nexport type InsertNotificationHistory = z.infer<typeof insertNotificationHistorySchema>;\nexport type NotificationHistory = typeof notificationHistory.$inferSelect;\n\nexport const insertAudioCacheSchema = createInsertSchema(audioCache).omit({ id: true, createdAt: true });\nexport type InsertAudioCache = z.infer<typeof insertAudioCacheSchema>;\nexport type AudioCache = typeof audioCache.$inferSelect;\n\n// Bible content types\nexport type BibleTranslation = typeof bibleTranslations.$inferSelect;\nexport type BibleBook = typeof bibleBooks.$inferSelect;\nexport type BibleChapter = typeof bibleChapters.$inferSelect;\nexport type BibleVerse = typeof bibleVerses.$inferSelect;\nexport type CrossReference = typeof crossReferences.$inferSelect;\n\n// Group types and schemas\nexport type GroupMember = typeof groupMembers.$inferSelect;\nexport type PostReaction = typeof postReactions.$inferSelect;\nexport type AchievementDefinition = typeof achievementDefinitions.$inferSelect;\nexport type AdditionalContent = typeof additionalContent.$inferSelect;\nexport type ContentVerseReference = typeof contentVerseReferences.$inferSelect;\nexport type ReadingPlanItem = typeof readingPlanItems.$inferSelect;\nexport type ReadingHistoryEntry = typeof readingHistory.$inferSelect;\n\n// ============================================\n// STUDY GROUPS (Private Groups for Community)\n// ============================================\n\nexport const insertGroupMemberSchema = createInsertSchema(groupMembers).omit({ id: true, joinedAt: true });\nexport type InsertGroupMember = z.infer<typeof insertGroupMemberSchema>;\n\n// Group invitations\nexport const groupInvites = pgTable(\"group_invites\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  groupId: varchar(\"group_id\").notNull().references(() => groups.id, { onDelete: \"cascade\" }),\n  invitedEmail: varchar(\"invited_email\", { length: 255 }),\n  invitedPhone: varchar(\"invited_phone\", { length: 20 }),\n  inviteCode: varchar(\"invite_code\", { length: 50 }).unique(),\n  invitedBy: varchar(\"invited_by\").notNull().references(() => users.id),\n  status: varchar(\"status\", { length: 20 }).default(\"pending\"), // pending, accepted, rejected, expired\n  expiresAt: timestamp(\"expires_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertGroupInviteSchema = createInsertSchema(groupInvites).omit({ id: true, createdAt: true });\nexport type InsertGroupInvite = z.infer<typeof insertGroupInviteSchema>;\nexport type GroupInvite = typeof groupInvites.$inferSelect;\n\n// Group messages (chat/discussion)\nexport const groupMessages = pgTable(\"group_messages\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  groupId: varchar(\"group_id\").notNull().references(() => groups.id, { onDelete: \"cascade\" }),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  content: text(\"content\").notNull(),\n  replyToId: varchar(\"reply_to_id\"),\n  \n  // Optional verse reference\n  verseReference: text(\"verse_reference\"),\n  verseText: text(\"verse_text\"),\n  \n  // Message type\n  messageType: varchar(\"message_type\", { length: 20 }).default(\"text\"), // text, verse, prayer, lesson\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertGroupMessageSchema = createInsertSchema(groupMessages)\n  .omit({ id: true, createdAt: true, updatedAt: true })\n  .extend({\n    content: z.string().min(1, \"Mensagem não pode estar vazia\").max(2000, \"Mensagem muito longa\"),\n  });\nexport type InsertGroupMessage = z.infer<typeof insertGroupMessageSchema>;\nexport type GroupMessage = typeof groupMessages.$inferSelect;\n\n// ============================================\n// GROUP DISCUSSIONS (AI-structured Q&A sessions)\n// ============================================\n\nexport const groupDiscussions = pgTable(\"group_discussions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  groupId: varchar(\"group_id\").notNull().references(() => groups.id, { onDelete: \"cascade\" }),\n  createdById: varchar(\"created_by_id\").notNull().references(() => users.id),\n  \n  // Discussion content\n  title: text(\"title\").notNull(),\n  description: text(\"description\"),\n  \n  // The question/prompt (generated by AI or leader)\n  question: text(\"question\").notNull(),\n  \n  // Bible reference for context\n  verseReference: text(\"verse_reference\"),\n  verseText: text(\"verse_text\"),\n  \n  // AI synthesis of all answers\n  aiSynthesis: text(\"ai_synthesis\"),\n  synthesizedAt: timestamp(\"synthesized_at\"),\n  \n  // Status: open, closed, synthesized\n  status: varchar(\"status\", { length: 20 }).default(\"open\"),\n  \n  // Settings\n  allowAnonymous: boolean(\"allow_anonymous\").default(false),\n  deadline: timestamp(\"deadline\"),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertGroupDiscussionSchema = createInsertSchema(groupDiscussions)\n  .omit({ id: true, createdAt: true, updatedAt: true, synthesizedAt: true, aiSynthesis: true });\nexport type InsertGroupDiscussion = z.infer<typeof insertGroupDiscussionSchema>;\nexport type GroupDiscussion = typeof groupDiscussions.$inferSelect;\n\n// Group discussion answers (member responses)\nexport const groupAnswers = pgTable(\"group_answers\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  discussionId: varchar(\"discussion_id\").notNull().references(() => groupDiscussions.id, { onDelete: \"cascade\" }),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  \n  // The answer content\n  content: text(\"content\").notNull(),\n  \n  // Optional verse reference in answer\n  verseReference: text(\"verse_reference\"),\n  \n  // Leader review\n  reviewStatus: varchar(\"review_status\", { length: 20 }).default(\"pending\"), // pending, excellent, needs_review, approved\n  reviewComment: text(\"review_comment\"),\n  reviewedById: varchar(\"reviewed_by_id\").references(() => users.id),\n  reviewedAt: timestamp(\"reviewed_at\"),\n  \n  // Visibility\n  isAnonymous: boolean(\"is_anonymous\").default(false),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertGroupAnswerSchema = createInsertSchema(groupAnswers)\n  .omit({ id: true, createdAt: true, updatedAt: true, reviewedAt: true, reviewComment: true, reviewedById: true, reviewStatus: true });\nexport type InsertGroupAnswer = z.infer<typeof insertGroupAnswerSchema>;\nexport type GroupAnswer = typeof groupAnswers.$inferSelect;\n\n// ============================================\n// TEACHING OUTLINES (Structured Lesson Blocks)\n// ============================================\n\nexport const teachingOutlines = pgTable(\"teaching_outlines\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  teacherId: varchar(\"teacher_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  lessonId: varchar(\"lesson_id\").references(() => lessons.id, { onDelete: \"set null\" }),\n  \n  title: text(\"title\").notNull(),\n  description: text(\"description\"),\n  \n  // Structured content blocks\n  blocks: jsonb(\"blocks\").$type<Array<{\n    id: string;\n    type: \"text\" | \"verse\" | \"question\" | \"note\" | \"heading\" | \"illustration\";\n    content: string;\n    metadata?: {\n      book?: string;\n      chapter?: number;\n      verses?: string;\n      version?: string;\n      style?: \"h1\" | \"h2\" | \"h3\";\n    };\n  }>>().default([]),\n  \n  // Bible references\n  mainScripture: jsonb(\"main_scripture\").$type<{\n    book: string;\n    chapter: number;\n    verses?: string;\n  }>(),\n  \n  // Categories and tags\n  category: varchar(\"category\", { length: 50 }), // sermon, bible_study, devotional, teaching\n  tags: text(\"tags\").array(),\n  \n  // Sharing and visibility\n  isPublic: boolean(\"is_public\").default(false),\n  sharedWithGroups: text(\"shared_with_groups\").array(),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertTeachingOutlineSchema = createInsertSchema(teachingOutlines).omit({ id: true, createdAt: true, updatedAt: true });\nexport type InsertTeachingOutline = z.infer<typeof insertTeachingOutlineSchema>;\nexport type TeachingOutline = typeof teachingOutlines.$inferSelect;\n\n// ============================================\n// OFFLINE PODCAST DOWNLOADS\n// ============================================\n\nexport const podcastDownloads = pgTable(\"podcast_downloads\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  podcastId: varchar(\"podcast_id\").notNull().references(() => podcasts.id, { onDelete: \"cascade\" }),\n  episodeId: varchar(\"episode_id\").notNull(),\n  \n  downloadStatus: varchar(\"download_status\", { length: 20 }).default(\"pending\"), // pending, downloading, completed, failed\n  downloadProgress: integer(\"download_progress\").default(0),\n  fileSize: integer(\"file_size\"),\n  \n  downloadedAt: timestamp(\"downloaded_at\"),\n  expiresAt: timestamp(\"expires_at\"), // For auto-cleanup\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => ({\n  uniqueUserPodcastEpisode: unique().on(table.userId, table.podcastId, table.episodeId),\n}));\n\nexport const insertPodcastDownloadSchema = createInsertSchema(podcastDownloads).omit({ id: true, createdAt: true });\nexport type InsertPodcastDownload = z.infer<typeof insertPodcastDownloadSchema>;\nexport type PodcastDownload = typeof podcastDownloads.$inferSelect;\n\n// ============================================\n// BIBLE AUDIO PROGRESS (for syncing playback)\n// ============================================\n\nexport const audioProgress = pgTable(\"audio_progress\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  \n  book: varchar(\"book\", { length: 50 }).notNull(),\n  chapter: integer(\"chapter\").notNull(),\n  version: varchar(\"version\", { length: 20 }).default(\"ARA\"),\n  \n  playbackPosition: integer(\"playback_position\").default(0), // in seconds\n  totalDuration: integer(\"total_duration\").default(0), // in seconds\n  \n  lastPlayedAt: timestamp(\"last_played_at\").defaultNow(),\n  completed: boolean(\"completed\").default(false),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n}, (table) => [\n  index(\"idx_audio_progress_user_book_chapter\").on(table.userId, table.book, table.chapter),\n]);\n\nexport const insertAudioProgressSchema = createInsertSchema(audioProgress).omit({ id: true, createdAt: true, updatedAt: true });\nexport type InsertAudioProgress = z.infer<typeof insertAudioProgressSchema>;\nexport type AudioProgress = typeof audioProgress.$inferSelect;\n","path":null,"size_bytes":61511,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport { HelmetProvider } from \"react-helmet-async\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nif ('serviceWorker' in navigator && import.meta.env.PROD) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker.register('/sw.js')\n      .then((registration) => {\n        console.log('[PWA] Service Worker registered:', registration.scope);\n        \n        registration.addEventListener('updatefound', () => {\n          const newWorker = registration.installing;\n          if (newWorker) {\n            newWorker.addEventListener('statechange', () => {\n              if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\n                console.log('[PWA] New content available, refresh to update');\n                window.dispatchEvent(new CustomEvent('updateAvailable'));\n              }\n            });\n          }\n        });\n      })\n      .catch((error) => {\n        console.error('[PWA] Service Worker registration failed:', error);\n      });\n  });\n} else if ('serviceWorker' in navigator && !import.meta.env.PROD) {\n  navigator.serviceWorker.getRegistrations().then((registrations) => {\n    registrations.forEach((registration) => {\n      registration.unregister();\n      console.log('[PWA] Service Worker unregistered in development');\n    });\n  });\n  caches.keys().then((names) => {\n    names.forEach((name) => caches.delete(name));\n    console.log('[PWA] All caches cleared in development');\n  });\n}\n\nconst rootElement = document.getElementById(\"root\");\n\nif (rootElement) {\n  try {\n    createRoot(rootElement).render(\n      <HelmetProvider>\n        <App />\n      </HelmetProvider>\n    );\n  } catch (error) {\n    console.error(\"[BíbliaFS] Error rendering app:\", error);\n    rootElement.innerHTML = `\n      <div style=\"padding:20px;font-family:sans-serif;max-width:400px;margin:0 auto;text-align:center;\">\n        <h2 style=\"color:#c00;\">Erro ao carregar</h2>\n        <p style=\"color:#666;\">${error instanceof Error ? error.message : String(error)}</p>\n        <button onclick=\"location.reload()\" style=\"padding:10px 20px;background:#8B4513;color:white;border:none;border-radius:5px;cursor:pointer;margin-top:15px;\">\n          Tentar novamente\n        </button>\n      </div>\n    `;\n  }\n}\n","path":null,"size_bytes":2286,"size_tokens":null},"client/src/pages/teacher.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Label } from \"@/components/ui/label\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { \n  GraduationCap, \n  Plus, \n  Calendar,\n  FileText,\n  Download,\n  BarChart,\n  BookOpen,\n  CheckCircle2,\n  Loader2,\n  Clock,\n  Printer,\n  Sparkles,\n  Trash2,\n  HelpCircle,\n  Brain,\n  MessageSquare,\n  Share2\n} from \"lucide-react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { type Lesson } from \"@shared/schema\";\nimport { useLanguage } from '@/contexts/LanguageContext';\n\nconst exportLessonToPDF = (lesson: Lesson) => {\n  const printWindow = window.open('', '_blank');\n  if (!printWindow) return;\n\n  const objectives = lesson.objectives || [];\n  const quizQuestions = lesson.questions || [];\n  const scriptureRef = lesson.scriptureReferences?.[0];\n\n  const html = `\n    <!DOCTYPE html>\n    <html lang=\"pt-BR\">\n    <head>\n      <meta charset=\"UTF-8\">\n      <title>${lesson.title} - BíbliaFS</title>\n      <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body { \n          font-family: 'Georgia', serif; \n          line-height: 1.6; \n          padding: 40px; \n          max-width: 800px; \n          margin: 0 auto;\n          color: #1a1a1a;\n        }\n        .header { \n          text-align: center; \n          border-bottom: 2px solid #5711D9; \n          padding-bottom: 20px; \n          margin-bottom: 30px; \n        }\n        .logo { \n          font-size: 24px; \n          font-weight: bold; \n          color: #5711D9; \n          margin-bottom: 10px; \n        }\n        h1 { \n          font-size: 28px; \n          color: #1a1a1a; \n          margin-bottom: 10px; \n        }\n        .scripture-base { \n          font-size: 18px; \n          color: #5711D9; \n          font-style: italic; \n        }\n        .section { \n          margin-bottom: 25px; \n        }\n        .section-title { \n          font-size: 16px; \n          font-weight: bold; \n          color: #5711D9; \n          border-bottom: 1px solid #e0e0e0; \n          padding-bottom: 5px; \n          margin-bottom: 10px; \n        }\n        .description { \n          font-size: 14px; \n          color: #444; \n        }\n        ul { \n          padding-left: 20px; \n        }\n        li { \n          margin-bottom: 8px; \n        }\n        .quiz-question { \n          background: #f5f5f5; \n          padding: 15px; \n          border-radius: 8px; \n          margin-bottom: 10px; \n        }\n        .quiz-number { \n          font-weight: bold; \n          color: #5711D9; \n        }\n        .footer { \n          margin-top: 40px; \n          text-align: center; \n          font-size: 12px; \n          color: #888; \n          border-top: 1px solid #e0e0e0; \n          padding-top: 20px; \n        }\n        @media print {\n          body { padding: 20px; }\n          .no-print { display: none; }\n        }\n      </style>\n    </head>\n    <body>\n      <div class=\"header\">\n        <div class=\"logo\">BíbliaFS</div>\n        <h1>${lesson.title}</h1>\n        ${scriptureRef ? `<div class=\"scripture-base\">${scriptureRef.book} ${scriptureRef.chapter}${scriptureRef.verses ? ':' + scriptureRef.verses : ''}</div>` : ''}\n      </div>\n\n      <div class=\"section\">\n        <div class=\"section-title\">Descrição</div>\n        <p class=\"description\">${lesson.description || 'Sem descrição'}</p>\n      </div>\n\n      ${objectives.length > 0 ? `\n        <div class=\"section\">\n          <div class=\"section-title\">Objetivos da Aula</div>\n          <ul>\n            ${objectives.map(obj => `<li>${obj}</li>`).join('')}\n          </ul>\n        </div>\n      ` : ''}\n\n      ${quizQuestions.length > 0 ? `\n        <div class=\"section\">\n          <div class=\"section-title\">Perguntas para Reflexão</div>\n          ${quizQuestions.map((q: any, i: number) => `\n            <div class=\"quiz-question\">\n              <span class=\"quiz-number\">${i + 1}.</span> ${q.question || q}\n            </div>\n          `).join('')}\n        </div>\n      ` : ''}\n\n      <div class=\"footer\">\n        <p>Material gerado pelo BíbliaFS | www.bibliafs.app</p>\n        <p>© 2026 BíbliaFS | Desenvolvido por | <a href=\"https://fabrisite.com.br/\" target=\"_blank\">FabriSite</a></p>\n      </div>\n\n      <script>\n        window.onload = function() { window.print(); }\n      </script>\n    </body>\n    </html>\n  `;\n\n  printWindow.document.write(html);\n  printWindow.document.close();\n};\n\nconst generateLessonTextWithoutAnswers = (lesson: Lesson): string => {\n  const objectives = lesson.objectives || [];\n  const quizQuestions = lesson.questions || [];\n  const scriptureRef = lesson.scriptureReferences?.[0];\n\n  let text = `*${lesson.title}*\\n`;\n  text += `_BíbliaFS - Modo Professor_\\n\\n`;\n\n  if (scriptureRef) {\n    text += `*Texto-Base:* ${scriptureRef.book} ${scriptureRef.chapter}${scriptureRef.verses ? ':' + scriptureRef.verses : ''}\\n\\n`;\n  }\n\n  if (lesson.description) {\n    text += `*Descrição:*\\n${lesson.description}\\n\\n`;\n  }\n\n  if (objectives.length > 0) {\n    text += `*Objetivos da Aula:*\\n`;\n    objectives.forEach((obj, i) => {\n      text += `${i + 1}. ${obj}\\n`;\n    });\n    text += `\\n`;\n  }\n\n  if (lesson.content) {\n    text += `*Conteúdo:*\\n${lesson.content}\\n\\n`;\n  }\n\n  if (quizQuestions.length > 0) {\n    text += `*Perguntas para Reflexão:*\\n`;\n    quizQuestions.forEach((q: any, i: number) => {\n      text += `${i + 1}. ${q.question || q}\\n`;\n    });\n    text += `\\n`;\n  }\n\n  text += `---\\nMaterial gerado pelo BíbliaFS`;\n  return text;\n};\n\nconst shareLessonWhatsApp = (lesson: Lesson) => {\n  const text = generateLessonTextWithoutAnswers(lesson);\n  const encoded = encodeURIComponent(text);\n  window.open(`https://wa.me/?text=${encoded}`, '_blank');\n};\n\nconst downloadLessonText = (lesson: Lesson) => {\n  const text = generateLessonTextWithoutAnswers(lesson);\n  const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = `${lesson.title.replace(/[^a-zA-Z0-9À-ÿ\\s]/g, '').trim()}.txt`;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n  URL.revokeObjectURL(url);\n};\n\n// Form schema - complete lesson creation\nconst formSchema = z.object({\n  title: z.string().min(5, \"O título deve ter pelo menos 5 caracteres\"),\n  description: z.string().min(10, \"A descrição deve ter pelo menos 10 caracteres\"),\n  scriptureBase: z.string().min(1, \"Digite o texto-base\"),\n  duration: z.number().min(15, \"Mínimo 15 minutos\").max(300, \"Máximo 300 minutos\").optional(),\n  objectives: z.array(z.string()).optional(),\n  discussionQuestions: z.array(z.string()).optional(),\n  applicationPoints: z.array(z.string()).optional(),\n});\n\ntype FormData = z.infer<typeof formSchema>;\n\nexport default function Teacher() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const { user } = useAuth();\n  const isFreeUser = user?.subscriptionPlan === \"free\";\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [objectives, setObjectives] = useState<string[]>([]);\n  const [newObjective, setNewObjective] = useState(\"\");\n  const [contentBlocks, setContentBlocks] = useState<Array<{title: string; content: string}>>([]);\n  const [newBlockTitle, setNewBlockTitle] = useState(\"\");\n  const [newBlockContent, setNewBlockContent] = useState(\"\");\n  const [questions, setQuestions] = useState<Array<{question: string; answer: string}>>([]);\n  const [newQuestion, setNewQuestion] = useState(\"\");\n  const [newAnswer, setNewAnswer] = useState(\"\");\n  const [expandedAnswerIndex, setExpandedAnswerIndex] = useState<number | null>(null);\n  const [isGeneratingAI, setIsGeneratingAI] = useState(false);\n  const [currentTab, setCurrentTab] = useState<\"lessons\" | \"assistant\">(\"lessons\");\n  const [assistantMessages, setAssistantMessages] = useState<Array<{ role: \"user\" | \"assistant\"; content: string }>>([]);\n  const [assistantInput, setAssistantInput] = useState(\"\");\n  const [isAssistantLoading, setIsAssistantLoading] = useState(false);\n  const [editingLessonId, setEditingLessonId] = useState<string | null>(null);\n  const [conversationsUsed, setConversationsUsed] = useState(0);\n  const [conversationsLimit, setConversationsLimit] = useState(0);\n  const [showLimitWarning, setShowLimitWarning] = useState(false);\n  const [limitReached, setLimitReached] = useState(false);\n  const [userPlan, setUserPlan] = useState(\"\");\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const objectivesRef = useRef<HTMLDivElement>(null);\n\n  const { data: lessons = [], isLoading, error } = useQuery<Lesson[]>({\n    queryKey: [\"/api/teacher/lessons\"],\n    retry: 2,\n  });\n\n  const form = useForm<FormData>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      scriptureBase: \"\",\n      duration: 50,\n      objectives: [],\n      discussionQuestions: [],\n      applicationPoints: [],\n    },\n  });\n\n  const addObjective = () => {\n    if (newObjective.trim()) {\n      setObjectives([...objectives, newObjective.trim()]);\n      setNewObjective(\"\");\n    }\n  };\n\n  const removeObjective = (index: number) => {\n    setObjectives(objectives.filter((_, i) => i !== index));\n  };\n\n  const addContentBlock = () => {\n    if (newBlockTitle.trim() && newBlockContent.trim()) {\n      setContentBlocks([...contentBlocks, { title: newBlockTitle.trim(), content: newBlockContent.trim() }]);\n      setNewBlockTitle(\"\");\n      setNewBlockContent(\"\");\n    }\n  };\n\n  const removeContentBlock = (index: number) => {\n    setContentBlocks(contentBlocks.filter((_, i) => i !== index));\n  };\n\n  const addQuestion = () => {\n    if (newQuestion.trim()) {\n      setQuestions([...questions, { question: newQuestion.trim(), answer: newAnswer.trim() || \"Resposta será preenchida aqui\" }]);\n      setNewQuestion(\"\");\n      setNewAnswer(\"\");\n    }\n  };\n\n  const removeQuestion = (index: number) => {\n    setQuestions(questions.filter((_, i) => i !== index));\n  };\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [assistantMessages]);\n\n  const handleAssistantSubmit = async () => {\n    if (!assistantInput.trim()) return;\n    \n    // Check if limit is reached only at the moment of submission\n    // We already have the conversationsUsed and limit from previous calls\n    if (limitReached || (conversationsLimit > 0 && conversationsUsed >= conversationsLimit)) {\n      let message = \"Você atingiu o limite de conversas.\";\n      \n      if (userPlan === \"free\") {\n        message = \"Você esgotou suas 20 perguntas gratuitas. Para continuar usando a IA, assine um de nossos planos.\";\n      } else if (userPlan === \"monthly\") {\n        message = \"Você usou todas as 500 perguntas do mês. O limite será renovado no próximo mês.\";\n      } else if (userPlan === \"yearly\" || userPlan === \"annual\") {\n        message = \"Você usou todas as 3750 perguntas do ano. O limite será renovado no próximo período.\";\n      } else if (userPlan === \"premium_plus\") {\n        message = \"Você usou todas as 7200 perguntas do ano. Entre em contato para um plano customizado.\";\n      }\n      \n      toast({\n        title: \"Limite atingido\",\n        description: message,\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const userMessage = { role: \"user\" as const, content: assistantInput };\n    const questionToSend = assistantInput;\n    \n    setAssistantMessages(prev => [...prev, userMessage]);\n    setAssistantInput(\"\");\n    setIsAssistantLoading(true);\n\n    try {\n      const res = await apiRequest(\"POST\", \"/api/teacher/ask-assistant\", { question: questionToSend, context: \"Aula bíblica\" });\n      const data = await res.json();\n      console.log(\"Resposta do assistente:\", data);\n      \n      if (data.limitReached) {\n        setLimitReached(true);\n        throw new Error(\"Você atingiu o limite de conversas.\");\n      }\n      \n      if (!data || !data.answer) {\n        console.error(\"Resposta inválida:\", data);\n        throw new Error(\"Resposta vazia do assistente - tente novamente\");\n      }\n      \n      // Update conversation counter and plan info for free users\n      if (data.plan) {\n        setUserPlan(data.plan);\n      }\n      \n      // Track limits for ALL users (each plan has its own limit)\n      if (data.conversationsUsed !== undefined) {\n        setConversationsUsed(data.conversationsUsed);\n        if (data.conversationsLimit && data.conversationsLimit > 0) {\n          setConversationsLimit(data.conversationsLimit);\n        }\n        \n        // Check if limit reached\n        if (data.limitReached) {\n          setLimitReached(true);\n        }\n        \n        // Show warning at 95% of limit instead of 75% to be less intrusive\n        if (data.conversationsLimit && data.conversationsLimit > 0 && \n            data.conversationsUsed >= Math.floor(data.conversationsLimit * 0.95)) {\n          if (!showLimitWarning) {\n            setShowLimitWarning(true);\n            const remaining = data.conversationsLimit - data.conversationsUsed;\n            let warningMessage = \"\";\n            \n            if (data.plan === \"free\") {\n              warningMessage = \"Assine um plano premium para continuar usando a IA após esgotar suas perguntas.\";\n            } else if (data.plan === \"monthly\") {\n              warningMessage = \"Seu limite mensal está próximo de esgotar. Renova no próximo mês.\";\n            } else {\n              warningMessage = \"Seu limite anual está próximo de esgotar. Renova no próximo período.\";\n            }\n            \n            toast({\n              title: `Próximo do limite (${remaining} perguntas restantes)`,\n              description: warningMessage,\n            });\n          }\n        }\n      }\n      \n      setAssistantMessages(prev => [...prev, { role: \"assistant\", content: data.answer }]);\n    } catch (error: any) {\n      console.error(\"Erro no assistente:\", error);\n      toast({\n        title: \"Erro\",\n        description: error.message || \"Não foi possível consultar o assistente IA\",\n        variant: \"destructive\",\n      });\n      setAssistantMessages(prev => prev.slice(0, -1));\n    } finally {\n      setIsAssistantLoading(false);\n    }\n  };\n\n  const generateWithAI = async () => {\n    const title = form.getValues(\"title\");\n    const scriptureBase = form.getValues(\"scriptureBase\");\n    const duration = form.getValues(\"duration\") || 50;\n    \n    if (!title || !scriptureBase) {\n      toast({\n        title: \"Preencha os campos\",\n        description: \"Digite o título e texto-base para gerar conteúdo com IA\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsGeneratingAI(true);\n    try {\n      const res = await apiRequest(\"POST\", \"/api/teacher/generate-lesson-content\", { title, scriptureBase, duration });\n      const data = await res.json();\n      \n      if (data.description) form.setValue(\"description\", data.description);\n      if (data.objectives?.length) setObjectives(data.objectives);\n      if (data.contentBlocks?.length) setContentBlocks(data.contentBlocks);\n      if (data.questions?.length) {\n        // Convert questions to {question, answer} format if needed\n        const formattedQuestions = data.questions.map((q: any) => \n          typeof q === 'string' ? { question: q, answer: \"\" } : q\n        );\n        setQuestions(formattedQuestions);\n      }\n\n      // Scroll para mostrar conteúdo gerado\n      setTimeout(() => {\n        objectivesRef.current?.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n      }, 300);\n\n      toast({\n        title: \"Conteúdo gerado!\",\n        description: \"A IA sugeriu objetivos e perguntas para sua aula\",\n      });\n    } catch (error: any) {\n      toast({\n        title: \"Erro ao gerar\",\n        description: error.message || \"Tente novamente ou preencha manualmente\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsGeneratingAI(false);\n    }\n  };\n\n  const createMutation = useMutation({\n    mutationFn: async (data: FormData) => {\n      const lessonData = {\n        ...data,\n        objectives,\n        contentBlocks,\n        questions: questions.map((q, i) => ({\n          id: `q-${i}`,\n          question: typeof q === 'string' ? q : q.question,\n          answer: typeof q === 'string' ? \"\" : q.answer,\n          options: [],\n          correctAnswer: -1,\n        })),\n      };\n      const res = await apiRequest(\"POST\", \"/api/teacher/lessons\", lessonData);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/teacher/lessons\"] });\n      setIsCreateDialogOpen(false);\n      form.reset();\n      setObjectives([]);\n      setContentBlocks([]);\n      setQuestions([]);\n      toast({\n        title: \"Aula criada!\",\n        description: \"Sua aula foi salva com sucesso.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao criar aula\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: FormData) => {\n    if (editingLessonId) {\n      updateMutation.mutate(data);\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: FormData) => {\n      const lessonData = {\n        ...data,\n        objectives,\n        contentBlocks,\n        questions: questions.map((q, i) => ({\n          id: `q-${i}`,\n          question: typeof q === 'string' ? q : q.question,\n          answer: typeof q === 'string' ? \"\" : q.answer,\n          options: [],\n          correctAnswer: -1,\n        })),\n      };\n      const res = await apiRequest(\"PATCH\", `/api/teacher/lessons/${editingLessonId}`, lessonData);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/teacher/lessons\"] });\n      setEditingLessonId(null);\n      setIsCreateDialogOpen(false);\n      form.reset();\n      setObjectives([]);\n      setContentBlocks([]);\n      setQuestions([]);\n      toast({ title: \"Aula atualizada!\", description: \"Alterações salvas com sucesso.\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Erro ao atualizar\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (lessonId: string) => {\n      const res = await apiRequest(\"DELETE\", `/api/teacher/lessons/${lessonId}`, {});\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/teacher/lessons\"] });\n      toast({ title: \"Aula deletada!\", description: \"A aula foi removida com sucesso.\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Erro ao deletar\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const handleEditLesson = (lesson: Lesson) => {\n    const scriptureBase = typeof lesson.scriptureReferences?.[0] === 'string' \n      ? lesson.scriptureReferences[0] \n      : lesson.scriptureReferences?.[0]?.verses || \"\";\n    \n    form.reset({\n      title: lesson.title,\n      description: lesson.description || \"\",\n      scriptureBase,\n    });\n    setObjectives(lesson.objectives || []);\n    setContentBlocks((lesson as any).contentBlocks || []);\n    setQuestions((lesson.questions || []).map((q: any) => {\n      if (typeof q === 'string') return { question: q, answer: \"\" };\n      if (q.question) return { question: q.question, answer: q.answer || \"\" };\n      return { question: \"\", answer: \"\" };\n    }));\n    setEditingLessonId(lesson.id);\n    setIsCreateDialogOpen(true);\n  };\n\n  const handleDeleteLesson = (lessonId: string) => {\n    if (confirm(\"Tem certeza que deseja deletar esta aula?\")) {\n      deleteMutation.mutate(lessonId);\n    }\n  };\n\n  const handleCloseDialog = () => {\n    setIsCreateDialogOpen(false);\n    setEditingLessonId(null);\n    form.reset();\n    setObjectives([]);\n    setContentBlocks([]);\n    setQuestions([]);\n    setNewBlockTitle(\"\");\n    setNewBlockContent(\"\");\n    setExpandedAnswerIndex(null);\n  };\n\n  const publishedLessons = lessons.filter(l => l.isPublished);\n  const draftLessons = lessons.filter(l => !l.isPublished);\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center space-y-3\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary mx-auto\" />\n          <p className=\"text-sm text-muted-foreground\">Carregando aulas...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"max-w-7xl mx-auto p-6 text-center\">\n          <p className=\"text-destructive\">Erro ao carregar aulas</p>\n          <Card className=\"border-destructive\">\n            <CardContent className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <div className=\"flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10 mb-4\">\n                <GraduationCap className=\"h-8 w-8 text-destructive\" />\n              </div>\n              <h3 className=\"font-semibold text-lg mb-2\">Erro ao carregar aulas</h3>\n              <p className=\"text-muted-foreground mb-4\">\n                Não foi possível carregar suas aulas. Tente novamente.\n              </p>\n              <Button onClick={() => window.location.reload()} data-testid=\"button-retry\">\n                Tentar Novamente\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"max-w-7xl mx-auto p-6 relative z-10\">\n        {/* Header */}\n        <motion.div \n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center space-y-2 mb-12\"\n        >\n          <p className=\"text-[10px] font-semibold text-primary uppercase tracking-[0.2em]\">ENSINO BÍBLICO</p>\n          <h1 className=\"font-display text-3xl sm:text-4xl font-bold text-foreground\" data-testid=\"text-page-title\">\n            {t.teacherMode.title}\n          </h1>\n          <p className=\"text-sm text-muted-foreground\">\n            Crie aulas inspiradoras e potencialize seu ensino com IA\n          </p>\n        </motion.div>\n        \n        <div className=\"flex justify-center mb-8\">\n          <Dialog open={isCreateDialogOpen} onOpenChange={(open) => open ? setIsCreateDialogOpen(true) : handleCloseDialog()}>\n            <DialogTrigger asChild>\n              <Button size=\"lg\" className=\"rounded-2xl h-14 px-8 shadow-xl shadow-primary/20 hover-elevate\" data-testid=\"button-create-lesson\" onClick={() => setIsCreateDialogOpen(true)}>\n                <Plus className=\"h-6 w-6 mr-2\" />\n                {t.teacherMode.new_lesson}\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-3xl rounded-[2.5rem] border-0 glass max-h-[90vh] overflow-y-auto\">\n              <DialogHeader className=\"pb-4\">\n                <DialogTitle className=\"text-2xl font-bold flex items-center gap-2\">\n                  <div className=\"p-2 rounded-xl bg-primary/10\">\n                    <GraduationCap className=\"h-6 w-6 text-primary\" />\n                  </div>\n                  {editingLessonId ? \"Editar Aula\" : \"Criar Nova Aula\"}\n                </DialogTitle>\n                <DialogDescription className=\"text-base font-medium\">\n                  Monte uma aula completa com objetivos, perguntas e recursos\n                </DialogDescription>\n              </DialogHeader>\n              \n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                  <div className=\"max-h-[70vh] overflow-y-auto px-1 space-y-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"title\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>{t.teacherMode.lesson_title}</FormLabel>\n                          <FormControl>\n                            <Input \n                              placeholder=\"Ex: A Parábola do Filho Pródigo\"\n                              data-testid=\"input-lesson-title\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                    \n                    <FormField\n                      control={form.control}\n                      name=\"description\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Descrição</FormLabel>\n                          <FormControl>\n                            <Textarea \n                              placeholder=\"Breve descrição do tema da aula...\"\n                              data-testid=\"textarea-lesson-description\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                    \n                    <FormField\n                      control={form.control}\n                      name=\"scriptureBase\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Texto-Base</FormLabel>\n                          <FormControl>\n                            <Input \n                              placeholder=\"Ex: Lucas 15:11-32\"\n                              data-testid=\"input-scripture-base\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"duration\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"flex items-center gap-2\">\n                            <Clock className=\"h-4 w-4\" />\n                            Duração da Aula (minutos)\n                          </FormLabel>\n                          <FormControl>\n                            <Input \n                              type=\"number\"\n                              min={1}\n                              placeholder=\"Ex: 50\"\n                              data-testid=\"input-lesson-duration\"\n                              {...field}\n                              onChange={(e) => field.onChange(e.target.value === \"\" ? \"\" : parseInt(e.target.value))}\n                              value={field.value ?? \"\"}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    {/* AI Generation Button */}\n                    <div className=\"flex justify-center pt-2\">\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={generateWithAI}\n                        disabled={isGeneratingAI}\n                        className=\"gap-2\"\n                        data-testid=\"button-generate-ai\"\n                      >\n                        {isGeneratingAI ? (\n                          <>\n                            <Loader2 className=\"h-4 w-4 animate-spin\" />\n                            Gerando com IA...\n                          </>\n                        ) : (\n                          <>\n                            <Sparkles className=\"h-4 w-4\" />\n                            Gerar Conteúdo com IA\n                          </>\n                        )}\n                      </Button>\n                    </div>\n\n                    {/* Objectives Section */}\n                    <div ref={objectivesRef} className=\"space-y-3 pt-4 border-t\">\n                      <FormLabel className=\"flex items-center gap-2\">\n                        <CheckCircle2 className=\"h-4 w-4\" />\n                        Objetivos da Aula\n                      </FormLabel>\n                      <div className=\"flex gap-2\">\n                        <Input\n                          placeholder=\"Ex: Compreender o amor incondicional do Pai\"\n                          value={newObjective}\n                          onChange={(e) => setNewObjective(e.target.value)}\n                          onKeyDown={(e) => e.key === \"Enter\" && (e.preventDefault(), addObjective())}\n                          data-testid=\"input-new-objective\"\n                        />\n                        <Button type=\"button\" onClick={addObjective} size=\"icon\" variant=\"outline\" data-testid=\"button-add-objective\">\n                          <Plus className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                      {objectives.length > 0 && (\n                        <ul className=\"space-y-2\">\n                          {objectives.map((obj, i) => (\n                            <li key={i} className=\"flex items-center gap-2 p-2 bg-muted rounded-lg\">\n                              <CheckCircle2 className=\"h-4 w-4 text-primary flex-shrink-0\" />\n                              <span className=\"flex-1 text-sm\">{obj}</span>\n                              <Button\n                                type=\"button\"\n                                size=\"icon\"\n                                variant=\"ghost\"\n                                onClick={() => removeObjective(i)}\n                                className=\"h-6 w-6\"\n                                data-testid={`button-remove-objective-${i}`}\n                              >\n                                <Trash2 className=\"h-3 w-3\" />\n                              </Button>\n                            </li>\n                          ))}\n                        </ul>\n                      )}\n                    </div>\n\n                    {/* Content Blocks Section */}\n                    <div className=\"space-y-3 pt-4 border-t\">\n                      <FormLabel className=\"flex items-center gap-2\">\n                        <BookOpen className=\"h-4 w-4\" />\n                        Conteúdo da Aula (Blocos Principais)\n                      </FormLabel>\n                      <div className=\"space-y-2\">\n                        <Input\n                          placeholder=\"Título do bloco (ex: A Incarnação de Cristo)\"\n                          value={newBlockTitle}\n                          onChange={(e) => setNewBlockTitle(e.target.value)}\n                          data-testid=\"input-block-title\"\n                        />\n                        <Textarea\n                          placeholder=\"Conteúdo do bloco (parágrafos com versículos, exemplos e aplicações)\"\n                          value={newBlockContent}\n                          onChange={(e) => setNewBlockContent(e.target.value)}\n                          className=\"min-h-24\"\n                          data-testid=\"textarea-block-content\"\n                        />\n                        <Button type=\"button\" onClick={addContentBlock} className=\"w-full gap-2\" data-testid=\"button-add-block\">\n                          <Plus className=\"h-4 w-4\" />\n                          Adicionar Bloco de Conteúdo\n                        </Button>\n                      </div>\n                      {contentBlocks.length > 0 && (\n                        <ul className=\"space-y-2\">\n                          {contentBlocks.map((block, i) => (\n                            <li key={i} className=\"p-3 bg-muted rounded-lg space-y-2\">\n                              <div className=\"flex items-start justify-between gap-2\">\n                                <div className=\"flex-1\">\n                                  <p className=\"font-semibold text-sm mb-1\">{block.title}</p>\n                                  <p className=\"text-xs text-muted-foreground whitespace-pre-wrap\">{block.content}</p>\n                                </div>\n                                <Button\n                                  type=\"button\"\n                                  size=\"icon\"\n                                  variant=\"ghost\"\n                                  onClick={() => removeContentBlock(i)}\n                                  className=\"h-6 w-6 flex-shrink-0\"\n                                  data-testid={`button-remove-block-${i}`}\n                                >\n                                  <Trash2 className=\"h-3 w-3\" />\n                                </Button>\n                              </div>\n                            </li>\n                          ))}\n                        </ul>\n                      )}\n                    </div>\n\n                    {/* Discussion Questions Section */}\n                    <div className=\"space-y-3 pt-4 border-t\">\n                      <FormLabel className=\"flex items-center gap-2\">\n                        <HelpCircle className=\"h-4 w-4\" />\n                        Perguntas para Discussão com Gabarito\n                      </FormLabel>\n                      <div className=\"space-y-2\">\n                        <Input\n                          placeholder=\"Ex: O que significa ser um filho pródigo hoje?\"\n                          value={newQuestion}\n                          onChange={(e) => setNewQuestion(e.target.value)}\n                          data-testid=\"input-new-question\"\n                        />\n                        <Textarea\n                          placeholder=\"Resposta/Gabarito (2-3 frases com fundamentação bíblica)\"\n                          value={newAnswer}\n                          onChange={(e) => setNewAnswer(e.target.value)}\n                          className=\"min-h-20\"\n                          data-testid=\"textarea-new-answer\"\n                        />\n                        <Button type=\"button\" onClick={addQuestion} className=\"w-full gap-2\" data-testid=\"button-add-question\">\n                          <Plus className=\"h-4 w-4\" />\n                          Adicionar Pergunta e Resposta\n                        </Button>\n                      </div>\n                      {questions.length > 0 && (\n                        <ul className=\"space-y-2\">\n                          {questions.map((q, i) => (\n                            <li key={i} className=\"p-3 bg-muted rounded-lg space-y-2\">\n                              <div className=\"flex items-start gap-2\">\n                                <span className=\"flex h-5 w-5 items-center justify-center rounded-full bg-primary text-primary-foreground text-xs font-bold flex-shrink-0 mt-0.5\">\n                                  {i + 1}\n                                </span>\n                                <div className=\"flex-1 space-y-1\">\n                                  <p className=\"text-sm font-medium\">{q.question}</p>\n                                  <Button\n                                    type=\"button\"\n                                    variant=\"ghost\"\n                                    size=\"sm\"\n                                    onClick={() => setExpandedAnswerIndex(expandedAnswerIndex === i ? null : i)}\n                                    className=\"text-xs h-6\"\n                                    data-testid={`button-toggle-answer-${i}`}\n                                  >\n                                    {expandedAnswerIndex === i ? \"Ocultar Resposta\" : \"Ver Resposta\"}\n                                  </Button>\n                                  {expandedAnswerIndex === i && (\n                                    <div className=\"p-2 bg-background rounded text-sm mt-2 border-l-2 border-primary\">\n                                      {q.answer}\n                                    </div>\n                                  )}\n                                </div>\n                                <Button\n                                  type=\"button\"\n                                  size=\"icon\"\n                                  variant=\"ghost\"\n                                  onClick={() => removeQuestion(i)}\n                                  className=\"h-6 w-6 flex-shrink-0\"\n                                  data-testid={`button-remove-question-${i}`}\n                                >\n                                  <Trash2 className=\"h-3 w-3\" />\n                                </Button>\n                              </div>\n                            </li>\n                          ))}\n                        </ul>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <DialogFooter>\n                    <Button \n                      type=\"button\" \n                      variant=\"outline\" \n                      onClick={handleCloseDialog}\n                      data-testid=\"button-cancel-lesson\"\n                    >\n                      Cancelar\n                    </Button>\n                    <Button \n                      type=\"submit\" \n                      disabled={createMutation.isPending || updateMutation.isPending}\n                      data-testid=\"button-save-lesson\"\n                    >\n                      {(createMutation.isPending || updateMutation.isPending) ? (\n                        <>\n                          <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                          Salvando...\n                        </>\n                      ) : (\n                        editingLessonId ? \"Atualizar Aula\" : \"Salvar Aula\"\n                      )}\n                    </Button>\n                  </DialogFooter>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n        </div>\n\n        {/* Tabs */}\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }}>\n          <Tabs value={currentTab} onValueChange={(v) => setCurrentTab(v as \"lessons\" | \"assistant\")} className=\"mb-10\">\n            <TabsList className=\"grid w-full max-w-md grid-cols-2 mb-10 bg-muted/50 p-1 bg-muted/50 rounded-2xl gap-1 h-auto\">\n              <TabsTrigger value=\"lessons\" data-testid=\"tab-lessons\" className=\"rounded-xl px-6 py-2.5 data-[state=active]:bg-background data-[state=active]:shadow-sm font-bold\">\n                <BookOpen className=\"h-4 w-4 mr-2\" />\n                Minhas Aulas\n              </TabsTrigger>\n              <TabsTrigger value=\"assistant\" data-testid=\"tab-assistant\" className=\"rounded-xl px-6 py-2.5 data-[state=active]:bg-background data-[state=active]:shadow-sm font-bold\">\n                <Brain className=\"h-4 w-4 mr-2\" />\n                Assistente IA\n              </TabsTrigger>\n            </TabsList>\n          </Tabs>\n        </motion.div>\n\n        {/* Assistant Tab */}\n        {currentTab === \"assistant\" && (\n          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }}>\n            <Card className=\"glass-premium hover-premium rounded-[2.5rem] border-none bg-card/80 backdrop-blur-2xl shadow-2xl overflow-hidden flex flex-col h-[650px] mb-8\">\n              <CardHeader className=\"bg-primary/5 p-6 md:p-8 border-b border-primary/10\">\n                <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"h-14 w-14 rounded-2xl bg-primary flex items-center justify-center shadow-lg shadow-primary/20\">\n                      <Brain className=\"h-8 w-8 text-white\" />\n                    </div>\n                    <div>\n                      <CardTitle className=\"text-2xl font-bold\">Assistente IA Teológico</CardTitle>\n                      <CardDescription className=\"text-base\">\n                        Pergunte sobre educação bíblica, pedagogia e conteúdo\n                      </CardDescription>\n                    </div>\n                  </div>\n                  {conversationsUsed > 0 && conversationsLimit > 0 && (\n                    <div className=\"flex flex-col items-end gap-1\">\n                      <Badge variant=\"outline\" className=\"rounded-xl px-4 py-2 bg-background/50 border-primary/20 font-bold text-primary\">\n                        {conversationsUsed}/{conversationsLimit} Conversas\n                      </Badge>\n                      {showLimitWarning && !limitReached && (\n                        <span className=\"text-xs text-amber-600\">Próximo do limite</span>\n                      )}\n                      {limitReached && (\n                        <span className=\"text-xs text-destructive font-bold\">Limite atingido</span>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </CardHeader>\n              <CardContent className=\"flex-1 overflow-y-auto p-6 md:p-8 space-y-6\">\n                {assistantMessages.length === 0 ? (\n                  <div className=\"h-full flex flex-col items-center justify-center text-center space-y-6\">\n                    <div className=\"p-6 rounded-[2rem] bg-muted/30\">\n                      <MessageSquare className=\"h-12 w-12 text-muted-foreground\" />\n                    </div>\n                    <div className=\"max-w-md\">\n                      <h4 className=\"font-bold text-xl mb-2\">Inicie uma conversa</h4>\n                      <p className=\"text-muted-foreground text-lg\">\n                        \"Como posso explicar a graça de Deus para crianças de 7 anos?\"\n                      </p>\n                    </div>\n                  </div>\n                ) : (\n                  <>\n                    {assistantMessages.map((msg, i) => (\n                      <motion.div\n                        key={i}\n                        initial={{ opacity: 0, y: 10, x: msg.role === \"user\" ? 20 : -20 }}\n                        animate={{ opacity: 1, y: 0, x: 0 }}\n                        className={`flex ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\n                      >\n                        <div className={`max-w-[80%] p-5 rounded-[1.5rem] shadow-sm ${\n                          msg.role === \"user\" \n                            ? \"bg-primary text-white rounded-tr-none\" \n                            : \"bg-muted/50 backdrop-blur-sm rounded-tl-none border border-border/50 text-foreground\"\n                        }`}>\n                          <p className=\"text-base leading-relaxed whitespace-pre-wrap\">{msg.content}</p>\n                        </div>\n                      </motion.div>\n                    ))}\n                    {isAssistantLoading && (\n                      <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"flex justify-start\">\n                        <div className=\"bg-muted/50 p-5 rounded-[1.5rem] rounded-tl-none flex items-center gap-3\">\n                          <Loader2 className=\"h-5 w-5 animate-spin text-primary\" />\n                          <span className=\"font-bold text-muted-foreground\">Pensando...</span>\n                        </div>\n                      </motion.div>\n                    )}\n                    <div ref={messagesEndRef} />\n                  </>\n                )}\n              </CardContent>\n              <CardFooter className=\"p-6 md:p-8 bg-background/50 backdrop-blur-xl border-t border-border/50\">\n                <div className=\"flex gap-4 w-full\">\n                  <Input \n                    placeholder=\"Digite sua dúvida teológica...\"\n                    value={assistantInput}\n                    onChange={(e) => setAssistantInput(e.target.value)}\n                    onKeyDown={(e) => e.key === \"Enter\" && handleAssistantSubmit()}\n                    className=\"flex-1 rounded-2xl h-14 bg-muted/50 border-none px-6 text-lg\"\n                    disabled={isAssistantLoading}\n                    data-testid=\"input-assistant-question\"\n                  />\n                  <Button \n                    size=\"icon\" \n                    className=\"h-14 w-14 rounded-2xl shadow-lg shadow-primary/20\" \n                    onClick={handleAssistantSubmit}\n                    disabled={isAssistantLoading || !assistantInput.trim()}\n                    data-testid=\"button-send-question\"\n                  >\n                    {isAssistantLoading ? (\n                      <Loader2 className=\"h-6 w-6 animate-spin\" />\n                    ) : (\n                      <MessageSquare className=\"h-6 w-6\" />\n                    )}\n                  </Button>\n                </div>\n              </CardFooter>\n            </Card>\n          </motion.div>\n        )}\n\n        {/* Stats */}\n        {currentTab === \"lessons\" && (\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mb-10\">\n            {[\n              { title: \"Total de Aulas\", value: lessons.length, icon: BookOpen, color: \"text-primary\", bg: \"bg-primary/10\", testId: \"text-total-lessons\" },\n              { title: \"Publicadas\", value: publishedLessons.length, icon: CheckCircle2, color: \"text-green-500\", bg: \"bg-green-500/10\" },\n              { title: \"Rascunhos\", value: lessons.length - publishedLessons.length, icon: Clock, color: \"text-blue-500\", bg: \"bg-blue-500/10\" },\n              { title: \"Referências\", value: lessons.reduce((acc, l) => acc + (l.scriptureReferences?.length || 0), 0), icon: BarChart, color: \"text-amber-500\", bg: \"bg-amber-500/10\" },\n            ].map((stat, idx) => (\n              <motion.div\n                key={stat.title}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.15 + idx * 0.05 }}\n              >\n                <Card className=\"glass-premium hover-premium rounded-2xl border-none bg-card/80 backdrop-blur-xl shadow-lg\">\n                  <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n                    <CardTitle className=\"text-xs font-bold uppercase tracking-widest text-muted-foreground\">{stat.title}</CardTitle>\n                    <div className={`p-2 rounded-xl ${stat.bg}`}>\n                      <stat.icon className={`h-4 w-4 ${stat.color}`} />\n                    </div>\n                  </CardHeader>\n                  <CardContent>\n                    <div className={`text-3xl md:text-4xl font-bold ${stat.color}`} data-testid={stat.testId}>\n                      {stat.value}\n                    </div>\n                  </CardContent>\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n        )}\n\n        {/* Lessons List */}\n        {currentTab === \"lessons\" && (\n          <>\n            {lessons.length === 0 ? (\n              <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }}>\n                <Card className=\"glass-premium hover-premium rounded-[3rem] border-none bg-muted/20 backdrop-blur-sm\">\n                  <CardContent className=\"flex flex-col items-center justify-center py-20 text-center\">\n                    <div className=\"flex h-24 w-24 items-center justify-center rounded-[2rem] bg-background shadow-inner mb-8\">\n                      <BookOpen className=\"h-12 w-12 text-muted-foreground\" />\n                    </div>\n                    <h3 className=\"font-bold text-2xl mb-4\">Nenhuma aula criada ainda</h3>\n                    <p className=\"text-muted-foreground mb-10 max-w-md text-lg\">\n                      Crie sua primeira aula e comece a transformar vidas através do ensino bíblico.\n                    </p>\n                    <Button size=\"lg\" className=\"rounded-2xl h-14 px-10 font-bold shadow-xl shadow-primary/10\" onClick={() => setIsCreateDialogOpen(true)}>\n                      <Plus className=\"h-6 w-6 mr-2\" />\n                      Criar Primeira Aula\n                    </Button>\n                  </CardContent>\n                </Card>\n              </motion.div>\n            ) : (\n              <div className=\"space-y-10\">\n                {/* Published Lessons */}\n                {publishedLessons.length > 0 && (\n                  <div>\n                    <h3 className=\"font-bold text-xl mb-6 flex items-center gap-2\">\n                      <CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n                      Aulas Publicadas\n                    </h3>\n                    <div className=\"grid md:grid-cols-2 gap-6\">\n                      <AnimatePresence mode=\"popLayout\">\n                        {publishedLessons.map((lesson, idx) => (\n                          <motion.div\n                            key={lesson.id}\n                            layout\n                            initial={{ opacity: 0, scale: 0.95 }}\n                            animate={{ opacity: 1, scale: 1 }}\n                            exit={{ opacity: 0, scale: 0.95 }}\n                            transition={{ delay: idx * 0.05 }}\n                          >\n                            <Card className=\"glass-premium hover-premium rounded-2xl border-none bg-card/80 backdrop-blur-xl shadow-lg group h-full\" data-testid={`card-lesson-${lesson.id}`}>\n                              <CardHeader className=\"pb-4\">\n                                <div className=\"flex items-start justify-between gap-4 mb-2\">\n                                  <CardTitle className=\"text-xl font-bold group-hover:text-primary transition-colors line-clamp-2\">{lesson.title}</CardTitle>\n                                  <Badge className=\"rounded-full px-3 py-1 bg-green-500/10 text-green-600 border-none font-bold text-[10px] uppercase tracking-widest shrink-0\">Publicada</Badge>\n                                </div>\n                                <CardDescription className=\"line-clamp-2\">{lesson.description}</CardDescription>\n                              </CardHeader>\n                              <CardContent>\n                                <div className=\"space-y-3 text-sm\">\n                                  <div className=\"flex items-center gap-3 text-primary font-bold\">\n                                    <div className=\"p-1.5 rounded-lg bg-primary/10\">\n                                      <BookOpen className=\"h-4 w-4\" />\n                                    </div>\n                                    {lesson.scriptureReferences?.[0]?.book} {lesson.scriptureReferences?.[0]?.chapter}\n                                  </div>\n                                  {lesson.scheduledFor && (\n                                    <div className=\"flex items-center gap-3 text-muted-foreground\">\n                                      <div className=\"p-1.5 rounded-lg bg-muted\">\n                                        <Calendar className=\"h-4 w-4\" />\n                                      </div>\n                                      Aula Agendada\n                                    </div>\n                                  )}\n                                  {lesson.createdAt && (\n                                    <div className=\"flex items-center gap-3 text-muted-foreground\">\n                                      <div className=\"p-1.5 rounded-lg bg-muted\">\n                                        <Clock className=\"h-4 w-4\" />\n                                      </div>\n                                      Criada em {new Date(lesson.createdAt).toLocaleDateString(\"pt-BR\")}\n                                    </div>\n                                  )}\n                                </div>\n                              </CardContent>\n                              <CardFooter className=\"pt-4 gap-2 flex-wrap\">\n                                <Button variant=\"outline\" size=\"sm\" className=\"rounded-xl\">\n                                  <BarChart className=\"h-4 w-4 mr-1\" />\n                                  {t.teacherMode.progress}\n                                </Button>\n                                <Button \n                                  variant=\"outline\" \n                                  size=\"sm\"\n                                  className=\"rounded-xl\"\n                                  onClick={() => exportLessonToPDF(lesson)}\n                                  data-testid={`button-export-pdf-${lesson.id}`}\n                                >\n                                  <Download className=\"h-4 w-4 mr-1\" />\n                                  PDF\n                                </Button>\n                                <Button \n                                  variant=\"outline\" \n                                  size=\"sm\"\n                                  className=\"rounded-xl\"\n                                  onClick={() => downloadLessonText(lesson)}\n                                  data-testid={`button-download-txt-${lesson.id}`}\n                                >\n                                  <FileText className=\"h-4 w-4 mr-1\" />\n                                  Baixar\n                                </Button>\n                                <Button \n                                  variant=\"outline\" \n                                  size=\"sm\"\n                                  className=\"rounded-xl\"\n                                  onClick={() => shareLessonWhatsApp(lesson)}\n                                  data-testid={`button-share-whatsapp-${lesson.id}`}\n                                >\n                                  <Share2 className=\"h-4 w-4 mr-1\" />\n                                  WhatsApp\n                                </Button>\n                                <Button \n                                  variant=\"ghost\" \n                                  size=\"sm\"\n                                  className=\"rounded-xl\"\n                                  onClick={() => handleEditLesson(lesson)}\n                                  data-testid={`button-edit-lesson-${lesson.id}`}\n                                >\n                                  Editar\n                                </Button>\n                                <Button \n                                  variant=\"ghost\" \n                                  size=\"icon\"\n                                  className=\"rounded-xl\"\n                                  onClick={() => handleDeleteLesson(lesson.id)}\n                                  data-testid={`button-delete-lesson-${lesson.id}`}\n                                >\n                                  <Trash2 className=\"h-4 w-4 text-destructive/70\" />\n                                </Button>\n                              </CardFooter>\n                            </Card>\n                          </motion.div>\n                        ))}\n                      </AnimatePresence>\n                    </div>\n                  </div>\n                )}\n\n                {/* Draft Lessons */}\n                {draftLessons.length > 0 && (\n                  <div>\n                    <h3 className=\"font-bold text-xl mb-6 flex items-center gap-2\">\n                      <FileText className=\"h-5 w-5 text-amber-500\" />\n                      Rascunhos ({draftLessons.length})\n                    </h3>\n                    <div className=\"grid md:grid-cols-2 gap-6\">\n                      <AnimatePresence mode=\"popLayout\">\n                        {draftLessons.map((lesson, idx) => (\n                          <motion.div\n                            key={lesson.id}\n                            layout\n                            initial={{ opacity: 0, scale: 0.95 }}\n                            animate={{ opacity: 1, scale: 1 }}\n                            exit={{ opacity: 0, scale: 0.95 }}\n                            transition={{ delay: idx * 0.05 }}\n                          >\n                            <Card className=\"glass-premium hover-premium rounded-2xl border-none bg-muted/30 backdrop-blur-sm border-dashed group h-full\">\n                              <CardHeader className=\"pb-4\">\n                                <div className=\"flex items-start justify-between gap-4\">\n                                  <CardTitle className=\"text-xl font-bold group-hover:text-primary transition-colors\">{lesson.title}</CardTitle>\n                                  <Badge variant=\"secondary\" className=\"rounded-full px-3 py-1 border-none font-bold text-[10px] uppercase tracking-widest shrink-0\">Rascunho</Badge>\n                                </div>\n                              </CardHeader>\n                              <CardFooter className=\"flex-col gap-3\">\n                                <div className=\"flex gap-2 w-full\">\n                                  <Button \n                                    className=\"flex-1 rounded-xl h-11 font-bold\"\n                                    onClick={() => handleEditLesson(lesson)}\n                                    data-testid={`button-edit-draft-${lesson.id}`}\n                                  >\n                                    Continuar Editando\n                                  </Button>\n                                  <Button \n                                    variant=\"ghost\" \n                                    size=\"icon\"\n                                    className=\"rounded-xl\"\n                                    onClick={() => handleDeleteLesson(lesson.id)}\n                                    data-testid={`button-delete-draft-${lesson.id}`}\n                                  >\n                                    <Trash2 className=\"h-4 w-4 text-destructive/70\" />\n                                  </Button>\n                                </div>\n                                <div className=\"flex gap-2 w-full flex-wrap\">\n                                  <Button \n                                    variant=\"outline\" \n                                    size=\"sm\"\n                                    className=\"rounded-xl\"\n                                    onClick={() => exportLessonToPDF(lesson)}\n                                    data-testid={`button-export-pdf-draft-${lesson.id}`}\n                                  >\n                                    <Download className=\"h-4 w-4 mr-1\" />\n                                    PDF\n                                  </Button>\n                                  <Button \n                                    variant=\"outline\" \n                                    size=\"sm\"\n                                    className=\"rounded-xl\"\n                                    onClick={() => downloadLessonText(lesson)}\n                                    data-testid={`button-download-txt-draft-${lesson.id}`}\n                                  >\n                                    <FileText className=\"h-4 w-4 mr-1\" />\n                                    Baixar\n                                  </Button>\n                                  <Button \n                                    variant=\"outline\" \n                                    size=\"sm\"\n                                    className=\"rounded-xl\"\n                                    onClick={() => shareLessonWhatsApp(lesson)}\n                                    data-testid={`button-share-whatsapp-draft-${lesson.id}`}\n                                  >\n                                    <Share2 className=\"h-4 w-4 mr-1\" />\n                                    WhatsApp\n                                  </Button>\n                                </div>\n                              </CardFooter>\n                            </Card>\n                          </motion.div>\n                        ))}\n                      </AnimatePresence>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":61241,"size_tokens":null},"client/src/hooks/useAuth.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport type { User } from \"@shared/schema\";\n\nexport function useAuth() {\n  const { data: user, isLoading, error } = useQuery<User>({\n    queryKey: [\"/api/auth/user\"],\n    retry: 1,\n    refetchOnWindowFocus: true,\n    staleTime: 0, // Force refetch to ensure fresh auth state\n  });\n\n  return {\n    user,\n    isAuthenticated: !!user,\n    isLoading,\n    error,\n  };\n}\n","path":null,"size_bytes":415,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"client/src/hooks/useAuth.ts":{"content":"import { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { useEffect, useState } from \"react\";\nimport { initSupabase, getSupabase } from \"@/lib/supabase\";\nimport { apiFetch } from \"@/lib/config\";\nimport { clearAllAuthStorage } from \"@/lib/persistentStorage\";\nimport type { User } from \"@shared/schema\";\nimport type { Session, User as SupabaseUser } from \"@supabase/supabase-js\";\n\nexport function useAuth() {\n  const [session, setSession] = useState<Session | null>(null);\n  const [supabaseUser, setSupabaseUser] = useState<SupabaseUser | null>(null);\n  const [sessionLoading, setSessionLoading] = useState(true);\n  const queryClient = useQueryClient();\n\n  useEffect(() => {\n    let subscription: { unsubscribe: () => void } | null = null;\n\n    const initSession = async () => {\n      const supabase = await initSupabase();\n      \n      const { data: { session } } = await supabase.auth.getSession();\n      setSession(session);\n      setSupabaseUser(session?.user ?? null);\n      setSessionLoading(false);\n\n      const { data } = supabase.auth.onAuthStateChange(\n        (event, session) => {\n          setSession(session);\n          setSupabaseUser(session?.user ?? null);\n          setSessionLoading(false);\n          if (event === 'SIGNED_IN' || event === 'SIGNED_OUT') {\n            queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n          }\n        }\n      );\n      subscription = data.subscription;\n    };\n    \n    initSession();\n\n    return () => {\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n    };\n  }, [queryClient]);\n\n  const { data: user, isLoading: userLoading, isError: userError } = useQuery<User | null>({\n    queryKey: [\"/api/auth/user\"],\n    queryFn: async () => {\n      if (!session?.access_token) return null;\n      \n      const res = await apiFetch(\"/api/auth/user\", {\n        headers: {\n          Authorization: `Bearer ${session.access_token}`,\n        },\n      });\n      \n      if (res.status === 401) return null;\n      if (!res.ok) throw new Error(\"Failed to fetch user\");\n      \n      return res.json();\n    },\n    enabled: !!session?.access_token,\n    retry: false,\n    staleTime: 30000,\n    refetchOnWindowFocus: false,\n  });\n\n  const signOut = async () => {\n    const supabase = getSupabase();\n    await supabase.auth.signOut();\n    await clearAllAuthStorage();\n    queryClient.clear();\n  };\n\n  // Consider loading only during initial session check\n  // Once we have a session, we're authenticated even if user data fetch fails\n  const isLoading = sessionLoading;\n  \n  // User is authenticated if they have a valid Supabase session\n  const isAuthenticated = !!session?.user;\n\n  return {\n    user,\n    supabaseUser,\n    session,\n    isLoading,\n    isAuthenticated,\n    signOut,\n  };\n}\n","path":null,"size_bytes":2773,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","path":null,"size_bytes":1904,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { AlertCircle, Home, RefreshCw } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\n\nexport default function NotFound() {\n  const [location] = useLocation();\n\n  return (\n    <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n      <motion.div \n        initial={{ opacity: 0, scale: 0.9 }}\n        animate={{ opacity: 1, scale: 1 }}\n        className=\"max-w-md w-full text-center space-y-6\"\n      >\n        <div className=\"h-24 w-24 bg-muted rounded-[2rem] flex items-center justify-center mx-auto text-muted-foreground shadow-xl\">\n          <AlertCircle className=\"h-12 w-12\" />\n        </div>\n        \n        <div className=\"space-y-2\">\n          <h1 className=\"text-4xl font-black italic uppercase tracking-tighter text-foreground\">\n            404 Página Não Encontrada\n          </h1>\n          <p className=\"text-muted-foreground font-bold italic\">\n            A página <code className=\"bg-muted px-2 py-1 rounded text-muted-foreground text-sm not-italic\">{location}</code> que você está procurando não existe.\n          </p>\n        </div>\n\n        <div className=\"flex flex-col sm:flex-row gap-3 justify-center pt-4\">\n          <Link href=\"/\">\n            <Button className=\"rounded-[2rem] font-black italic uppercase tracking-tighter shadow-xl w-full sm:w-auto\">\n              <Home className=\"mr-2 h-4 w-4\" />\n              Voltar ao Início\n            </Button>\n          </Link>\n          <Button \n            variant=\"outline\" \n            onClick={() => window.location.reload()}\n            className=\"rounded-[2rem] font-black italic uppercase tracking-tighter border-border w-full sm:w-auto\"\n          >\n            <RefreshCw className=\"mr-2 h-4 w-4\" />\n            Recarregar\n          </Button>\n        </div>\n      </motion.div>\n    </div>\n  );\n}\n","path":null,"size_bytes":1916,"size_tokens":null},"client/src/pages/landing.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Helmet } from \"react-helmet-async\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { \n  Brain, \n  Headphones, \n  GraduationCap, \n  Users, \n  Sparkles,\n  Check,\n  ArrowRight,\n  Menu,\n  Star,\n  Zap,\n  Shield,\n  Globe,\n  LogIn,\n  Book,\n  ExternalLink,\n  Flame,\n  Trophy,\n  Target,\n  Crown,\n  Heart\n} from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport logoImage from \"../assets/logo-new.png\";\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { motion, useScroll, useTransform, useSpring } from 'framer-motion';\nimport { useRef, useEffect, useState } from 'react';\n\n\nconst themes = [\n  { name: \"Clássico\", primary: \"#5711D9\", secondary: \"#FFD700\", desc: \"Tradição e profundidade\" },\n  { name: \"Noite Sagrada\", primary: \"#1E1B4B\", secondary: \"#E0E0E0\", desc: \"Conforto para meditação noturna\" },\n  { name: \"Luz do Dia\", primary: \"#0EA5E9\", secondary: \"#F8FAFC\", desc: \"Energia para sua devocional\" },\n  { name: \"Terra Santa\", primary: \"#78350F\", secondary: \"#FEF3C7\", desc: \"Conexão com as raízes bíblicas\" },\n];\n\nconst premiumFeatures = [\n  \"Busca Inteligente com IA Teológica\",\n  \"Temas de Leitura Personalizáveis (Sépia, Noturno)\",\n  \"Modo Professor com Geração de Esboços\",\n  \"Sistema de Gamificação (XP e Streaks)\",\n  \"Acesso Offline Completo (Download de Livros)\",\n  \"Podcasts Teológicos Integrados\",\n  \"Gravação de Orações em Áudio\",\n  \"Exportação de Aulas em PDF\",\n  \"Sincronização em Tempo Real\",\n  \"Comentários Teológicos Premium\",\n  \"Comunidade e Grupos de Estudo\",\n  \"Suporte Prioritário\",\n];\n\nconst testimonials = [\n  {\n    name: \"Líder de Igreja em São Paulo\",\n    role: \"Coordenadora de Estudos\",\n    content: \"Os planos de leitura customizáveis e o modo offline transformaram como nossa comunidade estuda juntos. A profundidade aumentou muito.\",\n    initials: \"PS\",\n    stars: 5\n  },\n  {\n    name: \"Professor Universitário\",\n    role: \"Doutor em Teologia\",\n    content: \"O assistente IA oferece perspectivas teológicas equilibradas para minhas aulas. É uma ferramenta de consulta indispensável hoje.\",\n    initials: \"PU\",\n    stars: 5\n  },\n  {\n    name: \"Grupo Koinonia\",\n    role: \"Célula de Jovens\",\n    content: \"Adoramos usar a comunidade para compartilhar notas. O app permite que cada um tenha sua própria trilha de crescimento.\",\n    initials: \"GK\",\n    stars: 5\n  },\n];\n\n// Custom hook for scroll-triggered animations\nfunction useScrollReveal() {\n  const [isVisible, setIsVisible] = useState(false);\n  const ref = useRef(null);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsVisible(true);\n          observer.unobserve(entry.target);\n        }\n      },\n      { threshold: 0.1 }\n    );\n\n    if (ref.current) {\n      observer.observe(ref.current);\n    }\n\n    return () => {\n      if (ref.current) {\n        observer.unobserve(ref.current);\n      }\n    };\n  }, []);\n\n  return { ref, isVisible };\n}\n\nexport default function Landing() {\n  const { t } = useLanguage();\n  const [, setLocation] = useLocation();\n  const { scrollYProgress } = useScroll();\n  const scaleX = useSpring(scrollYProgress, {\n    stiffness: 100,\n    damping: 30,\n    restDelta: 0.001\n  });\n\n  const features = [\n    {\n      icon: Brain,\n      title: t.landing.features.aiTitle,\n      description: t.landing.features.aiDesc,\n      gradient: \"from-blue-600 to-indigo-800\"\n    },\n    {\n      icon: Book,\n      title: t.landing.features.plansTitle,\n      description: t.landing.features.plansDesc,\n      gradient: \"from-emerald-600 to-teal-800\"\n    },\n    {\n      icon: Headphones,\n      title: t.landing.features.podcastsTitle,\n      description: t.landing.features.podcastsDesc,\n      gradient: \"from-purple-600 to-pink-800\"\n    },\n    {\n      icon: GraduationCap,\n      title: t.landing.features.teacherTitle,\n      description: t.landing.features.teacherDesc,\n      gradient: \"from-orange-600 to-red-800\"\n    },\n    {\n      icon: Users,\n      title: t.landing.features.communityTitle,\n      description: t.landing.features.communityDesc,\n      gradient: \"from-amber-500 to-orange-700\"\n    },\n    {\n      icon: Sparkles,\n      title: t.landing.features.themesTitle,\n      description: t.landing.features.themesDesc,\n      gradient: \"from-cyan-600 to-blue-800\"\n    },\n  ];\n  \n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden selection:bg-primary selection:text-white mesh-primary\">\n      <Helmet>\n        <title>BíbliaFS - Leia a Bíblia Online, Grátis e Completa em Português</title>\n        <meta name=\"description\" content=\"BíbliaFS: Leia a Bíblia Sagrada online gratuitamente. Versões completa em português, busca por versículos, comparação de traduções e recursos exclusivos para seu estudo bíblico.\" />\n        <meta name=\"keywords\" content=\"bíblia online, bíblia sagrada, ler bíblia, estudo bíblico, versículos\" />\n        <link rel=\"canonical\" href=\"https://bibliafs.com.br/\" />\n        <script type=\"application/ld+json\">\n          {JSON.stringify({\n            \"@context\": \"https://schema.org\",\n            \"@type\": \"WebSite\",\n            \"name\": \"BibliaFS\",\n            \"url\": \"https://bibliafs.com.br/\",\n            \"description\": \"Plataforma online para leitura da Bíblia Sagrada\",\n            \"publisher\": {\n              \"@type\": \"Organization\",\n              \"name\": \"BibliaFS\"\n            }\n          })}\n        </script>\n      </Helmet>\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"relative z-10\">\n      <motion.div className=\"fixed top-0 left-0 right-0 h-1.5 bg-primary z-[60] origin-left\" style={{ scaleX }} />\n\n      {/* Header Navigation */}\n      <header className=\"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-2xl border-b border-white/5\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between\">\n          <motion.div \n            initial={{ opacity: 0, x: -20 }}\n            animate={{ opacity: 1, x: 0 }}\n            className=\"flex items-center gap-3\"\n          >\n            <div className=\"relative\">\n              <div className=\"absolute inset-0 bg-primary/20 blur-xl rounded-full\" />\n              <img src={logoImage} alt=\"BíbliaFS Logo\" className=\"h-11 w-11 object-cover rounded-xl shadow-2xl relative z-10\" />\n            </div>\n            <div>\n              <h2 className=\"font-display font-black text-xl tracking-tight text-foreground leading-none\">BíbliaFS</h2>\n              <p className=\"text-[10px] font-black uppercase tracking-[0.2em] text-primary mt-1\">Premium Edition</p>\n            </div>\n          </motion.div>\n\n          {/* Desktop Menu */}\n          <nav className=\"hidden lg:flex items-center gap-10\">\n            <a \n              href=\"#recursos\" \n              className=\"text-sm font-bold text-muted-foreground hover:text-primary transition-all hover:tracking-widest\"\n            >\n              {t.landing.nav_resources}\n            </a>\n            <a \n              href=\"#temas\" \n              className=\"text-sm font-bold text-muted-foreground hover:text-primary transition-all hover:tracking-widest\"\n            >\n              {t.landing.nav_themes}\n            </a>\n            <a \n              href=\"#testemunhos\" \n              className=\"text-sm font-bold text-muted-foreground hover:text-primary transition-all hover:tracking-widest\"\n            >\n              {t.landing.nav_testimonials}\n            </a>\n            <a \n              href=\"/help\" \n              className=\"text-sm font-bold text-muted-foreground hover:text-primary transition-all hover:tracking-widest\"\n            >\n              {t.landing.nav_faq}\n            </a>\n          </nav>\n\n          <motion.div \n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            className=\"hidden sm:block\"\n          >\n            <Button \n              size=\"lg\"\n              onClick={() => setLocation(\"/login\")}\n              className=\"rounded-full px-8 bg-gradient-to-r from-primary to-indigo-700 hover:scale-105 transition-all shadow-2xl shadow-primary/20 font-black text-xs uppercase tracking-widest\"\n            >\n              <LogIn className=\"h-4 w-4 mr-2\" />\n              Entrar Agora\n            </Button>\n          </motion.div>\n\n          <div className=\"sm:hidden\">\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"ghost\" size=\"icon\" className=\"rounded-xl bg-muted/50\">\n                  <Menu className=\"h-6 w-6\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"w-64 p-2 rounded-2xl glass-darker\">\n                <DropdownMenuItem asChild className=\"rounded-xl\">\n                  <a href=\"#recursos\" className=\"cursor-pointer py-3 font-bold flex items-center gap-3\">\n                    <Sparkles className=\"h-4 w-4 text-primary\" />\n                    {t.landing.nav_resources}\n                  </a>\n                </DropdownMenuItem>\n                <DropdownMenuItem asChild className=\"rounded-xl\">\n                  <a href=\"#temas\" className=\"cursor-pointer py-3 font-bold flex items-center gap-3\">\n                    <Sparkles className=\"h-4 w-4 text-primary\" />\n                    {t.landing.nav_themes}\n                  </a>\n                </DropdownMenuItem>\n                <DropdownMenuItem asChild className=\"rounded-xl\">\n                  <a href=\"#testemunhos\" className=\"cursor-pointer py-3 font-bold flex items-center gap-3\">\n                    <Star className=\"h-4 w-4 text-primary\" />\n                    {t.landing.nav_testimonials}\n                  </a>\n                </DropdownMenuItem>\n                <DropdownMenuItem asChild className=\"rounded-xl\">\n                  <Link href=\"/help\" className=\"cursor-pointer py-3 font-bold flex items-center gap-3 w-full\">\n                    <Sparkles className=\"h-4 w-4 text-primary\" />\n                    {t.landing.nav_faq}\n                  </Link>\n                </DropdownMenuItem>\n                <DropdownMenuItem asChild className=\"rounded-xl bg-primary/10 mt-2\">\n                  <Link href=\"/login\" className=\"cursor-pointer py-3 font-black text-primary flex items-center gap-3\">\n                    <LogIn className=\"h-4 w-4\" />\n                    ENTRAR\n                  </Link>\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        </div>\n      </header>\n\n      {/* Hero Section */}\n      <section className=\"relative min-h-screen flex items-center justify-center overflow-hidden pt-20\">\n        <div className=\"absolute inset-0 z-0\">\n          <div className=\"absolute inset-0 bg-gradient-to-br from-indigo-950 via-background to-amber-950/20 z-10\" />\n          <motion.div \n            animate={{ \n              scale: [1, 1.1, 1],\n              rotate: [0, 5, 0]\n            }}\n            transition={{ duration: 20, repeat: Infinity, ease: \"linear\" }}\n            className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120%] h-[120%] opacity-20 blur-[120px] bg-gradient-to-tr from-primary via-purple-500 to-amber-500 rounded-full\" \n          />\n        </div>\n        \n        <div className=\"relative z-20 max-w-6xl mx-auto px-6 text-center\">\n          <motion.div\n            initial={{ opacity: 0, scale: 0.8 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ duration: 0.6 }}\n          >\n            <Badge className=\"mb-8 bg-card/10 backdrop-blur-2xl text-primary border-primary/30 px-8 py-3 rounded-full font-black text-xs uppercase tracking-[0.3em] shadow-2xl border-2\">\n              A Nova Era do Estudo Bíblico\n            </Badge>\n          </motion.div>\n          \n          <motion.h1 \n            initial={{ opacity: 0, y: 30 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.8, delay: 0.2 }}\n            className=\"font-display text-6xl md:text-9xl font-black text-foreground mb-8 tracking-tighter leading-none\"\n          >\n            BíbliaFS - <span className=\"bg-gradient-to-r from-primary via-purple-500 to-amber-500 bg-clip-text text-transparent\">Sua Bíblia Online Completa e Gratuita</span>\n          </motion.h1>\n          \n          <motion.p \n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.8, delay: 0.4 }}\n            className=\"text-xl md:text-2xl text-muted-foreground mb-12 max-w-3xl mx-auto font-medium leading-relaxed\"\n          >\n            Explore as Escrituras com Inteligência Artificial, podcasts premium e planos de leitura gamificados. A experiência bíblica definitiva, agora no seu bolso.\n          </motion.p>\n          \n          <motion.div \n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.8, delay: 0.6 }}\n            className=\"flex flex-col sm:flex-row gap-6 justify-center items-center\"\n          >\n            <Button \n              size=\"lg\"\n              className=\"h-16 px-12 rounded-full bg-gradient-to-r from-primary to-indigo-700 hover:scale-105 transition-all shadow-[0_20px_50px_rgba(79,70,229,0.3)] font-black text-base uppercase tracking-widest border-0\"\n              onClick={() => setLocation(\"/register\")}\n            >\n              Começar Grátis\n              <ArrowRight className=\"ml-3 h-6 w-6\" />\n            </Button>\n            \n            <Button \n              size=\"lg\"\n              variant=\"outline\"\n              className=\"h-16 px-12 rounded-full bg-background/50 backdrop-blur-2xl border-2 border-white/10 text-foreground hover:bg-card/5 shadow-2xl font-black text-base uppercase tracking-widest\"\n              onClick={() => {\n                document.getElementById(\"recursos\")?.scrollIntoView({ behavior: \"smooth\" });\n              }}\n            >\n              Ver Recursos\n            </Button>\n          </motion.div>\n        </div>\n\n        {/* Floating elements */}\n        <div className=\"absolute bottom-10 left-10 animate-bounce delay-100 hidden lg:block\">\n          <div className=\"p-4 rounded-3xl glass-darker shadow-2xl border-white/5\">\n            <Trophy className=\"h-8 w-8 text-amber-500\" />\n          </div>\n        </div>\n        <div className=\"absolute top-40 right-20 animate-pulse hidden lg:block\">\n          <div className=\"p-5 rounded-3xl glass-darker shadow-2xl border-white/5 rotate-12\">\n            <Sparkles className=\"h-10 w-10 text-primary\" />\n          </div>\n        </div>\n      </section>\n\n      {/* Stats Counter */}\n      <section className=\"py-12 border-y border-white/5 bg-muted/20\">\n        <div className=\"max-w-7xl mx-auto px-6\">\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-8\">\n            {[\n              { label: \"Usuários Ativos\", val: \"50k+\" },\n              { label: \"Capítulos Lidos\", val: \"2.5M\" },\n              { label: \"Orações Feitas\", val: \"100k+\" },\n              { label: \"XP Acumulado\", val: \"15M\" },\n            ].map((stat, i) => (\n              <div key={i} className=\"text-center\">\n                <p className=\"text-3xl font-black text-primary\">{stat.val}</p>\n                <p className=\"text-xs font-bold text-muted-foreground uppercase tracking-widest mt-1\">{stat.label}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Features Grid */}\n      <section id=\"recursos\" className=\"py-32 px-6 relative overflow-hidden\">\n        <div className=\"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-transparent via-primary/5 to-transparent pointer-events-none\" />\n        <div className=\"max-w-7xl mx-auto relative z-10\">\n          <div className=\"text-center mb-24\">\n            <Badge className=\"mb-4 bg-primary/10 text-primary border-primary/20 px-4 py-1.5 rounded-full font-black text-[10px] uppercase tracking-widest\">FUNCIONALIDADES</Badge>\n            <h2 className=\"font-display text-5xl md:text-7xl font-black mb-6 tracking-tight\">\n              Leia a Bíblia Sagrada em <span className=\"bg-gradient-to-r from-primary to-indigo-600 bg-clip-text text-transparent\">Diferentes Versões</span>\n            </h2>\n            <h3 className=\"text-xl text-muted-foreground max-w-2xl mx-auto font-medium\">\n              Escolha sua Tradução Preferida\n            </h3>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {features.map((feature, index) => {\n              const { ref, isVisible } = useScrollReveal();\n              return (\n                <motion.div\n                  key={index}\n                  ref={ref}\n                  initial={{ opacity: 0, y: 30 }}\n                  animate={isVisible ? { opacity: 1, y: 0 } : { opacity: 0, y: 30 }}\n                  transition={{ duration: 0.6, delay: index * 0.1 }}\n                >\n                  <Card className=\"rounded-[2.5rem] border-none glass-darker shadow-2xl overflow-hidden h-full group  transition-all duration-500\">\n                    <div className={`absolute inset-0 bg-gradient-to-br ${feature.gradient} opacity-0 group-hover:opacity-[0.05] transition-opacity`} />\n                    <CardHeader className=\"p-8\">\n                      <div className={`flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br ${feature.gradient} shadow-2xl mb-6 transform  transition-all`}>\n                        <feature.icon className=\"h-8 w-8 text-white\" />\n                      </div>\n                      <CardTitle className=\"text-2xl font-black tracking-tight mb-4\">{feature.title}</CardTitle>\n                      <CardDescription className=\"text-base font-medium leading-relaxed opacity-80\">\n                        {feature.description}\n                      </CardDescription>\n                    </CardHeader>\n                  </Card>\n                </motion.div>\n              );\n            })}\n          </div>\n        </div>\n      </section>\n\n      {/* Interactive Themes Showcase */}\n      <section id=\"temas\" className=\"py-32 px-6 bg-muted/30 relative\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"flex flex-col lg:flex-row items-center gap-20\">\n            <div className=\"flex-1\">\n              <Badge className=\"mb-4 bg-amber-500/10 text-amber-600 border-amber-500/20 px-4 py-1.5 rounded-full font-black text-[10px] uppercase tracking-widest\">CUSTOMIZAÇÃO</Badge>\n              <h2 className=\"font-display text-5xl md:text-6xl font-black mb-8 tracking-tight leading-none\">\n                A Bíblia do <span className=\"text-amber-600\">Seu Jeito</span>\n              </h2>\n              <p className=\"text-xl text-muted-foreground mb-12 font-medium leading-relaxed\">\n                Escolha entre temas desenhados por especialistas para garantir o conforto visual em qualquer hora do dia ou da noite.\n              </p>\n              <div className=\"grid grid-cols-2 gap-4\">\n                {themes.map((theme, i) => (\n                  <div key={i} className=\"p-6 rounded-3xl glass-darker border-white/5 hover:border-amber-500/30 transition-all group cursor-pointer\">\n                    <div className=\"h-3 w-12 rounded-full mb-4\" style={{ backgroundColor: theme.primary }} />\n                    <h4 className=\"font-black text-sm mb-1\">{theme.name}</h4>\n                    <p className=\"text-[10px] font-bold text-muted-foreground uppercase\">{theme.desc}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div className=\"relative flex justify-center w-[200px] shrink-0\">\n               <motion.div \n                 initial={{ rotate: -5, scale: 0.9 }}\n                 whileInView={{ rotate: 0, scale: 1 }}\n                 className=\"relative z-10 rounded-[2rem] overflow-hidden shadow-[0_30px_60px_rgba(0,0,0,0.4)] border-4 border-white/5 w-full\"\n               >\n                 <div className=\"bg-foreground aspect-[9/16] p-4\">\n                    <div className=\"flex items-center justify-between gap-2 flex-wrap mb-4\">\n                      <Menu className=\"h-4 w-4 text-white\" />\n                      <div className=\"flex gap-1\">\n                        <div className=\"h-1 w-1 rounded-full bg-card/20\" />\n                        <div className=\"h-1 w-1 rounded-full bg-card/20\" />\n                        <div className=\"h-1 w-1 rounded-full bg-card/20\" />\n                      </div>\n                    </div>\n                    <div className=\"space-y-3\">\n                      <div className=\"h-4 w-2/3 bg-card/10 rounded-full\" />\n                      <div className=\"space-y-1.5\">\n                        <div className=\"h-2 w-full bg-card/5 rounded-full\" />\n                        <div className=\"h-2 w-full bg-card/5 rounded-full\" />\n                        <div className=\"h-2 w-5/6 bg-card/5 rounded-full\" />\n                        <div className=\"h-2 w-full bg-card/5 rounded-full\" />\n                      </div>\n                      <div className=\"h-20 rounded-xl bg-gradient-to-br from-primary/20 to-indigo-600/20 flex items-center justify-center border border-white/5\">\n                        <Sparkles className=\"h-7 w-7 text-primary/40 animate-pulse\" />\n                      </div>\n                    </div>\n                 </div>\n               </motion.div>\n               <div className=\"absolute -bottom-6 -right-6 w-40 h-40 bg-primary blur-[80px] opacity-20 -z-10\" />\n               <div className=\"absolute -top-6 -left-6 w-40 h-40 bg-amber-500 blur-[80px] opacity-10 -z-10\" />\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Gamification Teaser */}\n      <section className=\"py-32 px-6 bg-gradient-to-br from-indigo-900 to-purple-900 relative overflow-hidden text-white\">\n         <div className=\"absolute inset-0 opacity-10\">\n            <div className=\"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-white via-transparent to-transparent\" />\n         </div>\n         <div className=\"max-w-5xl mx-auto text-center relative z-10\">\n            <Trophy className=\"h-20 w-20 mx-auto mb-8 text-amber-400 drop-shadow-[0_0_20px_rgba(251,191,36,0.5)]\" />\n            <h2 className=\"text-4xl md:text-6xl font-black mb-8 tracking-tight\">Gamificação Que Transforma</h2>\n            <p className=\"text-xl md:text-2xl opacity-80 mb-12 max-w-2xl mx-auto font-medium leading-relaxed\">\n              Ganhe XP, complete streaks diários e conquiste medalhas raras. Sua jornada espiritual nunca foi tão envolvente.\n            </p>\n            <div className=\"flex justify-center gap-4\">\n               {[Crown, Star, Flame, Zap].map((Icon, i) => (\n                 <div key={i} className=\"h-14 w-14 rounded-2xl bg-card/10 backdrop-blur-xl flex items-center justify-center border border-white/10 hover:scale-110 transition-transform cursor-pointer\">\n                   <Icon className=\"h-6 w-6 text-amber-400\" />\n                 </div>\n               ))}\n            </div>\n         </div>\n      </section>\n\n      {/* Testimonials */}\n      <section id=\"testemunhos\" className=\"py-32 px-6\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"text-center mb-24\">\n            <Badge className=\"mb-4 bg-emerald-500/10 text-emerald-600 border-emerald-500/20 px-4 py-1.5 rounded-full font-black text-[10px] uppercase tracking-widest\">DEPOIMENTOS</Badge>\n            <h2 className=\"font-display text-5xl md:text-6xl font-black mb-6 tracking-tight\">Amado pela <span className=\"text-emerald-600\">Comunidade</span></h2>\n            <p className=\"text-xl text-muted-foreground font-medium\">Histórias de transformação através do BíbliaFS.</p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-3 gap-8\">\n            {testimonials.map((testimonial, index) => (\n              <motion.div\n                key={index}\n                initial={{ opacity: 0, scale: 0.9 }}\n                whileInView={{ opacity: 1, scale: 1 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.5, delay: index * 0.1 }}\n              >\n                <Card className=\"rounded-[2.5rem] border-none glass-darker p-8 h-full shadow-2xl relative overflow-hidden group\">\n                  <div className=\"absolute top-0 right-0 p-6 opacity-10  transition-transform\">\n                    <Star className=\"h-20 w-20 fill-current\" />\n                  </div>\n                  <div className=\"flex gap-1 mb-6\">\n                    {[...Array(testimonial.stars)].map((_, i) => (\n                      <Star key={i} className=\"h-4 w-4 fill-amber-500 text-amber-500\" />\n                    ))}\n                  </div>\n                  <p className=\"text-lg font-medium leading-relaxed mb-8 italic opacity-90\">\n                    \"{testimonial.content}\"\n                  </p>\n                  <div className=\"flex items-center gap-4 mt-auto\">\n                    <div className=\"h-14 w-14 rounded-2xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white font-black text-lg shadow-xl\">\n                      {testimonial.initials}\n                    </div>\n                    <div>\n                      <h4 className=\"font-black text-base\">{testimonial.name}</h4>\n                      <p className=\"text-xs font-bold text-muted-foreground uppercase tracking-widest\">{testimonial.role}</p>\n                    </div>\n                  </div>\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* CTA Section */}\n      <section className=\"py-32 px-6\">\n        <div className=\"max-w-5xl mx-auto\">\n          <motion.div \n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            className=\"rounded-[3rem] bg-gradient-to-br from-primary via-indigo-700 to-purple-800 p-12 md:p-20 text-center text-white shadow-[0_50px_100px_rgba(79,70,229,0.4)] relative overflow-hidden\"\n          >\n            <div className=\"absolute top-0 right-0 w-64 h-64 bg-card/10 blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2\" />\n            <div className=\"absolute bottom-0 left-0 w-64 h-64 bg-amber-500/20 blur-[100px] rounded-full translate-y-1/2 -translate-x-1/2\" />\n            \n            <h2 className=\"text-4xl md:text-6xl font-black mb-8 tracking-tight relative z-10\">Pronto Para Iniciar Sua Jornada?</h2>\n            <p className=\"text-xl opacity-90 mb-12 max-w-2xl mx-auto font-medium leading-relaxed relative z-10\">\n              Junte-se a milhares de estudantes da Bíblia e experimente o melhor do estudo digital cristão hoje mesmo.\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-6 justify-center items-center relative z-10\">\n              <Button \n                size=\"lg\"\n                className=\"h-16 px-12 rounded-full bg-card text-primary hover:bg-card/90 hover:scale-105 transition-all font-black text-base uppercase tracking-widest border-0\"\n                onClick={() => setLocation(\"/register\")}\n              >\n                Criar Conta Grátis\n                <ArrowRight className=\"ml-3 h-6 w-6\" />\n              </Button>\n              <Link href=\"/pricing\" className=\"text-white/80 hover:text-white font-black text-sm uppercase tracking-[0.2em] transition-colors underline underline-offset-8\">\n                Ver Planos Premium\n              </Link>\n            </div>\n          </motion.div>\n        </div>\n      </section>\n\n      {/* Footer */}\n      <footer className=\"py-20 px-6 border-t border-white/5 bg-muted/10\">\n        <div className=\"max-w-7xl mx-auto grid md:grid-cols-4 gap-12\">\n          <div className=\"col-span-2\">\n            <div className=\"flex items-center gap-3 mb-6\">\n              <img src={logoImage} alt=\"Logo\" className=\"h-10 w-10 rounded-xl\" />\n              <h2 className=\"font-display font-black text-2xl tracking-tight\">BíbliaFS</h2>\n            </div>\n            <p className=\"text-muted-foreground max-w-md font-medium leading-relaxed\">\n              Elevando o estudo das Escrituras Sagradas através da tecnologia de ponta e teologia sólida.\n            </p>\n          </div>\n          <div>\n            <h4 className=\"font-black text-xs uppercase tracking-[0.2em] mb-6\">Explorar</h4>\n            <ul className=\"space-y-4\">\n              <li><Link href=\"/bible\" className=\"text-sm font-bold text-muted-foreground hover:text-primary transition-colors\">Bíblia Online</Link></li>\n              <li><Link href=\"/plans\" className=\"text-sm font-bold text-muted-foreground hover:text-primary transition-colors\">Planos de Leitura</Link></li>\n              <li><Link href=\"/podcasts\" className=\"text-sm font-bold text-muted-foreground hover:text-primary transition-colors\">Podcasts</Link></li>\n            </ul>\n          </div>\n          <div>\n            <h4 className=\"font-black text-xs uppercase tracking-[0.2em] mb-6\">Suporte</h4>\n            <ul className=\"space-y-4\">\n              <li><Link href=\"/help\" className=\"text-sm font-bold text-muted-foreground hover:text-primary transition-colors\">Central de Ajuda (FAQ)</Link></li>\n              <li><Link href=\"/contact\" className=\"text-sm font-bold text-muted-foreground hover:text-primary transition-colors\">Fale Conosco</Link></li>\n              <li><Link href=\"/privacy\" className=\"text-sm font-bold text-muted-foreground hover:text-primary transition-colors\">Privacidade</Link></li>\n            </ul>\n          </div>\n        </div>\n        <div className=\"max-w-7xl mx-auto mt-20 pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-6\">\n          <p className=\"text-[10px] font-black text-muted-foreground uppercase tracking-[0.2em]\">© 2026 BíbliaFS | Desenvolvido por | <a href=\"https://fabrisite.com.br/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary hover:underline transition-colors\">FabriSite</a></p>\n          <div className=\"flex gap-8\">\n             <ExternalLink className=\"h-4 w-4 text-muted-foreground hover:text-primary cursor-pointer transition-colors\" />\n             <Globe className=\"h-4 w-4 text-muted-foreground hover:text-primary cursor-pointer transition-colors\" />\n             <Shield className=\"h-4 w-4 text-muted-foreground hover:text-primary cursor-pointer transition-colors\" />\n          </div>\n        </div>\n      </footer>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":31225,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"client/src/pages/podcasts.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { \n  Headphones, \n  Search, \n  Play,\n  Pause,\n  SkipBack,\n  SkipForward,\n  Volume2,\n  Plus,\n  Loader2,\n  Pencil,\n  Trash2,\n  MoreVertical,\n  Download,\n  Check,\n  WifiOff,\n  Radio,\n  Library,\n  Bookmark,\n  Users,\n  LayoutGrid,\n  List,\n  CheckSquare,\n  X,\n  AlertTriangle\n} from \"lucide-react\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient, getAuthHeaders } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { podcastStorage } from \"@/lib/offline/podcastStorage\";\nimport { apiFetch } from \"@/lib/config\";\nimport type { Podcast } from \"@shared/schema\";\nimport { AudioPlayer } from \"@/components/bible-reader/audio-player\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nconst BIBLE_BOOKS = [\n  \"Gênesis\", \"Êxodo\", \"Levítico\", \"Números\", \"Deuteronômio\",\n  \"Josué\", \"Juízes\", \"Rute\", \"1 Samuel\", \"2 Samuel\",\n  \"1 Reis\", \"2 Reis\", \"1 Crônicas\", \"2 Crônicas\", \"Esdras\",\n  \"Neemias\", \"Ester\", \"Jó\", \"Salmos\", \"Provérbios\",\n  \"Eclesiastes\", \"Cantares\", \"Isaías\", \"Jeremias\", \"Lamentações\",\n  \"Ezequiel\", \"Daniel\", \"Oséias\", \"Joel\", \"Amós\",\n  \"Obadias\", \"Jonas\", \"Miquéias\", \"Naum\", \"Habacuque\",\n  \"Sofonias\", \"Ageu\", \"Zacarias\", \"Malaquias\",\n  \"Mateus\", \"Marcos\", \"Lucas\", \"João\", \"Atos\",\n  \"Romanos\", \"1 Coríntios\", \"2 Coríntios\", \"Gálatas\", \"Efésios\",\n  \"Filipenses\", \"Colossenses\", \"1 Tessalonicenses\", \"2 Tessalonicenses\",\n  \"1 Timóteo\", \"2 Timóteo\", \"Tito\", \"Filemom\", \"Hebreus\",\n  \"Tiago\", \"1 Pedro\", \"2 Pedro\", \"1 João\", \"2 João\", \"3 João\",\n  \"Judas\", \"Apocalipse\"\n];\n\ninterface Episode {\n  id: string;\n  title: string;\n  description: string;\n  audioData: string;\n  duration: number;\n  publishedAt: string;\n  chapterNumber?: number;\n  bookAbbrev?: string;\n}\n\nexport default function Podcasts() {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [volume, setVolume] = useState(75);\n  const [currentEpisode, setCurrentEpisode] = useState<Episode | null>(null);\n  const [currentPodcast, setCurrentPodcast] = useState<Podcast | null>(null);\n  const [isLoadingAudio, setIsLoadingAudio] = useState(false);\n  const audioRef = useRef<HTMLAudioElement>(null);\n  const { toast } = useToast();\n  \n  const [createDialogOpen, setCreateDialogOpen] = useState(false);\n  const [newPodcastTitle, setNewPodcastTitle] = useState(\"\");\n  const [newPodcastDescription, setNewPodcastDescription] = useState(\"\");\n  const [newPodcastBook, setNewPodcastBook] = useState(\"\");\n\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [selectedPodcast, setSelectedPodcast] = useState<Podcast | null>(null);\n  const [editTitle, setEditTitle] = useState(\"\");\n  const [editDescription, setEditDescription] = useState(\"\");\n\n  const [downloadedEpisodes, setDownloadedEpisodes] = useState<Set<string>>(new Set());\n  const [downloadingEpisodes, setDownloadingEpisodes] = useState<Set<string>>(new Set());\n  \n  // View mode and selection\n  const [viewMode, setViewMode] = useState<\"grid\" | \"list\">(\"grid\");\n  const [selectionMode, setSelectionMode] = useState(false);\n  const [selectedPodcasts, setSelectedPodcasts] = useState<Set<string>>(new Set());\n  const [bulkDeleteDialogOpen, setBulkDeleteDialogOpen] = useState(false);\n  const [detailPodcast, setDetailPodcast] = useState<Podcast | null>(null);\n  const [episodeSearch, setEpisodeSearch] = useState(\"\");\n\n  useEffect(() => {\n    async function loadDownloaded() {\n      try {\n        const episodes = await podcastStorage.getAllEpisodes();\n        setDownloadedEpisodes(new Set(episodes.map(e => e.id)));\n      } catch (error) {\n        console.error(\"Error loading downloaded episodes:\", error);\n      }\n    }\n    loadDownloaded();\n  }, []);\n\n  const downloadEpisode = async (episode: Episode, podcast: Podcast) => {\n    if (downloadingEpisodes.has(episode.id) || downloadedEpisodes.has(episode.id)) return;\n    setDownloadingEpisodes(prev => new Set(prev).add(episode.id));\n    try {\n      const authHeaders = await getAuthHeaders();\n      const response = await apiFetch(`/api/bible/audio?book=${episode.bookAbbrev}&chapter=${episode.chapterNumber}`, {\n        headers: authHeaders,\n      });\n      if (!response.ok) throw new Error(\"Failed to fetch audio\");\n      const data = await response.json();\n      const audioUrl = data.audioUrl;\n      const audioResponse = await fetch(audioUrl);\n      const audioBlob = await audioResponse.blob();\n      await podcastStorage.saveEpisode({\n        id: episode.id,\n        podcastId: podcast.id,\n        title: episode.title,\n        audioData: audioBlob,\n        downloadedAt: Date.now(),\n        size: audioBlob.size,\n      });\n      setDownloadedEpisodes(prev => new Set(prev).add(episode.id));\n      toast({ title: \"Episódio baixado!\", description: `\"${episode.title}\" disponível offline` });\n    } catch (error: any) {\n      toast({ title: \"Erro ao baixar\", description: error.message || \"Tente novamente mais tarde\", variant: \"destructive\" });\n    } finally {\n      setDownloadingEpisodes(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(episode.id);\n        return newSet;\n      });\n    }\n  };\n\n  const [selectedTab, setSelectedTab] = useState(\"discover\");\n\n  const { data: podcasts = [] } = useQuery<Podcast[]>({ queryKey: [\"/api/podcasts\"] });\n  const { data: subscriptions = [] } = useQuery<any[]>({ queryKey: [\"/api/podcasts/subscriptions\"] });\n  const { data: myPodcasts = [] } = useQuery<Podcast[]>({ queryKey: [\"/api/podcasts/my\"] });\n\n  const subscribeMutation = useMutation({\n    mutationFn: async (podcastId: string) => {\n      return apiRequest(\"POST\", `/api/podcasts/${podcastId}/subscribe`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/podcasts/subscriptions\"] });\n      toast({ title: \"Inscrito!\", description: \"Você agora segue este podcast\" });\n    },\n  });\n\n  const unsubscribeMutation = useMutation({\n    mutationFn: async (podcastId: string) => {\n      return apiRequest(\"DELETE\", `/api/podcasts/${podcastId}/subscribe`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/podcasts/subscriptions\"] });\n      toast({ title: \"Inscrição removida\", description: \"Você não segue mais este podcast\" });\n    },\n  });\n\n  const deletePodcastMutation = useMutation({\n    mutationFn: async (podcastId: string) => {\n      return apiRequest(\"DELETE\", `/api/podcasts/${podcastId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/podcasts\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/podcasts/my\"] });\n      toast({ title: \"Podcast excluído\" });\n      setDeleteDialogOpen(false);\n    },\n  });\n\n  const bulkDeleteMutation = useMutation({\n    mutationFn: async (podcastIds: string[]) => {\n      const results = await Promise.all(\n        podcastIds.map(id => apiRequest(\"DELETE\", `/api/podcasts/${id}`))\n      );\n      return results;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/podcasts\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/podcasts/my\"] });\n      toast({ title: \"Podcasts excluídos\", description: `${selectedPodcasts.size} podcasts foram removidos` });\n      setSelectedPodcasts(new Set());\n      setSelectionMode(false);\n      setBulkDeleteDialogOpen(false);\n    },\n    onError: () => {\n      toast({ title: \"Erro ao excluir\", description: \"Alguns podcasts não puderam ser excluídos\", variant: \"destructive\" });\n    },\n  });\n\n  const togglePodcastSelection = (podcastId: string) => {\n    setSelectedPodcasts(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(podcastId)) {\n        newSet.delete(podcastId);\n      } else {\n        newSet.add(podcastId);\n      }\n      return newSet;\n    });\n  };\n\n  const selectAllPodcasts = () => {\n    const allIds = myPodcasts.map(p => p.id);\n    setSelectedPodcasts(new Set(allIds));\n  };\n\n  const clearSelection = () => {\n    setSelectedPodcasts(new Set());\n    setSelectionMode(false);\n  };\n\n  const createPodcastMutation = useMutation({\n    mutationFn: async (data: { title: string; description: string; bibleBook?: string; bibleChapter?: number }) => {\n      return apiRequest(\"POST\", \"/api/podcasts\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/podcasts\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/podcasts/my\"] });\n      toast({ title: \"Podcast criado!\", description: \"Seu podcast foi criado com sucesso\" });\n      setCreateDialogOpen(false);\n      resetCreateForm();\n    },\n  });\n\n  const resetCreateForm = () => {\n    setNewPodcastTitle(\"\");\n    setNewPodcastDescription(\"\");\n    setNewPodcastBook(\"\");\n  };\n\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio) return;\n    const updateTime = () => setCurrentTime(audio.currentTime);\n    const updateDuration = () => setDuration(audio.duration || 0);\n    const handleEnded = () => setIsPlaying(false);\n    audio.addEventListener(\"timeupdate\", updateTime);\n    audio.addEventListener(\"loadedmetadata\", updateDuration);\n    audio.addEventListener(\"ended\", handleEnded);\n    return () => {\n      audio.removeEventListener(\"timeupdate\", updateTime);\n      audio.removeEventListener(\"loadedmetadata\", updateDuration);\n      audio.removeEventListener(\"ended\", handleEnded);\n    };\n  }, [currentEpisode]);\n\n  useEffect(() => {\n    if (audioRef.current) audioRef.current.volume = volume / 100;\n  }, [volume]);\n\n  const playEpisode = async (episode: Episode, podcast: Podcast) => {\n    setCurrentEpisode(episode);\n    setCurrentPodcast(podcast);\n    if (episode.audioData) {\n      if (audioRef.current) {\n        audioRef.current.src = episode.audioData;\n        audioRef.current.play().catch(() => setIsPlaying(false));\n        setIsPlaying(true);\n      }\n      return;\n    }\n    if (episode.bookAbbrev && episode.chapterNumber) {\n      setIsLoadingAudio(true);\n      try {\n        const authHeaders = await getAuthHeaders();\n        const response = await apiFetch(`/api/bible/audio/pt/arc/${episode.bookAbbrev}/${episode.chapterNumber}`, { credentials: 'include', headers: authHeaders });\n        if (response.ok) {\n          const blob = await response.blob();\n          const audioUrl = URL.createObjectURL(blob);\n          if (audioRef.current) {\n            audioRef.current.src = audioUrl;\n            audioRef.current.play().catch((err) => {\n              console.error(\"Playback error:\", err);\n              setIsPlaying(false);\n            });\n            setIsPlaying(true);\n          }\n        } else {\n          toast({ title: \"Erro ao carregar áudio\", description: \"O servidor retornou um erro.\", variant: \"destructive\" });\n        }\n      } catch (error) {\n        toast({ title: \"Erro de conexão\", variant: \"destructive\" });\n      } finally {\n        setIsLoadingAudio(false);\n      }\n    }\n  };\n\n  const togglePlay = () => {\n    if (!audioRef.current || !currentEpisode) return;\n    if (isPlaying) audioRef.current.pause();\n    else audioRef.current.play().catch(() => {});\n    setIsPlaying(!isPlaying);\n  };\n\n  const skip = (seconds: number) => {\n    if (audioRef.current) {\n      const newTime = Math.max(0, Math.min(duration, audioRef.current.currentTime + seconds));\n      audioRef.current.currentTime = newTime;\n    }\n  };\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${String(secs).padStart(2, '0')}`;\n  };\n\n  const { user, isAuthenticated } = useAuth();\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen bg-background p-6 text-center space-y-6\">\n        <div className=\"h-24 w-24 rounded-3xl bg-primary/10 flex items-center justify-center\">\n          <Headphones className=\"h-12 w-12 text-primary\" />\n        </div>\n        <div className=\"space-y-2\">\n          <h1 className=\"text-2xl font-bold tracking-tight\">Podcasts</h1>\n          <p className=\"text-muted-foreground max-w-sm\">\n            Para ouvir os podcasts e a BíbliaFS Rádio, você precisa estar conectado.\n          </p>\n        </div>\n        <div className=\"flex flex-col gap-3 w-full max-w-xs\">\n          <Button onClick={() => window.location.href = \"/login\"} className=\"w-full h-12 rounded-xl text-lg font-bold\">\n            Entrar Agora\n          </Button>\n          <Button variant=\"outline\" onClick={() => window.location.href = \"/\"} className=\"w-full h-12 rounded-xl font-bold\">\n            Voltar ao Início\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden pb-40 mesh-primary\">\n      <audio ref={audioRef} className=\"hidden\" />\n      \n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"relative z-10 max-w-7xl mx-auto p-6\">\n        <motion.div \n          initial={{ opacity: 0, y: -20 }} \n          animate={{ opacity: 1, y: 0 }}\n          className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-10\"\n        >\n          <div className=\"flex items-center gap-4\">\n            <div className=\"h-16 w-16 rounded-2xl bg-primary flex items-center justify-center shadow-lg shadow-primary/20\">\n              <Radio className=\"h-8 w-8 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"font-display text-4xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent\">\n                BíbliaFS Rádio\n              </h1>\n              <p className=\"text-lg text-muted-foreground\">\n                Conteúdos cristãos integrados ao seu estudo\n              </p>\n            </div>\n          </div>\n          \n          <Dialog open={createDialogOpen} onOpenChange={setCreateDialogOpen}>\n            <DialogTrigger asChild>\n              <Button className=\"rounded-xl h-12 px-6 shadow-lg shadow-primary/20\">\n                <Plus className=\"h-5 w-5 mr-2\" />\n                Criar Podcast\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"rounded-2xl\">\n              <DialogHeader>\n                <DialogTitle>Criar Novo Podcast</DialogTitle>\n                <DialogDescription>Escolha um livro da Bíblia para gerar episódios baseados na leitura bíblica narrada.</DialogDescription>\n              </DialogHeader>\n              <div className=\"space-y-4 py-4\">\n                <div className=\"space-y-2\">\n                  <Label>Livro da Bíblia *</Label>\n                  <Select value={newPodcastBook} onValueChange={setNewPodcastBook}>\n                    <SelectTrigger className=\"rounded-xl h-12\">\n                      <SelectValue placeholder=\"Selecione um livro...\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {BIBLE_BOOKS.map(book => <SelectItem key={book} value={book}>{book}</SelectItem>)}\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label>Título do Podcast</Label>\n                  <Input \n                    placeholder=\"Ex: Leitura de Romanos\"\n                    className=\"rounded-xl h-12\"\n                    value={newPodcastTitle}\n                    onChange={(e) => setNewPodcastTitle(e.target.value)}\n                  />\n                </div>\n              </div>\n              <DialogFooter>\n                <Button variant=\"outline\" className=\"rounded-xl\" onClick={() => setCreateDialogOpen(false)}>Cancelar</Button>\n                <Button \n                  className=\"rounded-xl\"\n                  onClick={() => createPodcastMutation.mutate({ title: newPodcastTitle.trim() || `Leitura de ${newPodcastBook}`, description: newPodcastDescription, bibleBook: newPodcastBook })}\n                  disabled={createPodcastMutation.isPending || !newPodcastBook}\n                >\n                  {createPodcastMutation.isPending ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : \"Criar Podcast\"}\n                </Button>\n              </DialogFooter>\n            </DialogContent>\n          </Dialog>\n        </motion.div>\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className=\"mb-10\">\n          <div className=\"relative max-w-xl\">\n            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n            <Input \n              placeholder=\"Buscar podcasts ou episódios...\" \n              className=\"pl-12 h-14 rounded-2xl bg-card/80 backdrop-blur-xl border-none shadow-lg text-lg\"\n            />\n          </div>\n        </motion.div>\n\n        <Tabs value={selectedTab} onValueChange={setSelectedTab} className=\"space-y-8\">\n          <TabsList className=\"bg-muted/50 p-1.5 rounded-2xl h-auto flex-wrap\">\n            <TabsTrigger value=\"discover\" className=\"rounded-xl px-6 py-3 data-[state=active]:bg-background data-[state=active]:shadow-lg\">Descobrir</TabsTrigger>\n            <TabsTrigger value=\"subscriptions\" className=\"rounded-xl px-6 py-3 data-[state=active]:bg-background data-[state=active]:shadow-lg\">Inscrições ({subscriptions.length})</TabsTrigger>\n            <TabsTrigger value=\"my-podcasts\" className=\"rounded-xl px-6 py-3 data-[state=active]:bg-background data-[state=active]:shadow-lg\">Meus Podcasts ({myPodcasts.length})</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"discover\">\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              <AnimatePresence mode=\"popLayout\">\n                {podcasts.map((podcast: any, idx: number) => (\n                  <motion.div\n                    key={podcast.id}\n                    layout\n                    initial={{ opacity: 0, scale: 0.95 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    transition={{ delay: idx * 0.05 }}\n                  >\n                    <Card className=\"glass-premium hover-premium rounded-[2rem] border-none bg-card/80 backdrop-blur-xl shadow-lg group overflow-hidden h-full flex flex-col\">\n                      <div className=\"h-48 relative overflow-hidden bg-primary/10\">\n                        {podcast.imageUrl ? (\n                          <img src={podcast.imageUrl} className=\"w-full h-full object-cover transition-transform duration-500 \" />\n                        ) : (\n                          <div className=\"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary/20 to-accent/20\">\n                            <Radio className=\"h-16 w-16 text-primary/40\" />\n                          </div>\n                        )}\n                        <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\n                        <div className=\"absolute bottom-4 left-4 right-4 flex justify-between items-end\">\n                          <Badge className=\"rounded-full bg-card/20 backdrop-blur-md border-none text-white font-bold\">{podcast.category || 'Leitura Bíblica'}</Badge>\n                        </div>\n                      </div>\n                      <CardHeader className=\"pb-4 relative\">\n                          <div className=\"absolute top-4 right-4 z-10\">\n                            <DropdownMenu>\n                              <DropdownMenuTrigger asChild>\n                                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 rounded-full bg-black/20 backdrop-blur-md border border-white/20 hover:bg-black/40 text-white shadow-xl transition-all duration-300\">\n                                  <MoreVertical className=\"h-4 w-4\" />\n                                </Button>\n                              </DropdownMenuTrigger>\n                              <DropdownMenuContent align=\"end\" className=\"rounded-2xl p-2 border-none bg-card/95 backdrop-blur-xl shadow-2xl\">\n                                <DropdownMenuItem \n                                  className=\"text-destructive focus:text-destructive focus:bg-destructive/10 flex items-center gap-2 rounded-xl p-3 cursor-pointer transition-colors\"\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    setSelectedPodcast(podcast);\n                                    setDeleteDialogOpen(true);\n                                  }}\n                                >\n                                  <div className=\"h-8 w-8 rounded-full bg-destructive/10 flex items-center justify-center\">\n                                    <Trash2 className=\"h-4 w-4\" />\n                                  </div>\n                                  <div className=\"flex flex-col\">\n                                    <span className=\"font-bold\">Excluir Rádio</span>\n                                    <span className=\"text-[10px] opacity-70\">Ação permanente</span>\n                                  </div>\n                                </DropdownMenuItem>\n                              </DropdownMenuContent>\n                            </DropdownMenu>\n                          </div>\n                          <CardTitle className=\"text-xl font-bold line-clamp-1 group-hover:text-primary transition-colors pr-10\">{podcast.title}</CardTitle>\n                        <CardDescription className=\"line-clamp-2 text-sm leading-relaxed\">{podcast.description || 'Sem descrição'}</CardDescription>\n                      </CardHeader>\n                      <CardContent className=\"flex-1 space-y-4\">\n                        <div className=\"flex items-center gap-4 text-xs text-muted-foreground font-bold uppercase tracking-wider\">\n                          <span className=\"flex items-center gap-1\"><Library className=\"h-3 w-3\" /> {podcast.episodes?.length || 0} Episódios</span>\n                          {podcast.bibleBook && <span className=\"flex items-center gap-1\"><Bookmark className=\"h-3 w-3\" /> {podcast.bibleBook}</span>}\n                        </div>\n                        {podcast.episodes?.length > 0 && (\n                          <div className=\"space-y-2\">\n                            {podcast.episodes.slice(0, 3).map((ep: Episode) => (\n                              <div \n                                key={ep.id} \n                                className=\"flex items-center justify-between p-3 rounded-xl bg-muted/50 hover-elevate active-elevate-2 cursor-pointer\"\n                                onClick={() => playEpisode(ep, podcast)}\n                                data-testid={`card-episode-${ep.id}`}\n                              >\n                                <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                                  <span className=\"text-xs font-bold text-muted-foreground w-6 text-center flex-shrink-0\">\n                                    {ep.chapterNumber || ''}\n                                  </span>\n                                  <div className=\"flex-1 min-w-0\">\n                                    <p className=\"text-sm font-bold truncate\">{ep.title}</p>\n                                    <p className=\"text-xs text-muted-foreground flex items-center gap-2\">\n                                      Cap. {ep.chapterNumber || '?'}\n                                      {downloadedEpisodes.has(ep.id) && <Badge variant=\"secondary\" className=\"h-4 text-[8px]\">OFFLINE</Badge>}\n                                    </p>\n                                  </div>\n                                </div>\n                                <div className=\"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                                  <Play className=\"h-4 w-4 fill-current\" />\n                                </div>\n                              </div>\n                            ))}\n                            {podcast.episodes.length > 3 && (\n                              <p className=\"text-xs text-center text-muted-foreground pt-1\">\n                                + {podcast.episodes.length - 3} episódios\n                              </p>\n                            )}\n                          </div>\n                        )}\n                      </CardContent>\n                      <CardFooter className=\"pt-0 border-t border-border/50 p-6 flex justify-between gap-4\">\n                        <Button \n                          variant=\"ghost\" \n                          className=\"flex-1 rounded-xl h-11 font-bold transition-all\"\n                          onClick={() => {\n                            setDetailPodcast(podcast);\n                            setEpisodeSearch(\"\");\n                          }}\n                          data-testid={`button-view-podcast-${podcast.id}`}\n                        >\n                          Ver Podcast\n                        </Button>\n                        <Button \n                          size=\"icon\" \n                          variant=\"ghost\" \n                          className=\"rounded-xl h-11 w-11 \"\n                          onClick={() => {\n                            const isSubscribed = subscriptions.some(s => s.id === podcast.id);\n                            if (isSubscribed) {\n                              unsubscribeMutation.mutate(podcast.id);\n                            } else {\n                              subscribeMutation.mutate(podcast.id);\n                            }\n                          }}\n                          disabled={subscribeMutation.isPending || unsubscribeMutation.isPending}\n                        >\n                          {subscriptions.some(s => s.id === podcast.id) ? (\n                            <Check className=\"h-5 w-5 text-green-500\" />\n                          ) : (\n                            <Plus className=\"h-5 w-5\" />\n                          )}\n                        </Button>\n                      </CardFooter>\n                    </Card>\n                  </motion.div>\n                ))}\n              </AnimatePresence>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"subscriptions\">\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              <AnimatePresence mode=\"popLayout\">\n                {subscriptions.length > 0 ? (\n                  subscriptions.map((podcast: any, idx: number) => (\n                    <motion.div\n                      key={podcast.id}\n                      layout\n                      initial={{ opacity: 0, scale: 0.95 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      transition={{ delay: idx * 0.05 }}\n                    >\n                      <Card className=\"glass-premium hover-premium rounded-[2rem] border-none bg-card/80 backdrop-blur-xl shadow-lg group overflow-hidden h-full flex flex-col\">\n                        <div className=\"h-48 relative overflow-hidden bg-primary/10\">\n                          {podcast.imageUrl ? (\n                            <img src={podcast.imageUrl} className=\"w-full h-full object-cover transition-transform duration-500 \" />\n                          ) : (\n                            <div className=\"w-full h-full flex items-center justify-center\">\n                              <Headphones className=\"h-16 w-16 text-primary/40\" />\n                            </div>\n                          )}\n                          <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\n                          <div className=\"absolute bottom-4 left-4 right-4 flex justify-between items-end\">\n                            <Badge className=\"rounded-full bg-card/20 backdrop-blur-md border-none text-white font-bold\">{podcast.category || 'Geral'}</Badge>\n                          </div>\n                        </div>\n                        <CardHeader className=\"pb-4\">\n                          <CardTitle className=\"text-xl font-bold line-clamp-1 group-hover:text-primary transition-colors\">{podcast.title}</CardTitle>\n                          <CardDescription className=\"line-clamp-2 text-sm leading-relaxed\">{podcast.description || 'Sem descrição'}</CardDescription>\n                        </CardHeader>\n                        <CardContent className=\"flex-1 space-y-4\">\n                          <div className=\"flex items-center gap-4 text-xs text-muted-foreground font-bold uppercase tracking-wider\">\n                            <span className=\"flex items-center gap-1\"><Library className=\"h-3 w-3\" /> {podcast.episodes?.length || 0} Episódios</span>\n                            {podcast.bibleBook && <span className=\"flex items-center gap-1\"><Bookmark className=\"h-3 w-3\" /> {podcast.bibleBook}</span>}\n                          </div>\n                        </CardContent>\n                        <CardFooter className=\"pt-0 border-t border-border/50 p-6 flex justify-between gap-4\">\n                          <Button \n                            variant=\"ghost\" \n                            className=\"flex-1 rounded-xl h-11 font-bold transition-all\"\n                            onClick={() => {\n                              setDetailPodcast(podcast);\n                              setEpisodeSearch(\"\");\n                            }}\n                            data-testid={`button-view-sub-podcast-${podcast.id}`}\n                          >\n                            Ver Podcast\n                          </Button>\n                          <Button \n                            size=\"icon\" \n                            variant=\"ghost\" \n                            className=\"rounded-xl h-11 w-11 text-destructive\"\n                            onClick={() => {\n                              setSelectedPodcast(podcast);\n                              setDeleteDialogOpen(true);\n                            }}\n                          >\n                            <Trash2 className=\"h-5 w-5\" />\n                          </Button>\n                        </CardFooter>\n                      </Card>\n                    </motion.div>\n                  ))\n                ) : (\n                  <div className=\"col-span-full py-20 text-center\">\n                    <p className=\"text-muted-foreground\">Você ainda não se inscreveu em nenhum podcast.</p>\n                  </div>\n                )}\n              </AnimatePresence>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"my-podcasts\">\n            {/* Toolbar */}\n            <div className=\"flex flex-wrap items-center justify-between gap-4 mb-6\">\n              <div className=\"flex items-center gap-2\">\n                {/* View Toggle */}\n                <div className=\"flex items-center bg-muted/50 rounded-xl p-1\">\n                  <Button \n                    size=\"icon\" \n                    variant={viewMode === \"grid\" ? \"default\" : \"ghost\"}\n                    className=\"rounded-lg h-9 w-9\"\n                    onClick={() => setViewMode(\"grid\")}\n                    data-testid=\"button-view-grid\"\n                  >\n                    <LayoutGrid className=\"h-4 w-4\" />\n                  </Button>\n                  <Button \n                    size=\"icon\" \n                    variant={viewMode === \"list\" ? \"default\" : \"ghost\"}\n                    className=\"rounded-lg h-9 w-9\"\n                    onClick={() => setViewMode(\"list\")}\n                    data-testid=\"button-view-list\"\n                  >\n                    <List className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n\n                {/* Selection Mode Toggle */}\n                <Button \n                  variant={selectionMode ? \"secondary\" : \"outline\"}\n                  className=\"rounded-xl h-9\"\n                  onClick={() => {\n                    if (selectionMode) {\n                      clearSelection();\n                    } else {\n                      setSelectionMode(true);\n                    }\n                  }}\n                  data-testid=\"button-toggle-selection\"\n                >\n                  {selectionMode ? <X className=\"h-4 w-4 mr-2\" /> : <CheckSquare className=\"h-4 w-4 mr-2\" />}\n                  {selectionMode ? \"Cancelar\" : \"Selecionar\"}\n                </Button>\n              </div>\n\n              {/* Selection Actions */}\n              {selectionMode && (\n                <div className=\"flex items-center gap-2\">\n                  <Button \n                    variant=\"outline\" \n                    className=\"rounded-xl h-9\"\n                    onClick={selectAllPodcasts}\n                    disabled={myPodcasts.length === 0}\n                    data-testid=\"button-select-all\"\n                  >\n                    Selecionar Tudo ({myPodcasts.length})\n                  </Button>\n                  {selectedPodcasts.size > 0 && (\n                    <Button \n                      variant=\"destructive\" \n                      className=\"rounded-xl h-9\"\n                      onClick={() => setBulkDeleteDialogOpen(true)}\n                      data-testid=\"button-delete-selected\"\n                    >\n                      <Trash2 className=\"h-4 w-4 mr-2\" />\n                      Excluir ({selectedPodcasts.size})\n                    </Button>\n                  )}\n                </div>\n              )}\n            </div>\n\n            {/* Grid View */}\n            {viewMode === \"grid\" && (\n              <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                <AnimatePresence mode=\"popLayout\">\n                  {myPodcasts.length > 0 ? (\n                    myPodcasts.map((podcast: any, idx: number) => (\n                      <motion.div\n                        key={podcast.id}\n                        layout\n                        initial={{ opacity: 0, scale: 0.95 }}\n                        animate={{ opacity: 1, scale: 1 }}\n                        transition={{ delay: idx * 0.05 }}\n                      >\n                        <Card className={`glass-premium hover-premium rounded-[2rem] border-none bg-card/80 backdrop-blur-xl shadow-lg group overflow-hidden h-full flex flex-col ${selectionMode && selectedPodcasts.has(podcast.id) ? 'ring-2 ring-primary' : 'ring-2 ring-primary/10'}`}>\n                          <div className=\"h-48 relative overflow-hidden bg-primary/10\">\n                            {selectionMode && (\n                              <div \n                                className=\"absolute top-4 left-4 z-10 cursor-pointer\"\n                                onClick={() => togglePodcastSelection(podcast.id)}\n                              >\n                                <div className={`h-6 w-6 rounded-md border-2 flex items-center justify-center transition-colors ${selectedPodcasts.has(podcast.id) ? 'bg-primary border-primary' : 'bg-card/80 border-white/50'}`}>\n                                  {selectedPodcasts.has(podcast.id) && <Check className=\"h-4 w-4 text-white\" />}\n                                </div>\n                              </div>\n                            )}\n                            {podcast.imageUrl ? (\n                              <img src={podcast.imageUrl} className=\"w-full h-full object-cover transition-transform duration-500 \" />\n                            ) : (\n                              <div className=\"w-full h-full flex items-center justify-center\">\n                                <Headphones className=\"h-16 w-16 text-primary/40\" />\n                              </div>\n                            )}\n                            <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\n                            <div className=\"absolute bottom-4 left-4 right-4 flex justify-between items-end\">\n                              <Badge className=\"rounded-full bg-card/20 backdrop-blur-md border-none text-white font-bold\">{podcast.category || 'Geral'}</Badge>\n                            </div>\n                          </div>\n                          <CardHeader className=\"pb-4\">\n                            <CardTitle className=\"text-xl font-bold line-clamp-1 group-hover:text-primary transition-colors\">{podcast.title}</CardTitle>\n                            <CardDescription className=\"line-clamp-2 text-sm leading-relaxed\">{podcast.description || 'Sem descrição'}</CardDescription>\n                          </CardHeader>\n                          <CardContent className=\"flex-1 space-y-4\">\n                            <div className=\"flex items-center gap-4 text-xs text-muted-foreground font-bold uppercase tracking-wider\">\n                              <span className=\"flex items-center gap-1\"><Library className=\"h-3 w-3\" /> {podcast.episodes?.length || 0} Episódios</span>\n                              {podcast.bibleBook && <span className=\"flex items-center gap-1\"><Bookmark className=\"h-3 w-3\" /> {podcast.bibleBook}</span>}\n                            </div>\n                          </CardContent>\n                          <CardFooter className=\"pt-0 border-t border-border/50 p-6 flex justify-between gap-4\">\n                            <Button variant=\"ghost\" className=\"flex-1 rounded-xl h-11 font-bold transition-all\" onClick={() => { setDetailPodcast(podcast); setEpisodeSearch(\"\"); }} data-testid={`button-manage-podcast-${podcast.id}`}>\n                              Gerenciar\n                            </Button>\n                            {!selectionMode && (\n                              <Button \n                                size=\"icon\" \n                                variant=\"ghost\" \n                                className=\"rounded-xl h-11 w-11\"\n                                onClick={() => {\n                                  setSelectedPodcast(podcast);\n                                  setDeleteDialogOpen(true);\n                                }}\n                              >\n                                <Trash2 className=\"h-5 w-5\" />\n                              </Button>\n                            )}\n                          </CardFooter>\n                        </Card>\n                      </motion.div>\n                    ))\n                  ) : (\n                    <div className=\"col-span-full py-20 text-center\">\n                      <p className=\"text-muted-foreground\">Você ainda não criou nenhum podcast.</p>\n                    </div>\n                  )}\n                </AnimatePresence>\n              </div>\n            )}\n\n            {/* List View */}\n            {viewMode === \"list\" && (\n              <div className=\"space-y-3\">\n                <AnimatePresence mode=\"popLayout\">\n                  {myPodcasts.length > 0 ? (\n                    myPodcasts.map((podcast: any, idx: number) => (\n                      <motion.div\n                        key={podcast.id}\n                        layout\n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        transition={{ delay: idx * 0.03 }}\n                      >\n                        <Card className={`glass-premium hover-premium rounded-2xl border-none bg-card/80 backdrop-blur-xl shadow-sm group overflow-hidden ${selectionMode && selectedPodcasts.has(podcast.id) ? 'ring-2 ring-primary' : 'ring-2 ring-primary/10'}`}>\n                          <div className=\"flex items-center gap-4 p-4\">\n                            {selectionMode && (\n                              <div \n                                className=\"cursor-pointer flex-shrink-0\"\n                                onClick={() => togglePodcastSelection(podcast.id)}\n                              >\n                                <div className={`h-6 w-6 rounded-md border-2 flex items-center justify-center transition-colors ${selectedPodcasts.has(podcast.id) ? 'bg-primary border-primary' : 'bg-muted border-border'}`}>\n                                  {selectedPodcasts.has(podcast.id) && <Check className=\"h-4 w-4 text-white\" />}\n                                </div>\n                              </div>\n                            )}\n                            <div className=\"h-16 w-16 rounded-xl bg-primary/10 flex items-center justify-center flex-shrink-0 overflow-hidden\">\n                              {podcast.imageUrl ? (\n                                <img src={podcast.imageUrl} className=\"w-full h-full object-cover\" />\n                              ) : (\n                                <Headphones className=\"h-8 w-8 text-primary/40\" />\n                              )}\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <h3 className=\"font-bold text-lg line-clamp-1 group-hover:text-primary transition-colors\">{podcast.title}</h3>\n                              <p className=\"text-sm text-muted-foreground line-clamp-1\">{podcast.description || 'Sem descrição'}</p>\n                              <div className=\"flex items-center gap-4 mt-1 text-xs text-muted-foreground\">\n                                <span className=\"flex items-center gap-1\"><Library className=\"h-3 w-3\" /> {podcast.episodes?.length || 0} Episódios</span>\n                                {podcast.bibleBook && <span className=\"flex items-center gap-1\"><Bookmark className=\"h-3 w-3\" /> {podcast.bibleBook}</span>}\n                              </div>\n                            </div>\n                            <div className=\"flex items-center gap-2 flex-shrink-0\">\n                              <Button variant=\"ghost\" className=\"rounded-xl h-9 font-bold\" onClick={() => { setDetailPodcast(podcast); setEpisodeSearch(\"\"); }} data-testid={`button-manage-list-podcast-${podcast.id}`}>\n                                Gerenciar\n                              </Button>\n                              {!selectionMode && (\n                                <Button \n                                  size=\"icon\" \n                                  variant=\"ghost\" \n                                  className=\"rounded-xl h-9 w-9 text-destructive\"\n                                  onClick={() => {\n                                    setSelectedPodcast(podcast);\n                                    setDeleteDialogOpen(true);\n                                  }}\n                                >\n                                  <Trash2 className=\"h-4 w-4\" />\n                                </Button>\n                              )}\n                            </div>\n                          </div>\n                        </Card>\n                      </motion.div>\n                    ))\n                  ) : (\n                    <div className=\"py-20 text-center\">\n                      <p className=\"text-muted-foreground\">Você ainda não criou nenhum podcast.</p>\n                    </div>\n                  )}\n                </AnimatePresence>\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n\n        {/* Episode Detail Dialog */}\n        <Dialog open={!!detailPodcast} onOpenChange={(open) => { if (!open) setDetailPodcast(null); }}>\n          <DialogContent className=\"rounded-2xl border-none bg-card/95 backdrop-blur-2xl shadow-2xl max-w-lg max-h-[85vh] flex flex-col p-0 overflow-hidden\">\n            {detailPodcast && (\n              <>\n                <div className=\"p-6 pb-4 border-b border-border/50\">\n                  <div className=\"flex items-start gap-4\">\n                    <div className=\"h-16 w-16 rounded-2xl bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                      <Radio className=\"h-8 w-8 text-primary\" />\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <DialogTitle className=\"text-xl font-bold line-clamp-1\">{detailPodcast.title}</DialogTitle>\n                      <DialogDescription className=\"line-clamp-2 mt-1\">\n                        {detailPodcast.description || 'Sem descrição'}\n                      </DialogDescription>\n                      <div className=\"flex items-center gap-3 mt-2 text-xs text-muted-foreground font-bold uppercase tracking-wider flex-wrap\">\n                        <span className=\"flex items-center gap-1\"><Library className=\"h-3 w-3\" /> {(detailPodcast as any).episodes?.length || 0} Episódios</span>\n                        {(detailPodcast as any).bibleBook && <span className=\"flex items-center gap-1\"><Bookmark className=\"h-3 w-3\" /> {(detailPodcast as any).bibleBook}</span>}\n                      </div>\n                    </div>\n                  </div>\n                  {(detailPodcast as any).episodes?.length > 6 && (\n                    <div className=\"mt-4 relative\">\n                      <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                      <Input\n                        placeholder=\"Buscar episódio...\"\n                        className=\"pl-10 rounded-xl\"\n                        value={episodeSearch}\n                        onChange={(e) => setEpisodeSearch(e.target.value)}\n                        data-testid=\"input-episode-search\"\n                      />\n                    </div>\n                  )}\n                </div>\n                <div className=\"flex-1 overflow-y-auto p-4 space-y-1\">\n                  {(() => {\n                    const episodes = ((detailPodcast as any).episodes || []) as Episode[];\n                    const filtered = episodeSearch\n                      ? episodes.filter((ep: Episode) => ep.title.toLowerCase().includes(episodeSearch.toLowerCase()))\n                      : episodes;\n                    if (filtered.length === 0) {\n                      return (\n                        <div className=\"py-12 text-center text-muted-foreground\">\n                          {episodeSearch ? 'Nenhum episódio encontrado' : 'Nenhum episódio disponível'}\n                        </div>\n                      );\n                    }\n                    return filtered.map((ep: Episode, idx: number) => (\n                      <div\n                        key={ep.id}\n                        className=\"flex items-center justify-between p-3 rounded-xl hover-elevate active-elevate-2 cursor-pointer\"\n                        onClick={() => { playEpisode(ep, detailPodcast as any); }}\n                        data-testid={`episode-item-${ep.id}`}\n                      >\n                        <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                          <span className=\"text-xs font-bold text-muted-foreground w-8 text-center flex-shrink-0 tabular-nums\">\n                            {ep.chapterNumber || idx + 1}\n                          </span>\n                          <div className=\"flex-1 min-w-0\">\n                            <p className=\"text-sm font-bold truncate\">{ep.title}</p>\n                            <p className=\"text-xs text-muted-foreground flex items-center gap-2 flex-wrap\">\n                              Capítulo {ep.chapterNumber || idx + 1}\n                              {currentEpisode?.id === ep.id && isPlaying && (\n                                <Badge variant=\"secondary\" className=\"h-4 text-[8px]\">TOCANDO</Badge>\n                              )}\n                              {downloadedEpisodes.has(ep.id) && (\n                                <Badge variant=\"secondary\" className=\"h-4 text-[8px]\">OFFLINE</Badge>\n                              )}\n                            </p>\n                          </div>\n                        </div>\n                        <div className=\"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                          {currentEpisode?.id === ep.id && isPlaying ? (\n                            <Pause className=\"h-4 w-4 fill-current\" />\n                          ) : currentEpisode?.id === ep.id && isLoadingAudio ? (\n                            <Loader2 className=\"h-4 w-4 animate-spin\" />\n                          ) : (\n                            <Play className=\"h-4 w-4 fill-current\" />\n                          )}\n                        </div>\n                      </div>\n                    ));\n                  })()}\n                </div>\n              </>\n            )}\n          </DialogContent>\n        </Dialog>\n\n        {/* Delete Confirmation Dialog */}\n        <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n          <AlertDialogContent className=\"rounded-[2.5rem] border-none bg-card/95 backdrop-blur-2xl shadow-2xl p-8 max-w-sm\">\n            <AlertDialogHeader className=\"space-y-4\">\n              <div className=\"mx-auto h-20 w-20 rounded-full bg-destructive/10 flex items-center justify-center mb-2\">\n                <AlertTriangle className=\"h-10 w-10 text-destructive animate-pulse\" />\n              </div>\n              <AlertDialogTitle className=\"text-2xl font-semibold text-center\">Excluir Rádio?</AlertDialogTitle>\n              <AlertDialogDescription className=\"text-center text-base leading-relaxed\">\n                Esta ação não pode ser desfeita. Isso excluirá permanentemente o rádio \n                <span className=\"block font-bold text-foreground mt-2\">\"{selectedPodcast?.title}\"</span>\n                e todos os seus episódios.\n              </AlertDialogDescription>\n            </AlertDialogHeader>\n            <AlertDialogFooter className=\"flex-col sm:flex-col gap-3 mt-8\">\n              <AlertDialogAction \n                className=\"w-full rounded-2xl h-14 bg-destructive text-destructive-foreground hover:bg-destructive/90 font-bold text-lg shadow-lg shadow-destructive/20\"\n                onClick={() => {\n                  if (selectedPodcast) {\n                    deletePodcastMutation.mutate(selectedPodcast.id);\n                  }\n                }}\n                disabled={deletePodcastMutation.isPending}\n              >\n                {deletePodcastMutation.isPending ? <Loader2 className=\"h-6 w-6 animate-spin\" /> : \"Sim, Excluir Tudo\"}\n              </AlertDialogAction>\n              <AlertDialogCancel className=\"w-full rounded-2xl h-14 border-none bg-secondary hover:bg-secondary/80 font-bold text-lg m-0 transition-colors\">\n                Manter Rádio\n              </AlertDialogCancel>\n            </AlertDialogFooter>\n          </AlertDialogContent>\n        </AlertDialog>\n\n        {/* Bulk Delete Confirmation Dialog */}\n        <AlertDialog open={bulkDeleteDialogOpen} onOpenChange={setBulkDeleteDialogOpen}>\n          <AlertDialogContent className=\"rounded-2xl\">\n            <AlertDialogHeader>\n              <AlertDialogTitle>Excluir {selectedPodcasts.size} podcasts?</AlertDialogTitle>\n              <AlertDialogDescription>\n                Esta ação não pode ser desfeita. Isso excluirá permanentemente \n                {selectedPodcasts.size === 1 ? \" o podcast selecionado\" : ` os ${selectedPodcasts.size} podcasts selecionados`} e todos os seus episódios.\n              </AlertDialogDescription>\n            </AlertDialogHeader>\n            <AlertDialogFooter>\n              <AlertDialogCancel className=\"rounded-xl\">Cancelar</AlertDialogCancel>\n              <AlertDialogAction \n                className=\"rounded-xl bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n                onClick={() => {\n                  bulkDeleteMutation.mutate(Array.from(selectedPodcasts));\n                }}\n                disabled={bulkDeleteMutation.isPending}\n              >\n                {bulkDeleteMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                    Excluindo...\n                  </>\n                ) : (\n                  `Excluir ${selectedPodcasts.size} podcasts`\n                )}\n              </AlertDialogAction>\n            </AlertDialogFooter>\n          </AlertDialogContent>\n        </AlertDialog>\n      </div>\n\n      {/* Floating Player */}\n      <AnimatePresence>\n        {currentEpisode && (\n          <motion.div \n            initial={{ y: 100, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            exit={{ y: 100, opacity: 0 }}\n            className=\"fixed bottom-0 left-0 right-0 z-[100] md:bottom-6 md:left-6 md:right-6\"\n          >\n            <AudioPlayer\n              isPlaying={isPlaying}\n              isLoading={isLoadingAudio}\n              onToggle={togglePlay}\n              onStop={() => {\n                if (audioRef.current) {\n                  audioRef.current.pause();\n                  audioRef.current.currentTime = 0;\n                }\n                setIsPlaying(false);\n                setCurrentEpisode(null);\n              }}\n              title={currentEpisode.title}\n              currentTime={currentTime}\n              duration={duration}\n              onSeek={(val: number) => {\n                if (audioRef.current) audioRef.current.currentTime = val;\n              }}\n            />\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","path":null,"size_bytes":54533,"size_tokens":null},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n.glass-darker {\n  background: linear-gradient(145deg, hsl(var(--card)) 0%, hsl(var(--background)) 100%);\n  backdrop-filter: blur(16px);\n  -webkit-backdrop-filter: blur(16px);\n  box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.15),\n              0 8px 16px -6px rgba(0, 0, 0, 0.1),\n              inset 0 1px 0 rgba(255, 255, 255, 0.5);\n  border: 2px solid hsl(var(--border));\n}\n\n.dark .glass-darker {\n  background: linear-gradient(145deg, rgba(18, 18, 35, 0.98) 0%, rgba(12, 12, 28, 0.99) 100%);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), \n              0 12px 20px -8px rgba(0, 0, 0, 0.35),\n              inset 0 1px 0 rgba(255, 255, 255, 0.08);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n}\n\n.premium-card {\n  background: linear-gradient(145deg, hsl(var(--card)) 0%, hsl(var(--background)) 100%);\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.12),\n              0 8px 16px -6px rgba(0, 0, 0, 0.08),\n              inset 0 1px 0 rgba(255, 255, 255, 0.6);\n  border: 2px solid hsl(var(--border));\n}\n\n.dark .premium-card {\n  background: linear-gradient(145deg, rgba(15, 15, 32, 0.98) 0%, rgba(10, 10, 25, 0.99) 100%);\n  box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.45),\n              0 8px 16px -6px rgba(0, 0, 0, 0.3),\n              inset 0 1px 0 rgba(255, 255, 255, 0.06);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n}\n\n/* Gradient stat cards with colorful accents */\n.stat-card-primary {\n  background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(139, 92, 246, 0.12) 100%);\n  border: 1px solid rgba(99, 102, 241, 0.2);\n  box-shadow: 0 4px 15px -3px rgba(99, 102, 241, 0.15);\n}\n\n.stat-card-green {\n  background: linear-gradient(135deg, rgba(34, 197, 94, 0.08) 0%, rgba(16, 185, 129, 0.12) 100%);\n  border: 1px solid rgba(34, 197, 94, 0.2);\n  box-shadow: 0 4px 15px -3px rgba(34, 197, 94, 0.15);\n}\n\n.stat-card-amber {\n  background: linear-gradient(135deg, rgba(245, 158, 11, 0.08) 0%, rgba(251, 191, 36, 0.12) 100%);\n  border: 1px solid rgba(245, 158, 11, 0.2);\n  box-shadow: 0 4px 15px -3px rgba(245, 158, 11, 0.15);\n}\n\n.stat-card-rose {\n  background: linear-gradient(135deg, rgba(244, 63, 94, 0.08) 0%, rgba(251, 113, 133, 0.12) 100%);\n  border: 1px solid rgba(244, 63, 94, 0.2);\n  box-shadow: 0 4px 15px -3px rgba(244, 63, 94, 0.15);\n}\n\n.stat-card-blue {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(96, 165, 250, 0.12) 100%);\n  border: 1px solid rgba(59, 130, 246, 0.2);\n  box-shadow: 0 4px 15px -3px rgba(59, 130, 246, 0.15);\n}\n\n/* Premium profile card with gradient overlay */\n.profile-hero-card {\n  background: linear-gradient(135deg, hsl(var(--card)) 0%, hsl(40 50% 97%) 50%, hsl(250 30% 96%) 100%);\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1),\n              0 12px 24px -8px rgba(0, 0, 0, 0.06),\n              inset 0 1px 0 rgba(255, 255, 255, 0.8);\n}\n\n.dark .profile-hero-card {\n  background: linear-gradient(135deg, hsl(var(--card)) 0%, rgba(30, 30, 60, 0.9) 50%, rgba(40, 25, 60, 0.9) 100%);\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4),\n              0 12px 24px -8px rgba(0, 0, 0, 0.3),\n              inset 0 1px 0 rgba(255, 255, 255, 0.05);\n}\n\n/* Subtle gradient card - universal background for all cards */\n.subtle-card {\n  background: linear-gradient(145deg, hsl(var(--card)) 0%, hsl(40 35% 97%) 50%, hsl(220 20% 97%) 100%);\n}\n\n.dark .subtle-card {\n  background: linear-gradient(145deg, hsl(var(--card)) 0%, rgba(25, 25, 45, 0.95) 50%, rgba(30, 25, 50, 0.95) 100%);\n}\n\n/* Premium Glassmorphism & Depth Effects - FIXED CSS SYNTAX */\n  .glass-premium {\n    background: linear-gradient(135deg, \n      hsl(var(--card) / 0.95) 0%, \n      hsl(var(--background) / 0.85) 100%) !important;\n    backdrop-filter: blur(24px) saturate(180%) !important;\n    -webkit-backdrop-filter: blur(24px) saturate(180%) !important;\n    border: 1px solid hsl(var(--primary) / 0.3) !important;\n    box-shadow: \n      0 20px 40px -10px rgba(0, 0, 0, 0.2),\n      0 0 20px -5px hsl(var(--primary) / 0.2),\n      inset 0 1px 2px rgba(255, 255, 255, 0.5) !important;\n  }\n\n  .dark .glass-premium {\n    background: linear-gradient(135deg, \n      rgba(20, 22, 40, 0.95) 0%, \n      rgba(12, 14, 30, 0.9) 100%) !important;\n    border: 1px solid hsl(var(--primary) / 0.4) !important;\n    box-shadow: \n      0 25px 50px -12px rgba(0, 0, 0, 0.7),\n      0 0 40px -10px hsl(var(--primary) / 0.3),\n      inset 0 1px 1px rgba(255, 255, 255, 0.08) !important;\n  }\n\n  .hover-premium {\n    transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) !important;\n    position: relative;\n    z-index: 10;\n  }\n\n  .hover-premium:hover {\n    transform: translateY(-10px) scale(1.02) !important;\n    box-shadow: \n      0 40px 80px -20px rgba(0, 0, 0, 0.3),\n      0 0 50px -10px hsl(var(--primary) / 0.4) !important;\n    border-color: hsl(var(--primary) / 0.6) !important;\n    z-index: 50;\n  }\n\n  .dark .hover-premium:hover {\n    box-shadow: \n      0 50px 100px -15px rgba(0, 0, 0, 0.8),\n      0 0 60px -12px hsl(var(--primary) / 0.5) !important;\n    border-color: hsl(var(--primary) / 0.7) !important;\n  }\n\n/* Mesh Gradient Backgrounds - FIXED CSS SYNTAX */\n.mesh-primary {\n  background-color: hsl(var(--background)) !important;\n  background-image: \n    radial-gradient(at 0% 0%, hsl(var(--primary) / 0.15) 0px, transparent 50%),\n    radial-gradient(at 100% 0%, hsl(var(--accent) / 0.1) 0px, transparent 50%),\n    radial-gradient(at 100% 100%, hsl(var(--primary) / 0.15) 0px, transparent 50%),\n    radial-gradient(at 0% 100%, hsl(var(--accent) / 0.1) 0px, transparent 50%),\n    radial-gradient(at 50% 50%, hsl(var(--primary) / 0.05) 0px, transparent 50%) !important;\n  background-attachment: fixed !important;\n}\n\n/* Colored accent cards */\n.card-accent-amber {\n  background: linear-gradient(135deg, rgba(245, 158, 11, 0.06) 0%, rgba(251, 191, 36, 0.1) 50%, hsl(var(--card) / 0.95) 100%);\n  border: 1px solid rgba(245, 158, 11, 0.2);\n  box-shadow: 0 8px 25px -5px rgba(245, 158, 11, 0.12);\n}\n\n.card-accent-blue {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.06) 0%, rgba(99, 102, 241, 0.1) 50%, hsl(var(--card) / 0.95) 100%);\n  border: 1px solid rgba(59, 130, 246, 0.2);\n  box-shadow: 0 8px 25px -5px rgba(59, 130, 246, 0.12);\n}\n\n.card-accent-emerald {\n  background: linear-gradient(135deg, rgba(16, 185, 129, 0.06) 0%, rgba(52, 211, 153, 0.1) 50%, hsl(var(--card) / 0.95) 100%);\n  border: 1px solid rgba(16, 185, 129, 0.2);\n  box-shadow: 0 8px 25px -5px rgba(16, 185, 129, 0.12);\n}\n\n.card-accent-rose {\n  background: linear-gradient(135deg, rgba(244, 63, 94, 0.06) 0%, rgba(251, 113, 133, 0.1) 50%, hsl(var(--card) / 0.95) 100%);\n  border: 1px solid rgba(244, 63, 94, 0.2);\n  box-shadow: 0 8px 25px -5px rgba(244, 63, 94, 0.12);\n}\n\n.card-accent-purple {\n  background: linear-gradient(135deg, rgba(139, 92, 246, 0.06) 0%, rgba(168, 85, 247, 0.1) 50%, hsl(var(--card) / 0.95) 100%);\n  border: 1px solid rgba(139, 92, 246, 0.2);\n  box-shadow: 0 8px 25px -5px rgba(139, 92, 246, 0.12);\n}\n\n/* LIGHT MODE - Premium Soft Theme */\n:root {\n  --button-outline: rgba(0,0,0, .08);\n  --badge-outline: rgba(0,0,0, .04);\n  --opaque-button-border-intensity: -6;\n  --elevate-1: rgba(59, 82, 120, .06);\n  --elevate-2: rgba(59, 82, 120, .12);\n  --background: 40 30% 98%;\n  --foreground: 220 15% 35%;\n  --border: 40 15% 88%;\n  --card: 40 40% 99%;\n  --card-foreground: 220 15% 32%;\n  --card-border: 40 20% 90%;\n  --sidebar: 40 25% 97%;\n  --sidebar-foreground: 220 15% 38%;\n  --sidebar-border: 40 20% 88%;\n  --sidebar-primary: 220 35% 38%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 40 40% 94%;\n  --sidebar-accent-foreground: 220 30% 32%;\n  --sidebar-ring: 220 35% 38%;\n  --popover: 40 35% 99%;\n  --popover-foreground: 220 15% 32%;\n  --popover-border: 40 20% 88%;\n  --primary: 220 35% 38%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 40 25% 93%;\n  --secondary-foreground: 220 30% 35%;\n  --muted: 40 20% 95%;\n  --muted-foreground: 220 15% 45%;\n  --accent: 38 75% 48%;\n  --accent-foreground: 220 30% 15%;\n  --destructive: 0 70% 55%;\n  --destructive-foreground: 0 0% 100%;\n  --input: 40 20% 85%;\n  --ring: 220 35% 38%;\n  --chart-1: 220 40% 45%;\n  --chart-2: 40 80% 50%;\n  --chart-3: 16 75% 50%;\n  --chart-4: 180 55% 42%;\n  --chart-5: 330 70% 50%;\n  --font-sans: Inter, sans-serif;\n  --font-serif: Crimson Text, serif;\n  --font-display: Playfair Display, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 1px 2px 0px hsl(220 20% 15% / 0.05);\n  --shadow-xs: 0px 1px 2px 0px hsl(220 20% 15% / 0.08), 0px 1px 3px 0px hsl(220 20% 15% / 0.10);\n  --shadow-sm: 0px 1px 3px 0px hsl(220 20% 15% / 0.10), 0px 1px 2px -1px hsl(220 20% 15% / 0.10);\n  --shadow: 0px 2px 4px 0px hsl(220 20% 15% / 0.07), 0px 1px 2px -1px hsl(220 20% 15% / 0.06);\n  --shadow-md: 0px 4px 6px -1px hsl(220 20% 15% / 0.10), 0px 2px 4px -2px hsl(220 20% 15% / 0.10);\n  --shadow-lg: 0px 10px 15px -3px hsl(220 20% 15% / 0.10), 0px 4px 6px -4px hsl(220 20% 15% / 0.10);\n  --shadow-xl: 0px 20px 25px -5px hsl(220 20% 15% / 0.12), 0px 8px 10px -6px hsl(220 20% 15% / 0.10);\n  --shadow-2xl: 0px 25px 50px -12px hsl(220 20% 15% / 0.25), 0px 12px 20px -8px hsl(220 20% 15% / 0.15);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .06);\n  --opaque-button-border-intensity: 8;\n  --elevate-1: rgba(130, 155, 195, .10);\n  --elevate-2: rgba(130, 155, 195, .16);\n  --background: 220 25% 10%;\n  --foreground: 40 20% 92%;\n  --border: 220 20% 18%;\n  --card: 220 22% 13%;\n  --card-foreground: 40 15% 90%;\n  --card-border: 220 18% 16%;\n  --sidebar: 220 25% 11%;\n  --sidebar-foreground: 40 20% 90%;\n  --sidebar-border: 220 20% 16%;\n  --sidebar-primary: 38 70% 52%;\n  --sidebar-primary-foreground: 220 30% 10%;\n  --sidebar-accent: 220 25% 18%;\n  --sidebar-accent-foreground: 38 70% 58%;\n  --sidebar-ring: 38 70% 52%;\n  --popover: 220 22% 13%;\n  --popover-foreground: 40 15% 90%;\n  --popover-border: 220 18% 16%;\n  --primary: 220 45% 58%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 220 20% 16%;\n  --secondary-foreground: 220 40% 75%;\n  --muted: 220 18% 18%;\n  --muted-foreground: 220 15% 60%;\n  --accent: 38 70% 52%;\n  --accent-foreground: 220 30% 10%;\n  --destructive: 0 65% 55%;\n  --destructive-foreground: 0 0% 100%;\n  --input: 220 20% 18%;\n  --ring: 220 45% 58%;\n  --chart-1: 220 50% 55%;\n  --chart-2: 40 80% 52%;\n  --chart-3: 16 75% 52%;\n  --chart-4: 170 55% 48%;\n  --chart-5: 330 70% 55%;\n  --shadow-2xs: 0px 1px 2px 0px hsl(220 20% 0% / 0.20);\n  --shadow-xs: 0px 1px 2px 0px hsl(220 20% 0% / 0.25), 0px 1px 3px 0px hsl(220 20% 0% / 0.30);\n  --shadow-sm: 0px 1px 3px 0px hsl(220 20% 0% / 0.30), 0px 1px 2px -1px hsl(220 20% 0% / 0.30);\n  --shadow: 0px 2px 4px 0px hsl(220 20% 0% / 0.25), 0px 1px 2px -1px hsl(220 20% 0% / 0.20);\n  --shadow-md: 0px 4px 6px -1px hsl(220 20% 0% / 0.30), 0px 2px 4px -2px hsl(220 20% 0% / 0.30);\n  --shadow-lg: 0px 10px 15px -3px hsl(220 20% 0% / 0.35), 0px 4px 6px -4px hsl(220 20% 0% / 0.30);\n  --shadow-xl: 0px 20px 25px -5px hsl(220 20% 0% / 0.40), 0px 8px 10px -6px hsl(220 20% 0% / 0.35);\n  --shadow-2xl: 0px 25px 50px -12px hsl(220 20% 0% / 0.50), 0px 12px 20px -8px hsl(220 20% 0% / 0.40);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n    background: linear-gradient(160deg, hsl(var(--background)) 0%, hsl(40 35% 96%) 40%, hsl(40 45% 97%) 100%);\n  }\n\n  .dark body {\n    background: linear-gradient(160deg, hsl(var(--background)) 0%, hsl(220 22% 10%) 40%, hsl(220 25% 11%) 100%);\n  }\n\n  /* Premium glassmorphism effects - softer */\n  .glass {\n    @apply backdrop-blur-xl bg-white/60 dark:bg-slate-900/50 border border-white/40 dark:border-slate-700/40;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06);\n  }\n\n  /* Premium card elevation with subtle glow */\n  .premium-card {\n    @apply rounded-2xl shadow-md hover:shadow-lg transition-all duration-300;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04), 0 2px 8px rgba(59, 82, 120, 0.04);\n  }\n\n  .premium-card:hover {\n    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.06), 0 4px 12px rgba(59, 82, 120, 0.06);\n    transform: translateY(-1px);\n  }\n\n  /* Gradient text effect - more subtle */\n  .gradient-text {\n    background: linear-gradient(to right, hsl(220 35% 38%), hsl(38 80% 52%), hsl(220 35% 38%));\n    @apply bg-clip-text text-transparent;\n    background-size: 200% auto;\n  }\n\n  /* Soft gradient backgrounds */\n  .gradient-hero {\n    background: linear-gradient(135deg, hsl(220 45% 48%) 0%, hsl(220 35% 42%) 50%, hsl(38 80% 52%) 100%);\n  }\n\n  .gradient-premium {\n    background: linear-gradient(135deg, hsl(220 45% 48%) 0%, hsl(220 35% 45%) 100%);\n  }\n\n  /* Soft gold glow */\n  .glow-gold {\n    box-shadow: 0 0 15px rgba(217, 164, 6, 0.25), 0 0 30px rgba(217, 164, 6, 0.12);\n  }\n\n  /* Soft navy glow */\n  .glow-purple {\n    box-shadow: 0 0 15px rgba(59, 82, 120, 0.25), 0 0 30px rgba(59, 82, 120, 0.12);\n  }\n\n  /* Hero verse card with elegant styling */\n  .verse-hero {\n    @apply relative overflow-hidden rounded-3xl;\n    background: linear-gradient(145deg, hsl(40 45% 97%) 0%, hsl(40 35% 95%) 100%);\n  }\n\n  .dark .verse-hero {\n    background: linear-gradient(145deg, hsl(220 22% 14%) 0%, hsl(220 25% 12%) 100%);\n  }\n\n  .verse-hero::before {\n    content: \"\";\n    position: absolute;\n    inset: 0;\n    background: url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n    opacity: 0.5;\n  }\n\n  /* Sidebar user card with XP ring */\n  .user-avatar-ring {\n    @apply relative rounded-full p-0.5;\n    background: conic-gradient(from 0deg, hsl(220 45% 48%) var(--xp-progress, 0%), hsl(40 20% 85%) var(--xp-progress, 0%));\n  }\n\n  .dark .user-avatar-ring {\n    background: conic-gradient(from 0deg, hsl(38 85% 55%) var(--xp-progress, 0%), hsl(220 20% 25%) var(--xp-progress, 0%));\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide scrollbar but allow scrolling */\n  .scrollbar-hide {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n  .scrollbar-hide::-webkit-scrollbar {\n    display: none;\n  }\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n\n  /* Reading Theme - applies to Bible reader content only */\n  .reading-themed-content {\n    color: var(--reading-text);\n  }\n  \n  /* Target verse text and headings specifically, not all descendants */\n  .reading-themed-content h1,\n  .reading-themed-content .verse-text,\n  .reading-themed-content .chapter-number,\n  .reading-themed-content .book-name {\n    color: var(--reading-text) !important;\n  }\n  \n  /* Verse numbers - slightly dimmed */\n  .reading-themed-content .verse-number {\n    color: var(--reading-text) !important;\n    opacity: 0.6;\n  }\n}\n","path":null,"size_bytes":21604,"size_tokens":null},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":2263,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3848,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/contexts/ThemeContext.tsx":{"content":"import { createContext, useContext, useEffect, useState, type ReactNode } from \"react\";\nimport { isNative } from \"@/lib/config\";\n\ntype Theme = \"light\" | \"dark\";\ntype ReadingTheme = \"default\" | \"sepia\" | \"paper\" | \"night\";\n\ninterface ThemeContextType {\n  theme: Theme;\n  readingTheme: ReadingTheme;\n  setTheme: (theme: Theme) => void;\n  setReadingTheme: (theme: ReadingTheme) => void;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nconst readingThemeStyles: Record<ReadingTheme, { bg: string; text: string; name: string; background: string; textColor: string }> = {\n  default: { bg: \"\", text: \"\", name: \"Padrão\", background: \"\", textColor: \"\" },\n  sepia: { bg: \"bg-[#f4ecd8]\", text: \"text-[#5c4b37]\", name: \"Sépia\", background: \"#f4ecd8\", textColor: \"#5c4b37\" },\n  paper: { bg: \"bg-[#faf9f6]\", text: \"text-[#333333]\", name: \"Papel\", background: \"#faf9f6\", textColor: \"#333333\" },\n  night: { bg: \"bg-[#1a1a2e]\", text: \"text-[#e8e8e8]\", name: \"Noturno\", background: \"#1a1a2e\", textColor: \"#e8e8e8\" },\n};\n\nexport function ThemeProvider({ children }: { children: ReactNode }) {\n  const [theme, setThemeState] = useState<Theme>(() => {\n    const stored = localStorage.getItem(\"theme\");\n    if (stored === \"light\" || stored === \"dark\") return stored;\n    // Default to dark mode on native apps for consistent experience\n    if (isNative) return \"dark\";\n    return window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"dark\" : \"light\";\n  });\n\n  const [readingTheme, setReadingThemeState] = useState<ReadingTheme>(() => {\n    const stored = localStorage.getItem(\"readingTheme\");\n    if (stored === \"default\" || stored === \"sepia\" || stored === \"paper\" || stored === \"night\") {\n      return stored;\n    }\n    return \"default\";\n  });\n\n  useEffect(() => {\n    const root = document.documentElement;\n    root.classList.remove(\"light\", \"dark\");\n    root.classList.add(theme);\n    localStorage.setItem(\"theme\", theme);\n  }, [theme]);\n\n  useEffect(() => {\n    localStorage.setItem(\"readingTheme\", readingTheme);\n    \n    // Apply reading theme CSS variables to document root\n    const root = document.documentElement;\n    const themeStyles = readingThemeStyles[readingTheme];\n    \n    if (readingTheme !== \"default\") {\n      root.style.setProperty(\"--reading-bg\", themeStyles.background);\n      root.style.setProperty(\"--reading-text\", themeStyles.textColor);\n      root.classList.add(\"reading-theme-active\");\n    } else {\n      root.style.removeProperty(\"--reading-bg\");\n      root.style.removeProperty(\"--reading-text\");\n      root.classList.remove(\"reading-theme-active\");\n    }\n  }, [readingTheme]);\n\n  const setTheme = (newTheme: Theme) => {\n    setThemeState(newTheme);\n  };\n\n  const setReadingTheme = (newTheme: ReadingTheme) => {\n    setReadingThemeState(newTheme);\n  };\n\n  const toggleTheme = () => {\n    setThemeState(prev => prev === \"light\" ? \"dark\" : \"light\");\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, readingTheme, setTheme, setReadingTheme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (!context) throw new Error(\"useTheme must be used within ThemeProvider\");\n  return context;\n}\n\nexport function getReadingThemeStyles(readingTheme: ReadingTheme) {\n  return readingThemeStyles[readingTheme];\n}\n\nexport const readingThemes = readingThemeStyles;\n","path":null,"size_bytes":3435,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"design_guidelines.md":{"content":"# BíbliaFS Premium Design Guidelines v3.0\n\n## Design Approach\n**Premium Spiritual Sanctuary**: Blend Apple Music's vibrant gradients + Notion's reading comfort + iOS glassmorphism. Create a luxurious, immersive Bible reading experience where every interaction feels sacred and delightful.\n\n## Core Visual System\n\n**Vibrant Palette**:\n- Royal Purple: #6B21F0 (primary)\n- Luminous Gold: #FFBE0B (accents)\n- Deep Indigo: #4338CA (secondary)\n- Sunset Orange: #FF6B35 (warm energy)\n- Pure White: #FFFFFF (surfaces)\n- Soft Cream: #FFF9F0 (reading backgrounds)\n\n**Glassmorphism Signature**:\n- Standard: backdrop-blur-2xl, bg-white/80, border border-white/20\n- Elevated: backdrop-blur-3xl, bg-white/70, shadow-2xl with purple/10 tint\n- Dark Mode: backdrop-blur-2xl, bg-gray-900/80, border-white/10\n\n**Gradients**:\n- Primary Actions: from-purple-600 to-indigo-600\n- Warm Accents: from-amber-400 to-orange-500\n- Backgrounds: from-purple-50/30 to-amber-50/30\n- Text Highlights: from-purple-600 via-purple-500 to-amber-400\n\n**Modern Borders**: rounded-3xl for cards/panels, rounded-2xl for buttons/inputs, rounded-full for avatars/FABs\n\n## Typography\n\n**Fonts (Google Fonts)**:\n- Playfair Display (serif): Headers, sections\n- Inter (sans-serif): UI, navigation\n- Crimson Text (serif): Bible verses, reading mode\n\n**Scale**:\n- Hero: text-6xl, font-bold\n- Page Headers: text-4xl, font-semibold\n- Section: text-2xl, font-medium\n- Bible Reading: text-xl, leading-loose (1.8)\n- UI Text: text-base, leading-relaxed\n\n## Layout System\n\n**Spacing Units**: 4, 8, 12, 16, 20, 24, 32\n- Card padding: p-8 (desktop), p-6 (mobile)\n- Section spacing: py-24 (desktop), py-16 (mobile)\n- Grid gaps: gap-8\n- Containers: max-w-7xl (dashboard), max-w-3xl (reading)\n\n## Internal Pages Architecture\n\n### Bible Reader Page\n**Layout**: Two-column on desktop (70% text, 30% sidebar), single-column mobile\n\n**Main Reading Area**:\n- Cream background (bg-cream/95) with subtle gradient overlay\n- Centered text max-w-3xl\n- Verse numbers in gold (text-amber-500), medium weight\n- Chapter headers with purple gradient text\n- Line height: leading-loose (1.8) for comfort\n- Font size toggle: text-lg/xl/2xl options\n- Paragraph spacing: mb-8 between passages\n\n**Glassmorphism Sidebar** (collapsible):\n- backdrop-blur-2xl, bg-white/80, rounded-3xl\n- Tabbed sections: Notes, Highlights, Cross-references\n- Floating above reading area with shadow-2xl\n- Sticky positioning from top\n\n**Controls Bar** (sticky top):\n- Full-width glassmorphism (backdrop-blur-xl, bg-white/90)\n- Rounded-2xl controls for: Font size, Highlight, Bookmark, Share\n- Purple active states with subtle glow\n- Smooth transitions (duration-300)\n\n### Profile Page\n**Hero Section**:\n- Gradient background (from-purple-600 to-indigo-700)\n- Avatar centered with gold ring-4, size-32\n- Name in text-4xl white below\n- Stats row: Reading streak, verses read, badges earned (glassmorphism cards)\n\n**Content Sections**:\n- Reading Progress: Large circular progress ring (gold gradient), percentage in center\n- Recent Activity: Timeline with gold connectors, glassmorphism event cards\n- Achievements: Grid of badge cards (rounded-3xl), glow effect on hover\n- Reading Goals: Card with gradient progress bars, purple-to-gold fill\n\n**Layout**: Two-column grid on desktop, stack on mobile\n\n### Settings Page\n**Organization**: Grouped sections with clear visual hierarchy\n\n**Section Cards**:\n- Glassmorphism containers (backdrop-blur-2xl, rounded-3xl)\n- Header with icon (gradient circle background), text-2xl\n- Options spaced with py-6, border-b last:border-0\n- Toggle switches with purple-to-gold gradient active state\n\n**Categories**:\n- Reading Preferences: Font, size, line spacing, theme selector\n- Notifications: Grouped toggles, vivid icons\n- Account: Avatar upload (drag-drop zone), email/password fields\n- Bible Version: Radio cards with rounded-2xl, purple border on selected\n- Subscription: Premium card with gradient background, gold badge\n\n**Input Styling**:\n- Text fields: rounded-2xl, px-6 py-4, border-2 purple-300\n- Focus state: ring-2 ring-purple-500, border-purple-500\n- Dropdowns: Glassmorphism overlay, rounded-2xl options\n\n### Dashboard Page\n**Quick Stats Row**:\n- Four cards in grid, glassmorphism with gradient accents\n- Large numbers (text-5xl, gradient text)\n- Icons in gold circles (bg-amber-100, size-16)\n\n**Today's Reading Widget**:\n- Featured card with rounded-3xl\n- Current verse in large Crimson Text\n- Circular progress (gold gradient stroke)\n- Continue button with purple gradient\n\n**Recent Highlights**:\n- Masonry grid of highlighted verses\n- Each card: verse text, colored highlight bar (left border-l-4)\n- Glassmorphism on hover with lift effect\n\n**Shortcuts Grid**:\n- Six action cards (Search, Study, Listen, Notes, Community, Donate)\n- Gradient backgrounds unique to each\n- White icons (size-8)\n\n## Component Library\n\n**Premium Cards**:\n- Base: rounded-3xl, bg-white, shadow-xl, p-8\n- Interactive: hover:shadow-2xl, hover:-translate-y-1, duration-300\n- Glassmorphism variant: backdrop-blur-2xl, bg-white/80\n\n**Buttons**:\n- Primary: rounded-2xl, px-8 py-4, gradient (purple-to-indigo), white text, shadow-lg\n- Secondary: rounded-2xl, border-2 purple-600, bg-transparent, hover:bg-purple-50\n- Icon: rounded-xl, size-12, bg-purple-100, hover:bg-purple-200\n\n**Navigation**:\n- Sidebar: Fixed, w-72, glassmorphism (backdrop-blur-xl, bg-white/90)\n- Items: rounded-2xl, px-6 py-4, hover:bg-purple-50, active:gradient background\n- Icons: Heroicons, purple-600, size-6\n\n**Floating Action Button**:\n- Fixed bottom-right (bottom-8 right-8)\n- size-16, rounded-full\n- Gold gradient background\n- White icon (size-8)\n- Large glow shadow\n\n## Animations\n\n**Interaction System** (consistent across all pages):\n- Hover lift: -translate-y-1, duration-300\n- Button press: scale-95, duration-150\n- Card entrance: fade-in + slide-up, duration-500, stagger-100\n- Progress fills: smooth width/stroke transition, duration-700\n- Modal overlays: backdrop-blur-sm fade, content scale-95 to scale-100\n\n**Scroll Behaviors**:\n- Parallax hero: transform-gpu, slower scroll rate\n- Sticky elements: smooth lock with shadow increase\n\n## Images\n\n**Hero Image (Landing only)**: Warm-lit open Bible on wooden surface, golden hour lighting, soft bokeh background. Full-viewport with purple-to-transparent gradient overlay (from-purple-900/60 to-transparent). Centered content with backdrop-blur-lg glassmorphism card containing headline and CTAs.\n\n**Feature Images**: AI study assistant (glowing book), Reading mode (comfort focus), Community (warm discussion), Podcast player (premium headphones). All images rounded-3xl with shadow-2xl.\n\n**Icons**: Heroicons CDN, vibrant fills, purple/gold primary colors.\n\n## Accessibility\n\n- Contrast ratio ≥ 4.5:1 maintained on all text\n- Focus rings: ring-2 ring-gold-500 on all interactive elements\n- Keyboard navigation: visible states, logical tab order\n- Screen reader: aria-labels on icons, semantic HTML\n- Font scaling: respects user preferences up to 200%\n- Reduced motion: prefers-reduced-motion removes transforms/transitions","path":null,"size_bytes":7077,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route, useLocation } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AppSidebar } from \"@/components/app-sidebar\";\nimport { ThemeProvider } from \"@/contexts/ThemeContext\";\nimport { LanguageProvider } from \"@/contexts/LanguageContext\";\nimport { OfflineProvider } from \"@/contexts/OfflineContext\";\nimport { ThemeToggle } from \"@/components/ThemeToggle\";\nimport { LanguageSelector } from \"@/components/LanguageSelector\";\nimport { UserProfile } from \"@/components/UserProfile\";\nimport { BottomNav } from \"@/components/BottomNav\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { useEffect, useCallback } from \"react\";\nimport { isNative } from \"@/lib/config\";\nimport { useDeepLinks } from \"@/hooks/useDeepLinks\";\n\n// Pages\nimport Landing from \"@/pages/landing\";\nimport Home from \"@/pages/home\";\nimport BibleReader from \"@/pages/bible-reader\";\nimport Favorites from \"@/pages/favorites\";\nimport ReadingPlans from \"@/pages/reading-plans\";\nimport Progress from \"@/pages/progress\";\nimport Prayers from \"@/pages/prayers\";\nimport Podcasts from \"@/pages/podcasts\";\nimport Teacher from \"@/pages/teacher\";\nimport Community from \"@/pages/community\";\nimport Settings from \"@/pages/settings\";\nimport Profile from \"@/pages/profile\";\nimport Offline from \"@/pages/offline\";\nimport Donate from \"@/pages/donate\";\nimport Pricing from \"@/pages/pricing\";\nimport Help from \"@/pages/help\";\nimport About from \"@/pages/about\";\nimport Terms from \"@/pages/terms\";\nimport Privacy from \"@/pages/privacy\";\nimport Security from \"@/pages/security\";\nimport Contact from \"@/pages/contact\";\nimport Login from \"@/pages/login\";\nimport Register from \"@/pages/register\";\nimport ForgotPassword from \"@/pages/forgot-password\";\nimport ResetPassword from \"@/pages/reset-password\";\nimport AuthCallback from \"@/pages/auth-callback\";\nimport NotFound from \"@/pages/not-found\";\nimport Groups from \"@/pages/groups\";\nimport VersionCompare from \"@/pages/version-compare\";\nimport Achievements from \"@/pages/achievements\";\n\nimport { NPSDialog } from \"@/components/NPSDialog\";\nimport { InstallPrompt } from \"@/components/install-prompt/InstallPrompt\";\nimport { UpdatePopup } from \"@/components/UpdatePopup\";\n\nfunction Router() {\n  const { isAuthenticated, isLoading } = useAuth();\n  const { t } = useLanguage();\n  const [location, setLocation] = useLocation();\n\n  useEffect(() => {\n    const isProfileRoute = location === \"/perfil\" || location === \"/profile\" || location === \"/configurações\" || location === \"/settings\";\n    if (!isLoading && !isAuthenticated && isNative && (location === \"/\" || isProfileRoute)) {\n      const timer = setTimeout(() => {\n        if (!isAuthenticated) {\n          setLocation(\"/login\", { replace: true });\n        }\n      }, 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [isLoading, isAuthenticated, location, setLocation]);\n\n  useEffect(() => {\n    if (isAuthenticated && location === \"/login\") {\n      setLocation(\"/\", { replace: true });\n    }\n  }, [isAuthenticated, location, setLocation]);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen bg-background z-[100] fixed inset-0\">\n        <div className=\"text-center space-y-4\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent mx-auto\"></div>\n          <p className=\"text-muted-foreground font-medium\">{t.common.loading}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return (\n      <Switch>\n        <Route path=\"/\" component={isNative ? Login : Landing} />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/register\" component={Register} />\n        <Route path=\"/forgot-password\" component={ForgotPassword} />\n        <Route path=\"/reset-password\" component={ResetPassword} />\n        <Route path=\"/auth/callback\" component={AuthCallback} />\n        <Route path=\"/pricing\" component={Pricing} />\n        <Route path=\"/planos\" component={Pricing} />\n        <Route path=\"/progress\" component={Progress} />\n        <Route path=\"/progresso\" component={Progress} />\n        <Route path=\"/terms\" component={Terms} />\n        <Route path=\"/privacy\" component={Privacy} />\n        <Route path=\"/security\" component={Security} />\n        <Route path=\"/about\" component={About} />\n        <Route path=\"/contact\" component={Contact} />\n        <Route path=\"/groups\" component={Groups} />\n        <Route path=\"/help\" component={Help} />\n        <Route path=\"/bible\" component={BibleReader} />\n        <Route path=\"/biblia\" component={BibleReader} />\n        <Route path=\"/podcasts\" component={Podcasts} />\n        <Route path=\"/plans\" component={ReadingPlans} />\n        <Route path=\"/reading-plans\" component={ReadingPlans} />\n        <Route path=\"/donate\" component={Donate} />\n        <Route path=\"/doar\" component={Donate} />\n        <Route path=\"/perfil\" component={Profile} />\n        <Route path=\"/profile\" component={Profile} />\n        <Route component={NotFound} />\n      </Switch>\n    );\n  }\n\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/home\" component={Home} />\n      <Route path=\"/login\" component={Login} />\n      <Route path=\"/register\" component={Register} />\n      <Route path=\"/auth/callback\" component={AuthCallback} />\n      <Route path=\"/bible\" component={BibleReader} />\n      <Route path=\"/biblia\" component={BibleReader} />\n      <Route path=\"/bible-reader\" component={BibleReader} />\n      <Route path=\"/compare\" component={VersionCompare} />\n      <Route path=\"/comparar\" component={VersionCompare} />\n      <Route path=\"/favorites\" component={Favorites} />\n      <Route path=\"/plans\" component={ReadingPlans} />\n      <Route path=\"/progress\" component={Progress} />\n      <Route path=\"/prayers\" component={Prayers} />\n      <Route path=\"/podcasts\" component={Podcasts} />\n      <Route path=\"/teacher\" component={Teacher} />\n      <Route path=\"/groups\" component={Groups} />\n      <Route path=\"/community\" component={Community} />\n      <Route path=\"/achievements\" component={Achievements} />\n      <Route path=\"/conquistas\" component={Achievements} />\n      <Route path=\"/configurações\" component={Settings} />\n      <Route path=\"/settings\" component={Settings} />\n      <Route path=\"/perfil\" component={Profile} />\n      <Route path=\"/profile\" component={Profile} />\n      <Route path=\"/offline\" component={Offline} />\n      <Route path=\"/donate\" component={Donate} />\n      <Route path=\"/doar\" component={Donate} />\n      <Route path=\"/planos\" component={Pricing} />\n      <Route path=\"/pricing\" component={Pricing} />\n      <Route path=\"/help\" component={Help} />\n      <Route path=\"/about\" component={About} />\n      <Route path=\"/terms\" component={Terms} />\n      <Route path=\"/privacy\" component={Privacy} />\n      <Route path=\"/security\" component={Security} />\n      <Route path=\"/contact\" component={Contact} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction hexToHSL(hex: string): string {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  if (!result) return \"0 0% 0%\";\n  let r = parseInt(result[1], 16) / 255;\n  let g = parseInt(result[2], 16) / 255;\n  let b = parseInt(result[3], 16) / 255;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  let h = 0;\n  let s = 0;\n  const l = (max + min) / 2;\n  if (max !== min) {\n    const d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;\n      case g: h = ((b - r) / d + 2) / 6; break;\n      case b: h = ((r - g) / d + 4) / 6; break;\n    }\n  }\n  return `${Math.round(h * 360)} ${Math.round(s * 100)}% ${Math.round(l * 100)}%`;\n}\n\nfunction AppContent() {\n  const { isAuthenticated, isLoading, user } = useAuth();\n  const { t } = useLanguage();\n  \n  const handleAuthCallback = useCallback(() => {\n    queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n    window.location.href = '/';\n  }, []);\n  \n  useDeepLinks(handleAuthCallback);\n  \n  useEffect(() => {\n    if (user?.selectedTheme) {\n      const root = document.documentElement;\n      if (user.selectedTheme === \"custom\" && user.customTheme) {\n        const hsl = hexToHSL(user.customTheme.primaryColor);\n        root.style.setProperty(\"--primary\", hsl);\n        root.style.setProperty(\"--sidebar-primary\", hsl);\n        root.style.setProperty(\"--sidebar-accent-foreground\", hsl);\n        root.style.setProperty(\"--primary-foreground\", \"0 0% 100%\");\n      } else {\n        const predefinedThemes: Record<string, {primary: string, foreground: string}> = {\n          classico: { primary: \"#5711D9\", foreground: \"0 0% 100%\" },\n          noite_sagrada: { primary: \"#9D44C0\", foreground: \"0 0% 100%\" },\n          luz_do_dia: { primary: \"#00A0E3\", foreground: \"0 0% 100%\" },\n          terra_santa: { primary: \"#8B4513\", foreground: \"0 0% 100%\" },\n        };\n        const theme = predefinedThemes[user.selectedTheme] || predefinedThemes.classico;\n        const hsl = hexToHSL(theme.primary);\n        root.style.setProperty(\"--primary\", hsl);\n        root.style.setProperty(\"--sidebar-primary\", hsl);\n        root.style.setProperty(\"--sidebar-accent-foreground\", hsl);\n        root.style.setProperty(\"--primary-foreground\", theme.foreground);\n      }\n    }\n  }, [user?.selectedTheme, user?.customTheme]);\n  \n  const sidebarStyle = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">{t.common.loading}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (isAuthenticated) {\n    return (\n      <SidebarProvider style={sidebarStyle as React.CSSProperties}>\n        <div className=\"flex h-screen w-full\">\n          <AppSidebar />\n          <div className=\"flex flex-col flex-1 overflow-hidden\">\n            <header className=\"flex items-center justify-between gap-2 p-4 border-b bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-sm shrink-0 sticky top-0 z-50\">\n              <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n              <div className=\"flex items-center gap-3\">\n                <LanguageSelector />\n                <ThemeToggle />\n                <UserProfile />\n              </div>\n            </header>\n            <main className=\"flex-1 overflow-y-auto pb-16 md:pb-0 transition-opacity duration-200 ease-in-out\">\n              <Router />\n            </main>\n            <BottomNav />\n          </div>\n        </div>\n      </SidebarProvider>\n    );\n  }\n\n  return <Router />;\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider>\n        <LanguageProvider>\n          <OfflineProvider>\n            <TooltipProvider>\n              <AppContent />\n              <InstallPrompt />\n              <NPSDialog />\n              <UpdatePopup />\n              <Toaster />\n            </TooltipProvider>\n          </OfflineProvider>\n        </LanguageProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":11611,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"server/db.ts":{"content":"// Database connection configuration\nimport { Pool } from 'pg';\nimport { drizzle } from 'drizzle-orm/node-postgres';\nimport * as schema from \"@shared/schema\";\n\nfunction getDatabaseUrl(): string {\n  // Use SUPABASE_DATABASE_URL only\n  if (process.env.SUPABASE_DATABASE_URL && process.env.SUPABASE_DATABASE_URL.startsWith('postgresql://')) {\n    console.log(\"[Database] Using Supabase database\");\n    return process.env.SUPABASE_DATABASE_URL;\n  }\n\n  throw new Error(\n    \"SUPABASE_DATABASE_URL environment variable is required\",\n  );\n}\n\nconst databaseUrl = getDatabaseUrl();\nexport const pool = new Pool({ connectionString: databaseUrl });\nexport const db = drizzle({ client: pool, schema });\n","path":null,"size_bytes":691,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\nimport { supabase } from \"./supabase\";\nimport { getApiUrl } from \"./config\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    let errorMessage = `${res.status}: ${text}`;\n    try {\n      const json = JSON.parse(text);\n      if (json.message) {\n        errorMessage = json.message;\n      }\n    } catch (e) {\n      // Not JSON, use raw text\n    }\n    throw new Error(errorMessage);\n  }\n}\n\nexport async function getAuthHeaders(): Promise<Record<string, string>> {\n  const { data: { session } } = await supabase.auth.getSession();\n  if (session?.access_token) {\n    return { Authorization: `Bearer ${session.access_token}` };\n  }\n  return {};\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const authHeaders = await getAuthHeaders();\n  const fullUrl = getApiUrl(url);\n  \n  const res = await fetch(fullUrl, {\n    method,\n    headers: {\n      ...authHeaders,\n      ...(data ? { \"Content-Type\": \"application/json\" } : {}),\n    },\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const authHeaders = await getAuthHeaders();\n    const url = queryKey.join(\"/\") as string;\n    const fullUrl = getApiUrl(url);\n    \n    const res = await fetch(fullUrl, {\n      credentials: \"include\",\n      headers: authHeaders,\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: 1000 * 60 * 5, // 5 minutes for fresh data\n      gcTime: 1000 * 60 * 30, // 30 minutes cache retention\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":2290,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3021,"size_tokens":null},"client/src/pages/reading-plans.tsx":{"content":"import { useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { \n  Calendar, \n  BookOpen, \n  Plus, \n  Check,\n  Clock,\n  TrendingUp,\n  Loader2,\n  Trophy,\n  Target,\n  Sparkles\n} from \"lucide-react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { type ReadingPlan, type ReadingPlanTemplate } from \"@shared/schema\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { getBookName } from \"@/lib/i18n\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nconst BIBLE_VERSIONS = [\"nvi\", \"acf\", \"arc\", \"ra\"];\nconst BIBLE_BOOKS = [\n  \"Gênesis\", \"Êxodo\", \"Levítico\", \"Números\", \"Deuteronômio\", \"Josué\", \"Juízes\", \"Rute\",\n  \"1 Samuel\", \"2 Samuel\", \"1 Reis\", \"2 Reis\", \"1 Crônicas\", \"2 Crônicas\", \"Esdras\", \"Neemias\",\n  \"Ester\", \"Jó\", \"Salmos\", \"Provérbios\", \"Eclesiastes\", \"Cantares\", \"Isaías\", \"Jeremias\",\n  \"Lamentações\", \"Ezequiel\", \"Daniel\", \"Oséias\", \"Joel\", \"Amós\", \"Obadias\", \"Jonas\",\n  \"Miquéias\", \"Naum\", \"Habacuque\", \"Sofonias\", \"Ageu\", \"Zacarias\", \"Malaquias\",\n  \"Mateus\", \"Marcos\", \"Lucas\", \"João\", \"Atos\", \"Romanos\", \"1 Coríntios\", \"2 Coríntios\",\n  \"Gálatas\", \"Efésios\", \"Filipenses\", \"Colossenses\", \"1 Tessalonicenses\", \"2 Tessalonicenses\",\n  \"1 Timóteo\", \"2 Timóteo\", \"Tito\", \"Filemom\", \"Hebreus\", \"Tiago\", \"1 Pedro\", \"2 Pedro\",\n  \"1 João\", \"2 João\", \"3 João\", \"Judas\", \"Apocalipse\"\n];\n\nexport default function ReadingPlans() {\n  const { toast } = useToast();\n  const { language, t } = useLanguage();\n  const [isTemplatesDialogOpen, setIsTemplatesDialogOpen] = useState(false);\n  const [selectedTemplate, setSelectedTemplate] = useState<ReadingPlanTemplate | null>(null);\n  \n  // Custom plan state\n  const [customVersion, setCustomVersion] = useState(\"nvi\");\n  const [customBook, setCustomBook] = useState(\"\");\n  const [customStartChapter, setCustomStartChapter] = useState(\"\");\n  const [customEndChapter, setCustomEndChapter] = useState(\"\");\n  const [customVerses, setCustomVerses] = useState(\"\");\n  const [customTitle, setCustomTitle] = useState(\"\");\n  const [activeTab, setActiveTab] = useState(\"templates\");\n\n  const { data: plans = [], isLoading: plansLoading } = useQuery<ReadingPlan[]>({\n    queryKey: [\"/api/reading-plans\"],\n    retry: 2,\n  });\n\n  const { data: templates = [], isLoading: templatesLoading } = useQuery<ReadingPlanTemplate[]>({\n    queryKey: [\"/api/reading-plan-templates\"],\n    retry: 2,\n  });\n\n  const createFromTemplateMutation = useMutation({\n    mutationFn: async (templateId: string) => {\n      return await apiRequest(\"POST\", \"/api/reading-plans/from-template\", { templateId });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/reading-plans\"] });\n      setIsTemplatesDialogOpen(false);\n      setSelectedTemplate(null);\n      toast({\n        title: t.plans.dayCompleted,\n        description: t.plans.dayCompleted,\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: t.common.error,\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const createCustomPlanMutation = useMutation({\n    mutationFn: async () => {\n      return await apiRequest(\"POST\", \"/api/reading-plans/custom\", {\n        version: customVersion,\n        book: customBook,\n        startChapter: customStartChapter,\n        endChapter: customEndChapter,\n        verses: customVerses || undefined,\n        title: customTitle\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/reading-plans\"] });\n      setIsTemplatesDialogOpen(false);\n      setCustomVersion(\"nvi\");\n      setCustomBook(\"\");\n      setCustomStartChapter(\"\");\n      setCustomEndChapter(\"\");\n      setCustomVerses(\"\");\n      setCustomTitle(\"\");\n      setActiveTab(\"templates\");\n      toast({\n        title: \"Plano criado!\",\n        description: \"Seu plano de leitura customizado foi criado com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: t.common.error,\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const completeDayMutation = useMutation({\n    mutationFn: async ({ planId, day }: { planId: string; day: number }) => {\n      return await apiRequest(\"PUT\", `/api/reading-plans/${planId}/complete-day`, { day });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/reading-plans\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/stats/gamification\"] });\n      toast({\n        title: t.plans.dayComplete,\n        description: t.plans.youEarnedXP.replace('{xp}', '10'),\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: t.plans.errorMarkingProgress,\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const activePlans = plans.filter(p => !p.isCompleted);\n  const completedPlans = plans.filter(p => p.isCompleted);\n\n  // Show templates loading if no plans and templates are loading\n  const showTemplatesOnEmpty = activePlans.length === 0 && completedPlans.length === 0 && !templatesLoading && templates.length > 0;\n\n  const { isAuthenticated } = useAuth();\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen bg-background p-6 text-center space-y-6\">\n        <div className=\"h-24 w-24 rounded-3xl bg-primary/10 flex items-center justify-center\">\n          <Calendar className=\"h-12 w-12 text-primary\" />\n        </div>\n        <div className=\"space-y-2\">\n          <h1 className=\"text-2xl font-bold tracking-tight\">Planos de Leitura</h1>\n          <p className=\"text-muted-foreground max-w-sm\">\n            Para gerenciar seus planos de leitura e progresso, você precisa estar conectado.\n          </p>\n        </div>\n        <div className=\"flex flex-col gap-3 w-full max-w-xs\">\n          <Button onClick={() => window.location.href = \"/login\"} className=\"w-full h-12 rounded-xl text-lg font-bold\">\n            Entrar Agora\n          </Button>\n          <Button variant=\"outline\" onClick={() => window.location.href = \"/\"} className=\"w-full h-12 rounded-xl font-bold\">\n            Voltar ao Início\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  if (plansLoading && activePlans.length === 0 && completedPlans.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center space-y-3\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary mx-auto\" />\n          <p className=\"text-sm text-muted-foreground\">{t.common.loading}</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"max-w-7xl mx-auto px-6 sm:px-8 py-6 sm:py-8 relative z-10\">\n        <motion.div \n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center space-y-2 mb-12\"\n        >\n          <p className=\"text-[10px] font-semibold text-primary uppercase tracking-[0.2em]\">LEITURA BÍBLICA</p>\n          <h1 className=\"font-display text-xl sm:text-2xl font-bold text-foreground\" data-testid=\"text-page-title\">\n            {t.plans.title}\n          </h1>\n          <p className=\"text-sm text-muted-foreground\">\n            {t.plans.subtitle}\n          </p>\n        </motion.div>\n        \n        <div className=\"flex justify-center mb-8\">\n          <Dialog open={isTemplatesDialogOpen} onOpenChange={setIsTemplatesDialogOpen}>\n            <DialogTrigger asChild>\n              <Button size=\"lg\" data-testid=\"button-create-plan\" className=\"whitespace-nowrap rounded-2xl shadow-md hover-elevate\">\n                <Plus className=\"h-5 w-5 mr-2\" />\n                {t.plans.startPlan}\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto rounded-3xl border-0 glass\">\n              <DialogHeader>\n                <DialogTitle className=\"text-2xl font-bold\">Criar Plano de Leitura</DialogTitle>\n                <DialogDescription className=\"text-base\">\n                  Escolha um modelo pré-definido ou crie um plano customizado\n                </DialogDescription>\n              </DialogHeader>\n\n              <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full mt-6\">\n                <TabsList className=\"grid w-full grid-cols-2 p-1 bg-muted/50 rounded-2xl\">\n                  <TabsTrigger value=\"templates\" className=\"rounded-xl data-[state=active]:bg-background data-[state=active]:shadow-sm font-semibold\">Modelos</TabsTrigger>\n                  <TabsTrigger value=\"custom\" className=\"rounded-xl data-[state=active]:bg-background data-[state=active]:shadow-sm font-semibold\">Customizado</TabsTrigger>\n                </TabsList>\n\n                <TabsContent value=\"templates\" className=\"space-y-6 mt-6\">\n              {templatesLoading ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n                </div>\n              ) : (\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  {templates.map((template, idx) => (\n                    <motion.div\n                      key={template.id}\n                      initial={{ opacity: 0, scale: 0.95 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      transition={{ delay: idx * 0.05 }}\n                    >\n                      <Card \n                        className={`cursor-pointer transition-all hover-elevate rounded-3xl border-none shadow-md bg-card/50 backdrop-blur-sm ${\n                          selectedTemplate?.id === template.id ? 'ring-2 ring-primary bg-primary/5' : ''\n                        }`}\n                        onClick={() => setSelectedTemplate(template)}\n                        data-testid={`card-template-${template.id}`}\n                      >\n                        <CardHeader>\n                          <CardTitle className=\"text-lg truncate\">{template.name}</CardTitle>\n                          <CardDescription className=\"text-sm line-clamp-2\">\n                            {template.description}\n                          </CardDescription>\n                        </CardHeader>\n                        <CardContent>\n                          <div className=\"flex flex-wrap gap-2\">\n                            <Badge variant=\"secondary\" className=\"rounded-full px-3\">\n                              <Clock className=\"h-3 w-3 mr-1\" />\n                              {template.duration} {t.plans.days}\n                            </Badge>\n                            {template.category && (\n                              <Badge variant=\"outline\" className=\"rounded-full px-3\">\n                                {template.category}\n                              </Badge>\n                            )}\n                          </div>\n                        </CardContent>\n                      </Card>\n                    </motion.div>\n                  ))}\n                </div>\n              )}\n                </TabsContent>\n\n                <TabsContent value=\"custom\" className=\"space-y-6 mt-6\">\n                  <div className=\"space-y-6 bg-muted/30 p-6 rounded-3xl\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"version\" className=\"text-sm font-medium\">Versão</Label>\n                        <Select value={customVersion} onValueChange={setCustomVersion}>\n                          <SelectTrigger id=\"version\" data-testid=\"select-version\" className=\"rounded-xl bg-background\">\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent className=\"rounded-xl\">\n                            {BIBLE_VERSIONS.map(v => (\n                              <SelectItem key={v} value={v}>{v.toUpperCase()}</SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"book\" className=\"text-sm font-medium\">Livro</Label>\n                        <Select value={customBook} onValueChange={setCustomBook}>\n                          <SelectTrigger id=\"book\" data-testid=\"select-book\" className=\"rounded-xl bg-background\">\n                            <SelectValue placeholder=\"Escolha um livro\" />\n                          </SelectTrigger>\n                          <SelectContent className=\"max-h-60 rounded-xl\">\n                            {BIBLE_BOOKS.map(book => (\n                              <SelectItem key={book} value={book}>{book}</SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"start\" className=\"text-sm font-medium\">Capítulo Inicial</Label>\n                        <Input \n                          id=\"start\" \n                          type=\"number\" \n                          min=\"1\" \n                          value={customStartChapter}\n                          onChange={(e) => setCustomStartChapter(e.target.value)}\n                          placeholder=\"Ex: 1\"\n                          className=\"rounded-xl bg-background\"\n                          data-testid=\"input-start-chapter\"\n                        />\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"end\" className=\"text-sm font-medium\">Capítulo Final</Label>\n                        <Input \n                          id=\"end\" \n                          type=\"number\" \n                          min=\"1\" \n                          value={customEndChapter}\n                          onChange={(e) => setCustomEndChapter(e.target.value)}\n                          placeholder=\"Ex: 5\"\n                          className=\"rounded-xl bg-background\"\n                          data-testid=\"input-end-chapter\"\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"verses\" className=\"text-sm font-medium\">Versículos (opcional)</Label>\n                      <Input \n                        id=\"verses\" \n                        value={customVerses}\n                        onChange={(e) => setCustomVerses(e.target.value)}\n                        placeholder=\"Ex: 1-10 ou deixe em branco para todos\"\n                        className=\"rounded-xl bg-background\"\n                        data-testid=\"input-verses\"\n                      />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"title\" className=\"text-sm font-medium\">Título do Plano (opcional)</Label>\n                      <Input \n                        id=\"title\" \n                        value={customTitle}\n                        onChange={(e) => setCustomTitle(e.target.value)}\n                        placeholder=\"Ex: Minha Leitura de Mateus\"\n                        className=\"rounded-xl bg-background\"\n                        data-testid=\"input-plan-title\"\n                      />\n                    </div>\n                  </div>\n                </TabsContent>\n              </Tabs>\n              \n              <DialogFooter className=\"mt-8 gap-3 sm:gap-0\">\n                <Button \n                  variant=\"outline\" \n                  onClick={() => setIsTemplatesDialogOpen(false)}\n                  data-testid=\"button-cancel\"\n                  className=\"rounded-xl\"\n                >\n                  {t.common.cancel}\n                </Button>\n                {activeTab === \"templates\" ? (\n                  <Button \n                    disabled={!selectedTemplate || createFromTemplateMutation.isPending}\n                    onClick={() => selectedTemplate && createFromTemplateMutation.mutate(selectedTemplate.id)}\n                    data-testid=\"button-start-plan\"\n                    className=\"rounded-xl shadow-md\"\n                  >\n                    {createFromTemplateMutation.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n                    {createFromTemplateMutation.isPending ? t.plans.starting : t.plans.startPlan}\n                  </Button>\n                ) : (\n                  <Button\n                    disabled={!customBook || !customStartChapter || !customEndChapter || createCustomPlanMutation.isPending}\n                    onClick={() => createCustomPlanMutation.mutate()}\n                    data-testid=\"button-create-custom\"\n                    className=\"rounded-xl shadow-md\"\n                  >\n                    {createCustomPlanMutation.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n                    {createCustomPlanMutation.isPending ? \"Criando...\" : \"Criar Plano\"}\n                  </Button>\n                )}\n              </DialogFooter>\n            </DialogContent>\n          </Dialog>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-6 mb-12\">\n          {[\n            { title: t.plans.activePlans, val: activePlans.length, icon: BookOpen, tid: \"text-active-plans\", color: \"text-primary\" },\n            { title: t.plans.completedPlans, val: completedPlans.length, icon: Check, tid: \"text-completed-plans\", color: \"text-green-500\" },\n            { title: t.plans.currentDay, val: activePlans[0]?.currentDay ?? 0, icon: Calendar, tid: \"text-current-day\", color: \"text-amber-500\" }\n          ].map((stat, idx) => (\n            <motion.div\n              key={stat.title}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.1 + idx * 0.1 }}\n            >\n              <Card className=\"rounded-3xl border-none glass-premium hover-premium group transition-all\">\n                <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n                  <CardTitle className=\"text-sm font-semibold uppercase tracking-wider text-muted-foreground\">{stat.title}</CardTitle>\n                  <stat.icon className={`h-5 w-5 ${stat.color}`} />\n                </CardHeader>\n                <CardContent>\n                  <div className={`text-4xl font-bold ${stat.color}`} data-testid={stat.tid}>\n                    {stat.val}\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          ))}\n        </div>\n\n        <section className=\"mb-16\">\n          <div className=\"bg-primary/5 p-6 rounded-[2rem] border border-primary/10 mb-12\">\n            <h2 className=\"text-xl font-bold mb-3 flex items-center gap-2\">\n              <Sparkles className=\"h-5 w-5 text-primary\" />\n              Como funcionam os planos?\n            </h2>\n            <p className=\"text-muted-foreground leading-relaxed\">\n              Os planos de leitura ajudam você a manter uma constância no estudo bíblico. \n              Ao iniciar um plano, você recebe leituras diárias organizadas. Cada dia concluído \n              rende <strong>10 XP</strong> para sua evolução no aplicativo e mantém sua <strong>ofensiva (streak)</strong> ativa. \n              Você pode escolher modelos prontos ou criar seu próprio roteiro personalizado.\n            </p>\n          </div>\n\n          <h2 className=\"font-display text-2xl font-bold mb-6 flex items-center gap-2\">\n            <TrendingUp className=\"h-6 w-6 text-primary\" />\n            {t.plans.activePlans}\n          </h2>\n          \n          {activePlans.length === 0 ? (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.4 }}\n            >\n              <Card className=\"rounded-3xl border-none border-dashed bg-muted/30 backdrop-blur-sm\">\n                <CardContent className=\"flex flex-col items-center justify-center py-16 text-center\">\n                  <div className=\"flex h-20 w-20 items-center justify-center rounded-3xl bg-background shadow-inner mb-6\">\n                    <BookOpen className=\"h-10 w-10 text-muted-foreground\" />\n                  </div>\n                  <h3 className=\"font-bold text-xl mb-3\">{t.plans.noActivePlans}</h3>\n                  <p className=\"text-muted-foreground mb-8 max-w-sm\">\n                    {t.plans.choosePlanDescription}\n                  </p>\n                  <Button onClick={() => setIsTemplatesDialogOpen(true)} data-testid=\"button-start-first-plan\" size=\"lg\" className=\"rounded-2xl px-8\">\n                    <Plus className=\"h-5 w-5 mr-2\" />\n                    {t.plans.startFirstPlan}\n                  </Button>\n                </CardContent>\n              </Card>\n            </motion.div>\n          ) : (\n            <div className=\"grid md:grid-cols-2 gap-8\">\n              {activePlans.map((plan, planIdx) => {\n                const currentDay = plan.currentDay ?? 1;\n                const progress = (currentDay / plan.totalDays) * 100;\n                const schedule = plan.schedule as Array<{ day: number; readings: any[]; isCompleted: boolean }>;\n                const completedDays = schedule.filter(s => s.isCompleted).length;\n                \n                return (\n                  <motion.div\n                    key={plan.id}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    transition={{ delay: 0.5 + planIdx * 0.1 }}\n                  >\n                    <Card className=\"rounded-[2.5rem] border-none glass-premium hover-premium overflow-hidden transition-all\" data-testid={`card-plan-${plan.id}`}>\n                      <CardHeader className=\"pb-4\">\n                        <div className=\"flex items-start justify-between gap-4\">\n                          <div className=\"flex-1\">\n                            <CardTitle className=\"text-xl sm:text-2xl mb-2\">{plan.title}</CardTitle>\n                            <CardDescription className=\"text-sm line-clamp-2\">\n                              {plan.description}\n                            </CardDescription>\n                          </div>\n                          <Badge variant=\"secondary\" className=\"rounded-full px-4 py-1 bg-primary/10 text-primary border-none text-sm font-semibold\">\n                            <Target className=\"h-3 w-3 mr-1.5\" />\n                            {t.plans.day} {currentDay}/{plan.totalDays}\n                          </Badge>\n                        </div>\n                      </CardHeader>\n                      <CardContent className=\"space-y-6\">\n                        <div className=\"bg-muted/30 p-4 rounded-[1.5rem]\">\n                          <div className=\"flex justify-between text-sm font-bold mb-3\">\n                            <span className=\"text-muted-foreground\">{t.plans.progress}</span>\n                            <span className=\"text-primary\">{Math.round(progress)}%</span>\n                          </div>\n                          <Progress value={progress} className=\"h-3 rounded-full\" />\n                          <div className=\"flex items-center justify-between text-xs mt-3 text-muted-foreground\">\n                            <span>{completedDays} dias concluídos</span>\n                            <span>{plan.totalDays - completedDays} restantes</span>\n                          </div>\n                        </div>\n                        \n                        {schedule[currentDay - 1] && !schedule[currentDay - 1].isCompleted && (\n                          <div className=\"pt-4 border-t border-border/50\">\n                            <p className=\"text-sm font-bold text-muted-foreground uppercase tracking-wider mb-4\">{t.plans.todayReading}</p>\n                            <div className=\"grid gap-2\">\n                              {schedule[currentDay - 1].readings.map((reading: any, idx: number) => (\n                                <div key={idx} className=\"flex items-center gap-3 p-3 rounded-2xl bg-muted/20 border border-border/30\">\n                                  <div className=\"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-xs\">\n                                    {idx + 1}\n                                  </div>\n                                  <p className=\"text-base font-semibold\">\n                                    {getBookName(reading.book, language)} {reading.chapter}\n                                    {reading.verses ? `:${reading.verses}` : ''}\n                                  </p>\n                                </div>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n                      </CardContent>\n                      <CardFooter className=\"pt-2 pb-6 px-6\">\n                        <Button \n                          size=\"lg\"\n                          className=\"w-full rounded-2xl h-12 text-base font-bold shadow-lg shadow-primary/20\"\n                          onClick={() => completeDayMutation.mutate({ planId: plan.id, day: currentDay })}\n                          disabled={\n                            completeDayMutation.isPending || \n                            (schedule[currentDay - 1]?.isCompleted ?? false)\n                          }\n                          data-testid={`button-complete-day-${plan.id}`}\n                        >\n                          {completeDayMutation.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n                          {schedule[currentDay - 1]?.isCompleted ? (\n                            <>\n                              <Check className=\"h-5 w-5 mr-2\" />\n                              {t.plans.dayCompleted}\n                            </>\n                          ) : (\n                            t.plans.markDayComplete\n                          )}\n                        </Button>\n                      </CardFooter>\n                    </Card>\n                  </motion.div>\n                );\n              })}\n            </div>\n          )}\n        </section>\n\n        {completedPlans.length > 0 && (\n          <section>\n            <h2 className=\"font-display text-2xl font-bold mb-6 flex items-center gap-2\">\n              <Trophy className=\"h-6 w-6 text-amber-500\" />\n              {t.plans.completedPlans}\n            </h2>\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              {completedPlans.map((plan, idx) => (\n                <motion.div\n                  key={plan.id}\n                  initial={{ opacity: 0, scale: 0.98 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  transition={{ delay: 0.6 + idx * 0.1 }}\n                >\n                  <Card key={plan.id} className=\"rounded-[2rem] border-none bg-muted/20 backdrop-blur-sm shadow-sm opacity-80\" data-testid={`card-completed-plan-${plan.id}`}>\n                    <CardHeader>\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <CardTitle className=\"text-lg mb-1\">{plan.title}</CardTitle>\n                          <CardDescription className=\"text-sm line-clamp-1\">\n                            {plan.description}\n                          </CardDescription>\n                        </div>\n                        <Badge variant=\"default\" className=\"rounded-full px-3 bg-amber-500\">\n                          <Trophy className=\"h-3 w-3 mr-1\" />\n                          {t.plans.completed}\n                        </Badge>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-muted-foreground\">\n                          Concluído em {new Date(plan.completedAt!).toLocaleDateString(language)}\n                        </span>\n                        <div className=\"h-8 w-8 rounded-full bg-green-500/10 flex items-center justify-center\">\n                          <Check className=\"h-5 w-5 text-green-500\" />\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                </motion.div>\n              ))}\n            </div>\n          </section>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":29840,"size_tokens":null},"server/storage.ts":{"content":"// Database storage implementation\nimport { \n  users,\n  readingPlanTemplates,\n  readingPlans,\n  achievements,\n  userAchievements,\n  prayers,\n  notes,\n  highlights,\n  bookmarks,\n  bibleSettings,\n  podcasts,\n  podcastSubscriptions,\n  lessons,\n  lessonProgress,\n  communityPosts,\n  postLikes,\n  postComments,\n  type User,\n  type UpsertUser,\n  type InsertReadingPlanTemplate,\n  type ReadingPlanTemplate,\n  type InsertReadingPlan,\n  type ReadingPlan,\n  type InsertAchievement,\n  type Achievement,\n  type InsertUserAchievement,\n  type UserAchievement,\n  type InsertPrayer,\n  type Prayer,\n  type InsertNote,\n  type Note,\n  type InsertHighlight,\n  type Highlight,\n  type InsertBookmark,\n  type Bookmark,\n  type InsertBibleSettings,\n  type BibleSettings,\n  type InsertPodcast,\n  type Podcast,\n  type InsertPodcastSubscription,\n  type PodcastSubscription,\n  type InsertLesson,\n  type Lesson,\n  type InsertLessonProgress,\n  type LessonProgress,\n  type InsertCommunityPost,\n  type CommunityPost,\n  type InsertPostComment,\n  type PostComment,\n  offlineContent,\n  type InsertOfflineContent,\n  type OfflineContent,\n  verseCommentaries,\n  type InsertVerseCommentary,\n  type VerseCommentary,\n  dailyVerses,\n  type InsertDailyVerse,\n  type DailyVerse,\n  donations,\n  type InsertDonation,\n  type Donation,\n  emailOtp,\n  feedback,\n  type InsertFeedback,\n  type Feedback,\n  sharedLinks,\n  type InsertSharedLink,\n  type SharedLink,\n  groupMeetings,\n  type GroupMeeting,\n  type InsertGroupMeeting,\n  groupResources,\n  type GroupResource,\n  type InsertGroupResource,\n} from \"@shared/schema\";\n\nimport { db } from \"./db\";\nimport { eq, desc, and, sql } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // User operations\n  getUser(id: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  createUserWithPassword(data: { email: string; passwordHash: string; firstName: string; lastName: string; role: string }): Promise<User>;\n  updateUserLastLogin(userId: string): Promise<void>;\n  updateUserRole(userId: string, role: string): Promise<User>;\n  updateUserStats(userId: string, data: { experiencePoints?: number; readingStreak?: number; level?: string; lastReadDate?: Date }): Promise<User>;\n  updateUserTheme(userId: string, data: { selectedTheme?: string; customTheme?: any }): Promise<User>;\n  updateUserImage(userId: string, imageData: string): Promise<User>;\n  updateUserPassword(userId: string, passwordHash: string): Promise<User>;\n  trackAISpending(userId: string, cost: number): Promise<{ user: User; withinBudget: boolean; monthlyRemaining: number; yearlyRemaining: number }>;\n  \n  // Gamification (transactional)\n  processGamificationRewards(userId: string, xpEarned: number, newStreak: number, lastReadDate: Date): Promise<{ user: User; unlockedAchievements: UserAchievement[] }>;\n  \n  // Reading Plan Templates\n  getReadingPlanTemplates(): Promise<ReadingPlanTemplate[]>;\n  getReadingPlanTemplate(id: string): Promise<ReadingPlanTemplate | undefined>;\n  createReadingPlanTemplate(template: InsertReadingPlanTemplate): Promise<ReadingPlanTemplate>;\n  \n  // User Reading Plans\n  getReadingPlans(userId: string): Promise<ReadingPlan[]>;\n  getReadingPlan(id: string): Promise<ReadingPlan | undefined>;\n  getCurrentReadingPlan(userId: string): Promise<ReadingPlan | undefined>;\n  createReadingPlan(plan: InsertReadingPlan): Promise<ReadingPlan>;\n  updateReadingPlan(id: string, userId: string, data: Partial<ReadingPlan>): Promise<ReadingPlan | null>;\n  markDayCompleted(planId: string, day: number, userId: string): Promise<ReadingPlan>;\n  deleteReadingPlan(id: string, userId: string): Promise<boolean>;\n  \n  // Achievements\n  getAchievements(): Promise<Achievement[]>;\n  createAchievement(achievement: InsertAchievement): Promise<Achievement>;\n  getUserAchievements(userId: string): Promise<(UserAchievement & { achievement: Achievement })[]>;\n  unlockAchievement(userId: string, achievementId: string): Promise<UserAchievement>;\n  updateAchievementProgress(userId: string, achievementId: string, progress: number): Promise<UserAchievement>;\n  \n  // Prayers\n  getPrayers(userId: string): Promise<Prayer[]>;\n  getPrayer(id: string, userId: string): Promise<Prayer | undefined>;\n  createPrayer(prayer: InsertPrayer): Promise<Prayer>;\n  updatePrayer(id: string, userId: string, data: Partial<Prayer>): Promise<Prayer | null>;\n  deletePrayer(id: string, userId: string): Promise<void>;\n  \n  // Notes\n  getNotes(userId: string): Promise<Note[]>;\n  createNote(note: InsertNote): Promise<Note>;\n  deleteNote(id: string, userId: string): Promise<void>;\n  \n  // Highlights\n  getHighlights(userId: string): Promise<Highlight[]>;\n  createHighlight(highlight: InsertHighlight): Promise<Highlight>;\n  deleteHighlight(id: string, userId: string): Promise<void>;\n  \n  // Bookmarks\n  getBookmarks(userId: string): Promise<Bookmark[]>;\n  createBookmark(bookmark: InsertBookmark): Promise<Bookmark>;\n  deleteBookmark(id: string, userId: string): Promise<void>;\n  \n  // Bible Settings\n  getBibleSettings(userId: string): Promise<BibleSettings | undefined>;\n  upsertBibleSettings(settings: InsertBibleSettings): Promise<BibleSettings>;\n  \n  // Podcasts\n  getPodcasts(): Promise<Podcast[]>;\n  getPodcast(id: string): Promise<Podcast | undefined>;\n  createPodcast(podcast: InsertPodcast): Promise<Podcast>;\n  updatePodcast(id: string, data: Partial<Podcast>): Promise<Podcast | null>;\n  deletePodcast(id: string): Promise<void>;\n  getUserPodcasts(userId: string): Promise<Podcast[]>;\n  getUserPodcastSubscriptions(userId: string): Promise<(PodcastSubscription & { podcast: Podcast })[]>;\n  subscribeToPodcast(subscription: InsertPodcastSubscription): Promise<PodcastSubscription>;\n  unsubscribeFromPodcast(userId: string, podcastId: string): Promise<void>;\n  \n  // Teacher/Lessons\n  getLessons(teacherId: string): Promise<Lesson[]>;\n  getLesson(id: string): Promise<Lesson | undefined>;\n  createLesson(lesson: InsertLesson): Promise<Lesson>;\n  updateLesson(id: string, teacherId: string, data: Partial<Lesson>): Promise<Lesson | null>;\n  deleteLesson(id: string, teacherId: string): Promise<boolean>;\n  getLessonProgress(lessonId: string): Promise<LessonProgress[]>;\n  createLessonProgress(progress: InsertLessonProgress): Promise<LessonProgress>;\n  \n  // Community\n  getCommunityPosts(limit?: number, userId?: string): Promise<(CommunityPost & { user: User; isLikedByCurrentUser?: boolean })[]>;\n  createCommunityPost(post: InsertCommunityPost): Promise<CommunityPost>;\n  likePost(postId: string, userId: string): Promise<void>;\n  unlikePost(postId: string, userId: string): Promise<void>;\n  addComment(comment: InsertPostComment): Promise<PostComment>;\n  \n  // Offline Content\n  getOfflineContent(userId: string): Promise<OfflineContent[]>;\n  getOfflineChapter(userId: string, book: string, chapter: number, version: string): Promise<OfflineContent | undefined>;\n  saveOfflineContent(content: InsertOfflineContent): Promise<OfflineContent>;\n  deleteOfflineContent(id: string, userId: string): Promise<void>;\n  deleteUserOfflineContent(userId: string): Promise<void>;\n  \n  // Verse Commentaries (with userId for user-isolation and global cache support)\n  getVerseCommentary(userId: string, book: string, chapter: number, verse: number, version: string, commentaryType: string): Promise<VerseCommentary | undefined>;\n  createVerseCommentary(commentary: InsertVerseCommentary): Promise<VerseCommentary>;\n  \n  // Daily Verse\n  getDailyVerseByDayOfYear(dayOfYear: number): Promise<DailyVerse | undefined>;\n  createDailyVerse(verse: InsertDailyVerse): Promise<DailyVerse>;\n  getRecentDailyVerses(days: number): Promise<DailyVerse[]>;\n  getAllDailyVerses(): Promise<DailyVerse[]>;\n  \n  // Donations\n  createDonation(donation: InsertDonation): Promise<Donation>;\n  getDonations(userId: string): Promise<Donation[]>;\n  getDonation(id: string): Promise<Donation | undefined>;\n  updateDonationStatus(id: string, status: string, stripePaymentIntentId?: string): Promise<Donation>;\n  \n  // Stats\n  getDashboardStats(userId: string): Promise<{ communityPosts: number }>;\n  \n  // Email OTP\n  createOTP(data: { email: string; code: string; expiresAt: Date }): Promise<any>;\n  getOTPByEmail(email: string): Promise<any | undefined>;\n  deleteOTPByEmail(email: string): Promise<void>;\n  verifyOTP(email: string, code: string): Promise<boolean>;\n  // Shared links\n  createSharedLink(link: InsertSharedLink): Promise<SharedLink>;\n  // Feedback\n  createFeedback(feedback: InsertFeedback): Promise<Feedback>;\n\n  // Group Meetings\n  getGroupMeetings(groupId: string): Promise<GroupMeeting[]>;\n  createGroupMeeting(meeting: InsertGroupMeeting): Promise<GroupMeeting>;\n  deleteGroupMeeting(id: string, userId: string): Promise<boolean>;\n\n  // Group Resources\n  getGroupResources(groupId: string): Promise<GroupResource[]>;\n  createGroupResource(resource: InsertGroupResource): Promise<GroupResource>;\n  deleteGroupResource(id: string, userId: string): Promise<boolean>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // User operations\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.email, email));\n    return user;\n  }\n\n  async createUserWithPassword(data: { email: string; passwordHash: string; firstName: string; lastName: string; role: string }): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values({\n        email: data.email,\n        passwordHash: data.passwordHash,\n        firstName: data.firstName,\n        lastName: data.lastName,\n        role: data.role,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      })\n      .returning();\n    return user;\n  }\n\n  async updateUserLastLogin(userId: string): Promise<void> {\n    await db\n      .update(users)\n      .set({ lastLogin: new Date(), updatedAt: new Date() })\n      .where(eq(users.id, userId));\n  }\n\n  async updateUserRole(userId: string, role: string): Promise<User> {\n    const [user] = await db\n      .update(users)\n      .set({ role, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.email,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return user;\n  }\n\n  async updateUserStats(userId: string, data: { experiencePoints?: number; readingStreak?: number; level?: string; lastReadDate?: Date }): Promise<User> {\n    const [user] = await db\n      .update(users)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async updateUserTheme(userId: string, data: { selectedTheme?: string; customTheme?: any; firstName?: string; lastName?: string }): Promise<User> {\n    const [user] = await db\n      .update(users)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async updateUserImage(userId: string, imageData: string): Promise<User> {\n    const [user] = await db\n      .update(users)\n      .set({ profileImageUrl: imageData, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async updateUserPassword(userId: string, passwordHash: string): Promise<User> {\n    const [user] = await db\n      .update(users)\n      .set({ passwordHash, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async trackAISpending(userId: string, cost: number): Promise<{ user: User; withinBudget: boolean; monthlyRemaining: number; yearlyRemaining: number }> {\n    const [user] = await db.select().from(users).where(eq(users.id, userId));\n    if (!user) throw new Error(\"User not found\");\n\n    const now = new Date();\n    \n    // Reset monthly budget if needed\n    let aiSpendMonth = user.aiSpendMonth ? Number(user.aiSpendMonth) : 0;\n    let aiMonthlyBudgetLimit = user.aiMonthlyBudgetLimit ? Number(user.aiMonthlyBudgetLimit) : 0;\n    let aiSpendMonthResetAt = user.aiSpendMonthResetAt;\n    \n    if (!aiSpendMonthResetAt || now > aiSpendMonthResetAt) {\n      aiSpendMonth = 0;\n      const nextMonth = new Date(now);\n      nextMonth.setMonth(nextMonth.getMonth() + 1);\n      aiSpendMonthResetAt = nextMonth;\n    }\n\n    // Reset yearly budget if needed\n    let aiSpendYear = user.aiSpendYear ? Number(user.aiSpendYear) : 0;\n    let aiAnnualBudgetLimit = user.aiAnnualBudgetLimit ? Number(user.aiAnnualBudgetLimit) : 0;\n    let aiSpendYearResetAt = user.aiSpendYearResetAt;\n\n    if (!aiSpendYearResetAt || now > aiSpendYearResetAt) {\n      aiSpendYear = 0;\n      const nextYear = new Date(now);\n      nextYear.setFullYear(nextYear.getFullYear() + 1);\n      aiSpendYearResetAt = nextYear;\n    }\n\n    // Add cost\n    aiSpendMonth += cost;\n    aiSpendYear += cost;\n\n    // Update user with new spending\n    const [updatedUser] = await db\n      .update(users)\n      .set({\n        aiSpendMonth: aiSpendMonth.toString(),\n        aiSpendYear: aiSpendYear.toString(),\n        aiSpendMonthResetAt,\n        aiSpendYearResetAt,\n        updatedAt: new Date(),\n      })\n      .where(eq(users.id, userId))\n      .returning();\n\n    const monthlyRemaining = Math.max(0, aiMonthlyBudgetLimit - aiSpendMonth);\n    const yearlyRemaining = Math.max(0, aiAnnualBudgetLimit - aiSpendYear);\n    const withinBudget = aiSpendMonth <= aiMonthlyBudgetLimit && aiSpendYear <= aiAnnualBudgetLimit;\n\n    return { user: updatedUser, withinBudget, monthlyRemaining, yearlyRemaining };\n  }\n\n  async processGamificationRewards(\n    userId: string, \n    xpEarned: number, \n    newStreak: number, \n    lastReadDate: Date\n  ): Promise<{ user: User; unlockedAchievements: UserAchievement[] }> {\n    return await db.transaction(async (tx) => {\n      // 1. Get current user data\n      const [currentUser] = await tx.select().from(users).where(eq(users.id, userId));\n      if (!currentUser) {\n        throw new Error(\"User not found\");\n      }\n\n      // 2. Update user stats (XP, streak, lastReadDate) atomically\n      const newXP = (currentUser.experiencePoints || 0) + xpEarned;\n      const [updatedUser] = await tx\n        .update(users)\n        .set({\n          experiencePoints: newXP,\n          readingStreak: newStreak,\n          lastReadDate,\n          updatedAt: new Date(),\n        })\n        .where(eq(users.id, userId))\n        .returning();\n\n      // 3. Get all achievements and user's current achievements\n      const allAchievements = await tx.select().from(achievements);\n      const userAchs = await tx\n        .select()\n        .from(userAchievements)\n        .where(eq(userAchievements.userId, userId));\n\n      // 4. Check and unlock eligible achievements atomically\n      const newlyUnlocked: UserAchievement[] = [];\n      \n      for (const achievement of allAchievements) {\n        const isUnlocked = userAchs.some(\n          ua => ua.achievementId === achievement.id && ua.isUnlocked\n        );\n\n        if (!isUnlocked && achievement.category === \"streak\") {\n          let shouldUnlock = false;\n\n          if (typeof achievement.requirement === 'object' && achievement.requirement?.value) {\n            const requirementValue = achievement.requirement.value;\n            if (requirementValue === 7 && newStreak >= 7) {\n              shouldUnlock = true;\n            } else if (requirementValue === 30 && newStreak >= 30) {\n              shouldUnlock = true;\n            } else if (requirementValue === 100 && newStreak >= 100) {\n              shouldUnlock = true;\n            }\n          }\n\n          if (shouldUnlock) {\n            const existingUserAch = userAchs.find(ua => ua.achievementId === achievement.id);\n            \n            let unlocked: UserAchievement;\n            if (existingUserAch) {\n              const [updated] = await tx\n                .update(userAchievements)\n                .set({\n                  isUnlocked: true,\n                  unlockedAt: new Date(),\n                })\n                .where(eq(userAchievements.id, existingUserAch.id))\n                .returning();\n              unlocked = updated;\n            } else {\n              const [created] = await tx\n                .insert(userAchievements)\n                .values({\n                  userId,\n                  achievementId: achievement.id,\n                  isUnlocked: true,\n                  unlockedAt: new Date(),\n                  progress: 100,\n                })\n                .returning();\n              unlocked = created;\n            }\n            \n            newlyUnlocked.push(unlocked);\n          }\n        }\n      }\n\n      return { user: updatedUser, unlockedAchievements: newlyUnlocked };\n    });\n  }\n\n  // Reading Plan Templates\n  async getReadingPlanTemplates(): Promise<ReadingPlanTemplate[]> {\n    return await db\n      .select()\n      .from(readingPlanTemplates)\n      .orderBy(readingPlanTemplates.duration);\n  }\n\n  async getReadingPlanTemplate(id: string): Promise<ReadingPlanTemplate | undefined> {\n    const [template] = await db.select().from(readingPlanTemplates).where(eq(readingPlanTemplates.id, id));\n    return template;\n  }\n\n  async createReadingPlanTemplate(template: InsertReadingPlanTemplate): Promise<ReadingPlanTemplate> {\n    const created = await db.insert(readingPlanTemplates).values(template as any).returning();\n    return (Array.isArray(created) ? created[0] : created) as ReadingPlanTemplate;\n  }\n\n  // User Reading Plans\n  async getReadingPlans(userId: string): Promise<ReadingPlan[]> {\n    return await db\n      .select()\n      .from(readingPlans)\n      .where(eq(readingPlans.userId, userId))\n      .orderBy(desc(readingPlans.createdAt));\n  }\n\n  async getReadingPlan(id: string): Promise<ReadingPlan | undefined> {\n    const [plan] = await db.select().from(readingPlans).where(eq(readingPlans.id, id));\n    return plan;\n  }\n\n  async getCurrentReadingPlan(userId: string): Promise<ReadingPlan | undefined> {\n    const [plan] = await db\n      .select()\n      .from(readingPlans)\n      .where(and(\n        eq(readingPlans.userId, userId),\n        eq(readingPlans.isCompleted, false)\n      ))\n      .orderBy(desc(readingPlans.createdAt))\n      .limit(1);\n    return plan;\n  }\n\n  async createReadingPlan(plan: InsertReadingPlan): Promise<ReadingPlan> {\n    const created = await db.insert(readingPlans).values(plan as any).returning();\n    return (Array.isArray(created) ? created[0] : created) as ReadingPlan;\n  }\n\n  async updateReadingPlan(id: string, userId: string, data: Partial<ReadingPlan>): Promise<ReadingPlan | null> {\n    // Validar ownership\n    const existing = await this.getReadingPlan(id);\n    if (!existing || existing.userId !== userId) {\n      return null;\n    }\n    \n    const [updated] = await db\n      .update(readingPlans)\n      .set({ ...data, updatedAt: new Date() })\n      .where(and(eq(readingPlans.id, id), eq(readingPlans.userId, userId)))\n      .returning();\n    return updated || null;\n  }\n\n  async markDayCompleted(planId: string, day: number, userId: string): Promise<ReadingPlan> {\n    const plan = await this.getReadingPlan(planId);\n    if (!plan || plan.userId !== userId) {\n      throw new Error(\"Plan not found or unauthorized\");\n    }\n\n    const updatedSchedule = plan.schedule.map((item: any) => \n      item.day === day ? { ...item, isCompleted: true } : item\n    );\n\n    const completedDays = updatedSchedule.filter((item: any) => item.isCompleted).length;\n    const isCompleted = completedDays >= plan.totalDays;\n\n    const [updated] = await db\n      .update(readingPlans)\n      .set({\n        schedule: updatedSchedule,\n        currentDay: Math.min(day + 1, plan.totalDays),\n        isCompleted,\n        completedAt: isCompleted ? new Date() : plan.completedAt,\n        updatedAt: new Date(),\n      })\n      .where(eq(readingPlans.id, planId))\n      .returning();\n\n    return updated;\n  }\n\n  async deleteReadingPlan(id: string, userId: string): Promise<boolean> {\n    const result = await db.delete(readingPlans)\n      .where(and(eq(readingPlans.id, id), eq(readingPlans.userId, userId)))\n      .returning();\n    return result.length > 0;\n  }\n\n  // Achievements\n  async getAchievements(): Promise<Achievement[]> {\n    return await db\n      .select()\n      .from(achievements)\n      .orderBy(achievements.category, achievements.xpReward);\n  }\n\n  async createAchievement(achievement: InsertAchievement): Promise<Achievement> {\n    const [created] = await db.insert(achievements).values(achievement).returning();\n    return created;\n  }\n\n  async getUserAchievements(userId: string): Promise<(UserAchievement & { achievement: Achievement })[]> {\n    return await db\n      .select()\n      .from(userAchievements)\n      .leftJoin(achievements, eq(userAchievements.achievementId, achievements.id))\n      .where(eq(userAchievements.userId, userId))\n      .then(rows => rows.map(row => ({\n        ...row.user_achievements!,\n        achievement: row.achievements!\n      })));\n  }\n\n  async unlockAchievement(userId: string, achievementId: string): Promise<UserAchievement> {\n    const [existing] = await db\n      .select()\n      .from(userAchievements)\n      .where(and(\n        eq(userAchievements.userId, userId),\n        eq(userAchievements.achievementId, achievementId)\n      ));\n\n    if (existing) {\n      const [updated] = await db\n        .update(userAchievements)\n        .set({\n          isUnlocked: true,\n          unlockedAt: new Date(),\n        })\n        .where(eq(userAchievements.id, existing.id))\n        .returning();\n      return updated;\n    }\n\n    const [created] = await db\n      .insert(userAchievements)\n      .values({\n        userId,\n        achievementId,\n        isUnlocked: true,\n        unlockedAt: new Date(),\n        progress: 100,\n      })\n      .returning();\n    return created;\n  }\n\n  async updateAchievementProgress(userId: string, achievementId: string, progress: number): Promise<UserAchievement> {\n    const [existing] = await db\n      .select()\n      .from(userAchievements)\n      .where(and(\n        eq(userAchievements.userId, userId),\n        eq(userAchievements.achievementId, achievementId)\n      ));\n\n    if (existing) {\n      const [updated] = await db\n        .update(userAchievements)\n        .set({ progress })\n        .where(eq(userAchievements.id, existing.id))\n        .returning();\n      return updated;\n    }\n\n    const [created] = await db\n      .insert(userAchievements)\n      .values({\n        userId,\n        achievementId,\n        progress,\n        isUnlocked: false,\n      })\n      .returning();\n    return created;\n  }\n\n  // Prayers\n  async getPrayers(userId: string): Promise<Prayer[]> {\n    return await db\n      .select()\n      .from(prayers)\n      .where(eq(prayers.userId, userId))\n      .orderBy(desc(prayers.createdAt));\n  }\n\n  async getPrayer(id: string, userId: string): Promise<Prayer | undefined> {\n    const [prayer] = await db\n      .select()\n      .from(prayers)\n      .where(and(eq(prayers.id, id), eq(prayers.userId, userId)));\n    return prayer;\n  }\n\n  async createPrayer(prayer: InsertPrayer): Promise<Prayer> {\n    const created = await db.insert(prayers).values(prayer as any).returning();\n    return (Array.isArray(created) ? created[0] : created) as Prayer;\n  }\n\n  async updatePrayer(id: string, userId: string, data: Partial<Prayer>): Promise<Prayer | null> {\n    // Validar ownership antes de atualizar\n    const existing = await this.getPrayer(id, userId);\n    if (!existing) {\n      return null;\n    }\n    \n    const [updated] = await db\n      .update(prayers)\n      .set({ ...data, updatedAt: new Date() })\n      .where(and(eq(prayers.id, id), eq(prayers.userId, userId)))\n      .returning();\n    return updated || null;\n  }\n\n  async deletePrayer(id: string, userId: string): Promise<void> {\n    await db.delete(prayers).where(and(eq(prayers.id, id), eq(prayers.userId, userId)));\n  }\n\n  // Notes\n  async getNotes(userId: string): Promise<Note[]> {\n    return await db\n      .select()\n      .from(notes)\n      .where(eq(notes.userId, userId))\n      .orderBy(desc(notes.createdAt));\n  }\n\n  async createNote(note: InsertNote): Promise<Note> {\n    const [created] = await db.insert(notes).values(note).returning();\n    return created;\n  }\n\n  async deleteNote(id: string, userId: string): Promise<void> {\n    await db.delete(notes).where(and(eq(notes.id, id), eq(notes.userId, userId)));\n  }\n\n  // Highlights\n  async getHighlights(userId: string): Promise<Highlight[]> {\n    return await db\n      .select()\n      .from(highlights)\n      .where(eq(highlights.userId, userId))\n      .orderBy(desc(highlights.createdAt));\n  }\n\n  async createHighlight(highlight: InsertHighlight): Promise<Highlight> {\n    const [created] = await db.insert(highlights).values(highlight).returning();\n    return created;\n  }\n\n  async deleteHighlight(id: string, userId: string): Promise<void> {\n    await db.delete(highlights).where(and(eq(highlights.id, id), eq(highlights.userId, userId)));\n  }\n\n  // Bookmarks\n  async getBookmarks(userId: string): Promise<Bookmark[]> {\n    try {\n      return await db\n        .select({\n          id: bookmarks.id,\n          userId: bookmarks.userId,\n          book: bookmarks.book,\n          chapter: bookmarks.chapter,\n          verse: bookmarks.verse,\n          verseText: bookmarks.verseText,\n          version: bookmarks.version,\n          title: bookmarks.title,\n          note: bookmarks.note,\n          tags: bookmarks.tags,\n          createdAt: bookmarks.createdAt,\n        })\n        .from(bookmarks)\n        .where(eq(bookmarks.userId, userId))\n        .orderBy(desc(bookmarks.createdAt)) as Bookmark[];\n    } catch (error) {\n      console.error(\"[Storage] Error fetching bookmarks:\", error);\n      return [];\n    }\n  }\n\n  async createBookmark(bookmark: InsertBookmark): Promise<Bookmark> {\n    const [created] = await db.insert(bookmarks).values(bookmark).returning();\n    return created;\n  }\n\n  async deleteBookmark(id: string, userId: string): Promise<void> {\n    await db.delete(bookmarks).where(and(eq(bookmarks.id, id), eq(bookmarks.userId, userId)));\n  }\n\n  // Bible Settings\n  async getBibleSettings(userId: string): Promise<BibleSettings | undefined> {\n    const [settings] = await db\n      .select()\n      .from(bibleSettings)\n      .where(eq(bibleSettings.userId, userId));\n    return settings;\n  }\n\n  async upsertBibleSettings(settingsData: InsertBibleSettings): Promise<BibleSettings> {\n    const [settings] = await db\n      .insert(bibleSettings)\n      .values(settingsData)\n      .onConflictDoUpdate({\n        target: bibleSettings.userId,\n        set: {\n          ...settingsData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return settings;\n  }\n\n  // Podcasts\n  async getPodcasts(): Promise<Podcast[]> {\n    try {\n      return await db.select().from(podcasts).orderBy(desc(podcasts.subscriberCount));\n    } catch (error) {\n      console.error(\"[Podcasts] Error fetching podcasts:\", error);\n      return [];\n    }\n  }\n\n  async getPodcast(id: string): Promise<Podcast | undefined> {\n    const [podcast] = await db.select().from(podcasts).where(eq(podcasts.id, id));\n    return podcast;\n  }\n\n  async createPodcast(podcastData: InsertPodcast): Promise<Podcast> {\n    const podcast = await db.insert(podcasts).values(podcastData as any).returning();\n    return (Array.isArray(podcast) ? podcast[0] : podcast) as Podcast;\n  }\n\n  async updatePodcast(id: string, data: Partial<Podcast>): Promise<Podcast | null> {\n    const [podcast] = await db\n      .update(podcasts)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(podcasts.id, id))\n      .returning();\n    return podcast || null;\n  }\n\n  async deletePodcast(id: string): Promise<void> {\n    // First delete subscriptions\n    await db.delete(podcastSubscriptions).where(eq(podcastSubscriptions.podcastId, id));\n    // Then delete the podcast\n    await db.delete(podcasts).where(eq(podcasts.id, id));\n  }\n\n  async getUserPodcasts(userId: string): Promise<Podcast[]> {\n    return await db\n      .select()\n      .from(podcasts)\n      .where(eq(podcasts.creatorId, userId))\n      .orderBy(desc(podcasts.createdAt));\n  }\n\n  async getUserPodcastSubscriptions(userId: string): Promise<(PodcastSubscription & { podcast: Podcast })[]> {\n    const subs = await db\n      .select({\n        subscription: podcastSubscriptions,\n        podcast: podcasts,\n      })\n      .from(podcastSubscriptions)\n      .innerJoin(podcasts, eq(podcastSubscriptions.podcastId, podcasts.id))\n      .where(eq(podcastSubscriptions.userId, userId));\n    \n    return subs.map(s => ({\n      ...s.subscription,\n      podcast: s.podcast,\n    }));\n  }\n\n  async subscribeToPodcast(subscription: InsertPodcastSubscription): Promise<PodcastSubscription> {\n    const [sub] = await db.insert(podcastSubscriptions).values(subscription).returning();\n    \n    // Increment subscriber count\n    await db\n      .update(podcasts)\n      .set({ subscriberCount: sql`${podcasts.subscriberCount} + 1` })\n      .where(eq(podcasts.id, subscription.podcastId));\n    \n    return sub;\n  }\n\n  async unsubscribeFromPodcast(userId: string, podcastId: string): Promise<void> {\n    await db.delete(podcastSubscriptions)\n      .where(and(\n        eq(podcastSubscriptions.userId, userId),\n        eq(podcastSubscriptions.podcastId, podcastId)\n      ));\n    \n    // Decrement subscriber count\n    await db\n      .update(podcasts)\n      .set({ subscriberCount: sql`${podcasts.subscriberCount} - 1` })\n      .where(eq(podcasts.id, podcastId));\n  }\n\n  // Teacher/Lessons\n  async getLessons(teacherId: string): Promise<Lesson[]> {\n    return await db\n      .select()\n      .from(lessons)\n      .where(eq(lessons.teacherId, teacherId))\n      .orderBy(desc(lessons.createdAt));\n  }\n\n  async getLesson(id: string): Promise<Lesson | undefined> {\n    const [lesson] = await db.select().from(lessons).where(eq(lessons.id, id));\n    return lesson;\n  }\n\n  async createLesson(lesson: InsertLesson): Promise<Lesson> {\n    const created = await db.insert(lessons).values(lesson as any).returning();\n    return (Array.isArray(created) ? created[0] : created) as Lesson;\n  }\n\n  async updateLesson(id: string, teacherId: string, data: Partial<Lesson>): Promise<Lesson | null> {\n    // Validar ownership - apenas o professor dono pode editar\n    const existing = await this.getLesson(id);\n    if (!existing || existing.teacherId !== teacherId) {\n      return null;\n    }\n    \n    const [updated] = await db\n      .update(lessons)\n      .set({ ...data, updatedAt: new Date() })\n      .where(and(eq(lessons.id, id), eq(lessons.teacherId, teacherId)))\n      .returning();\n    return updated || null;\n  }\n\n  async deleteLesson(id: string, teacherId: string): Promise<boolean> {\n    // Validar ownership via WHERE clause e retornar se algo foi deletado\n    const result = await db.delete(lessons)\n      .where(and(eq(lessons.id, id), eq(lessons.teacherId, teacherId)))\n      .returning();\n    return result.length > 0;\n  }\n\n  async getLessonProgress(lessonId: string): Promise<LessonProgress[]> {\n    return await db\n      .select()\n      .from(lessonProgress)\n      .where(eq(lessonProgress.lessonId, lessonId));\n  }\n\n  async createLessonProgress(progress: InsertLessonProgress): Promise<LessonProgress> {\n    const [created] = await db.insert(lessonProgress).values(progress).returning();\n    return created;\n  }\n\n  // Community\n  async getCommunityPosts(limit: number = 50, userId?: string): Promise<(CommunityPost & { user: User; isLikedByCurrentUser?: boolean })[]> {\n    const posts = await db\n      .select({\n        post: communityPosts,\n        user: users,\n      })\n      .from(communityPosts)\n      .innerJoin(users, eq(communityPosts.userId, users.id))\n      .orderBy(desc(communityPosts.createdAt))\n      .limit(limit);\n    \n    if (!userId) {\n      return posts.map(p => ({\n        ...p.post,\n        user: p.user,\n        isLikedByCurrentUser: false,\n      }));\n    }\n\n    const likes = await db\n      .select({ postId: postLikes.postId })\n      .from(postLikes)\n      .where(eq(postLikes.userId, userId));\n\n    const likedPostIds = new Set(likes.map(l => l.postId));\n    \n    return posts.map(p => ({\n      ...p.post,\n      user: p.user,\n      isLikedByCurrentUser: likedPostIds.has(p.post.id),\n    }));\n  }\n\n  async createCommunityPost(post: InsertCommunityPost): Promise<CommunityPost> {\n    const [created] = await db.insert(communityPosts).values(post).returning();\n    return created;\n  }\n\n  async likePost(postId: string, userId: string): Promise<void> {\n    await db.insert(postLikes).values({ postId, userId });\n    \n    // Increment like count\n    await db\n      .update(communityPosts)\n      .set({ likeCount: sql`${communityPosts.likeCount} + 1` })\n      .where(eq(communityPosts.id, postId));\n  }\n\n  async unlikePost(postId: string, userId: string): Promise<void> {\n    await db.delete(postLikes)\n      .where(and(\n        eq(postLikes.postId, postId),\n        eq(postLikes.userId, userId)\n      ));\n    \n    // Decrement like count\n    await db\n      .update(communityPosts)\n      .set({ likeCount: sql`${communityPosts.likeCount} - 1` })\n      .where(eq(communityPosts.id, postId));\n  }\n\n  async addComment(comment: InsertPostComment): Promise<PostComment> {\n    const [created] = await db.insert(postComments).values(comment).returning();\n    \n    // Increment comment count\n    await db\n      .update(communityPosts)\n      .set({ commentCount: sql`${communityPosts.commentCount} + 1` })\n      .where(eq(communityPosts.id, comment.postId));\n    \n    return created;\n  }\n\n  // Offline Content\n  async getOfflineContent(userId: string): Promise<OfflineContent[]> {\n    return await db.select().from(offlineContent).where(eq(offlineContent.userId, userId)).orderBy(desc(offlineContent.downloadedAt));\n  }\n\n  async getOfflineChapter(userId: string, book: string, chapter: number, version: string): Promise<OfflineContent | undefined> {\n    const [content] = await db.select().from(offlineContent).where(\n      and(\n        eq(offlineContent.userId, userId),\n        eq(offlineContent.book, book),\n        eq(offlineContent.chapter, chapter),\n        eq(offlineContent.version, version)\n      )\n    );\n    return content;\n  }\n\n  async saveOfflineContent(content: InsertOfflineContent): Promise<OfflineContent> {\n    // Check if already exists\n    const existing = await this.getOfflineChapter(\n      content.userId,\n      content.book,\n      content.chapter,\n      content.version\n    );\n\n    if (existing) {\n      // Update last accessed time\n      const [updated] = await db\n        .update(offlineContent)\n        .set({ lastAccessedAt: new Date() })\n        .where(eq(offlineContent.id, existing.id))\n        .returning();\n      return updated;\n    } else {\n      const [created] = await db.insert(offlineContent).values(content).returning();\n      return created;\n    }\n  }\n\n  async deleteOfflineContent(id: string, userId: string): Promise<void> {\n    await db.delete(offlineContent).where(\n      and(\n        eq(offlineContent.id, id),\n        eq(offlineContent.userId, userId)\n      )\n    );\n  }\n\n  async deleteUserOfflineContent(userId: string): Promise<void> {\n    await db.delete(offlineContent).where(eq(offlineContent.userId, userId));\n  }\n\n  // Verse Commentaries (User-isolated)\n  async getVerseCommentary(userId: string, book: string, chapter: number, verse: number, version: string, commentaryType: string): Promise<VerseCommentary | undefined> {\n    const [commentary] = await db.select().from(verseCommentaries).where(\n      and(\n        eq(verseCommentaries.userId, userId),\n        eq(verseCommentaries.book, book),\n        eq(verseCommentaries.chapter, chapter),\n        eq(verseCommentaries.verse, verse),\n        eq(verseCommentaries.version, version),\n        eq(verseCommentaries.commentaryType, commentaryType)\n      )\n    );\n    return commentary;\n  }\n\n  async createVerseCommentary(commentary: InsertVerseCommentary): Promise<VerseCommentary> {\n    const [created] = await db.insert(verseCommentaries).values(commentary).returning();\n    return created;\n  }\n\n  // Daily Verse\n  async getDailyVerseByDayOfYear(dayOfYear: number): Promise<DailyVerse | undefined> {\n    try {\n      const [verse] = await db.select().from(dailyVerses).where(eq(dailyVerses.dayOfYear, dayOfYear));\n      return verse;\n    } catch (e) {\n      console.error(\"Error in getDailyVerseByDayOfYear:\", e);\n      return undefined;\n    }\n  }\n\n  async createDailyVerse(verse: InsertDailyVerse): Promise<DailyVerse> {\n    const [created] = await db.insert(dailyVerses).values(verse).returning();\n    return created;\n  }\n\n  async getRecentDailyVerses(days: number): Promise<DailyVerse[]> {\n    try {\n      return await db\n        .select()\n        .from(dailyVerses)\n        .orderBy(desc(dailyVerses.dayOfYear))\n        .limit(days);\n    } catch (e) {\n      console.error(\"Error in getRecentDailyVerses:\", e);\n      return [];\n    }\n  }\n\n  async getAllDailyVerses(): Promise<DailyVerse[]> {\n    try {\n      return await db.select().from(dailyVerses).orderBy(desc(dailyVerses.dayOfYear));\n    } catch (e) {\n      console.error(\"Error in getAllDailyVerses:\", e);\n      return [];\n    }\n  }\n\n  // Donations\n  async createDonation(donation: InsertDonation): Promise<Donation> {\n    const [created] = await db.insert(donations).values(donation).returning();\n    return created;\n  }\n\n  async getDonations(userId: string): Promise<Donation[]> {\n    return await db.select().from(donations).where(eq(donations.userId, userId)).orderBy(desc(donations.createdAt));\n  }\n\n  async getDonation(id: string): Promise<Donation | undefined> {\n    const [donation] = await db.select().from(donations).where(eq(donations.id, id));\n    return donation;\n  }\n\n  async updateDonationStatus(id: string, status: string, stripePaymentIntentId?: string): Promise<Donation> {\n    const [updated] = await db\n      .update(donations)\n      .set({ \n        status, \n        ...(stripePaymentIntentId && { stripePaymentIntentId })\n      })\n      .where(eq(donations.id, id))\n      .returning();\n    return updated;\n  }\n\n  // Stats\n  async getDashboardStats(userId: string): Promise<{ communityPosts: number }> {\n    const [result] = await db\n      .select({ count: sql<number>`count(*)` })\n      .from(communityPosts)\n      .where(eq(communityPosts.userId, userId));\n    \n    return {\n      communityPosts: result?.count || 0,\n    };\n  }\n\n  // Subscription Management\n  async updateUserSubscription(userId: string, data: {\n    subscriptionPlan?: string;\n    stripeCustomerId?: string | null;\n    stripeSubscriptionId?: string | null;\n    aiRequestsToday?: number;\n    aiRequestsResetAt?: Date | null;\n    aiRequestsCount?: number;\n  }): Promise<User> {\n    const [updated] = await db\n      .update(users)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return updated;\n  }\n\n  async getUserByStripeCustomerId(stripeCustomerId: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.stripeCustomerId, stripeCustomerId));\n    return user;\n  }\n\n  async incrementAiRequests(userId: string): Promise<{ count: number; resetAt: Date; totalCount: number; limit: number; plan: string }> {\n    const now = new Date();\n    const user = await this.getUser(userId);\n    const plan = user?.subscriptionPlan || 'free';\n    \n    // Define limits and reset periods by plan\n    // FREE: 20 total (never resets) - must subscribe to continue\n    // Monthly: 500/month (resets on 1st of each month)\n    // Yearly/Annual: 3750/year (resets on subscription anniversary)\n    // Premium Plus: 7200/year (resets on subscription anniversary)\n    const planConfig: Record<string, { limit: number; resetPeriod: 'never' | 'monthly' | 'yearly' }> = {\n      free: { limit: 20, resetPeriod: 'never' },\n      monthly: { limit: 500, resetPeriod: 'monthly' },\n      yearly: { limit: 3750, resetPeriod: 'yearly' },\n      annual: { limit: 3750, resetPeriod: 'yearly' },\n      premium_plus: { limit: 7200, resetPeriod: 'yearly' },\n    };\n    \n    const config = planConfig[plan] || planConfig.free;\n    let periodCount = user?.aiRequestsCount || 0;  // Period counter (resets based on plan)\n    const currentResetAt = user?.aiRequestsResetAt;\n    \n    // Calculate next reset date and check if should reset\n    let nextResetAt: Date;\n    let shouldReset = false;\n    \n    if (config.resetPeriod === 'never') {\n      // FREE: never reset - this is a lifetime counter\n      nextResetAt = new Date('2099-12-31T23:59:59Z');\n      shouldReset = false;\n    } else if (config.resetPeriod === 'monthly') {\n      // Monthly: reset on first day of next month\n      nextResetAt = new Date(now);\n      nextResetAt.setMonth(nextResetAt.getMonth() + 1);\n      nextResetAt.setDate(1);\n      nextResetAt.setHours(0, 0, 0, 0);\n      \n      // Check if current reset date has passed\n      if (currentResetAt && now >= new Date(currentResetAt)) {\n        shouldReset = true;\n      }\n    } else {\n      // Yearly: reset one year from now (or subscription anniversary)\n      nextResetAt = new Date(now);\n      nextResetAt.setFullYear(nextResetAt.getFullYear() + 1);\n      nextResetAt.setMonth(0);  // January\n      nextResetAt.setDate(1);\n      nextResetAt.setHours(0, 0, 0, 0);\n      \n      // Check if current reset date has passed\n      if (currentResetAt && now >= new Date(currentResetAt)) {\n        shouldReset = true;\n      }\n    }\n    \n    // Reset counter if period has passed\n    if (shouldReset) {\n      periodCount = 0;\n      console.log(`[AI Quota] Reset counter for user ${userId} (${plan} plan) - new period started`);\n    }\n    \n    // Increment period counter\n    periodCount++;\n    \n    // Persist to database with user isolation (uses userId in WHERE clause)\n    await this.updateUserSubscription(userId, {\n      aiRequestsCount: periodCount,\n      aiRequestsResetAt: nextResetAt,\n      aiRequestsToday: periodCount,  // Keep in sync for backwards compat\n    });\n    \n    console.log(`[AI Quota] User ${userId} (${plan}): ${periodCount}/${config.limit} requests | Next reset: ${nextResetAt.toISOString()}`);\n    \n    return { \n      count: periodCount, \n      resetAt: nextResetAt, \n      totalCount: periodCount, \n      limit: config.limit,\n      plan \n    };\n  }\n\n  // ============================================\n  // STUDY GROUPS\n  // ============================================\n  \n  async getGroups(userId?: string): Promise<any[]> {\n    const { groups, groupMembers, users } = await import(\"@shared/schema\");\n    \n    // Get public groups or groups user is a member of\n    const result = await db\n      .select({\n        id: groups.id,\n        name: groups.name,\n        description: groups.description,\n        isPublic: groups.isPublic,\n        maxMembers: groups.maxMembers,\n        createdAt: groups.createdAt,\n        leaderId: groups.leaderId,\n      })\n      .from(groups)\n      .orderBy(desc(groups.createdAt));\n    \n    return result;\n  }\n\n  async getGroup(id: string): Promise<any | undefined> {\n    const { groups } = await import(\"@shared/schema\");\n    const [group] = await db.select().from(groups).where(eq(groups.id, id));\n    return group;\n  }\n\n  async createGroup(data: { name: string; description?: string; isPublic?: boolean; leaderId: string }): Promise<any> {\n    const { groups } = await import(\"@shared/schema\");\n    const [created] = await db.insert(groups).values(data).returning();\n    return created;\n  }\n\n  async updateGroup(id: string, leaderId: string, data: Partial<{ name: string; description: string; isPublic: boolean }>): Promise<any | null> {\n    const { groups } = await import(\"@shared/schema\");\n    const [existing] = await db.select().from(groups).where(eq(groups.id, id));\n    if (!existing || existing.leaderId !== leaderId) return null;\n    \n    const [updated] = await db.update(groups).set({ ...data, updatedAt: new Date() }).where(eq(groups.id, id)).returning();\n    return updated;\n  }\n\n  async deleteGroup(id: string, leaderId: string): Promise<boolean> {\n    const { groups, groupMembers, groupMessages, groupInvites } = await import(\"@shared/schema\");\n    const [existing] = await db.select().from(groups).where(eq(groups.id, id));\n    if (!existing || existing.leaderId !== leaderId) return false;\n    \n    return await db.transaction(async (tx) => {\n      // Deletar convites relacionados\n      await tx.delete(groupInvites).where(eq(groupInvites.groupId, id));\n      // Deletar mensagens relacionadas\n      await tx.delete(groupMessages).where(eq(groupMessages.groupId, id));\n      // Deletar membros relacionados\n      await tx.delete(groupMembers).where(eq(groupMembers.groupId, id));\n      // Finalmente deletar o grupo\n      await tx.delete(groups).where(eq(groups.id, id));\n      return true;\n    });\n  }\n\n  async getGroupMembers(groupId: string): Promise<any[]> {\n    const { groupMembers, users } = await import(\"@shared/schema\");\n    return await db\n      .select({\n        id: groupMembers.id,\n        userId: groupMembers.userId,\n        role: groupMembers.role,\n        joinedAt: groupMembers.joinedAt,\n        userName: users.displayName,\n        userEmail: users.email,\n        userImage: users.profileImageUrl,\n      })\n      .from(groupMembers)\n      .leftJoin(users, eq(groupMembers.userId, users.id))\n      .where(eq(groupMembers.groupId, groupId));\n  }\n\n  async addGroupMember(groupId: string, userId: string, role: string = \"member\"): Promise<any> {\n    const { groupMembers } = await import(\"@shared/schema\");\n    const [created] = await db.insert(groupMembers).values({ groupId, userId, role }).returning();\n    return created;\n  }\n\n  async removeGroupMember(groupId: string, userId: string): Promise<boolean> {\n    const { groupMembers } = await import(\"@shared/schema\");\n    await db.delete(groupMembers).where(and(eq(groupMembers.groupId, groupId), eq(groupMembers.userId, userId)));\n    return true;\n  }\n\n  async isGroupMember(groupId: string, userId: string): Promise<boolean> {\n    const { groupMembers } = await import(\"@shared/schema\");\n    const [member] = await db.select().from(groupMembers).where(and(eq(groupMembers.groupId, groupId), eq(groupMembers.userId, userId)));\n    return !!member;\n  }\n\n  async updateGroupMemberRole(groupId: string, memberId: string, role: string): Promise<void> {\n    const { groupMembers } = await import(\"@shared/schema\");\n    await db.update(groupMembers).set({ role }).where(eq(groupMembers.id, memberId));\n  }\n\n  async updateInviteStatus(inviteId: string, status: string): Promise<void> {\n    const { groupInvites } = await import(\"@shared/schema\");\n    await db.update(groupInvites).set({ status }).where(eq(groupInvites.id, inviteId));\n  }\n\n  async getUserGroups(userId: string): Promise<any[]> {\n    const { groups, groupMembers } = await import(\"@shared/schema\");\n    return await db\n      .select({\n        id: groups.id,\n        name: groups.name,\n        description: groups.description,\n        isPublic: groups.isPublic,\n        leaderId: groups.leaderId,\n        role: groupMembers.role,\n        joinedAt: groupMembers.joinedAt,\n      })\n      .from(groupMembers)\n      .innerJoin(groups, eq(groupMembers.groupId, groups.id))\n      .where(eq(groupMembers.userId, userId));\n  }\n\n  // ============================================\n  // TEACHING OUTLINES\n  // ============================================\n  \n  async getTeachingOutlines(teacherId: string): Promise<any[]> {\n    const { teachingOutlines } = await import(\"@shared/schema\");\n    return await db.select().from(teachingOutlines).where(eq(teachingOutlines.teacherId, teacherId)).orderBy(desc(teachingOutlines.updatedAt));\n  }\n\n  async getTeachingOutline(id: string): Promise<any | undefined> {\n    const { teachingOutlines } = await import(\"@shared/schema\");\n    const [outline] = await db.select().from(teachingOutlines).where(eq(teachingOutlines.id, id));\n    return outline;\n  }\n\n  async createTeachingOutline(data: any): Promise<any> {\n    const { teachingOutlines } = await import(\"@shared/schema\");\n    const [created] = await db.insert(teachingOutlines).values(data).returning();\n    return created;\n  }\n\n  async updateTeachingOutline(id: string, teacherId: string, data: any): Promise<any | null> {\n    const { teachingOutlines } = await import(\"@shared/schema\");\n    const [existing] = await db.select().from(teachingOutlines).where(eq(teachingOutlines.id, id));\n    if (!existing || existing.teacherId !== teacherId) return null;\n    \n    const [updated] = await db.update(teachingOutlines).set({ ...data, updatedAt: new Date() }).where(eq(teachingOutlines.id, id)).returning();\n    return updated;\n  }\n\n  async deleteTeachingOutline(id: string, teacherId: string): Promise<boolean> {\n    const { teachingOutlines } = await import(\"@shared/schema\");\n    const [existing] = await db.select().from(teachingOutlines).where(eq(teachingOutlines.id, id));\n    if (!existing || existing.teacherId !== teacherId) return false;\n    \n    await db.delete(teachingOutlines).where(eq(teachingOutlines.id, id));\n    return true;\n  }\n\n  // ============================================\n  // GROUP POSTS (Community Posts filtered by group)\n  // ============================================\n  \n  async getGroupPosts(groupId: string, limit: number = 50): Promise<any[]> {\n    return await db\n      .select({\n        id: communityPosts.id,\n        userId: communityPosts.userId,\n        groupId: communityPosts.groupId,\n        verseReference: communityPosts.verseReference,\n        verseText: communityPosts.verseText,\n        note: communityPosts.note,\n        likeCount: communityPosts.likeCount,\n        commentCount: communityPosts.commentCount,\n        createdAt: communityPosts.createdAt,\n        user: {\n          id: users.id,\n          displayName: users.displayName,\n          profileImageUrl: users.profileImageUrl,\n        },\n      })\n      .from(communityPosts)\n      .leftJoin(users, eq(communityPosts.userId, users.id))\n      .where(eq(communityPosts.groupId, groupId))\n      .orderBy(desc(communityPosts.createdAt))\n      .limit(limit);\n  }\n\n  // ============================================\n  // BIBLE AUDIO PROGRESS\n  // ============================================\n\n  async getAudioProgress(userId: string, book: string, chapter: number, version: string = \"ARA\"): Promise<any | undefined> {\n    const { audioProgress } = await import(\"@shared/schema\");\n    const [progress] = await db\n      .select()\n      .from(audioProgress)\n      .where(and(\n        eq(audioProgress.userId, userId),\n        eq(audioProgress.book, book),\n        eq(audioProgress.chapter, chapter),\n        eq(audioProgress.version, version)\n      ));\n    return progress;\n  }\n\n  async upsertAudioProgress(userId: string, data: any): Promise<any> {\n    const { audioProgress } = await import(\"@shared/schema\");\n    const existing = await this.getAudioProgress(userId, data.book, data.chapter, data.version);\n\n    if (existing) {\n      const [updated] = await db\n        .update(audioProgress)\n        .set({ ...data, updatedAt: new Date() })\n        .where(eq(audioProgress.id, existing.id))\n        .returning();\n      return updated;\n    } else {\n      const [created] = await db\n        .insert(audioProgress)\n        .values({ ...data, userId })\n        .returning();\n      return created;\n    }\n  }\n\n  async getUserAudioProgress(userId: string): Promise<any[]> {\n    const { audioProgress } = await import(\"@shared/schema\");\n    return await db\n      .select()\n      .from(audioProgress)\n      .where(eq(audioProgress.userId, userId))\n      .orderBy(desc(audioProgress.lastPlayedAt));\n  }\n\n  // ============================================\n  // GROUP MESSAGES (Discussion/Chat)\n  // ============================================\n  \n  async getGroupMessages(groupId: string, limit: number = 100): Promise<any[]> {\n    const { groupMessages } = await import(\"@shared/schema\");\n    return await db\n      .select({\n        id: groupMessages.id,\n        groupId: groupMessages.groupId,\n        userId: groupMessages.userId,\n        content: groupMessages.content,\n        replyToId: groupMessages.replyToId,\n        verseReference: groupMessages.verseReference,\n        verseText: groupMessages.verseText,\n        messageType: groupMessages.messageType,\n        createdAt: groupMessages.createdAt,\n        user: {\n          id: users.id,\n          displayName: users.displayName,\n          profileImageUrl: users.profileImageUrl,\n        },\n      })\n      .from(groupMessages)\n      .leftJoin(users, eq(groupMessages.userId, users.id))\n      .where(eq(groupMessages.groupId, groupId))\n      .orderBy(desc(groupMessages.createdAt))\n      .limit(limit);\n  }\n\n  async createGroupMessage(data: any): Promise<any> {\n    const { groupMessages } = await import(\"@shared/schema\");\n    const [created] = await db.insert(groupMessages).values(data).returning();\n    return created;\n  }\n\n  async deleteGroupMessage(id: string, userId: string): Promise<boolean> {\n    const { groupMessages } = await import(\"@shared/schema\");\n    const [existing] = await db.select().from(groupMessages).where(eq(groupMessages.id, id));\n    if (!existing || existing.userId !== userId) return false;\n    \n    await db.delete(groupMessages).where(eq(groupMessages.id, id));\n    return true;\n  }\n\n  // ============================================\n  // GROUP INVITES\n  // ============================================\n  \n  async createGroupInvite(data: any): Promise<any> {\n    const { groupInvites } = await import(\"@shared/schema\");\n    const inviteCode = Math.random().toString(36).substring(2, 10).toUpperCase();\n    const expiresAt = new Date();\n    expiresAt.setDate(expiresAt.getDate() + 7); // 7 days expiry\n    \n    const [created] = await db.insert(groupInvites).values({\n      ...data,\n      inviteCode,\n      expiresAt,\n    }).returning();\n    return created;\n  }\n\n  async getGroupInvites(groupId: string): Promise<any[]> {\n    const { groupInvites } = await import(\"@shared/schema\");\n    return await db\n      .select()\n      .from(groupInvites)\n      .where(eq(groupInvites.groupId, groupId))\n      .orderBy(desc(groupInvites.createdAt));\n  }\n\n  async getInviteByCode(code: string): Promise<any | undefined> {\n    const { groupInvites } = await import(\"@shared/schema\");\n    const [invite] = await db.select().from(groupInvites).where(eq(groupInvites.inviteCode, code));\n    return invite;\n  }\n\n  async getPendingInvitesForEmail(email: string): Promise<any[]> {\n    const { groupInvites, groups } = await import(\"@shared/schema\");\n    return await db\n      .select({\n        id: groupInvites.id,\n        groupId: groupInvites.groupId,\n        inviteCode: groupInvites.inviteCode,\n        status: groupInvites.status,\n        expiresAt: groupInvites.expiresAt,\n        createdAt: groupInvites.createdAt,\n        group: {\n          id: groups.id,\n          name: groups.name,\n          description: groups.description,\n        },\n      })\n      .from(groupInvites)\n      .leftJoin(groups, eq(groupInvites.groupId, groups.id))\n      .where(and(\n        eq(groupInvites.invitedEmail, email),\n        eq(groupInvites.status, \"pending\")\n      ));\n  }\n\n  async acceptInvite(inviteCode: string, userId: string): Promise<{ success: boolean; groupId?: string; error?: string }> {\n    const { groupInvites, groups } = await import(\"@shared/schema\");\n    const invite = await this.getInviteByCode(inviteCode);\n    \n    if (!invite) {\n      return { success: false, error: \"Convite não encontrado\" };\n    }\n    \n    if (invite.status !== \"pending\") {\n      return { success: false, error: \"Convite já foi usado ou expirou\" };\n    }\n    \n    if (invite.expiresAt && new Date(invite.expiresAt) < new Date()) {\n      await db.update(groupInvites).set({ status: \"expired\" }).where(eq(groupInvites.id, invite.id));\n      return { success: false, error: \"Convite expirado\" };\n    }\n    \n    // Check if already member\n    const isMember = await this.isGroupMember(invite.groupId, userId);\n    if (isMember) {\n      return { success: false, error: \"Você já é membro deste grupo\" };\n    }\n    \n    // Add as member\n    await this.addGroupMember(invite.groupId, userId, \"member\");\n    \n    // Update invite status\n    await db.update(groupInvites).set({ status: \"accepted\" }).where(eq(groupInvites.id, invite.id));\n    \n    return { success: true, groupId: invite.groupId };\n  }\n\n  async searchUsersByEmail(email: string): Promise<any[]> {\n    return await db\n      .select({\n        id: users.id,\n        email: users.email,\n        displayName: users.displayName,\n        profileImageUrl: users.profileImageUrl,\n      })\n      .from(users)\n      .where(sql`LOWER(${users.email}) LIKE ${`%${email.toLowerCase()}%`}`)\n      .limit(10);\n  }\n\n  // ============================================\n  // GROUP DISCUSSIONS (AI Q&A Sessions)\n  // ============================================\n  \n  async createGroupDiscussion(data: any): Promise<any> {\n    const { groupDiscussions } = await import(\"@shared/schema\");\n    const [created] = await db.insert(groupDiscussions).values(data).returning();\n    return created;\n  }\n\n  async getGroupDiscussions(groupId: string): Promise<any[]> {\n    const { groupDiscussions } = await import(\"@shared/schema\");\n    return await db\n      .select({\n        id: groupDiscussions.id,\n        groupId: groupDiscussions.groupId,\n        createdById: groupDiscussions.createdById,\n        title: groupDiscussions.title,\n        description: groupDiscussions.description,\n        question: groupDiscussions.question,\n        verseReference: groupDiscussions.verseReference,\n        verseText: groupDiscussions.verseText,\n        aiSynthesis: groupDiscussions.aiSynthesis,\n        synthesizedAt: groupDiscussions.synthesizedAt,\n        status: groupDiscussions.status,\n        allowAnonymous: groupDiscussions.allowAnonymous,\n        deadline: groupDiscussions.deadline,\n        createdAt: groupDiscussions.createdAt,\n        creator: {\n          id: users.id,\n          displayName: users.displayName,\n          profileImageUrl: users.profileImageUrl,\n        },\n      })\n      .from(groupDiscussions)\n      .leftJoin(users, eq(groupDiscussions.createdById, users.id))\n      .where(eq(groupDiscussions.groupId, groupId))\n      .orderBy(desc(groupDiscussions.createdAt));\n  }\n\n  async getGroupDiscussion(id: string): Promise<any | undefined> {\n    const { groupDiscussions } = await import(\"@shared/schema\");\n    const [discussion] = await db\n      .select({\n        id: groupDiscussions.id,\n        groupId: groupDiscussions.groupId,\n        createdById: groupDiscussions.createdById,\n        title: groupDiscussions.title,\n        description: groupDiscussions.description,\n        question: groupDiscussions.question,\n        verseReference: groupDiscussions.verseReference,\n        verseText: groupDiscussions.verseText,\n        aiSynthesis: groupDiscussions.aiSynthesis,\n        synthesizedAt: groupDiscussions.synthesizedAt,\n        status: groupDiscussions.status,\n        allowAnonymous: groupDiscussions.allowAnonymous,\n        deadline: groupDiscussions.deadline,\n        createdAt: groupDiscussions.createdAt,\n        creator: {\n          id: users.id,\n          displayName: users.displayName,\n          profileImageUrl: users.profileImageUrl,\n        },\n      })\n      .from(groupDiscussions)\n      .leftJoin(users, eq(groupDiscussions.createdById, users.id))\n      .where(eq(groupDiscussions.id, id));\n    return discussion;\n  }\n\n  async updateGroupDiscussion(id: string, data: Partial<any>): Promise<any> {\n    const { groupDiscussions } = await import(\"@shared/schema\");\n    const [updated] = await db\n      .update(groupDiscussions)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(groupDiscussions.id, id))\n      .returning();\n    return updated;\n  }\n\n  async closeGroupDiscussion(id: string): Promise<any> {\n    return this.updateGroupDiscussion(id, { status: \"closed\" });\n  }\n\n  // ============================================\n  // GROUP ANSWERS (Member Responses)\n  // ============================================\n  \n  async createGroupAnswer(data: any): Promise<any> {\n    const { groupAnswers } = await import(\"@shared/schema\");\n    const [created] = await db.insert(groupAnswers).values(data).returning();\n    return created;\n  }\n\n  async getDiscussionAnswers(discussionId: string): Promise<any[]> {\n    const { groupAnswers } = await import(\"@shared/schema\");\n    return await db\n      .select({\n        id: groupAnswers.id,\n        discussionId: groupAnswers.discussionId,\n        userId: groupAnswers.userId,\n        content: groupAnswers.content,\n        verseReference: groupAnswers.verseReference,\n        reviewStatus: groupAnswers.reviewStatus,\n        reviewComment: groupAnswers.reviewComment,\n        reviewedById: groupAnswers.reviewedById,\n        reviewedAt: groupAnswers.reviewedAt,\n        isAnonymous: groupAnswers.isAnonymous,\n        createdAt: groupAnswers.createdAt,\n        user: {\n          id: users.id,\n          displayName: users.displayName,\n          profileImageUrl: users.profileImageUrl,\n        },\n      })\n      .from(groupAnswers)\n      .leftJoin(users, eq(groupAnswers.userId, users.id))\n      .where(eq(groupAnswers.discussionId, discussionId))\n      .orderBy(desc(groupAnswers.createdAt));\n  }\n\n  async reviewAnswer(answerId: string, reviewerId: string, status: string, comment?: string): Promise<any> {\n    const { groupAnswers } = await import(\"@shared/schema\");\n    const [updated] = await db\n      .update(groupAnswers)\n      .set({\n        reviewStatus: status,\n        reviewComment: comment || null,\n        reviewedById: reviewerId,\n        reviewedAt: new Date(),\n        updatedAt: new Date(),\n      })\n      .where(eq(groupAnswers.id, answerId))\n      .returning();\n    return updated;\n  }\n\n  async getAnswersForSynthesis(discussionId: string): Promise<any[]> {\n    const { groupAnswers } = await import(\"@shared/schema\");\n    return await db\n      .select({\n        id: groupAnswers.id,\n        content: groupAnswers.content,\n        verseReference: groupAnswers.verseReference,\n        reviewStatus: groupAnswers.reviewStatus,\n        isAnonymous: groupAnswers.isAnonymous,\n        userName: users.displayName,\n      })\n      .from(groupAnswers)\n      .leftJoin(users, eq(groupAnswers.userId, users.id))\n      .where(eq(groupAnswers.discussionId, discussionId));\n  }\n\n  async saveDiscussionSynthesis(discussionId: string, synthesis: string): Promise<any> {\n    const { groupDiscussions } = await import(\"@shared/schema\");\n    const [updated] = await db\n      .update(groupDiscussions)\n      .set({\n        aiSynthesis: synthesis,\n        synthesizedAt: new Date(),\n        status: \"synthesized\",\n        updatedAt: new Date(),\n      })\n      .where(eq(groupDiscussions.id, discussionId))\n      .returning();\n    return updated;\n  }\n\n  // ============================================\n  // EMAIL OTP OPERATIONS\n  // ============================================\n  async createOTP(data: { email: string; code: string; expiresAt: Date }): Promise<any> {\n    const [otp] = await db\n      .insert(emailOtp)\n      .values({\n        email: data.email,\n        code: data.code,\n        expiresAt: data.expiresAt,\n        verified: false,\n        createdAt: new Date(),\n      })\n      .returning();\n    return otp;\n  }\n\n  async getOTPByEmail(email: string): Promise<any | undefined> {\n    const [otp] = await db\n      .select()\n      .from(emailOtp)\n      .where(eq(emailOtp.email, email))\n      .orderBy(desc(emailOtp.createdAt))\n      .limit(1);\n    return otp;\n  }\n\n  async deleteOTPByEmail(email: string): Promise<void> {\n    await db.delete(emailOtp).where(eq(emailOtp.email, email));\n  }\n\n  async verifyOTP(email: string, code: string): Promise<boolean> {\n    const [otp] = await db\n      .select()\n      .from(emailOtp)\n      .where(eq(emailOtp.email, email))\n      .orderBy(desc(emailOtp.createdAt))\n      .limit(1);\n\n    if (!otp) return false;\n    if (new Date() > otp.expiresAt) {\n      await db.delete(emailOtp).where(eq(emailOtp.email, email));\n      return false;\n    }\n    if (otp.code !== code) return false;\n\n    // Mark as verified\n    await db\n      .update(emailOtp)\n      .set({ verified: true })\n      .where(eq(emailOtp.id, otp.id));\n\n    return true;\n  }\n  async createSharedLink(link: InsertSharedLink): Promise<SharedLink> {\n    const [created] = await db.insert(sharedLinks).values(link).returning();\n    return created;\n  }\n\n  async createFeedback(feedbackData: InsertFeedback): Promise<Feedback> {\n    const [created] = await db.insert(feedback).values(feedbackData).returning();\n    return created;\n  }\n\n  // Group Meetings\n  async getGroupMeetings(groupId: string): Promise<GroupMeeting[]> {\n    return await db.select().from(groupMeetings).where(eq(groupMeetings.groupId, groupId)).orderBy(desc(groupMeetings.meetingDate));\n  }\n\n  async createGroupMeeting(meetingData: InsertGroupMeeting): Promise<GroupMeeting> {\n    const [result] = await db.insert(groupMeetings).values(meetingData).returning();\n    return result;\n  }\n\n  async deleteGroupMeeting(id: string, userId: string): Promise<boolean> {\n    const result = await db.delete(groupMeetings).where(eq(groupMeetings.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async updateGroupMeeting(id: string, userId: string, data: Partial<InsertGroupMeeting>): Promise<GroupMeeting | null> {\n    const [updated] = await db\n      .update(groupMeetings)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(groupMeetings.id, id))\n      .returning();\n    return updated || null;\n  }\n\n  // Group Resources\n  async getGroupResources(groupId: string): Promise<GroupResource[]> {\n    return await db.select().from(groupResources).where(eq(groupResources.groupId, groupId)).orderBy(desc(groupResources.createdAt));\n  }\n\n  async createGroupResource(resourceData: InsertGroupResource): Promise<GroupResource> {\n    const [result] = await db.insert(groupResources).values(resourceData).returning();\n    return result;\n  }\n\n  async deleteGroupResource(id: string, userId: string): Promise<boolean> {\n    const result = await db.delete(groupResources).where(eq(groupResources.id, id)).returning();\n    return result.length > 0;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","path":null,"size_bytes":66456,"size_tokens":null},"server/routes.ts":{"content":"// Authentication: Supabase Auth with JWT, AI with OpenAI, Payments with Stripe\nimport express, { type Express } from \"express\";\nimport cookieParser from \"cookie-parser\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { isAuthenticated, supabaseAdmin } from \"./supabaseAuth\";\nimport Stripe from \"stripe\";\nimport OpenAI from \"openai\";\nimport {\n  insertReadingPlanSchema,\n  insertReadingPlanTemplateSchema,\n  insertAchievementSchema,\n  insertPrayerSchema,\n  insertNoteSchema,\n  insertHighlightSchema,\n  insertBookmarkSchema,\n  insertBibleSettingsSchema,\n  insertPodcastSchema,\n  insertPodcastSubscriptionSchema,\n  insertLessonSchema,\n  updateLessonSchema,\n  insertCommunityPostSchema,\n  insertOfflineContentSchema,\n  insertDailyVerseSchema,\n  insertDonationSchema,\n  insertSharedLinkSchema,\n  insertFeedbackSchema,\n  insertGroupMeetingSchema,\n  insertGroupResourceSchema,\n} from \"@shared/schema\";\nimport nodemailer from \"nodemailer\";\nimport { readingPlanTemplates } from \"./seed-reading-plans\";\nimport { achievements as seedAchievements } from \"./seed-achievements\";\nimport { runMigrations } from \"./migrations\";\nimport { fetchBibleChapter } from \"./multilingual-bible-apis\";\n\n// Temporary email domain blocklist\nconst BLOCKED_DOMAINS = new Set([\n  'tempmail.com',\n  '10minutemail.com',\n  'guerrillamail.com',\n  'mailinator.com',\n  'disposablemail.com',\n  'throwaway.email',\n  'yopmail.com',\n  'trashmail.com',\n  'temp-mail.com',\n  'maildrop.cc',\n  'sharklasers.com',\n  'tempmail.io',\n  'temp-mail.io',\n  'fakeinbox.com',\n  'mytrashmail.com',\n  '0-mail.com',\n  'jetable.org',\n  'pokemail.net',\n  'temp.email',\n  'tempalias.com',\n  'alias.email',\n  'hide.email',\n  'temp-mails.com',\n  'mailnesia.com',\n  'spam4.me',\n  'grr.la',\n  'temp.sh',\n  '1secmail.com',\n]);\n\nfunction isValidEmailDomain(email: string): boolean {\n  const domain = email.split('@')[1]?.toLowerCase();\n  if (!domain) return false;\n  if (BLOCKED_DOMAINS.has(domain)) return false;\n  // Basic check: must have at least one dot\n  if (!domain.includes('.')) return false;\n  return true;\n}\n\n// Map Portuguese book names to abbreviations\nconst BOOK_NAME_TO_ABBREV: Record<string, string> = {\n  'Gênesis': 'gn', 'Êxodo': 'ex', 'Levítico': 'lv', 'Números': 'nm', 'Deuteronômio': 'dt',\n  'Josué': 'js', 'Juízes': 'jz', 'Rute': 'rt', '1 Samuel': '1sm', '2 Samuel': '2sm',\n  '1 Reis': '1rs', '2 Reis': '2rs', '1 Crônicas': '1cr', '2 Crônicas': '2cr',\n  'Esdras': 'ed', 'Neemias': 'ne', 'Ester': 'et', 'Jó': 'job', 'Salmos': 'sl',\n  'Provérbios': 'pv', 'Eclesiastes': 'ec', 'Cânticos': 'ct', 'Isaías': 'is',\n  'Jeremias': 'jr', 'Lamentações': 'lm', 'Ezequiel': 'ez', 'Daniel': 'dn',\n  'Oséias': 'os', 'Joel': 'jl', 'Amós': 'am', 'Obadias': 'ob', 'Jonas': 'jn',\n  'Miquéias': 'mq', 'Naum': 'na', 'Habacuque': 'hc', 'Sofonias': 'sf',\n  'Ageu': 'ag', 'Zacarias': 'zc', 'Malaquias': 'ml',\n  'Mateus': 'mt', 'Marcos': 'mc', 'Lucas': 'lc', 'João': 'jo', 'Atos': 'at',\n  'Romanos': 'rm', '1 Coríntios': '1co', '2 Coríntios': '2co', 'Gálatas': 'gl',\n  'Efésios': 'ef', 'Filipenses': 'fp', 'Colossenses': 'cl',\n  '1 Tessalonicenses': '1ts', '2 Tessalonicenses': '2ts',\n  '1 Timóteo': '1tm', '2 Timóteo': '2tm', 'Tito': 'tt', 'Filemom': 'fm',\n  'Hebreus': 'hb', 'Tiago': 'tg', '1 Pedro': '1pe', '2 Pedro': '2pe',\n  '1 João': '1jo', '2 João': '2jo', '3 João': '3jo', 'Judas': 'jd', 'Apocalipse': 'ap',\n};\n\nfunction getBookAbbreviation(bookName: string): string {\n  return BOOK_NAME_TO_ABBREV[bookName] || bookName.toLowerCase().substring(0, 2);\n}\nimport {\n  initPushTables,\n  getVapidPublicKey,\n  savePushSubscription,\n  removePushSubscription,\n  getNotificationPreferences,\n  updateNotificationPreferences,\n  sendPushNotification,\n  markNotificationClicked,\n  getRandomInsight,\n} from \"./push-notifications\";\n\n// Initialize Stripe (from javascript_stripe blueprint)\n// User will need to configure STRIPE_SECRET_KEY in environment variables\nlet stripe: Stripe | null = null;\nif (process.env.STRIPE_SECRET_KEY) {\n  stripe = new Stripe(process.env.STRIPE_SECRET_KEY, {\n    apiVersion: \"2025-11-17.clover\",\n  });\n} else {\n  console.warn(\"⚠️  STRIPE_SECRET_KEY not found - donation features will be disabled\");\n}\n\n// AI Rate Limiting Constants - Limits by plan\n// FREE: 20 total (never resets) - must subscribe to continue\n// Monthly: 500/month (resets monthly)\n// Yearly/Annual: 3750/year (resets yearly)\n// Premium Plus: 7200/year (resets yearly)\nconst AI_PLAN_LIMITS: Record<string, { limit: number; resetPeriod: 'never' | 'monthly' | 'yearly' }> = {\n  free: { limit: 20, resetPeriod: 'never' },\n  monthly: { limit: 500, resetPeriod: 'monthly' },\n  yearly: { limit: 3750, resetPeriod: 'yearly' },\n  annual: { limit: 3750, resetPeriod: 'yearly' },\n  premium_plus: { limit: 7200, resetPeriod: 'yearly' },\n};\n\nconst AI_REQUEST_COST = 0.01; // Cost per AI request in USD (for tracking)\n\n// Helper to check AI quota for ALL users (based on their plan limits)\nasync function checkAiQuota(userId: string): Promise<{ allowed: boolean; remaining: number; limit: number; plan: string; message?: string }> {\n  try {\n    if (!userId || userId === 'guest') {\n      return { \n        allowed: false, \n        remaining: 0, \n        limit: 0, \n        plan: 'guest',\n        message: \"Faça login para usar os recursos de IA.\"\n      };\n    }\n\n    const user = await storage.getUser(userId);\n    \n    if (!user) {\n      console.warn(`[AI Quota] User not found: ${userId} - blocking AI access`);\n      return { \n        allowed: false, \n        remaining: 0, \n        limit: 20, \n        plan: 'free',\n        message: \"Usuário não encontrado. Faça login novamente para usar a IA.\"\n      };\n    }\n    \n    const plan = user.subscriptionPlan || 'free';\n    const config = AI_PLAN_LIMITS[plan] || AI_PLAN_LIMITS.free;\n    const now = new Date();\n    \n    let totalRequests = user.aiRequestsCount || 0;\n    const resetAt = user.aiRequestsResetAt;\n    \n    if (config.resetPeriod !== 'never' && resetAt && now >= new Date(resetAt)) {\n      totalRequests = 0;\n    }\n    \n    const remaining = Math.max(0, config.limit - totalRequests);\n    \n    console.log(`[AI Quota] Check: user=${userId}, plan=${plan}, used=${totalRequests}/${config.limit}, remaining=${remaining}`);\n    \n    if (totalRequests >= config.limit) {\n      let message = \"\";\n      \n      if (plan === 'free') {\n        message = \"Você esgotou suas 20 perguntas gratuitas. Para continuar usando a IA, assine um de nossos planos.\";\n      } else if (plan === 'monthly') {\n        message = `Você usou todas as ${config.limit} perguntas do mês. O limite será renovado no próximo mês.`;\n      } else if (plan === 'yearly' || plan === 'annual') {\n        message = `Você usou todas as ${config.limit} perguntas do ano. O limite será renovado no próximo período.`;\n      } else if (plan === 'premium_plus') {\n        message = `Você usou todas as ${config.limit} perguntas do ano. Entre em contato para um plano customizado.`;\n      }\n      \n      return {\n        allowed: false,\n        remaining: 0,\n        limit: config.limit,\n        plan,\n        message\n      };\n    }\n\n    const warningThreshold = Math.floor(config.limit * 0.75);\n    if (totalRequests >= warningThreshold && remaining > 0) {\n      let upgradeMessage = \"\";\n      \n      if (plan === 'free') {\n        upgradeMessage = `Atenção: Você tem apenas ${remaining} perguntas restantes. Assine um plano para continuar usando a IA.`;\n      } else {\n        upgradeMessage = `Atenção: Você tem ${remaining} perguntas restantes no período atual.`;\n      }\n      \n      return {\n        allowed: true,\n        remaining,\n        limit: config.limit,\n        plan,\n        message: upgradeMessage\n      };\n    }\n    \n    return { allowed: true, remaining, limit: config.limit, plan };\n  } catch (error) {\n    console.error(\"[AI Quota] Error checking quota - BLOCKING access as safety measure:\", error);\n    return { \n      allowed: false, \n      remaining: 0, \n      limit: 20, \n      plan: 'free',\n      message: \"Erro ao verificar sua cota de IA. Tente novamente mais tarde.\"\n    };\n  }\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  app.use(cookieParser());\n\n  if (process.env.NODE_ENV !== 'production') {\n    app.get('/sw.js', (req, res) => {\n      res.setHeader('Cache-Control', 'no-store, no-cache, must-revalidate');\n      res.setHeader('Content-Type', 'application/javascript');\n      res.send('self.addEventListener(\"install\",()=>{self.skipWaiting()});self.addEventListener(\"activate\",e=>{e.waitUntil(caches.keys().then(n=>Promise.all(n.map(k=>caches.delete(k)))).then(()=>self.registration.unregister()))});');\n    });\n  }\n\n  // Android App Links verification - serves assetlinks.json for Deep Links\n  app.get(\"/.well-known/assetlinks.json\", (req, res) => {\n    const assetLinks = [\n      {\n        relation: [\"delegate_permission/common.handle_all_urls\"],\n        target: {\n          namespace: \"android_app\",\n          package_name: \"com.bibliafullstack.app\",\n          sha256_cert_fingerprints: [\n            // Debug signing key fingerprint (for development APKs)\n            \"FA:C6:17:45:DC:09:03:78:6F:B9:ED:E6:2A:96:2B:39:9F:73:48:F0:BB:6F:89:9B:83:32:66:75:91:03:3B:9C\"\n          ]\n        }\n      }\n    ];\n    res.setHeader(\"Content-Type\", \"application/json\");\n    res.json(assetLinks);\n  });\n\n  // Serve bible.db in production (static file serving workaround)\n  // In development, Vite middleware serves from client/public\n  // In production, we need to serve from dist/public explicitly\n  const path = await import(\"path\");\n  const fs = await import(\"fs\");\n  const { fileURLToPath } = await import(\"url\");\n  \n  // Get directory name in ES modules (no __dirname in ES modules)\n  const currentDir = path.dirname(fileURLToPath(import.meta.url));\n  \n  app.get(\"/bible.db\", (req, res) => {\n    // Try multiple locations for the bible.db file\n    const possiblePaths = [\n      path.resolve(process.cwd(), \"dist/public/bible.db\"),\n      path.resolve(process.cwd(), \"client/public/bible.db\"),\n      path.resolve(currentDir, \"../dist/public/bible.db\"),\n      path.resolve(currentDir, \"../client/public/bible.db\"),\n    ];\n    \n    for (const filePath of possiblePaths) {\n      if (fs.existsSync(filePath)) {\n        res.setHeader(\"Content-Type\", \"application/octet-stream\");\n        res.setHeader(\"Cache-Control\", \"public, max-age=86400\"); // 24h cache\n        return res.sendFile(filePath);\n      }\n    }\n    \n    console.warn(\"[bible.db] File not found in any location:\", possiblePaths);\n    res.status(404).json({ error: \"bible.db not found\" });\n  });\n\n  // App version check endpoint for update popup\n  // LATEST_VERSION: Update this when releasing a new version to Play Store\n  // Quando lançar nova versão na Play Store, atualize este valor para mostrar o popup de atualização\n  const LATEST_VERSION = process.env.APP_LATEST_VERSION || \"1.0.9\";\n  \n  app.get(\"/api/app/version\", (req, res) => {\n    const currentVersion = req.query.current as string;\n    const isNativeHeader = req.headers['x-platform'] === 'android' || req.headers['user-agent']?.includes('Capacitor');\n    \n    if (!currentVersion) {\n      return res.json({\n        currentVersion: LATEST_VERSION,\n        latestVersion: LATEST_VERSION,\n        updateAvailable: false,\n        downloadSize: \"~18 MB\",\n        releaseNotes: []\n      });\n    }\n    \n    const updateAvailable = compareVersions(LATEST_VERSION, currentVersion) > 0;\n    \n    console.log(`[Version Check] Client: ${currentVersion}, Latest: ${LATEST_VERSION}, Update: ${updateAvailable}`);\n    \n    res.json({\n      currentVersion,\n      latestVersion: LATEST_VERSION,\n      updateAvailable,\n      downloadSize: \"~18 MB\",\n      releaseNotes: [\n        { icon: \"sparkles\", title: \"Design Premium\", description: \"Novo visual com cores suaves e elegantes\" },\n        { icon: \"zap\", title: \"Modo Offline\", description: \"Leia a Bíblia sem internet\" },\n        { icon: \"bug\", title: \"Correções\", description: \"Melhorias de estabilidade e performance\" },\n      ]\n    });\n  });\n  \n  // Compare semantic versions (returns 1 if a > b, -1 if a < b, 0 if equal)\n  function compareVersions(a: string, b: string): number {\n    const partsA = a.split('.').map(Number);\n    const partsB = b.split('.').map(Number);\n    \n    for (let i = 0; i < Math.max(partsA.length, partsB.length); i++) {\n      const numA = partsA[i] || 0;\n      const numB = partsB[i] || 0;\n      if (numA > numB) return 1;\n      if (numA < numB) return -1;\n    }\n    return 0;\n  }\n\n  // Atividade recente isolada por usuário\n  app.get(\"/api/activity/recent\", isAuthenticated, async (req, res) => {\n    try {\n      const user = (req as any).user;\n      if (!user || !user.id) {\n        return res.status(401).json({ error: \"Não autorizado\" });\n      }\n      const userId = user.id;\n      const { formatDistanceToNow } = await import(\"date-fns\");\n      const { ptBR } = await import(\"date-fns/locale\");\n\n      // Buscar orações recentes\n      const prayers = await storage.getPrayers(userId);\n      const recentPrayers = (prayers || []).slice(0, 2).map(p => ({\n        type: 'prayer',\n        text: \"Nova oração registrada\",\n        time: formatDistanceToNow(new Date(p.createdAt || new Date()), { addSuffix: true, locale: ptBR }),\n        date: new Date(p.createdAt || new Date())\n      }));\n\n      // Buscar posts recentes\n      const posts = await storage.getCommunityPosts(10, userId);\n      const recentPosts = (posts || [])\n        .filter(p => p.userId === userId)\n        .slice(0, 2)\n        .map(p => ({\n          type: 'post',\n          text: \"Você publicou na comunidade\",\n          time: formatDistanceToNow(new Date(p.createdAt || new Date()), { addSuffix: true, locale: ptBR }),\n          date: new Date(p.createdAt || new Date())\n        }));\n\n      // Buscar planos de leitura ativos\n      const plans = await storage.getReadingPlans(userId);\n      const recentPlans = (plans || [])\n        .filter(p => p.updatedAt) // Somente planos que tiveram progresso real\n        .slice(0, 1)\n        .map(p => ({\n          type: 'read',\n          text: `Você progrediu no plano: ${p.title}`,\n          time: formatDistanceToNow(new Date(p.updatedAt!), { addSuffix: true, locale: ptBR }),\n          date: new Date(p.updatedAt!)\n        }));\n\n      const allActivity = [...recentPrayers, ...recentPosts, ...recentPlans]\n        .sort((a, b) => b.date.getTime() - a.date.getTime())\n        .slice(0, 5);\n\n      res.json(allActivity);\n    } catch (error) {\n      console.error(\"[Activity] Error:\", error);\n      res.status(500).json({ error: \"Erro ao buscar atividades\" });\n    }\n  });\n\n  // --- Group Meetings & Resources ---\n\n  app.get(\"/api/groups/:groupId/meetings\", isAuthenticated, async (req, res) => {\n    try {\n      const meetings = await storage.getGroupMeetings(req.params.groupId);\n      res.json(meetings);\n    } catch (error: any) {\n      console.error(\"[Meetings] Error fetching meetings:\", error?.message || error);\n      res.json([]);\n    }\n  });\n\n  app.post(\"/api/groups/:groupId/meetings\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      console.log(\"[Meetings] Creating meeting, userId:\", userId, \"body:\", JSON.stringify(req.body));\n      \n      let meetingDateStr = req.body.meetingDate;\n      let meetingDate: Date;\n      if (meetingDateStr) {\n        if (!meetingDateStr.includes('T') && !meetingDateStr.includes('Z') && !meetingDateStr.includes('+')) {\n          meetingDateStr = meetingDateStr + ':00';\n        }\n        meetingDate = new Date(meetingDateStr + (meetingDateStr.includes('Z') || meetingDateStr.includes('+') ? '' : '-03:00'));\n      } else {\n        meetingDate = new Date();\n      }\n      \n      const meetingData = {\n        groupId: req.params.groupId,\n        createdBy: userId,\n        title: req.body.title || \"Reunião\",\n        description: req.body.description || null,\n        meetingDate,\n        location: req.body.location || null,\n        isOnline: req.body.isOnline || false,\n        meetingLink: req.body.meetingLink || null,\n      };\n      const meeting = await storage.createGroupMeeting(meetingData as any);\n      res.json(meeting);\n    } catch (error: any) {\n      console.error(\"[Meetings] Error creating meeting:\", error);\n      res.status(500).json({ error: \"Erro ao criar reunião\" });\n    }\n  });\n\n  app.patch(\"/api/groups/:groupId/meetings/:meetingId\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { groupId, meetingId } = req.params;\n      const userId = req.user.claims.sub;\n      \n      let meetingDateStr = req.body.meetingDate;\n      let meetingDate: Date | undefined;\n      if (meetingDateStr) {\n        if (!meetingDateStr.includes('T') && !meetingDateStr.includes('Z') && !meetingDateStr.includes('+')) {\n          meetingDateStr = meetingDateStr + ':00';\n        }\n        meetingDate = new Date(meetingDateStr + (meetingDateStr.includes('Z') || meetingDateStr.includes('+') ? '' : '-03:00'));\n      }\n\n      const updated = await storage.updateGroupMeeting(meetingId, userId, {\n        ...req.body,\n        meetingDate: meetingDate || undefined,\n      });\n      \n      if (updated) {\n        res.json(updated);\n      } else {\n        res.status(404).json({ error: \"Reunião não encontrada ou sem permissão\" });\n      }\n    } catch (error) {\n      console.error(\"[Meetings] Error updating meeting:\", error);\n      res.status(500).json({ error: \"Erro ao atualizar reunião\" });\n    }\n  });\n\n  app.delete(\"/api/groups/:groupId/meetings/:meetingId\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { groupId, meetingId } = req.params;\n      const userId = req.user.claims.sub;\n      const success = await storage.deleteGroupMeeting(meetingId, userId);\n      if (success) {\n        res.json({ message: \"Reunião excluída\" });\n      } else {\n        res.status(404).json({ error: \"Reunião não encontrada\" });\n      }\n    } catch (error) {\n      res.status(500).json({ error: \"Erro ao excluir reunião\" });\n    }\n  });\n\n  app.get(\"/api/groups/:groupId/resources\", isAuthenticated, async (req, res) => {\n    try {\n      const resources = await storage.getGroupResources(req.params.groupId);\n      res.json(resources);\n    } catch (error: any) {\n      console.error(\"[Resources] Error fetching resources:\", error?.message || error);\n      res.json([]);\n    }\n  });\n\n  app.post(\"/api/groups/:groupId/resources\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      console.log(\"[Resources] Creating resource, userId:\", userId, \"body:\", JSON.stringify(req.body));\n      const resourceData = {\n        groupId: req.params.groupId,\n        createdBy: userId,\n        title: req.body.title || \"Recurso\",\n        description: req.body.description || null,\n        resourceType: req.body.resourceType || \"link\",\n        url: req.body.url || null,\n        lessonId: req.body.lessonId || null,\n      };\n      const resource = await storage.createGroupResource(resourceData as any);\n      res.json(resource);\n    } catch (error: any) {\n      console.error(\"[Resources] Error creating resource:\", error);\n      res.status(500).json({ error: \"Erro ao criar recurso\" });\n    }\n  });\n  \n  // Initialize push notification tables\n  await initPushTables();\n  \n  // Import bcrypt for password reset\n  const bcrypt = await import(\"bcryptjs\");\n\n  // Password Reset Token Storage (in-memory for simplicity)\n  const resetTokens = new Map<string, { email: string; expiresAt: number }>();\n\n  // Generate secure random token\n  function generateResetToken(): string {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let token = '';\n    for (let i = 0; i < 64; i++) {\n      token += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return token;\n  }\n\n  // Google OAuth - Custom flow through backend (shows bibliafs.com.br on Google consent screen)\n  const GOOGLE_CLIENT_ID = process.env.VITE_GOOGLE_CLIENT_ID;\n  const GOOGLE_CLIENT_SECRET = process.env.GOOGLE_CLIENT_SECRET;\n  const GOOGLE_OAUTH_APP_URL = process.env.VITE_APP_URL || 'https://bibliafs.com.br';\n\n  const crypto = await import(\"crypto\");\n  const pendingOAuthStates = new Map<string, { createdAt: number }>();\n\n  setInterval(() => {\n    const now = Date.now();\n    Array.from(pendingOAuthStates.entries()).forEach(([state, data]) => {\n      if (now - data.createdAt > 10 * 60 * 1000) {\n        pendingOAuthStates.delete(state);\n      }\n    });\n  }, 60 * 1000);\n\n  app.get('/api/auth/google/debug', (req, res) => {\n    res.json({\n      hasClientId: !!GOOGLE_CLIENT_ID,\n      clientIdPrefix: GOOGLE_CLIENT_ID ? GOOGLE_CLIENT_ID.substring(0, 10) + '...' : 'missing',\n      hasClientSecret: !!GOOGLE_CLIENT_SECRET,\n      secretLength: GOOGLE_CLIENT_SECRET ? GOOGLE_CLIENT_SECRET.length : 0,\n      appUrl: GOOGLE_OAUTH_APP_URL,\n      redirectUri: `${GOOGLE_OAUTH_APP_URL}/api/auth/google/callback`,\n      nodeEnv: process.env.NODE_ENV,\n    });\n  });\n\n  app.get('/api/auth/google', (req, res) => {\n    try {\n      if (!GOOGLE_CLIENT_ID) {\n        return res.status(500).json({ message: \"Google OAuth not configured\" });\n      }\n\n      const redirectUri = `${GOOGLE_OAUTH_APP_URL}/api/auth/google/callback`;\n      const state = crypto.randomBytes(32).toString('hex');\n\n      res.cookie('oauth_state', state, {\n        httpOnly: true,\n        secure: true,\n        sameSite: 'lax',\n        maxAge: 10 * 60 * 1000,\n        path: '/',\n      });\n\n      const params = new URLSearchParams({\n        client_id: GOOGLE_CLIENT_ID,\n        redirect_uri: redirectUri,\n        response_type: 'code',\n        scope: 'openid email profile',\n        state: state,\n      });\n\n      const googleAuthUrl = `https://accounts.google.com/o/oauth2/v2/auth?${params.toString()}`;\n      console.log(\"[Google OAuth] Redirecting to Google with redirect_uri:\", redirectUri);\n      res.redirect(googleAuthUrl);\n    } catch (error: any) {\n      console.error(\"[Google OAuth] Error initiating flow:\", error);\n      res.redirect(`${GOOGLE_OAUTH_APP_URL}/login?error=google_init_failed`);\n    }\n  });\n\n  app.get('/api/auth/google/callback', async (req, res) => {\n    try {\n      const { code, error: oauthError, state } = req.query;\n\n      if (oauthError) {\n        console.error(\"[Google OAuth Callback] Error from Google:\", oauthError);\n        return res.redirect(`${GOOGLE_OAUTH_APP_URL}/login?error=google_denied`);\n      }\n\n      const cookieState = req.cookies?.oauth_state;\n\n      if (!state || typeof state !== 'string') {\n        console.error(\"[Google OAuth Callback] Missing state parameter\");\n        return res.redirect(`${GOOGLE_OAUTH_APP_URL}/login?error=invalid_state`);\n      }\n\n      if (!cookieState || cookieState !== state) {\n        console.error(\"[Google OAuth Callback] State mismatch - cookie:\", cookieState ? \"present\" : \"missing\", \"query state:\", state ? \"present\" : \"missing\");\n        return res.redirect(`${GOOGLE_OAUTH_APP_URL}/login?error=invalid_state`);\n      }\n\n      res.clearCookie('oauth_state', { path: '/' });\n\n      if (!code || typeof code !== 'string') {\n        console.error(\"[Google OAuth Callback] No code received\");\n        return res.redirect(`${GOOGLE_OAUTH_APP_URL}/login?error=no_code`);\n      }\n\n      if (!GOOGLE_CLIENT_ID || !GOOGLE_CLIENT_SECRET) {\n        console.error(\"[Google OAuth Callback] Missing Google credentials\");\n        return res.redirect(`${GOOGLE_OAUTH_APP_URL}/login?error=config_error`);\n      }\n\n      const redirectUri = `${GOOGLE_OAUTH_APP_URL}/api/auth/google/callback`;\n\n      const tokenResponse = await fetch('https://oauth2.googleapis.com/token', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n        body: new URLSearchParams({\n          code,\n          client_id: GOOGLE_CLIENT_ID,\n          client_secret: GOOGLE_CLIENT_SECRET,\n          redirect_uri: redirectUri,\n          grant_type: 'authorization_code',\n        }),\n      });\n\n      const tokenData = await tokenResponse.json();\n\n      if (!tokenResponse.ok || !tokenData.id_token) {\n        const errDetail = tokenData.error_description || tokenData.error || 'unknown';\n        console.error(\"[Google OAuth Callback] Token exchange failed. Status:\", tokenResponse.status, \"Error:\", tokenData.error, \"Description:\", tokenData.error_description, \"Redirect URI used:\", redirectUri);\n        return res.redirect(`${GOOGLE_OAUTH_APP_URL}/login?error=token_exchange_failed&detail=${encodeURIComponent(errDetail)}`);\n      }\n\n      console.log(\"[Google OAuth Callback] Token exchange successful, signing in with Supabase\");\n\n      const supabaseUrl = process.env.SUPABASE_URL || process.env.VITE_SUPABASE_URL;\n      const supabaseAnonKey = process.env.SUPABASE_ANON_KEY || process.env.VITE_SUPABASE_ANON_KEY;\n\n      if (!supabaseUrl || !supabaseAnonKey) {\n        console.error(\"[Google OAuth Callback] Supabase not configured\");\n        return res.redirect(`${GOOGLE_OAUTH_APP_URL}/login?error=supabase_config`);\n      }\n\n      const { createClient } = await import(\"@supabase/supabase-js\");\n      const supabaseClient = createClient(supabaseUrl, supabaseAnonKey, {\n        auth: { autoRefreshToken: false, persistSession: false },\n      });\n\n      const { data: authData, error: signInError } = await supabaseClient.auth.signInWithIdToken({\n        provider: 'google',\n        token: tokenData.id_token,\n        access_token: tokenData.access_token,\n      });\n\n      if (signInError || !authData.session) {\n        console.error(\"[Google OAuth Callback] Supabase signInWithIdToken error:\", signInError?.message);\n        return res.redirect(`${GOOGLE_OAUTH_APP_URL}/login?error=supabase_auth_failed`);\n      }\n\n      console.log(\"[Google OAuth Callback] Supabase auth successful, user:\", authData.user?.email);\n\n      const accessToken = authData.session.access_token;\n      const refreshToken = authData.session.refresh_token;\n\n      const redirectUrl = `${GOOGLE_OAUTH_APP_URL}/auth/callback#access_token=${encodeURIComponent(accessToken)}&refresh_token=${encodeURIComponent(refreshToken)}&token_type=bearer&type=signup`;\n\n      res.redirect(redirectUrl);\n    } catch (error: any) {\n      console.error(\"[Google OAuth Callback] Unexpected error:\", error.message);\n      res.redirect(`${GOOGLE_OAUTH_APP_URL}/login?error=unexpected`);\n    }\n  });\n\n  // Forgot password - request reset link\n  app.post('/api/auth/forgot-password', async (req, res) => {\n    try {\n      const { email } = req.body;\n      \n      if (!email) {\n        return res.status(400).json({ message: \"Email é obrigatório\" });\n      }\n\n      const user = await storage.getUserByEmail(email);\n      \n      if (!user) {\n        console.log(`[Forgot Password] Email not found: ${email}`);\n        return res.json({ message: \"Se este email estiver cadastrado, você receberá um link de recuperação.\" });\n      }\n\n      const token = generateResetToken();\n      const expiresAt = Date.now() + 60 * 60 * 1000;\n      resetTokens.set(token, { email: user.email!, expiresAt });\n\n      const entriesToDelete: string[] = [];\n      resetTokens.forEach((data, t) => {\n        if (data.expiresAt < Date.now()) entriesToDelete.push(t);\n      });\n      entriesToDelete.forEach(t => resetTokens.delete(t));\n\n      const baseUrl = process.env.NODE_ENV === 'production' \n        ? 'https://bibliafs.com.br'\n        : process.env.REPLIT_DOMAINS \n          ? `https://${process.env.REPLIT_DOMAINS.split(',')[0]}`\n          : `${req.protocol}://${req.get('host')}`;\n\n      let emailSent = false;\n      const gmailPassword = process.env.GMAIL_APP_PASSWORD;\n      const gmailUser = 'bibliafs3@gmail.com';\n      const resetLink = `${baseUrl}/reset-password?token=${token}`;\n\n      if (gmailPassword) {\n        try {\n          console.log(`[Forgot Password] Sending via Gmail SMTP to: ${email}`);\n          const transporter = nodemailer.createTransport({\n            host: 'smtp.gmail.com',\n            port: 465,\n            secure: true,\n            auth: { user: gmailUser, pass: gmailPassword },\n          });\n\n          await transporter.sendMail({\n            from: `\"BíbliaFS\" <${gmailUser}>`,\n            to: email,\n            subject: 'Recuperação de Senha - BíbliaFS',\n            html: `\n              <div style=\"font-family: Arial, sans-serif; max-width: 500px; margin: 0 auto; padding: 20px;\">\n                <div style=\"text-align: center; margin-bottom: 20px;\">\n                  <h1 style=\"color: #667eea; margin: 0;\">BíbliaFS</h1>\n                </div>\n                <h2 style=\"color: #333;\">Recuperação de Senha</h2>\n                <p>Olá! Recebemos uma solicitação para redefinir sua senha no BíbliaFS.</p>\n                <p>Clique no botão abaixo para criar uma nova senha:</p>\n                <div style=\"text-align: center; margin: 30px 0;\">\n                  <a href=\"${resetLink}\" style=\"background: #667eea; color: white; padding: 14px 28px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 16px; display: inline-block;\">\n                    Redefinir Senha\n                  </a>\n                </div>\n                <p style=\"color: #666; font-size: 13px;\">Se o botão não funcionar, copie e cole este link no seu navegador:</p>\n                <p style=\"color: #667eea; font-size: 12px; word-break: break-all;\">${resetLink}</p>\n                <hr style=\"border: none; border-top: 1px solid #eee; margin: 20px 0;\" />\n                <p style=\"color: #999; font-size: 12px;\">Este link expira em 1 hora. Se você não solicitou a redefinição, ignore este email.</p>\n              </div>\n            `,\n          });\n          emailSent = true;\n          console.log(`[Password Reset] Email ENVIADO via Gmail SMTP para: ${email}`);\n        } catch (gmailError: any) {\n          console.error(\"[Forgot Password] Gmail SMTP error:\", gmailError.message);\n        }\n      } else {\n        console.warn(\"[Forgot Password] GMAIL_APP_PASSWORD not configured, trying Supabase...\");\n      }\n\n      if (!emailSent && supabaseAdmin) {\n        try {\n          const redirectTo = `${baseUrl}/reset-password`;\n          console.log(`[Forgot Password] Fallback: Trying Supabase. RedirectTo: ${redirectTo}`);\n          const { error: resetError } = await supabaseAdmin.auth.resetPasswordForEmail(email, { redirectTo });\n          if (!resetError) {\n            emailSent = true;\n            console.log(`[Password Reset] Email enviado via Supabase para: ${email}`);\n          } else {\n            console.warn(\"[Forgot Password] Supabase also failed:\", resetError.message);\n          }\n        } catch (supaError: any) {\n          console.warn(\"[Forgot Password] Supabase exception:\", supaError.message);\n        }\n      }\n\n      if (emailSent) {\n        console.log(`[Password Reset] Email enviado com sucesso para: ${email}`);\n      } else {\n        console.error(`[Password Reset] FALHA TOTAL: Nenhum método funcionou para: ${email}`);\n      }\n\n      return res.json({ message: \"Se este email estiver cadastrado, você receberá um link de recuperação.\" });\n    } catch (error: any) {\n      console.error(\"Erro ao processar forgot-password:\", error);\n      res.status(500).json({ message: \"Erro ao processar solicitação\" });\n    }\n  });\n\n  // Reset password - set new password\n  app.post('/api/auth/reset-password', async (req, res) => {\n    try {\n      const { token, password } = req.body;\n      \n      if (!token || !password) {\n        return res.status(400).json({ message: \"Token e senha são obrigatórios\" });\n      }\n\n      if (password.length < 6) {\n        return res.status(400).json({ message: \"Senha deve ter pelo menos 6 caracteres\" });\n      }\n\n      // Find and validate token\n      const tokenData = resetTokens.get(token);\n      \n      if (!tokenData) {\n        return res.status(400).json({ message: \"Link inválido ou expirado. Solicite um novo link.\" });\n      }\n\n      if (tokenData.expiresAt < Date.now()) {\n        resetTokens.delete(token);\n        return res.status(400).json({ message: \"Link expirado. Solicite um novo link.\" });\n      }\n\n      // Find user\n      const user = await storage.getUserByEmail(tokenData.email);\n      if (!user) {\n        resetTokens.delete(token);\n        return res.status(400).json({ message: \"Usuário não encontrado\" });\n      }\n\n      const passwordHash = await bcrypt.hash(password, 10);\n      await storage.updateUserPassword(user.id, passwordHash);\n\n      if (supabaseAdmin) {\n        try {\n          const { data: supaUsers } = await supabaseAdmin.auth.admin.listUsers();\n          const supaUser = supaUsers?.users?.find((u: any) => u.email === tokenData.email);\n          if (supaUser) {\n            await supabaseAdmin.auth.admin.updateUserById(supaUser.id, { password });\n            console.log(`[Password Reset] Supabase password also updated for: ${tokenData.email}`);\n          }\n        } catch (supaErr: any) {\n          console.warn(\"[Password Reset] Could not update Supabase password:\", supaErr.message);\n        }\n      }\n\n      resetTokens.delete(token);\n\n      console.log(`[Password Reset] Successful for: ${tokenData.email}`);\n      res.json({ message: \"Senha redefinida com sucesso\" });\n    } catch (error: any) {\n      console.error(\"Erro ao redefinir senha:\", error);\n      res.status(500).json({ message: \"Erro ao redefinir senha\" });\n    }\n  });\n\n  // Generate 6-digit OTP code\n  function generateOTPCode(): string {\n    return Math.floor(100000 + Math.random() * 900000).toString();\n  }\n\n  // Send OTP via email using Gmail SMTP (Nodemailer)\n  async function sendOTPEmail(email: string, code: string): Promise<boolean> {\n    try {\n      const gmailPassword = process.env.GMAIL_APP_PASSWORD;\n      const gmailUser = 'bibliafs3@gmail.com';\n\n      if (!gmailPassword) {\n        console.log(`[OTP Email] GMAIL_APP_PASSWORD not configured`);\n        console.log(`[OTP Email] Code for ${email}: ${code}`);\n        return true;\n      }\n\n      const transporter = nodemailer.createTransport({\n        host: 'smtp.gmail.com',\n        port: 465,\n        secure: true,\n        auth: {\n          user: gmailUser,\n          pass: gmailPassword,\n        },\n      });\n\n      await transporter.sendMail({\n        from: `\"BíbliaFS\" <${gmailUser}>`,\n        to: email,\n        subject: 'Código de Verificação - BíbliaFS',\n        html: `\n          <div style=\"font-family: Arial, sans-serif; max-width: 500px; margin: 0 auto; padding: 20px;\">\n            <h2 style=\"color: #333;\">Bem-vindo à BíbliaFS!</h2>\n            <p>Seu código de verificação é:</p>\n            <div style=\"background: #f0f0f0; padding: 20px; text-align: center; border-radius: 8px; margin: 20px 0;\">\n              <h1 style=\"font-size: 36px; color: #667eea; letter-spacing: 5px; margin: 0;\">${code}</h1>\n            </div>\n            <p style=\"color: #666;\">Este código expira em 1 hora.</p>\n            <p style=\"color: #999; font-size: 12px;\">Que a Palavra de Deus ilumine seus dias!</p>\n          </div>\n        `,\n      });\n\n      console.log(`[OTP Email] Email enviado para ${email}`);\n      return true;\n\n    } catch (error) {\n      console.error(\"[OTP Email] Erro ao enviar:\", error);\n      console.log(`[OTP Email] Code for ${email}: ${code}`);\n      return true;\n    }\n  }\n\n  // Register with OTP code (creates user and sends 6-digit code)\n  app.post('/api/auth/register-with-otp', async (req, res) => {\n    try {\n      const { email, password, firstName, lastName } = req.body;\n      \n      if (!email || !password) {\n        return res.status(400).json({ message: \"Email e senha são obrigatórios\" });\n      }\n\n      // Validate email domain (block temporary/disposable emails)\n      if (!isValidEmailDomain(email)) {\n        return res.status(400).json({ message: \"Por favor, use um endereço de e-mail válido. E-mails temporários não são permitidos.\" });\n      }\n      \n      if (!supabaseAdmin) {\n        throw new Error(\"Supabase Admin client not initialized\");\n      }\n      const { data: newUser, error: createError } = await supabaseAdmin.auth.admin.createUser({\n        email,\n        password,\n        email_confirm: false,\n        user_metadata: {\n          first_name: firstName,\n          last_name: lastName,\n        },\n      });\n      \n      if (createError || !newUser?.user) {\n        console.error(\"[Register OTP] Error creating user:\", createError);\n        \n        // Check for specific error messages\n        const errorMessage = createError?.message || \"Erro ao criar conta\";\n        const errorCode = (createError as any)?.code || \"\";\n        \n        // Email already exists\n        if (errorMessage.includes(\"already\") || errorCode === \"email_exists\") {\n          return res.status(400).json({ message: \"Este e-mail já está registrado. Tente fazer login ou use um e-mail diferente.\" });\n        }\n        \n        if (errorMessage.includes(\"password\")) {\n          return res.status(400).json({ message: \"A senha deve ter pelo menos 6 caracteres.\" });\n        }\n        \n        return res.status(400).json({ message: errorMessage });\n      }\n      \n      console.log(`✅ User created: ${email}`);\n      \n      // Generate 6-digit OTP code\n      const code = generateOTPCode();\n      const expiresAt = new Date(Date.now() + 60 * 60 * 1000); // 1 hour\n      \n      // Delete old OTPs for this email\n      await storage.deleteOTPByEmail(email);\n      \n      // Save OTP to database\n      await storage.createOTP({ email, code, expiresAt });\n      \n      // Send email with the OTP code\n      const emailSent = await sendOTPEmail(email, code);\n      \n      if (!emailSent) {\n        console.warn(`[Register OTP] Email sending failed, but user was created. Code: ${code}`);\n      }\n      \n      console.log(`[Register OTP] OTP created for ${email}, expires at ${expiresAt.toISOString()}`);\n      \n      res.json({ \n        message: \"Conta criada! Verifique seu e-mail para o código OTP.\",\n        email,\n        userId: newUser.user.id,\n        // In development, return code for testing\n        ...(process.env.NODE_ENV !== 'production' && { code }),\n      });\n    } catch (error: any) {\n      console.error(\"[Register OTP] Unexpected error:\", error);\n      res.status(500).json({ message: \"Erro ao criar conta: \" + (error?.message || \"erro desconhecido\") });\n    }\n  });\n\n  app.post('/api/auth/verify-otp', async (req, res) => {\n    try {\n      const { email, code, userId } = req.body;\n      \n      if (!email || !code) {\n        return res.status(400).json({ message: \"Email e codigo sao obrigatorios\" });\n      }\n      \n      if (code.length !== 6) {\n        return res.status(400).json({ message: \"Codigo deve ter 6 digitos\" });\n      }\n      \n      const isValid = await storage.verifyOTP(email, code);\n      \n      if (!isValid) {\n        return res.status(400).json({ message: \"Codigo invalido ou expirado\" });\n      }\n      \n      await storage.deleteOTPByEmail(email);\n      \n      if (supabaseAdmin) {\n        if (userId) {\n          const { error: confirmError } = await supabaseAdmin.auth.admin.updateUserById(userId, {\n            email_confirm: true,\n          });\n          if (confirmError) {\n            console.error(`[Verify OTP] Failed to confirm email for userId ${userId}:`, confirmError);\n            return res.status(500).json({ message: \"Erro ao confirmar email. Tente novamente.\" });\n          }\n          console.log(`✅ Email confirmed for user: ${email} (id: ${userId})`);\n        } else {\n          console.error(`[Verify OTP] No userId provided for ${email}, cannot confirm email`);\n          return res.status(400).json({ message: \"Erro interno: userId nao fornecido\" });\n        }\n      }\n      \n      console.log(`✅ Email verified: ${email}`);\n      res.json({ message: \"Email verificado com sucesso!\", verified: true });\n    } catch (error: any) {\n      console.error(\"[Verify OTP] Error:\", error);\n      res.status(500).json({ message: \"Erro ao verificar codigo\" });\n    }\n  });\n\n  // Resend OTP code\n  app.post('/api/auth/resend-otp', async (req, res) => {\n    try {\n      const { email } = req.body;\n      \n      if (!email) {\n        return res.status(400).json({ message: \"Email é obrigatório\" });\n      }\n      \n      // Generate new code\n      const code = generateOTPCode();\n      const expiresAt = new Date(Date.now() + 60 * 60 * 1000); // 1 hour\n      \n      // Delete old and create new\n      await storage.deleteOTPByEmail(email);\n      await storage.createOTP({ email, code, expiresAt });\n      \n      // Send email with the new OTP code\n      await sendOTPEmail(email, code);\n      \n      res.json({ \n        message: \"Novo código enviado!\",\n        ...(process.env.NODE_ENV !== 'production' && { code })\n      });\n    } catch (error: any) {\n      console.error(\"[Resend OTP] Error:\", error);\n      res.status(500).json({ message: \"Erro ao reenviar código\" });\n    }\n  });\n\n  // Debug: Create confirmed user (ONLY available in development)\n  app.post('/api/auth/debug/create-confirmed-user', async (req, res) => {\n    // SECURITY: Block in production\n    if (process.env.NODE_ENV === 'production' || process.env.REPLIT_DEPLOYMENT === '1') {\n      return res.status(404).json({ message: \"Not found\" });\n    }\n    \n    try {\n      const { email, password, firstName, lastName } = req.body;\n      \n      if (!email || !password) {\n        return res.status(400).json({ message: \"Email e senha são obrigatórios\" });\n      }\n\n      if (!supabaseAdmin) {\n        return res.status(500).json({ message: \"Supabase not configured\" });\n      }\n\n      // Create user using admin API - already confirmed\n      const { data, error } = await (supabaseAdmin.auth.admin as any).createUser({\n        email,\n        password,\n        email_confirm: true, // Mark as confirmed\n        user_metadata: {\n          first_name: firstName || 'User',\n          last_name: lastName || '',\n        },\n      });\n\n      if (error) {\n        console.error(\"[Debug] Create user error:\", error);\n        return res.status(400).json({ message: error.message });\n      }\n\n      console.log(\"[Debug] User created and confirmed:\", data.user?.id);\n      res.json({ message: \"Usuário criado e confirmado com sucesso!\", user: data.user });\n    } catch (error: any) {\n      console.error(\"[Debug] Error:\", error);\n      res.status(500).json({ message: \"Erro ao criar usuário\", error: error.message });\n    }\n  });\n\n  // Auth user endpoint\n  app.get('/api/auth/user', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const userEmail = req.user.claims.email;\n      let user = await storage.getUser(userId);\n      \n      if (!user) {\n        const isAdmin = userEmail === 'fabrisite1@gmail.com';\n        \n        user = await storage.upsertUser({\n          id: userId,\n          email: userEmail,\n          firstName: req.user.claims.first_name || 'User',\n          lastName: req.user.claims.last_name || '',\n          profileImageUrl: req.user.claims.profile_image_url,\n          role: isAdmin ? 'admin' : 'user',\n        });\n        \n        if (isAdmin) {\n          console.log(`✅ Admin user created: ${userEmail}`);\n        }\n      }\n      \n      // Omit passwordHash from response for security\n      const { passwordHash: _, ...safeUser } = user;\n      res.json(safeUser);\n    } catch (error: any) {\n      console.error(\"Erro ao buscar usuário:\", error);\n      res.status(500).json({ message: \"Falha ao buscar usuário\" });\n    }\n  });\n\n  // Logout endpoint\n  app.post('/api/auth/logout', isAuthenticated, async (req: any, res) => {\n    try {\n      // Sign out from Supabase\n      if (supabaseAdmin) {\n        await supabaseAdmin.auth.signOut();\n      }\n      res.json({ message: \"Logout realizado com sucesso\" });\n    } catch (error: any) {\n      console.error(\"Erro ao fazer logout:\", error);\n      res.status(500).json({ message: \"Falha ao fazer logout\" });\n    }\n  });\n\n  // Update user theme settings\n  app.patch('/api/settings/theme', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { selectedTheme, customTheme } = req.body;\n      \n      // Validation\n      if (!selectedTheme || typeof selectedTheme !== 'string') {\n        return res.status(400).json({ message: \"selectedTheme é obrigatório\" });\n      }\n      \n      const validThemes = ['classico', 'noite_sagrada', 'luz_do_dia', 'terra_santa', 'custom'];\n      if (!validThemes.includes(selectedTheme)) {\n        return res.status(400).json({ message: \"Tema inválido\" });\n      }\n      \n      // If custom theme, REQUIRE customTheme object with valid structure\n      if (selectedTheme === 'custom') {\n        if (!customTheme || typeof customTheme !== 'object') {\n          return res.status(400).json({ message: \"customTheme é obrigatório para tema personalizado\" });\n        }\n        if (!customTheme.primaryColor || typeof customTheme.primaryColor !== 'string') {\n          return res.status(400).json({ message: \"customTheme.primaryColor é obrigatório\" });\n        }\n        if (!customTheme.accentColor || typeof customTheme.accentColor !== 'string') {\n          return res.status(400).json({ message: \"customTheme.accentColor é obrigatório\" });\n        }\n        if (!customTheme.backgroundColor || typeof customTheme.backgroundColor !== 'string') {\n          return res.status(400).json({ message: \"customTheme.backgroundColor é obrigatório\" });\n        }\n      }\n      \n      const updatedUser = await storage.updateUserTheme(userId, {\n        selectedTheme,\n        customTheme: selectedTheme === 'custom' ? customTheme : null,\n      });\n      \n      res.json(updatedUser);\n    } catch (error: any) {\n      console.error(\"Erro ao salvar tema:\", error);\n      res.status(500).json({ message: \"Falha ao salvar tema\" });\n    }\n  });\n\n  // Upload profile image\n  app.post('/api/profile/upload-image', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { imageData } = req.body;\n\n      if (!imageData || typeof imageData !== 'string') {\n        return res.status(400).json({ message: \"imageData é obrigatório\" });\n      }\n\n      // Validate base64 image (should start with data:image/)\n      if (!imageData.startsWith('data:image/')) {\n        return res.status(400).json({ message: \"Formato de imagem inválido\" });\n      }\n\n      const updatedUser = await storage.updateUserImage(userId, imageData);\n      res.json(updatedUser);\n    } catch (error: any) {\n      console.error(\"Erro ao fazer upload de imagem:\", error);\n      res.status(500).json({ message: \"Falha ao fazer upload de imagem\" });\n    }\n  });\n\n  // Dashboard Stats\n  app.get(\"/api/stats/dashboard\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const stats = await storage.getDashboardStats(userId);\n      res.json(stats);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Reading Plans Routes\n  app.get(\"/api/reading-plans\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const plans = await storage.getReadingPlans(userId);\n      res.json(plans);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.get(\"/api/reading-plans/current\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const plan = await storage.getCurrentReadingPlan(userId);\n      res.json(plan || null);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/reading-plans\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { totalDays, title, description, ...rest } = req.body;\n      \n      // Generate schedule array matching schema structure\n      const schedule = [];\n      for (let day = 1; day <= (totalDays || 30); day++) {\n        schedule.push({\n          day,\n          readings: [], // Matches schema: readings: { book, chapter, verses? }[]\n          isCompleted: false,\n        });\n      }\n      \n      const result = insertReadingPlanSchema.safeParse({\n        ...rest,\n        title,\n        description,\n        schedule,\n        totalDays: totalDays || 30,\n        userId,\n      });\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      const plan = await storage.createReadingPlan(result.data);\n      res.json(plan);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/reading-plans/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const planId = req.params.id;\n      \n      // Re-validar com safeParse (partial para PATCH)\n      const partialSchema = insertReadingPlanSchema.partial();\n      const result = partialSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      // CRITICAL SECURITY: Strip userId from payload to prevent ownership escalation\n      const { userId: _, ...safeData } = result.data as any;\n      \n      // updateReadingPlan valida ownership internamente\n      const plan = await storage.updateReadingPlan(planId, userId, safeData as any);\n      \n      if (!plan) {\n        return res.status(404).json({ error: \"Plano não encontrado ou acesso negado\" });\n      }\n      \n      res.json(plan);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/reading-plans/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const planId = req.params.id;\n      \n      // deleteReadingPlan retorna false se não encontrou/não deletou nada\n      const deleted = await storage.deleteReadingPlan(planId, userId);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Plano não encontrado ou acesso negado\" });\n      }\n      \n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Prayers Routes\n  app.get(\"/api/prayers\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const prayers = await storage.getPrayers(userId);\n      res.json(prayers);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/prayers\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      // Re-validar com safeParse\n      const result = insertPrayerSchema.safeParse({\n        ...req.body,\n        userId,\n      });\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      const prayer = await storage.createPrayer(result.data);\n      res.json(prayer);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/prayers/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const prayerId = req.params.id;\n      \n      // Re-validar dados com safeParse (partial para PATCH)\n      const partialSchema = insertPrayerSchema.partial();\n      const result = partialSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      // CRITICAL SECURITY: Strip userId from payload to prevent ownership escalation\n      const { userId: _, ...safeData } = result.data as any;\n      \n      // updatePrayer valida ownership internamente\n      const prayer = await storage.updatePrayer(prayerId, userId, safeData as any);\n      \n      if (!prayer) {\n        return res.status(404).json({ error: \"Oração não encontrada ou acesso negado\" });\n      }\n      \n      res.json(prayer);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/prayers/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      await storage.deletePrayer(req.params.id, userId);\n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Notes Routes\n  app.get(\"/api/notes\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const notes = await storage.getNotes(userId);\n      res.json(notes);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/notes\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      // Re-validar com safeParse\n      const result = insertNoteSchema.safeParse({\n        ...req.body,\n        userId,\n      });\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      const note = await storage.createNote(result.data);\n      res.json(note);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/notes/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      await storage.deleteNote(req.params.id, userId);\n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n\n  // Podcasts Routes\n  app.get(\"/api/podcasts\", async (req, res) => {\n    try {\n      const podcasts = await storage.getPodcasts();\n      res.json(podcasts);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.get(\"/api/podcasts/subscriptions\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const subscriptions = await storage.getUserPodcastSubscriptions(userId);\n      res.json(subscriptions);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/podcasts/subscribe\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      const result = insertPodcastSubscriptionSchema.safeParse({\n        ...req.body,\n        userId,\n      });\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      const subscription = await storage.subscribeToPodcast(result.data);\n      res.json(subscription);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/podcasts/subscribe/:podcastId\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      await storage.unsubscribeFromPodcast(userId, req.params.podcastId);\n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Update user profile (name)\n  app.patch(\"/api/user/profile\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { firstName, lastName } = req.body;\n\n      if (!firstName || !lastName) {\n        return res.status(400).json({ error: \"Primeiro e último nomes são obrigatórios\" });\n      }\n\n      if (firstName.length > 50 || lastName.length > 50) {\n        return res.status(400).json({ error: \"Nomes muito longos\" });\n      }\n\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ error: \"Usuário não encontrado\" });\n      }\n\n      const updated = await storage.updateUserTheme(userId, {\n        firstName: firstName.trim(),\n        lastName: lastName.trim(),\n      });\n\n      res.json({ success: true, user: updated });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Create user podcast - Auto-generates episodes based on Bible book\n  app.post(\"/api/podcasts\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { title, description, bibleBook, category } = req.body;\n      \n      console.log('[Podcast] Creating podcast:', { title, description, bibleBook, category, userId });\n      \n      // Validate required fields\n      if (!title || typeof title !== 'string' || title.trim().length === 0) {\n        return res.status(400).json({ error: \"Título é obrigatório\" });\n      }\n      \n      // Bible book is required for auto-generation\n      if (!bibleBook || typeof bibleBook !== 'string') {\n        return res.status(400).json({ error: \"Livro da Bíblia é obrigatório para criar um podcast\" });\n      }\n      \n      // Find the book in our fallback data to get chapter count\n      const { BIBLE_BOOKS_FALLBACK } = await import('./bible-books-fallback');\n      const bookInfo = BIBLE_BOOKS_FALLBACK.find(\n        (b: any) => b.name.toLowerCase() === bibleBook.toLowerCase() || \n                    b.abbrev.pt.toLowerCase() === bibleBook.toLowerCase()\n      );\n      \n      if (!bookInfo) {\n        return res.status(400).json({ error: \"Livro da Bíblia não encontrado\" });\n      }\n      \n      // Auto-generate episodes for each chapter\n      const episodes: Array<{\n        id: string;\n        title: string;\n        description: string;\n        audioData: string;\n        duration: number;\n        publishedAt: string;\n        chapterNumber: number;\n        bookAbbrev: string;\n      }> = [];\n      \n      for (let chapter = 1; chapter <= bookInfo.chapters; chapter++) {\n        episodes.push({\n          id: `ep-${bookInfo.abbrev.pt}-${chapter}-${Date.now()}`,\n          title: `${bookInfo.name} ${chapter}`,\n          description: `Leitura narrada de ${bookInfo.name} capítulo ${chapter}`,\n          audioData: \"\", // Audio will be generated on-demand when user plays\n          duration: 0, // Will be updated when audio is generated\n          publishedAt: new Date().toISOString(),\n          chapterNumber: chapter,\n          bookAbbrev: bookInfo.abbrev.pt,\n        });\n      }\n      \n      const podcastData = {\n        title: title.trim().substring(0, 200),\n        description: description ? description.substring(0, 1000) : `Leitura narrada de ${bookInfo.name} - ${bookInfo.chapters} capítulos`,\n        author: req.user.claims.username || \"BíbliaFS\",\n        category: (category || \"BíbliaFS Rádio\").substring(0, 50),\n        creatorId: userId,\n        bibleBook: bookInfo.name,\n        bibleChapter: null, // null means all chapters\n        language: \"pt\",\n        isActive: true,\n        accessLevel: \"free\",\n        episodes: episodes,\n        totalEpisodes: episodes.length,\n      };\n      \n      console.log('[Podcast] Auto-generated', episodes.length, 'episodes for', bookInfo.name);\n      \n      const podcast = await storage.createPodcast(podcastData);\n      \n      console.log('[Podcast] Saved successfully with', podcast.totalEpisodes, 'episodes');\n      \n      res.json(podcast);\n    } catch (error: any) {\n      console.error('[Podcast] Error:', error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Update podcast (title/description)\n  app.patch(\"/api/podcasts/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { title, description } = req.body;\n      \n      const podcast = await storage.getPodcast(req.params.id);\n      if (!podcast) {\n        return res.status(404).json({ error: \"Podcast não encontrado\" });\n      }\n      if (podcast.creatorId !== userId) {\n        return res.status(403).json({ error: \"Você não tem permissão para editar este podcast\" });\n      }\n      \n      const updates: any = {};\n      if (title && typeof title === 'string') {\n        updates.title = title.trim().substring(0, 200);\n      }\n      if (description !== undefined) {\n        updates.description = (description || \"\").substring(0, 1000);\n      }\n      \n      if (Object.keys(updates).length === 0) {\n        return res.status(400).json({ error: \"Nenhum campo para atualizar\" });\n      }\n      \n      await storage.updatePodcast(req.params.id, updates);\n      const updated = await storage.getPodcast(req.params.id);\n      \n      res.json(updated);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Delete podcast\n  app.delete(\"/api/podcasts/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      const podcast = await storage.getPodcast(req.params.id);\n      if (!podcast) {\n        return res.status(404).json({ error: \"Podcast não encontrado\" });\n      }\n      \n      // Permitir exclusão de podcasts padrão ou podcasts criados pelo usuário\n      const isDefaultPodcast = ['pod-1', 'pod-2', 'pod-3'].includes(podcast.id);\n      if (podcast.creatorId !== userId && !isDefaultPodcast) {\n        return res.status(403).json({ error: \"Você não tem permissão para excluir este podcast\" });\n      }\n      \n      await storage.deletePodcast(req.params.id);\n      \n      res.json({ success: true, message: \"Podcast excluído com sucesso\" });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Add episode to podcast\n  app.post(\"/api/podcasts/:id/episodes\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { title, description, audioData, duration } = req.body;\n      \n      // Validate required fields\n      if (!title || typeof title !== 'string' || title.trim().length === 0) {\n        return res.status(400).json({ error: \"Título do episódio é obrigatório\" });\n      }\n      \n      // Verify ownership\n      const podcast = await storage.getPodcast(req.params.id);\n      if (!podcast) {\n        return res.status(404).json({ error: \"Podcast não encontrado\" });\n      }\n      if (podcast.creatorId !== userId) {\n        return res.status(403).json({ error: \"Você não tem permissão para editar este podcast\" });\n      }\n      \n      // Check audio size (5MB limit for base64, which is ~7MB encoded)\n      if (audioData && typeof audioData === 'string' && audioData.length > 7 * 1024 * 1024) {\n        return res.status(400).json({ error: \"Áudio muito grande. Máximo 5MB.\" });\n      }\n      \n      // Validate duration (max 5 minutes = 300 seconds)\n      const validDuration = Math.min(Math.max(0, Number(duration) || 0), 300);\n      \n      const newEpisode = {\n        id: `ep-${Date.now()}`,\n        title: title.trim().substring(0, 200),\n        description: (description || \"\").substring(0, 1000),\n        audioData: audioData || \"\",\n        duration: validDuration,\n        publishedAt: new Date().toISOString(),\n      };\n      \n      // Safely merge episodes array\n      const existingEpisodes = Array.isArray(podcast.episodes) ? podcast.episodes : [];\n      const episodes = [...existingEpisodes, newEpisode];\n      \n      await storage.updatePodcast(req.params.id, {\n        episodes,\n        totalEpisodes: episodes.length,\n      });\n      \n      res.json(newEpisode);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get user's own podcasts\n  app.get(\"/api/podcasts/my\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const podcasts = await storage.getUserPodcasts(userId);\n      res.json(podcasts);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get single podcast with episodes\n  app.get(\"/api/podcasts/:id\", async (req, res) => {\n    try {\n      const podcast = await storage.getPodcast(req.params.id);\n      if (!podcast) {\n        return res.status(404).json({ error: \"Podcast não encontrado\" });\n      }\n      res.json(podcast);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Teacher/Lessons Routes\n  app.get(\"/api/teacher/lessons\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const lessons = await storage.getLessons(userId);\n      res.json(lessons);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.get(\"/api/teacher/lessons/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const lesson = await storage.getLesson(req.params.id);\n      res.json(lesson || null);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/teacher/lessons\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { scriptureBase, ...body } = req.body;\n      \n      // Transform scriptureBase into scriptureReferences if provided\n      let finalData: any = {\n        ...body,\n        teacherId: userId,\n      };\n      \n      if (scriptureBase) {\n        finalData.scriptureReferences = [{\n          book: \"Gênesis\", // Parse from scriptureBase in future\n          chapter: 1,\n          verses: scriptureBase,\n        }];\n      }\n      \n      // Validate with safeParse\n      const result = insertLessonSchema.safeParse(finalData);\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      const lesson = await storage.createLesson(result.data);\n      res.json(lesson);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // AI-powered lesson content generation\n  app.post(\"/api/teacher/generate-lesson-content\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { title, scriptureBase, duration = 50 } = req.body;\n      const userId = req.user?.id || req.user?.claims?.sub;\n      \n      if (!title || !scriptureBase) {\n        return res.status(400).json({ error: \"Título e texto-base são obrigatórios\" });\n      }\n\n      if (!process.env.OPENAI_API_KEY) {\n        return res.status(503).json({ error: \"Serviço de IA indisponível\" });\n      }\n      \n      // Check AI quota for free plan users\n      const quota = await checkAiQuota(userId);\n      if (!quota.allowed) {\n        return res.status(429).json({\n          error: quota.message,\n          remaining: quota.remaining,\n          limitReached: true\n        });\n      }\n\n      // Calcular quantidade de conteúdo baseado em duração\n      const numObjectives = duration <= 30 ? 3 : duration <= 60 ? 5 : 8;\n      const numContentBlocks = duration <= 30 ? 4 : duration <= 60 ? 8 : 12;\n      const numQuestions = duration <= 30 ? 5 : duration <= 60 ? 15 : 20;\n\n      const prompt = `Você é um assistente especializado em educação bíblica premium. Sua tarefa é gerar conteúdo EXTREMAMENTE DETALHADO, PROFUNDO e EXTENSO para uma aula bíblica de ${duration} minutos.\n\nATENÇÃO: O usuário reclamou que as descrições e conteúdos estão muito curtos. Você DEVE escrever textos longos, substantivos e teologicamente ricos.\n\nATENÇÃO - ABREVIAÇÕES BÍBLICAS IMPORTANTES:\n- \"Jo\" ou \"Jó\" = Livro de JÓ (Job) - Antigo Testamento, sobre sofrimento e fé\n- \"João\" ou \"Jo\" seguido de capítulo/versículo com números altos (ex: Jo 3:16) = Evangelho de JOÃO\n- \"1Jo\", \"2Jo\", \"3Jo\" = Epístolas de João\n- \"Js\" = Josué\n- \"Jz\" = Juízes\n- \"Jr\" = Jeremias\n- \"Jl\" = Joel\n- \"Jn\" = Jonas\n- \"Jd\" = Judas\n\nINTERPRETE O CONTEXTO: Se o usuário mencionar \"Jo\" sem capítulo/versículo OU com capítulos 1-42, provavelmente é o livro de JÓ.\n\nTítulo da Aula: ${title}\nTexto-Base: ${scriptureBase}\nDuração: ${duration} minutos\n\nESTRUTURA DA AULA (SEJA EXTENSO):\n1. Descrição Detalhada: Um texto de 2 a 3 parágrafos robustos explicando a importância teológica e o propósito da aula.\n2. ${numObjectives} Objetivos de aprendizado claros e pedagógicos.\n3. ${numContentBlocks} BLOCOS DE CONTEÚDO PRINCIPAL: Cada bloco deve ter um título e um texto de 3 a 4 parágrafos substanciais, com análise exegética, referências bíblicas (ex: João 3:16) e aplicações práticas profundas. Não use bullet points curtos, use prosa rica.\n4. ${numQuestions} PERGUNTAS PARA DISCUSSÃO com RESPOSTAS DETALHADAS: Cada resposta deve ter pelo menos 3 frases explicando a fundamentação bíblica.\n\nResponda em JSON com a seguinte estrutura:\n{\n  \"description\": \"Texto longo e detalhado da descrição...\",\n  \"objectives\": [\"Objetivo 1\", \"Objetivo 2\", ...],\n  \"contentBlocks\": [\n    {\n      \"title\": \"Título do bloco 1\",\n      \"content\": \"Texto longo e profundo do bloco 1...\"\n    },\n    ...\n  ],\n  \"questions\": [\n    {\"question\": \"Pergunta 1\", \"answer\": \"Resposta detalhada 1\"},\n    ...\n  ]\n}\n\nREGRAS OBRIGATÓRIAS:\n- Escreva MUITO conteúdo. Para uma aula de ${duration} minutos, o professor precisa de muito material de leitura.\n- ${numContentBlocks} blocos de conteúdo é o MÍNIMO absoluto.\n- ${numQuestions} perguntas e respostas é o MÍNIMO absoluto.\n- Use versículos bíblicos reais para fundamentar cada ponto.\n- TODAS as respostas em português do Brasil.`;\n\n      const openaiInstance = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });\n      const response = await openaiInstance.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [{ role: \"user\", content: prompt }],\n        response_format: { type: \"json_object\" },\n        temperature: 0.7,\n      });\n\n      const content = response.choices[0]?.message?.content;\n      if (!content) {\n        throw new Error(\"Resposta vazia da IA\");\n      }\n\n      const generated = JSON.parse(content);\n      \n      // Increment AI request counter for ALL users (function handles plan-specific logic)\n      await storage.incrementAiRequests(userId);\n      \n      res.json(generated);\n    } catch (error: any) {\n      console.error(\"Erro ao gerar conteúdo com IA:\", error);\n      res.status(500).json({ error: \"Falha ao gerar conteúdo\" });\n    }\n  });\n\n  // AI Assistant for Teachers - Ask questions about teaching content\n  app.post(\"/api/teacher/ask-assistant\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { question, context } = req.body;\n      const userId = req.user.claims.sub;\n      \n      if (!question) {\n        return res.status(400).json({ error: \"Pergunta é obrigatória\" });\n      }\n\n      if (!process.env.OPENAI_API_KEY) {\n        return res.status(503).json({ error: \"Serviço de IA indisponível\" });\n      }\n\n      // Check AI quota using centralized function\n      // FREE: 20 perguntas TOTAIS permanentes (NUNCA renova)\n      // Premium plans have their own budget-based limits\n      const quota = await checkAiQuota(userId);\n      if (!quota.allowed) {\n        return res.status(429).json({ \n          error: \"Limite de conversas atingido\",\n          message: quota.message,\n          limitReached: true,\n          remaining: quota.remaining\n        });\n      }\n\n      const prompt = `Você é um assistente pedagógico especializado em Educação Bíblica e teologia.\n\nREGRA DE OURO - FOCO TOTAL:\n- Analise a pergunta do professor: \"${question}\"\n- Identifique o tema ou livro específico mencionado.\n- Se o professor mencionou \"Jo\" (Jó), responda sobre o livro de JÓ (o homem de paciência). \n- Se o professor mencionou \"Joao\" (João), responda sobre o EVANGELHO DE JOÃO.\n- NUNCA confunda \"Jo\" (Jó) com \"João\". São livros e contextos completamente diferentes.\n- Responda EXCLUSIVAMENTE sobre o que foi perguntado.\n- NUNCA dê respostas genéricas sobre \"a Bíblia em geral\".\n\nContexto da Aula: ${context || \"Educação bíblica cristã\"}\nPergunta do Professor: ${question}\n\nIMPORTANTE: \n- Forneça uma resposta ESPECÍFICA e NÃO GENÉRICA.\n- Use exemplos concretos e versículos do livro/tema identificado.\n- Dê sugestões práticas para usar em sala de aula.\n- Responda em português brasileiro.`;\n\n      const openaiInstance = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });\n      const response = await openaiInstance.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [{ role: \"user\", content: prompt }],\n        temperature: 0.8,\n        max_tokens: 1500,\n      });\n\n      const answer = response.choices[0]?.message?.content;\n      if (!answer || answer.trim() === \"\") {\n        console.error(\"Resposta vazia da IA para pergunta:\", question, \"Response:\", response);\n        return res.status(500).json({ error: \"Resposta vazia da IA - tente novamente\" });\n      }\n\n      console.log(\"✅ Assistente respondeu com sucesso:\", { \n        question: question.substring(0, 50), \n        answerLength: answer.length,\n        answer: answer.substring(0, 150) \n      });\n\n      // Increment AI request counter for ALL users (function handles plan-specific logic)\n      const { totalCount, limit, plan: userPlan } = await storage.incrementAiRequests(userId);\n      \n      // Calculate remaining for frontend\n      const remaining = Math.max(0, limit - totalCount);\n      \n      res.json({ \n        answer,\n        conversationsUsed: totalCount,\n        conversationsLimit: limit,\n        conversationsRemaining: remaining,\n        remaining,\n        plan: userPlan,\n        limitReached: totalCount >= limit\n      });\n    } catch (error: any) {\n      console.error(\"Erro no assistente IA:\", error);\n      res.status(500).json({ error: \"Falha ao processar pergunta\" });\n    }\n  });\n\n  app.patch(\"/api/teacher/lessons/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const teacherId = req.user.claims.sub;\n      \n      // Use explicit partial schema that preserves nested validation\n      const result = updateLessonSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      // updateLesson valida ownership\n      const lesson = await storage.updateLesson(req.params.id, teacherId, result.data as any);\n      \n      if (!lesson) {\n        return res.status(404).json({ error: \"Aula não encontrada ou acesso negado\" });\n      }\n      \n      res.json(lesson);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/teacher/lessons/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const teacherId = req.user.claims.sub;\n      \n      // deleteLesson retorna false se não encontrou/não deletou nada\n      const deleted = await storage.deleteLesson(req.params.id, teacherId);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Aula não encontrada ou acesso negado\" });\n      }\n      \n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Community Posts Routes\n  app.get(\"/api/community/posts\", async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      const posts = await storage.getCommunityPosts(50, userId);\n      res.json(posts);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/community/posts\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      const result = insertCommunityPostSchema.safeParse({\n        ...req.body,\n        userId,\n      });\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      const post = await storage.createCommunityPost(result.data);\n      res.json(post);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/community/posts/:id/like\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      await storage.likePost(req.params.id, userId);\n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/community/posts/:id/like\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      await storage.unlikePost(req.params.id, userId);\n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Bible Audio Route - Single Verse (FAST - only a few seconds!)\n  app.get(\"/api/bible/audio/verse/:language/:version/:book/:chapter/:verse\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { language, version, book, chapter, verse } = req.params;\n      \n      if (!process.env.OPENAI_API_KEY) {\n        return res.status(503).json({ \n          error: \"Serviço de áudio não configurado\",\n          message: \"Configure OPENAI_API_KEY para habilitar áudio narrado.\"\n        });\n      }\n\n      // Check cache first\n      try {\n        const { db } = await import(\"./db\");\n        const { audioCache } = await import(\"@shared/schema\");\n        const { sql } = await import(\"drizzle-orm\");\n        \n        const cached = await db.query.audioCache.findFirst({\n          where: sql`language = ${language} AND version = ${version} AND book = ${book} AND chapter = ${parseInt(chapter)} AND verse = ${parseInt(verse)}`\n        });\n\n        if (cached) {\n          console.log(`[Audio] Verse cache hit for ${book} ${chapter}:${verse}`);\n          res.setHeader('Content-Type', 'audio/mpeg');\n          res.setHeader('Content-Disposition', `inline; filename=\"${book}-${chapter}-${verse}-${language}.mp3\"`);\n          res.setHeader('Cache-Control', 'public, max-age=86400');\n          res.setHeader('X-Cache', 'HIT');\n          res.send(Buffer.from(cached.audioData, 'base64'));\n          return;\n        }\n      } catch (cacheErr) {\n        console.warn(\"[Audio] Verse cache check failed:\", cacheErr);\n      }\n\n      // Fetch chapter to get the specific verse\n      const chapterData = await fetchBibleChapter(\n        language,\n        version,\n        book,\n        parseInt(chapter)\n      );\n\n      if (!chapterData?.verses || chapterData.verses.length === 0) {\n        return res.status(404).json({ error: \"Capítulo não encontrado\" });\n      }\n\n      const verseData = chapterData.verses.find((v: any) => v.number === parseInt(verse));\n      \n      if (!verseData) {\n        return res.status(404).json({ error: \"Versículo não encontrado\" });\n      }\n\n      const verseText = verseData.text;\n\n      console.log(`[Audio] Generating verse audio: ${book} ${chapter}:${verse} (${verseText.length} chars)`);\n\n      const ttsResponse = await fetch('https://api.openai.com/v1/audio/speech', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${process.env.OPENAI_API_KEY}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          model: 'tts-1',\n          voice: 'nova',\n          input: verseText,\n          speed: 1.0,\n        }),\n      });\n\n      if (!ttsResponse.ok) {\n        const errorText = await ttsResponse.text();\n        console.error(`OpenAI TTS error: ${ttsResponse.status}`, errorText);\n        throw new Error(`OpenAI TTS failed: ${ttsResponse.status}`);\n      }\n\n      const audioBuffer = await ttsResponse.arrayBuffer();\n      const audioBase64 = Buffer.from(audioBuffer).toString('base64');\n\n      // Save to cache\n      try {\n        const { db } = await import(\"./db\");\n        const { audioCache } = await import(\"@shared/schema\");\n        \n        await db.insert(audioCache).values({\n          language,\n          version,\n          book,\n          chapter: parseInt(chapter),\n          verse: parseInt(verse),\n          audioData: audioBase64,\n        }).onConflictDoNothing();\n        console.log(`[Audio] Cached verse audio for ${book} ${chapter}:${verse}`);\n      } catch (cacheErr) {\n        console.warn(\"[Audio] Verse cache save failed:\", cacheErr);\n      }\n\n      res.setHeader('Content-Type', 'audio/mpeg');\n      res.setHeader('Content-Disposition', `inline; filename=\"${book}-${chapter}-${verse}-${language}.mp3\"`);\n      res.setHeader('Cache-Control', 'public, max-age=86400');\n      \n      res.send(Buffer.from(audioBuffer));\n    } catch (error: any) {\n      console.error(\"Verse audio generation error:\", error?.message || error);\n      res.status(500).json({ error: \"Erro ao gerar áudio do versículo\", details: error?.message });\n    }\n  });\n\n  // Get book metadata (for book audio playlist)\n  app.get(\"/api/bible/book-info/:book\", async (req: any, res) => {\n    try {\n      const { book } = req.params;\n      const { BIBLE_BOOKS_FALLBACK } = await import('./bible-books-fallback');\n      \n      const bookInfo = BIBLE_BOOKS_FALLBACK.find(\n        (b: any) => b.abbrev.pt.toLowerCase() === book.toLowerCase() || \n                     b.name.toLowerCase() === book.toLowerCase()\n      );\n      \n      if (!bookInfo) {\n        return res.status(404).json({ error: \"Livro não encontrado\" });\n      }\n      \n      res.json({\n        name: bookInfo.name,\n        abbrev: bookInfo.abbrev.pt,\n        chapters: bookInfo.chapters,\n        testament: bookInfo.testament\n      });\n    } catch (error: any) {\n      console.error(\"Book info error:\", error);\n      res.status(500).json({ error: \"Erro ao buscar informações do livro\" });\n    }\n  });\n\n  // Bible Audio Route - Full Chapter (SLOW - 20-40 seconds)\n  app.get(\"/api/bible/audio/:language/:version/:book/:chapter\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { language, version, book, chapter } = req.params;\n      const userId = req.user.claims.sub;\n      \n      if (!process.env.OPENAI_API_KEY) {\n        return res.status(503).json({ \n          error: \"Serviço de áudio não configurado\",\n          message: \"Configure OPENAI_API_KEY para habilitar áudio narrado.\"\n        });\n      }\n\n      // Check cache first\n      try {\n        const { db } = await import(\"./db\");\n        const { audioCache } = await import(\"@shared/schema\");\n        const { sql } = await import(\"drizzle-orm\");\n        \n        const cached = await db.query.audioCache.findFirst({\n          where: sql`language = ${language} AND version = ${version} AND book = ${book} AND chapter = ${parseInt(chapter)} AND verse IS NULL`\n        });\n\n        if (cached) {\n          console.log(`[Audio] Cache hit for ${book} ${chapter} - returning cached audio`);\n          res.setHeader('Content-Type', 'audio/mpeg');\n          res.setHeader('Content-Disposition', `inline; filename=\"${book}-${chapter}-${language}.mp3\"`);\n          res.setHeader('Cache-Control', 'public, max-age=86400');\n          res.setHeader('X-Cache', 'HIT');\n          res.send(Buffer.from(cached.audioData, 'base64'));\n          return;\n        }\n      } catch (cacheErr) {\n        console.warn(\"[Audio] Cache check failed:\", cacheErr);\n        // Continue without cache\n      }\n\n      // Fetch chapter in correct language\n      const chapterData = await fetchBibleChapter(\n        language,\n        version,\n        book,\n        parseInt(chapter)\n      );\n\n      if (!chapterData?.verses || chapterData.verses.length === 0) {\n        return res.status(404).json({ error: \"Capítulo não encontrado\" });\n      }\n\n      const fullText = chapterData.verses\n        .map((v: any) => `${v.number}. ${v.text}`)\n        .join(' ');\n\n      const textLength = fullText.length;\n      const MAX_TTS_CHARS = 4000; // OpenAI limit is 4096, leave some margin\n      \n      console.log(`[Audio] Generating ${language} audio for ${book} ${chapter} (${textLength} chars) - User: ${userId}`);\n\n      // Split text into chunks respecting sentence boundaries\n      const splitTextIntoChunks = (text: string, maxChars: number): string[] => {\n        if (text.length <= maxChars) return [text];\n        \n        const chunks: string[] = [];\n        let currentChunk = \"\";\n        \n        // Split by verse numbers to maintain logical breaks\n        const versePattern = /(\\d+\\.\\s)/g;\n        const parts = text.split(versePattern).filter(p => p.trim());\n        \n        for (let i = 0; i < parts.length; i++) {\n          const part = parts[i];\n          \n          if ((currentChunk + part).length > maxChars && currentChunk.length > 0) {\n            chunks.push(currentChunk.trim());\n            currentChunk = part;\n          } else {\n            currentChunk += part;\n          }\n        }\n        \n        if (currentChunk.trim()) {\n          chunks.push(currentChunk.trim());\n        }\n        \n        return chunks.length > 0 ? chunks : [text.substring(0, maxChars)];\n      };\n\n      const textChunks = splitTextIntoChunks(fullText, MAX_TTS_CHARS);\n      console.log(`[Audio] Text split into ${textChunks.length} chunks`);\n\n      // Generate audio for each chunk\n      const audioBuffers: ArrayBuffer[] = [];\n      \n      for (let i = 0; i < textChunks.length; i++) {\n        const chunk = textChunks[i];\n        console.log(`[Audio] Generating chunk ${i + 1}/${textChunks.length} (${chunk.length} chars)`);\n        \n        const ttsResponse = await fetch('https://api.openai.com/v1/audio/speech', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${process.env.OPENAI_API_KEY}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            model: 'tts-1',\n            voice: 'nova',\n            input: chunk,\n            speed: 1.0,\n          }),\n        });\n\n        if (!ttsResponse.ok) {\n          const errorText = await ttsResponse.text();\n          console.error(`OpenAI TTS error on chunk ${i + 1}: ${ttsResponse.status}`, errorText);\n          throw new Error(`OpenAI TTS failed on chunk ${i + 1}: ${ttsResponse.status}`);\n        }\n\n        const chunkBuffer = await ttsResponse.arrayBuffer();\n        audioBuffers.push(chunkBuffer);\n      }\n\n      // Concatenate all audio buffers\n      const totalLength = audioBuffers.reduce((sum, buf) => sum + buf.byteLength, 0);\n      const audioBuffer = new ArrayBuffer(totalLength);\n      const uint8View = new Uint8Array(audioBuffer);\n      let offset = 0;\n      for (const buf of audioBuffers) {\n        uint8View.set(new Uint8Array(buf), offset);\n        offset += buf.byteLength;\n      }\n      \n      console.log(`[Audio] Combined ${audioBuffers.length} chunks into ${totalLength} bytes`);\n      const audioBase64 = Buffer.from(audioBuffer).toString('base64');\n\n      // Save to cache\n      try {\n        const { db } = await import(\"./db\");\n        const { audioCache } = await import(\"@shared/schema\");\n        \n        await db.insert(audioCache).values({\n          language,\n          version,\n          book,\n          chapter: parseInt(chapter),\n          audioData: audioBase64,\n        }).onConflictDoNothing();\n        console.log(`[Audio] Cached audio for ${book} ${chapter}`);\n      } catch (cacheErr) {\n        console.warn(\"[Audio] Cache save failed:\", cacheErr);\n        // Don't fail - just skip cache save\n      }\n\n      res.setHeader('Content-Type', 'audio/mpeg');\n      res.setHeader('Content-Disposition', `inline; filename=\"${book}-${chapter}-${language}.mp3\"`);\n      res.setHeader('Cache-Control', 'public, max-age=86400');\n      res.setHeader('X-Cache', 'MISS');\n      \n      res.send(Buffer.from(audioBuffer));\n    } catch (error: any) {\n      console.error(\"Audio generation error:\", error?.message || error);\n      res.status(500).json({ error: \"Erro ao gerar áudio\", details: error?.message });\n    }\n  });\n\n  // Helper function to generate commentary using OpenAI with full context\n  async function generateCommentary(\n    book: string,\n    chapter: number,\n    verse: number,\n    verseText: string,\n    commentaryType: string,\n    chapterData: any\n  ): Promise<string> {\n    const systemPrompts: Record<string, string> = {\n      exegese: \"Você é um teólogo especializado em exegese bíblica. Analise o versículo fornecido considerando o texto original (hebraico/grego), gramática, contexto literário, e o capítulo completo. Seja preciso, acadêmico e contextual.\",\n      historico: \"Você é um historiador bíblico especializado em contexto cultural e histórico. Explique o contexto histórico, cultural, geográfico e social do versículo dentro do capítulo. Seja informativo e educacional.\",\n      aplicacao: \"Você é um pastor e conselheiro espiritual. Explique como este versículo específico, no contexto do capítulo, pode ser aplicado na vida prática dos cristãos hoje. Seja prático, encorajador e relevante.\",\n      referencias: \"Você é um estudioso bíblico especializado em referências cruzadas. Identifique e explique outros versículos bíblicos relacionados ao tema deste versículo específico. Liste pelo menos 3-5 referências relevantes com citações exatas.\",\n      teologico: \"Você é um teólogo sistemático. Analise as implicações teológicas deste versículo específico, considerando diferentes tradições cristãs (católica, protestante, ortodoxa). Seja equilibrado e respeitoso com as diversas interpretações.\"\n    };\n\n    const systemPrompt = systemPrompts[commentaryType] || systemPrompts.exegese;\n\n    // Build context with surrounding verses for better analysis\n    // Include all verses in chapter for comprehensive context\n    const surroundingVerses = chapterData.verses\n      .map((v: any) => `${v.number}. ${v.text}`)\n      .join('\\n');\n\n    const bookNames: Record<string, string> = {\n      gn: \"Gênesis\", ex: \"Êxodo\", lv: \"Levítico\", nm: \"Números\", dt: \"Deuteronômio\",\n      js: \"Josué\", jz: \"Juízes\", rt: \"Rute\", \"1sm\": \"1 Samuel\", \"2sm\": \"2 Samuel\",\n      \"1rs\": \"1 Reis\", \"2rs\": \"2 Reis\", \"1cr\": \"1 Crônicas\", \"2cr\": \"2 Crônicas\",\n      ed: \"Esdras\", ne: \"Neemias\", et: \"Ester\", job: \"Jó\", sl: \"Salmos\",\n      pv: \"Provérbios\", ec: \"Eclesiastes\", ct: \"Cânticos\", is: \"Isaías\",\n      jr: \"Jeremias\", lm: \"Lamentações\", ez: \"Ezequiel\", dn: \"Daniel\",\n      os: \"Oséias\", jl: \"Joel\", am: \"Amós\", ob: \"Obadias\", jn: \"Jonas\",\n      mq: \"Miquéias\", na: \"Naum\", hc: \"Habacuque\", sf: \"Sofonias\",\n      ag: \"Ageu\", zc: \"Zacarias\", ml: \"Malaquias\",\n      mt: \"Mateus\", mc: \"Marcos\", lc: \"Lucas\", jo: \"João\",\n      at: \"Atos\", rm: \"Romanos\", \"1co\": \"1 Coríntios\", \"2co\": \"2 Coríntios\",\n      gl: \"Gálatas\", ef: \"Efésios\", fp: \"Filipenses\", cl: \"Colossenses\",\n      \"1ts\": \"1 Tessalonicenses\", \"2ts\": \"2 Tessalonicenses\",\n      \"1tm\": \"1 Timóteo\", \"2tm\": \"2 Timóteo\", tt: \"Tito\", fm: \"Filemom\",\n      hb: \"Hebreus\", tg: \"Tiago\", \"1pe\": \"1 Pedro\", \"2pe\": \"2 Pedro\",\n      \"1jo\": \"1 João\", \"2jo\": \"2 João\", \"3jo\": \"3 João\", jd: \"Judas\", ap: \"Apocalipse\"\n    };\n    const fullBookName = bookNames[book.toLowerCase()] || book;\n\n    const userPrompt = `Analise o seguinte versículo bíblico no contexto do capítulo:\\n\\n**${fullBookName} ${chapter}:${verse}**\\n\"${verseText}\"\\n\\n**Contexto do capítulo ${chapter} de ${fullBookName}:**\\n${surroundingVerses}\\n\\nForneça um comentário ${commentaryType} detalhado e específico sobre ${fullBookName} ${chapter}:${verse} (2-3 parágrafos). IMPORTANTE: Seja específico sobre ESTE versículo em particular, citando o texto exato e explicando seu significado dentro do contexto de ${fullBookName}. NÃO dê respostas genéricas.`;\n\n    const response = await fetch('https://api.openai.com/v1/chat/completions', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${process.env.OPENAI_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        model: 'gpt-4o',\n        messages: [\n          { role: 'system', content: systemPrompt },\n          { role: 'user', content: userPrompt }\n        ],\n        temperature: 0.7,\n        max_tokens: 1000,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`OpenAI API failed: ${response.status}`);\n    }\n\n    const data = await response.json();\n    return data.choices[0].message.content;\n  }\n\n  // Bible Commentary Route (with Global Cache for cost reduction)\n  app.get(\"/api/bible/commentary/:version/:book/:chapter/:verse\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Faça login para acessar comentários de IA\" });\n      }\n      const { version, book, chapter, verse } = req.params;\n      const { type } = req.query; // exegese, historico, aplicacao, referencias, teologico\n      \n      const commentaryType = type || 'exegese';\n      \n      // Validate commentary type\n      const validTypes = ['exegese', 'historico', 'aplicacao', 'referencias', 'teologico'];\n      if (!validTypes.includes(commentaryType)) {\n        return res.status(400).json({ error: \"Tipo de comentário inválido\" });\n      }\n\n      if (!process.env.OPENAI_API_KEY) {\n        return res.status(503).json({ \n          error: \"Serviço de comentários não configurado\",\n          message: \"Configure OPENAI_API_KEY para habilitar comentários teológicos.\"\n        });\n      }\n\n      // Check user-specific cache first\n      const userCached = await storage.getVerseCommentary(\n        userId,\n        book,\n        parseInt(chapter),\n        parseInt(verse),\n        version,\n        commentaryType\n      );\n\n      if (userCached) {\n        console.log(`[Commentary] User cache hit for ${userId}: ${book} ${chapter}:${verse} (${commentaryType})`);\n        return res.json(userCached);\n      }\n\n      // Check global cache (shared across all users) to reduce API costs\n      const globalCached = await storage.getVerseCommentary(\n        'global',\n        book,\n        parseInt(chapter),\n        parseInt(verse),\n        version,\n        commentaryType\n      );\n\n      if (globalCached) {\n        console.log(`[Commentary] Global cache hit: ${book} ${chapter}:${verse} (${commentaryType}) - saving API cost`);\n        // Copy global commentary to user's cache for faster future access\n        const userCommentary = await storage.createVerseCommentary({\n          userId,\n          book,\n          chapter: parseInt(chapter),\n          verse: parseInt(verse),\n          version,\n          commentaryType,\n          content: globalCached.content,\n          source: 'cache',\n        });\n        return res.json(userCommentary);\n      }\n\n      // Check AI quota for free plan users (only for new AI-generated content)\n      const quota = await checkAiQuota(userId);\n      if (!quota.allowed) {\n        // BLOCK ONLY IA ACCESS, keep app accessible\n        return res.status(429).json({ \n          error: quota.message,\n          remaining: quota.remaining,\n          upgradeUrl: '/pricing'\n        });\n      }\n\n      // Fetch verse text\n      const language = 'pt'; // Default to Portuguese for now\n      const chapterData = await fetchBibleChapter(language, version, book, parseInt(chapter));\n\n      if (!chapterData?.verses || chapterData.verses.length === 0) {\n        return res.status(404).json({ error: \"Capítulo não encontrado\" });\n      }\n\n      const verseData = chapterData.verses.find((v: any) => v.number === parseInt(verse));\n      \n      if (!verseData) {\n        return res.status(404).json({ error: \"Versículo não encontrado\" });\n      }\n\n      console.log(`[Commentary] Generating ${commentaryType}: ${book} ${chapter}:${verse} (new API call)`);\n\n      // Generate commentary with full chapter context\n      const content = await generateCommentary(\n        book,\n        parseInt(chapter),\n        parseInt(verse),\n        verseData.text,\n        commentaryType,\n        chapterData\n      );\n\n      // Increment AI request counter for ALL users (function handles plan-specific logic)\n      await storage.incrementAiRequests(userId);\n      \n      // Track spending for analytics\n      try {\n        await storage.trackAISpending(userId, AI_REQUEST_COST);\n      } catch (trackError) {\n        console.error(\"[AI Budget] Error tracking spending:\", trackError);\n      }\n\n      // Save to BOTH global cache and user cache\n      // Global cache for future users (reduces API costs significantly)\n      await storage.createVerseCommentary({\n        userId: 'global',\n        book,\n        chapter: parseInt(chapter),\n        verse: parseInt(verse),\n        version,\n        commentaryType,\n        content,\n        source: 'ai',\n      });\n\n      // User cache for quick personal access\n      const commentary = await storage.createVerseCommentary({\n        userId,\n        book,\n        chapter: parseInt(chapter),\n        verse: parseInt(verse),\n        version,\n        commentaryType,\n        content,\n        source: 'ai',\n      });\n\n      res.json(commentary);\n    } catch (error: any) {\n      console.error(\"Commentary generation error:\", error);\n      res.status(500).json({ error: \"Erro ao gerar comentário\" });\n    }\n  });\n\n  // Bible API Routes with Multilingual Support\n  const BIBLE_API_BASE = \"https://www.abibliadigital.com.br/api\";\n  \n  // Import multilingual Bible APIs\n  const { fetchBibleChapter } = await import(\"./multilingual-bible-apis\");\n  \n  // Import fallback Bible books list and chapters\n  const { BIBLE_BOOKS_FALLBACK } = await import(\"./bible-books-fallback\");\n  const { getFallbackChapter } = await import(\"./bible-chapters-fallback\");\n  const { fetchWithFallback } = await import(\"./api-client\");\n  \n  // Get all Bible books (with retry + fallback)\n  app.get(\"/api/bible/books\", async (req, res) => {\n    try {\n      const { fetchBibleBooks } = await import(\"./multilingual-bible-apis\");\n      const books = await fetchBibleBooks();\n      \n      if (!books || books.length === 0) {\n        return res.json(BIBLE_BOOKS_FALLBACK);\n      }\n      \n      res.json(books);\n    } catch (error) {\n      console.error(\"[Bible API] Error fetching books:\", error);\n      res.json(BIBLE_BOOKS_FALLBACK);\n    }\n  });\n  \n  // Get specific chapter with multilingual support\n  app.get(\"/api/bible/multilang/:language/:version/:abbrev/:chapter\", async (req, res) => {\n    try {\n      const { language, version, abbrev, chapter } = req.params;\n      \n      console.log(`[Multilingual Bible] Fetching ${language} - ${version} - ${abbrev} ${chapter}`);\n      \n      const chapterData = await fetchBibleChapter(\n        language,\n        version,\n        abbrev,\n        parseInt(chapter)\n      );\n      \n      if (!chapterData || !chapterData.verses || chapterData.verses.length === 0) {\n        throw new Error(\"No verses found for this chapter\");\n      }\n      \n      res.json(chapterData);\n    } catch (error: any) {\n      console.error(`[Multilingual Bible] Error:`, error);\n      \n      // Attempt fallback for any error\n      try {\n        const { getFallbackChapter } = await import(\"./bible-chapters-fallback\");\n        const fallback = getFallbackChapter(req.params.version, req.params.abbrev, parseInt(req.params.chapter));\n        if (fallback) {\n          console.warn(`[Multilingual Bible] Using fallback for ${req.params.language} - ${req.params.version}`);\n          return res.json(fallback);\n        }\n      } catch (fallbackError) {\n        console.error(`[Multilingual Bible] Fallback system failed:`, fallbackError);\n      }\n      \n      res.status(503).json({ \n        error: \"Capítulo não disponível no momento\",\n        message: error.message \n      });\n    }\n  });\n  \n  // Get specific chapter (Portuguese only - legacy route)\n  app.get(\"/api/bible/:version/:abbrev/:chapter\", async (req, res) => {\n    const { version, abbrev, chapter } = req.params;\n    \n    const result = await fetchWithFallback(\n      `${BIBLE_API_BASE}/verses/${version}/${abbrev}/${chapter}`,\n      () => getFallbackChapter(version, abbrev, parseInt(chapter)),\n      { timeout: 8000, retries: 2 }\n    );\n    \n    // Handle complete failure (both API and fallback failed)\n    if (result.error) {\n      console.error(`Chapter fetch failed completely: ${version}-${abbrev}-${chapter}`);\n      return res.status(503).json({ \n        error: \"Capítulo não disponível no momento\",\n        status: \"failed\" \n      });\n    }\n    \n    // If fallback was used successfully, data is already correct\n    if (result.fromCache && result.data) {\n      return res.json(result.data);\n    }\n    \n    // API succeeded - validate chapter structure\n    if (!result.data?.verses || !Array.isArray(result.data.verses) || result.data.verses.length === 0) {\n      const fallback = getFallbackChapter(version, abbrev, parseInt(chapter));\n      if (fallback) {\n        console.warn(`Empty verses from API, using fallback: ${version}-${abbrev}-${chapter}`);\n        return res.json(fallback);\n      }\n      return res.status(503).json({ \n        error: \"Capítulo sem versículos disponíveis\",\n        status: \"empty_response\" \n      });\n    }\n    \n    res.json(result.data);\n  });\n  \n  // Get specific verse (with retry logic)\n  app.get(\"/api/bible/:version/:abbrev/:chapter/:verse\", async (req, res) => {\n    const { version, abbrev, chapter, verse } = req.params;\n    const { robustFetch } = await import(\"./api-client\");\n    \n    const result = await robustFetch(\n      `${BIBLE_API_BASE}/verses/${version}/${abbrev}/${chapter}/${verse}`,\n      { timeout: 8000, retries: 2 }\n    );\n    \n    if (result.error) {\n      console.error(`Verse fetch failed: ${version}-${abbrev}-${chapter}:${verse}`, result.error);\n      return res.status(503).json({ \n        error: \"Versículo não disponível no momento\",\n        status: \"failed\" \n      });\n    }\n    \n    res.json(result.data);\n  });\n  \n  // Search Bible text\n  app.get(\"/api/bible/search\", async (req, res) => {\n    try {\n      const { version = 'nvi', query } = req.query;\n      if (!query) {\n        return res.status(400).json({ error: \"Query é obrigatória\" });\n      }\n      \n      const response = await fetch(`${BIBLE_API_BASE}/verses/${version}/search/${encodeURIComponent(query as string)}`);\n      \n      if (!response.ok) {\n        console.error(\"Bible API search error:\", response.status);\n        return res.status(503).json({ \n          error: \"Busca não disponível no momento\",\n          status: \"api_error\" \n        });\n      }\n      \n      const results = await response.json();\n      \n      if (results.error || results.err) {\n        console.error(\"Bible API search error response:\", results);\n        return res.status(503).json({ \n          error: \"Busca não disponível no momento\",\n          status: \"api_error\" \n        });\n      }\n      \n      res.json(results);\n    } catch (error: any) {\n      console.error(\"Error searching Bible:\", error);\n      res.status(500).json({ \n        error: \"Erro ao buscar texto\",\n        status: \"network_error\" \n      });\n    }\n  });\n\n  // AI-powered semantic Bible search\n  app.post(\"/api/bible/ai-search\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { query } = req.body;\n      const userId = req.user.claims.sub;\n      \n      if (!query || query.length < 3) {\n        return res.status(400).json({ error: \"Busca deve ter pelo menos 3 caracteres\" });\n      }\n\n      // Check AI quota\n      const quotaCheck = await checkAiQuota(userId);\n      if (!quotaCheck.allowed) {\n        return res.status(429).json({ \n          error: quotaCheck.message || \"Limite de IA atingido\",\n          remaining: quotaCheck.remaining \n        });\n      }\n\n      const openai = new OpenAI();\n      \n      const systemPrompt = `Você é um teólogo experiente e especialista em Bíblia Sagrada. O usuário fará uma pergunta ou buscará por um tema bíblico.\nSua tarefa é retornar versículos bíblicos ESPECÍFICOS e RELEVANTES para a busca, com textos EXATOS da Bíblia.\n\nIMPORTANTE: Retorne um JSON válido com a seguinte estrutura:\n{\n  \"summary\": \"Um resumo teológico preciso de 2-3 frases sobre o tema, explicando o conceito bíblico com profundidade\",\n  \"results\": [\n    {\n      \"reference\": \"João 3:16\",\n      \"book\": \"jo\",\n      \"chapter\": 3,\n      \"verse\": 16,\n      \"text\": \"Texto EXATO do versículo na tradução ARC\",\n      \"relevance\": \"Alta\"\n    }\n  ]\n}\n\nREGRAS OBRIGATÓRIAS:\n- Retorne entre 3 e 8 versículos MAIS relevantes para o tema\n- Os textos dos versículos devem ser EXATOS da tradução ARC (Almeida Revista e Corrigida)\n- NÃO invente ou parafrase textos bíblicos - cite o texto real\n- O \"summary\" deve ser teologicamente profundo e específico ao tema, NÃO genérico\n- Organize os resultados por relevância (mais relevante primeiro)\n- Use abreviações de livros em português minúsculo: gn, ex, lv, nm, dt, js, jz, rt, 1sm, 2sm, 1rs, 2rs, 1cr, 2cr, ed, ne, et, job, sl, pv, ec, ct, is, jr, lm, ez, dn, os, jl, am, ob, jn, mq, na, hc, sf, ag, zc, ml, mt, mc, lc, jo, at, rm, 1co, 2co, gl, ef, fp, cl, 1ts, 2ts, 1tm, 2tm, tt, fm, hb, tg, 1pe, 2pe, 1jo, 2jo, 3jo, jd, ap\n- Relevance deve ser: \"Alta\", \"Média\" ou \"Relacionado\"\n- ATENÇÃO: \"Jo\" pode significar João ou Jó - use o contexto para decidir\n- Retorne APENAS o JSON, sem markdown ou explicações adicionais`;\n\n      const completion = await openai.chat.completions.create({\n        model: \"gpt-4o-mini\",\n        messages: [\n          { role: \"system\", content: systemPrompt },\n          { role: \"user\", content: query }\n        ],\n        temperature: 0.3,\n        max_tokens: 2000,\n      });\n\n      // Track AI spending for premium users and increment counter for FREE users\n      await storage.trackAISpending(userId, AI_REQUEST_COST);\n      \n      // Increment AI request counter for ALL users (function handles plan-specific logic)\n      await storage.incrementAiRequests(userId);\n\n      const responseText = completion.choices[0]?.message?.content || \"\";\n      \n      try {\n        // Clean up the response - remove markdown code blocks if present\n        let cleanJson = responseText.trim();\n        if (cleanJson.startsWith(\"```json\")) {\n          cleanJson = cleanJson.slice(7);\n        }\n        if (cleanJson.startsWith(\"```\")) {\n          cleanJson = cleanJson.slice(3);\n        }\n        if (cleanJson.endsWith(\"```\")) {\n          cleanJson = cleanJson.slice(0, -3);\n        }\n        cleanJson = cleanJson.trim();\n        \n        const result = JSON.parse(cleanJson);\n        res.json({\n          query,\n          summary: result.summary || \"\",\n          results: result.results || [],\n        });\n      } catch (parseError) {\n        console.error(\"[AI Search] Failed to parse response:\", responseText);\n        res.status(500).json({ \n          error: \"Erro ao processar resposta da IA\",\n          query,\n          results: []\n        });\n      }\n    } catch (error: any) {\n      console.error(\"[AI Search] Error:\", error);\n      res.status(500).json({ \n        error: error.message || \"Erro na busca com IA\",\n        query: req.body.query,\n        results: []\n      });\n    }\n  });\n\n  // Get user's Bible bookmarks\n  app.get(\"/api/bible/bookmarks\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const bookmarks = await storage.getBookmarks(userId);\n      res.json(bookmarks);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Create bookmark\n  app.post(\"/api/bible/bookmarks\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      // Re-validar com safeParse\n      const result = insertBookmarkSchema.safeParse({ ...req.body, userId });\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      const bookmark = await storage.createBookmark(result.data);\n      res.json(bookmark);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Delete bookmark\n  app.delete(\"/api/bible/bookmarks/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      await storage.deleteBookmark(req.params.id, userId);\n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get user's Bible highlights\n  app.get(\"/api/bible/highlights\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const highlights = await storage.getHighlights(userId);\n      res.json(highlights);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Create highlight\n  app.post(\"/api/bible/highlights\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      // Re-validar com safeParse (o schema já valida a cor)\n      const result = insertHighlightSchema.safeParse({ ...req.body, userId });\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      const highlight = await storage.createHighlight(result.data);\n      res.json(highlight);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Delete highlight\n  app.delete(\"/api/bible/highlights/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      await storage.deleteHighlight(req.params.id, userId);\n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get user's Bible settings\n  app.get(\"/api/bible/settings\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const settings = await storage.getBibleSettings(userId);\n      res.json(settings);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Update Bible settings\n  app.put(\"/api/bible/settings\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      const result = insertBibleSettingsSchema.safeParse({ ...req.body, userId });\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      const settings = await storage.upsertBibleSettings(result.data);\n      res.json(settings);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Reading Plan Templates\n  app.get(\"/api/reading-plan-templates\", isAuthenticated, async (_req, res) => {\n    try {\n      const templates = await storage.getReadingPlanTemplates();\n      if (templates.length === 0) {\n        for (const template of readingPlanTemplates) {\n          await storage.createReadingPlanTemplate(template);\n        }\n        const newTemplates = await storage.getReadingPlanTemplates();\n        return res.json(newTemplates);\n      }\n      res.json(templates);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.get(\"/api/reading-plan-templates/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const template = await storage.getReadingPlanTemplate(req.params.id);\n      if (!template) {\n        return res.status(404).json({ error: \"Template não encontrado\" });\n      }\n      res.json(template);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/reading-plans/from-template\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { templateId } = req.body;\n      \n      const template = await storage.getReadingPlanTemplate(templateId);\n      if (!template) {\n        return res.status(404).json({ error: \"Template não encontrado\" });\n      }\n\n      // Add isCompleted: false to each day in schedule\n      const scheduleWithCompletion = template.schedule.map(day => ({\n        ...day,\n        isCompleted: false\n      }));\n\n      const data = {\n        userId,\n        templateId,\n        title: template.name,\n        description: template.description,\n        totalDays: template.duration,\n        currentDay: 1,\n        schedule: scheduleWithCompletion,\n        isCompleted: false,\n      };\n\n      const plan = await storage.createReadingPlan(data);\n      res.json(plan);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/reading-plans/custom\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { version, book, startChapter, endChapter, verses, title } = req.body;\n\n      if (!book || !startChapter || !endChapter) {\n        return res.status(400).json({ error: \"Livro, capítulo inicial e final são obrigatórios\" });\n      }\n\n      // Generate schedule - one day per chapter\n      const chapters: number[] = [];\n      for (let i = parseInt(startChapter); i <= parseInt(endChapter); i++) {\n        chapters.push(i);\n      }\n\n      const schedule = chapters.map((chapter, index) => ({\n        day: index + 1,\n        readings: [{\n          book,\n          chapter,\n          verses: verses || undefined\n        }],\n        isCompleted: false\n      }));\n\n      const data = {\n        userId,\n        title: title || `${book} ${startChapter}-${endChapter}`,\n        description: `Leitura customizada: ${book} capítulos ${startChapter}-${endChapter}`,\n        totalDays: chapters.length,\n        currentDay: 1,\n        schedule,\n        isCompleted: false,\n        planType: \"custom\"\n      };\n\n      const plan = await storage.createReadingPlan(data);\n      res.json(plan);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.put(\"/api/reading-plans/:id/complete-day\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { day } = req.body;\n\n      if (typeof day !== 'number') {\n        return res.status(400).json({ error: \"Dia inválido\" });\n      }\n\n      const plan = await storage.markDayCompleted(req.params.id, day, userId);\n\n      const user = await storage.getUser(userId);\n      if (user) {\n        const today = new Date();\n        today.setUTCHours(0, 0, 0, 0);\n        \n        const lastReadDate = user.lastReadDate ? new Date(user.lastReadDate) : null;\n        if (lastReadDate) {\n          lastReadDate.setUTCHours(0, 0, 0, 0);\n        }\n\n        // Skip gamification if already read today\n        if (lastReadDate && today.getTime() === lastReadDate.getTime()) {\n          return res.json(plan);\n        }\n\n        // Calculate streak logic\n        const oneDayMs = 24 * 60 * 60 * 1000;\n        const daysSinceLastRead = lastReadDate \n          ? Math.floor((today.getTime() - lastReadDate.getTime()) / oneDayMs)\n          : null;\n        \n        const isConsecutiveDay = daysSinceLastRead === 1;\n        const isSameDay = daysSinceLastRead === 0;\n        \n        const newStreak = isConsecutiveDay ? (user.readingStreak || 0) + 1 : \n                          isSameDay ? (user.readingStreak || 0) : 1;\n\n        // TRANSACTIONAL: Process all gamification rewards atomically\n        const baseXP = 10;\n        await storage.processGamificationRewards(userId, baseXP, newStreak, today);\n      }\n\n      res.json(plan);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // Achievements\n  app.get(\"/api/achievements\", isAuthenticated, async (_req, res) => {\n    try {\n      const achievements = await storage.getAchievements();\n      if (achievements.length === 0) {\n        for (const achievement of seedAchievements) {\n          await storage.createAchievement(achievement);\n        }\n        const newAchievements = await storage.getAchievements();\n        return res.json(newAchievements);\n      }\n      res.json(achievements);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.get(\"/api/my-achievements\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const userAchievements = await storage.getUserAchievements(userId);\n      res.json(userAchievements);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Gamification Stats\n  app.get(\"/api/stats/gamification\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      \n      if (!user) {\n        return res.status(404).json({ error: \"Usuário não encontrado\" });\n      }\n\n      const userAchievements = await storage.getUserAchievements(userId);\n      const unlockedCount = userAchievements.filter(ua => ua.isUnlocked).length;\n      \n      const xp = user.experiencePoints || 0;\n      const level = Math.floor(xp / 100) + 1;\n\n      res.json({\n        level,\n        experiencePoints: xp,\n        readingStreak: user.readingStreak || 0,\n        achievementsUnlocked: unlockedCount,\n        lastReadDate: user.lastReadDate,\n      });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Mark chapter as read and award XP\n  app.post(\"/api/bible/mark-read\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { book, chapter } = req.body;\n\n      if (!book || !chapter) {\n        return res.status(400).json({ error: \"Livro e capítulo são obrigatórios\" });\n      }\n\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ error: \"Usuário não encontrado\" });\n      }\n\n      const today = new Date();\n      today.setUTCHours(0, 0, 0, 0);\n      \n      const lastReadDate = user.lastReadDate ? new Date(user.lastReadDate) : null;\n      if (lastReadDate) {\n        lastReadDate.setUTCHours(0, 0, 0, 0);\n      }\n\n      if (lastReadDate && today.getTime() === lastReadDate.getTime()) {\n        return res.json({\n          xpGained: 0,\n          newXP: user.experiencePoints || 0,\n          newStreak: user.readingStreak || 0,\n          unlockedAchievements: [],\n          message: \"Você já marcou uma leitura hoje!\",\n        });\n      }\n\n      const baseXP = 10;\n      const newXP = (user.experiencePoints || 0) + baseXP;\n\n      const oneDayMs = 24 * 60 * 60 * 1000;\n      const daysSinceLastRead = lastReadDate \n        ? Math.floor((today.getTime() - lastReadDate.getTime()) / oneDayMs)\n        : null;\n      \n      const isConsecutiveDay = daysSinceLastRead === 1;\n      const isSameDay = daysSinceLastRead === 0;\n      \n      const newStreak = isConsecutiveDay ? (user.readingStreak || 0) + 1 : \n                        isSameDay ? (user.readingStreak || 0) : 1;\n\n      await storage.updateUserStats(userId, {\n        experiencePoints: newXP,\n        readingStreak: newStreak,\n        lastReadDate: today,\n      });\n\n      const allAchievements = await storage.getAchievements();\n      const unlockedAchievements = [];\n\n      for (const achievement of allAchievements) {\n        const isUnlocked = await storage.getUserAchievements(userId)\n          .then(uas => uas.some(ua => ua.achievementId === achievement.id && ua.isUnlocked));\n\n        if (!isUnlocked && achievement.requirement) {\n          const req = achievement.requirement as { type: string; value: number };\n          \n          if (achievement.category === 'reading' && req.type === 'chapters_read' && req.value === 1) {\n            await storage.unlockAchievement(userId, achievement.id);\n            unlockedAchievements.push(achievement);\n          } else if (achievement.category === 'streak' && req.type === 'streak_days') {\n            if (newStreak >= req.value) {\n              await storage.unlockAchievement(userId, achievement.id);\n              unlockedAchievements.push(achievement);\n            }\n          }\n        }\n      }\n\n      res.json({\n        xpGained: baseXP,\n        newXP,\n        newStreak,\n        unlockedAchievements,\n      });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get daily verse\n  app.get(\"/api/daily-verse\", async (req, res) => {\n    try {\n      // Get user timezone from query param, default to America/Sao_Paulo (UTC-3)\n      const timezone = (req.query.tz as string) || \"America/Sao_Paulo\";\n      \n      // Calculate day of year based on user's local timezone\n      const now = new Date();\n      let dayOfYear: number;\n      try {\n        const formatter = new Intl.DateTimeFormat(\"en-US\", {\n          timeZone: timezone,\n          year: \"numeric\",\n          month: \"numeric\",\n          day: \"numeric\",\n        });\n        const parts = formatter.formatToParts(now);\n        const dateParts: Record<string, string> = {};\n        parts.forEach(p => dateParts[p.type] = p.value);\n        const localDate = new Date(parseInt(dateParts.year), parseInt(dateParts.month) - 1, parseInt(dateParts.day));\n        const startOfYear = new Date(localDate.getFullYear(), 0, 0);\n        const diff = localDate.getTime() - startOfYear.getTime();\n        dayOfYear = Math.floor(diff / (1000 * 60 * 60 * 24));\n      } catch (e) {\n        const startOfYear = new Date(now.getFullYear(), 0, 0);\n        const diff = now.getTime() - startOfYear.getTime();\n        dayOfYear = Math.floor(diff / (1000 * 60 * 60 * 24));\n      }\n\n      console.log(`[DailyVerse] TZ: ${timezone}, DayOfYear: ${dayOfYear}`);\n\n      let dailyVerse = await storage.getDailyVerseByDayOfYear(dayOfYear);\n\n      if (!dailyVerse) {\n        // Import curated verses (365 verses - one for each day, no repeat for 8+ months)\n        const { curatedVerses, bookNames } = await import(\"./data/daily-verses\");\n\n        // Select verse based on day of year (cycling through 365 verses)\n        const verseIndex = (dayOfYear - 1) % curatedVerses.length;\n        const selectedVerse = curatedVerses[verseIndex];\n\n        try {\n          dailyVerse = await storage.createDailyVerse({\n            dayOfYear,\n            book: selectedVerse.book,\n            chapter: selectedVerse.chapter,\n            verse: selectedVerse.verse,\n            version: selectedVerse.version,\n            theme: selectedVerse.theme\n          });\n        } catch (e) {\n          console.error(\"[DailyVerse] Error creating verse:\", e);\n        }\n\n        // Return curated verse even if save failed\n        if (!dailyVerse) {\n          return res.json({\n            id: `temp-${dayOfYear}`,\n            reference: `${selectedVerse.book.toUpperCase()} ${selectedVerse.chapter}:${selectedVerse.verse}`,\n            text: selectedVerse.text,\n            version: selectedVerse.version,\n            theme: selectedVerse.theme,\n            dayOfYear\n          });\n        }\n      }\n\n      if (dailyVerse) {\n        // Import book names and curated verses for lookup\n        const { curatedVerses, bookNames } = await import(\"./data/daily-verses\");\n        const bookName = bookNames[dailyVerse.book] || dailyVerse.book.toUpperCase();\n        \n        // Find matching verse text\n        const matchedVerse = curatedVerses.find(v => \n          v.book === dailyVerse!.book && v.chapter === dailyVerse!.chapter && v.verse === dailyVerse!.verse\n        );\n        \n        res.json({\n          id: dailyVerse.id,\n          reference: `${bookName} ${dailyVerse.chapter}:${dailyVerse.verse}`,\n          text: matchedVerse?.text || \"Versículo do dia\",\n          version: dailyVerse.version,\n          theme: dailyVerse.theme,\n          dayOfYear: dailyVerse.dayOfYear\n        });\n      } else {\n        res.status(404).json({ error: \"Versículo não disponível\" });\n      }\n    } catch (error: any) {\n      console.error(\"[Daily Verse] Error:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/daily-verse\", isAuthenticated, async (req: any, res) => {\n    try {\n      const result = insertDailyVerseSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      const verse = await storage.createDailyVerse(result.data);\n      res.json(verse);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.get(\"/api/daily-verses/all\", isAuthenticated, async (req: any, res) => {\n    try {\n      const verses = await storage.getAllDailyVerses();\n      res.json(verses);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Offline Content Routes\n  app.get(\"/api/offline/content\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const content = await storage.getOfflineContent(userId);\n      res.json(content);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/offline/content\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      const result = insertOfflineContentSchema.safeParse({ ...req.body, userId });\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos\", \n          details: result.error.errors \n        });\n      }\n      \n      const content = await storage.saveOfflineContent(result.data);\n      res.json(content);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/offline/content/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      await storage.deleteOfflineContent(req.params.id, userId);\n      res.status(204).send();\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/offline/content\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      await storage.deleteUserOfflineContent(userId);\n      res.status(204).send();\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Subscription Routes (Stripe Integration)\n  app.post(\"/api/subscriptions/checkout\", isAuthenticated, async (req: any, res) => {\n    try {\n      if (!stripe) {\n        return res.status(503).json({ \n          error: \"Sistema de pagamentos não configurado. Configure STRIPE_SECRET_KEY nas variáveis de ambiente.\" \n        });\n      }\n\n      const userId = req.user.claims.sub;\n      const { priceId, planType } = req.body;\n\n      if (!priceId || !planType) {\n        return res.status(400).json({ error: \"priceId e planType são obrigatórios\" });\n      }\n\n      // Get or create Stripe customer\n      let user = await storage.getUser(userId);\n      let customerId = user?.stripeCustomerId;\n\n      // Verify customer exists in Stripe (handles test->live migration)\n      if (customerId) {\n        try {\n          await stripe.customers.retrieve(customerId);\n        } catch (e: any) {\n          if (e.code === 'resource_missing') {\n            // Customer doesn't exist in current Stripe mode, create new one\n            customerId = null;\n          } else {\n            throw e;\n          }\n        }\n      }\n\n      if (!customerId) {\n        const customer = await stripe.customers.create({\n          email: user?.email || undefined,\n          metadata: { userId },\n        });\n        customerId = customer.id;\n        await storage.updateUserSubscription(userId, { stripeCustomerId: customerId });\n      }\n\n      // Create checkout session\n      const session = await stripe.checkout.sessions.create({\n        customer: customerId,\n        mode: 'subscription',\n        payment_method_types: ['card'],\n        line_items: [{ price: priceId, quantity: 1 }],\n        success_url: `${req.headers.origin || process.env.VITE_APP_URL || 'http://localhost:5000'}/planos?success=true`,\n        cancel_url: `${req.headers.origin || process.env.VITE_APP_URL || 'http://localhost:5000'}/planos?canceled=true`,\n        metadata: { userId, planType },\n      });\n\n      res.json({ url: session.url });\n    } catch (error: any) {\n      console.error(\"Erro ao criar checkout session:\", error);\n      res.status(500).json({ error: \"Falha ao criar sessão de checkout: \" + error.message });\n    }\n  });\n\n  app.post(\"/api/subscriptions/portal\", isAuthenticated, async (req: any, res) => {\n    try {\n      if (!stripe) {\n        return res.status(503).json({ error: \"Sistema de pagamentos não configurado\" });\n      }\n\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n\n      if (!user?.stripeCustomerId) {\n        return res.status(400).json({ error: \"Você não possui uma assinatura ativa\" });\n      }\n\n      const session = await stripe.billingPortal.sessions.create({\n        customer: user.stripeCustomerId,\n        return_url: `${req.headers.origin || process.env.VITE_APP_URL || 'http://localhost:5000'}/planos`,\n      });\n\n      res.json({ url: session.url });\n    } catch (error: any) {\n      console.error(\"Erro ao criar portal session:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/subscriptions/cancel\", isAuthenticated, async (req: any, res) => {\n    try {\n      if (!stripe) {\n        return res.status(503).json({ error: \"Sistema de pagamentos não configurado\" });\n      }\n\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n\n      if (!user?.stripeSubscriptionId) {\n        return res.status(400).json({ error: \"Você não possui uma assinatura ativa\" });\n      }\n\n      await stripe.subscriptions.cancel(user.stripeSubscriptionId);\n      await storage.updateUserSubscription(userId, {\n        subscriptionPlan: 'free',\n        stripeSubscriptionId: null,\n      });\n\n      res.json({ success: true, message: \"Assinatura cancelada com sucesso\" });\n    } catch (error: any) {\n      console.error(\"Erro ao cancelar assinatura:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.get(\"/api/subscriptions/status\", async (req: any, res) => {\n    try {\n      // If user is not authenticated, return free plan\n      if (!req.user) {\n        return res.json({\n          plan: 'free',\n          stripeCustomerId: null,\n          stripeSubscriptionId: null,\n          aiRequestsToday: 0,\n          aiRequestsResetAt: null,\n        });\n      }\n\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n\n      res.json({\n        plan: user?.subscriptionPlan || 'free',\n        stripeCustomerId: user?.stripeCustomerId || null,\n        stripeSubscriptionId: user?.stripeSubscriptionId || null,\n        aiRequestsToday: user?.aiRequestsToday || 0,\n        aiRequestsResetAt: user?.aiRequestsResetAt || null,\n      });\n    } catch (error: any) {\n      console.error(\"Erro ao buscar status da assinatura:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Stripe Webhook for subscription updates\n  app.post(\"/api/webhooks/stripe\", express.raw({type: 'application/json'}), async (req: any, res) => {\n    if (!stripe) {\n      return res.status(503).json({ error: \"Stripe not configured\" });\n    }\n\n    const sig = req.headers['stripe-signature'];\n    const endpointSecret = process.env.STRIPE_WEBHOOK_SECRET;\n\n    let event;\n\n    try {\n      if (endpointSecret && sig) {\n        // req.body is Buffer when using express.raw() middleware\n        const body = typeof req.body === 'string' ? req.body : req.body.toString('utf8');\n        event = stripe.webhooks.constructEvent(body, sig, endpointSecret);\n      } else {\n        event = typeof req.body === 'string' ? JSON.parse(req.body) : req.body;\n      }\n    } catch (err: any) {\n      console.error(\"Webhook signature verification failed:\", err.message);\n      return res.status(400).send(`Webhook Error: ${err.message}`);\n    }\n\n    // Handle the event\n    switch (event.type) {\n      case 'checkout.session.completed': {\n        const session = event.data.object;\n        const userId = session.metadata?.userId;\n        const planType = session.metadata?.planType;\n        \n        if (userId && planType) {\n          await storage.updateUserSubscription(userId, {\n            subscriptionPlan: planType,\n            stripeSubscriptionId: session.subscription as string,\n          });\n          console.log(`✅ Subscription activated for user ${userId}: ${planType}`);\n        }\n        break;\n      }\n      case 'customer.subscription.deleted': {\n        const subscription = event.data.object;\n        const customerId = subscription.customer;\n        \n        // Find user by customer ID and downgrade\n        const user = await storage.getUserByStripeCustomerId(customerId as string);\n        if (user) {\n          await storage.updateUserSubscription(user.id, {\n            subscriptionPlan: 'free',\n            stripeSubscriptionId: null,\n          });\n          console.log(`⚠️ Subscription canceled for user ${user.id}`);\n        }\n        break;\n      }\n      case 'customer.subscription.updated': {\n        const subscription = event.data.object;\n        const customerId = subscription.customer;\n        const status = subscription.status;\n        \n        if (status === 'active') {\n          const user = await storage.getUserByStripeCustomerId(customerId as string);\n          if (user) {\n            const planType = subscription.items.data[0]?.price?.lookup_key || user.subscriptionPlan;\n            await storage.updateUserSubscription(user.id, {\n              subscriptionPlan: planType,\n            });\n          }\n        }\n        break;\n      }\n    }\n\n    res.json({ received: true });\n  });\n\n  // Donations Routes (Stripe Integration - from javascript_stripe blueprint)\n  \n  // Donation amount validation constants (in cents)\n  const PRESET_DONATION_AMOUNTS = [1000, 2500, 5000, 10000]; // R$10, R$25, R$50, R$100\n  const MIN_CUSTOM_DONATION = 100; // R$1.00 minimum\n  const MAX_CUSTOM_DONATION = 100000000; // R$1.000.000.00 maximum\n  \n  // Helper function to validate donation amount (security - never trust frontend values)\n  function validateDonationAmount(amountInCents: number): { valid: boolean; error?: string } {\n    if (!amountInCents || typeof amountInCents !== 'number') {\n      return { valid: false, error: \"Valor inválido para doação\" };\n    }\n    \n    // Check if it's a preset amount\n    if (PRESET_DONATION_AMOUNTS.includes(amountInCents)) {\n      return { valid: true };\n    }\n    \n    // Check if it's within custom range\n    if (amountInCents >= MIN_CUSTOM_DONATION && amountInCents <= MAX_CUSTOM_DONATION) {\n      return { valid: true };\n    }\n    \n    return { \n      valid: false, \n      error: `Valor deve ser no mínimo R$1` \n    };\n  }\n  \n  app.post(\"/api/donations/checkout\", isAuthenticated, async (req: any, res) => {\n    try {\n      console.log('[Donation] Received request body:', JSON.stringify(req.body));\n      console.log('[Donation] Headers:', JSON.stringify({\n        origin: req.headers.origin,\n        referer: req.headers.referer,\n        'user-agent': req.headers['user-agent']\n      }));\n      \n      if (!stripe) {\n        return res.status(503).json({ \n          error: \"Sistema de doações não configurado. Configure STRIPE_SECRET_KEY nas variáveis de ambiente.\" \n        });\n      }\n\n      const { amount, currency, type, destination, isAnonymous, message } = req.body;\n      const userId = req.user.claims.sub;\n      const userEmail = req.user.claims.email;\n      \n      console.log('[Donation] Parsed values:', { amount, currency, type, destination, userId, userEmail });\n      \n      // Server-side validation - NEVER trust frontend values\n      const amountInCents = Math.round(Number(amount));\n      console.log('[Donation] Amount in cents:', amountInCents);\n      \n      const validation = validateDonationAmount(amountInCents);\n      \n      if (!validation.valid) {\n        console.log('[Donation] Validation failed:', validation.error);\n        return res.status(400).json({ error: validation.error });\n      }\n\n      const user = await storage.getUser(userId);\n      let customerId = user?.stripeCustomerId;\n\n      // Verify customer exists in Stripe (handles test->live migration)\n      if (customerId) {\n        try {\n          await stripe.customers.retrieve(customerId);\n        } catch (e: any) {\n          if (e.code === 'resource_missing') {\n            // Customer doesn't exist in current Stripe mode, create new one\n            customerId = null;\n          } else {\n            throw e;\n          }\n        }\n      }\n\n      if (!customerId) {\n        const customer = await stripe.customers.create({\n          email: userEmail,\n          metadata: { userId },\n        });\n        customerId = customer.id;\n        await storage.updateUserSubscription(userId, { stripeCustomerId: customerId });\n      }\n\n      const isRecurring = type === 'recurring';\n      const mode = isRecurring ? 'subscription' : 'payment';\n\n      // Build valid base URL (Android apps may not send proper origin header)\n      const origin = req.headers.origin;\n      console.log('[Donation] Request headers origin:', origin);\n      console.log('[Donation] VITE_APP_URL env:', process.env.VITE_APP_URL);\n      \n      // Always use production URL for Android to ensure valid https URL\n      const baseUrl = 'https://bibliafs.com.br';\n      console.log('[Donation] Using baseUrl:', baseUrl);\n      \n      const sessionConfig = {\n        customer: customerId,\n        mode: mode as 'subscription' | 'payment',\n        payment_method_types: ['card' as const],\n        line_items: [{\n          price_data: {\n            currency: currency || 'brl',\n            product_data: {\n              name: 'Doação - BíbliaFS',\n              description: destination === 'bible_translation' ? 'Doação para Tradução Bíblica' : 'Doação para Operações do App',\n            },\n            unit_amount: amountInCents,\n            ...(isRecurring && { recurring: { interval: 'month' as const } }),\n          },\n          quantity: 1,\n        }],\n        success_url: `${baseUrl}/doar?success=true`,\n        cancel_url: `${baseUrl}/doar?canceled=true`,\n        metadata: { \n          userId, \n          type: 'donation',\n          donationType: type,\n          destination: destination || 'app_operations',\n          isAnonymous: isAnonymous ? 'true' : 'false',\n          message: message || '',\n        },\n      };\n      \n      console.log('[Donation] Session config:', JSON.stringify(sessionConfig, null, 2));\n\n      // Create checkout session with card only (secure - Stripe handles all card data)\n      const session = await stripe.checkout.sessions.create(sessionConfig as any);\n      \n      console.log('[Donation] Session created successfully:', session.id);\n\n      res.json({ url: session.url, sessionId: session.id });\n    } catch (error: any) {\n      console.error(\"[Donation] Stripe error details:\", {\n        message: error.message,\n        type: error.type,\n        code: error.code,\n        param: error.param,\n        raw: error.raw\n      });\n      res.status(500).json({ error: \"Falha ao criar sessão de checkout: \" + error.message });\n    }\n  });\n\n  app.post(\"/api/create-payment-intent\", isAuthenticated, async (req: any, res) => {\n    try {\n      if (!stripe) {\n        return res.status(503).json({ \n          error: \"Sistema de doações não configurado. Configure STRIPE_SECRET_KEY nas variáveis de ambiente.\" \n        });\n      }\n\n      const { amount, currency } = req.body;\n      const userId = req.user.claims.sub;\n      const userEmail = req.user.claims.email;\n      \n      if (!amount || amount <= 0) {\n        return res.status(400).json({ error: \"Valor inválido para doação\" });\n      }\n\n      const user = await storage.getUser(userId);\n      let customerId = user?.stripeCustomerId;\n\n      if (!customerId) {\n        const customer = await stripe.customers.create({\n          email: userEmail,\n          metadata: { userId },\n        });\n        customerId = customer.id;\n        await storage.updateUserSubscription(userId, { stripeCustomerId: customerId });\n      }\n\n      const paymentIntent = await stripe.paymentIntents.create({\n        amount: Math.round(amount),\n        currency: currency || \"brl\",\n        customer: customerId,\n        setup_future_usage: \"off_session\",\n        metadata: {\n          userId,\n        },\n      });\n\n      res.json({ clientSecret: paymentIntent.client_secret });\n    } catch (error: any) {\n      console.error(\"Erro ao criar payment intent:\", error);\n      res.status(500).json({ error: \"Falha ao criar payment intent: \" + error.message });\n    }\n  });\n\n  app.get(\"/api/stripe/payment-methods\", isAuthenticated, async (req: any, res) => {\n    try {\n      if (!stripe) {\n        return res.status(503).json({ error: \"Stripe não configurado\" });\n      }\n\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n\n      if (!user?.stripeCustomerId) {\n        return res.json({ paymentMethods: [] });\n      }\n\n      const paymentMethods = await stripe.paymentMethods.list({\n        customer: user.stripeCustomerId,\n        type: \"card\",\n      });\n\n      const cards = paymentMethods.data.map((pm) => ({\n        id: pm.id,\n        brand: pm.card?.brand || \"unknown\",\n        last4: pm.card?.last4 || \"****\",\n        expMonth: pm.card?.exp_month,\n        expYear: pm.card?.exp_year,\n      }));\n\n      res.json({ paymentMethods: cards });\n    } catch (error: any) {\n      console.error(\"Erro ao buscar payment methods:\", error);\n      res.status(500).json({ error: \"Falha ao buscar cartões salvos\" });\n    }\n  });\n\n  app.post(\"/api/donations\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      const result = insertDonationSchema.safeParse({ ...req.body, userId });\n      \n      if (!result.success) {\n        return res.status(400).json({ \n          error: \"Dados inválidos para doação\", \n          details: result.error.errors \n        });\n      }\n      \n      const donation = await storage.createDonation(result.data);\n      res.json(donation);\n    } catch (error: any) {\n      console.error(\"Erro ao criar doação:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.get(\"/api/donations\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const donations = await storage.getDonations(userId);\n      res.json(donations);\n    } catch (error: any) {\n      console.error(\"Erro ao buscar doações:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // AI Study Assistant (OpenAI Integration)\n  app.post(\"/api/ai/study\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { question, book, chapter, verse, verseText, chapterVerses } = req.body;\n      \n      if (!question) {\n        return res.status(400).json({ error: \"Pergunta é obrigatória\" });\n      }\n\n      if (!process.env.OPENAI_API_KEY) {\n        return res.status(503).json({ \n          error: \"Assistente de IA não configurado. Por favor, configure sua chave de API OpenAI.\" \n        });\n      }\n\n      const quota = await checkAiQuota(userId);\n      if (!quota.allowed) {\n        return res.status(429).json({ \n          error: quota.message,\n          remaining: quota.remaining,\n          upgradeUrl: '/pricing'\n        });\n      }\n\n      const openai = new OpenAI({\n        apiKey: process.env.OPENAI_API_KEY,\n      });\n\n      let bibleContext = \"\";\n      if (book && chapter) {\n        bibleContext = `\\n\\nCONTEXTO DE LEITURA ATUAL DO USUÁRIO:\n- Livro: ${book}\n- Capítulo: ${chapter}${verse ? `\\n- Versículo em foco: ${verse}` : \"\"}${verseText ? `\\n- Texto do versículo: \"${verseText}\"` : \"\"}`;\n        if (chapterVerses && Array.isArray(chapterVerses)) {\n          const versesContext = chapterVerses.slice(0, 15).map((v: any) => `${v.number}. ${v.text}`).join('\\n');\n          bibleContext += `\\n\\nVERSÍCULOS DO CAPÍTULO (para contexto):\\n${versesContext}`;\n        }\n      }\n\n      const completion = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"system\",\n            content: `Você é um teólogo experiente e professor de estudos bíblicos com conhecimento profundo das Escrituras.\n\nREGRA PRINCIPAL - FOCO ABSOLUTO:\n- Responda EXCLUSIVAMENTE sobre o que foi perguntado\n- Se a pergunta é sobre João, fale APENAS sobre o Evangelho de João  \n- Se a pergunta é sobre Gênesis, fale APENAS sobre Gênesis\n- NUNCA desvie para outros livros ou temas que não foram perguntados\n- NUNCA dê respostas genéricas sobre \"a Bíblia em geral\"\n- Analise a pergunta e identifique: livro, capítulo, versículo ou tema ESPECÍFICO\n- Se o usuário está lendo um capítulo específico, concentre sua resposta NAQUELE capítulo\n\nABREVIAÇÕES BÍBLICAS IMPORTANTES:\n- \"Jo\" ou \"Jó\" (capítulos 1-42) = Livro de JÓ (Job) - Antigo Testamento\n- \"João\" ou \"Jo\" com versículos como 3:16 = Evangelho de JOÃO\n- Use o CONTEXTO para identificar o livro correto\n\nREGRAS ADICIONAIS:\n1. SEMPRE cite versículos ESPECÍFICOS do livro/texto perguntado com número exato\n2. Explique o contexto histórico e cultural DAQUELE texto específico\n3. Mencione o autor, destinatários e propósito DAQUELE livro específico\n4. Use linguagem acessível mas precisa teologicamente\n5. Quando houver diferentes interpretações, apresente as principais perspectivas\n6. Estruture sua resposta com parágrafos claros e use formatação markdown\n7. Cite comentaristas bíblicos clássicos quando relevante (ex: Matthew Henry, John Calvin, etc.)\n\nFORMATO DE RESPOSTA:\n- Contexto do texto perguntado (1-2 parágrafos)\n- Explicação específica e profunda (2-3 parágrafos)  \n- Aplicação prática para a vida cristã (1 parágrafo)\n- Versículos relacionados DO MESMO LIVRO para aprofundamento\n\nResponda em português do Brasil.${bibleContext}`\n          },\n          {\n            role: \"user\",\n            content: question\n          }\n        ],\n        temperature: 0.7,\n        max_tokens: 2000,\n      });\n\n      let answer = completion.choices[0]?.message?.content || \"Desculpe, não consegui gerar uma resposta.\";\n      \n      // Enrich response with Bible context\n      if (answer && answer.length > 0) {\n        // Add source attribution if not already there\n        if (!answer.toLowerCase().includes('referência') && !answer.toLowerCase().includes('versículo')) {\n          answer += \"\\n\\nPara estudos mais aprofundados, recomendo consultar as referências bíblicas mencionadas e comentários teológicos especializados.\";\n        }\n      }\n\n      // Increment AI request counter for ALL users (function handles plan-specific logic)\n      const { totalCount, limit } = await storage.incrementAiRequests(userId);\n      const remaining = Math.max(0, limit - totalCount);\n\n      res.json({ answer, remaining });\n    } catch (error: any) {\n      console.error(\"Erro ao chamar OpenAI:\", error);\n      res.status(500).json({ error: \"Erro ao processar sua pergunta. Por favor, tente novamente.\" });\n    }\n  });\n\n  // ============================================\n  // PUSH NOTIFICATIONS\n  // ============================================\n\n  // Get VAPID public key for client subscription\n  app.get(\"/api/notifications/vapid-key\", (req, res) => {\n    const key = getVapidPublicKey();\n    if (!key) {\n      return res.status(503).json({ error: \"Push notifications not configured\" });\n    }\n    res.json({ publicKey: key });\n  });\n\n  // Subscribe to push notifications\n  app.post(\"/api/notifications/subscribe\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { subscription } = req.body;\n      \n      if (!subscription || !subscription.endpoint || !subscription.keys) {\n        return res.status(400).json({ error: \"Invalid subscription data\" });\n      }\n      \n      await savePushSubscription(userId, subscription, req.headers['user-agent']);\n      res.json({ success: true, message: \"Subscription saved\" });\n    } catch (error: any) {\n      console.error(\"[Push] Subscribe error:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Unsubscribe from push notifications\n  app.post(\"/api/notifications/unsubscribe\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { endpoint } = req.body;\n      \n      if (!endpoint) {\n        return res.status(400).json({ error: \"Endpoint required\" });\n      }\n      \n      await removePushSubscription(userId, endpoint);\n      res.json({ success: true, message: \"Subscription removed\" });\n    } catch (error: any) {\n      console.error(\"[Push] Unsubscribe error:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get notification preferences\n  app.get(\"/api/notifications/preferences\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const preferences = await getNotificationPreferences(userId);\n      res.json(preferences);\n    } catch (error: any) {\n      console.error(\"[Push] Get preferences error:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Update notification preferences\n  app.patch(\"/api/notifications/preferences\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const updated = await updateNotificationPreferences(userId, req.body);\n      res.json(updated);\n    } catch (error: any) {\n      console.error(\"[Push] Update preferences error:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Mark notification as clicked\n  app.post(\"/api/notifications/clicked\", async (req, res) => {\n    try {\n      const { notificationId } = req.body;\n      if (notificationId) {\n        await markNotificationClicked(notificationId);\n      }\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error(\"[Push] Mark clicked error:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Send test notification (for debugging)\n  app.post(\"/api/notifications/test\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const result = await sendPushNotification(userId, {\n        title: \"BíbliaFS\",\n        body: getRandomInsight('reading'),\n        icon: \"/icons/icon-192x192.png\",\n        tag: \"test\",\n        data: { url: \"/\" },\n      });\n      res.json(result);\n    } catch (error: any) {\n      console.error(\"[Push] Test notification error:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Auth Routes - Redirect to Login/Register Pages\n  app.get(\"/api/login\", (req, res) => {\n    res.redirect(\"/login\");\n  });\n\n  app.get(\"/api/register\", (req, res) => {\n    res.redirect(\"/register\");\n  });\n\n  // ============================================\n  // STUDY GROUPS API\n  // ============================================\n\n  // Get all public groups + user's groups\n  app.get(\"/api/groups\", async (req: any, res) => {\n    try {\n      const groups = await storage.getGroups();\n      res.json(groups);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get user's groups\n  app.get(\"/api/groups/my\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const groups = await storage.getUserGroups(userId);\n      res.json(groups);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get single group\n  app.get(\"/api/groups/:id\", async (req, res) => {\n    try {\n      const group = await storage.getGroup(req.params.id);\n      if (!group) {\n        return res.status(404).json({ error: \"Grupo não encontrado\" });\n      }\n      res.json(group);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Create group\n  app.post(\"/api/groups\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { name, description, isPublic } = req.body;\n      \n      if (!name || name.length < 3) {\n        return res.status(400).json({ error: \"Nome do grupo deve ter pelo menos 3 caracteres\" });\n      }\n      \n      const group = await storage.createGroup({\n        name,\n        description,\n        isPublic: isPublic ?? false,\n        leaderId: userId,\n      });\n      \n      // Add creator as leader member\n      try {\n        await storage.addGroupMember(group.id, userId, \"leader\");\n        console.log(`[Groups] User ${userId} added as leader to group ${group.id}`);\n      } catch (memberError) {\n        console.error(`[Groups] Error adding member: ${memberError}`);\n        throw new Error(\"Falha ao adicionar criador ao grupo\");\n      }\n      \n      // Return group with member info\n      res.json({\n        ...group,\n        role: \"leader\",\n        joinedAt: new Date().toISOString()\n      });\n    } catch (error: any) {\n      console.error(`[Groups] Create error: ${error.message}`);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Update group\n  app.patch(\"/api/groups/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const group = await storage.updateGroup(req.params.id, userId, req.body);\n      \n      if (!group) {\n        return res.status(404).json({ error: \"Grupo não encontrado ou acesso negado\" });\n      }\n      \n      res.json(group);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Delete group\n  app.delete(\"/api/groups/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const deleted = await storage.deleteGroup(req.params.id, userId);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Grupo não encontrado ou acesso negado\" });\n      }\n      \n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get group members\n  app.get(\"/api/groups/:id/members\", async (req, res) => {\n    try {\n      const members = await storage.getGroupMembers(req.params.id);\n      res.json(members);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/groups/:groupId/members/:memberId\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { groupId, memberId } = req.params;\n      const { role } = req.body;\n      const userId = req.user?.claims?.sub || req.user?.id;\n\n      const group = await storage.getGroup(groupId);\n      if (!group || group.leaderId !== userId) {\n        return res.status(403).json({ message: \"Apenas o líder pode alterar cargos\" });\n      }\n\n      await storage.updateGroupMemberRole(groupId, memberId, role);\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error(\"[Groups] Error updating member role:\", error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/groups/:groupId/members/:memberId\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { groupId, memberId } = req.params;\n      const userId = req.user?.claims?.sub || req.user?.id;\n\n      const group = await storage.getGroup(groupId);\n      if (!group || group.leaderId !== userId) {\n        return res.status(403).json({ message: \"Apenas o líder pode remover membros\" });\n      }\n\n      // No storage.ts, o método removeGroupMember espera (groupId, memberUserId)\n      // Precisamos do userId do membro, não o ID da linha na tabela members\n      const members = await storage.getGroupMembers(groupId);\n      const member = members.find(m => m.id === memberId);\n      \n      if (!member) {\n        return res.status(404).json({ message: \"Membro não encontrado\" });\n      }\n\n      await storage.removeGroupMember(groupId, member.userId);\n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/invites/accept\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { code } = req.body;\n      const userId = req.user.id;\n      \n      const result = await storage.acceptInvite(code, userId);\n      if (!result.success) {\n        return res.status(400).json({ message: result.error });\n      }\n\n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Join group\n  app.post(\"/api/groups/:id/join\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const groupId = req.params.id;\n      \n      // Check if group exists and is public\n      const group = await storage.getGroup(groupId);\n      if (!group) {\n        return res.status(404).json({ error: \"Grupo não encontrado\" });\n      }\n      \n      if (!group.isPublic) {\n        return res.status(403).json({ error: \"Este grupo é privado\" });\n      }\n      \n      // Check if already member\n      const isMember = await storage.isGroupMember(groupId, userId);\n      if (isMember) {\n        return res.status(400).json({ error: \"Você já é membro deste grupo\" });\n      }\n      \n      const member = await storage.addGroupMember(groupId, userId, \"member\");\n      res.json(member);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Leave group\n  app.post(\"/api/groups/:id/leave\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      await storage.removeGroupMember(req.params.id, userId);\n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get group posts\n  app.get(\"/api/groups/:id/posts\", async (req, res) => {\n    try {\n      const posts = await storage.getGroupPosts(req.params.id);\n      res.json(posts);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // ============================================\n  // GROUP MESSAGES (Discussion/Chat)\n  // ============================================\n\n  // Get group messages\n  app.get(\"/api/groups/:id/messages\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const groupId = req.params.id;\n      \n      // Check if user is member\n      const isMember = await storage.isGroupMember(groupId, userId);\n      if (!isMember) {\n        return res.status(403).json({ error: \"Você precisa ser membro do grupo para ver as mensagens\" });\n      }\n      \n      const messages = await storage.getGroupMessages(groupId);\n      res.json(messages);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Send message to group\n  app.post(\"/api/groups/:id/messages\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const groupId = req.params.id;\n      const { content, verseReference, verseText, messageType, replyToId } = req.body;\n      \n      // Check if user is member\n      const isMember = await storage.isGroupMember(groupId, userId);\n      if (!isMember) {\n        return res.status(403).json({ error: \"Você precisa ser membro do grupo para enviar mensagens\" });\n      }\n      \n      if (!content || content.trim().length === 0) {\n        return res.status(400).json({ error: \"Mensagem não pode estar vazia\" });\n      }\n      \n      const message = await storage.createGroupMessage({\n        groupId,\n        userId,\n        content: content.trim(),\n        replyToId: replyToId || null,\n        verseReference,\n        verseText,\n        messageType: messageType || \"text\",\n      });\n      \n      res.json(message);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Delete message\n  app.delete(\"/api/groups/:groupId/messages/:messageId\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const deleted = await storage.deleteGroupMessage(req.params.messageId, userId);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Mensagem não encontrada ou acesso negado\" });\n      }\n      \n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // ============================================\n  // GROUP INVITES\n  // ============================================\n\n  // Create invite\n  app.post(\"/api/groups/:id/invites\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const groupId = req.params.id;\n      const { email, phone } = req.body;\n      \n      // Check if user is leader or moderator\n      const group = await storage.getGroup(groupId);\n      if (!group) {\n        return res.status(404).json({ error: \"Grupo não encontrado\" });\n      }\n      \n      const members = await storage.getGroupMembers(groupId);\n      const userMember = members.find(m => m.userId === userId);\n      if (!userMember || (userMember.role !== \"leader\" && userMember.role !== \"moderator\")) {\n        return res.status(403).json({ error: \"Apenas líderes e moderadores podem convidar\" });\n      }\n      \n      if (!email && !phone) {\n        return res.status(400).json({ error: \"Email ou telefone é obrigatório\" });\n      }\n\n      // Verificar se já existe convite pendente para esse email neste grupo\n      if (email) {\n        const existingInvites = await storage.getGroupInvites(groupId);\n        const pendingInvite = existingInvites.find(\n          (inv: any) => inv.invitedEmail === email && inv.status === \"pending\"\n        );\n        if (pendingInvite) {\n          return res.status(400).json({ error: \"Já existe um convite pendente para este email\" });\n        }\n\n        // Verificar se o email já é membro do grupo\n        const existingMember = members.find(m => m.userEmail === email);\n        if (existingMember) {\n          return res.status(400).json({ error: \"Este usuário já é membro do grupo\" });\n        }\n      }\n      \n      const invite = await storage.createGroupInvite({\n        groupId,\n        invitedBy: userId,\n        invitedEmail: email || null,\n        invitedPhone: phone || null,\n      });\n\n      // Enviar notificação push para o convidado se ele existir no sistema\n      if (email) {\n        const invitedUser = await storage.getUserByEmail(email);\n        if (invitedUser) {\n          await sendPushNotification(invitedUser.id, {\n            title: \"Convite de Grupo\",\n            body: `Você foi convidado para o grupo \"${group.name}\"`,\n            data: {\n              url: `/groups?code=${invite.inviteCode}`,\n              type: \"group_invite\"\n            }\n          });\n        }\n\n        // Enviar email de convite\n        try {\n          const gmailPassword = process.env.GMAIL_APP_PASSWORD;\n          const gmailUser = 'bibliafs3@gmail.com';\n          if (gmailPassword) {\n            const transporter = nodemailer.createTransport({\n              host: 'smtp.gmail.com',\n              port: 465,\n              secure: true,\n              auth: { user: gmailUser, pass: gmailPassword },\n            });\n\n            const inviter = await storage.getUser(userId);\n            const inviterName = inviter ? (inviter.firstName || inviter.email) : \"Alguém\";\n\n            await transporter.sendMail({\n              from: `\"BíbliaFS\" <${gmailUser}>`,\n              to: email,\n              subject: `Convite para Grupo de Estudo - ${group.name}`,\n              html: `\n                <div style=\"font-family: Arial, sans-serif; max-width: 500px; margin: 0 auto; padding: 20px;\">\n                  <h2 style=\"color: #667eea;\">Convite para Grupo de Estudo</h2>\n                  <p>${inviterName} convidou você para participar do grupo <strong>\"${group.name}\"</strong> na BíbliaFS!</p>\n                  ${group.description ? `<p style=\"color: #666; font-style: italic;\">\"${group.description}\"</p>` : ''}\n                  <div style=\"background: #f0f0f0; padding: 20px; text-align: center; border-radius: 8px; margin: 20px 0;\">\n                    <p style=\"margin: 0 0 8px 0; color: #666;\">Use o código abaixo para entrar:</p>\n                    <h1 style=\"font-size: 28px; color: #667eea; letter-spacing: 3px; margin: 0;\">${invite.inviteCode}</h1>\n                  </div>\n                  <p style=\"color: #666;\">Abra o app BíbliaFS, vá em Grupos de Estudo e clique em \"Usar Código\".</p>\n                  <p style=\"color: #999; font-size: 12px;\">Que a Palavra de Deus ilumine seus dias!</p>\n                </div>\n              `,\n            });\n            console.log(`[Invite] Email sent to ${email} for group ${group.name}`);\n          } else {\n            console.log(`[Invite] GMAIL_APP_PASSWORD not configured, skipping email for ${email}`);\n          }\n        } catch (emailError: any) {\n          console.error(`[Invite] Failed to send email to ${email}:`, emailError.message);\n        }\n      }\n      \n      res.json(invite);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get group invites\n  app.get(\"/api/groups/:id/invites\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const groupId = req.params.id;\n      \n      // Check if user is leader or moderator\n      const members = await storage.getGroupMembers(groupId);\n      const userMember = members.find(m => m.userId === userId);\n      if (!userMember || (userMember.role !== \"leader\" && userMember.role !== \"moderator\")) {\n        return res.status(403).json({ error: \"Acesso negado\" });\n      }\n      \n      const invites = await storage.getGroupInvites(groupId);\n      res.json(invites);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get my pending invites\n  app.get(\"/api/invites/pending\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      \n      if (!user?.email) {\n        return res.json([]);\n      }\n      \n      const invites = await storage.getPendingInvitesForEmail(user.email);\n      res.json(invites);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Accept invite by code\n  app.post(\"/api/invites/accept\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { code } = req.body;\n      \n      if (!code) {\n        return res.status(400).json({ error: \"Código do convite é obrigatório\" });\n      }\n      \n      const result = await storage.acceptInvite(code.toUpperCase(), userId);\n      \n      if (!result.success) {\n        return res.status(400).json({ error: result.error });\n      }\n      \n      res.json({ success: true, groupId: result.groupId });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Search users by email\n  app.get(\"/api/users/search\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { email } = req.query;\n      \n      if (!email || typeof email !== \"string\" || email.length < 3) {\n        return res.json([]);\n      }\n      \n      const users = await storage.searchUsersByEmail(email);\n      res.json(users);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // ============================================\n  // GROUP DISCUSSIONS (AI Q&A Sessions)\n  // ============================================\n\n  // Get all discussions in a group\n  app.get(\"/api/groups/:id/discussions\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const groupId = req.params.id;\n      \n      // Check if user is member\n      const isMember = await storage.isGroupMember(groupId, userId);\n      if (!isMember) {\n        return res.status(403).json({ error: \"Você precisa ser membro do grupo\" });\n      }\n      \n      const discussions = await storage.getGroupDiscussions(groupId);\n      res.json(discussions);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get a single discussion with answers\n  app.get(\"/api/discussions/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const discussion = await storage.getGroupDiscussion(req.params.id);\n      if (!discussion) {\n        return res.status(404).json({ error: \"Discussão não encontrada\" });\n      }\n      \n      const answers = await storage.getDiscussionAnswers(req.params.id);\n      res.json({ ...discussion, answers });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Create a new discussion (AI generates question)\n  app.post(\"/api/groups/:id/discussions\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const groupId = req.params.id;\n      const { title, description, verseReference, verseText, useAI } = req.body;\n      \n      // Check if user is leader or moderator\n      const members = await storage.getGroupMembers(groupId);\n      const userMember = members.find(m => m.userId === userId);\n      if (!userMember || (userMember.role !== \"leader\" && userMember.role !== \"moderator\")) {\n        return res.status(403).json({ error: \"Apenas líderes e moderadores podem criar discussões\" });\n      }\n      \n      if (!title) {\n        return res.status(400).json({ error: \"Título é obrigatório\" });\n      }\n      \n      let question = req.body.question || \"\";\n      \n      // Generate question using AI if requested\n      if (useAI && process.env.OPENAI_API_KEY) {\n        // Check AI quota for free plan users\n        const quota = await checkAiQuota(userId);\n        if (!quota.allowed) {\n          return res.status(429).json({\n            error: quota.message,\n            remaining: quota.remaining,\n            limitReached: true\n          });\n        }\n        \n        try {\n          const openaiInstance = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });\n          \n          const prompt = `Você é um líder de estudo bíblico experiente. Crie UMA pergunta reflexiva e profunda para discussão em grupo baseada no seguinte:\n\nATENÇÃO - ABREVIAÇÕES BÍBLICAS:\n- \"Jo\" ou \"Jó\" (capítulos 1-42) = Livro de JÓ (Job) - Antigo Testamento\n- \"João\" ou \"Jo\" com versículos como 3:16 = Evangelho de JOÃO\n- Use o CONTEXTO para identificar o livro correto\n\nTema: ${title}\n${description ? `Descrição: ${description}` : \"\"}\n${verseReference ? `Referência: ${verseReference}` : \"\"}\n${verseText ? `Texto: \"${verseText}\"` : \"\"}\n\nA pergunta deve:\n- Estimular reflexão pessoal e compartilhamento\n- Conectar o texto bíblico à vida prática\n- Ser aberta (não sim/não)\n- Ter profundidade teológica mas ser acessível\n\nResponda APENAS com a pergunta, sem introdução ou explicação.`;\n\n          const response = await openaiInstance.chat.completions.create({\n            model: \"gpt-4o\",\n            messages: [{ role: \"user\", content: prompt }],\n            temperature: 0.8,\n            max_tokens: 200,\n          });\n\n          question = response.choices[0]?.message?.content?.trim() || \"\";\n          \n          // Increment AI request counter for ALL users (function handles plan-specific logic)\n          await storage.incrementAiRequests(userId);\n        } catch (aiError) {\n          console.error(\"Erro ao gerar pergunta com IA:\", aiError);\n        }\n      }\n      \n      if (!question) {\n        return res.status(400).json({ error: \"Pergunta é obrigatória (ou use IA para gerar)\" });\n      }\n      \n      const discussion = await storage.createGroupDiscussion({\n        groupId,\n        createdById: userId,\n        title,\n        description,\n        question,\n        verseReference,\n        verseText,\n        status: \"open\",\n      });\n      \n      res.json(discussion);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Submit an answer to a discussion\n  app.post(\"/api/discussions/:id/answers\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const discussionId = req.params.id;\n      const { content, verseReference, isAnonymous } = req.body;\n      \n      const discussion = await storage.getGroupDiscussion(discussionId);\n      if (!discussion) {\n        return res.status(404).json({ error: \"Discussão não encontrada\" });\n      }\n      \n      if (discussion.status === \"closed\") {\n        return res.status(400).json({ error: \"Esta discussão está encerrada\" });\n      }\n      \n      // Check if user is member of the group\n      const isMember = await storage.isGroupMember(discussion.groupId, userId);\n      if (!isMember) {\n        return res.status(403).json({ error: \"Você precisa ser membro do grupo\" });\n      }\n      \n      if (!content || content.trim().length === 0) {\n        return res.status(400).json({ error: \"Resposta não pode estar vazia\" });\n      }\n      \n      const answer = await storage.createGroupAnswer({\n        discussionId,\n        userId,\n        content: content.trim(),\n        verseReference,\n        isAnonymous: isAnonymous && discussion.allowAnonymous,\n      });\n      \n      res.json(answer);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Review an answer (leader only)\n  app.patch(\"/api/answers/:id/review\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const answerId = req.params.id;\n      const { status, comment } = req.body;\n      \n      if (![\"excellent\", \"approved\", \"needs_review\"].includes(status)) {\n        return res.status(400).json({ error: \"Status inválido\" });\n      }\n      \n      // Get the answer and discussion to verify permissions\n      const answers = await storage.getDiscussionAnswers(answerId);\n      const answer = answers.find(a => a.id === answerId);\n      \n      if (!answer) {\n        // Try getting answers for the discussion containing this answer\n        const allDiscussions = await storage.getGroupDiscussions(\"\");\n        // We need a different approach - get the answer directly\n      }\n      \n      const updated = await storage.reviewAnswer(answerId, userId, status, comment);\n      res.json(updated);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Synthesize answers using AI (leader only)\n  app.post(\"/api/discussions/:id/synthesize\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const discussionId = req.params.id;\n      \n      const discussion = await storage.getGroupDiscussion(discussionId);\n      if (!discussion) {\n        return res.status(404).json({ error: \"Discussão não encontrada\" });\n      }\n      \n      // Check if user is leader\n      const members = await storage.getGroupMembers(discussion.groupId);\n      const userMember = members.find(m => m.userId === userId);\n      if (!userMember || userMember.role !== \"leader\") {\n        return res.status(403).json({ error: \"Apenas o líder pode sintetizar as respostas\" });\n      }\n      \n      if (!process.env.OPENAI_API_KEY) {\n        return res.status(503).json({ error: \"Serviço de IA indisponível\" });\n      }\n      \n      // Check AI quota for free plan users\n      const quota = await checkAiQuota(userId);\n      if (!quota.allowed) {\n        return res.status(429).json({\n          error: quota.message,\n          remaining: quota.remaining,\n          limitReached: true\n        });\n      }\n      \n      // Get all answers\n      const answers = await storage.getAnswersForSynthesis(discussionId);\n      \n      if (answers.length === 0) {\n        return res.status(400).json({ error: \"Nenhuma resposta para sintetizar\" });\n      }\n      \n      // Build answers text for AI\n      const answersText = answers.map((a, i) => {\n        const name = a.isAnonymous ? \"Anônimo\" : (a.userName || \"Membro\");\n        return `${i + 1}. ${name}: \"${a.content}\"${a.verseReference ? ` (${a.verseReference})` : \"\"}`;\n      }).join(\"\\n\\n\");\n      \n      const prompt = `Você é um líder de estudo bíblico experiente. Analise as seguintes respostas dos membros do grupo à pergunta:\n\nPERGUNTA: ${discussion.question}\n${discussion.verseReference ? `TEXTO BASE: ${discussion.verseReference} - ${discussion.verseText}` : \"\"}\n\nRESPOSTAS DOS MEMBROS:\n${answersText}\n\nCrie uma SÍNTESE que:\n1. Identifique os TEMAS COMUNS nas respostas\n2. Destaque as MELHORES CONTRIBUIÇÕES (sem citar nomes específicos)\n3. Apresente uma REFLEXÃO INTEGRADORA que una os insights\n4. Sugira APLICAÇÕES PRÁTICAS baseadas nas respostas\n5. Inclua VERSÍCULOS RELACIONADOS que complementem a discussão\n\nFormato da resposta:\n## Temas Identificados\n(lista dos principais temas)\n\n## Destaques da Discussão\n(melhores insights compartilhados)\n\n## Reflexão Integradora\n(síntese teológica)\n\n## Aplicação Prática\n(como aplicar na vida)\n\n## Para Continuar Estudando\n(versículos e recursos relacionados)`;\n\n      const openaiInstance = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });\n      const response = await openaiInstance.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [{ role: \"user\", content: prompt }],\n        temperature: 0.7,\n        max_tokens: 1500,\n      });\n\n      const synthesis = response.choices[0]?.message?.content;\n      if (!synthesis) {\n        throw new Error(\"Resposta vazia da IA\");\n      }\n      \n      // Increment AI request counter for ALL users (function handles plan-specific logic)\n      await storage.incrementAiRequests(userId);\n      \n      // Save synthesis\n      const updated = await storage.saveDiscussionSynthesis(discussionId, synthesis);\n      \n      res.json({ synthesis, discussion: updated });\n    } catch (error: any) {\n      console.error(\"Erro ao sintetizar:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Close a discussion\n  app.patch(\"/api/discussions/:id/close\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const discussionId = req.params.id;\n      \n      const discussion = await storage.getGroupDiscussion(discussionId);\n      if (!discussion) {\n        return res.status(404).json({ error: \"Discussão não encontrada\" });\n      }\n      \n      // Check if user is leader or moderator\n      const members = await storage.getGroupMembers(discussion.groupId);\n      const userMember = members.find(m => m.userId === userId);\n      if (!userMember || (userMember.role !== \"leader\" && userMember.role !== \"moderator\")) {\n        return res.status(403).json({ error: \"Apenas líderes podem encerrar discussões\" });\n      }\n      \n      const updated = await storage.closeGroupDiscussion(discussionId);\n      res.json(updated);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // ============================================\n  // TEACHING OUTLINES API\n  // ============================================\n\n  // Get user's teaching outlines\n  app.get(\"/api/teacher/outlines\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const outlines = await storage.getTeachingOutlines(userId);\n      res.json(outlines);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get single outline\n  app.get(\"/api/teacher/outlines/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const outline = await storage.getTeachingOutline(req.params.id);\n      res.json(outline || null);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Create outline\n  app.post(\"/api/teacher/outlines\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const outline = await storage.createTeachingOutline({\n        ...req.body,\n        teacherId: userId,\n      });\n      res.json(outline);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Update outline\n  app.patch(\"/api/teacher/outlines/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const outline = await storage.updateTeachingOutline(req.params.id, userId, req.body);\n      \n      if (!outline) {\n        return res.status(404).json({ error: \"Esboço não encontrado ou acesso negado\" });\n      }\n      \n      res.json(outline);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Delete outline\n  app.delete(\"/api/teacher/outlines/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const deleted = await storage.deleteTeachingOutline(req.params.id, userId);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Esboço não encontrado ou acesso negado\" });\n      }\n      \n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // ============================================\n  // BIBLE VERSION COMPARISON API\n  // ============================================\n\n  // Compare verses across multiple versions\n  // Note: Version comparison is handled client-side using the SQLite database\n  // This endpoint provides metadata and format for the comparison view\n  app.get(\"/api/bible/compare/:book/:chapter/:verse\", async (req, res) => {\n    try {\n      const { book, chapter, verse } = req.params;\n      const versions = (req.query.versions as string || \"nvi,acf,arc,ra\").split(\",\");\n      \n      // Return metadata for client-side comparison\n      // Actual verse text is fetched from client SQLite database\n      res.json({\n        reference: `${book} ${chapter}:${verse}`,\n        book,\n        chapter: parseInt(chapter),\n        verse: parseInt(verse),\n        versions: versions.map(v => v.toUpperCase()),\n        message: \"Use client-side SQLite for verse text\",\n      });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Compare full chapter across versions\n  app.get(\"/api/bible/compare/:book/:chapter\", async (req, res) => {\n    try {\n      const { book, chapter } = req.params;\n      const versions = (req.query.versions as string || \"nvi,acf\").split(\",\").slice(0, 3);\n      \n      res.json({\n        reference: `${book} ${chapter}`,\n        book,\n        chapter: parseInt(chapter),\n        versions: versions.map(v => v.toUpperCase()),\n        message: \"Use client-side SQLite for verse text\",\n      });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // ============================================\n  // BIBLE AUDIO PROGRESS API\n  // ============================================\n\n  // Get audio progress for a chapter\n  app.get(\"/api/audio/progress/:book/:chapter\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { book, chapter } = req.params;\n      const version = (req.query.version || \"ARA\") as string;\n\n      const progress = await storage.getAudioProgress(userId, book, parseInt(chapter), version);\n      res.json(progress || { playbackPosition: 0, totalDuration: 0, completed: false });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Save audio progress\n  app.post(\"/api/audio/progress\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { book, chapter, version = \"ARA\", playbackPosition, totalDuration, completed } = req.body;\n\n      if (!book || !chapter) {\n        return res.status(400).json({ error: \"Livro e capítulo são obrigatórios\" });\n      }\n\n      const progress = await storage.upsertAudioProgress(userId, {\n        book,\n        chapter: parseInt(chapter),\n        version,\n        playbackPosition: parseInt(playbackPosition) || 0,\n        totalDuration: parseInt(totalDuration) || 0,\n        completed: !!completed,\n        lastPlayedAt: new Date(),\n      });\n\n      res.json(progress);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Get all audio progress for user\n  app.get(\"/api/audio/progress\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const progress = await storage.getUserAudioProgress(userId);\n      res.json(progress);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Shared links tracking\n  app.post(\"/api/bible/share\", async (req: any, res) => {\n    try {\n      const { book, chapter, verse, version, platform } = req.body;\n      const userId = req.user?.claims?.sub || null;\n\n      if (!book || !chapter || !verse || !version) {\n        return res.status(400).json({ message: \"Dados de compartilhamento incompletos\" });\n      }\n\n      await storage.createSharedLink({\n        userId,\n        book,\n        chapter,\n        verse,\n        version,\n        platform\n      });\n\n      res.status(201).json({ success: true });\n    } catch (error) {\n      console.error(\"[Share Tracking] Error:\", error);\n      res.status(500).json({ message: \"Erro ao registrar compartilhamento\" });\n    }\n  });\n\n  // Helper function to escape HTML special characters\n  function escapeHtml(text: string): string {\n    const map: { [key: string]: string } = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#039;'\n    };\n    return text.replace(/[&<>\"']/g, char => map[char] || char);\n  }\n\n  // Contact form endpoint - Public endpoint for contact messages\n  app.post(\"/api/contact\", async (req: any, res) => {\n    try {\n      const { name, email, subject, message } = req.body;\n\n      // Validate all fields are present\n      if (!name || !email || !subject || !message) {\n        return res.status(400).json({ message: \"Nome, email, assunto e mensagem são obrigatórios\" });\n      }\n\n      // Basic email validation\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!emailRegex.test(email)) {\n        return res.status(400).json({ message: \"Email inválido\" });\n      }\n\n      const gmailPassword = process.env.GMAIL_APP_PASSWORD;\n      const gmailUser = 'bibliafs3@gmail.com';\n\n      // If GMAIL_APP_PASSWORD is not configured, log the contact and return success\n      if (!gmailPassword) {\n        console.log(`[Contact Form] GMAIL_APP_PASSWORD not configured`);\n        console.log(`[Contact Form] Message received from ${email} (${name}): ${subject}`);\n        console.log(`[Contact Form] Body: ${message}`);\n        return res.json({ message: \"Mensagem enviada com sucesso\" });\n      }\n\n      // Send email using nodemailer with Gmail SMTP\n      const transporter = nodemailer.createTransport({\n        host: 'smtp.gmail.com',\n        port: 465,\n        secure: true,\n        auth: {\n          user: gmailUser,\n          pass: gmailPassword,\n        },\n      });\n\n      await transporter.sendMail({\n        from: `\"BíbliaFS Contato\" <${gmailUser}>`,\n        to: gmailUser,\n        replyTo: email,\n        subject: `[BíbliaFS Contato] ${subject}`,\n        html: `\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9f9f9; border-radius: 8px;\">\n            <h2 style=\"color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px;\">Nova Mensagem de Contato</h2>\n            \n            <div style=\"background-color: #fff; padding: 15px; border-radius: 5px; margin: 15px 0;\">\n              <p><strong style=\"color: #667eea;\">Nome:</strong> ${escapeHtml(name)}</p>\n              <p><strong style=\"color: #667eea;\">Email:</strong> <a href=\"mailto:${escapeHtml(email)}\">${escapeHtml(email)}</a></p>\n              <p><strong style=\"color: #667eea;\">Assunto:</strong> ${escapeHtml(subject)}</p>\n            </div>\n            \n            <div style=\"background-color: #fff; padding: 15px; border-radius: 5px; margin: 15px 0;\">\n              <strong style=\"color: #667eea;\">Mensagem:</strong>\n              <p style=\"color: #555; line-height: 1.6; white-space: pre-wrap;\">${escapeHtml(message)}</p>\n            </div>\n            \n            <p style=\"color: #999; font-size: 12px; margin-top: 20px; border-top: 1px solid #ddd; padding-top: 10px;\">\n              Esta é uma mensagem automática de contato da aplicação BíbliaFS.\n            </p>\n          </div>\n        `,\n      });\n\n      console.log(`[Contact Form] Email enviado com sucesso para ${gmailUser} (responder para ${email})`);\n      return res.json({ message: \"Mensagem enviada com sucesso\" });\n\n    } catch (error: any) {\n      console.error(\"[Contact Form] Error:\", error);\n      return res.status(500).json({ message: \"Erro ao enviar mensagem. Tente novamente mais tarde.\" });\n    }\n  });\n\n  // Feedback routes - Allow anonymous feedback if not authenticated\n  app.post(\"/api/feedback\", async (req: any, res) => {\n    try {\n      const { type, score, comment } = req.body;\n      const userId = req.user?.claims?.sub || null; // Optional userId if authenticated\n\n      if (!type) {\n        return res.status(400).json({ message: \"Tipo de feedback é obrigatório\" });\n      }\n\n      const feedback = await storage.createFeedback({\n        userId,\n        type,\n        score: score !== undefined ? score : null,\n        comment: comment || null,\n      });\n\n      res.json(feedback);\n    } catch (error: any) {\n      console.error(\"[Feedback] Error:\", error);\n      res.status(500).json({ message: \"Erro ao enviar feedback\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","path":null,"size_bytes":190489,"size_tokens":null},"client/src/components/app-sidebar.tsx":{"content":"import {\n  Book,\n  Brain,\n  Users,\n  MessageSquare,\n  Headphones,\n  GraduationCap,\n  Settings,\n  Home,\n  BookOpen,\n  Trophy,\n  Bookmark,\n  Info,\n  Columns,\n  UsersRound,\n  Search,\n  Crown,\n  Flame,\n  Star,\n  Sparkles,\n} from \"lucide-react\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n  SidebarFooter,\n  useSidebar,\n} from \"@/components/ui/sidebar\";\nimport { Link, useLocation } from \"wouter\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { useEffect } from \"react\";\nimport logoImage from \"../assets/logo-new.png\";\nimport { cn } from \"@/lib/utils\";\nimport { getLevelByXp, getXpProgressInLevel } from \"@/lib/gamification-levels\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { APP_VERSION } from \"@/lib/config\";\n\nexport function AppSidebar() {\n  const [location] = useLocation();\n  const { user } = useAuth();\n  const { t } = useLanguage();\n  const { setOpenMobile, isMobile } = useSidebar();\n\n  useEffect(() => {\n    if (isMobile) {\n      setOpenMobile(false);\n    }\n  }, [location, isMobile, setOpenMobile]);\n\n  const xp = user?.experiencePoints || 0;\n  const streak = user?.readingStreak || 0;\n\n  // Use detailed 50-level system - imported at top of file\n  const detailedLevel = getLevelByXp(xp);\n  const xpProgress = getXpProgressInLevel(xp, detailedLevel.level);\n  \n  // Color gradients based on level tiers (soft navy blue palette)\n  const getLevelGradient = (level: number) => {\n    if (level <= 5) return \"from-slate-400 to-slate-500\";\n    if (level <= 10) return \"from-emerald-400 to-emerald-600\";\n    if (level <= 20) return \"from-blue-400 to-blue-600\";\n    if (level <= 30) return \"from-amber-400 to-amber-600\";\n    if (level <= 40) return \"from-slate-500 to-slate-700\";\n    return \"from-amber-500 to-amber-700\";\n  };\n  \n  const getLevelIcon = (level: number) => {\n    if (level <= 5) return Star;\n    if (level <= 10) return Sparkles;\n    if (level <= 20) return Crown;\n    if (level <= 30) return Crown;\n    if (level <= 40) return GraduationCap;\n    return GraduationCap;\n  };\n  \n  const progressToNextLevel = xpProgress.percent;\n  const LevelIcon = getLevelIcon(detailedLevel.level);\n\n  const journeyItems = [\n    { title: t.nav.home, url: \"/\", icon: Home, color: \"text-slate-600\" },\n    { title: t.nav.bible, url: \"/bible-reader\", icon: BookOpen, color: \"text-emerald-500\" },\n    { title: t.favorites.title, url: \"/favorites\", icon: Bookmark, color: \"text-rose-400\" },\n    { title: t.nav.plans, url: \"/plans\", icon: Book, color: \"text-amber-500\" },\n    { title: t.nav.prayers, url: \"/prayers\", icon: MessageSquare, color: \"text-pink-400\" },\n  ];\n\n  const studyItems = [\n    { title: t.nav.compareVersions, url: \"/compare\", icon: Columns, color: \"text-indigo-400\" },\n    { title: t.nav.teacherMode, url: \"/teacher\", icon: GraduationCap, color: \"text-slate-600\" },\n    { title: t.nav.podcasts, url: \"/podcasts\", icon: Headphones, color: \"text-teal-500\" },\n  ];\n\n  const communityItems = [\n    { title: t.nav.discover, url: \"/community\", icon: Users, color: \"text-cyan-500\" },\n    { title: t.nav.studyGroups, url: \"/groups\", icon: UsersRound, color: \"text-orange-400\" },\n    { title: \"Conquistas\", url: \"/achievements\", icon: Trophy, color: \"text-amber-500\" },\n    { title: t.nav.progress, url: \"/progress\", icon: Trophy, color: \"text-yellow-500\" },\n  ];\n\n  return (\n    <Sidebar className=\"border-r border-sidebar-border/50\">\n      <SidebarHeader className=\"p-4 border-b border-sidebar-border/50\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <img src={logoImage} alt=\"BíbliaFS Logo\" className=\"h-10 w-10 object-cover rounded-xl shadow-md\" />\n          <div>\n            <h2 className=\"font-display text-lg font-bold text-foreground\">{t.common.appName}</h2>\n            <p className=\"text-[10px] text-muted-foreground font-medium tracking-wide uppercase\">{t.sections.premiumStudy}</p>\n          </div>\n        </div>\n\n        {user && (\n          <div className=\"glass rounded-2xl p-3 space-y-3\">\n            <div className=\"flex items-center gap-3\">\n              <div \n                className=\"user-avatar-ring\" \n                style={{ '--xp-progress': `${progressToNextLevel}%` } as React.CSSProperties}\n              >\n                <Avatar className=\"h-11 w-11 border-2 border-background\">\n                  <AvatarImage src={user.profileImageUrl || undefined} alt={user.firstName || \"User\"} />\n                  <AvatarFallback className=\"bg-gradient-to-br from-blue-800 to-slate-800 text-white font-bold text-sm\">\n                    {(user.firstName?.[0] || \"U\").toUpperCase()}\n                  </AvatarFallback>\n                </Avatar>\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"font-semibold text-sm text-foreground truncate\">{user.firstName || \"Estudante\"}</p>\n                <div className=\"flex items-center gap-1.5\">\n                  <div className={cn(\"p-0.5 rounded bg-gradient-to-br\", getLevelGradient(detailedLevel.level))}>\n                    <LevelIcon className=\"h-2.5 w-2.5 text-white\" />\n                  </div>\n                  <span className=\"text-[10px] text-muted-foreground font-medium\">{detailedLevel.title}</span>\n                </div>\n              </div>\n              {streak > 0 && (\n                <div className=\"flex items-center gap-1 px-2 py-1 rounded-full bg-orange-500/10\">\n                  <Flame className=\"h-3.5 w-3.5 text-orange-500\" />\n                  <span className=\"text-xs font-bold text-orange-600 dark:text-orange-400\">{streak}</span>\n                </div>\n              )}\n            </div>\n            <div className=\"space-y-1\">\n              <div className=\"flex justify-between text-[10px]\">\n                <span className=\"text-muted-foreground\">Próximo nível</span>\n                <span className=\"font-semibold text-primary\">{xp} XP</span>\n              </div>\n              <Progress value={progressToNextLevel} className=\"h-1.5\" />\n            </div>\n          </div>\n        )}\n      </SidebarHeader>\n\n      <SidebarContent className=\"px-2\">\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-[10px] font-semibold uppercase tracking-wider text-muted-foreground/70 px-3\">\n            Minha Jornada\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {journeyItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton asChild isActive={location === item.url} data-testid={`link-sidebar-${item.url.slice(1) || 'home'}`}>\n                    <Link href={item.url}>\n                      <item.icon className={cn(\"h-4 w-4\", item.color)} />\n                      <span className=\"font-medium\">{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-[10px] font-semibold uppercase tracking-wider text-muted-foreground/70 px-3\">\n            Estudo Profundo\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {studyItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton asChild isActive={location === item.url} data-testid={`link-sidebar-${item.url.slice(1)}`}>\n                    <Link href={item.url}>\n                      <item.icon className={cn(\"h-4 w-4\", item.color)} />\n                      <span className=\"font-medium\">{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-[10px] font-semibold uppercase tracking-wider text-muted-foreground/70 px-3\">\n            Comunidade\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {communityItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton asChild isActive={location === item.url} data-testid={`link-sidebar-${item.url.slice(1)}`}>\n                    <Link href={item.url}>\n                      <item.icon className={cn(\"h-4 w-4\", item.color)} />\n                      <span className=\"font-medium\">{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        <SidebarGroup>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={location === \"/configurações\"} data-testid=\"link-sidebar-settings\">\n                  <Link href=\"/configurações\">\n                    <Settings className=\"h-4 w-4 text-muted-foreground\" />\n                    <span className=\"font-medium\">{t.nav.settings}</span>\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n              <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={location === \"/about\"} data-testid=\"link-sidebar-about\">\n                  <Link href=\"/about\">\n                    <Info className=\"h-4 w-4 text-muted-foreground\" />\n                    <span className=\"font-medium\">{t.sections.about}</span>\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n              <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={location === \"/contact\"} data-testid=\"link-sidebar-feedback\">\n                  <Link href=\"/contact\">\n                    <MessageSquare className=\"h-4 w-4 text-muted-foreground\" />\n                    <span className=\"font-medium\">Feedback</span>\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n\n      <SidebarFooter className=\"p-4 border-t border-sidebar-border/50\">\n        <div className=\"text-center text-[10px] text-muted-foreground/70\">\n          v{APP_VERSION} • © 2026 BíbliaFS • Desenvolvido por{\" \"}\n          <a \n            href=\"https://fabrisite.com.br/\" \n            target=\"_blank\" \n            rel=\"noopener noreferrer\"\n            className=\"text-primary hover:underline transition-colors\"\n            data-testid=\"link-fabrisite-sidebar\"\n          >\n            FabriSite\n          </a>\n        </div>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","path":null,"size_bytes":11017,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"replit.md":{"content":"# BíbliaFS v2.0 (v1.0.10)\n\n## Overview\nBíbliaFS is a premium, personalized, and intelligent Bible study application designed to enhance traditional scripture reading with modern AI-powered theological assistance. It aims to provide a comprehensive platform for individual and group study, integrating features like AI-assisted learning, audio playback, version comparison, and community engagement.\n\n## User Preferences\n- **Communication Style**: Clear and concise answers.\n- **Problem Solving**: Provide direct solutions or steps to resolve issues.\n- **Feature Location**: Guide on where to find specific features within the UI or by route.\n- **Status Updates**: Explicitly state the status of features (e.g., \"✅ 100% Funcional\").\n- **Technical Details**: Include relevant technical details when explaining functionalities (e.g., API endpoints, database tables, caching mechanisms).\n- **Explanation of New Features**: Describe what new features do and how they work.\n- **Workflow**: Prefer to see a breakdown of a process or a feature's flow.\n- **Interaction**: Ask before making major changes.\n- **Detailed Explanations**: Provide details about the how and why certain solutions or features were implemented.\n- **AI Context**: Ensure AI analysis considers the broader context (e.g., entire chapter) for theological accuracy.\n- **Timeliness**: Keep information updated, especially regarding fixes and new implementations.\n\n## System Architecture\n\n### Frontend\n- **Framework**: React + TypeScript + Vite\n- **UI Kit**: shadcn/ui + Tailwind CSS\n- **State Management**: TanStack Query v5 + React Context\n- **Internationalization**: Portuguese, English, Dutch, Spanish\n- **Routing**: Wouter\n- **Audio System**: Supabase Storage streaming + IndexedDB for offline capabilities\n- **UI/UX**: Reading themes (Sepia, Aged Paper, Night Mode) with localStorage persistence; mobile-responsive design for components like study group buttons and sidebar.\n\n### Backend\n- **Server**: Express.js + TypeScript\n- **Authentication**: OpenID Connect (Replit Auth) + Passport.js; Supabase native OTP for email verification.\n- **Database**: PostgreSQL via Supabase\n- **ORM**: Drizzle ORM\n\n### Key Features\n- **Study Groups**: Create/manage public/private groups, real-time chat, member management with roles (Leader/Moderator/Member), invitation system via email/phone/codes. Group leaders can edit/delete groups directly from card grid via three-dots menu. Data stored in Supabase (`groups`, `group_members`, `group_messages`, `group_invites`).\n- **Recent Activity Feed**: User-isolated activity feed on home page displaying prayers, community posts, and reading plan progress via `/api/activity/recent` endpoint.\n- **Bible Audio System**: Integrates OpenAI TTS API for high-quality audio generation, with server-side caching in PostgreSQL (`audio_cache` table) for instant playback on subsequent requests. Supports long chapters by chunking text. Frontend streams from Supabase Storage, tracks progress, and allows offline caching to IndexedDB.\n- **Version Comparison**: Side-by-side comparison of up to 3 Bible versions, with multilingual support and dynamic book name translation.\n- **Teacher Mode**: AI-powered lesson creation, generating structured outlines with pedagogical assistance based on specified duration, with PDF export.\n- **Daily Verse**: Displays a daily verse on the home page, with timezone-aware functionality.\n- **AI Semantic Search**: Intelligent verse search by theme/context using GPT-4o-mini, returning relevant verses with AI-generated summaries. Includes a quota system with limited requests for free users and proportional limits for premium plans.\n- **Gamification**: Displays XP, streak, and achievements via a banner on the Home page.\n- **Offline Mode**: Visual indicators for downloaded chapters, allowing download of individual chapters or entire books to IndexedDB.\n- **Bible Navigation Persistence**: User's selected Bible version, book, and chapter persist across sessions using localStorage.\n\n### Data Storage\n- **User Data**: Supabase PostgreSQL\n- **Bible Audio Cache**: PostgreSQL `audio_cache` table\n- **Offline Bible Text**: IndexedDB (`biblia-plus-offline`)\n- **Audio Progress**: Supabase `audio_progress` table\n- **Groups & Messages**: Supabase `groups`, `group_members`, `group_messages` tables\n- **Invites**: Supabase `group_invites` table\n\n## External Dependencies\n\n### Core Technologies\n- Replit OIDC\n- Supabase PostgreSQL\n- Express.js\n- Node.js\n- TypeScript\n- Vite\n- React\n- Wouter\n- TanStack Query\n- shadcn/ui\n- Tailwind CSS\n- Zod\n- React Hook Form\n\n### AI & Media Services\n- OpenAI API (GPT-4o for lesson content, GPT-4o-mini for semantic search, TTS for audio generation)\n- Stripe (payments and subscriptions)\n- Bible Audio Sources: eBible.org (English WEB), Bible.com endpoint or alternative (Portuguese ARC).\n\n### UI Libraries\n- Lucide React\n- react-icons\n- html-to-image\n- recharts\n- date-fns","path":null,"size_bytes":4928,"size_tokens":null},"client/src/components/LanguageSelector.tsx":{"content":"import { Globe } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { useLanguage, type Language } from '@/contexts/LanguageContext';\n\nconst languages = [\n  { code: 'pt' as Language, name: 'Português', flag: '🇧🇷' },\n  { code: 'en' as Language, name: 'English', flag: '🇺🇸' },\n  { code: 'nl' as Language, name: 'Nederlands', flag: '🇳🇱' },\n  { code: 'es' as Language, name: 'Español', flag: '🇪🇸' },\n];\n\nexport function LanguageSelector() {\n  const { language, setLanguage } = useLanguage();\n  const currentLang = languages.find(l => l.code === language);\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button \n          variant=\"outline\" \n          size=\"icon\" \n          data-testid=\"button-language-selector\"\n          className=\"h-10 w-10 rounded-xl bg-background/50 dark:bg-card/40 backdrop-blur-sm border-primary/20 dark:border-primary/30 hover:border-primary/50 hover:bg-primary/10 dark:hover:bg-primary/20 hover:text-primary transition-all shadow-sm active-elevate-2 group relative overflow-hidden\"\n        >\n          <div className=\"absolute inset-0 bg-gradient-to-tr from-primary/10 via-transparent to-primary/5 dark:from-primary/20 dark:to-primary/10 opacity-0 group-hover:opacity-100 transition-opacity\" />\n          <Globe className=\"h-5 w-5 relative z-10 text-cyan-500\" />\n          <span className=\"sr-only\">Select Language</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        {languages.map((lang) => (\n          <DropdownMenuItem\n            key={lang.code}\n            onClick={() => setLanguage(lang.code)}\n            className=\"flex items-center gap-2\"\n            data-testid={`menu-item-language-${lang.code}`}\n          >\n            <span className=\"text-lg\">{lang.flag}</span>\n            <span>{lang.name}</span>\n            {language === lang.code && (\n              <span className=\"ml-auto text-primary\">✓</span>\n            )}\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","path":null,"size_bytes":2216,"size_tokens":null},"client/src/pages/bible-reader.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { getSupabase } from \"@/lib/supabase\";\nimport { apiFetch, getApiUrl } from \"@/lib/config\";\nimport { \n  Sheet, \n  SheetContent, \n  SheetHeader, \n  SheetTitle, \n  SheetTrigger,\n  SheetClose \n} from \"@/components/ui/sheet\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport {\n  Search,\n  ChevronLeft,\n  ChevronRight,\n  Loader2,\n  Book,\n  BookmarkPlus,\n  Settings2,\n  CheckCircle,\n  Share2,\n  Download,\n  Copy,\n  CloudOff,\n  Cloud,\n  Volume2,\n  VolumeX,\n  Pause,\n  Play,\n  DownloadCloud,\n  Check,\n  BookOpen\n} from \"lucide-react\";\nimport { getAudioUrl, downloadChapterAudio, formatTime } from \"@/lib/audioService\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useOffline } from \"@/contexts/OfflineContext\";\nimport { useTheme, readingThemes } from \"@/contexts/ThemeContext\";\nimport type { Bookmark, Highlight, Note } from \"@shared/schema\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { Textarea } from \"@/components/ui/textarea\";\n\ninterface BibleBook {\n  abbrev: { pt: string };\n  name: string;\n  chapters: number;\n  testament: string;\n}\n\ninterface Verse {\n  number: number;\n  text: string;\n}\n\ninterface Chapter {\n  book: { name: string; abbrev: string };\n  chapter: { number: number };\n  verses: Verse[];\n}\n\nconst VERSIONS = [\n  { value: \"nvi\", label: \"NVI\" },\n  { value: \"acf\", label: \"ACF\" },\n  { value: \"arc\", label: \"ARC\" },\n  { value: \"ra\", label: \"RA\" },\n];\n\nimport { AudioPlayer } from \"@/components/bible-reader/audio-player\";\nimport { SEO } from \"@/components/seo/SEO\";\nimport { ShareSheet } from \"@/components/ShareSheet\";\n\nexport default function BibleReader() {\n  const { toast } = useToast();\n  const { t } = useLanguage();\n  const { isAuthenticated, isLoading: authLoading } = useAuth();\n  const { isOnline, isChapterOffline, downloadChapter, deleteChapter, getOfflineChapter, getSqliteBooks } = useOffline();\n  const { readingTheme } = useTheme();\n  const currentReadingTheme = readingThemes[readingTheme];\n  \n  // Audio state\n  const [audioCurrentTime, setAudioCurrentTime] = useState(0);\n  const [audioDuration, setAudioDuration] = useState(0);\n\n  // Parse URL query params for search results\n  const urlParams = new URLSearchParams(window.location.search);\n  const queryBook = urlParams.get(\"book\");\n  const queryChapter = urlParams.get(\"chapter\");\n  const queryVerse = urlParams.get(\"verse\");\n  const queryVersion = urlParams.get(\"version\");\n  \n  // Initialize from URL params or localStorage\n  const [version, setVersion] = useState(() => {\n    if (queryVersion) return queryVersion;\n    if (typeof window !== 'undefined') {\n      const saved = localStorage.getItem('bible_version');\n      return saved || \"nvi\";\n    }\n    return \"nvi\";\n  });\n  \n  const [selectedBook, setSelectedBook] = useState<string | null>(() => {\n    if (queryBook) return queryBook;\n    if (typeof window !== 'undefined') {\n      const saved = localStorage.getItem('bible_book');\n      return saved || \"jo\";\n    }\n    return \"jo\";\n  });\n  \n  const [selectedChapter, setSelectedChapter] = useState(() => {\n    if (queryChapter) return parseInt(queryChapter);\n    if (typeof window !== 'undefined') {\n      const saved = localStorage.getItem('bible_chapter');\n      return saved ? parseInt(saved) : 1;\n    }\n    return 1;\n  });\n\n  const [fontSize, setFontSize] = useState(() => {\n    if (typeof window !== 'undefined') {\n      const saved = localStorage.getItem('bible_font_size');\n      return saved ? parseInt(saved) : 18;\n    }\n    return 18;\n  });\n\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  // Save font size to localStorage\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('bible_font_size', fontSize.toString());\n    }\n  }, [fontSize]);\n\n  // Save version, book, and chapter to localStorage whenever they change\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('bible_version', version);\n    }\n  }, [version]);\n\n  useEffect(() => {\n    if (typeof window !== 'undefined' && selectedBook) {\n      localStorage.setItem('bible_book', selectedBook);\n    }\n  }, [selectedBook]);\n\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('bible_chapter', selectedChapter.toString());\n    }\n  }, [selectedChapter]);\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n  const [isBooksOpen, setIsBooksOpen] = useState(false);\n  const [matchedBooks, setMatchedBooks] = useState<BibleBook[]>([]);\n  const [isChaptersOpen, setIsChaptersOpen] = useState(false);\n  const [selectedVerse, setSelectedVerse] = useState<number | null>(() => {\n    if (queryVerse) return parseInt(queryVerse);\n    return null;\n  });\n  const [highlightPopoverOpen, setHighlightPopoverOpen] = useState(!!queryVerse);\n\n  // Fetch all Bible books with offline fallback\n  const { data: books = [], isLoading: loadingBooks, error: booksError } = useQuery<BibleBook[]>({\n    queryKey: [\"/api/bible/books\"],\n    retry: isOnline ? 3 : 0,\n    retryDelay: 1000,\n    queryFn: async () => {\n      // If offline, try SQLite first\n      if (!isOnline) {\n        const sqliteBooks = await getSqliteBooks();\n        if (sqliteBooks.length > 0) {\n          return sqliteBooks as BibleBook[];\n        }\n      }\n      \n      // Try API\n      try {\n        const fullUrl = getApiUrl(\"/api/bible/books\");\n        const response = await fetch(fullUrl);\n        if (!response.ok) {\n          throw new Error(\"API error\");\n        }\n        return response.json();\n      } catch (error) {\n        // Fallback to SQLite if API fails\n        const sqliteBooks = await getSqliteBooks();\n        if (sqliteBooks.length > 0) {\n          return sqliteBooks as BibleBook[];\n        }\n        throw error;\n      }\n    },\n  });\n\n  // Fetch current chapter with offline fallback and multilingual support\n  const { data: chapterData, isLoading: loadingChapter, error: chapterError } = useQuery<Chapter>({\n    queryKey: selectedBook ? [`/api/bible/multilang/${t.currentLanguage}/${version}/${selectedBook}/${selectedChapter}`] : [\"\"],\n    enabled: !!selectedBook,\n    retry: isOnline ? 2 : 0, // Don't retry if offline\n    retryDelay: 1000,\n    queryFn: async ({ queryKey }) => {\n      const url = queryKey[0] as string;\n      if (!url || url === \"\") return null;\n      \n      // Try offline first if we're offline\n      if (!isOnline && selectedBook) {\n        const offlineData = await getOfflineChapter(selectedBook, selectedChapter, version);\n        if (offlineData) {\n          return offlineData;\n        }\n        throw new Error(t.bible.contentNotAvailableOffline);\n      }\n      \n      try {\n        // Use getApiUrl for native app to convert relative URL to full URL\n        const fullUrl = getApiUrl(url);\n        const response = await fetch(fullUrl);\n        if (!response.ok) {\n          throw new Error(\"API error\");\n        }\n        return response.json();\n      } catch (error) {\n        // Try offline fallback if online request fails\n        if (selectedBook) {\n          const offlineData = await getOfflineChapter(selectedBook, selectedChapter, version);\n          if (offlineData) {\n            // Only show toast once every 5 seconds to avoid spam\n            const now = Date.now();\n            const lastToastKey = 'lastOfflineToast';\n            const lastToast = parseInt(sessionStorage.getItem(lastToastKey) || '0');\n            if (now - lastToast > 5000) {\n              toast({\n                title: t.bible.offlineModeTitle,\n                description: t.bible.loadingSavedContent,\n              });\n              sessionStorage.setItem(lastToastKey, now.toString());\n            }\n            return offlineData;\n          }\n        }\n        throw error; // Re-throw if no offline data available\n      }\n    },\n  });\n\n  // Scroll to verse if provided in URL\n  useEffect(() => {\n    if (queryVerse && chapterData) {\n      const verseElement = document.querySelector(`[data-testid=\"verse-container-${queryVerse}\"]`);\n      if (verseElement) {\n        verseElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n    }\n  }, [chapterData, queryVerse]);\n  const [noteText, setNoteText] = useState(\"\");\n  const [shareSheetOpen, setShareSheetOpen] = useState(false);\n  const [verseToShare, setVerseToShare] = useState<{ number: number; text: string } | null>(null);\n  const [commentarySheetOpen, setCommentarySheetOpen] = useState(false);\n  const [verseForCommentary, setVerseForCommentary] = useState<{ number: number; text: string } | null>(null);\n  \n  const [isPlayingAudio, setIsPlayingAudio] = useState(false);\n  const [isLoadingAudio, setIsLoadingAudio] = useState(false);\n  const [audioUrl, setAudioUrl] = useState<string | null>(null);\n  const [playingVerseNumber, setPlayingVerseNumber] = useState<number | null>(null);\n  const [audioModeDialogOpen, setAudioModeDialogOpen] = useState(false);\n  const [audioMode, setAudioMode] = useState<'chapter' | 'book'>('chapter');\n  const [bookPlaylist, setBookPlaylist] = useState<number[]>([]);\n  const [currentPlaylistIndex, setCurrentPlaylistIndex] = useState(0);\n\n  // Audio download state\n  const [downloadingAudio, setDownloadingAudio] = useState(false);\n  const [audioDownloaded, setAudioDownloaded] = useState<Set<string>>(new Set());\n  const [downloadProgress, setDownloadProgress] = useState(0);\n  \n  // Use ref for synchronous access to audio element (prevents race conditions)\n  const audioElementRef = useRef<HTMLAudioElement | null>(null);\n\n  // Download chapter audio for offline playback\n  const downloadChapterAudioFile = async () => {\n    if (!selectedBook || downloadingAudio) return;\n    setDownloadingAudio(true);\n    setDownloadProgress(0);\n\n    try {\n      const blob = await downloadChapterAudio(selectedBook, selectedChapter, version.toUpperCase(), t.currentLanguage || \"pt\", (progress: number) => {\n        setDownloadProgress(progress);\n      });\n\n      // Save to IndexedDB via offline context\n      const key = `${selectedBook}_${selectedChapter}_${version}`;\n      await downloadChapter(selectedBook, selectedChapter, version);\n      \n      setAudioDownloaded(prev => new Set(prev).add(key));\n      \n      toast({\n        title: \"Áudio baixado!\",\n        description: `${selectedBook} ${selectedChapter} disponível offline`,\n      });\n    } catch (error: any) {\n      toast({\n        title: \"Erro ao baixar\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setDownloadingAudio(false);\n      setDownloadProgress(0);\n    }\n  };\n\n  // Save audio progress automatically\n  const saveAudioProgress = async (position: number, duration: number) => {\n    if (!selectedBook) return;\n    try {\n      apiFetch(\"/api/audio/progress\", {\n        method: \"POST\",\n        credentials: \"include\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          book: selectedBook,\n          chapter: selectedChapter,\n          version: version.toUpperCase(),\n          playbackPosition: Math.floor(position),\n          totalDuration: Math.floor(duration),\n          completed: position >= duration - 5,\n        }),\n      }).catch(console.error);\n    } catch (error) {\n      console.error(\"Erro ao salvar progresso:\", error);\n    }\n  };\n\n  // Unified audio controller - stops any playing audio (chapter or verse)\n  const stopAllAudio = () => {\n    const audio = audioElementRef.current;\n    if (audio) {\n      audio.pause();\n      audio.src = '';\n      audio.onended = null;\n      audio.onerror = null;\n      audio.onloadeddata = null;\n      audio.ontimeupdate = null;\n      audio.onpause = null;\n      audio.onplay = null;\n      audioElementRef.current = null;\n    }\n    setIsPlayingAudio(false);\n    setAudioUrl(null);\n    setPlayingVerseNumber(null);\n    setAudioCurrentTime(0);\n    setAudioDuration(0);\n  };\n\n  // Audio seek handler\n  const handleAudioSeek = (value: number) => {\n    const audio = audioElementRef.current;\n    if (audio) {\n      audio.currentTime = value;\n      setAudioCurrentTime(value);\n    }\n  };\n\n  // Toggle audio play/pause\n  const handleAudioToggle = () => {\n    const audio = audioElementRef.current;\n    if (!audio) return;\n    \n    if (isPlayingAudio) {\n      audio.pause();\n      setIsPlayingAudio(false);\n    } else {\n      audio.play().then(() => {\n        setIsPlayingAudio(true);\n      }).catch(console.error);\n    }\n  };\n\n  // Get current audio title\n  const getAudioTitle = () => {\n    if (playingVerseNumber) {\n      return `${t.bibleBooks[selectedBook || ''] || selectedBook} ${selectedChapter}:${playingVerseNumber}`;\n    }\n    if (audioMode === 'book') {\n      return `${t.bibleBooks[selectedBook || ''] || selectedBook} - Capítulo ${bookPlaylist[currentPlaylistIndex] || selectedChapter}`;\n    }\n    return `${t.bibleBooks[selectedBook || ''] || selectedBook} ${selectedChapter}`;\n  };\n\n  const playChapterAudio = async (chapter: number) => {\n    if (!selectedBook) return;\n    \n    setIsLoadingAudio(true);\n    \n    try {\n      // Generate audio via OpenAI TTS (always works)\n      const backendPath = `/api/bible/audio/${t.currentLanguage || 'pt'}/${version}/${selectedBook}/${chapter}`;\n      const backendUrl = getApiUrl(backendPath);\n      \n      toast({\n        title: audioMode === 'book' ? `Gerando áudio - Capítulo ${chapter}...` : \"Gerando áudio do capítulo...\",\n        description: \"Isso pode levar 20-40 segundos. Aguarde!\",\n      });\n      \n      const { data: { session } } = await getSupabase().auth.getSession();\n      const headers: Record<string, string> = session?.access_token ? { Authorization: `Bearer ${session.access_token}` } : {};\n      \n      const response = await fetch(backendUrl, {\n        method: \"GET\",\n        credentials: \"include\",\n        headers,\n        signal: AbortSignal.timeout(120000),\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || errorData.message || `HTTP ${response.status}`);\n      }\n      if (!response.headers.get('content-type')?.includes('audio')) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || errorData.message || \"Falha ao gerar áudio\");\n      }\n      const blob = await response.blob();\n      const blobUrl = URL.createObjectURL(blob);\n      \n      const audio = new Audio(blobUrl);\n      audioElementRef.current = audio;\n      \n      audio.onloadeddata = () => {\n        setIsLoadingAudio(false);\n        setAudioDuration(audio.duration);\n        audio.play().then(() => {\n          setIsPlayingAudio(true);\n          setAudioUrl(blobUrl);\n          setPlayingVerseNumber(null);\n          \n          toast({\n            title: audioMode === 'book' ? `Tocando Capítulo ${chapter}` : \"Áudio do capítulo iniciado\",\n            description: audioMode === 'book' ? `${bookPlaylist.length - currentPlaylistIndex} capítulos restantes` : \"Você pode continuar navegando enquanto ouve\",\n          });\n        }).catch(error => {\n          setIsLoadingAudio(false);\n          stopAllAudio();\n          URL.revokeObjectURL(blobUrl);\n          console.error(\"Audio playback error:\", error);\n          toast({\n            title: \"Erro ao reproduzir áudio\",\n            description: \"Tente novamente\",\n            variant: \"destructive\",\n          });\n        });\n      };\n\n      audio.ontimeupdate = () => {\n        setAudioCurrentTime(audio.currentTime);\n        // Salvar progresso a cada 10 segundos\n        if (Math.floor(audio.currentTime) % 10 === 0) {\n          saveAudioProgress(audio.currentTime, audio.duration);\n        }\n      };\n      \n      audio.onended = () => {\n        URL.revokeObjectURL(blobUrl);\n        if (audioMode === 'book' && currentPlaylistIndex < bookPlaylist.length - 1) {\n          const nextIndex = currentPlaylistIndex + 1;\n          setCurrentPlaylistIndex(nextIndex);\n          playChapterAudio(bookPlaylist[nextIndex]);\n        } else {\n          setIsPlayingAudio(false);\n          setPlayingVerseNumber(null);\n          setBookPlaylist([]);\n          setCurrentPlaylistIndex(0);\n          setAudioMode('chapter');\n        }\n      };\n      \n      audio.onerror = () => {\n        setIsLoadingAudio(false);\n        stopAllAudio();\n        URL.revokeObjectURL(blobUrl);\n        toast({\n          title: \"Erro ao carregar áudio\",\n          description: \"Verifique sua conexão e tente novamente\",\n          variant: \"destructive\",\n        });\n      };\n    } catch (error: any) {\n      setIsLoadingAudio(false);\n      console.error(\"Audio fetch error:\", error?.message || error);\n      \n      let errorTitle = \"Erro ao carregar áudio do capítulo\";\n      let errorDescription = \"Verifique sua conexão e tente novamente\";\n      \n      if (error.name === 'AbortError') {\n        errorTitle = \"Tempo limite excedido\";\n        errorDescription = \"A geração de áudio levou mais de 60 segundos. Verifique sua conexão e tente novamente.\";\n      } else if (error?.message?.includes('401') || error?.message?.includes('403')) {\n        errorTitle = \"Não autorizado\";\n        errorDescription = \"Faça login novamente e tente\";\n      }\n      \n      toast({\n        title: errorTitle,\n        description: errorDescription,\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const startBookAudio = async () => {\n    if (!selectedBook) return;\n    \n    try {\n      // Buscar informações do livro\n      const response = await apiFetch(`/api/bible/book-info/${selectedBook}`, {\n        method: \"GET\",\n        credentials: \"include\",\n      });\n      const bookInfo = await response.json();\n      \n      // Criar playlist de todos os capítulos\n      const playlist = Array.from({ length: bookInfo.chapters }, (_, i) => i + 1);\n      setBookPlaylist(playlist);\n      setCurrentPlaylistIndex(0);\n      setAudioMode('book');\n      \n      toast({\n        title: `Livro ${bookInfo.name} completo`,\n        description: `${bookInfo.chapters} capítulos serão tocados em sequência`,\n      });\n      \n      // Iniciar reprodução do primeiro capítulo\n      playChapterAudio(1);\n    } catch (error) {\n      console.error(\"Book audio error:\", error);\n      toast({\n        title: \"Erro ao iniciar áudio do livro\",\n        description: \"Tente novamente\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const toggleAudio = async () => {\n    if (!selectedBook || isLoadingAudio) return;\n    \n    // Se já está tocando, pausar/retomar\n    const currentAudio = audioElementRef.current;\n    if (currentAudio && isPlayingAudio) {\n      currentAudio.pause();\n      setIsPlayingAudio(false);\n      return;\n    }\n    \n    if (currentAudio && audioUrl && !isPlayingAudio) {\n      currentAudio.play().then(() => {\n        setIsPlayingAudio(true);\n      }).catch((error: any) => {\n        console.error(\"Audio resume error:\", error);\n        toast({\n          title: \"Erro ao continuar áudio\",\n          description: \"Tente carregar novamente\",\n          variant: \"destructive\",\n        });\n      });\n      return;\n    }\n    \n    // Abrir dialog para escolher modo\n    setAudioModeDialogOpen(true);\n  };\n\n  const handleStartAudio = (mode: 'verse' | 'chapter' | 'book', verseNumber?: number) => {\n    setAudioModeDialogOpen(false);\n    stopAllAudio();\n    \n    if (mode === 'verse' && verseNumber !== undefined) {\n      playVerseAudio(verseNumber);\n    } else if (mode === 'chapter') {\n      setAudioMode('chapter');\n      setBookPlaylist([]);\n      setCurrentPlaylistIndex(0);\n      playChapterAudio(selectedChapter);\n    } else {\n      startBookAudio();\n    }\n  };\n\n  const playVerseAudio = async (verseNumber: number) => {\n    if (!selectedBook || !chapterData) return;\n    \n    const urlPath = `/api/bible/audio/verse/${t.currentLanguage}/${version}/${selectedBook}/${selectedChapter}/${verseNumber}`;\n    const url = getApiUrl(urlPath);\n    \n    setIsLoadingAudio(true);\n    setAudioMode('chapter');\n    \n    toast({\n      title: \"Gerando áudio do versículo...\",\n      description: \"Isso pode levar 10-20 segundos. Aguarde!\",\n    });\n    \n    try {\n      const { data: { session } } = await getSupabase().auth.getSession();\n      const headers: Record<string, string> = session?.access_token ? { Authorization: `Bearer ${session.access_token}` } : {};\n      \n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 60000);\n      \n      const response = await fetch(url, {\n        method: \"GET\",\n        credentials: \"include\",\n        headers,\n        signal: controller.signal,\n      });\n      clearTimeout(timeoutId);\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || errorData.message || `HTTP ${response.status}`);\n      }\n      if (!response.headers.get('content-type')?.includes('audio')) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || errorData.message || \"Falha ao gerar áudio\");\n      }\n      const blob = await response.blob();\n      const blobUrl = URL.createObjectURL(blob);\n      \n      const audio = new Audio(blobUrl);\n      audioElementRef.current = audio;\n      \n      audio.onloadeddata = () => {\n        setIsLoadingAudio(false);\n        setAudioDuration(audio.duration);\n        audio.play().then(() => {\n          setIsPlayingAudio(true);\n          setAudioUrl(blobUrl);\n          setPlayingVerseNumber(verseNumber);\n          \n          toast({\n            title: `Tocando versículo ${verseNumber}`,\n            description: \"Você pode continuar navegando enquanto ouve\",\n          });\n        }).catch(error => {\n          setIsLoadingAudio(false);\n          stopAllAudio();\n          URL.revokeObjectURL(blobUrl);\n          console.error(\"Audio playback error:\", error);\n          toast({\n            title: \"Erro ao reproduzir áudio\",\n            description: \"Tente novamente\",\n            variant: \"destructive\",\n          });\n        });\n      };\n\n      audio.ontimeupdate = () => {\n        setAudioCurrentTime(audio.currentTime);\n      };\n      \n      audio.onended = () => {\n        URL.revokeObjectURL(blobUrl);\n        setIsPlayingAudio(false);\n        setPlayingVerseNumber(null);\n        setAudioCurrentTime(0);\n        setAudioDuration(0);\n      };\n      \n      audio.onerror = () => {\n        setIsLoadingAudio(false);\n        stopAllAudio();\n        URL.revokeObjectURL(blobUrl);\n        toast({\n          title: \"Erro ao carregar áudio\",\n          description: \"Verifique sua conexão e tente novamente\",\n          variant: \"destructive\",\n        });\n      };\n    } catch (error: any) {\n      setIsLoadingAudio(false);\n      console.error(\"Audio fetch error:\", error?.message || error);\n      \n      let errorTitle = \"Erro ao carregar áudio do versículo\";\n      let errorDescription = \"Verifique sua conexão e tente novamente\";\n      \n      if (error.name === 'AbortError') {\n        errorTitle = \"Tempo limite excedido\";\n        errorDescription = \"A geração de áudio levou mais de 60 segundos. Verifique sua conexão e tente novamente.\";\n      } else if (error?.message?.includes('401') || error?.message?.includes('403')) {\n        errorTitle = \"Não autorizado\";\n        errorDescription = \"Faça login novamente e tente\";\n      }\n      \n      toast({\n        title: errorTitle,\n        description: errorDescription,\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  useEffect(() => {\n    return () => {\n      stopAllAudio();\n    };\n  }, []);\n\n  useEffect(() => {\n    stopAllAudio();\n  }, [selectedBook, selectedChapter]);\n\n  // Cleanup audio when popover closes\n  useEffect(() => {\n    if (!highlightPopoverOpen && playingVerseNumber) {\n      stopAllAudio();\n    }\n  }, [highlightPopoverOpen, playingVerseNumber]);\n\n  // Fetch user bookmarks\n  const { data: bookmarks = [] } = useQuery<Bookmark[]>({\n    queryKey: [\"/api/bible/bookmarks\"],\n  });\n\n  // Fetch user highlights\n  const { data: highlights = [] } = useQuery<Highlight[]>({\n    queryKey: [\"/api/bible/highlights\"],\n  });\n\n  // Fetch user notes\n  const { data: notes = [] } = useQuery<Note[]>({\n    queryKey: [\"/api/notes\"],\n  });\n\n  // Search mutation\n  const searchMutation = useMutation({\n    mutationFn: async (query: string) => {\n      return await apiRequest(\"GET\", `/api/bible/search?version=${version}&query=${encodeURIComponent(query)}`);\n    },\n  });\n\n  // Bookmark mutation\n  const bookmarkMutation = useMutation({\n    mutationFn: async (data: { book: string; chapter: number; verse: number; verseText: string; version: string }) => {\n      return await apiRequest(\"POST\", \"/api/bible/bookmarks\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/bible/bookmarks\"] });\n      toast({\n        title: t.bible.bookmarkAdded,\n        description: t.bible.verseCopied.replace('área de transferência', 'favoritos').replace('clipboard', 'bookmarks').replace('klembord', 'favorieten').replace('portapapeles', 'favoritos'),\n      });\n    },\n  });\n\n  // Highlight mutation\n  const highlightMutation = useMutation({\n    mutationFn: async (data: { book: string; chapter: number; verse: number; verseText: string; color: string }) => {\n      return await apiRequest(\"POST\", \"/api/bible/highlights\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/bible/highlights\"] });\n      setHighlightPopoverOpen(false);\n      setSelectedVerse(null);\n      toast({\n        title: t.bible.highlightAdded,\n        description: t.bible.verseImageDownloaded.replace('Imagem do versículo baixada', 'Versículo destacado').replace('image downloaded', 'highlighted').replace('afbeelding gedownload', 'gemarkeerd').replace('imagen descargada', 'resaltado'),\n      });\n    },\n  });\n\n  // Delete highlight mutation\n  const deleteHighlightMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/bible/highlights/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/bible/highlights\"] });\n      setHighlightPopoverOpen(false);\n      setSelectedVerse(null);\n      toast({\n        title: t.bible.highlightRemoved,\n        description: t.bible.highlightRemovedSuccess,\n      });\n    },\n  });\n\n  // Note mutation\n  const noteMutation = useMutation({\n    mutationFn: async (data: { book: string; chapter: number; verse: number; content: string }) => {\n      return await apiRequest(\"POST\", \"/api/notes\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notes\"] });\n      setNoteText(\"\");\n      toast({\n        title: t.bible.noteRemoved.replace('removida', 'adicionada').replace('removed', 'added').replace('verwijderd', 'toegevoegd').replace('eliminada', 'añadida'),\n        description: t.bible.noteRemovedSuccess.replace('removida', 'salva').replace('removed', 'saved').replace('verwijderd', 'opgeslagen').replace('eliminada', 'guardada'),\n      });\n    },\n  });\n\n  // Delete note mutation\n  const deleteNoteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/notes/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notes\"] });\n      setNoteText(\"\");\n      toast({\n        title: t.bible.noteRemoved,\n        description: t.bible.noteRemovedSuccess,\n      });\n    },\n  });\n\n  // Mark as read mutation\n  const markReadMutation = useMutation({\n    mutationFn: async (data: { book: string; chapter: number }) => {\n      const response = await apiRequest(\"POST\", \"/api/bible/mark-read\", data);\n      return await response.json();\n    },\n    onSuccess: (data: any) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/stats/gamification\"] });\n      \n      let description = t.plans.youEarnedXP.replace('{xp}', data.xpGained.toString()).replace('pela sua leitura.', '!').replace('for your reading.', '!').replace('met lezen.', '!').replace('por tu lectura.', '!');\n      if (data.unlockedAchievements && data.unlockedAchievements.length > 0) {\n        description += ` 🏆 ${data.unlockedAchievements.map((a: any) => a.name).join(\", \")}`;\n      }\n      \n      toast({\n        title: t.bible.chapterComplete,\n        description,\n      });\n    },\n  });\n\n  // Set initial book\n  useEffect(() => {\n    const booksArray = Array.isArray(books) ? books : [];\n    console.log(`[Books] Loaded ${booksArray.length} books:`, booksArray.map(b => ({ name: b.name, abbrev: b.abbrev.pt, chapters: b.chapters })));\n    if (booksArray.length > 0 && !selectedBook) {\n      setSelectedBook(booksArray[0].abbrev.pt);\n    }\n  }, [books, selectedBook]);\n\n  // Populate note text when opening popover\n  useEffect(() => {\n    if (selectedVerse !== null && highlightPopoverOpen) {\n      const existingNote = getVerseNote(selectedVerse);\n      setNoteText(existingNote?.content || \"\");\n    }\n  }, [selectedVerse, highlightPopoverOpen]);\n\n  useEffect(() => {\n    if (booksError) {\n      toast({\n        title: t.bible.errorLoadingBooks,\n        description: t.common.tryAgainLater,\n        variant: \"destructive\",\n      });\n    }\n  }, [booksError, toast, t]);\n\n  useEffect(() => {\n    if (chapterError) {\n      console.error(`[Chapter Error] Failed to load ${selectedBook} chapter ${selectedChapter}:`, chapterError);\n      \n      // Show specific error message based on error type\n      const errorMessage = chapterError instanceof Error ? chapterError.message : String(chapterError);\n      let description = t.common.tryAgainLater;\n      \n      if (errorMessage.includes(\"offline\") || errorMessage.includes(\"Offline\")) {\n        description = t.bible.contentNotAvailableOffline + \". \" + \"Baixe o capítulo quando estiver conectado.\";\n      } else if (errorMessage.includes(\"API error\") || errorMessage.includes(\"Failed to fetch\")) {\n        description = isOnline ? \"Servidor temporariamente indisponível.\" : t.bible.contentNotAvailableOffline;\n      } else if (errorMessage.includes(\"network\") || errorMessage.includes(\"Network\")) {\n        description = \"Verifique sua conexão com a internet.\";\n      }\n      \n      toast({\n        title: t.bible.errorLoadingChapter,\n        description,\n        variant: \"destructive\",\n      });\n    }\n  }, [chapterError, toast, t, selectedBook, selectedChapter, isOnline]);\n\n  const handleSearch = () => {\n    if (searchQuery.trim()) {\n      // Smart detection: find books that match the query\n      const query = searchQuery.trim().toLowerCase();\n      const booksArray = Array.isArray(books) ? books : [];\n      const filtered = booksArray.filter(book => {\n        const bookName = (t.bibleBooks[book.abbrev.pt] || book.name).toLowerCase();\n        const abbrev = book.abbrev.pt.toLowerCase();\n        return bookName.includes(query) || abbrev.includes(query);\n      });\n      setMatchedBooks(filtered);\n      \n      // Also search verses\n      searchMutation.mutate(searchQuery);\n      setIsSearchOpen(true);\n    }\n  };\n\n  const handleAddBookmark = (verse: Verse) => {\n    if (!chapterData) return;\n    \n    bookmarkMutation.mutate({\n      book: chapterData.book.name,\n      chapter: chapterData.chapter.number,\n      verse: verse.number,\n      verseText: verse.text,\n      version,\n    });\n  };\n\n  const getVerseHighlight = (verseNumber: number) => {\n    if (!chapterData || !highlights) return null;\n    return highlights.find(\n      h => h.book === chapterData.book.name && \n           h.chapter === chapterData.chapter.number && \n           h.verse === verseNumber\n    );\n  };\n\n  const getVerseNote = (verseNumber: number) => {\n    if (!chapterData || !notes) return null;\n    return notes.find(\n      n => n.book === chapterData.book.name && \n           n.chapter === chapterData.chapter.number && \n           n.verse === verseNumber\n    );\n  };\n\n  const handleAddHighlight = (verse: Verse, color: string) => {\n    if (!chapterData) return;\n    \n    const existingHighlight = getVerseHighlight(verse.number);\n    if (existingHighlight) {\n      deleteHighlightMutation.mutate(existingHighlight.id);\n    }\n    \n    highlightMutation.mutate({\n      book: chapterData.book.name,\n      chapter: chapterData.chapter.number,\n      verse: verse.number,\n      verseText: verse.text,\n      color,\n    });\n  };\n\n  const handleRemoveHighlight = (verseNumber: number) => {\n    const existingHighlight = getVerseHighlight(verseNumber);\n    if (existingHighlight) {\n      deleteHighlightMutation.mutate(existingHighlight.id);\n    }\n  };\n\n  const handleAddNote = (verse: Verse) => {\n    if (!chapterData || !noteText.trim()) return;\n    \n    const existingNote = getVerseNote(verse.number);\n    if (existingNote) {\n      deleteNoteMutation.mutate(existingNote.id);\n    }\n    \n    noteMutation.mutate({\n      book: chapterData.book.name,\n      chapter: chapterData.chapter.number,\n      verse: verse.number,\n      content: noteText.trim(),\n    });\n  };\n\n  const handleDeleteNote = (verseNumber: number) => {\n    const existingNote = getVerseNote(verseNumber);\n    if (existingNote) {\n      deleteNoteMutation.mutate(existingNote.id);\n    }\n  };\n\n  const highlightColors = [\n    { name: \"yellow\", bg: \"bg-yellow-200/50\", numberColor: \"text-yellow-700\", label: t.bible.yellow },\n    { name: \"green\", bg: \"bg-green-200/50\", numberColor: \"text-green-700\", label: t.bible.green },\n    { name: \"blue\", bg: \"bg-blue-200/50\", numberColor: \"text-blue-700\", label: t.bible.blue },\n    { name: \"purple\", bg: \"bg-purple-200/50\", numberColor: \"text-purple-700\", label: t.bible.purple },\n    { name: \"pink\", bg: \"bg-pink-200/50\", numberColor: \"text-pink-700\", label: t.bible.pink },\n    { name: \"orange\", bg: \"bg-orange-200/50\", numberColor: \"text-orange-700\", label: t.bible.orange },\n  ];\n\n  const getHighlightBg = (color: string) => {\n    const colorObj = highlightColors.find(c => c.name === color);\n    return colorObj ? colorObj.bg : \"\";\n  };\n\n  const getVerseNumberColor = (verseNumber: number) => {\n    const verseHighlight = getVerseHighlight(verseNumber);\n    if (verseHighlight) {\n      const colorObj = highlightColors.find(c => c.name === verseHighlight.color);\n      return colorObj ? colorObj.numberColor : \"text-primary\";\n    }\n    return \"text-primary\";\n  };\n\n  const goToNextChapter = () => {\n    const booksArray = Array.isArray(books) ? books : [];\n    const currentBook = booksArray.find(b => b.abbrev?.pt === selectedBook);\n    if (!currentBook) return;\n    \n    if (selectedChapter < currentBook.chapters) {\n      setSelectedChapter(selectedChapter + 1);\n    } else {\n      const currentIndex = booksArray.findIndex(b => b.abbrev?.pt === selectedBook);\n      if (currentIndex < booksArray.length - 1) {\n        setSelectedBook(booksArray[currentIndex + 1].abbrev.pt);\n        setSelectedChapter(1);\n      }\n    }\n  };\n\n  const goToPreviousChapter = () => {\n    if (selectedChapter > 1) {\n      setSelectedChapter(selectedChapter - 1);\n    } else {\n      const booksArray = Array.isArray(books) ? books : [];\n      const currentIndex = booksArray.findIndex(b => b.abbrev?.pt === selectedBook);\n      if (currentIndex > 0) {\n        const prevBook = booksArray[currentIndex - 1];\n        setSelectedBook(prevBook.abbrev.pt);\n        setSelectedChapter(prevBook.chapters);\n      }\n    }\n  };\n\n  const booksArray = Array.isArray(books) ? books : [];\n  const currentBook = booksArray.find(b => b.abbrev?.pt === selectedBook);\n  const oldTestament = booksArray.filter(b => b.testament === \"VT\");\n  const newTestament = booksArray.filter(b => b.testament === \"NT\");\n\n  if (loadingBooks) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  const seoTitle = chapterData \n    ? `${t.bibleBooks[chapterData.book.abbrev] || chapterData.book.name} ${chapterData.chapter.number} (${version.toUpperCase()})`\n    : \"Leitor Bíblico\";\n    \n  const seoDescription = chapterData && chapterData.verses.length > 0\n    ? chapterData.verses.slice(0, 3).map(v => `${v.number}. ${v.text}`).join(\" \")\n    : \"Leia e estude a Bíblia Sagrada com IA teológica e recursos premium.\";\n\n  if (authLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-background\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen bg-background p-6 text-center space-y-6\">\n        <div className=\"h-24 w-24 rounded-3xl bg-primary/10 flex items-center justify-center\">\n          <BookOpen className=\"h-12 w-12 text-primary\" />\n        </div>\n        <div className=\"space-y-2\">\n          <h1 className=\"text-2xl font-bold tracking-tight\">Bíblia Online</h1>\n          <p className=\"text-muted-foreground max-w-sm\">\n            Para acessar a Bíblia Online e todos os recursos de estudo, você precisa estar conectado.\n          </p>\n        </div>\n        <div className=\"flex flex-col gap-3 w-full max-w-xs\">\n          <Button onClick={() => window.location.href = \"/login\"} className=\"w-full h-12 rounded-xl text-lg font-bold\" data-testid=\"button-login-redirect\">\n            Entrar Agora\n          </Button>\n          <Button variant=\"outline\" onClick={() => window.location.href = \"/\"} className=\"w-full h-12 rounded-xl font-bold\" data-testid=\"button-home-redirect\">\n            Voltar ao Início\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      {/* Decorative background elements */}\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <SEO \n        title={seoTitle}\n        description={seoDescription}\n        ogType=\"book\"\n      />\n      {/* Top Header - Icons only */}\n      <header className=\"sticky top-0 z-40 bg-card/95 backdrop-blur border-b\">\n        <div className=\"flex items-center justify-between gap-2 px-4 h-14 max-w-6xl mx-auto w-full\">\n          <div className=\"flex items-center gap-2\">\n            <Sheet open={isSearchOpen} onOpenChange={setIsSearchOpen}>\n              <SheetTrigger asChild>\n                <Button \n                  variant=\"outline\" \n                  size=\"icon\" \n                  className=\"rounded-xl h-10 w-10 shadow-xl glass-premium hover-premium border-border hover:bg-muted transition-all hover:scale-105\" \n                  data-testid=\"button-search-open\"\n                >\n                  <Search className=\"h-4 w-4 text-primary\" />\n                </Button>\n              </SheetTrigger>\n              <SheetContent side=\"bottom\" className=\"h-[80vh]\">\n                <SheetHeader>\n                  <SheetTitle>Buscar na Bíblia</SheetTitle>\n                </SheetHeader>\n                <div className=\"mt-4 space-y-4\">\n                  <div className=\"space-y-2\">\n                    <div className=\"flex gap-2\">\n                      <Input\n                        placeholder=\"Ex: amor, Davi, fé, salvação...\"\n                        value={searchQuery}\n                        onChange={(e) => setSearchQuery(e.target.value)}\n                        onKeyDown={(e) => e.key === \"Enter\" && handleSearch()}\n                        data-testid=\"input-search\"\n                      />\n                      <Button onClick={handleSearch} disabled={searchMutation.isPending}>\n                        {searchMutation.isPending ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Search className=\"h-4 w-4\" />}\n                      </Button>\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Busque qualquer palavra, nome, expressão ou tema na Bíblia\n                    </p>\n                  </div>\n                  \n                  <ScrollArea className=\"h-[60vh]\">\n                    <div className=\"space-y-4\">\n                      {/* Book suggestions first */}\n                      {matchedBooks.length > 0 && (\n                        <div>\n                          <h3 className=\"text-sm font-semibold mb-2 flex items-center gap-2\">\n                            <Book className=\"h-4 w-4\" />\n                            Ir para livro\n                          </h3>\n                          <div className=\"space-y-2\">\n                            {matchedBooks.map((book) => (\n                              <SheetClose asChild key={book.abbrev.pt}>\n                                <button\n                                  className=\"w-full text-left p-4 rounded-2xl bg-gradient-to-r from-primary/10 to-accent/10 border border-primary/20 hover-elevate active-elevate-2 transition-colors shadow-md\"\n                                  onClick={() => {\n                                    setSelectedBook(book.abbrev.pt);\n                                    setSelectedChapter(1);\n                                    setSearchQuery(\"\");\n                                    setMatchedBooks([]);\n                                  }}\n                                  data-testid={`button-book-suggestion-${book.abbrev.pt}`}\n                                >\n                                  <div className=\"flex items-center gap-3\">\n                                    <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-primary/20\">\n                                      <Book className=\"h-5 w-5 text-primary\" />\n                                    </div>\n                                    <div>\n                                      <div className=\"font-semibold text-sm\">\n                                        {t.bibleBooks[book.abbrev.pt] || book.name}\n                                      </div>\n                                      <div className=\"text-xs text-muted-foreground\">\n                                        {book.chapters} {book.chapters === 1 ? 'capítulo' : 'capítulos'}\n                                      </div>\n                                    </div>\n                                  </div>\n                                </button>\n                              </SheetClose>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                      \n                      {/* Verse results */}\n                      {searchMutation.data && (\n                        <div>\n                          {matchedBooks.length > 0 && (\n                            <h3 className=\"text-sm font-semibold mb-2 flex items-center gap-2\">\n                              <Search className=\"h-4 w-4\" />\n                              Versículos encontrados\n                            </h3>\n                          )}\n                          <div className=\"space-y-2\">\n                            {(searchMutation.data as any).verses?.map((result: any, index: number) => (\n                              <SheetClose asChild key={index}>\n                                <button\n                                  className=\"w-full text-left p-4 rounded-xl border hover-elevate active-elevate-2 transition-colors\"\n                                  onClick={() => {\n                                    setSelectedBook(result.book.abbrev.pt);\n                                    setSelectedChapter(result.chapter);\n                                    setSearchQuery(\"\");\n                                    setMatchedBooks([]);\n                                  }}\n                                >\n                                  <div className=\"font-semibold text-sm mb-1\">\n                                    {t.bibleBooks[result.book.abbrev.pt] || result.book.name} {result.chapter}:{result.number}\n                                  </div>\n                                  <p className=\"text-sm text-muted-foreground font-serif\">{result.text}</p>\n                                </button>\n                              </SheetClose>\n                            )) || <p className=\"text-center text-muted-foreground py-4\">Nenhum versículo encontrado.</p>}\n                          </div>\n                        </div>\n                      )}\n                      \n                      {!searchMutation.data && matchedBooks.length === 0 && searchMutation.isIdle && (\n                        <div className=\"text-center text-muted-foreground py-8\">\n                          <Search className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\n                          <p>Digite para buscar livros ou versículos</p>\n                        </div>\n                      )}\n                    </div>\n                  </ScrollArea>\n                </div>\n              </SheetContent>\n            </Sheet>\n\n            <Sheet open={isBooksOpen} onOpenChange={setIsBooksOpen}>\n              <SheetTrigger asChild>\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\" \n                  className=\"rounded-xl h-10 px-3 shadow-xl gap-1.5 glass-premium hover-premium border-border hover:bg-muted transition-all hover:scale-105\" \n                  data-testid=\"button-menu\"\n                >\n                  <Book className=\"h-4 w-4 text-primary\" />\n                  <span className=\"text-xs font-bold text-primary\">Livros</span>\n                </Button>\n              </SheetTrigger>\n              <SheetContent side=\"bottom\" className=\"h-[80vh]\">\n                <SheetHeader>\n                  <SheetTitle>Livros da Bíblia</SheetTitle>\n                </SheetHeader>\n                <Tabs defaultValue=\"nt\" className=\"mt-4\">\n                  <TabsList className=\"grid w-full grid-cols-2 bg-muted/30 p-1 rounded-xl\">\n                    <TabsTrigger value=\"ot\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:text-primary transition-all font-semibold text-xs\">Antigo ({oldTestament.length})</TabsTrigger>\n                    <TabsTrigger value=\"nt\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:text-primary transition-all font-semibold text-xs\">Novo ({newTestament.length})</TabsTrigger>\n                  </TabsList>\n                  <TabsContent value=\"ot\" className=\"mt-4\">\n                    <ScrollArea className=\"h-[60vh]\">\n                      <div className=\"grid grid-cols-2 gap-2\">\n                        {oldTestament.map(book => (\n                          <SheetClose asChild key={book.abbrev.pt}>\n                            <Button\n                              variant={selectedBook === book.abbrev.pt ? \"default\" : \"outline\"}\n                              className=\"justify-start\"\n                              onClick={() => {\n                                setSelectedBook(book.abbrev.pt);\n                                setSelectedChapter(1);\n                              }}\n                              data-testid={`button-book-${book.abbrev.pt}`}\n                            >\n                              {t.bibleBooks[book.abbrev.pt] || book.name}\n                            </Button>\n                          </SheetClose>\n                        ))}\n                      </div>\n                    </ScrollArea>\n                  </TabsContent>\n                  <TabsContent value=\"nt\" className=\"mt-4\">\n                    <ScrollArea className=\"h-[60vh]\">\n                      <div className=\"grid grid-cols-2 gap-2\">\n                        {newTestament.map(book => (\n                          <SheetClose asChild key={book.abbrev.pt}>\n                            <Button\n                              variant={selectedBook === book.abbrev.pt ? \"default\" : \"outline\"}\n                              className=\"justify-start\"\n                              onClick={() => {\n                                setSelectedBook(book.abbrev.pt);\n                                setSelectedChapter(1);\n                              }}\n                              data-testid={`button-book-${book.abbrev.pt}`}\n                            >\n                              {t.bibleBooks[book.abbrev.pt] || book.name}\n                            </Button>\n                          </SheetClose>\n                        ))}\n                      </div>\n                    </ScrollArea>\n                  </TabsContent>\n                </Tabs>\n              </SheetContent>\n            </Sheet>\n\n            <Sheet open={isChaptersOpen} onOpenChange={setIsChaptersOpen}>\n              <SheetTrigger asChild>\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\" \n                  className=\"rounded-xl h-10 px-4 shadow-xl font-bold text-sm min-w-[60px] glass-premium hover-premium border-border hover:bg-muted transition-all hover:scale-105 text-foreground\" \n                  data-testid=\"button-version\"\n                >\n                  {VERSIONS.find(v => v.value === version)?.label || \"NVI\"}\n                </Button>\n              </SheetTrigger>\n              <SheetContent side=\"bottom\" className=\"h-[80vh]\">\n                <SheetHeader>\n                  <SheetTitle>Navegar</SheetTitle>\n                </SheetHeader>\n                <Tabs defaultValue=\"chapters\" className=\"mt-4\">\n                  <TabsList className=\"grid w-full grid-cols-3 bg-muted/30 p-1 rounded-xl\">\n                    <TabsTrigger value=\"chapters\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:text-primary data-[state=active]:shadow-sm transition-all font-semibold\">Capítulos</TabsTrigger>\n                    <TabsTrigger value=\"books\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:text-primary data-[state=active]:shadow-sm transition-all font-semibold\">Livros</TabsTrigger>\n                    <TabsTrigger value=\"version\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:text-primary data-[state=active]:shadow-sm transition-all font-semibold\">Versão</TabsTrigger>\n                  </TabsList>\n                  \n                  <TabsContent value=\"chapters\" className=\"mt-4\">\n                    {currentBook && (\n                      <div>\n                        <h3 className=\"text-sm font-medium mb-2\">Capítulos de {currentBook.name}</h3>\n                        <ScrollArea className=\"h-[60vh]\">\n                          <div className=\"grid grid-cols-6 gap-2\">\n                            {Array.from({ length: currentBook.chapters }, (_, i) => i + 1).map(chap => (\n                              <SheetClose asChild key={chap}>\n                                <Button\n                                  size=\"sm\"\n                                  variant={selectedChapter === chap ? \"default\" : \"outline\"}\n                                  onClick={() => setSelectedChapter(chap)}\n                                  data-testid={`button-chapter-${chap}`}\n                                >\n                                  {chap}\n                                </Button>\n                              </SheetClose>\n                            ))}\n                          </div>\n                        </ScrollArea>\n                      </div>\n                    )}\n                  </TabsContent>\n                  \n                  <TabsContent value=\"books\" className=\"mt-4\">\n                    <Tabs defaultValue=\"nt\" className=\"mt-2\">\n                      <TabsList className=\"grid w-full grid-cols-2 bg-muted/30 p-1 rounded-xl\">\n                        <TabsTrigger value=\"ot\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:text-primary transition-all font-semibold text-xs\">Antigo ({oldTestament.length})</TabsTrigger>\n                        <TabsTrigger value=\"nt\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:text-primary transition-all font-semibold text-xs\">Novo ({newTestament.length})</TabsTrigger>\n                      </TabsList>\n                      <TabsContent value=\"ot\" className=\"mt-4\">\n                        <ScrollArea className=\"h-[50vh]\">\n                          <div className=\"grid grid-cols-2 gap-2\">\n                            {oldTestament.map(book => (\n                              <SheetClose asChild key={book.abbrev.pt}>\n                                <Button\n                                  variant={selectedBook === book.abbrev.pt ? \"default\" : \"outline\"}\n                                  className=\"justify-start\"\n                                  onClick={() => {\n                                    setSelectedBook(book.abbrev.pt);\n                                    setSelectedChapter(1);\n                                  }}\n                                  data-testid={`button-book-nav-${book.abbrev.pt}`}\n                                >\n                                  {t.bibleBooks[book.abbrev.pt] || book.name}\n                                </Button>\n                              </SheetClose>\n                            ))}\n                          </div>\n                        </ScrollArea>\n                      </TabsContent>\n                      <TabsContent value=\"nt\" className=\"mt-4\">\n                        <ScrollArea className=\"h-[50vh]\">\n                          <div className=\"grid grid-cols-2 gap-2\">\n                            {newTestament.map(book => (\n                              <SheetClose asChild key={book.abbrev.pt}>\n                                <Button\n                                  variant={selectedBook === book.abbrev.pt ? \"default\" : \"outline\"}\n                                  className=\"justify-start\"\n                                  onClick={() => {\n                                    console.log(`[Book Click] Selected: ${book.name} (${book.abbrev.pt}) - ${book.chapters} chapters`);\n                                    setSelectedBook(book.abbrev.pt);\n                                    setSelectedChapter(1);\n                                  }}\n                                  data-testid={`button-book-nav-${book.abbrev.pt}`}\n                                >\n                                  {t.bibleBooks[book.abbrev.pt] || book.name}\n                                </Button>\n                              </SheetClose>\n                            ))}\n                          </div>\n                        </ScrollArea>\n                      </TabsContent>\n                    </Tabs>\n                  </TabsContent>\n                  \n                  <TabsContent value=\"version\" className=\"mt-4\">\n                    <div>\n                      <h3 className=\"text-sm font-medium mb-2\">Versão da Bíblia</h3>\n                      <div className=\"grid grid-cols-2 gap-2\">\n                        {VERSIONS.map(v => (\n                          <SheetClose asChild key={v.value}>\n                            <Button\n                              variant={version === v.value ? \"default\" : \"outline\"}\n                              onClick={() => {\n                                console.log(`[Version] Changing from ${version} to ${v.value}`);\n                                setVersion(v.value);\n                              }}\n                              data-testid={`button-version-${v.value}`}\n                            >\n                              {v.label}\n                            </Button>\n                          </SheetClose>\n                        ))}\n                      </div>\n                    </div>\n                  </TabsContent>\n                </Tabs>\n              </SheetContent>\n            </Sheet>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content - Apply Reading Theme */}\n      <main \n        className={`max-w-4xl mx-auto px-4 py-6 rounded-lg transition-colors ${readingTheme !== \"default\" ? \"reading-themed-content\" : \"\"}`}\n        style={readingTheme !== \"default\" ? { \n          backgroundColor: \"var(--reading-bg)\", \n          color: \"var(--reading-text)\" \n        } : undefined}\n      >\n        {loadingChapter ? (\n          <div className=\"flex items-center justify-center py-20\">\n            <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n          </div>\n        ) : chapterData ? (\n          <>\n            {/* Book Name - Large Centered */}\n            <h1 \n              className=\"book-name text-center text-3xl md:text-4xl font-serif font-semibold mb-2 text-foreground\" \n              data-testid=\"text-book-name\"\n            >\n              {t.bibleBooks[chapterData.book.abbrev] || chapterData.book.name}\n            </h1>\n            \n            {/* Chapter Number - Gigantic Centered */}\n            <div \n              className=\"chapter-number text-center text-8xl md:text-9xl font-display font-bold mb-8 text-muted-foreground\" \n              data-testid=\"text-chapter-number\"\n            >\n              {chapterData.chapter.number}\n            </div>\n\n            {/* Verses - Clean Reading Mode with Highlights */}\n            <div className=\"space-y-3 max-w-none\">\n              {chapterData.verses.map((verse) => {\n                const verseHighlight = getVerseHighlight(verse.number);\n                const highlightBg = verseHighlight ? getHighlightBg(verseHighlight.color) : \"\";\n                \n                return (\n                  <Popover \n                    key={verse.number}\n                    open={selectedVerse === verse.number && highlightPopoverOpen}\n                    onOpenChange={(open) => {\n                      if (open) {\n                        setSelectedVerse(verse.number);\n                        setHighlightPopoverOpen(true);\n                      } else {\n                        setHighlightPopoverOpen(false);\n                        setSelectedVerse(null);\n                      }\n                    }}\n                  >\n                    <PopoverTrigger asChild>\n                      <div \n                        className={`flex items-baseline gap-2 cursor-pointer rounded-md px-2 py-1 transition-all ${readingTheme === \"default\" ? \"hover:bg-accent/50\" : \"\"} ${highlightBg}`}\n                        data-testid={`verse-container-${verse.number}`}\n                      >\n                        <sup \n                          className={`verse-number text-[0.65rem] font-bold min-w-[1.5rem] text-right flex-shrink-0 leading-none ${readingTheme === \"default\" ? getVerseNumberColor(verse.number) : \"\"}`} \n                          data-testid={`verse-number-${verse.number}`}\n                        >\n                          {verse.number}\n                        </sup>\n                        <p \n                          className=\"verse-text flex-1 font-serif leading-relaxed text-foreground\" \n                          style={{ fontSize: `${fontSize}px` }}\n                          data-testid={`verse-text-${verse.number}`}\n                        >\n                          {verse.text}\n                        </p>\n                      </div>\n                    </PopoverTrigger>\n                    <PopoverContent className=\"w-80\">\n                      <Tabs defaultValue=\"highlight\" className=\"w-full\">\n                        <TabsList className=\"grid w-full grid-cols-2\">\n                          <TabsTrigger value=\"highlight\">Destacar</TabsTrigger>\n                          <TabsTrigger value=\"note\">Nota</TabsTrigger>\n                        </TabsList>\n                        \n                        <TabsContent value=\"highlight\" className=\"space-y-3\">\n                          <h4 className=\"font-medium text-sm\">{t.bible.chooseHighlightColor}</h4>\n                          <div className=\"grid grid-cols-3 gap-2\">\n                            {highlightColors.map(color => (\n                              <Button\n                                key={color.name}\n                                variant={verseHighlight?.color === color.name ? \"default\" : \"outline\"}\n                                size=\"sm\"\n                                className={`${color.bg} hover:${color.bg}`}\n                                onClick={() => handleAddHighlight(verse, color.name)}\n                                data-testid={`button-highlight-${color.name}`}\n                              >\n                                {color.label}\n                              </Button>\n                            ))}\n                          </div>\n                          {verseHighlight && (\n                            <Button\n                              variant=\"destructive\"\n                              size=\"sm\"\n                              className=\"w-full\"\n                              onClick={() => handleRemoveHighlight(verse.number)}\n                              data-testid=\"button-remove-highlight\"\n                            >\n                              {t.bible.removeHighlight}\n                            </Button>\n                          )}\n                        </TabsContent>\n                        \n                        <TabsContent value=\"note\" className=\"space-y-3\">\n                          <h4 className=\"font-medium text-sm\">{t.bible.addNote}</h4>\n                          <Textarea\n                            placeholder={t.bible.writeNoteHere}\n                            value={noteText}\n                            onChange={(e) => setNoteText(e.target.value)}\n                            className=\"min-h-[100px]\"\n                            data-testid=\"textarea-note\"\n                          />\n                          <div className=\"flex gap-2\">\n                            <Button\n                              size=\"sm\"\n                              className=\"flex-1\"\n                              onClick={() => handleAddNote(verse)}\n                              disabled={!noteText.trim() || noteMutation.isPending}\n                              data-testid=\"button-save-note\"\n                            >\n                              {noteMutation.isPending ? (\n                                <Loader2 className=\"h-4 w-4 animate-spin\" />\n                              ) : (\n                                getVerseNote(verse.number) ? t.bible.update : t.bible.save\n                              )}\n                            </Button>\n                            {getVerseNote(verse.number) && (\n                              <Button\n                                variant=\"destructive\"\n                                size=\"sm\"\n                                onClick={() => handleDeleteNote(verse.number)}\n                                disabled={deleteNoteMutation.isPending}\n                                data-testid=\"button-delete-note\"\n                              >\n                                {deleteNoteMutation.isPending ? (\n                                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                                ) : (\n                                  t.bible.delete\n                                )}\n                              </Button>\n                            )}\n                          </div>\n                        </TabsContent>\n                      </Tabs>\n                      \n                      {/* Audio & Share Buttons */}\n                      <div className=\"mt-3 pt-3 border-t space-y-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          className=\"w-full\"\n                          onClick={async () => {\n                            stopAllAudio();\n                            \n                            const urlPath = `/api/bible/audio/verse/${t.currentLanguage}/${version}/${selectedBook}/${selectedChapter}/${verse.number}`;\n                            const url = getApiUrl(urlPath);\n                            \n                            toast({\n                              title: \"Gerando áudio do versículo...\",\n                              description: \"Aguarde alguns segundos\",\n                            });\n                            \n                            setPlayingVerseNumber(verse.number);\n                            \n                            try {\n                              const { data: { session } } = await getSupabase().auth.getSession();\n                              const headers: Record<string, string> = session?.access_token ? { Authorization: `Bearer ${session.access_token}` } : {};\n                              \n                              const controller = new AbortController();\n                              const timeoutId = setTimeout(() => controller.abort(), 30000);\n                              \n                              const response = await fetch(url, { \n                                credentials: 'include',\n                                headers,\n                                signal: controller.signal,\n                              });\n                              clearTimeout(timeoutId);\n                              \n                              if (!response.ok) {\n                                throw new Error(`HTTP ${response.status}`);\n                              }\n                              const blob = await response.blob();\n                              const blobUrl = URL.createObjectURL(blob);\n                              \n                              const audio = new Audio(blobUrl);\n                              audioElementRef.current = audio;\n                              \n                              audio.onloadeddata = () => {\n                                audio.play().then(() => {\n                                  setIsPlayingAudio(true);\n                                  setAudioUrl(blobUrl);\n                                  toast({\n                                    title: \"Áudio do versículo iniciado\",\n                                  });\n                                }).catch(error => {\n                                  console.error(\"Audio error:\", error);\n                                  stopAllAudio();\n                                  URL.revokeObjectURL(blobUrl);\n                                  toast({\n                                    title: \"Erro ao reproduzir áudio\",\n                                    variant: \"destructive\",\n                                  });\n                                });\n                              };\n                              \n                              audio.onended = () => {\n                                setIsPlayingAudio(false);\n                                setPlayingVerseNumber(null);\n                                URL.revokeObjectURL(blobUrl);\n                              };\n                              \n                              audio.onerror = () => {\n                                stopAllAudio();\n                                URL.revokeObjectURL(blobUrl);\n                                toast({\n                                  title: \"Erro ao carregar áudio\",\n                                  variant: \"destructive\",\n                                });\n                              };\n                            } catch (error) {\n                              console.error(\"Audio fetch error:\", error);\n                              setPlayingVerseNumber(null);\n                              toast({\n                                title: \"Erro ao carregar áudio\",\n                                variant: \"destructive\",\n                              });\n                            }\n                          }}\n                          data-testid={`button-audio-verse-${verse.number}`}\n                        >\n                          {playingVerseNumber === verse.number ? (\n                            <><VolumeX className=\"h-4 w-4 mr-2\" />Tocando...</>\n                          ) : (\n                            <><Volume2 className=\"h-4 w-4 mr-2\" />Ouvir versículo</>\n                          )}\n                        </Button>\n                        \n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          className=\"w-full\"\n                          onClick={() => {\n                            handleAddBookmark(verse);\n                            setHighlightPopoverOpen(false);\n                            setSelectedVerse(null);\n                          }}\n                          data-testid={`button-bookmark-verse-${verse.number}`}\n                        >\n                          <BookmarkPlus className=\"h-4 w-4 mr-2\" />\n                          Adicionar aos Favoritos\n                        </Button>\n                        \n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          className=\"w-full\"\n                          onClick={() => {\n                            setVerseToShare(verse);\n                            setShareSheetOpen(true);\n                            setHighlightPopoverOpen(false);\n                          }}\n                          data-testid={`button-share-verse-${verse.number}`}\n                        >\n                          <Share2 className=\"h-4 w-4 mr-2\" />\n                          {t.bible.shareVerse}\n                        </Button>\n                        \n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          className=\"w-full\"\n                          onClick={() => {\n                            setVerseForCommentary(verse);\n                            setCommentarySheetOpen(true);\n                            setHighlightPopoverOpen(false);\n                          }}\n                          data-testid={`button-commentary-${verse.number}`}\n                        >\n                          <Book className=\"h-4 w-4 mr-2\" />\n                          Ver Comentário\n                        </Button>\n                      </div>\n                    </PopoverContent>\n                  </Popover>\n                );\n              })}\n            </div>\n\n            {/* Mark as Read Button */}\n            <div className=\"mt-8 flex justify-center\">\n              <Button\n                size=\"lg\"\n                onClick={() => markReadMutation.mutate({ \n                  book: chapterData.book.name, \n                  chapter: chapterData.chapter.number \n                })}\n                disabled={markReadMutation.isPending}\n                data-testid=\"button-mark-read\"\n              >\n                {markReadMutation.isPending ? (\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                ) : (\n                  <CheckCircle className=\"h-4 w-4 mr-2\" />\n                )}\n                {t.bible.markAsRead}\n              </Button>\n            </div>\n          </>\n        ) : (\n          <div className=\"text-center py-20 text-muted-foreground\">\n            {t.bible.selectBookToStart}\n          </div>\n        )}\n      </main>\n\n      {/* Share Sheet with Social Media Options */}\n      {verseToShare && chapterData && (\n        <ShareSheet\n          open={shareSheetOpen}\n          onOpenChange={setShareSheetOpen}\n          bookName={t.bibleBooks[chapterData.book.abbrev] || chapterData.book.name}\n          bookAbbrev={chapterData.book.abbrev}\n          chapter={chapterData.chapter.number}\n          verseNumber={verseToShare.number}\n          verseText={verseToShare.text}\n          version={version}\n        />\n      )}\n\n      {/* Bottom Navigation - Premium Style */}\n      <div className=\"fixed bottom-24 md:bottom-4 left-0 right-0 z-30 px-4\">\n        <div className=\"max-w-md mx-auto bg-card/95 backdrop-blur-md border border-border rounded-full shadow-2xl px-6 py-3 ring-1 ring-border\">\n          <div className=\"flex items-center justify-between gap-2\">\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"rounded-full hover:bg-muted transition-all hover:scale-110 active:scale-95\"\n              onClick={goToPreviousChapter}\n              disabled={!selectedBook || (booksArray.length > 0 && selectedBook === booksArray[0]?.abbrev?.pt && selectedChapter === 1)}\n              data-testid=\"button-previous-chapter\"\n            >\n              <ChevronLeft className=\"h-5 w-5 text-muted-foreground\" />\n            </Button>\n\n            <div className=\"flex items-center gap-1 bg-muted px-2 py-1 rounded-full border border-border shadow-inner\">\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"h-8 w-8 rounded-full hover:bg-card transition-all hover:scale-110 active:scale-95\"\n                onClick={() => setFontSize(prev => Math.max(12, prev - 2))}\n                data-testid=\"button-font-decrease\"\n              >\n                <span className=\"text-xs font-black text-muted-foreground\">A-</span>\n              </Button>\n\n              <div className=\"w-[1px] h-3 bg-border\" />\n\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"h-8 w-8 rounded-full hover:bg-card transition-all hover:scale-110 active:scale-95\"\n                onClick={() => setFontSize(prev => Math.min(32, prev + 2))}\n                data-testid=\"button-font-increase\"\n              >\n                <span className=\"text-xs font-black text-muted-foreground\">A+</span>\n              </Button>\n            </div>\n\n            {/* Audio Button */}\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"rounded-full hover:bg-muted transition-all hover:scale-110 active:scale-95\"\n              onClick={toggleAudio}\n              disabled={!selectedBook || isLoadingAudio}\n              data-testid=\"button-toggle-audio\"\n            >\n              {isLoadingAudio ? (\n                <Loader2 className=\"h-5 w-5 animate-spin text-primary\" />\n              ) : isPlayingAudio ? (\n                <VolumeX className=\"h-5 w-5 text-primary\" />\n              ) : (\n                <Volume2 className=\"h-5 w-5 text-primary\" />\n              )}\n            </Button>\n\n            {/* Offline Download Button */}\n            {selectedBook && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"rounded-full hover:bg-muted transition-all hover:scale-110 active:scale-95\"\n                onClick={async () => {\n                  try {\n                    if (isChapterOffline(selectedBook, selectedChapter, version)) {\n                      await deleteChapter(selectedBook, selectedChapter, version);\n                      toast({\n                        title: \"Removido\",\n                        description: \"Capítulo removido do modo offline\",\n                      });\n                    } else {\n                      await downloadChapterAudioFile();\n                    }\n                  } catch (error: any) {\n                    toast({\n                      title: \"Erro\",\n                      description: error.message || \"Falha na operação offline\",\n                      variant: \"destructive\"\n                    });\n                  }\n                }}\n                disabled={!selectedBook || downloadingAudio}\n                data-testid=\"button-toggle-offline\"\n              >\n                {downloadingAudio ? (\n                  <Loader2 className=\"h-5 w-5 animate-spin text-blue-600\" />\n                ) : isChapterOffline(selectedBook, selectedChapter, version) ? (\n                  <CloudOff className=\"h-5 w-5 text-blue-600\" />\n                ) : (\n                  <Cloud className=\"h-5 w-5 text-blue-600\" />\n                )}\n              </Button>\n            )}\n            \n            <button\n              onClick={() => setIsChaptersOpen(true)}\n              className=\"text-xs font-black uppercase tracking-tighter min-w-[80px] text-center px-3 py-2 rounded-full transition-all hover:bg-muted text-foreground\"\n              data-testid=\"text-chapter-navigation\"\n            >\n              {chapterData ? `${t.bibleBooks[chapterData.book.abbrev] || chapterData.book.name} ${chapterData.chapter.number}` : \"Selecione\"}\n            </button>\n            \n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"rounded-full hover:bg-muted transition-all hover:scale-110 active:scale-95\"\n              onClick={goToNextChapter}\n              disabled={!currentBook || (booksArray.length > 0 && selectedBook === booksArray[booksArray.length - 1]?.abbrev?.pt && selectedChapter === currentBook?.chapters)}\n              data-testid=\"button-next-chapter\"\n            >\n              <ChevronRight className=\"h-5 w-5 text-muted-foreground\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Commentary Sheet */}\n      <Sheet open={commentarySheetOpen} onOpenChange={setCommentarySheetOpen}>\n        <SheetContent side=\"bottom\" className=\"h-[90vh]\">\n          <SheetHeader>\n            <SheetTitle>\n              Comentário Teológico - {selectedBook} {selectedChapter}:{verseForCommentary?.number}\n            </SheetTitle>\n          </SheetHeader>\n          \n          {verseForCommentary && (\n            <div className=\"mt-4\">\n              {/* Verse Text */}\n              <div className=\"bg-muted p-4 rounded-lg mb-4\">\n                <p className=\"text-sm font-semibold text-muted-foreground mb-1\">\n                  {selectedBook} {selectedChapter}:{verseForCommentary.number}\n                </p>\n                <p className=\"font-serif text-base leading-relaxed\">\n                  \"{verseForCommentary.text}\"\n                </p>\n              </div>\n\n              {/* Commentary Tabs */}\n              <Tabs defaultValue=\"exegese\" className=\"w-full\">\n                <TabsList className=\"grid w-full grid-cols-5\">\n                  <TabsTrigger value=\"exegese\">Exegese</TabsTrigger>\n                  <TabsTrigger value=\"historico\">Histórico</TabsTrigger>\n                  <TabsTrigger value=\"aplicacao\">Aplicação</TabsTrigger>\n                  <TabsTrigger value=\"referencias\">Referências</TabsTrigger>\n                  <TabsTrigger value=\"teologico\">Teológico</TabsTrigger>\n                </TabsList>\n\n                {['exegese', 'historico', 'aplicacao', 'referencias', 'teologico'].map((type) => (\n                  <TabsContent key={type} value={type} className=\"mt-4\">\n                    <CommentaryContent\n                      version={version}\n                      book={selectedBook!}\n                      chapter={selectedChapter}\n                      verse={verseForCommentary.number}\n                      commentaryType={type}\n                    />\n                  </TabsContent>\n                ))}\n              </Tabs>\n            </div>\n          )}\n        </SheetContent>\n      </Sheet>\n\n      {/* Audio Mode Selection Dialog */}\n      <Dialog open={audioModeDialogOpen} onOpenChange={setAudioModeDialogOpen}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Escolha o modo de áudio</DialogTitle>\n            <DialogDescription>\n              Você pode ouvir um versículo, o capítulo ou o livro completo\n            </DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"grid gap-3 py-4\">\n            <Button\n              onClick={() => handleStartAudio('verse', selectedVerse || undefined)}\n              variant=\"outline\"\n              className=\"h-auto flex-col items-start p-4 gap-2\"\n              data-testid=\"button-audio-verse\"\n              disabled={selectedVerse === null}\n            >\n              <div className=\"flex items-center gap-2\">\n                <Volume2 className=\"h-5 w-5\" />\n                <span className=\"font-semibold\">Versículo Selecionado</span>\n              </div>\n              <p className=\"text-sm text-muted-foreground text-left\">\n                {selectedVerse !== null ? `Ouvir apenas versículo ${selectedVerse}` : 'Selecione um versículo primeiro'}\n              </p>\n            </Button>\n            \n            <Button\n              onClick={() => handleStartAudio('chapter')}\n              variant=\"outline\"\n              className=\"h-auto flex-col items-start p-4 gap-2\"\n              data-testid=\"button-audio-chapter\"\n            >\n              <div className=\"flex items-center gap-2\">\n                <Book className=\"h-5 w-5\" />\n                <span className=\"font-semibold\">Capítulo Atual</span>\n              </div>\n              <p className=\"text-sm text-muted-foreground text-left\">\n                Ouvir apenas {selectedBook} {selectedChapter}\n              </p>\n            </Button>\n            \n            <Button\n              onClick={() => handleStartAudio('book')}\n              variant=\"outline\"\n              className=\"h-auto flex-col items-start p-4 gap-2\"\n              data-testid=\"button-audio-book\"\n            >\n              <div className=\"flex items-center gap-2\">\n                <Book className=\"h-5 w-5\" />\n                <span className=\"font-semibold\">Livro Completo</span>\n              </div>\n              <p className=\"text-sm text-muted-foreground text-left\">\n                Ouvir todo o livro de {currentBook?.name || selectedBook} em sequência\n              </p>\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Floating Audio Player */}\n      {(isPlayingAudio || isLoadingAudio || audioCurrentTime > 0) && (\n        <AudioPlayer\n          isPlaying={isPlayingAudio}\n          isLoading={isLoadingAudio}\n          onToggle={handleAudioToggle}\n          onStop={stopAllAudio}\n          title={getAudioTitle()}\n          currentTime={audioCurrentTime}\n          duration={audioDuration}\n          onSeek={handleAudioSeek}\n        />\n      )}\n    </div>\n  );\n}\n\n// Commentary Content Component\nfunction CommentaryContent({\n  version,\n  book,\n  chapter,\n  verse,\n  commentaryType,\n}: {\n  version: string;\n  book: string;\n  chapter: number;\n  verse: number;\n  commentaryType: string;\n}) {\n  const { toast } = useToast();\n\n  const { data: commentary, isLoading, error } = useQuery({\n    queryKey: ['/api/bible/commentary', version, book, chapter, verse, commentaryType],\n    queryFn: async () => {\n      const response = await fetch(\n        `/api/bible/commentary/${version}/${book}/${chapter}/${verse}?type=${commentaryType}`,\n        { credentials: 'include' }\n      );\n      \n      if (response.status === 401) {\n        throw new Error('LOGIN_REQUIRED');\n      }\n      if (response.status === 429) {\n        const data = await response.json();\n        throw new Error(data.error || 'QUOTA_EXCEEDED');\n      }\n      if (!response.ok) {\n        throw new Error('Falha ao carregar comentário');\n      }\n      \n      return await response.json();\n    },\n    retry: 1,\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n        <span className=\"ml-3 text-sm text-muted-foreground\">Gerando comentário...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    const errorMessage = error.message;\n    if (errorMessage === 'LOGIN_REQUIRED') {\n      return (\n        <div className=\"bg-muted/50 border border-border rounded-lg p-4 text-center\">\n          <p className=\"text-sm text-muted-foreground mb-2\">\n            Faça login para acessar os comentários de IA.\n          </p>\n          <a href=\"/login\" className=\"text-sm text-primary font-medium hover:underline\" data-testid=\"link-login-commentary\">\n            Entrar na conta\n          </a>\n        </div>\n      );\n    }\n    if (errorMessage.includes('esgotou') || errorMessage === 'QUOTA_EXCEEDED') {\n      return (\n        <div className=\"bg-amber-500/10 border border-amber-500/20 rounded-lg p-4 text-center\">\n          <p className=\"text-sm text-amber-700 dark:text-amber-400 mb-2\">\n            {errorMessage !== 'QUOTA_EXCEEDED' ? errorMessage : 'Você atingiu o limite de perguntas do plano gratuito.'}\n          </p>\n          <a href=\"/pricing\" className=\"text-sm text-primary font-medium hover:underline\" data-testid=\"link-upgrade-commentary\">\n            Ver planos\n          </a>\n        </div>\n      );\n    }\n    return (\n      <div className=\"bg-destructive/10 border border-destructive/20 rounded-lg p-4\">\n        <p className=\"text-sm text-destructive\">\n          Erro ao carregar comentário. Tente novamente mais tarde.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <ScrollArea className=\"h-[60vh]\">\n      <div className=\"prose prose-sm max-w-none p-4\">\n        <p className=\"whitespace-pre-wrap leading-relaxed\">\n          {commentary?.content}\n        </p>\n      </div>\n    </ScrollArea>\n  );\n}\n","path":null,"size_bytes":85611,"size_tokens":null},"server/bible-books-fallback.ts":{"content":"export const BIBLE_BOOKS_FALLBACK = [\n  { abbrev: { pt: \"gn\" }, name: \"Gênesis\", chapters: 50, testament: \"VT\" },\n  { abbrev: { pt: \"ex\" }, name: \"Êxodo\", chapters: 40, testament: \"VT\" },\n  { abbrev: { pt: \"lv\" }, name: \"Levítico\", chapters: 27, testament: \"VT\" },\n  { abbrev: { pt: \"nm\" }, name: \"Números\", chapters: 36, testament: \"VT\" },\n  { abbrev: { pt: \"dt\" }, name: \"Deuteronômio\", chapters: 34, testament: \"VT\" },\n  { abbrev: { pt: \"js\" }, name: \"Josué\", chapters: 24, testament: \"VT\" },\n  { abbrev: { pt: \"jz\" }, name: \"Juízes\", chapters: 21, testament: \"VT\" },\n  { abbrev: { pt: \"rt\" }, name: \"Rute\", chapters: 4, testament: \"VT\" },\n  { abbrev: { pt: \"1sm\" }, name: \"1 Samuel\", chapters: 31, testament: \"VT\" },\n  { abbrev: { pt: \"2sm\" }, name: \"2 Samuel\", chapters: 24, testament: \"VT\" },\n  { abbrev: { pt: \"1rs\" }, name: \"1 Reis\", chapters: 22, testament: \"VT\" },\n  { abbrev: { pt: \"2rs\" }, name: \"2 Reis\", chapters: 25, testament: \"VT\" },\n  { abbrev: { pt: \"1cr\" }, name: \"1 Crônicas\", chapters: 29, testament: \"VT\" },\n  { abbrev: { pt: \"2cr\" }, name: \"2 Crônicas\", chapters: 36, testament: \"VT\" },\n  { abbrev: { pt: \"ed\" }, name: \"Esdras\", chapters: 10, testament: \"VT\" },\n  { abbrev: { pt: \"ne\" }, name: \"Neemias\", chapters: 13, testament: \"VT\" },\n  { abbrev: { pt: \"et\" }, name: \"Ester\", chapters: 10, testament: \"VT\" },\n  { abbrev: { pt: \"job\" }, name: \"Jó\", chapters: 42, testament: \"VT\" },\n  { abbrev: { pt: \"sl\" }, name: \"Salmos\", chapters: 150, testament: \"VT\" },\n  { abbrev: { pt: \"pv\" }, name: \"Provérbios\", chapters: 31, testament: \"VT\" },\n  { abbrev: { pt: \"ec\" }, name: \"Eclesiastes\", chapters: 12, testament: \"VT\" },\n  { abbrev: { pt: \"ct\" }, name: \"Cantares\", chapters: 8, testament: \"VT\" },\n  { abbrev: { pt: \"is\" }, name: \"Isaías\", chapters: 66, testament: \"VT\" },\n  { abbrev: { pt: \"jr\" }, name: \"Jeremias\", chapters: 52, testament: \"VT\" },\n  { abbrev: { pt: \"lm\" }, name: \"Lamentações\", chapters: 5, testament: \"VT\" },\n  { abbrev: { pt: \"ez\" }, name: \"Ezequiel\", chapters: 48, testament: \"VT\" },\n  { abbrev: { pt: \"dn\" }, name: \"Daniel\", chapters: 12, testament: \"VT\" },\n  { abbrev: { pt: \"os\" }, name: \"Oséias\", chapters: 14, testament: \"VT\" },\n  { abbrev: { pt: \"jl\" }, name: \"Joel\", chapters: 3, testament: \"VT\" },\n  { abbrev: { pt: \"am\" }, name: \"Amós\", chapters: 9, testament: \"VT\" },\n  { abbrev: { pt: \"ob\" }, name: \"Obadias\", chapters: 1, testament: \"VT\" },\n  { abbrev: { pt: \"jn\" }, name: \"Jonas\", chapters: 4, testament: \"VT\" },\n  { abbrev: { pt: \"mq\" }, name: \"Miquéias\", chapters: 7, testament: \"VT\" },\n  { abbrev: { pt: \"na\" }, name: \"Naum\", chapters: 3, testament: \"VT\" },\n  { abbrev: { pt: \"hc\" }, name: \"Habacuque\", chapters: 3, testament: \"VT\" },\n  { abbrev: { pt: \"sf\" }, name: \"Sofonias\", chapters: 3, testament: \"VT\" },\n  { abbrev: { pt: \"ag\" }, name: \"Ageu\", chapters: 2, testament: \"VT\" },\n  { abbrev: { pt: \"zc\" }, name: \"Zacarias\", chapters: 14, testament: \"VT\" },\n  { abbrev: { pt: \"ml\" }, name: \"Malaquias\", chapters: 4, testament: \"VT\" },\n  { abbrev: { pt: \"mt\" }, name: \"Mateus\", chapters: 28, testament: \"NT\" },\n  { abbrev: { pt: \"mc\" }, name: \"Marcos\", chapters: 16, testament: \"NT\" },\n  { abbrev: { pt: \"lc\" }, name: \"Lucas\", chapters: 24, testament: \"NT\" },\n  { abbrev: { pt: \"jo\" }, name: \"João\", chapters: 21, testament: \"NT\" },\n  { abbrev: { pt: \"at\" }, name: \"Atos\", chapters: 28, testament: \"NT\" },\n  { abbrev: { pt: \"rm\" }, name: \"Romanos\", chapters: 16, testament: \"NT\" },\n  { abbrev: { pt: \"1co\" }, name: \"1 Coríntios\", chapters: 16, testament: \"NT\" },\n  { abbrev: { pt: \"2co\" }, name: \"2 Coríntios\", chapters: 13, testament: \"NT\" },\n  { abbrev: { pt: \"gl\" }, name: \"Gálatas\", chapters: 6, testament: \"NT\" },\n  { abbrev: { pt: \"ef\" }, name: \"Efésios\", chapters: 6, testament: \"NT\" },\n  { abbrev: { pt: \"fp\" }, name: \"Filipenses\", chapters: 4, testament: \"NT\" },\n  { abbrev: { pt: \"cl\" }, name: \"Colossenses\", chapters: 4, testament: \"NT\" },\n  { abbrev: { pt: \"1ts\" }, name: \"1 Tessalonicenses\", chapters: 5, testament: \"NT\" },\n  { abbrev: { pt: \"2ts\" }, name: \"2 Tessalonicenses\", chapters: 3, testament: \"NT\" },\n  { abbrev: { pt: \"1tm\" }, name: \"1 Timóteo\", chapters: 6, testament: \"NT\" },\n  { abbrev: { pt: \"2tm\" }, name: \"2 Timóteo\", chapters: 4, testament: \"NT\" },\n  { abbrev: { pt: \"tt\" }, name: \"Tito\", chapters: 3, testament: \"NT\" },\n  { abbrev: { pt: \"fm\" }, name: \"Filemom\", chapters: 1, testament: \"NT\" },\n  { abbrev: { pt: \"hb\" }, name: \"Hebreus\", chapters: 13, testament: \"NT\" },\n  { abbrev: { pt: \"tg\" }, name: \"Tiago\", chapters: 5, testament: \"NT\" },\n  { abbrev: { pt: \"1pe\" }, name: \"1 Pedro\", chapters: 5, testament: \"NT\" },\n  { abbrev: { pt: \"2pe\" }, name: \"2 Pedro\", chapters: 3, testament: \"NT\" },\n  { abbrev: { pt: \"1jo\" }, name: \"1 João\", chapters: 5, testament: \"NT\" },\n  { abbrev: { pt: \"2jo\" }, name: \"2 João\", chapters: 1, testament: \"NT\" },\n  { abbrev: { pt: \"3jo\" }, name: \"3 João\", chapters: 1, testament: \"NT\" },\n  { abbrev: { pt: \"jd\" }, name: \"Judas\", chapters: 1, testament: \"NT\" },\n  { abbrev: { pt: \"ap\" }, name: \"Apocalipse\", chapters: 22, testament: \"NT\" },\n];\n","path":null,"size_bytes":5094,"size_tokens":null},"server/seed-achievements.ts":{"content":"import { InsertAchievement } from \"@shared/schema\";\n\nexport const achievements: InsertAchievement[] = [\n  {\n    name: \"Primeira Leitura\",\n    description: \"Complete sua primeira leitura de capítulo\",\n    icon: \"book-open\",\n    category: \"leitura\",\n    xpReward: 10,\n    requirement: \"Ler 1 capítulo\",\n  },\n  {\n    name: \"Leitor Dedicado\",\n    description: \"Leia 10 capítulos\",\n    icon: \"book\",\n    category: \"leitura\",\n    xpReward: 50,\n    requirement: \"Ler 10 capítulos\",\n  },\n  {\n    name: \"Estudioso da Palavra\",\n    description: \"Leia 50 capítulos\",\n    icon: \"book-marked\",\n    category: \"leitura\",\n    xpReward: 250,\n    requirement: \"Ler 50 capítulos\",\n  },\n  {\n    name: \"Mestre das Escrituras\",\n    description: \"Leia 100 capítulos\",\n    icon: \"graduation-cap\",\n    category: \"leitura\",\n    xpReward: 500,\n    requirement: \"Ler 100 capítulos\",\n  },\n  {\n    name: \"Sequência de 7 Dias\",\n    description: \"Mantenha uma sequência de leitura de 7 dias consecutivos\",\n    icon: \"flame\",\n    category: \"streak\",\n    xpReward: 100,\n    requirement: \"Streak de 7 dias\",\n  },\n  {\n    name: \"Sequência de 30 Dias\",\n    description: \"Mantenha uma sequência de leitura de 30 dias consecutivos\",\n    icon: \"trophy\",\n    category: \"streak\",\n    xpReward: 500,\n    requirement: \"Streak de 30 dias\",\n  },\n  {\n    name: \"Sequência de 100 Dias\",\n    description: \"Mantenha uma sequência de leitura de 100 dias consecutivos\",\n    icon: \"crown\",\n    category: \"streak\",\n    xpReward: 2000,\n    requirement: \"Streak de 100 dias\",\n  },\n  {\n    name: \"Primeiro Plano Completo\",\n    description: \"Complete seu primeiro plano de leitura\",\n    icon: \"check-circle\",\n    category: \"planos\",\n    xpReward: 100,\n    requirement: \"Completar 1 plano\",\n  },\n  {\n    name: \"Planejador Consistente\",\n    description: \"Complete 5 planos de leitura\",\n    icon: \"list-checks\",\n    category: \"planos\",\n    xpReward: 500,\n    requirement: \"Completar 5 planos\",\n  },\n  {\n    name: \"Guerreiro de Oração\",\n    description: \"Registre 10 orações no diário de oração\",\n    icon: \"heart\",\n    category: \"oração\",\n    xpReward: 50,\n    requirement: \"Registrar 10 orações\",\n  },\n  {\n    name: \"Intercessor Fiel\",\n    description: \"Registre 50 orações no diário de oração\",\n    icon: \"heart-handshake\",\n    category: \"oração\",\n    xpReward: 250,\n    requirement: \"Registrar 50 orações\",\n  },\n  {\n    name: \"Anotador Iniciante\",\n    description: \"Crie sua primeira nota de estudo\",\n    icon: \"pencil\",\n    category: \"notas\",\n    xpReward: 20,\n    requirement: \"Criar 1 nota\",\n  },\n  {\n    name: \"Pesquisador das Escrituras\",\n    description: \"Crie 25 notas de estudo\",\n    icon: \"notebook-pen\",\n    category: \"notas\",\n    xpReward: 150,\n    requirement: \"Criar 25 notas\",\n  },\n  {\n    name: \"Marcador de Versículos\",\n    description: \"Destaque 10 versículos\",\n    icon: \"highlighter\",\n    category: \"destaques\",\n    xpReward: 30,\n    requirement: \"Destacar 10 versículos\",\n  },\n  {\n    name: \"Colecionador de Tesouros\",\n    description: \"Destaque 50 versículos\",\n    icon: \"gem\",\n    category: \"destaques\",\n    xpReward: 200,\n    requirement: \"Destacar 50 versículos\",\n  },\n  {\n    name: \"Membro da Comunidade\",\n    description: \"Compartilhe sua primeira reflexão com a comunidade\",\n    icon: \"users\",\n    category: \"comunidade\",\n    xpReward: 50,\n    requirement: \"Criar 1 post\",\n  },\n  {\n    name: \"Influenciador Espiritual\",\n    description: \"Compartilhe 10 reflexões com a comunidade\",\n    icon: \"share-2\",\n    category: \"comunidade\",\n    xpReward: 300,\n    requirement: \"Criar 10 posts\",\n  },\n  {\n    name: \"Explorador Completo\",\n    description: \"Experimente todas as funcionalidades do app (leitura, oração, notas, planos, comunidade)\",\n    icon: \"compass\",\n    category: \"exploração\",\n    xpReward: 200,\n    requirement: \"Usar todas as funcionalidades\",\n  },\n];\n","path":null,"size_bytes":3876,"size_tokens":null},"server/bible-chapters-fallback.ts":{"content":"export const BIBLE_CHAPTERS_FALLBACK: Record<string, any> = {\n  \"nvi-gn-1\": {\n    book: { abbrev: { pt: \"gn\" }, name: \"Gênesis\" },\n    chapter: { number: 1, verses: 31 },\n    verses: [\n      { number: 1, text: \"No princípio Deus criou os céus e a terra.\" },\n      { number: 2, text: \"Era a terra sem forma e vazia; trevas cobriam a face do abismo, e o Espírito de Deus se movia sobre a face das águas.\" },\n      { number: 3, text: \"Disse Deus: \\\"Haja luz\\\", e houve luz.\" },\n      { number: 4, text: \"Deus viu que a luz era boa, e separou a luz das trevas.\" },\n      { number: 5, text: \"Deus chamou à luz dia, e às trevas chamou noite. Passaram-se a tarde e a manhã; esse foi o primeiro dia.\" },\n      { number: 6, text: \"Depois disse Deus: \\\"Haja entre as águas um firmamento que separe águas de águas\\\".\" },\n      { number: 7, text: \"Então Deus fez o firmamento e separou as águas que ficaram embaixo do firmamento das que ficaram por cima. E assim foi.\" },\n      { number: 8, text: \"Ao firmamento Deus chamou céu. Passaram-se a tarde e a manhã; esse foi o segundo dia.\" },\n      { number: 9, text: \"E disse Deus: \\\"Ajuntem-se num só lugar as águas que estão debaixo do céu, e apareça a parte seca\\\". E assim foi.\" },\n      { number: 10, text: \"À parte seca Deus chamou terra, e chamou mares ao conjunto das águas. E Deus viu que ficou bom.\" },\n      { number: 11, text: \"Então disse Deus: \\\"Cubra-se a terra de vegetação: plantas que deem sementes e árvores cujos frutos produzam sementes de acordo com as suas espécies\\\". E assim foi.\" },\n      { number: 12, text: \"A terra fez brotar a vegetação: plantas que dão sementes de acordo com as suas espécies, e árvores cujos frutos produzem sementes de acordo com as suas espécies. E Deus viu que ficou bom.\" },\n      { number: 13, text: \"Passaram-se a tarde e a manhã; esse foi o terceiro dia.\" },\n      { number: 14, text: \"Disse Deus: \\\"Haja luminares no firmamento do céu para separar o dia da noite. Sirvam eles de sinais para marcar estações, dias e anos,\" },\n      { number: 15, text: \"e sirvam de luminares no firmamento do céu para iluminar a terra\\\". E assim foi.\" },\n      { number: 16, text: \"Deus fez os dois grandes luminares: o maior para governar o dia e o menor para governar a noite; fez também as estrelas.\" },\n      { number: 17, text: \"Deus os colocou no firmamento do céu para iluminar a terra,\" },\n      { number: 18, text: \"governar o dia e a noite, e separar a luz das trevas. E Deus viu que ficou bom.\" },\n      { number: 19, text: \"Passaram-se a tarde e a manhã; esse foi o quarto dia.\" },\n      { number: 20, text: \"Disse também Deus: \\\"Encham-se as águas de seres vivos, e sobre a terra voem aves sob o firmamento do céu\\\".\" },\n      { number: 21, text: \"Assim Deus criou os grandes animais aquáticos e os demais seres vivos que povoam as águas, de acordo com as suas espécies; e todas as aves, de acordo com as suas espécies. E Deus viu que ficou bom.\" },\n      { number: 22, text: \"Então Deus os abençoou, dizendo: \\\"Sejam férteis e multipliquem-se! Encham as águas dos mares! E multipliquem-se as aves na terra\\\".\" },\n      { number: 23, text: \"Passaram-se a tarde e a manhã; esse foi o quinto dia.\" },\n      { number: 24, text: \"E disse Deus: \\\"Produza a terra seres vivos de acordo com as suas espécies: rebanhos domésticos, animais selvagens e os demais seres vivos da terra, cada um de acordo com a sua espécie\\\". E assim foi.\" },\n      { number: 25, text: \"Deus fez os animais selvagens de acordo com as suas espécies, os rebanhos domésticos de acordo com as suas espécies, e os demais seres vivos da terra de acordo com as suas espécies. E Deus viu que ficou bom.\" },\n      { number: 26, text: \"Então disse Deus: \\\"Façamos o homem à nossa imagem, conforme a nossa semelhança. Domine ele sobre os peixes do mar, sobre as aves do céu, sobre os grandes animais de toda a terra e sobre todos os pequenos animais que se movem rente ao chão\\\".\" },\n      { number: 27, text: \"Criou Deus o homem à sua imagem, à imagem de Deus o criou; homem e mulher os criou.\" },\n      { number: 28, text: \"Deus os abençoou, e lhes disse: \\\"Sejam férteis e multipliquem-se! Encham e subjuguem a terra! Dominem sobre os peixes do mar, sobre as aves do céu e sobre todos os animais que se movem pela terra\\\".\" },\n      { number: 29, text: \"Disse Deus: \\\"Eis que lhes dou todas as plantas que nascem em toda a terra e produzem sementes, e todas as árvores que dão frutos com sementes. Elas servirão de alimento para vocês.\" },\n      { number: 30, text: \"E dou todos os vegetais como alimento a tudo o que tem em si fôlego de vida: a todos os grandes animais da terra, a todas as aves do céu e a todas as criaturas que se movem rente ao chão\\\". E assim foi.\" },\n      { number: 31, text: \"E Deus viu tudo o que havia feito, e tudo havia ficado muito bom. Passaram-se a tarde e a manhã; esse foi o sexto dia.\" },\n    ]\n  },\n  \"nvi-sl-23\": {\n    book: { abbrev: { pt: \"sl\" }, name: \"Salmos\" },\n    chapter: { number: 23, verses: 6 },\n    verses: [\n      { number: 1, text: \"O Senhor é o meu pastor; de nada terei falta.\" },\n      { number: 2, text: \"Em verdes pastagens me faz repousar e me conduz a águas tranquilas;\" },\n      { number: 3, text: \"restaura-me o vigor. Guia-me nas veredas da justiça por amor do seu nome.\" },\n      { number: 4, text: \"Mesmo quando eu andar por um vale de trevas e morte, não temerei mal algum, pois tu estás comigo; a tua vara e o teu cajado me protegem.\" },\n      { number: 5, text: \"Preparas um banquete para mim à vista dos meus inimigos. Tu me honras, ungindo a minha cabeça com óleo e fazendo transbordar o meu cálice.\" },\n      { number: 6, text: \"Sei que a bondade e a fidelidade me acompanharão todos os dias da minha vida, e voltarei à casa do Senhor enquanto eu viver.\" },\n    ]\n  },\n  \"acf-at-1\": {\n    book: { abbrev: { pt: \"at\" }, name: \"Atos\" },\n    chapter: { number: 1, verses: 26 },\n    verses: [\n      { number: 1, text: \"Fiz o primeiro tratado, ó Teófilo, acerca de tudo que Jesus começou, não só a fazer, mas a ensinar,\" },\n      { number: 2, text: \"Até ao dia em que, havendo dado mandamentos pelo Espírito Santo aos apóstolos que escolhera, foi recebido em cima.\" },\n      { number: 3, text: \"Aos quais também, depois de ter padecido, se apresentou vivo, com muitas provas infalíveis, sendo visto por eles durante quarenta dias, e falando do que respeita ao reino de Deus.\" },\n      { number: 4, text: \"E, estando com eles, determinou-lhes que não se afastassem de Jerusalém, mas que esperassem pela promessa do Pai, que, disse ele, de mim ouvistes.\" },\n      { number: 5, text: \"Porque João, na verdade, batizou com água, mas vós sereis batizados com o Espírito Santo, não muitos dias depois.\" },\n      { number: 6, text: \"Então os que se haviam reunido lhe perguntaram, dizendo: Senhor, restaurarás tu neste tempo o reino a Israel?\" },\n      { number: 7, text: \"E disse-lhes: Não vos pertence saber os tempos ou as épocas que o Pai estabeleceu pelo seu poder;\" },\n      { number: 8, text: \"Mas recebereis a virtude do Espírito Santo, que há de vir sobre vós; e ser-me-eis testemunhas, tanto em Jerusalém como em toda a Judéia, e Samaria, e até aos confins da terra.\" },\n      { number: 9, text: \"E, dito isto, foi elevado às alturas, à vista deles, e uma nuvem o recebeu, ocultando-o a seus olhos.\" },\n      { number: 10, text: \"E estando com os olhos fitos no céu, enquanto ele subia, eis que junto deles se puseram dois varões em vestes brancas;\" },\n      { number: 11, text: \"Os quais lhes disseram: Varões galileus, por que estais olhando para o céu? Este Jesus, que dentre vós foi recebido em cima no céu, há de vir assim como para o céu o vistes ir.\" },\n      { number: 12, text: \"Então voltaram para Jerusalém, do monte chamado das Oliveiras, que está perto de Jerusalém, à distância de um sábado.\" },\n      { number: 13, text: \"E, quando entraram, subiram ao cenáculo, onde habitavam Pedro e Tiago, João e André, Filipe e Tomé, Bartolomeu e Mateus, Tiago, filho de Alfeu, Simão o Zelote e Judas, filho de Tiago.\" },\n      { number: 14, text: \"Todos estes perseveravam unânimes em oração e súplica, com as mulheres, e com Maria, mãe de Jesus, e com seus irmãos.\" },\n      { number: 15, text: \"E naqueles dias, levantou-se Pedro no meio dos irmãos (e havia ali uma multidão de pessoas, quase cento e vinte), e disse:\" },\n      { number: 16, text: \"Homens irmãos, convinha que se cumprisse a Escritura, que o Espírito Santo predisse pela boca de Davi, acerca de Judas, que foi o guia dos que prenderam Jesus;\" },\n      { number: 17, text: \"Porque ele era contado conosco, e tinha sorte neste ministério.\" },\n      { number: 18, text: \"Ora, este adquiriu um campo com a recompensa da iniqüidade; e, caindo de cabeça para baixo, arrebentou pelo meio, e todas as suas entranhas se derramaram.\" },\n      { number: 19, text: \"E isto foi notório a todos os moradores de Jerusalém; pelo que aquele campo se chamou em sua própria língua Acéldama, isto é, Campo de Sangue.\" },\n      { number: 20, text: \"Porque no livro dos Salmos está escrito: Fique deserta a sua habitação, E não haja quem nela habite; E: Tome outro o seu bispado.\" },\n      { number: 21, text: \"Convém, pois, que de entre os homens que conviveram conosco todo o tempo em que o Senhor Jesus entrou e saiu dentre nós,\" },\n      { number: 22, text: \"Começando desde o batismo de João até ao dia em que de entre nós foi recebido em cima, um deles se faça testemunha conosco da sua ressurreição.\" },\n      { number: 23, text: \"E apresentaram dois: José, chamado Barsabás, sobrenome Justo, e Matias.\" },\n      { number: 24, text: \"E, orando, disseram: Tu, Senhor, que conheces os corações de todos, mostra qual destes dois elegeste,\" },\n      { number: 25, text: \"Para que tome parte neste ministério e apostolado, do qual Judas se apartou para ir ao seu próprio lugar.\" },\n      { number: 26, text: \"E lançaram sortes sobre eles, e a sorte caiu sobre Matias, e foi contado com os onze apóstolos.\" },\n    ]\n  }\n};\n\nexport function getFallbackChapter(version: string, book: string, chapter: number) {\n  const key = `${version}-${book}-${chapter}`;\n  return BIBLE_CHAPTERS_FALLBACK[key] || null;\n}\n","path":null,"size_bytes":10352,"size_tokens":null},"client/src/contexts/LanguageContext.tsx":{"content":"import { createContext, useContext, useState, useEffect } from 'react';\nimport { Language, translations, Translations } from '@/lib/i18n';\n\nexport type { Language };\n\ninterface LanguageContextType {\n  language: Language;\n  setLanguage: (lang: Language) => void;\n  t: Translations & { currentLanguage: Language };\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nexport function LanguageProvider({ children }: { children: React.ReactNode }) {\n  const [language, setLanguageState] = useState<Language>(() => {\n    const saved = localStorage.getItem('bible-plus-language');\n    return (saved as Language) || 'pt';\n  });\n\n  useEffect(() => {\n    localStorage.setItem('bible-plus-language', language);\n    document.documentElement.lang = language;\n  }, [language]);\n\n  const setLanguage = (lang: Language) => {\n    setLanguageState(lang);\n  };\n\n  const value = {\n    language,\n    setLanguage,\n    t: { ...translations[language], currentLanguage: language },\n  };\n\n  return (\n    <LanguageContext.Provider value={value}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}\n\nexport function useLanguage() {\n  const context = useContext(LanguageContext);\n  if (context === undefined) {\n    throw new Error('useLanguage must be used within a LanguageProvider');\n  }\n  return context;\n}\n","path":null,"size_bytes":1320,"size_tokens":null},"client/src/pages/progress.tsx":{"content":"import { motion } from \"framer-motion\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress as ProgressBar } from \"@/components/ui/progress\";\nimport { \n  Trophy, \n  Flame, \n  Star, \n  TrendingUp,\n  Loader2,\n  Award,\n  Target,\n  Zap,\n  Crown,\n  Check,\n  Sparkles,\n  BookOpen,\n  Users,\n  Lock\n} from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport type { Achievement, UserAchievement } from \"@shared/schema\";\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { getLevelInfo, getXpProgressInLevel } from '@/lib/gamification-levels';\n\ninterface GamificationStats {\n  level: number;\n  experiencePoints: number;\n  readingStreak: number;\n  achievementsUnlocked: number;\n  lastReadDate: Date | null;\n}\n\ninterface UserAchievementWithDetails extends UserAchievement {\n  achievement: Achievement;\n}\n\nconst getCategoryGradient = (category: string) => {\n  switch(category.toLowerCase()) {\n    case 'leitura': return 'from-blue-600 to-indigo-800';\n    case 'streak': return 'from-orange-500 to-red-700';\n    case 'planos': return 'from-emerald-500 to-teal-700';\n    case 'oração': return 'from-purple-500 to-pink-700';\n    case 'comunidade': return 'from-amber-500 to-orange-700';\n    case 'destaques': return 'from-cyan-500 to-blue-700';\n    case 'exploração': return 'from-violet-500 to-purple-800';\n    default: return 'from-muted-foreground to-foreground';\n  }\n};\n\nconst getCategoryIcon = (category: string) => {\n  switch(category.toLowerCase()) {\n    case 'leitura': return BookOpen;\n    case 'streak': return Flame;\n    case 'planos': return Target;\n    case 'oração': return Sparkles;\n    case 'comunidade': return Users;\n    case 'destaques': return Star;\n    case 'exploração': return Trophy;\n    default: return Award;\n  }\n};\n\nexport default function Progress() {\n  const { t } = useLanguage();\n  \n  const { data: stats, isLoading: statsLoading } = useQuery<GamificationStats>({\n    queryKey: [\"/api/stats/gamification\"],\n    retry: 2,\n  });\n\n  const { data: achievements = [], isLoading: achievementsLoading } = useQuery<Achievement[]>({\n    queryKey: [\"/api/achievements\"],\n    retry: 2,\n  });\n\n  const { data: userAchievements = [], isLoading: userAchievementsLoading } = useQuery<UserAchievementWithDetails[]>({\n    queryKey: [\"/api/my-achievements\"],\n    retry: 2,\n  });\n\n  const isLoading = statsLoading || achievementsLoading || userAchievementsLoading;\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center space-y-3\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary mx-auto\" />\n          <p className=\"text-sm text-muted-foreground font-bold italic\">{t.progress.loadingProgress}</p>\n        </div>\n      </div>\n    );\n  }\n\n  const currentLevel = stats?.level || 1;\n  const totalXp = stats?.experiencePoints || 0;\n  const levelInfo = getLevelInfo(currentLevel);\n  const xpProgressInfo = getXpProgressInLevel(totalXp, currentLevel);\n\n  const unlockedAchievements = userAchievements.filter(ua => ua.isUnlocked);\n  const totalAchievements = achievements.length;\n\n  const categoryGroups = achievements.reduce((acc, achievement) => {\n    const category = achievement.category || 'outros';\n    if (!acc[category]) {\n      acc[category] = [];\n    }\n    acc[category].push(achievement);\n    return acc;\n  }, {} as Record<string, Achievement[]>);\n\n  const isAchievementUnlocked = (achievementId: string) => {\n    return unlockedAchievements.some(ua => ua.achievementId === achievementId);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n\n      <div className=\"max-w-7xl mx-auto p-6 relative z-10\">\n        <motion.div \n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center space-y-2 mb-10\"\n        >\n          <h1 className=\"font-display text-2xl sm:text-3xl font-extrabold text-amber-700 dark:text-amber-500 drop-shadow-sm\" data-testid=\"text-page-title\">\n            {t.progress.title}\n          </h1>\n          <p className=\"text-sm text-muted-foreground font-bold italic uppercase tracking-wider\">\n            {t.progress.subtitle}\n          </p>\n        </motion.div>\n\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-10\">\n          {[\n            { title: t.progress.level, val: currentLevel, sub: levelInfo.title, icon: Crown, bg: \"bg-blue-100 dark:bg-blue-950\", text: \"text-blue-700 dark:text-blue-300\", iconBg: \"bg-blue-600\" },\n            { title: t.progress.experiencePoints, val: stats?.experiencePoints || 0, sub: t.progress.totalXpAccumulated, icon: Star, bg: \"bg-orange-100 dark:bg-orange-950\", text: \"text-orange-700 dark:text-orange-300\", iconBg: \"bg-orange-500\" },\n            { title: t.progress.readingStreak, val: stats?.readingStreak || 0, sub: t.progress.consecutiveDays, icon: Flame, bg: \"bg-rose-100 dark:bg-rose-950\", text: \"text-rose-700 dark:text-rose-300\", iconBg: \"bg-rose-600\" },\n            { title: t.progress.achievements, val: unlockedAchievements.length, sub: `${unlockedAchievements.length}/${totalAchievements}`, icon: Trophy, bg: \"bg-purple-100 dark:bg-purple-950\", text: \"text-purple-700 dark:text-purple-300\", iconBg: \"bg-purple-600\" }\n          ].map((item, idx) => (\n            <motion.div\n              key={item.title}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: idx * 0.1 }}\n            >\n              <Card className={`rounded-[2rem] border-none ${item.bg} shadow-sm overflow-hidden group hover:shadow-md transition-all duration-300`}>\n                <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-1 relative p-6\">\n                  <CardTitle className=\"text-[10px] font-semibold uppercase tracking-[0.2em] text-muted-foreground\">{item.title}</CardTitle>\n                  <div className={`p-1.5 rounded-lg ${item.iconBg}`}>\n                    <item.icon className=\"h-3.5 w-3.5 text-white\" />\n                  </div>\n                </CardHeader>\n                <CardContent className=\"relative p-6 pt-0\">\n                  <div className={`text-4xl font-semibold ${item.text}`}>\n                    {item.val}\n                  </div>\n                  <p className=\"text-[10px] font-semibold mt-1 text-muted-foreground uppercase tracking-wider\">\n                    {item.sub}\n                  </p>\n                  {item.title === t.progress.level && (\n                    <div className=\"mt-3\">\n                      <div className=\"flex justify-between text-[8px] mb-1 font-semibold text-muted-foreground uppercase tracking-widest\">\n                        <span>{xpProgressInfo.current} XP</span>\n                        <span>{xpProgressInfo.needed} XP</span>\n                      </div>\n                      <ProgressBar value={xpProgressInfo.percent} className=\"h-1.5 rounded-full bg-card/50\" />\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </motion.div>\n          ))}\n        </div>\n\n        <motion.div\n          initial={{ opacity: 0, scale: 0.98 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ delay: 0.4 }}\n        >\n          <Card className=\"mb-12 rounded-[2.5rem] border-none bg-gradient-to-r from-indigo-50 to-orange-50 dark:from-indigo-950 dark:to-orange-950 shadow-sm overflow-hidden relative\">\n            <CardHeader className=\"relative p-8 z-10 flex flex-row items-center gap-4\">\n              <div className=\"p-3 rounded-2xl bg-primary shadow-lg\">\n                <TrendingUp className=\"h-6 w-6 text-white\" />\n              </div>\n              <div>\n                <CardTitle className=\"text-2xl font-semibold tracking-tight text-foreground\">{t.progress.nextLevel}</CardTitle>\n                <CardDescription className=\"text-sm font-bold text-muted-foreground\">\n                  {t.progress.continueReadingToLevel.replace('{level}', ((stats?.level || 1) + 1).toString())}\n                </CardDescription>\n              </div>\n            </CardHeader>\n            <CardContent className=\"relative p-8 pt-0 z-10\">\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-end\">\n                  <div className=\"space-y-1\">\n                    <span className=\"text-muted-foreground block font-semibold uppercase tracking-[0.2em] text-[10px]\">Progresso da Jornada</span>\n                    <span className=\"text-4xl font-semibold text-indigo-700 dark:text-indigo-300\">{Math.round(xpProgressInfo.percent)}%</span>\n                  </div>\n                  <span className=\"text-[10px] text-muted-foreground font-semibold uppercase tracking-widest\">\n                    {t.progress.xpNeededForLevel.replace('{xp}', (xpProgressInfo.needed - xpProgressInfo.current).toString()).replace('{level}', (currentLevel + 1).toString())}\n                  </span>\n                </div>\n                <ProgressBar value={xpProgressInfo.percent} className=\"h-3 rounded-full glass-premium hover-premium shadow-inner\" />\n                {currentLevel < 50 && (\n                  <div className=\"mt-4 px-4 py-2 rounded-xl bg-orange-100 dark:bg-orange-950 border border-orange-200 dark:border-orange-800 w-fit\">\n                    <span className=\"text-xs font-semibold text-orange-700 dark:text-orange-300 tracking-tight uppercase\">\n                      <Zap className=\"h-3 w-3 inline mr-2 text-orange-500 fill-orange-500\" />\n                      Próximo Título: {getLevelInfo(currentLevel + 1).title}\n                    </span>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <section>\n          <div className=\"flex items-center gap-4 mb-8\">\n            <div className=\"p-2.5 rounded-xl bg-orange-600 shadow-md\">\n              <Trophy className=\"h-5 w-5 text-white\" />\n            </div>\n            <div>\n              <h2 className=\"text-2xl font-semibold text-orange-700 dark:text-orange-500 tracking-tight uppercase\">\n                {t.progress.achievements}\n              </h2>\n              <p className=\"text-xs text-muted-foreground font-bold italic\">Domine as escrituras e desbloqueie tesouros</p>\n            </div>\n          </div>\n          \n          {Object.entries(categoryGroups).map(([category, categoryAchievements], catIdx) => {\n            const CategoryIcon = getCategoryIcon(category);\n            const unlockedInCategory = categoryAchievements.filter(a => isAchievementUnlocked(a.id)).length;\n            \n            return (\n              <div key={category} className=\"mb-10\">\n                <div className=\"flex items-center gap-4 mb-6\">\n                  <div className={`p-3 rounded-2xl bg-gradient-to-br ${getCategoryGradient(category)} shadow-lg shadow-primary/20 text-white`}>\n                    <CategoryIcon className=\"h-6 w-6\" />\n                  </div>\n                  <h3 className=\"font-black text-2xl tracking-tighter uppercase text-foreground\">{category}</h3>\n                  <Badge className=\"rounded-full bg-primary/10 text-primary border-primary/20 px-4 py-1.5 font-black text-sm shadow-sm\">\n                    {unlockedInCategory} / {categoryAchievements.length}\n                  </Badge>\n                </div>\n\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4\">\n                  {categoryAchievements.map((achievement, achIdx) => {\n                    const unlocked = isAchievementUnlocked(achievement.id);\n                    const gradientClass = getCategoryGradient(category);\n                    \n                    return (\n                      <Card \n                        key={achievement.id}\n                        className={`rounded-2xl border overflow-visible group transition-all duration-300 relative ${\n                          unlocked \n                            ? 'bg-card border-primary/30 shadow-md hover-elevate' \n                            : 'bg-card border-border hover-elevate'\n                        }`}\n                      >\n                        <CardHeader className=\"p-5 pb-2\">\n                          <div className=\"flex items-start gap-4\">\n                            <div className={`p-3 rounded-xl shrink-0 transition-transform duration-300 group-hover:scale-105 ${\n                              unlocked \n                                ? `bg-gradient-to-br ${gradientClass} shadow-lg text-white` \n                                : 'bg-muted border border-border text-muted-foreground'\n                            }`}>\n                              {unlocked ? <Trophy className=\"h-6 w-6\" /> : <Lock className=\"h-6 w-6\" />}\n                            </div>\n                            <div className=\"flex-1 min-w-0 space-y-1\">\n                              <CardTitle className={`text-base font-bold tracking-tight leading-tight ${\n                                unlocked ? 'text-foreground' : 'text-foreground/70'\n                              }`}>\n                                {achievement.name}\n                              </CardTitle>\n                              <CardDescription className={`text-sm leading-relaxed ${\n                                unlocked ? 'text-muted-foreground' : 'text-muted-foreground/80'\n                              }`}>\n                                {achievement.description}\n                              </CardDescription>\n                            </div>\n                          </div>\n                        </CardHeader>\n                        <CardContent className=\"p-5 pt-2 flex items-center justify-between flex-wrap gap-2\">\n                          <Badge variant={unlocked ? \"default\" : \"secondary\"} className={unlocked \n                              ? 'bg-emerald-500/15 text-emerald-700 dark:text-emerald-400 border border-emerald-500/20 font-bold text-[10px] uppercase tracking-wider' \n                              : 'font-bold text-[10px] uppercase tracking-wider'\n                          }>\n                            {unlocked ? (\n                              <><Check className=\"h-3 w-3 mr-1\" /> CONQUISTADO</>\n                            ) : 'BLOQUEADO'}\n                          </Badge>\n                          <div className={`flex items-center gap-1.5 px-3 py-1 rounded-full border ${\n                            unlocked\n                              ? 'bg-amber-500/10 border-amber-500/20 text-amber-600 dark:text-amber-400'\n                              : 'bg-amber-500/5 border-amber-500/10 text-amber-600/60 dark:text-amber-400/60'\n                          }`}>\n                            <Star className={`h-3.5 w-3.5 ${unlocked ? 'text-amber-500 fill-amber-500' : 'text-amber-400/60'}`} />\n                            <span className=\"font-bold text-xs\">+{achievement.xpReward} XP</span>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    );\n                  })}\n                </div>\n              </div>\n            );\n          })}\n        </section>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":15655,"size_tokens":null},"server/create-tables.ts":{"content":"import { db } from \"./db\";\nimport { sql } from \"drizzle-orm\";\n\nasync function createTables() {\n  try {\n    console.log(\"Creating tables...\");\n    \n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS reading_plan_templates (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        name TEXT NOT NULL,\n        description TEXT,\n        duration INTEGER NOT NULL,\n        category TEXT,\n        difficulty TEXT,\n        schedule JSONB NOT NULL DEFAULT '[]',\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n    \n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS achievements (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        name TEXT NOT NULL,\n        description TEXT,\n        icon TEXT,\n        category TEXT,\n        xp_reward INTEGER NOT NULL DEFAULT 0,\n        requirement TEXT,\n        created_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n    \n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS user_achievements (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        user_id VARCHAR NOT NULL,\n        achievement_id VARCHAR NOT NULL,\n        progress INTEGER DEFAULT 0,\n        is_unlocked BOOLEAN DEFAULT FALSE,\n        unlocked_at TIMESTAMP,\n        created_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n    \n    console.log(\"Tables created successfully!\");\n  } catch (error) {\n    console.error(\"Error creating tables:\", error);\n  } finally {\n    process.exit(0);\n  }\n}\n\ncreateTables();\n","path":null,"size_bytes":1509,"size_tokens":null},"client/src/lib/i18n.ts":{"content":"export type Language = 'pt' | 'en' | 'nl' | 'es';\n\nexport interface Translations {\n  common: {\n    appName: string;\n    loading: string;\n    error: string;\n    save: string;\n    cancel: string;\n    delete: string;\n    edit: string;\n    search: string;\n    close: string;\n    tryAgainLater: string;\n  };\n  nav: {\n    home: string;\n    bible: string;\n    plans: string;\n    discover: string;\n    you: string;\n    progress: string;\n    prayers: string;\n    aiStudy: string;\n    podcasts: string;\n    teacherMode: string;\n    settings: string;\n    compareVersions: string;\n    studyGroups: string;\n  };\n  sections: {\n    mainMenu: string;\n    study: string;\n    teaching: string;\n    premiumStudy: string;\n    about: string;\n  };\n  bible: {\n    readChapter: string;\n    bookmarks: string;\n    settings: string;\n    selectBook: string;\n    selectChapter: string;\n    selectVersion: string;\n    markAsRead: string;\n    offlineMode: string;\n    searchVerses: string;\n    contentNotAvailableOffline: string;\n    addNote: string;\n    shareVerse: string;\n    copyText: string;\n    downloadImage: string;\n    chooseColor: string;\n    saveNote: string;\n    cancel: string;\n    yellow: string;\n    green: string;\n    blue: string;\n    purple: string;\n    pink: string;\n    orange: string;\n    chooseHighlightColor: string;\n    removeHighlight: string;\n    writeNoteHere: string;\n    update: string;\n    save: string;\n    delete: string;\n    selectBookToStart: string;\n    offlineModeTitle: string;\n    loadingSavedContent: string;\n    copied: string;\n    verseCopied: string;\n    error: string;\n    failedToCopy: string;\n    downloadStarted: string;\n    verseImageDownloaded: string;\n    failedToGenerate: string;\n    audioStarted: string;\n    listenWhileBrowsing: string;\n    errorLoadingBooks: string;\n    errorLoadingChapter: string;\n    chapterComplete: string;\n    noteRemoved: string;\n    noteRemovedSuccess: string;\n    bookmarkAdded: string;\n    bookmarkRemoved: string;\n    highlightAdded: string;\n    highlightRemoved: string;\n    highlightRemovedSuccess: string;\n  };\n  bibleBooks: Record<string, string>;\n  plans: {\n    title: string;\n    subtitle: string;\n    myPlans: string;\n    available: string;\n    createPlan: string;\n    startPlan: string;\n    starting: string;\n    days: string;\n    of_days_completed: string;\n    progress: string;\n    completeDay: string;\n    dayCompleted: string;\n    selectTemplate: string;\n    noPlanTemplate: string;\n    activePlans: string;\n    completedPlans: string;\n    currentDay: string;\n    noActivePlans: string;\n    startFirstPlan: string;\n    choosePlanDescription: string;\n    day: string;\n    todayReading: string;\n    markDayComplete: string;\n    completed: string;\n    completedOn: string;\n    dayComplete: string;\n    youEarnedXP: string;\n    errorMarkingProgress: string;\n  };\n  progress: {\n    title: string;\n    subtitle: string;\n    level: string;\n    xp: string;\n    streak: string;\n    achievements: string;\n    milestone: string;\n    reading: string;\n    streakCategory: string;\n    experiencePoints: string;\n    readingStreak: string;\n    totalXpAccumulated: string;\n    consecutiveDays: string;\n    ofTotalUnlocked: string;\n    nextLevel: string;\n    continueReadingToLevel: string;\n    progressToNextLevel: string;\n    xpNeededForLevel: string;\n    unlocked: string;\n    complete: string;\n    loadingProgress: string;\n  };\n  achievements: {\n    firstRead: string;\n    firstReadDesc: string;\n    streak7: string;\n    streak7Desc: string;\n    streak30: string;\n    streak30Desc: string;\n    streak100: string;\n    streak100Desc: string;\n  };\n  dailyVerse: {\n    verse_of_the_day: string;\n    copy: string;\n    share: string;\n    download_image: string;\n    verse_copied: string;\n    verse_copied_description: string;\n    copy_failed: string;\n    copy_failed_description: string;\n    image_downloaded: string;\n    image_downloaded_description: string;\n    download_failed: string;\n    download_failed_description: string;\n  };\n  donate: {\n    title: string;\n    subtitle: string;\n    one_time: string;\n    recurring: string;\n    monthly: string;\n    amount: string;\n    custom_amount: string;\n    destination: string;\n    app_operations: string;\n    bible_translation: string;\n    anonymous: string;\n    message: string;\n    message_placeholder: string;\n    donate_button: string;\n    processing: string;\n    success_title: string;\n    success_message: string;\n    error_title: string;\n    configure_stripe: string;\n  };\n  landing: {\n    hero_title: string;\n    hero_subtitle: string;\n    start_free: string;\n    see_features: string;\n    premium_features: string;\n    premium_subtitle: string;\n    customize_experience: string;\n    customize_subtitle: string;\n    why_bible_plus: string;\n    why_subtitle: string;\n    cta_title: string;\n    cta_subtitle: string;\n    start_free_cta: string;\n    footer_description: string;\n    footer_plans: string;\n    footer_contact: string;\n    footer_support: string;\n    newGeneration: string;\n    nav_resources: string;\n    nav_themes: string;\n    nav_testimonials: string;\n    nav_faq: string;\n    powerful_resources: string;\n    incredible_themes: string;\n    premium_content: string;\n    faq_title: string;\n    what_users_say: string;\n    transform_study: string;\n    features: {\n      aiTitle: string;\n      aiDesc: string;\n      plansTitle: string;\n      plansDesc: string;\n      podcastsTitle: string;\n      podcastsDesc: string;\n      teacherTitle: string;\n      teacherDesc: string;\n      communityTitle: string;\n      communityDesc: string;\n      themesTitle: string;\n      themesDesc: string;\n    };\n  };\n  pricing: {\n    page_title: string;\n    page_subtitle: string;\n    free_plan: string;\n    premium_plan: string;\n    lifetime_plan: string;\n    per_month: string;\n    one_time: string;\n    select_plan: string;\n    guarantee_title: string;\n    guarantee_description: string;\n    faq_title: string;\n  };\n  community: {\n    title: string;\n    what_studying: string;\n    verse_reference: string;\n    your_reflection: string;\n    post: string;\n    trending_topics: string;\n    likes: string;\n    comments: string;\n  };\n  favorites: {\n    title: string;\n    subtitle: string;\n    bookmarks: string;\n    highlights: string;\n    notes: string;\n    no_favorites: string;\n    add_first: string;\n  };\n  profile: {\n    title: string;\n    my_plans: string;\n    prayer: string;\n    achievements: string;\n    reading_streak: string;\n    spiritual_level: string;\n    edit_profile: string;\n    logout: string;\n  };\n  aiStudy: {\n    title: string;\n    subtitle: string;\n    ai_chat: string;\n    ask_question: string;\n    type_message: string;\n  };\n  teacherMode: {\n    title: string;\n    new_lesson: string;\n    lesson_title: string;\n    students: string;\n    progress: string;\n    export_report: string;\n  };\n  offline: {\n    title: string;\n    chapters_saved: string;\n    space_used: string;\n    books_downloaded: string;\n    download_chapter: string;\n    delete_chapter: string;\n    clear_all: string;\n  };\n  contact: {\n    title: string;\n    subtitle: string;\n    name: string;\n    email: string;\n    message: string;\n    send: string;\n    success: string;\n  };\n}\n\nexport const translations: Record<Language, Translations> = {\n  pt: {\n    common: {\n      appName: 'BíbliaFS',\n      loading: 'Carregando...',\n      error: 'Erro',\n      save: 'Salvar',\n      cancel: 'Cancelar',\n      delete: 'Excluir',\n      edit: 'Editar',\n      search: 'Buscar',\n      close: 'Fechar',\n      tryAgainLater: 'Tente novamente mais tarde.',\n    },\n    nav: {\n      home: 'Início',\n      bible: 'Bíblia',\n      plans: 'Planos',\n      discover: 'Descubra',\n      you: 'Você',\n      progress: 'Progresso',\n      prayers: 'Orações',\n      aiStudy: 'Estudo com IA',\n      podcasts: 'BíbliaFS Rádio',\n      teacherMode: 'Modo Professor',\n      settings: 'Configurações',\n      compareVersions: 'Comparar Versões',\n      studyGroups: 'Grupos de Estudo',\n    },\n    sections: {\n      mainMenu: 'Menu Principal',\n      study: 'Estudo',\n      teaching: 'Ensino',\n      premiumStudy: 'Estudo Premium',\n      about: 'Sobre',\n    },\n    bible: {\n      readChapter: 'Ler Capítulo',\n      bookmarks: 'Favoritos',\n      settings: 'Configurações',\n      selectBook: 'Selecione um livro',\n      selectChapter: 'Selecione um capítulo',\n      selectVersion: 'Versão da Bíblia',\n      markAsRead: 'Marcar como Lido',\n      offlineMode: 'Modo Offline',\n      searchVerses: 'Buscar versículos',\n      contentNotAvailableOffline: 'Conteúdo não disponível offline',\n      addNote: 'Adicionar Nota',\n      shareVerse: 'Compartilhar Versículo',\n      copyText: 'Copiar Texto',\n      downloadImage: 'Baixar Imagem',\n      chooseColor: 'Escolher Cor',\n      saveNote: 'Salvar Nota',\n      cancel: 'Cancelar',\n      yellow: 'Amarelo',\n      green: 'Verde',\n      blue: 'Azul',\n      purple: 'Roxo',\n      pink: 'Rosa',\n      orange: 'Laranja',\n      chooseHighlightColor: 'Escolha a cor do destaque',\n      removeHighlight: 'Remover Destaque',\n      writeNoteHere: 'Escreva sua nota aqui...',\n      update: 'Atualizar',\n      save: 'Salvar',\n      delete: 'Excluir',\n      selectBookToStart: 'Selecione um livro para começar',\n      offlineModeTitle: 'Modo Offline',\n      loadingSavedContent: 'Carregando conteúdo salvo',\n      copied: 'Copiado!',\n      verseCopied: 'Versículo copiado para a área de transferência',\n      error: 'Erro',\n      failedToCopy: 'Falha ao copiar texto',\n      downloadStarted: 'Download iniciado!',\n      verseImageDownloaded: 'Imagem do versículo baixada com sucesso',\n      failedToGenerate: 'Falha ao gerar imagem',\n      audioStarted: 'Áudio iniciado',\n      listenWhileBrowsing: 'Ouça enquanto navega!',\n      errorLoadingBooks: 'Erro ao carregar livros',\n      errorLoadingChapter: 'Erro ao carregar capítulo',\n      chapterComplete: 'Capítulo completo! 🎉',\n      noteRemoved: 'Nota removida!',\n      noteRemovedSuccess: 'Nota removida com sucesso.',\n      bookmarkAdded: 'Favorito adicionado!',\n      bookmarkRemoved: 'Favorito removido!',\n      highlightAdded: 'Highlight adicionado!',\n      highlightRemoved: 'Highlight removido!',\n      highlightRemovedSuccess: 'Highlight removido com sucesso.',\n    },\n    bibleBooks: {\n      'gn': 'Gênesis', 'ex': 'Êxodo', 'lv': 'Levítico', 'nm': 'Números', 'dt': 'Deuteronômio',\n      'js': 'Josué', 'jz': 'Juízes', 'rt': 'Rute', '1sm': '1 Samuel', '2sm': '2 Samuel',\n      '1rs': '1 Reis', '2rs': '2 Reis', '1cr': '1 Crônicas', '2cr': '2 Crônicas',\n      'ed': 'Esdras', 'ne': 'Neemias', 'et': 'Ester', 'job': 'Jó', 'sl': 'Salmos',\n      'pv': 'Provérbios', 'ec': 'Eclesiastes', 'ct': 'Cânticos', 'is': 'Isaías',\n      'jr': 'Jeremias', 'lm': 'Lamentações', 'ez': 'Ezequiel', 'dn': 'Daniel',\n      'os': 'Oseias', 'jl': 'Joel', 'am': 'Amós', 'ob': 'Obadias', 'jn': 'Jonas',\n      'mq': 'Miqueias', 'na': 'Naum', 'hc': 'Habacuque', 'sf': 'Sofonias',\n      'ag': 'Ageu', 'zc': 'Zacarias', 'ml': 'Malaquias',\n      'mt': 'Mateus', 'mc': 'Marcos', 'lc': 'Lucas', 'jo': 'João', 'at': 'Atos',\n      'rm': 'Romanos', '1co': '1 Coríntios', '2co': '2 Coríntios', 'gl': 'Gálatas',\n      'ef': 'Efésios', 'fp': 'Filipenses', 'cl': 'Colossenses',\n      '1ts': '1 Tessalonicenses', '2ts': '2 Tessalonicenses',\n      '1tm': '1 Timóteo', '2tm': '2 Timóteo', 'tt': 'Tito', 'fm': 'Filemom',\n      'hb': 'Hebreus', 'tg': 'Tiago', '1pe': '1 Pedro', '2pe': '2 Pedro',\n      '1jo': '1 João', '2jo': '2 João', '3jo': '3 João', 'jd': 'Judas', 'ap': 'Apocalipse',\n    },\n    plans: {\n      title: 'Planos de Leitura',\n      subtitle: 'Organize e acompanhe seu estudo bíblico',\n      myPlans: 'Meus Planos',\n      available: 'Planos Disponíveis',\n      createPlan: 'Criar Plano',\n      startPlan: 'Iniciar Plano',\n      starting: 'Iniciando...',\n      days: 'dias',\n      of_days_completed: 'de {total} dias completos',\n      progress: 'Progresso',\n      completeDay: 'Completar Dia',\n      dayCompleted: 'Dia Completo',\n      selectTemplate: 'Selecione um Plano',\n      noPlanTemplate: 'Nenhum plano disponível',\n      activePlans: 'Planos Ativos',\n      completedPlans: 'Planos Concluídos',\n      currentDay: 'Dia Atual',\n      noActivePlans: 'Nenhum plano ativo',\n      startFirstPlan: 'Iniciar Primeiro Plano',\n      choosePlanDescription: 'Escolha um plano predefinido para começar sua jornada',\n      day: 'Dia',\n      todayReading: 'Leitura de hoje:',\n      markDayComplete: 'Marcar Dia Como Completo',\n      completed: 'Concluído',\n      completedOn: 'Completado em',\n      dayComplete: 'Dia completo! 🎉',\n      youEarnedXP: 'Você ganhou {xp} XP pela sua leitura.',\n      errorMarkingProgress: 'Erro ao marcar progresso',\n    },\n    progress: {\n      title: 'Seu Progresso',\n      subtitle: 'Acompanhe seu crescimento espiritual',\n      level: 'Nível',\n      xp: 'XP',\n      streak: 'Sequência',\n      achievements: 'Conquistas',\n      milestone: 'Marco',\n      reading: 'Leitura',\n      streakCategory: 'Sequência',\n      experiencePoints: 'Pontos de Experiência',\n      readingStreak: 'Sequência de Leitura',\n      totalXpAccumulated: 'XP total acumulado',\n      consecutiveDays: 'dias consecutivos',\n      ofTotalUnlocked: 'de {total} desbloqueadas',\n      nextLevel: 'Próximo Nível',\n      continueReadingToLevel: 'Continue lendo para alcançar o nível {level}',\n      progressToNextLevel: 'Progresso para o próximo nível',\n      xpNeededForLevel: 'Faltam {xp} XP para o nível {level}',\n      unlocked: 'Desbloqueada',\n      complete: 'completo',\n      loadingProgress: 'Carregando progresso...',\n    },\n    achievements: {\n      firstRead: 'Primeira Leitura',\n      firstReadDesc: 'Leia seu primeiro capítulo',\n      streak7: 'Sequência de 7 Dias',\n      streak7Desc: 'Leia por 7 dias seguidos',\n      streak30: 'Sequência de 30 Dias',\n      streak30Desc: 'Leia por 30 dias seguidos',\n      streak100: 'Sequência de 100 Dias',\n      streak100Desc: 'Leia por 100 dias seguidos',\n    },\n    dailyVerse: {\n      verse_of_the_day: 'Versículo do Dia',\n      copy: 'Copiar',\n      share: 'Compartilhar',\n      download_image: 'Baixar Imagem',\n      verse_copied: 'Versículo copiado!',\n      verse_copied_description: 'Texto copiado para a área de transferência',\n      copy_failed: 'Erro ao copiar',\n      copy_failed_description: 'Não foi possível copiar o texto',\n      image_downloaded: 'Imagem baixada!',\n      image_downloaded_description: 'Versículo salvo como imagem',\n      download_failed: 'Erro ao baixar',\n      download_failed_description: 'Não foi possível salvar a imagem',\n    },\n    donate: {\n      title: 'Apoie o BíbliaFS',\n      subtitle: 'Sua doação ajuda a levar a Palavra a mais pessoas, em mais idiomas. Cada contribuição sustenta o desenvolvimento contínuo do app, permitindo melhorias constantes, novos recursos e maior acessibilidade. Você não está apenas doando — está sendo parte da história de quem busca a Palavra, onde quer que esteja.',\n      one_time: 'Doação Única',\n      recurring: 'Doação Recorrente',\n      monthly: 'Mensal',\n      amount: 'Valor',\n      custom_amount: 'Valor personalizado',\n      destination: 'Destino da doação',\n      app_operations: 'Operações do aplicativo',\n      bible_translation: 'Tradução bíblica',\n      anonymous: 'Doar anonimamente',\n      message: 'Mensagem (opcional)',\n      message_placeholder: 'Deixe uma mensagem de apoio...',\n      donate_button: 'Doar Agora',\n      processing: 'Processando...',\n      success_title: 'Doação realizada com sucesso!',\n      success_message: 'Muito obrigado pelo seu apoio. Que Deus abençoe você!',\n      error_title: 'Erro ao processar doação',\n      configure_stripe: 'Sistema de doações não configurado. Entre em contato com o suporte para habilitar doações.',\n    },\n    landing: {\n      hero_title: 'Transforme Seu Estudo Bíblico',\n      hero_subtitle: 'Inteligência Artificial, Podcasts, Comunidade e Ensino em uma única plataforma premium. O futuro do estudo bíblico chegou.',\n      start_free: 'Começar Grátis',\n      see_features: 'Ver Recursos',\n      premium_features: 'Recursos Premium',\n      premium_subtitle: 'Tudo que você precisa para um estudo bíblico profundo e transformador',\n      customize_experience: 'Personalize Sua Experiência',\n      customize_subtitle: '4 temas prontos ou crie o seu próprio com cores personalizadas',\n      why_bible_plus: 'Por Que BíbliaFS?',\n      why_subtitle: 'Muito mais do que um simples aplicativo bíblico',\n      cta_title: 'Comece Hoje Sua Jornada',\n      cta_subtitle: 'Junte-se a milhares de pessoas transformando seu estudo bíblico',\n      start_free_cta: 'Começar Gratuitamente',\n      footer_description: 'Estudo Premium com IA',\n      footer_plans: 'Planos',\n      footer_contact: 'Contato',\n      footer_support: 'Suporte',\n      newGeneration: 'v2.0 - Nova Geração',\n      nav_resources: 'Recursos',\n      nav_themes: 'Temas',\n      nav_testimonials: 'Testemunhos',\n      nav_faq: 'Perguntas',\n      powerful_resources: 'Recursos Poderosos Para Seu Estudo',\n      incredible_themes: 'Temas Incríveis',\n      premium_content: 'Recursos Premium',\n      faq_title: 'Perguntas Frequentes',\n      what_users_say: 'O Que Dizem Nossos Usuários',\n      transform_study: 'Transforme seu estudo com BíbliaFS',\n      features: {\n        aiTitle: 'IA Teológica',\n        aiDesc: 'Assistente inteligente responde perguntas bíblicas, compara doutrinas e oferece contexto histórico profundo.',\n        plansTitle: 'Planos Personalizados',\n        plansDesc: 'Crie planos de leitura integrados com podcasts e acompanhe seu progresso diário.',\n        podcastsTitle: 'BíbliaFS Rádio',\n        podcastsDesc: 'Ouça, baixe e inclua episódios de rádio nos seus planos de estudo bíblico.',\n        teacherTitle: 'Modo Professor',\n        teacherDesc: 'Crie aulas, avalie alunos e gerencie turmas com ferramentas profissionais.',\n        communityTitle: 'Comunidade Ativa',\n        communityDesc: 'Compartilhe insights, conecte-se com outros estudantes e cresça juntos.',\n        themesTitle: 'Temas Personalizáveis',\n        themesDesc: '5 temas premium ou crie o seu próprio com seletor de cores RGB personalizado.',\n      },\n    },\n    pricing: {\n      page_title: 'Planos e Preços',\n      page_subtitle: 'Escolha o plano perfeito para sua jornada espiritual',\n      free_plan: 'Gratuito',\n      premium_plan: 'Premium',\n      lifetime_plan: 'Vitalício',\n      per_month: '/mês',\n      one_time: 'pagamento único',\n      select_plan: 'Escolher Plano',\n      guarantee_title: 'Garantia de 30 Dias',\n      guarantee_description: '100% de reembolso se não ficar satisfeito',\n      faq_title: 'Perguntas Frequentes',\n    },\n    community: {\n      title: 'Comunidade',\n      what_studying: 'O que você está estudando?',\n      verse_reference: 'Referência do Versículo',\n      your_reflection: 'Sua Reflexão',\n      post: 'Publicar',\n      trending_topics: 'Temas em Alta',\n      likes: 'curtidas',\n      comments: 'comentários',\n    },\n    favorites: {\n      title: 'Meus Favoritos',\n      subtitle: 'Versículos salvos, destaques e notas',\n      bookmarks: 'Favoritos',\n      highlights: 'Destaques',\n      notes: 'Notas',\n      no_favorites: 'Nenhum favorito ainda',\n      add_first: 'Comece adicionando seus versículos favoritos',\n    },\n    profile: {\n      title: 'Perfil',\n      my_plans: 'Meus Planos',\n      prayer: 'Oração',\n      achievements: 'Conquistas',\n      reading_streak: 'Sequência de Leitura',\n      spiritual_level: 'Nível Espiritual',\n      edit_profile: 'Editar Perfil',\n      logout: 'Sair',\n    },\n    aiStudy: {\n      title: 'Estudar com IA',\n      subtitle: 'Assistente teológico inteligente',\n      ai_chat: 'Conversa com IA',\n      ask_question: 'Faça uma pergunta teológica',\n      type_message: 'Digite sua mensagem...',\n    },\n    teacherMode: {\n      title: 'Modo Professor',\n      new_lesson: 'Nova Aula',\n      lesson_title: 'Título da Aula',\n      students: 'Alunos',\n      progress: 'Progresso',\n      export_report: 'Exportar Relatório',\n    },\n    offline: {\n      title: 'Modo Offline',\n      chapters_saved: 'Capítulos Salvos',\n      space_used: 'Espaço Usado',\n      books_downloaded: 'Livros Baixados',\n      download_chapter: 'Baixar Capítulo',\n      delete_chapter: 'Excluir',\n      clear_all: 'Limpar Tudo',\n    },\n    contact: {\n      title: 'Fale Conosco',\n      subtitle: 'Envie sua Mensagem',\n      name: 'Nome',\n      email: 'E-mail',\n      message: 'Mensagem',\n      send: 'Enviar',\n      success: 'Mensagem enviada com sucesso!',\n    },\n  },\n  en: {\n    common: {\n      appName: 'Bible+',\n      loading: 'Loading...',\n      error: 'Error',\n      save: 'Save',\n      cancel: 'Cancel',\n      delete: 'Delete',\n      edit: 'Edit',\n      search: 'Search',\n      close: 'Close',\n      tryAgainLater: 'Try again later.',\n    },\n    nav: {\n      home: 'Home',\n      bible: 'Bible',\n      plans: 'Plans',\n      discover: 'Discover',\n      you: 'You',\n      progress: 'Progress',\n      prayers: 'Prayers',\n      aiStudy: 'AI Study',\n      podcasts: 'Podcasts',\n      teacherMode: 'Teacher Mode',\n      settings: 'Settings',\n      compareVersions: 'Compare Versions',\n      studyGroups: 'Study Groups',\n    },\n    sections: {\n      mainMenu: 'Main Menu',\n      study: 'Study',\n      teaching: 'Teaching',\n      premiumStudy: 'Premium Study',\n      about: 'About',\n    },\n    bible: {\n      readChapter: 'Read Chapter',\n      bookmarks: 'Bookmarks',\n      settings: 'Settings',\n      selectBook: 'Select a book',\n      selectChapter: 'Select a chapter',\n      selectVersion: 'Bible Version',\n      markAsRead: 'Mark as Read',\n      offlineMode: 'Offline Mode',\n      searchVerses: 'Search verses',\n      contentNotAvailableOffline: 'Content not available offline',\n      addNote: 'Add Note',\n      shareVerse: 'Share Verse',\n      copyText: 'Copy Text',\n      downloadImage: 'Download Image',\n      chooseColor: 'Choose Color',\n      saveNote: 'Save Note',\n      cancel: 'Cancel',\n      yellow: 'Yellow',\n      green: 'Green',\n      blue: 'Blue',\n      purple: 'Purple',\n      pink: 'Pink',\n      orange: 'Orange',\n      chooseHighlightColor: 'Choose highlight color',\n      removeHighlight: 'Remove Highlight',\n      writeNoteHere: 'Write your note here...',\n      update: 'Update',\n      save: 'Save',\n      delete: 'Delete',\n      selectBookToStart: 'Select a book to start',\n      offlineModeTitle: 'Offline Mode',\n      loadingSavedContent: 'Loading saved content',\n      copied: 'Copied!',\n      verseCopied: 'Verse copied to clipboard',\n      error: 'Error',\n      failedToCopy: 'Failed to copy text',\n      downloadStarted: 'Download started!',\n      verseImageDownloaded: 'Verse image downloaded successfully',\n      failedToGenerate: 'Failed to generate image',\n      audioStarted: 'Audio started',\n      listenWhileBrowsing: 'Listen while browsing!',\n      errorLoadingBooks: 'Error loading books',\n      errorLoadingChapter: 'Error loading chapter',\n      chapterComplete: 'Chapter complete! 🎉',\n      noteRemoved: 'Note removed!',\n      noteRemovedSuccess: 'Note successfully removed.',\n      bookmarkAdded: 'Bookmark added!',\n      bookmarkRemoved: 'Bookmark removed!',\n      highlightAdded: 'Highlight added!',\n      highlightRemoved: 'Highlight removed!',\n      highlightRemovedSuccess: 'Highlight successfully removed.',\n    },\n    bibleBooks: {\n      'gn': 'Genesis', 'ex': 'Exodus', 'lv': 'Leviticus', 'nm': 'Numbers', 'dt': 'Deuteronomy',\n      'js': 'Joshua', 'jz': 'Judges', 'rt': 'Ruth', '1sm': '1 Samuel', '2sm': '2 Samuel',\n      '1rs': '1 Kings', '2rs': '2 Kings', '1cr': '1 Chronicles', '2cr': '2 Chronicles',\n      'ed': 'Ezra', 'ne': 'Nehemiah', 'et': 'Esther', 'job': 'Job', 'sl': 'Psalms',\n      'pv': 'Proverbs', 'ec': 'Ecclesiastes', 'ct': 'Song of Songs', 'is': 'Isaiah',\n      'jr': 'Jeremiah', 'lm': 'Lamentations', 'ez': 'Ezekiel', 'dn': 'Daniel',\n      'os': 'Hosea', 'jl': 'Joel', 'am': 'Amos', 'ob': 'Obadiah', 'jn': 'Jonah',\n      'mq': 'Micah', 'na': 'Nahum', 'hc': 'Habakkuk', 'sf': 'Zephaniah',\n      'ag': 'Haggai', 'zc': 'Zechariah', 'ml': 'Malachi',\n      'mt': 'Matthew', 'mc': 'Mark', 'lc': 'Luke', 'jo': 'John', 'at': 'Acts',\n      'rm': 'Romans', '1co': '1 Corinthians', '2co': '2 Corinthians', 'gl': 'Galatians',\n      'ef': 'Ephesians', 'fp': 'Philippians', 'cl': 'Colossians',\n      '1ts': '1 Thessalonians', '2ts': '2 Thessalonians',\n      '1tm': '1 Timothy', '2tm': '2 Timothy', 'tt': 'Titus', 'fm': 'Philemon',\n      'hb': 'Hebrews', 'tg': 'James', '1pe': '1 Peter', '2pe': '2 Peter',\n      '1jo': '1 John', '2jo': '2 John', '3jo': '3 John', 'jd': 'Jude', 'ap': 'Revelation',\n    },\n    plans: {\n      title: 'Reading Plans',\n      subtitle: 'Organize and track your Bible study',\n      myPlans: 'My Plans',\n      available: 'Available Plans',\n      createPlan: 'Create Plan',\n      startPlan: 'Start Plan',\n      starting: 'Starting...',\n      days: 'days',\n      of_days_completed: 'of {total} days completed',\n      progress: 'Progress',\n      completeDay: 'Complete Day',\n      dayCompleted: 'Day Completed',\n      selectTemplate: 'Select a Plan',\n      noPlanTemplate: 'No plan available',\n      activePlans: 'Active Plans',\n      completedPlans: 'Completed Plans',\n      currentDay: 'Current Day',\n      noActivePlans: 'No active plans',\n      startFirstPlan: 'Start First Plan',\n      choosePlanDescription: 'Choose a preset plan to begin your journey',\n      day: 'Day',\n      todayReading: 'Today\\'s reading:',\n      markDayComplete: 'Mark Day as Complete',\n      completed: 'Completed',\n      completedOn: 'Completed on',\n      dayComplete: 'Day complete! 🎉',\n      youEarnedXP: 'You earned {xp} XP for your reading.',\n      errorMarkingProgress: 'Error marking progress',\n    },\n    progress: {\n      title: 'Your Progress',\n      subtitle: 'Track your spiritual growth',\n      level: 'Level',\n      xp: 'XP',\n      streak: 'Streak',\n      achievements: 'Achievements',\n      milestone: 'Milestone',\n      reading: 'Reading',\n      streakCategory: 'Streak',\n      experiencePoints: 'Experience Points',\n      readingStreak: 'Reading Streak',\n      totalXpAccumulated: 'Total XP accumulated',\n      consecutiveDays: 'consecutive days',\n      ofTotalUnlocked: 'of {total} unlocked',\n      nextLevel: 'Next Level',\n      continueReadingToLevel: 'Keep reading to reach level {level}',\n      progressToNextLevel: 'Progress to next level',\n      xpNeededForLevel: '{xp} XP needed for level {level}',\n      unlocked: 'Unlocked',\n      complete: 'complete',\n      loadingProgress: 'Loading progress...',\n    },\n    achievements: {\n      firstRead: 'First Read',\n      firstReadDesc: 'Read your first chapter',\n      streak7: '7-Day Streak',\n      streak7Desc: 'Read for 7 consecutive days',\n      streak30: '30-Day Streak',\n      streak30Desc: 'Read for 30 consecutive days',\n      streak100: '100-Day Streak',\n      streak100Desc: 'Read for 100 consecutive days',\n    },\n    dailyVerse: {\n      verse_of_the_day: 'Verse of the Day',\n      copy: 'Copy',\n      share: 'Share',\n      download_image: 'Download Image',\n      verse_copied: 'Verse copied!',\n      verse_copied_description: 'Text copied to clipboard',\n      copy_failed: 'Copy failed',\n      copy_failed_description: 'Could not copy text',\n      image_downloaded: 'Image downloaded!',\n      image_downloaded_description: 'Verse saved as image',\n      download_failed: 'Download failed',\n      download_failed_description: 'Could not save image',\n    },\n    donate: {\n      title: 'Support Bible+',\n      subtitle: 'Your donation keeps Bible+ 100% free and helps bring the Word to more people, in more languages. But that\\'s not all: each contribution sustains the developers who work tirelessly — day and night — to improve the experience, fix bugs, add features, and make the app lighter, faster, and accessible to everyone. You\\'re not just donating. You\\'re being part of the story of those seeking the Word, wherever they are.',\n      one_time: 'One-Time',\n      recurring: 'Recurring',\n      monthly: 'Monthly',\n      amount: 'Amount',\n      custom_amount: 'Custom amount',\n      destination: 'Donation destination',\n      app_operations: 'App operations',\n      bible_translation: 'Bible translation',\n      anonymous: 'Donate anonymously',\n      message: 'Message (optional)',\n      message_placeholder: 'Leave a support message...',\n      donate_button: 'Donate',\n      processing: 'Processing...',\n      success_title: 'Donation successful!',\n      success_message: 'Thank you so much for your support!',\n      error_title: 'Error processing donation',\n      configure_stripe: 'Donation system not configured. Configure Stripe keys to enable donations.',\n    },\n    landing: {\n      hero_title: 'Transform Your Bible Study',\n      hero_subtitle: 'Artificial Intelligence, Podcasts, Community, and Teaching in one premium platform. The future of Bible study is here.',\n      start_free: 'Start Free',\n      see_features: 'See Features',\n      premium_features: 'Premium Features',\n      premium_subtitle: 'Everything you need for deep and transformative Bible study',\n      customize_experience: 'Customize Your Experience',\n      customize_subtitle: '4 ready-made themes or create your own with custom colors',\n      why_bible_plus: 'Why Bible+?',\n      why_subtitle: 'Much more than just a Bible app',\n      cta_title: 'Start Your Journey Today',\n      cta_subtitle: 'Join thousands of people transforming their Bible study',\n      start_free_cta: 'Start Free',\n      footer_description: 'Premium AI-Powered Study',\n      footer_plans: 'Plans',\n      footer_contact: 'Contact',\n      footer_support: 'Support',\n      newGeneration: 'v2.0 - New Generation',\n      nav_resources: 'Resources',\n      nav_themes: 'Themes',\n      nav_testimonials: 'Testimonials',\n      nav_faq: 'FAQ',\n      powerful_resources: 'Powerful Resources For Your Study',\n      incredible_themes: 'Incredible Themes',\n      premium_content: 'Premium Resources',\n      faq_title: 'Frequently Asked Questions',\n      what_users_say: 'What Our Users Say',\n      transform_study: 'Transform your study with Bible+',\n      features: {\n        aiTitle: 'Theological AI',\n        aiDesc: 'Intelligent assistant answers biblical questions, compares doctrines, and offers deep historical context.',\n        plansTitle: 'Custom Plans',\n        plansDesc: 'Create reading plans integrated with podcasts and track your daily progress.',\n        podcastsTitle: 'Integrated Podcasts',\n        podcastsDesc: 'Listen, download, and include podcast episodes in your Bible study plans.',\n        teacherTitle: 'Teacher Mode',\n        teacherDesc: 'Create lessons, assess students, and manage classes with professional tools.',\n        communityTitle: 'Active Community',\n        communityDesc: 'Share insights, connect with other students, and grow together.',\n        themesTitle: 'Customizable Themes',\n        themesDesc: '5 premium themes or create your own with custom RGB color picker.',\n      },\n    },\n    pricing: {\n      page_title: 'Plans & Pricing',\n      page_subtitle: 'Choose the perfect plan for your spiritual journey',\n      free_plan: 'Free',\n      premium_plan: 'Premium',\n      lifetime_plan: 'Lifetime',\n      per_month: '/month',\n      one_time: 'one-time payment',\n      select_plan: 'Select Plan',\n      guarantee_title: '30-Day Guarantee',\n      guarantee_description: '100% refund if not satisfied',\n      faq_title: 'Frequently Asked Questions',\n    },\n    community: {\n      title: 'Community',\n      what_studying: 'What are you studying?',\n      verse_reference: 'Verse Reference',\n      your_reflection: 'Your Reflection',\n      post: 'Post',\n      trending_topics: 'Trending Topics',\n      likes: 'likes',\n      comments: 'comments',\n    },\n    favorites: {\n      title: 'My Favorites',\n      subtitle: 'Saved verses, highlights, and notes',\n      bookmarks: 'Bookmarks',\n      highlights: 'Highlights',\n      notes: 'Notes',\n      no_favorites: 'No favorites yet',\n      add_first: 'Start adding your favorite verses',\n    },\n    profile: {\n      title: 'Profile',\n      my_plans: 'My Plans',\n      prayer: 'Prayer',\n      achievements: 'Achievements',\n      reading_streak: 'Reading Streak',\n      spiritual_level: 'Spiritual Level',\n      edit_profile: 'Edit Profile',\n      logout: 'Logout',\n    },\n    aiStudy: {\n      title: 'Study with AI',\n      subtitle: 'Intelligent theological assistant',\n      ai_chat: 'AI Chat',\n      ask_question: 'Ask a theological question',\n      type_message: 'Type your message...',\n    },\n    teacherMode: {\n      title: 'Teacher Mode',\n      new_lesson: 'New Lesson',\n      lesson_title: 'Lesson Title',\n      students: 'Students',\n      progress: 'Progress',\n      export_report: 'Export Report',\n    },\n    offline: {\n      title: 'Offline Mode',\n      chapters_saved: 'Saved Chapters',\n      space_used: 'Space Used',\n      books_downloaded: 'Downloaded Books',\n      download_chapter: 'Download Chapter',\n      delete_chapter: 'Delete',\n      clear_all: 'Clear All',\n    },\n    contact: {\n      title: 'Contact Us',\n      subtitle: 'Send Your Message',\n      name: 'Name',\n      email: 'Email',\n      message: 'Message',\n      send: 'Send',\n      success: 'Message sent successfully!',\n    },\n  },\n  nl: {\n    common: {\n      appName: 'Bijbel+',\n      loading: 'Laden...',\n      error: 'Fout',\n      save: 'Opslaan',\n      cancel: 'Annuleren',\n      delete: 'Verwijderen',\n      edit: 'Bewerken',\n      search: 'Zoeken',\n      close: 'Sluiten',\n      tryAgainLater: 'Probeer het later opnieuw.',\n    },\n    nav: {\n      home: 'Thuis',\n      bible: 'Bijbel',\n      plans: 'Plannen',\n      discover: 'Ontdekken',\n      you: 'Jij',\n      progress: 'Voortgang',\n      prayers: 'Gebeden',\n      aiStudy: 'AI Studie',\n      podcasts: 'Podcasts',\n      teacherMode: 'Leermodus',\n      settings: 'Instellingen',\n      compareVersions: 'Versies Vergelijken',\n      studyGroups: 'Studiegroepen',\n    },\n    sections: {\n      mainMenu: 'Hoofdmenu',\n      study: 'Studie',\n      teaching: 'Onderwijs',\n      premiumStudy: 'Premium Studie',\n      about: 'Over',\n    },\n    bible: {\n      readChapter: 'Hoofdstuk Lezen',\n      bookmarks: 'Bladwijzers',\n      settings: 'Instellingen',\n      selectBook: 'Selecteer een boek',\n      selectChapter: 'Selecteer een hoofdstuk',\n      selectVersion: 'Bijbelversie',\n      markAsRead: 'Markeren als Gelezen',\n      offlineMode: 'Offline Modus',\n      searchVerses: 'Verzen zoeken',\n      contentNotAvailableOffline: 'Inhoud niet offline beschikbaar',\n      addNote: 'Notitie Toevoegen',\n      shareVerse: 'Vers Delen',\n      copyText: 'Tekst Kopiëren',\n      downloadImage: 'Afbeelding Downloaden',\n      chooseColor: 'Kleur Kiezen',\n      saveNote: 'Notitie Opslaan',\n      cancel: 'Annuleren',\n      yellow: 'Geel',\n      green: 'Groen',\n      blue: 'Blauw',\n      purple: 'Paars',\n      pink: 'Roze',\n      orange: 'Oranje',\n      chooseHighlightColor: 'Kies markeerkleur',\n      removeHighlight: 'Markering Verwijderen',\n      writeNoteHere: 'Schrijf hier je notitie...',\n      update: 'Bijwerken',\n      save: 'Opslaan',\n      delete: 'Verwijderen',\n      selectBookToStart: 'Selecteer een boek om te beginnen',\n      offlineModeTitle: 'Offline Modus',\n      loadingSavedContent: 'Opgeslagen inhoud laden',\n      copied: 'Gekopieerd!',\n      verseCopied: 'Vers gekopieerd naar klembord',\n      error: 'Fout',\n      failedToCopy: 'Tekst kopiëren mislukt',\n      downloadStarted: 'Download gestart!',\n      verseImageDownloaded: 'Versafbeelding succesvol gedownload',\n      failedToGenerate: 'Afbeelding genereren mislukt',\n      audioStarted: 'Audio gestart',\n      listenWhileBrowsing: 'Luister terwijl je bladert!',\n      errorLoadingBooks: 'Fout bij laden van boeken',\n      errorLoadingChapter: 'Fout bij laden van hoofdstuk',\n      chapterComplete: 'Hoofdstuk voltooid! 🎉',\n      noteRemoved: 'Notitie verwijderd!',\n      noteRemovedSuccess: 'Notitie succesvol verwijderd.',\n      bookmarkAdded: 'Favoriet toegevoegd!',\n      bookmarkRemoved: 'Favoriet verwijderd!',\n      highlightAdded: 'Markering toegevoegd!',\n      highlightRemoved: 'Markering verwijderd!',\n      highlightRemovedSuccess: 'Markering succesvol verwijderd.',\n    },\n    bibleBooks: {\n      'gn': 'Genesis', 'ex': 'Exodus', 'lv': 'Leviticus', 'nm': 'Numeri', 'dt': 'Deuteronomium',\n      'js': 'Jozua', 'jz': 'Rechters', 'rt': 'Ruth', '1sm': '1 Samuël', '2sm': '2 Samuël',\n      '1rs': '1 Koningen', '2rs': '2 Koningen', '1cr': '1 Kronieken', '2cr': '2 Kronieken',\n      'ed': 'Ezra', 'ne': 'Nehemia', 'et': 'Esther', 'job': 'Job', 'sl': 'Psalmen',\n      'pv': 'Spreuken', 'ec': 'Prediker', 'ct': 'Hooglied', 'is': 'Jesaja',\n      'jr': 'Jeremia', 'lm': 'Klaagliederen', 'ez': 'Ezechiël', 'dn': 'Daniël',\n      'os': 'Hosea', 'jl': 'Joël', 'am': 'Amos', 'ob': 'Obadja', 'jn': 'Jona',\n      'mq': 'Micha', 'na': 'Nahum', 'hc': 'Habakuk', 'sf': 'Zefanja',\n      'ag': 'Haggaï', 'zc': 'Zacharia', 'ml': 'Maleachi',\n      'mt': 'Matteüs', 'mc': 'Marcus', 'lc': 'Lucas', 'jo': 'Johannes', 'at': 'Handelingen',\n      'rm': 'Romeinen', '1co': '1 Korintiërs', '2co': '2 Korintiërs', 'gl': 'Galaten',\n      'ef': 'Efeziërs', 'fp': 'Filippenzen', 'cl': 'Kolossenzen',\n      '1ts': '1 Tessalonicenzen', '2ts': '2 Tessalonicenzen',\n      '1tm': '1 Timoteüs', '2tm': '2 Timoteüs', 'tt': 'Titus', 'fm': 'Filemon',\n      'hb': 'Hebreeën', 'tg': 'Jakobus', '1pe': '1 Petrus', '2pe': '2 Petrus',\n      '1jo': '1 Johannes', '2jo': '2 Johannes', '3jo': '3 Johannes', 'jd': 'Judas', 'ap': 'Openbaring',\n    },\n    plans: {\n      title: 'Leesplannen',\n      subtitle: 'Organiseer en volg je Bijbelstudie',\n      myPlans: 'Mijn Plannen',\n      available: 'Beschikbare Plannen',\n      createPlan: 'Plan Maken',\n      startPlan: 'Plan Starten',\n      starting: 'Starten...',\n      days: 'dagen',\n      of_days_completed: 'van {total} dagen voltooid',\n      progress: 'Voortgang',\n      completeDay: 'Dag Voltooien',\n      dayCompleted: 'Dag Voltooid',\n      selectTemplate: 'Selecteer een Plan',\n      noPlanTemplate: 'Geen plan beschikbaar',\n      activePlans: 'Actieve Plannen',\n      completedPlans: 'Voltooide Plannen',\n      currentDay: 'Huidige Dag',\n      noActivePlans: 'Geen actieve plannen',\n      startFirstPlan: 'Start Eerste Plan',\n      choosePlanDescription: 'Kies een vooraf ingesteld plan om je reis te beginnen',\n      day: 'Dag',\n      todayReading: 'Lezing van vandaag:',\n      markDayComplete: 'Dag Markeren als Voltooid',\n      completed: 'Voltooid',\n      completedOn: 'Voltooid op',\n      dayComplete: 'Dag voltooid! 🎉',\n      youEarnedXP: 'Je hebt {xp} XP verdiend met lezen.',\n      errorMarkingProgress: 'Fout bij markeren voortgang',\n    },\n    progress: {\n      title: 'Jouw Voortgang',\n      subtitle: 'Volg je spirituele groei',\n      level: 'Niveau',\n      xp: 'XP',\n      streak: 'Reeks',\n      achievements: 'Prestaties',\n      milestone: 'Mijlpaal',\n      reading: 'Lezen',\n      streakCategory: 'Reeks',\n      experiencePoints: 'Ervaringspunten',\n      readingStreak: 'Leesreeks',\n      totalXpAccumulated: 'Totaal verzamelde XP',\n      consecutiveDays: 'opeenvolgende dagen',\n      ofTotalUnlocked: 'van {total} ontgrendeld',\n      nextLevel: 'Volgend Niveau',\n      continueReadingToLevel: 'Blijf lezen om niveau {level} te bereiken',\n      progressToNextLevel: 'Voortgang naar volgend niveau',\n      xpNeededForLevel: '{xp} XP nodig voor niveau {level}',\n      unlocked: 'Ontgrendeld',\n      complete: 'compleet',\n      loadingProgress: 'Voortgang laden...',\n    },\n    achievements: {\n      firstRead: 'Eerste Lezing',\n      firstReadDesc: 'Lees je eerste hoofdstuk',\n      streak7: '7-Daagse Reeks',\n      streak7Desc: 'Lees 7 opeenvolgende dagen',\n      streak30: '30-Daagse Reeks',\n      streak30Desc: 'Lees 30 opeenvolgende dagen',\n      streak100: '100-Daagse Reeks',\n      streak100Desc: 'Lees 100 opeenvolgende dagen',\n    },\n    dailyVerse: {\n      verse_of_the_day: 'Vers van de Dag',\n      copy: 'Kopiëren',\n      share: 'Delen',\n      download_image: 'Afbeelding Downloaden',\n      verse_copied: 'Vers gekopieerd!',\n      verse_copied_description: 'Tekst gekopieerd naar klembord',\n      copy_failed: 'Kopiëren mislukt',\n      copy_failed_description: 'Kon tekst niet kopiëren',\n      image_downloaded: 'Afbeelding gedownload!',\n      image_downloaded_description: 'Vers opgeslagen als afbeelding',\n      download_failed: 'Download mislukt',\n      download_failed_description: 'Kon afbeelding niet opslaan',\n    },\n    donate: {\n      title: 'Ondersteun Bijbel+',\n      subtitle: 'Jouw donatie houdt Bijbel+ 100% gratis en helpt het Woord naar meer mensen te brengen, in meer talen. Maar dat is niet alles: elke bijdrage ondersteunt de ontwikkelaars die onvermoeibaar werken — dag en nacht — om de ervaring te verbeteren, bugs op te lossen, functies toe te voegen en de app lichter, sneller en toegankelijker te maken voor iedereen. Je doneert niet alleen. Je maakt deel uit van het verhaal van degenen die het Woord zoeken, waar ze ook zijn.',\n      one_time: 'Eenmalig',\n      recurring: 'Terugkerend',\n      monthly: 'Maandelijks',\n      amount: 'Bedrag',\n      custom_amount: 'Aangepast bedrag',\n      destination: 'Donatiebestemming',\n      app_operations: 'App-activiteiten',\n      bible_translation: 'Bijbelvertaling',\n      anonymous: 'Anoniem doneren',\n      message: 'Bericht (optioneel)',\n      message_placeholder: 'Laat een bericht achter...',\n      donate_button: 'Doneren',\n      processing: 'Verwerken...',\n      success_title: 'Donatie geslaagd!',\n      success_message: 'Hartelijk dank voor je steun!',\n      error_title: 'Fout bij verwerken donatie',\n      configure_stripe: 'Donatiesysteem niet geconfigureerd. Configureer Stripe-sleutels om donaties in te schakelen.',\n    },\n    landing: {\n      hero_title: 'Transformeer Je Bijbelstudie',\n      hero_subtitle: 'Kunstmatige Intelligentie, Podcasts, Gemeenschap en Onderwijs in één premium platform. De toekomst van Bijbelstudie is hier.',\n      start_free: 'Gratis Beginnen',\n      see_features: 'Bekijk Functies',\n      premium_features: 'Premium Functies',\n      premium_subtitle: 'Alles wat je nodig hebt voor een diepe en transformerende Bijbelstudie',\n      customize_experience: 'Personaliseer Je Ervaring',\n      customize_subtitle: '4 kant-en-klare thema\\'s of creëer je eigen met aangepaste kleuren',\n      why_bible_plus: 'Waarom Bijbel+?',\n      why_subtitle: 'Veel meer dan alleen een Bijbel-app',\n      cta_title: 'Begin Vandaag Je Reis',\n      cta_subtitle: 'Sluit je aan bij duizenden mensen die hun Bijbelstudie transformeren',\n      start_free_cta: 'Gratis Starten',\n      footer_description: 'Premium Studie met AI',\n      footer_plans: 'Plannen',\n      footer_contact: 'Contact',\n      footer_support: 'Ondersteuning',\n      newGeneration: 'v2.0 - Nieuwe Generatie',\n      nav_resources: 'Bronnen',\n      nav_themes: 'Thema\\'s',\n      nav_testimonials: 'Getuigenissen',\n      nav_faq: 'Veelgestelde Vragen',\n      powerful_resources: 'Krachtige Hulpmiddelen Voor Je Studie',\n      incredible_themes: 'Ongelooflijke Thema\\'s',\n      premium_content: 'Premium Inhoud',\n      faq_title: 'Veelgestelde Vragen',\n      what_users_say: 'Wat Onze Gebruikers Zeggen',\n      transform_study: 'Transformeer je studie met Bijbel+',\n      features: {\n        aiTitle: 'Theologische AI',\n        aiDesc: 'Intelligente assistent beantwoordt Bijbelse vragen, vergelijkt doctrines en biedt diepe historische context.',\n        plansTitle: 'Aangepaste Plannen',\n        plansDesc: 'Creëer leesplannen geïntegreerd met podcasts en volg je dagelijkse voortgang.',\n        podcastsTitle: 'Geïntegreerde Podcasts',\n        podcastsDesc: 'Luister, download en neem podcast-afleveringen op in je Bijbelstudie plannen.',\n        teacherTitle: 'Leermodus',\n        teacherDesc: 'Creëer lessen, beoordeel studenten en beheer klassen met professionele tools.',\n        communityTitle: 'Actieve Gemeenschap',\n        communityDesc: 'Deel inzichten, maak verbinding met andere studenten en groei samen.',\n        themesTitle: 'Aanpasbare Thema\\'s',\n        themesDesc: '5 premium thema\\'s of creëer je eigen met aangepaste RGB-kleurenkiezer.',\n      },\n    },\n    pricing: {\n      page_title: 'Plannen & Prijzen',\n      page_subtitle: 'Kies het perfecte plan voor jouw spirituele reis',\n      free_plan: 'Gratis',\n      premium_plan: 'Premium',\n      lifetime_plan: 'Levenslang',\n      per_month: '/maand',\n      one_time: 'eenmalige betaling',\n      select_plan: 'Selecteer Plan',\n      guarantee_title: '30 Dagen Garantie',\n      guarantee_description: '100% terugbetaling als je niet tevreden bent',\n      faq_title: 'Veelgestelde Vragen',\n    },\n    community: {\n      title: 'Gemeenschap',\n      what_studying: 'Wat studeer je?',\n      verse_reference: 'Vers Referentie',\n      your_reflection: 'Jouw Reflectie',\n      post: 'Plaatsen',\n      trending_topics: 'Trending Onderwerpen',\n      likes: 'likes',\n      comments: 'reacties',\n    },\n    favorites: {\n      title: 'Mijn Favorieten',\n      subtitle: 'Opgeslagen verzen, highlights en notities',\n      bookmarks: 'Bladwijzers',\n      highlights: 'Highlights',\n      notes: 'Notities',\n      no_favorites: 'Nog geen favorieten',\n      add_first: 'Begin met het toevoegen van je favoriete verzen',\n    },\n    profile: {\n      title: 'Profiel',\n      my_plans: 'Mijn Plannen',\n      prayer: 'Gebed',\n      achievements: 'Prestaties',\n      reading_streak: 'Leesreeks',\n      spiritual_level: 'Spiritueel Niveau',\n      edit_profile: 'Profiel Bewerken',\n      logout: 'Uitloggen',\n    },\n    aiStudy: {\n      title: 'Studeren met AI',\n      subtitle: 'Intelligente theologische assistent',\n      ai_chat: 'AI Chat',\n      ask_question: 'Stel een theologische vraag',\n      type_message: 'Typ je bericht...',\n    },\n    teacherMode: {\n      title: 'Leermodus',\n      new_lesson: 'Nieuwe Les',\n      lesson_title: 'Les Titel',\n      students: 'Studenten',\n      progress: 'Voortgang',\n      export_report: 'Rapport Exporteren',\n    },\n    offline: {\n      title: 'Offline Modus',\n      chapters_saved: 'Opgeslagen Hoofdstukken',\n      space_used: 'Gebruikte Ruimte',\n      books_downloaded: 'Gedownloade Boeken',\n      download_chapter: 'Hoofdstuk Downloaden',\n      delete_chapter: 'Verwijderen',\n      clear_all: 'Alles Wissen',\n    },\n    contact: {\n      title: 'Neem Contact Op',\n      subtitle: 'Verstuur Je Bericht',\n      name: 'Naam',\n      email: 'E-mail',\n      message: 'Bericht',\n      send: 'Verzenden',\n      success: 'Bericht succesvol verzonden!',\n    },\n  },\n  es: {\n    common: {\n      appName: 'Biblia+',\n      loading: 'Cargando...',\n      error: 'Error',\n      save: 'Guardar',\n      cancel: 'Cancelar',\n      delete: 'Eliminar',\n      edit: 'Editar',\n      search: 'Buscar',\n      close: 'Cerrar',\n      tryAgainLater: 'Inténtalo de nuevo más tarde.',\n    },\n    nav: {\n      home: 'Inicio',\n      bible: 'Biblia',\n      plans: 'Planes',\n      discover: 'Descubrir',\n      you: 'Tú',\n      progress: 'Progreso',\n      prayers: 'Oraciones',\n      aiStudy: 'Estudio con IA',\n      podcasts: 'Podcasts',\n      teacherMode: 'Modo Profesor',\n      settings: 'Configuración',\n      compareVersions: 'Comparar Versiones',\n      studyGroups: 'Grupos de Estudio',\n    },\n    sections: {\n      mainMenu: 'Menú Principal',\n      study: 'Estudio',\n      teaching: 'Enseñanza',\n      premiumStudy: 'Estudio Premium',\n      about: 'Acerca de',\n    },\n    bible: {\n      readChapter: 'Leer Capítulo',\n      bookmarks: 'Marcadores',\n      settings: 'Configuración',\n      selectBook: 'Seleccionar un libro',\n      selectChapter: 'Seleccionar un capítulo',\n      selectVersion: 'Versión de la Biblia',\n      markAsRead: 'Marcar como Leído',\n      offlineMode: 'Modo Sin Conexión',\n      searchVerses: 'Buscar versículos',\n      contentNotAvailableOffline: 'Contenido no disponible sin conexión',\n      addNote: 'Añadir Nota',\n      shareVerse: 'Compartir Versículo',\n      copyText: 'Copiar Texto',\n      downloadImage: 'Descargar Imagen',\n      chooseColor: 'Elegir Color',\n      saveNote: 'Guardar Nota',\n      cancel: 'Cancelar',\n      yellow: 'Amarillo',\n      green: 'Verde',\n      blue: 'Azul',\n      purple: 'Morado',\n      pink: 'Rosa',\n      orange: 'Naranja',\n      chooseHighlightColor: 'Elegir color del resaltado',\n      removeHighlight: 'Eliminar Resaltado',\n      writeNoteHere: 'Escribe tu nota aquí...',\n      update: 'Actualizar',\n      save: 'Guardar',\n      delete: 'Eliminar',\n      selectBookToStart: 'Selecciona un libro para comenzar',\n      offlineModeTitle: 'Modo Sin Conexión',\n      loadingSavedContent: 'Cargando contenido guardado',\n      copied: '¡Copiado!',\n      verseCopied: 'Versículo copiado al portapapeles',\n      error: 'Error',\n      failedToCopy: 'Error al copiar texto',\n      downloadStarted: '¡Descarga iniciada!',\n      verseImageDownloaded: 'Imagen del versículo descargada con éxito',\n      failedToGenerate: 'Error al generar imagen',\n      audioStarted: 'Audio iniciado',\n      listenWhileBrowsing: '¡Escucha mientras navegas!',\n      errorLoadingBooks: 'Error al cargar libros',\n      errorLoadingChapter: 'Error al cargar capítulo',\n      chapterComplete: '¡Capítulo completo! 🎉',\n      noteRemoved: '¡Nota eliminada!',\n      noteRemovedSuccess: 'Nota eliminada con éxito.',\n      bookmarkAdded: '¡Favorito añadido!',\n      bookmarkRemoved: '¡Favorito eliminado!',\n      highlightAdded: '¡Resaltado añadido!',\n      highlightRemoved: '¡Resaltado eliminado!',\n      highlightRemovedSuccess: 'Resaltado eliminado con éxito.',\n    },\n    bibleBooks: {\n      'gn': 'Génesis', 'ex': 'Éxodo', 'lv': 'Levítico', 'nm': 'Números', 'dt': 'Deuteronomio',\n      'js': 'Josué', 'jz': 'Jueces', 'rt': 'Rut', '1sm': '1 Samuel', '2sm': '2 Samuel',\n      '1rs': '1 Reyes', '2rs': '2 Reyes', '1cr': '1 Crónicas', '2cr': '2 Crónicas',\n      'ed': 'Esdras', 'ne': 'Nehemías', 'et': 'Ester', 'job': 'Job', 'sl': 'Salmos',\n      'pv': 'Proverbios', 'ec': 'Eclesiastés', 'ct': 'Cantares', 'is': 'Isaías',\n      'jr': 'Jeremías', 'lm': 'Lamentaciones', 'ez': 'Ezequiel', 'dn': 'Daniel',\n      'os': 'Oseas', 'jl': 'Joel', 'am': 'Amós', 'ob': 'Abdías', 'jn': 'Jonás',\n      'mq': 'Miqueas', 'na': 'Nahúm', 'hc': 'Habacuc', 'sf': 'Sofonías',\n      'ag': 'Hageo', 'zc': 'Zacarías', 'ml': 'Malaquías',\n      'mt': 'Mateo', 'mc': 'Marcos', 'lc': 'Lucas', 'jo': 'Juan', 'at': 'Hechos',\n      'rm': 'Romanos', '1co': '1 Corintios', '2co': '2 Corintios', 'gl': 'Gálatas',\n      'ef': 'Efesios', 'fp': 'Filipenses', 'cl': 'Colosenses',\n      '1ts': '1 Tesalonicenses', '2ts': '2 Tesalonicenses',\n      '1tm': '1 Timoteo', '2tm': '2 Timoteo', 'tt': 'Tito', 'fm': 'Filemón',\n      'hb': 'Hebreos', 'tg': 'Santiago', '1pe': '1 Pedro', '2pe': '2 Pedro',\n      '1jo': '1 Juan', '2jo': '2 Juan', '3jo': '3 Juan', 'jd': 'Judas', 'ap': 'Apocalipsis',\n    },\n    plans: {\n      title: 'Planes de Lectura',\n      subtitle: 'Organiza y sigue tu estudio bíblico',\n      myPlans: 'Mis Planes',\n      available: 'Planes Disponibles',\n      createPlan: 'Crear Plan',\n      startPlan: 'Iniciar Plan',\n      starting: 'Iniciando...',\n      days: 'días',\n      of_days_completed: 'de {total} días completados',\n      progress: 'Progreso',\n      completeDay: 'Completar Día',\n      dayCompleted: 'Día Completado',\n      selectTemplate: 'Selecciona un Plan',\n      noPlanTemplate: 'Ningún plan disponible',\n      activePlans: 'Planes Activos',\n      completedPlans: 'Planes Completados',\n      currentDay: 'Día Actual',\n      noActivePlans: 'Sin planes activos',\n      startFirstPlan: 'Iniciar Primer Plan',\n      choosePlanDescription: 'Elige un plan predefinido para comenzar tu jornada',\n      day: 'Día',\n      todayReading: 'Lectura de hoy:',\n      markDayComplete: 'Marcar Día como Completo',\n      completed: 'Completado',\n      completedOn: 'Completado el',\n      dayComplete: '¡Día completo! 🎉',\n      youEarnedXP: 'Ganaste {xp} XP por tu lectura.',\n      errorMarkingProgress: 'Error al marcar progreso',\n    },\n    progress: {\n      title: 'Tu Progreso',\n      subtitle: 'Sigue tu crecimiento espiritual',\n      level: 'Nivel',\n      xp: 'XP',\n      streak: 'Racha',\n      achievements: 'Logros',\n      milestone: 'Hito',\n      reading: 'Lectura',\n      streakCategory: 'Racha',\n      experiencePoints: 'Puntos de Experiencia',\n      readingStreak: 'Racha de Lectura',\n      totalXpAccumulated: 'XP total acumulado',\n      consecutiveDays: 'días consecutivos',\n      ofTotalUnlocked: 'de {total} desbloqueados',\n      nextLevel: 'Siguiente Nivel',\n      continueReadingToLevel: 'Continúa leyendo para alcanzar el nivel {level}',\n      progressToNextLevel: 'Progreso al siguiente nivel',\n      xpNeededForLevel: 'Faltan {xp} XP para el nivel {level}',\n      unlocked: 'Desbloqueado',\n      complete: 'completo',\n      loadingProgress: 'Cargando progreso...',\n    },\n    achievements: {\n      firstRead: 'Primera Lectura',\n      firstReadDesc: 'Lee tu primer capítulo',\n      streak7: 'Racha de 7 Días',\n      streak7Desc: 'Lee durante 7 días consecutivos',\n      streak30: 'Racha de 30 Días',\n      streak30Desc: 'Lee durante 30 días consecutivos',\n      streak100: 'Racha de 100 Días',\n      streak100Desc: 'Lee durante 100 días consecutivos',\n    },\n    dailyVerse: {\n      verse_of_the_day: 'Versículo del Día',\n      copy: 'Copiar',\n      share: 'Compartir',\n      download_image: 'Descargar Imagen',\n      verse_copied: '¡Versículo copiado!',\n      verse_copied_description: 'Texto copiado al portapapeles',\n      copy_failed: 'Error al copiar',\n      copy_failed_description: 'No se pudo copiar el texto',\n      image_downloaded: '¡Imagen descargada!',\n      image_downloaded_description: 'Versículo guardado como imagen',\n      download_failed: 'Error al descargar',\n      download_failed_description: 'No se pudo guardar la imagen',\n    },\n    donate: {\n      title: 'Apoya Biblia+',\n      subtitle: 'Tu donación mantiene Biblia+ 100% gratis y ayuda a llevar la Palabra a más personas, en más idiomas. Pero eso no es todo: cada contribución sustenta a los desarrolladores que trabajan incansablemente — día y noche — para mejorar la experiencia, corregir errores, agregar funciones y hacer la aplicación más ligera, rápida y accesible para todos. No solo estás donando. Estás siendo parte de la historia de quienes buscan la Palabra, donde quiera que estén.',\n      one_time: 'Donación Única',\n      recurring: 'Donación Recurrente',\n      monthly: 'Mensual',\n      amount: 'Cantidad',\n      custom_amount: 'Cantidad personalizada',\n      destination: 'Destino de la donación',\n      app_operations: 'Operaciones de la aplicación',\n      bible_translation: 'Traducción bíblica',\n      anonymous: 'Donar anónimamente',\n      message: 'Mensaje (opcional)',\n      message_placeholder: 'Deja un mensaje de apoyo...',\n      donate_button: 'Donar',\n      processing: 'Procesando...',\n      success_title: '¡Donación exitosa!',\n      success_message: '¡Muchas gracias por tu apoyo!',\n      error_title: 'Error al procesar donación',\n      configure_stripe: 'Sistema de donaciones no configurado. Configura las claves de Stripe para habilitar donaciones.',\n    },\n    landing: {\n      hero_title: 'Transforma Tu Estudio Bíblico',\n      hero_subtitle: 'Inteligencia Artificial, Podcasts, Comunidad y Enseñanza en una única plataforma premium. El futuro del estudio bíblico ha llegado.',\n      start_free: 'Comenzar Gratis',\n      see_features: 'Ver Características',\n      premium_features: 'Características Premium',\n      premium_subtitle: 'Todo lo que necesitas para un estudio bíblico profundo y transformador',\n      customize_experience: 'Personaliza Tu Experiencia',\n      customize_subtitle: '4 temas listos o crea el tuyo propio con colores personalizados',\n      why_bible_plus: '¿Por Qué Biblia+?',\n      why_subtitle: 'Mucho más que una simple aplicación bíblica',\n      cta_title: 'Comienza Hoy Tu Jornada',\n      cta_subtitle: 'Únete a miles de personas transformando su estudio bíblico',\n      start_free_cta: 'Comenzar Gratis',\n      footer_description: 'Estudio Premium con IA',\n      footer_plans: 'Planes',\n      footer_contact: 'Contacto',\n      footer_support: 'Soporte',\n      newGeneration: 'v2.0 - Nueva Generación',\n      nav_resources: 'Recursos',\n      nav_themes: 'Temas',\n      nav_testimonials: 'Testimonios',\n      nav_faq: 'Preguntas',\n      powerful_resources: 'Recursos Poderosos Para Tu Estudio',\n      incredible_themes: 'Temas Increíbles',\n      premium_content: 'Contenido Premium',\n      faq_title: 'Preguntas Frecuentes',\n      what_users_say: 'Lo Que Dicen Nuestros Usuarios',\n      transform_study: 'Transforma tu estudio con Biblia+',\n      features: {\n        aiTitle: 'IA Teológica',\n        aiDesc: 'Asistente inteligente responde preguntas bíblicas, compara doctrinas y ofrece contexto histórico profundo.',\n        plansTitle: 'Planes Personalizados',\n        plansDesc: 'Crea planes de lectura integrados con podcasts y sigue tu progreso diario.',\n        podcastsTitle: 'Podcasts Integrados',\n        podcastsDesc: 'Escucha, descarga e incluye episodios de podcast en tus planes de estudio bíblico.',\n        teacherTitle: 'Modo Profesor',\n        teacherDesc: 'Crea lecciones, evalúa estudiantes y gestiona clases con herramientas profesionales.',\n        communityTitle: 'Comunidad Activa',\n        communityDesc: 'Comparte ideas, conéctate con otros estudiantes y crece juntos.',\n        themesTitle: 'Temas Personalizables',\n        themesDesc: '5 temas premium o crea el tuyo propio con selector de colores RGB personalizado.',\n      },\n    },\n    pricing: {\n      page_title: 'Planes y Precios',\n      page_subtitle: 'Elige el plan perfecto para tu jornada espiritual',\n      free_plan: 'Gratis',\n      premium_plan: 'Premium',\n      lifetime_plan: 'De Por Vida',\n      per_month: '/mes',\n      one_time: 'pago único',\n      select_plan: 'Elegir Plan',\n      guarantee_title: 'Garantía de 30 Días',\n      guarantee_description: '100% de reembolso si no estás satisfecho',\n      faq_title: 'Preguntas Frecuentes',\n    },\n    community: {\n      title: 'Comunidad',\n      what_studying: '¿Qué estás estudiando?',\n      verse_reference: 'Referencia del Versículo',\n      your_reflection: 'Tu Reflexión',\n      post: 'Publicar',\n      trending_topics: 'Temas Destacados',\n      likes: 'me gusta',\n      comments: 'comentarios',\n    },\n    favorites: {\n      title: 'Mis Favoritos',\n      subtitle: 'Versículos guardados, destacados y notas',\n      bookmarks: 'Marcadores',\n      highlights: 'Destacados',\n      notes: 'Notas',\n      no_favorites: 'Aún no hay favoritos',\n      add_first: 'Comienza agregando tus versículos favoritos',\n    },\n    profile: {\n      title: 'Perfil',\n      my_plans: 'Mis Planes',\n      prayer: 'Oración',\n      achievements: 'Logros',\n      reading_streak: 'Racha de Lectura',\n      spiritual_level: 'Nivel Espiritual',\n      edit_profile: 'Editar Perfil',\n      logout: 'Salir',\n    },\n    aiStudy: {\n      title: 'Estudiar con IA',\n      subtitle: 'Asistente teológico inteligente',\n      ai_chat: 'Chat con IA',\n      ask_question: 'Haz una pregunta teológica',\n      type_message: 'Escribe tu mensaje...',\n    },\n    teacherMode: {\n      title: 'Modo Profesor',\n      new_lesson: 'Nueva Lección',\n      lesson_title: 'Título de la Lección',\n      students: 'Estudiantes',\n      progress: 'Progreso',\n      export_report: 'Exportar Informe',\n    },\n    offline: {\n      title: 'Modo Sin Conexión',\n      chapters_saved: 'Capítulos Guardados',\n      space_used: 'Espacio Usado',\n      books_downloaded: 'Libros Descargados',\n      download_chapter: 'Descargar Capítulo',\n      delete_chapter: 'Eliminar',\n      clear_all: 'Borrar Todo',\n    },\n    contact: {\n      title: 'Contáctanos',\n      subtitle: 'Envía Tu Mensaje',\n      name: 'Nombre',\n      email: 'Correo Electrónico',\n      message: 'Mensaje',\n      send: 'Enviar',\n      success: '¡Mensaje enviado exitosamente!',\n    },\n  },\n};\n\nexport function getBookName(bookAbbrev: string, language: Language): string {\n  const lowerAbbrev = bookAbbrev.toLowerCase();\n  return translations[language].bibleBooks[lowerAbbrev] || bookAbbrev;\n}\n","path":null,"size_bytes":60489,"size_tokens":null},"server/seed-reading-plans.ts":{"content":"import { InsertReadingPlanTemplate } from \"@shared/schema\";\n\nexport const readingPlanTemplates: InsertReadingPlanTemplate[] = [\n  {\n    name: \"Plano de 30 Dias - Novo Testamento\",\n    description: \"Leia todo o Novo Testamento em 30 dias com leituras diárias equilibradas\",\n    duration: 30,\n    category: \"novo-testamento\",\n    difficulty: \"intermediário\",\n    schedule: Array.from({ length: 30 }, (_, i) => ({\n      day: i + 1,\n      readings: [\n        { book: \"Mateus\", chapter: i + 1, verses: \"\" }\n      ],\n      isCompleted: false\n    })),\n  },\n  {\n    name: \"Plano de 90 Dias - Bíblia Completa\",\n    description: \"Leia toda a Bíblia em 90 dias com aproximadamente 13 capítulos por dia\",\n    duration: 90,\n    category: \"biblia-completa\",\n    difficulty: \"avançado\",\n    schedule: [\n      { day: 1, readings: [{ book: \"Gênesis\", chapter: 1, verses: \"\" }, { book: \"Gênesis\", chapter: 2, verses: \"\" }], isCompleted: false },\n      { day: 2, readings: [{ book: \"Gênesis\", chapter: 3, verses: \"\" }, { book: \"Gênesis\", chapter: 4, verses: \"\" }], isCompleted: false },\n      { day: 3, readings: [{ book: \"Gênesis\", chapter: 5, verses: \"\" }, { book: \"Gênesis\", chapter: 6, verses: \"\" }], isCompleted: false },\n    ],\n  },\n  {\n    name: \"Plano de 365 Dias - Bíblia Completa\",\n    description: \"Leia toda a Bíblia em um ano com leituras diárias confortáveis\",\n    duration: 365,\n    category: \"biblia-completa\",\n    difficulty: \"iniciante\",\n    schedule: [\n      { day: 1, readings: [{ book: \"Gênesis\", chapter: 1, verses: \"\" }], isCompleted: false },\n      { day: 2, readings: [{ book: \"Gênesis\", chapter: 2, verses: \"\" }], isCompleted: false },\n      { day: 3, readings: [{ book: \"Gênesis\", chapter: 3, verses: \"\" }], isCompleted: false },\n    ],\n  },\n  {\n    name: \"Plano de 7 Dias - Salmos de Louvor\",\n    description: \"Uma semana focada nos salmos de louvor e adoração\",\n    duration: 7,\n    category: \"devocional\",\n    difficulty: \"iniciante\",\n    schedule: [\n      { day: 1, readings: [{ book: \"Salmos\", chapter: 23, verses: \"\" }], isCompleted: false },\n      { day: 2, readings: [{ book: \"Salmos\", chapter: 100, verses: \"\" }], isCompleted: false },\n      { day: 3, readings: [{ book: \"Salmos\", chapter: 103, verses: \"\" }], isCompleted: false },\n      { day: 4, readings: [{ book: \"Salmos\", chapter: 145, verses: \"\" }], isCompleted: false },\n      { day: 5, readings: [{ book: \"Salmos\", chapter: 146, verses: \"\" }], isCompleted: false },\n      { day: 6, readings: [{ book: \"Salmos\", chapter: 147, verses: \"\" }], isCompleted: false },\n      { day: 7, readings: [{ book: \"Salmos\", chapter: 150, verses: \"\" }], isCompleted: false },\n    ],\n  },\n  {\n    name: \"Plano de 14 Dias - Evangelho de João\",\n    description: \"Explore o Evangelho de João em duas semanas\",\n    duration: 14,\n    category: \"evangelhos\",\n    difficulty: \"iniciante\",\n    schedule: [\n      { day: 1, readings: [{ book: \"João\", chapter: 1, verses: \"\" }, { book: \"João\", chapter: 2, verses: \"\" }], isCompleted: false },\n      { day: 2, readings: [{ book: \"João\", chapter: 3, verses: \"\" }, { book: \"João\", chapter: 4, verses: \"\" }], isCompleted: false },\n      { day: 3, readings: [{ book: \"João\", chapter: 5, verses: \"\" }, { book: \"João\", chapter: 6, verses: \"\" }], isCompleted: false },\n      { day: 4, readings: [{ book: \"João\", chapter: 7, verses: \"\" }, { book: \"João\", chapter: 8, verses: \"\" }], isCompleted: false },\n      { day: 5, readings: [{ book: \"João\", chapter: 9, verses: \"\" }, { book: \"João\", chapter: 10, verses: \"\" }], isCompleted: false },\n      { day: 6, readings: [{ book: \"João\", chapter: 11, verses: \"\" }, { book: \"João\", chapter: 12, verses: \"\" }], isCompleted: false },\n      { day: 7, readings: [{ book: \"João\", chapter: 13, verses: \"\" }, { book: \"João\", chapter: 14, verses: \"\" }], isCompleted: false },\n      { day: 8, readings: [{ book: \"João\", chapter: 15, verses: \"\" }, { book: \"João\", chapter: 16, verses: \"\" }], isCompleted: false },\n      { day: 9, readings: [{ book: \"João\", chapter: 17, verses: \"\" }, { book: \"João\", chapter: 18, verses: \"\" }], isCompleted: false },\n      { day: 10, readings: [{ book: \"João\", chapter: 19, verses: \"\" }], isCompleted: false },\n      { day: 11, readings: [{ book: \"João\", chapter: 20, verses: \"\" }], isCompleted: false },\n      { day: 12, readings: [{ book: \"João\", chapter: 21, verses: \"\" }], isCompleted: false },\n      { day: 13, readings: [{ book: \"João\", chapter: 1, verses: \"1-18\" }], isCompleted: false },\n      { day: 14, readings: [{ book: \"João\", chapter: 3, verses: \"16-21\" }], isCompleted: false },\n    ],\n  },\n  {\n    name: \"Plano de 21 Dias - Provérbios\",\n    description: \"Um capítulo de Provérbios por dia para sabedoria diária\",\n    duration: 21,\n    category: \"sabedoria\",\n    difficulty: \"iniciante\",\n    schedule: Array.from({ length: 21 }, (_, i) => ({\n      day: i + 1,\n      readings: [{ book: \"Provérbios\", chapter: i + 1, verses: \"\" }],\n      isCompleted: false\n    })),\n  },\n];\n","path":null,"size_bytes":4990,"size_tokens":null},"client/my-app/app/globals.css":{"content":"@import \"tailwindcss\";\n\n:root {\n  --background: #ffffff;\n  --foreground: #171717;\n}\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --font-sans: var(--font-geist-sans);\n  --font-mono: var(--font-geist-mono);\n}\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    --background: #0a0a0a;\n    --foreground: #ededed;\n  }\n}\n\nbody {\n  background: var(--background);\n  color: var(--foreground);\n  font-family: Arial, Helvetica, sans-serif;\n}\n","path":null,"size_bytes":488,"size_tokens":null},"client/my-app/next.config.ts":{"content":"import type { NextConfig } from \"next\";\n\nconst nextConfig: NextConfig = {\n  /* config options here */\n};\n\nexport default nextConfig;\n","path":null,"size_bytes":133,"size_tokens":null},"client/my-app/app/page.tsx":{"content":"import Image from \"next/image\";\n\nexport default function Home() {\n  return (\n    <div className=\"font-sans grid grid-rows-[20px_1fr_20px] items-center justify-items-center min-h-screen p-8 pb-20 gap-16 sm:p-20\">\n      <main className=\"flex flex-col gap-[32px] row-start-2 items-center sm:items-start\">\n        <Image\n          className=\"dark:invert\"\n          src=\"/next.svg\"\n          alt=\"Next.js logo\"\n          width={180}\n          height={38}\n          priority\n        />\n        <ol className=\"font-mono list-inside list-decimal text-sm/6 text-center sm:text-left\">\n          <li className=\"mb-2 tracking-[-.01em]\">\n            Get started by editing{\" \"}\n            <code className=\"bg-black/[.05] dark:bg-white/[.06] font-mono font-semibold px-1 py-0.5 rounded\">\n              app/page.tsx\n            </code>\n            .\n          </li>\n          <li className=\"tracking-[-.01em]\">\n            Save and see your changes instantly.\n          </li>\n        </ol>\n\n        <div className=\"flex gap-4 items-center flex-col sm:flex-row\">\n          <a\n            className=\"rounded-full border border-solid border-transparent transition-colors flex items-center justify-center bg-foreground text-background gap-2 hover:bg-[#383838] dark:hover:bg-[#ccc] font-medium text-sm sm:text-base h-10 sm:h-12 px-4 sm:px-5 sm:w-auto\"\n            href=\"https://vercel.com/new?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <Image\n              className=\"dark:invert\"\n              src=\"/vercel.svg\"\n              alt=\"Vercel logomark\"\n              width={20}\n              height={20}\n            />\n            Deploy now\n          </a>\n          <a\n            className=\"rounded-full border border-solid border-black/[.08] dark:border-white/[.145] transition-colors flex items-center justify-center hover:bg-[#f2f2f2] dark:hover:bg-[#1a1a1a] hover:border-transparent font-medium text-sm sm:text-base h-10 sm:h-12 px-4 sm:px-5 w-full sm:w-auto md:w-[158px]\"\n            href=\"https://nextjs.org/docs?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Read our docs\n          </a>\n        </div>\n      </main>\n      <footer className=\"row-start-3 flex gap-[24px] flex-wrap items-center justify-center\">\n        <a\n          className=\"flex items-center gap-2 hover:underline hover:underline-offset-4\"\n          href=\"https://nextjs.org/learn?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <Image\n            aria-hidden\n            src=\"/file.svg\"\n            alt=\"File icon\"\n            width={16}\n            height={16}\n          />\n          Learn\n        </a>\n        <a\n          className=\"flex items-center gap-2 hover:underline hover:underline-offset-4\"\n          href=\"https://vercel.com/templates?framework=next.js&utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <Image\n            aria-hidden\n            src=\"/window.svg\"\n            alt=\"Window icon\"\n            width={16}\n            height={16}\n          />\n          Examples\n        </a>\n        <a\n          className=\"flex items-center gap-2 hover:underline hover:underline-offset-4\"\n          href=\"https://nextjs.org?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <Image\n            aria-hidden\n            src=\"/globe.svg\"\n            alt=\"Globe icon\"\n            width={16}\n            height={16}\n          />\n          Go to nextjs.org →\n        </a>\n      </footer>\n    </div>\n  );\n}\n","path":null,"size_bytes":3986,"size_tokens":null},"client/my-app/README.md":{"content":"This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).\n\n## Getting Started\n\nFirst, run the development server:\n\n```bash\nnpm run dev\n# or\nyarn dev\n# or\npnpm dev\n# or\nbun dev\n```\n\nOpen [http://localhost:3000](http://localhost:3000) with your browser to see the result.\n\nYou can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.\n\nThis project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.\n\n## Learn More\n\nTo learn more about Next.js, take a look at the following resources:\n\n- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.\n- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.\n\nYou can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!\n\n## Deploy on Vercel\n\nThe easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.\n\nCheck out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.\n","path":null,"size_bytes":1450,"size_tokens":null},"client/src/components/BottomNav.tsx":{"content":"import { Home, BookOpen, Book, Trophy, User, MessageSquare } from 'lucide-react';\nimport { Link, useLocation } from 'wouter';\nimport { useLanguage } from '@/contexts/LanguageContext';\n\ninterface NavItem {\n  title: string;\n  url: string;\n  icon: typeof Home;\n  testId: string;\n}\n\nexport function BottomNav() {\n  const [location] = useLocation();\n  const { t } = useLanguage();\n\n  const navItems = [\n    { title: t.nav.home, url: '/', icon: Home, color: 'text-blue-500', testId: 'nav-home' },\n    { title: t.nav.bible, url: '/bible-reader', icon: BookOpen, color: 'text-emerald-500', testId: 'nav-bible' },\n    { title: t.nav.plans, url: '/plans', icon: Book, color: 'text-amber-500', testId: 'nav-plans' },\n    { title: t.nav.progress, url: '/progress', icon: Trophy, color: 'text-yellow-500', testId: 'nav-progress' },\n    { title: t.nav.you, url: '/profile', icon: User, color: 'text-slate-600', testId: 'nav-you' },\n  ];\n\n  return (\n    <nav \n      className=\"fixed bottom-0 left-0 right-0 z-50 bg-background border-t md:hidden\"\n      data-testid=\"bottom-nav\"\n    >\n      <div className=\"flex items-center justify-around h-16 max-w-screen-xl mx-auto px-2\">\n        {navItems.map((item) => {\n          const Icon = item.icon;\n          const isActive = location === item.url;\n          \n          return (\n            <Link \n              key={item.url} \n              href={item.url}\n              className={`flex flex-col items-center justify-center gap-1 px-3 py-2 min-w-[4rem] transition-colors ${\n                isActive\n                  ? 'text-primary'\n                  : 'text-muted-foreground'\n              }`}\n              data-testid={item.testId}\n              aria-current={isActive ? 'page' : undefined}\n            >\n              <Icon className={`h-5 w-5 ${item.color} ${isActive ? 'fill-current' : ''}`} />\n              <span className=\"text-xs font-medium\">{item.title}</span>\n            </Link>\n          );\n        })}\n      </div>\n    </nav>\n  );\n}\n","path":null,"size_bytes":1980,"size_tokens":null},"client/my-app/app/layout.tsx":{"content":"import type { Metadata } from \"next\";\nimport { Geist, Geist_Mono } from \"next/font/google\";\nimport \"./globals.css\";\n\nconst geistSans = Geist({\n  variable: \"--font-geist-sans\",\n  subsets: [\"latin\"],\n});\n\nconst geistMono = Geist_Mono({\n  variable: \"--font-geist-mono\",\n  subsets: [\"latin\"],\n});\n\nexport const metadata: Metadata = {\n  title: \"Create Next App\",\n  description: \"Generated by create next app\",\n};\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"en\">\n      <body\n        className={`${geistSans.variable} ${geistMono.variable} antialiased`}\n      >\n        {children}\n      </body>\n    </html>\n  );\n}\n","path":null,"size_bytes":689,"size_tokens":null},"client/src/pages/favorites.tsx":{"content":"import { useState, useMemo } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Loader2, \n  BookmarkIcon, \n  Highlighter, \n  FileText, \n  ArrowLeft, \n  Search, \n  Trash2, \n  Share2,\n  ChevronRight,\n  Heart\n} from \"lucide-react\";\nimport type { Bookmark, Highlight, Note } from \"@shared/schema\";\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { Link } from \"wouter\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { ShareSheet } from \"@/components/ShareSheet\";\nimport { motion } from \"framer-motion\";\n\nexport default function Favorites() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [search, setSearch] = useState(\"\");\n  const [activeTab, setActiveTab] = useState(\"bookmarks\");\n  const [shareData, setShareData] = useState<{\n    open: boolean;\n    book: string;\n    chapter: number;\n    verse: number;\n    text: string;\n    version: string;\n  }>({\n    open: false,\n    book: \"\",\n    chapter: 1,\n    verse: 1,\n    text: \"\",\n    version: \"nvi\"\n  });\n  \n  const { data: bookmarks = [], isLoading: loadingBookmarks } = useQuery<Bookmark[]>({\n    queryKey: [\"/api/bible/bookmarks\"],\n  });\n\n  const { data: highlights = [], isLoading: loadingHighlights } = useQuery<Highlight[]>({\n    queryKey: [\"/api/bible/highlights\"],\n  });\n\n  const { data: notes = [], isLoading: loadingNotes } = useQuery<Note[]>({\n    queryKey: [\"/api/notes\"],\n  });\n\n  const deleteBookmarkMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(\"DELETE\", `/api/bible/bookmarks/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/bible/bookmarks\"] });\n      toast({ title: \"Removido\", description: \"Favorito removido com sucesso\" });\n    }\n  });\n\n  const deleteHighlightMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(\"DELETE\", `/api/bible/highlights/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/bible/highlights\"] });\n      toast({ title: \"Removido\", description: \"Destaque removido com sucesso\" });\n    }\n  });\n\n  const deleteNoteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(\"DELETE\", `/api/notes/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notes\"] });\n      toast({ title: \"Removido\", description: \"Nota removida com sucesso\" });\n    }\n  });\n\n  const filteredBookmarks = useMemo(() => {\n    return bookmarks.filter(b => \n      b.book.toLowerCase().includes(search.toLowerCase()) || \n      b.verseText.toLowerCase().includes(search.toLowerCase())\n    );\n  }, [bookmarks, search]);\n\n  const filteredHighlights = useMemo(() => {\n    return highlights.filter(h => \n      h.book.toLowerCase().includes(search.toLowerCase()) || \n      h.verseText.toLowerCase().includes(search.toLowerCase())\n    );\n  }, [highlights, search]);\n\n  const filteredNotes = useMemo(() => {\n    return notes.filter(n => \n      n.book.toLowerCase().includes(search.toLowerCase()) || \n      n.content.toLowerCase().includes(search.toLowerCase())\n    );\n  }, [notes, search]);\n\n  const getHighlightCardStyles = (color: string) => {\n    switch (color) {\n      case \"yellow\": return \"bg-yellow-500/10 border-yellow-500/20 text-yellow-900 dark:text-yellow-200\";\n      case \"green\": return \"bg-green-500/10 border-green-500/20 text-green-900 dark:text-green-200\";\n      case \"blue\": return \"bg-blue-500/10 border-blue-500/20 text-blue-900 dark:text-blue-200\";\n      case \"purple\": return \"bg-purple-500/10 border-purple-500/20 text-purple-900 dark:text-purple-200\";\n      case \"pink\": return \"bg-pink-500/10 border-pink-500/20 text-pink-900 dark:text-pink-200\";\n      case \"orange\": return \"bg-orange-500/10 border-orange-500/20 text-orange-900 dark:text-orange-200\";\n      default: return \"bg-muted/30 border-muted-foreground/10\";\n    }\n  };\n\n  const getHighlightBadgeBg = (color: string) => {\n    switch (color) {\n      case \"yellow\": return \"bg-yellow-500 text-white\";\n      case \"green\": return \"bg-green-500 text-white\";\n      case \"blue\": return \"bg-blue-500 text-white\";\n      case \"purple\": return \"bg-purple-500 text-white\";\n      case \"pink\": return \"bg-pink-500 text-white\";\n      case \"orange\": return \"bg-orange-500 text-white\";\n      default: return \"\";\n    }\n  };\n\n  if (loadingBookmarks || loadingHighlights || loadingNotes) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center space-y-3\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary mx-auto\" />\n          <p className=\"text-sm text-muted-foreground\">Carregando favoritos...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden mesh-primary\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"relative z-10 container max-w-5xl mx-auto p-4 md:p-8 pb-32\">\n        {/* Header Section */}\n        <div className=\"text-center space-y-2 mb-10\">\n          <p className=\"text-[10px] font-semibold text-primary uppercase tracking-[0.2em]\">MEUS TESOUROS</p>\n          <h1 className=\"font-display text-xl sm:text-2xl font-bold text-foreground\">{t.favorites.title}</h1>\n          <p className=\"text-sm text-muted-foreground\">\n            {t.favorites.subtitle}\n          </p>\n        </div>\n        \n        <div className=\"flex justify-center mb-8\">\n          <div className=\"relative group w-full md:w-80\">\n            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground group-focus-within:text-primary transition-colors\" />\n            <Input \n              placeholder=\"Pesquisar tesouros...\" \n              className=\"pl-11 h-12 bg-card/50 backdrop-blur-md border-primary/10 rounded-2xl focus-visible:ring-primary/30 shadow-sm transition-all\"\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n            />\n          </div>\n        </div>\n\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n        {/* Custom Modern Tabs List */}\n        <div className=\"flex justify-center mb-8 w-full overflow-hidden\">\n          <TabsList className=\"inline-flex h-14 md:h-14 h-auto items-center justify-center rounded-2xl bg-muted/40 p-1.5 backdrop-blur-md border border-white/10 shadow-lg w-full md:w-auto flex-wrap md:flex-nowrap\">\n            <TabsTrigger \n              value=\"bookmarks\" \n              className=\"flex-1 md:flex-none flex items-center gap-2 md:gap-3 px-3 md:px-6 h-10 md:h-11 rounded-xl data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-md transition-all duration-300 min-w-0\"\n            >\n              <BookmarkIcon className=\"h-4 w-4 shrink-0\" />\n              <span className=\"font-semibold text-xs md:text-sm truncate\">{t.favorites.bookmarks}</span>\n              <Badge variant=\"outline\" className=\"hidden xs:flex ml-1 px-1 h-4 md:h-5 border-current opacity-80 text-[10px]\">{filteredBookmarks.length}</Badge>\n            </TabsTrigger>\n            <TabsTrigger \n              value=\"highlights\" \n              className=\"flex-1 md:flex-none flex items-center gap-2 md:gap-3 px-3 md:px-6 h-10 md:h-11 rounded-xl data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-md transition-all duration-300 min-w-0\"\n            >\n              <Highlighter className=\"h-4 w-4 shrink-0\" />\n              <span className=\"font-semibold text-xs md:text-sm truncate\">{t.favorites.highlights}</span>\n              <Badge variant=\"outline\" className=\"hidden xs:flex ml-1 px-1 h-4 md:h-5 border-current opacity-80 text-[10px]\">{filteredHighlights.length}</Badge>\n            </TabsTrigger>\n            <TabsTrigger \n              value=\"notes\" \n              className=\"flex-1 md:flex-none flex items-center gap-2 md:gap-3 px-3 md:px-6 h-10 md:h-11 rounded-xl data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-md transition-all duration-300 min-w-0\"\n            >\n              <FileText className=\"h-4 w-4 shrink-0\" />\n              <span className=\"font-semibold text-xs md:text-sm truncate\">{t.favorites.notes}</span>\n              <Badge variant=\"outline\" className=\"hidden xs:flex ml-1 px-1 h-4 md:h-5 border-current opacity-80 text-[10px]\">{filteredNotes.length}</Badge>\n            </TabsTrigger>\n          </TabsList>\n        </div>\n\n          <ScrollArea className=\"h-[calc(100vh-320px)] pr-4 -mr-4\">\n              {/* Bookmarks Tab */}\n              <TabsContent value=\"bookmarks\" className=\"m-0 focus-visible:ring-0\">\n                <motion.div \n                  initial={{ opacity: 0, y: 10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -10 }}\n                  className=\"grid gap-6\"\n                >\n                  {filteredBookmarks.length === 0 ? (\n                    <EmptyState icon={BookmarkIcon} text={search ? \"Nenhum favorito encontrado\" : `${t.favorites.no_favorites}. ${t.favorites.add_first}!`} />\n                  ) : (\n                    filteredBookmarks.map((bookmark) => (\n                      <Card key={bookmark.id} className=\"glass-premium hover-premium group relative overflow-hidden border-primary/5 bg-card/40 backdrop-blur-sm hover:bg-card/60 hover:border-primary/20 hover:shadow-xl transition-all duration-500 rounded-3xl\">\n                        <div className=\"absolute top-0 left-0 w-1.5 h-full bg-primary/20 group-hover:bg-primary transition-colors\" />\n                        <CardHeader className=\"pb-3 flex flex-row items-start justify-between\">\n                          <div className=\"space-y-1.5\">\n                            <Link href={`/bible?book=${bookmark.book.toLowerCase()}&chapter=${bookmark.chapter}&verse=${bookmark.verse}&version=${bookmark.version || 'nvi'}`}>\n                              <div className=\"inline-flex items-center gap-2 group/link cursor-pointer\">\n                                <CardTitle className=\"text-xl font-bold tracking-tight text-primary\">\n                                  {bookmark.book} {bookmark.chapter}:{bookmark.verse}\n                                </CardTitle>\n                                <ChevronRight className=\"h-4 w-4 text-primary opacity-0 -translate-x-2 group-hover/link:opacity-100 group-hover/link:translate-x-0 transition-all duration-300\" />\n                              </div>\n                            </Link>\n                            <Badge variant=\"secondary\" className=\"block w-fit bg-primary/5 text-primary-foreground/70 font-mono text-[10px] uppercase tracking-widest\">{bookmark.version || \"NVI\"}</Badge>\n                          </div>\n                          <div className=\"flex gap-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                            <Button variant=\"ghost\" size=\"icon\" className=\"rounded-xl\" onClick={() => setShareData({...shareData, open: true, book: bookmark.book, chapter: bookmark.chapter, verse: bookmark.verse, text: bookmark.verseText, version: bookmark.version || 'nvi'})}>\n                              <Share2 className=\"h-4 w-4\" />\n                            </Button>\n                            <Button variant=\"ghost\" size=\"icon\" className=\"rounded-xl text-destructive\" onClick={() => deleteBookmarkMutation.mutate(bookmark.id)}>\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </CardHeader>\n                        <CardContent>\n                          <p className=\"font-serif text-xl leading-relaxed text-foreground/90 italic decoration-primary/10 underline-offset-8\">\"{bookmark.verseText}\"</p>\n                          {bookmark.note && (\n                            <div className=\"mt-5 p-4 bg-primary/5 border border-primary/10 rounded-2xl relative\">\n                              <FileText className=\"absolute top-4 right-4 h-4 w-4 text-primary/30\" />\n                              <p className=\"text-sm text-muted-foreground font-medium leading-relaxed\">{bookmark.note}</p>\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    ))\n                  )}\n                </motion.div>\n              </TabsContent>\n\n              {/* Highlights Tab */}\n              <TabsContent value=\"highlights\" className=\"m-0 focus-visible:ring-0\">\n                <motion.div \n                  initial={{ opacity: 0, y: 10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -10 }}\n                  className=\"grid gap-6\"\n                >\n                  {filteredHighlights.length === 0 ? (\n                    <EmptyState icon={Highlighter} text={search ? \"Nenhum destaque encontrado\" : `${t.favorites.no_favorites}. ${t.favorites.add_first}!`} />\n                  ) : (\n                    filteredHighlights.map((highlight) => (\n                      <Card key={highlight.id} className={`glass-premium hover-premium group relative overflow-hidden border-2 transition-all duration-500 rounded-3xl ${getHighlightCardStyles(highlight.color)} shadow-sm hover:shadow-lg`}>\n                        <CardHeader className=\"pb-3 flex flex-row items-start justify-between\">\n                          <div className=\"space-y-2\">\n                            <Link href={`/bible?book=${highlight.book.toLowerCase()}&chapter=${highlight.chapter}&verse=${highlight.verse}`}>\n                              <div className=\"inline-flex items-center gap-2 group/link cursor-pointer\">\n                                <CardTitle className=\"text-xl font-bold tracking-tight\">\n                                  {highlight.book} {highlight.chapter}:{highlight.verse}\n                                </CardTitle>\n                                <ChevronRight className=\"h-4 w-4 opacity-0 -translate-x-2 group-hover/link:opacity-100 group-hover/link:translate-x-0 transition-all duration-300\" />\n                              </div>\n                            </Link>\n                            <Badge className={`w-fit uppercase text-[10px] tracking-widest font-bold px-2 py-0.5 rounded-lg ${getHighlightBadgeBg(highlight.color)}`}>\n                              {highlight.color}\n                            </Badge>\n                          </div>\n                          <div className=\"flex gap-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                            <Button variant=\"ghost\" size=\"icon\" className=\"rounded-xl\" onClick={() => setShareData({...shareData, open: true, book: highlight.book, chapter: highlight.chapter, verse: highlight.verse, text: highlight.verseText, version: 'nvi'})}>\n                              <Share2 className=\"h-4 w-4\" />\n                            </Button>\n                            <Button variant=\"ghost\" size=\"icon\" className=\"rounded-xl text-destructive\" onClick={() => deleteHighlightMutation.mutate(highlight.id)}>\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </CardHeader>\n                        <CardContent>\n                          <p className=\"font-serif text-xl leading-relaxed font-medium\">{highlight.verseText}</p>\n                        </CardContent>\n                      </Card>\n                    ))\n                  )}\n                </motion.div>\n              </TabsContent>\n\n              {/* Notes Tab */}\n              <TabsContent value=\"notes\" className=\"m-0 focus-visible:ring-0\">\n                <motion.div \n                  initial={{ opacity: 0, y: 10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -10 }}\n                  className=\"grid gap-6\"\n                >\n                  {filteredNotes.length === 0 ? (\n                    <EmptyState icon={FileText} text={search ? \"Nenhuma nota encontrada\" : `${t.favorites.no_favorites}. ${t.favorites.add_first}!`} />\n                  ) : (\n                    filteredNotes.map((note) => (\n                      <Card key={note.id} className=\"glass-premium hover-premium group relative overflow-hidden border-primary/5 bg-card/40 backdrop-blur-sm hover:bg-card/60 transition-all duration-500 rounded-3xl\">\n                        <CardHeader className=\"pb-3 flex flex-row items-start justify-between\">\n                          <div className=\"space-y-1.5\">\n                            <Link href={`/bible?book=${note.book.toLowerCase()}&chapter=${note.chapter}${note.verse ? `&verse=${note.verse}` : ''}`}>\n                              <div className=\"inline-flex items-center gap-2 group/link cursor-pointer\">\n                                <CardTitle className=\"text-xl font-bold tracking-tight text-primary\">\n                                  {note.book} {note.chapter}:{note.verse}\n                                </CardTitle>\n                                <ChevronRight className=\"h-4 w-4 text-primary opacity-0 -translate-x-2 group-hover/link:opacity-100 group-hover/link:translate-x-0 transition-all duration-300\" />\n                              </div>\n                            </Link>\n                            <div className=\"flex items-center gap-2 text-[10px] uppercase font-bold tracking-widest text-muted-foreground/60\">\n                              <Heart className=\"h-2.5 w-2.5 fill-current\" />\n                              {new Date(note.createdAt!).toLocaleDateString('pt-BR', { day: '2-digit', month: 'short', year: 'numeric' })}\n                            </div>\n                          </div>\n                          <Button variant=\"ghost\" size=\"icon\" className=\"rounded-xl opacity-0 group-hover:opacity-100 text-destructive transition-all\" onClick={() => deleteNoteMutation.mutate(note.id)}>\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        </CardHeader>\n                        <CardContent>\n                          <div className=\"p-5 bg-background/40 rounded-2xl border border-primary/5 shadow-inner\">\n                            <p className=\"text-base leading-relaxed text-foreground/80 whitespace-pre-wrap font-medium\">{note.content}</p>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    ))\n                  )}\n                </motion.div>\n              </TabsContent>\n          </ScrollArea>\n        </Tabs>\n      </div>\n\n      <ShareSheet \n        open={shareData.open}\n        onOpenChange={(open) => setShareData(prev => ({ ...prev, open }))}\n        bookName={shareData.book}\n        bookAbbrev={shareData.book}\n        chapter={shareData.chapter}\n        verseNumber={shareData.verse}\n        verseText={shareData.text}\n        version={shareData.version}\n      />\n    </div>\n  );\n}\n\nfunction EmptyState({ icon: Icon, text }: { icon: any, text: string }) {\n  return (\n    <motion.div \n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      className=\"flex flex-col items-center justify-center py-24 px-6 bg-card/20 backdrop-blur-sm rounded-[3rem] border-2 border-dashed border-primary/10\"\n    >\n      <div className=\"relative mb-6\">\n        <div className=\"absolute inset-0 bg-primary/20 blur-3xl rounded-full\" />\n        <Icon className=\"relative h-16 w-16 text-primary opacity-30\" />\n      </div>\n      <p className=\"text-muted-foreground font-semibold text-lg text-center max-w-xs leading-tight\">\n        {text}\n      </p>\n    </motion.div>\n  );\n}\n","path":null,"size_bytes":20506,"size_tokens":null},"client/src/components/DailyVerse.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Share2, Copy, Download, Quote } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport * as htmlToImage from \"html-to-image\";\nimport { useRef } from \"react\";\nimport { apiFetch } from \"@/lib/config\";\nimport { motion } from \"framer-motion\";\n\ninterface DailyVerse {\n  id: string;\n  reference: string;\n  text: string;\n  dayOfYear: number;\n  version: string;\n  theme?: string;\n}\n\nexport function DailyVerse() {\n  const { toast } = useToast();\n  const { t } = useLanguage();\n  const cardRef = useRef<HTMLDivElement>(null);\n\n  const { data: verse, isLoading } = useQuery<DailyVerse>({\n    queryKey: [\"/api/daily-verse\", Intl.DateTimeFormat().resolvedOptions().timeZone],\n    queryFn: async () => {\n      const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n      const response = await apiFetch(`/api/daily-verse?tz=${encodeURIComponent(tz)}&t=${Date.now()}`);\n      if (!response.ok) throw new Error('Failed to fetch daily verse');\n      return response.json();\n    },\n    staleTime: 0,\n    gcTime: 1000 * 60 * 60,\n  });\n\n  const handleCopyText = async () => {\n    if (!verse) return;\n\n    const text = `${verse.text}\\n\\n— ${verse.reference}`;\n    \n    try {\n      await navigator.clipboard.writeText(text);\n      toast({\n        title: t.dailyVerse.verse_copied,\n        description: t.dailyVerse.verse_copied_description,\n      });\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: t.dailyVerse.copy_failed,\n        description: t.dailyVerse.copy_failed_description,\n      });\n    }\n  };\n\n  const handleDownloadImage = async () => {\n    if (!cardRef.current || !verse) return;\n\n    try {\n      const dataUrl = await htmlToImage.toPng(cardRef.current, {\n        quality: 1.0,\n        pixelRatio: 2,\n      });\n\n      const link = document.createElement(\"a\");\n      link.download = `versiculo-do-dia-${verse.dayOfYear}.png`;\n      link.href = dataUrl;\n      link.click();\n\n      toast({\n        title: t.dailyVerse.image_downloaded,\n        description: t.dailyVerse.image_downloaded_description,\n      });\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: t.dailyVerse.download_failed,\n        description: t.dailyVerse.download_failed_description,\n      });\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"verse-hero p-10 animate-pulse\">\n        <div className=\"relative z-10 space-y-4\">\n          <div className=\"h-6 bg-muted rounded w-48 mx-auto\" />\n          <div className=\"h-24 bg-muted rounded\" />\n          <div className=\"h-4 bg-muted rounded w-32 mx-auto\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (!verse) return null;\n\n  return (\n    <motion.div \n      initial={{ opacity: 0, scale: 0.98 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ duration: 0.4 }}\n      className=\"space-y-4\"\n    >\n      <div ref={cardRef} data-testid=\"card-daily-verse\">\n        <div className=\"verse-hero p-8 sm:p-10 shadow-lg\">\n          <div className=\"relative z-10 space-y-6 text-center max-w-2xl mx-auto\">\n            <div className=\"flex items-center justify-center gap-1.5 sm:gap-2 flex-nowrap overflow-hidden\">\n              <div className=\"h-px w-6 sm:w-12 bg-gradient-to-r from-transparent to-amber-500/50\" />\n              <Quote className=\"h-3.5 w-3.5 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-400 rotate-180 flex-shrink-0\" />\n              <span className=\"text-[10px] sm:text-xs font-semibold uppercase tracking-widest text-amber-700 dark:text-amber-400 whitespace-nowrap\" data-testid=\"text-daily-verse-title\">\n                {t.dailyVerse.verse_of_the_day}\n              </span>\n              <Quote className=\"h-3.5 w-3.5 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-400 flex-shrink-0\" />\n              <div className=\"h-px w-6 sm:w-12 bg-gradient-to-l from-transparent to-amber-500/50\" />\n            </div>\n\n            {verse.theme && (\n              <p className=\"text-sm text-muted-foreground capitalize font-medium\">\n                {verse.theme}\n              </p>\n            )}\n\n            <blockquote className=\"font-serif text-xl sm:text-2xl md:text-3xl leading-relaxed text-foreground font-medium\" data-testid=\"text-verse-content\">\n              \"{verse.text}\"\n            </blockquote>\n            \n            <div className=\"flex items-center justify-center gap-3\">\n              <div className=\"h-px w-8 bg-primary/30\" />\n              <p className=\"text-base font-semibold text-primary\" data-testid=\"text-verse-reference\">\n                {verse.reference}\n              </p>\n              <div className=\"h-px w-8 bg-primary/30\" />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex justify-center gap-2 px-4 sm:px-0\">\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={handleCopyText}\n          data-testid=\"button-copy-verse\"\n          className=\"rounded-full text-xs sm:text-sm shadow-sm\"\n        >\n          <Copy className=\"w-4 h-4 mr-1.5\" />\n          <span className=\"hidden sm:inline\">{t.dailyVerse.copy}</span>\n          <span className=\"sm:hidden\">Copiar</span>\n        </Button>\n        \n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={handleDownloadImage}\n          data-testid=\"button-download-verse\"\n          className=\"rounded-full text-xs sm:text-sm shadow-sm\"\n        >\n          <Download className=\"w-4 h-4 mr-1.5\" />\n          <span className=\"hidden sm:inline\">{t.dailyVerse.download_image}</span>\n          <span className=\"sm:hidden\">Baixar</span>\n        </Button>\n\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={handleCopyText}\n          data-testid=\"button-share-verse\"\n          className=\"rounded-full text-xs sm:text-sm shadow-sm\"\n        >\n          <Share2 className=\"w-4 h-4 mr-1.5\" />\n          <span className=\"hidden sm:inline\">{t.dailyVerse.share}</span>\n          <span className=\"sm:hidden\">Compartilhar</span>\n        </Button>\n      </div>\n    </motion.div>\n  );\n}\n","path":null,"size_bytes":6170,"size_tokens":null},"client/src/pages/offline.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useOffline } from \"@/contexts/OfflineContext\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  CloudOff,\n  Cloud,\n  Trash2,\n  Download,\n  HardDrive,\n  WifiOff,\n  Wifi\n} from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function OfflinePage() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const {\n    isOnline,\n    downloadedChapters,\n    getStorageStats,\n    clearAllOffline,\n  } = useOffline();\n\n  const [stats, setStats] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadStats();\n  }, [downloadedChapters]);\n\n  const loadStats = async () => {\n    setLoading(true);\n    try {\n      const data = await getStorageStats();\n      setStats(data);\n    } catch (error) {\n      console.error(\"Error loading stats:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatSize = (bytes: number): string => {\n    if (bytes === 0) return \"0 B\";\n    const k = 1024;\n    const sizes = [\"B\", \"KB\", \"MB\", \"GB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${(bytes / Math.pow(k, i)).toFixed(2)} ${sizes[i]}`;\n  };\n\n  const handleClearAll = async () => {\n    if (window.confirm(\"Tem certeza que deseja remover todo o conteúdo offline?\")) {\n      await clearAllOffline();\n      await loadStats();\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"relative z-10 container max-w-4xl mx-auto p-4 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">{t.offline.title}</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Gerencie o conteúdo disponível para leitura sem internet\n          </p>\n        </div>\n        <Badge variant={isOnline ? \"default\" : \"destructive\"} className=\"gap-2\">\n          {isOnline ? <Wifi className=\"h-4 w-4\" /> : <WifiOff className=\"h-4 w-4\" />}\n          {isOnline ? \"Online\" : \"Offline\"}\n        </Badge>\n      </div>\n\n      {/* Storage Summary */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CloudOff className=\"h-4 w-4\" />\n              {t.offline.chapters_saved}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-chapters\">\n              {stats?.totalChapters || 0}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <HardDrive className=\"h-4 w-4\" />\n              {t.offline.space_used}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-storage-size\">\n              {formatSize(stats?.totalSize || 0)}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Download className=\"h-4 w-4\" />\n              {t.offline.books_downloaded}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-books\">\n              {stats ? Object.keys(stats.byBook).length : 0}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Downloaded Content */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle>Conteúdo Baixado</CardTitle>\n            <Button\n              variant=\"destructive\"\n              size=\"sm\"\n              onClick={handleClearAll}\n              disabled={!stats || stats.totalChapters === 0}\n              data-testid=\"button-clear-all\"\n            >\n              <Trash2 className=\"h-4 w-4 mr-2\" />\n              {t.offline.clear_all}\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {loading ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              Carregando...\n            </div>\n          ) : stats && stats.totalChapters > 0 ? (\n            <ScrollArea className=\"h-[400px]\">\n              <div className=\"space-y-4\">\n                {Object.entries(stats.byBook as Record<string, number>).map(([book, count]) => (\n                  <div key={book} className=\"space-y-2\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"font-medium\">{book.toUpperCase()}</div>\n                      <Badge variant=\"secondary\">{count} capítulos</Badge>\n                    </div>\n                    <Separator />\n                  </div>\n                ))}\n              </div>\n            </ScrollArea>\n          ) : (\n            <div className=\"text-center py-12 space-y-4\">\n              <CloudOff className=\"h-12 w-12 mx-auto text-muted-foreground\" />\n              <div className=\"text-muted-foreground\">\n                Nenhum conteúdo baixado ainda\n              </div>\n              <p className=\"text-sm text-muted-foreground\">\n                Baixe capítulos para ler sem internet na página da Bíblia\n              </p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Info Card */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base\">Como funciona?</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-2 text-sm text-muted-foreground\">\n          <p>\n            • O modo offline permite ler a Bíblia sem conexão com a internet\n          </p>\n          <p>\n            • Use o botão de nuvem na página da Bíblia para baixar capítulos\n          </p>\n          <p>\n            • O conteúdo fica salvo no seu dispositivo até você removê-lo\n          </p>\n          <p>\n            • Quando offline, o app carrega automaticamente o conteúdo salvo\n          </p>\n        </CardContent>\n      </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":7094,"size_tokens":null},"client/src/pages/donate.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Heart, Loader2, CheckCircle2, CreditCard, Shield, Lock } from \"lucide-react\";\n\nconst PRESET_AMOUNTS = [10, 25, 50, 100];\n\nconst donationFormSchema = z.object({\n  amount: z.number().min(1, \"Valor mínimo é R$ 1\").max(1000000, \"Valor máximo é R$ 1.000.000\"),\n  customAmount: z.string().optional(),\n  type: z.enum([\"one_time\", \"recurring\"]),\n  destination: z.enum([\"app_operations\", \"bible_translation\"]),\n  isAnonymous: z.boolean().default(false),\n  message: z.string().optional(),\n  currency: z.string().default(\"brl\"),\n}).refine((data) => {\n  if (data.customAmount) {\n    const val = parseFloat(data.customAmount);\n    return val >= 1;\n  }\n  return true;\n}, {\n  message: \"Valor deve ser pelo menos R$ 1\",\n  path: [\"customAmount\"]\n});\n\ntype DonationForm = z.infer<typeof donationFormSchema>;\n\nexport default function Donate() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [selectedAmount, setSelectedAmount] = useState<number | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [donationSuccess, setDonationSuccess] = useState(false);\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    if (urlParams.get('success') === 'true') {\n      setDonationSuccess(true);\n      toast({\n        title: t.donate.success_title,\n        description: t.donate.success_message,\n      });\n      window.history.replaceState({}, '', '/doar');\n    } else if (urlParams.get('canceled') === 'true') {\n      toast({\n        title: \"Doação cancelada\",\n        description: \"Você pode tentar novamente quando quiser.\",\n      });\n      window.history.replaceState({}, '', '/doar');\n    }\n  }, []);\n\n  const form = useForm<DonationForm>({\n    resolver: zodResolver(donationFormSchema),\n    defaultValues: {\n      amount: 25,\n      type: \"one_time\",\n      destination: \"app_operations\",\n      isAnonymous: false,\n      currency: \"brl\",\n    },\n  });\n\n  const donationType = form.watch(\"type\");\n  const customAmountStr = form.watch(\"customAmount\");\n\n  const createCheckoutSessionMutation = useMutation({\n    mutationFn: async (data: { amount: number; currency: string; type: string; destination: string; isAnonymous: boolean; message?: string }) => {\n      const res = await apiRequest(\"POST\", \"/api/donations/checkout\", data);\n      return res.json();\n    },\n  });\n\n  const handleSubmit = async (data: DonationForm) => {\n    try {\n      setIsProcessing(true);\n\n      const amount = selectedAmount === -1 && customAmountStr \n        ? parseFloat(customAmountStr) \n        : selectedAmount || data.amount;\n\n      if (!amount || amount < 1) {\n        toast({\n          title: \"Erro\",\n          description: \"Valor mínimo para doação é R$ 1\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      const { url, error } = await createCheckoutSessionMutation.mutateAsync({\n        amount: Math.round(amount * 100),\n        currency: data.currency,\n        type: data.type,\n        destination: data.destination,\n        isAnonymous: data.isAnonymous,\n        message: data.message,\n      });\n\n      if (error) {\n        toast({\n          title: t.donate.error_title,\n          description: error,\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      if (url) {\n        window.open(url, '_blank');\n      }\n    } catch (error: any) {\n      console.error(\"Error creating checkout session:\", error);\n      toast({\n        title: t.donate.error_title,\n        description: error.message || \"Erro ao iniciar pagamento\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  if (donationSuccess) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center p-4\">\n        <Card className=\"glass-premium hover-premium max-w-md w-full\">\n          <CardHeader className=\"text-center\">\n            <div className=\"flex justify-center mb-4\">\n              <div className=\"h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center\">\n                <CheckCircle2 className=\"h-8 w-8 text-green-600 dark:text-green-400\" />\n              </div>\n            </div>\n            <CardTitle>{t.donate.success_title}</CardTitle>\n            <CardDescription>{t.donate.success_message}</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Button \n              onClick={() => setDonationSuccess(false)} \n              className=\"w-full\"\n              data-testid=\"button-donate-another\"\n            >\n              Fazer outra doação\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden mesh-primary\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-[500px] w-[500px] rounded-full bg-gradient-to-br from-rose-500/20 via-pink-500/15 to-transparent blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-[500px] w-[500px] rounded-full bg-gradient-to-tr from-amber-500/15 via-orange-500/10 to-transparent blur-3xl\" />\n        <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-96 w-96 rounded-full bg-primary/5 blur-3xl\" />\n      </div>\n      <div className=\"relative z-10 max-w-3xl mx-auto space-y-8 p-4 sm:p-6 md:p-8\">\n        <Card className=\"border-none bg-gradient-to-br from-rose-500/10 via-pink-500/5 to-amber-500/10 shadow-2xl rounded-[2.5rem] overflow-hidden relative\">\n          <div className=\"absolute top-0 right-0 w-40 h-40 bg-gradient-to-bl from-rose-500/20 to-transparent rounded-bl-full\" />\n          <div className=\"absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-amber-500/20 to-transparent rounded-tr-full\" />\n          <CardContent className=\"p-8 md:p-10 text-center relative z-10\">\n            <div className=\"flex justify-center mb-6\">\n              <div className=\"h-20 w-20 rounded-full bg-gradient-to-br from-rose-500 to-pink-600 flex items-center justify-center shadow-2xl shadow-rose-500/40\">\n                <Heart className=\"h-10 w-10 text-white fill-white\" />\n              </div>\n            </div>\n            <h1 className=\"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-rose-600 via-pink-600 to-amber-600 bg-clip-text text-transparent\">{t.donate.title}</h1>\n            <p className=\"text-muted-foreground mt-4 text-lg max-w-xl mx-auto\">\n              Faça parte dessa missão. <span className=\"font-semibold text-foreground\">Doe agora</span> e transforme vidas através da Palavra!\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"rounded-[2rem] border-none bg-gradient-to-r from-emerald-500/10 via-green-500/5 to-teal-500/10 shadow-lg overflow-hidden relative\">\n          <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-green-500/15 to-transparent rounded-bl-full\" />\n          <CardContent className=\"p-6 relative z-10\">\n            <div className=\"flex items-start gap-4\">\n              <div className=\"p-3 rounded-xl bg-gradient-to-br from-emerald-500 to-green-600 shadow-lg shadow-green-500/30 flex-shrink-0\">\n                <Shield className=\"h-6 w-6 text-white\" />\n              </div>\n              <div>\n                <p className=\"font-semibold text-foreground flex items-center gap-2\">\n                  <Lock className=\"h-4 w-4 text-green-600\" />\n                  Pagamento 100% Seguro\n                </p>\n                <p className=\"text-sm text-muted-foreground mt-2\">\n                  Seus dados de cartão <strong className=\"text-foreground\">nunca passam pelo nosso servidor</strong>. O pagamento é processado diretamente pelo Stripe.\n                </p>\n                <div className=\"grid grid-cols-2 gap-2 mt-3\">\n                  <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                    <CheckCircle2 className=\"h-3 w-3 text-green-500\" />\n                    <span>Criptografia SSL/TLS</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                    <CheckCircle2 className=\"h-3 w-3 text-green-500\" />\n                    <span>PCI DSS Nível 1</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\n          <Card data-testid=\"card-donation-form\" className=\"rounded-[2rem] border-none bg-gradient-to-br from-primary/5 via-card to-purple-500/5 shadow-xl overflow-hidden relative\">\n            <div className=\"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-primary/10 to-transparent rounded-bl-full\" />\n            <CardHeader className=\"relative z-10\">\n              <CardTitle className=\"flex items-center gap-3\">\n                <div className=\"p-2 rounded-lg bg-gradient-to-br from-primary to-purple-600 shadow-md\">\n                  <CreditCard className=\"h-4 w-4 text-white\" />\n                </div>\n                {t.donate.amount}\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <div className=\"space-y-3\">\n                <Label>{t.donate.one_time} / {t.donate.recurring}</Label>\n                <RadioGroup\n                  value={donationType}\n                  onValueChange={(value) => form.setValue(\"type\", value as \"one_time\" | \"recurring\")}\n                  className=\"flex flex-wrap gap-4 sm:gap-6\"\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"one_time\" id=\"one_time\" data-testid=\"radio-onetime\" />\n                    <Label htmlFor=\"one_time\" className=\"font-normal cursor-pointer\">\n                      {t.donate.one_time}\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"recurring\" id=\"recurring\" data-testid=\"radio-recurring\" />\n                    <Label htmlFor=\"recurring\" className=\"font-normal cursor-pointer\">\n                      {t.donate.monthly}\n                    </Label>\n                  </div>\n                </RadioGroup>\n              </div>\n\n              <div className=\"space-y-3\">\n                <Label>Escolha um valor</Label>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3\">\n                  {PRESET_AMOUNTS.map((amount) => (\n                    <Button\n                      key={amount}\n                      type=\"button\"\n                      variant={selectedAmount === amount ? \"default\" : \"outline\"}\n                      onClick={() => {\n                        setSelectedAmount(amount);\n                        form.setValue(\"amount\", amount);\n                      }}\n                      data-testid={`button-amount-${amount}`}\n                      className=\"h-12 sm:h-16 text-sm sm:text-base\"\n                    >\n                      R$ {amount}\n                    </Button>\n                  ))}\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Button\n                    type=\"button\"\n                    variant={selectedAmount === -1 ? \"default\" : \"outline\"}\n                    onClick={() => setSelectedAmount(-1)}\n                    data-testid=\"button-custom-amount\"\n                    className=\"w-full\"\n                  >\n                    {t.donate.custom_amount}\n                  </Button>\n                  \n                  {selectedAmount === -1 && (\n                    <div className=\"space-y-1\">\n                      <Input\n                        type=\"number\"\n                        placeholder=\"Digite o valor\"\n                        min=\"1\"\n                        step=\"0.01\"\n                        {...form.register(\"customAmount\")}\n                        data-testid=\"input-custom-amount\"\n                      />\n                      <p className=\"text-xs text-muted-foreground\">\n                        Sua generosidade não tem limites. Escolha o valor que sentir no coração (mínimo R$ 1).\n                      </p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <Label htmlFor=\"destination\">{t.donate.destination}</Label>\n                <Select\n                  value={form.watch(\"destination\")}\n                  onValueChange={(value) => form.setValue(\"destination\", value as \"app_operations\" | \"bible_translation\")}\n                >\n                  <SelectTrigger data-testid=\"select-destination\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"app_operations\" data-testid=\"option-app-operations\">\n                      {t.donate.app_operations}\n                    </SelectItem>\n                    <SelectItem value=\"bible_translation\" data-testid=\"option-bible-translation\">\n                      {t.donate.bible_translation}\n                    </SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"anonymous\"\n                  checked={form.watch(\"isAnonymous\")}\n                  onCheckedChange={(checked) => form.setValue(\"isAnonymous\", checked as boolean)}\n                  data-testid=\"checkbox-anonymous\"\n                />\n                <Label htmlFor=\"anonymous\" className=\"font-normal cursor-pointer\">\n                  {t.donate.anonymous}\n                </Label>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"message\">{t.donate.message}</Label>\n                <Textarea\n                  id=\"message\"\n                  placeholder={t.donate.message_placeholder}\n                  {...form.register(\"message\")}\n                  data-testid=\"textarea-message\"\n                  className=\"resize-none\"\n                  rows={3}\n                />\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={isProcessing || !selectedAmount}\n                data-testid=\"button-proceed-to-payment\"\n              >\n                {isProcessing ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Preparando pagamento seguro...\n                  </>\n                ) : (\n                  <>\n                    <CreditCard className=\"mr-2 h-4 w-4\" />\n                    Doar com Cartão\n                  </>\n                )}\n              </Button>\n              \n              <p className=\"text-center text-xs text-muted-foreground flex items-center justify-center gap-1\">\n                <Lock className=\"h-3 w-3\" />\n                Você será redirecionado para a página segura do Stripe\n              </p>\n            </CardContent>\n          </Card>\n        </form>\n\n        <Card className=\"glass-premium hover-premium\">\n          <CardHeader>\n            <CardTitle className=\"text-lg\">Sobre as doações</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4 text-sm text-muted-foreground\">\n            <p>\n              <strong>Operações do aplicativo:</strong> Sua doação ajuda a manter os servidores, desenvolvimento de novos recursos e melhorias contínuas.\n            </p>\n            <p>\n              <strong>Tradução bíblica:</strong> Apoia projetos de tradução da Bíblia para idiomas e comunidades que ainda não têm acesso às Escrituras.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":16831,"size_tokens":null},"client/src/lib/offline/offlineStorage.ts":{"content":"// IndexedDB wrapper for offline Bible content storage with compression\n\nimport { compressData, decompressData, calculateCompressionRatio } from './syncUtils';\n\ninterface OfflineChapter {\n  book: string;\n  chapter: number;\n  version: string;\n  content: any; // Chapter data from API\n  compressedContent?: Uint8Array; // Compressed content for storage efficiency\n  isCompressed?: boolean;\n  downloadedAt: number;\n  size: number;\n  originalSize?: number; // Original size before compression\n}\n\nclass OfflineStorage {\n  private dbName = \"biblia-plus-offline\";\n  private storeName = \"chapters\";\n  private db: IDBDatabase | null = null;\n\n  async init(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const request = indexedDB.open(this.dbName, 1);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => {\n        this.db = request.result;\n        resolve();\n      };\n\n      request.onupgradeneeded = (event) => {\n        const db = (event.target as IDBOpenDBRequest).result;\n        \n        if (!db.objectStoreNames.contains(this.storeName)) {\n          const objectStore = db.createObjectStore(this.storeName, { \n            keyPath: [\"book\", \"chapter\", \"version\"] \n          });\n          \n          // Create indexes for efficient querying\n          objectStore.createIndex(\"book\", \"book\", { unique: false });\n          objectStore.createIndex(\"version\", \"version\", { unique: false });\n          objectStore.createIndex(\"downloadedAt\", \"downloadedAt\", { unique: false });\n        }\n      };\n    });\n  }\n\n  async saveChapter(chapter: OfflineChapter, enableCompression = true): Promise<void> {\n    if (!this.db) await this.init();\n    \n    let chapterToSave = { ...chapter };\n    \n    if (enableCompression && chapter.content) {\n      try {\n        const contentString = JSON.stringify(chapter.content);\n        const originalSize = new TextEncoder().encode(contentString).length;\n        const compressed = await compressData(contentString);\n        \n        chapterToSave = {\n          ...chapter,\n          compressedContent: compressed,\n          isCompressed: true,\n          originalSize,\n          size: compressed.length,\n          content: null,\n        };\n        \n        const ratio = calculateCompressionRatio(originalSize, compressed.length);\n        console.log(`[OfflineStorage] Compressed ${chapter.book} ${chapter.chapter}: ${ratio}% saved`);\n      } catch (error) {\n        console.warn('[OfflineStorage] Compression failed, saving uncompressed:', error);\n      }\n    }\n    \n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([this.storeName], \"readwrite\");\n      const objectStore = transaction.objectStore(this.storeName);\n      const request = objectStore.put(chapterToSave);\n\n      request.onsuccess = () => resolve();\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async getChapter(book: string, chapter: number, version: string): Promise<OfflineChapter | null> {\n    if (!this.db) await this.init();\n    \n    return new Promise(async (resolve, reject) => {\n      const transaction = this.db!.transaction([this.storeName], \"readonly\");\n      const objectStore = transaction.objectStore(this.storeName);\n      const request = objectStore.get([book, chapter, version]);\n\n      request.onsuccess = async () => {\n        const result = request.result;\n        if (!result) {\n          resolve(null);\n          return;\n        }\n        \n        if (result.isCompressed && result.compressedContent) {\n          try {\n            const decompressed = await decompressData(result.compressedContent);\n            result.content = JSON.parse(decompressed);\n            delete result.compressedContent;\n          } catch (error) {\n            console.error('[OfflineStorage] Decompression failed:', error);\n          }\n        }\n        \n        resolve(result);\n      };\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async getAllChapters(decompressContent = true): Promise<OfflineChapter[]> {\n    if (!this.db) await this.init();\n    \n    return new Promise(async (resolve, reject) => {\n      const transaction = this.db!.transaction([this.storeName], \"readonly\");\n      const objectStore = transaction.objectStore(this.storeName);\n      const request = objectStore.getAll();\n\n      request.onsuccess = async () => {\n        let chapters = request.result;\n        \n        if (decompressContent) {\n          chapters = await Promise.all(chapters.map(async (ch: OfflineChapter) => {\n            if (ch.isCompressed && ch.compressedContent) {\n              try {\n                const decompressed = await decompressData(ch.compressedContent);\n                return { ...ch, content: JSON.parse(decompressed), compressedContent: undefined };\n              } catch (error) {\n                console.error('[OfflineStorage] Decompression failed for:', ch.book, ch.chapter);\n                return ch;\n              }\n            }\n            return ch;\n          }));\n        }\n        \n        resolve(chapters);\n      };\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async getBookChapters(book: string, version: string, decompressContent = true): Promise<OfflineChapter[]> {\n    if (!this.db) await this.init();\n    \n    return new Promise(async (resolve, reject) => {\n      const transaction = this.db!.transaction([this.storeName], \"readonly\");\n      const objectStore = transaction.objectStore(this.storeName);\n      const request = objectStore.getAll();\n\n      request.onsuccess = async () => {\n        let chapters = request.result.filter(\n          (ch: OfflineChapter) => ch.book === book && ch.version === version\n        );\n        \n        if (decompressContent) {\n          chapters = await Promise.all(chapters.map(async (ch: OfflineChapter) => {\n            if (ch.isCompressed && ch.compressedContent) {\n              try {\n                const decompressed = await decompressData(ch.compressedContent);\n                return { ...ch, content: JSON.parse(decompressed), compressedContent: undefined };\n              } catch (error) {\n                console.error('[OfflineStorage] Decompression failed for:', ch.book, ch.chapter);\n                return ch;\n              }\n            }\n            return ch;\n          }));\n        }\n        \n        resolve(chapters);\n      };\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async deleteChapter(book: string, chapter: number, version: string): Promise<void> {\n    if (!this.db) await this.init();\n    \n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([this.storeName], \"readwrite\");\n      const objectStore = transaction.objectStore(this.storeName);\n      const request = objectStore.delete([book, chapter, version]);\n\n      request.onsuccess = () => resolve();\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async deleteBook(book: string, version: string): Promise<void> {\n    if (!this.db) await this.init();\n    \n    const chapters = await this.getBookChapters(book, version);\n    \n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([this.storeName], \"readwrite\");\n      const objectStore = transaction.objectStore(this.storeName);\n\n      let deletedCount = 0;\n      chapters.forEach((ch) => {\n        const request = objectStore.delete([ch.book, ch.chapter, ch.version]);\n        request.onsuccess = () => {\n          deletedCount++;\n          if (deletedCount === chapters.length) {\n            resolve();\n          }\n        };\n        request.onerror = () => reject(request.error);\n      });\n\n      if (chapters.length === 0) {\n        resolve();\n      }\n    });\n  }\n\n  async getTotalSize(): Promise<number> {\n    const chapters = await this.getAllChapters();\n    return chapters.reduce((total, ch) => total + (ch.size || 0), 0);\n  }\n\n  async getStorageStats(): Promise<{\n    totalChapters: number;\n    totalSize: number;\n    originalSize: number;\n    compressionSavings: number;\n    compressionRatio: number;\n    byBook: Record<string, number>;\n    byVersion: Record<string, number>;\n  }> {\n    const chapters = await this.getAllChapters();\n    \n    let totalCompressed = 0;\n    let totalOriginal = 0;\n    \n    chapters.forEach((ch) => {\n      totalCompressed += ch.size || 0;\n      totalOriginal += ch.originalSize || ch.size || 0;\n    });\n    \n    const stats = {\n      totalChapters: chapters.length,\n      totalSize: totalCompressed,\n      originalSize: totalOriginal,\n      compressionSavings: totalOriginal - totalCompressed,\n      compressionRatio: totalOriginal > 0 ? Math.round((1 - totalCompressed / totalOriginal) * 100) : 0,\n      byBook: {} as Record<string, number>,\n      byVersion: {} as Record<string, number>,\n    };\n\n    chapters.forEach((ch) => {\n      stats.byBook[ch.book] = (stats.byBook[ch.book] || 0) + 1;\n      stats.byVersion[ch.version] = (stats.byVersion[ch.version] || 0) + 1;\n    });\n\n    return stats;\n  }\n\n  async clearAll(): Promise<void> {\n    if (!this.db) await this.init();\n    \n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([this.storeName], \"readwrite\");\n      const objectStore = transaction.objectStore(this.storeName);\n      const request = objectStore.clear();\n\n      request.onsuccess = () => resolve();\n      request.onerror = () => reject(request.error);\n    });\n  }\n}\n\nexport const offlineStorage = new OfflineStorage();\nexport type { OfflineChapter };\n","path":null,"size_bytes":9526,"size_tokens":null},"server/migrations.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { db } from \"./db\";\n\nexport async function runMigrations() {\n  try {\n    console.log(\"Running database migrations...\");\n    \n    // Add missing columns to bookmarks table\n    await db.execute(sql`\n      ALTER TABLE bookmarks \n      ADD COLUMN IF NOT EXISTS version VARCHAR DEFAULT 'nvi'\n    `);\n    \n    await db.execute(sql`\n      ALTER TABLE bookmarks \n      ADD COLUMN IF NOT EXISTS note TEXT\n    `);\n    \n    await db.execute(sql`\n      ALTER TABLE bookmarks \n      ADD COLUMN IF NOT EXISTS tags TEXT[]\n    `);\n\n    // Add missing columns to reading_plans table\n    await db.execute(sql`\n      ALTER TABLE reading_plans \n      ADD COLUMN IF NOT EXISTS total_days INTEGER\n    `);\n\n    await db.execute(sql`\n      ALTER TABLE reading_plans \n      ADD COLUMN IF NOT EXISTS started_at TIMESTAMP DEFAULT NOW()\n    `);\n\n    await db.execute(sql`\n      ALTER TABLE reading_plans \n      ADD COLUMN IF NOT EXISTS completed_at TIMESTAMP\n    `);\n\n    // Update existing plans with total_days from schedule length\n    await db.execute(sql`\n      UPDATE reading_plans \n      SET total_days = jsonb_array_length(schedule) \n      WHERE total_days IS NULL\n    `);\n\n    // Create offline_content table for offline mode\n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS offline_content (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        user_id VARCHAR NOT NULL,\n        book VARCHAR NOT NULL,\n        chapter INTEGER NOT NULL,\n        version VARCHAR NOT NULL,\n        size INTEGER DEFAULT 0,\n        verse_count INTEGER DEFAULT 0,\n        downloaded_at TIMESTAMP DEFAULT NOW(),\n        last_accessed_at TIMESTAMP DEFAULT NOW(),\n        expires_at TIMESTAMP,\n        created_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n\n    // Create index for faster offline lookups\n    await db.execute(sql`\n      CREATE INDEX IF NOT EXISTS idx_offline_content_user_book \n      ON offline_content(user_id, book, chapter, version)\n    `);\n\n    // Create daily_verses table for Versículo do Dia feature\n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS daily_verses (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        day_of_year INTEGER NOT NULL UNIQUE,\n        book VARCHAR NOT NULL,\n        chapter INTEGER NOT NULL,\n        verse_number INTEGER NOT NULL,\n        version VARCHAR DEFAULT 'nvi',\n        \"text\" TEXT NOT NULL,\n        reference VARCHAR NOT NULL,\n        theme VARCHAR,\n        created_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n\n    // Create donations table for Stripe integration\n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS donations (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        user_id VARCHAR NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n        amount INTEGER NOT NULL,\n        currency VARCHAR DEFAULT 'brl' NOT NULL,\n        \"type\" VARCHAR NOT NULL,\n        frequency VARCHAR,\n        destination VARCHAR DEFAULT 'app_operations' NOT NULL,\n        stripe_payment_intent_id VARCHAR,\n        stripe_customer_id VARCHAR,\n        stripe_subscription_id VARCHAR,\n        status VARCHAR DEFAULT 'pending' NOT NULL,\n        is_anonymous BOOLEAN DEFAULT false,\n        message TEXT,\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n\n    // Add password_hash column to users table for email/password auth\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS password_hash VARCHAR(255)\n    `);\n\n    // Add subscription columns to users table\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS subscription_plan VARCHAR(20) DEFAULT 'free'\n    `);\n\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS stripe_customer_id VARCHAR(255)\n    `);\n\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS stripe_subscription_id VARCHAR(255)\n    `);\n\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS ai_requests_today INTEGER DEFAULT 0\n    `);\n\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS ai_requests_reset_at TIMESTAMP\n    `);\n\n    // Add total AI requests count for free users (20 questions total limit)\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS ai_requests_count INTEGER DEFAULT 0\n    `);\n    \n    // Ensure no NULL values in ai_requests_count (backfill existing users)\n    await db.execute(sql`\n      UPDATE users SET ai_requests_count = 0 WHERE ai_requests_count IS NULL\n    `);\n\n    // Add AI spending tracking columns for 25% budget limit\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS ai_spend_month NUMERIC(10, 4) DEFAULT 0\n    `);\n\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS ai_spend_year NUMERIC(10, 4) DEFAULT 0\n    `);\n\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS ai_monthly_budget_limit NUMERIC(10, 4) DEFAULT 0\n    `);\n\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS ai_annual_budget_limit NUMERIC(10, 4) DEFAULT 0\n    `);\n\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS ai_spend_month_reset_at TIMESTAMP\n    `);\n\n    await db.execute(sql`\n      ALTER TABLE users \n      ADD COLUMN IF NOT EXISTS ai_spend_year_reset_at TIMESTAMP\n    `);\n\n    // Create audio_cache table for caching generated TTS audio\n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS audio_cache (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        language VARCHAR(10) NOT NULL,\n        version VARCHAR(20) NOT NULL,\n        book VARCHAR(50) NOT NULL,\n        chapter INTEGER NOT NULL,\n        verse INTEGER,\n        audio_data TEXT NOT NULL,\n        created_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n\n    // Create index for faster audio cache lookups\n    await db.execute(sql`\n      CREATE INDEX IF NOT EXISTS idx_audio_cache \n      ON audio_cache(language, version, book, chapter, verse)\n    `);\n\n    // Add missing category column to podcasts table\n    await db.execute(sql`\n      ALTER TABLE podcasts \n      ADD COLUMN IF NOT EXISTS category VARCHAR(100)\n    `);\n\n    // Add creator_id and bible reference columns to podcasts\n    await db.execute(sql`\n      ALTER TABLE podcasts \n      ADD COLUMN IF NOT EXISTS creator_id VARCHAR REFERENCES users(id) ON DELETE SET NULL,\n      ADD COLUMN IF NOT EXISTS bible_book VARCHAR(100),\n      ADD COLUMN IF NOT EXISTS bible_chapter INTEGER\n    `);\n\n    // Seed podcast data with sample episodes\n    await db.execute(sql`\n      INSERT INTO podcasts (id, title, description, author, category, language, image_url, total_episodes, is_active, access_level, episodes, created_at, updated_at) \n      SELECT 'pod-1', 'Seara News', 'Notícias e comentários cristãos semanais', 'Seara News Team', 'Notícias', 'pt', 'https://images.unsplash.com/photo-1478737270239-2f02b77fc618?w=400&h=400&fit=crop', 3, true, 'free', \n      '[{\"id\":\"ep-1\",\"title\":\"Episódio 1: Boas Novas\",\"description\":\"Introdução ao podcast\",\"audioData\":\"\",\"duration\":180,\"publishedAt\":\"2024-01-01\"},{\"id\":\"ep-2\",\"title\":\"Episódio 2: Fé e Esperança\",\"description\":\"Mensagem de esperança\",\"audioData\":\"\",\"duration\":240,\"publishedAt\":\"2024-01-08\"}]'::jsonb,\n      NOW(), NOW()\n      WHERE NOT EXISTS (SELECT 1 FROM podcasts WHERE id = 'pod-1')\n    `);\n\n    await db.execute(sql`\n      INSERT INTO podcasts (id, title, description, author, category, language, image_url, total_episodes, is_active, access_level, episodes, created_at, updated_at) \n      SELECT 'pod-2', 'Palavra de Deus', 'Reflexões diárias sobre a Palavra de Deus', 'Pastor João', 'Estudos', 'pt', 'https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=400&h=400&fit=crop', 2, true, 'free',\n      '[{\"id\":\"ep-3\",\"title\":\"Gênesis 1: A Criação\",\"description\":\"Estudo sobre a criação\",\"audioData\":\"\",\"duration\":300,\"publishedAt\":\"2024-01-15\"}]'::jsonb,\n      NOW(), NOW()\n      WHERE NOT EXISTS (SELECT 1 FROM podcasts WHERE id = 'pod-2')\n    `);\n\n    await db.execute(sql`\n      INSERT INTO podcasts (id, title, description, author, category, language, image_url, total_episodes, is_active, access_level, episodes, created_at, updated_at) \n      SELECT 'pod-3', 'Estudos Bíblicos', 'Análise profunda de passagens e contexto histórico', 'Dra. Maria Silva', 'Teologia', 'pt', 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=400&fit=crop', 2, true, 'free',\n      '[{\"id\":\"ep-4\",\"title\":\"O Evangelho de João\",\"description\":\"Estudo teológico profundo\",\"audioData\":\"\",\"duration\":360,\"publishedAt\":\"2024-01-22\"}]'::jsonb,\n      NOW(), NOW()\n      WHERE NOT EXISTS (SELECT 1 FROM podcasts WHERE id = 'pod-3')\n    `);\n    \n    // Create group_invites table for group invitations\n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS group_invites (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        group_id VARCHAR NOT NULL REFERENCES groups(id) ON DELETE CASCADE,\n        invited_email VARCHAR(255),\n        invited_phone VARCHAR(20),\n        invite_code VARCHAR(50) UNIQUE,\n        invited_by VARCHAR NOT NULL REFERENCES users(id),\n        status VARCHAR(20) DEFAULT 'pending',\n        expires_at TIMESTAMP,\n        created_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n\n    // Create group_messages table for group discussions\n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS group_messages (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        group_id VARCHAR NOT NULL REFERENCES groups(id) ON DELETE CASCADE,\n        user_id VARCHAR NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n        content TEXT NOT NULL,\n        reply_to_id VARCHAR,\n        verse_reference TEXT,\n        verse_text TEXT,\n        message_type VARCHAR(20) DEFAULT 'text',\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n\n    // Create index for faster message lookups\n    await db.execute(sql`\n      CREATE INDEX IF NOT EXISTS idx_group_messages_group \n      ON group_messages(group_id, created_at DESC)\n    `);\n\n    // Create group_discussions table for AI-structured Q&A sessions\n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS group_discussions (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        group_id VARCHAR NOT NULL REFERENCES groups(id) ON DELETE CASCADE,\n        created_by_id VARCHAR NOT NULL REFERENCES users(id),\n        title TEXT NOT NULL,\n        description TEXT,\n        question TEXT NOT NULL,\n        verse_reference TEXT,\n        verse_text TEXT,\n        ai_synthesis TEXT,\n        synthesized_at TIMESTAMP,\n        status VARCHAR(20) DEFAULT 'open',\n        allow_anonymous BOOLEAN DEFAULT false,\n        deadline TIMESTAMP,\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n\n    // Create group_answers table for member responses\n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS group_answers (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        discussion_id VARCHAR NOT NULL REFERENCES group_discussions(id) ON DELETE CASCADE,\n        user_id VARCHAR NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n        content TEXT NOT NULL,\n        verse_reference TEXT,\n        review_status VARCHAR(20) DEFAULT 'pending',\n        review_comment TEXT,\n        reviewed_by_id VARCHAR REFERENCES users(id),\n        reviewed_at TIMESTAMP,\n        is_anonymous BOOLEAN DEFAULT false,\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n\n    // Create indexes for faster lookups\n    await db.execute(sql`\n      CREATE INDEX IF NOT EXISTS idx_group_discussions_group \n      ON group_discussions(group_id, created_at DESC)\n    `);\n\n    await db.execute(sql`\n      CREATE INDEX IF NOT EXISTS idx_group_answers_discussion \n      ON group_answers(discussion_id, created_at DESC)\n    `);\n\n    // Create email_otp table for OTP verification\n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS email_otp (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        email VARCHAR(255) NOT NULL,\n        code VARCHAR(6) NOT NULL,\n        expires_at TIMESTAMP NOT NULL,\n        verified BOOLEAN DEFAULT false,\n        created_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n\n    await db.execute(sql`\n      CREATE INDEX IF NOT EXISTS idx_email_otp_email \n      ON email_otp(email)\n    `);\n\n    // Create feedback table for NPS and user feedback\n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS feedback (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        user_id VARCHAR REFERENCES users(id) ON DELETE CASCADE,\n        type VARCHAR(20) NOT NULL,\n        score INTEGER,\n        comment TEXT,\n        metadata JSONB DEFAULT '{}',\n        created_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n\n    // Add metadata column if it doesn't exist (for existing tables)\n    await db.execute(sql`\n      ALTER TABLE feedback \n      ADD COLUMN IF NOT EXISTS metadata JSONB DEFAULT '{}'\n    `);\n\n    await db.execute(sql`\n      CREATE INDEX IF NOT EXISTS idx_feedback_user \n      ON feedback(user_id)\n    `);\n\n    console.log(\"Migrations completed successfully!\");\n  } catch (error) {\n    console.error(\"Migration error:\", error);\n    // Don't throw - let the app continue even if migrations fail\n  }\n}\n","path":null,"size_bytes":13450,"size_tokens":null},"client/src/contexts/OfflineContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, type ReactNode } from \"react\";\nimport { offlineStorage, type OfflineChapter } from \"@/lib/offline/offlineStorage\";\nimport { bibleSqlite } from \"@/lib/offline/bibleSqlite\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { apiFetch } from \"@/lib/config\";\n\ninterface OfflineContextType {\n  isOnline: boolean;\n  downloadedChapters: Set<string>;\n  isDownloading: boolean;\n  downloadProgress: number;\n  sqliteReady: boolean;\n  downloadChapter: (book: string, chapter: number, version: string) => Promise<void>;\n  downloadBook: (book: string, version: string, totalChapters: number) => Promise<void>;\n  deleteChapter: (book: string, chapter: number, version: string) => Promise<void>;\n  deleteBook: (book: string, version: string) => Promise<void>;\n  isChapterOffline: (book: string, chapter: number, version: string) => boolean;\n  getOfflineChapter: (book: string, chapter: number, version: string) => Promise<any | null>;\n  getSqliteChapter: (book: string, chapter: number) => Promise<any | null>;\n  getSqliteBooks: () => Promise<any[]>;\n  clearAllOffline: () => Promise<void>;\n  getStorageStats: () => Promise<any>;\n}\n\nconst OfflineContext = createContext<OfflineContextType | undefined>(undefined);\n\nexport function useOffline() {\n  const context = useContext(OfflineContext);\n  if (!context) {\n    throw new Error(\"useOffline must be used within OfflineProvider\");\n  }\n  return context;\n}\n\nexport function OfflineProvider({ children }: { children: ReactNode }) {\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n  const [downloadedChapters, setDownloadedChapters] = useState<Set<string>>(new Set());\n  const [isDownloading, setIsDownloading] = useState(false);\n  const [downloadProgress, setDownloadProgress] = useState(0);\n  const [sqliteReady, setSqliteReady] = useState(false);\n  const { toast } = useToast();\n\n  // Initialize offline storage and SQLite database\n  useEffect(() => {\n    async function init() {\n      try {\n        await offlineStorage.init();\n        const chapters = await offlineStorage.getAllChapters();\n        const keys = new Set(chapters.map(ch => `${ch.book}-${ch.chapter}-${ch.version}`));\n        setDownloadedChapters(keys);\n        \n        // Initialize SQLite database lazily or in background to not block initial render\n        // Moving to an even more deferred approach with requestIdleCallback if available\n        const deferInit = () => {\n          setTimeout(async () => {\n            try {\n              const ready = await bibleSqlite.init();\n              setSqliteReady(ready);\n              if (ready) {\n                console.log(\"[OfflineProvider] SQLite Bible database ready\");\n              }\n            } catch (e) {\n              console.error(\"Error initializing SQLite in background:\", e);\n            }\n          }, 3000); // Increased delay to 3 seconds to ensure login screen shows first\n        };\n\n        if ('requestIdleCallback' in window) {\n          (window as any).requestIdleCallback(deferInit);\n        } else {\n          deferInit();\n        }\n      } catch (error) {\n        console.error(\"Error initializing offline storage:\", error);\n      }\n    }\n    init();\n  }, []);\n\n  // Monitor online/offline status\n  useEffect(() => {\n    const handleOnline = () => {\n      setIsOnline(true);\n      toast({\n        title: \"Conectado\",\n        description: \"Conexão com a internet restabelecida\",\n      });\n    };\n\n    const handleOffline = () => {\n      setIsOnline(false);\n      toast({\n        title: \"Modo Offline\",\n        description: \"Você pode continuar lendo o conteúdo baixado\",\n        variant: \"destructive\",\n      });\n    };\n\n    window.addEventListener(\"online\", handleOnline);\n    window.addEventListener(\"offline\", handleOffline);\n\n    return () => {\n      window.removeEventListener(\"online\", handleOnline);\n      window.removeEventListener(\"offline\", handleOffline);\n    };\n  }, [toast]);\n\n  const downloadChapter = async (book: string, chapter: number, version: string) => {\n    try {\n      setIsDownloading(true);\n      \n      // Fetch chapter data from API\n      const response = await apiFetch(`/api/bible/${version}/${book}/${chapter}`);\n      if (!response.ok) {\n        throw new Error(\"Falha ao baixar capítulo\");\n      }\n\n      const data = await response.json();\n      const content = JSON.stringify(data);\n      const size = new Blob([content]).size;\n      const verseCount = data.verses?.length || 0;\n\n      // Save to IndexedDB\n      await offlineStorage.saveChapter({\n        book,\n        chapter,\n        version,\n        content: data,\n        downloadedAt: Date.now(),\n        size,\n      });\n\n      // Sync with backend\n      try {\n        await apiRequest(\"POST\", \"/api/offline/content\", {\n          book,\n          chapter,\n          version,\n          size,\n          verseCount,\n        });\n      } catch (backendError) {\n        console.error(\"Failed to sync with backend:\", backendError);\n        // Continue even if backend sync fails\n      }\n\n      // Update state\n      const key = `${book}-${chapter}-${version}`;\n      setDownloadedChapters(prev => new Set(prev).add(key));\n\n      toast({\n        title: \"Capítulo baixado!\",\n        description: `${book} ${chapter} disponível offline`,\n      });\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao baixar\",\n        description: error.message || \"Não foi possível baixar o capítulo\",\n      });\n    } finally {\n      setIsDownloading(false);\n    }\n  };\n\n  const downloadBook = async (book: string, version: string, totalChapters: number) => {\n    try {\n      setIsDownloading(true);\n      setDownloadProgress(0);\n\n      for (let chapter = 1; chapter <= totalChapters; chapter++) {\n        await downloadChapter(book, chapter, version);\n        setDownloadProgress(Math.round((chapter / totalChapters) * 100));\n      }\n\n      toast({\n        title: \"Livro completo baixado!\",\n        description: `${book} disponível offline`,\n      });\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao baixar livro\",\n        description: error.message,\n      });\n    } finally {\n      setIsDownloading(false);\n      setDownloadProgress(0);\n    }\n  };\n\n  const deleteChapter = async (book: string, chapter: number, version: string) => {\n    try {\n      await offlineStorage.deleteChapter(book, chapter, version);\n      \n      const key = `${book}-${chapter}-${version}`;\n      setDownloadedChapters(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(key);\n        return newSet;\n      });\n\n      toast({\n        title: \"Capítulo removido\",\n        description: \"Conteúdo offline excluído\",\n      });\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao remover\",\n        description: error.message,\n      });\n    }\n  };\n\n  const deleteBook = async (book: string, version: string) => {\n    try {\n      await offlineStorage.deleteBook(book, version);\n      \n      // Remove all chapters of this book from state\n      setDownloadedChapters(prev => {\n        const newSet = new Set(prev);\n        Array.from(prev).forEach(key => {\n          if (key.startsWith(`${book}-`) && key.endsWith(`-${version}`)) {\n            newSet.delete(key);\n          }\n        });\n        return newSet;\n      });\n\n      toast({\n        title: \"Livro removido\",\n        description: \"Todos os capítulos excluídos\",\n      });\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao remover livro\",\n        description: error.message,\n      });\n    }\n  };\n\n  const isChapterOffline = (book: string, chapter: number, version: string): boolean => {\n    const key = `${book}-${chapter}-${version}`;\n    return downloadedChapters.has(key);\n  };\n\n  const getOfflineChapter = async (book: string, chapter: number, version: string) => {\n    try {\n      // First try IndexedDB (user-downloaded content) - version specific\n      const chapterData = await offlineStorage.getChapter(book, chapter, version);\n      if (chapterData?.content) {\n        console.log(`[Offline] Loaded ${book} ${chapter} from IndexedDB`);\n        return chapterData.content;\n      }\n      \n      // Fallback to SQLite database (built-in NVI Bible, works for any requested version as fallback)\n      // SQLite always returns NVI content when offline, regardless of requested version\n      try {\n        // Initialize SQLite if not ready\n        if (!sqliteReady) {\n          const ready = await bibleSqlite.init();\n          if (ready) {\n            setSqliteReady(true);\n          }\n        }\n        \n        if (bibleSqlite.isReady()) {\n          const sqliteData = await bibleSqlite.getChapter(book, chapter);\n          if (sqliteData) {\n            console.log(`[Offline] Loaded ${book} ${chapter} from SQLite (NVI fallback)`);\n            // Format to match API response structure exactly:\n            // {\"book\":{\"name\":\"...\",\"abbrev\":\"...\"},\"chapter\":{\"number\":N},\"verses\":[...]}\n            return {\n              book: { \n                name: sqliteData.bookName, \n                abbrev: sqliteData.book // String, not object (matches API)\n              },\n              chapter: { \n                number: sqliteData.chapter\n              },\n              verses: sqliteData.verses.map(v => ({ number: v.verse, text: v.text })),\n              totalChapters: sqliteData.totalChapters,\n            };\n          }\n        }\n      } catch (sqliteError) {\n        console.error(\"[Offline] SQLite fallback failed:\", sqliteError);\n      }\n      \n      return null;\n    } catch (error) {\n      console.error(\"Error fetching offline chapter:\", error);\n      return null;\n    }\n  };\n\n  const getSqliteChapter = async (book: string, chapter: number) => {\n    try {\n      if (!sqliteReady) {\n        await bibleSqlite.init();\n        setSqliteReady(bibleSqlite.isReady());\n      }\n      \n      const data = await bibleSqlite.getChapter(book, chapter);\n      if (data) {\n        return {\n          book: data.book,\n          bookName: data.bookName,\n          chapter: data.chapter,\n          verses: data.verses,\n          totalChapters: data.totalChapters,\n        };\n      }\n      return null;\n    } catch (error) {\n      console.error(\"Error fetching SQLite chapter:\", error);\n      return null;\n    }\n  };\n\n  const getSqliteBooks = async () => {\n    try {\n      if (!sqliteReady) {\n        const ready = await bibleSqlite.init();\n        if (ready) {\n          setSqliteReady(true);\n        }\n      }\n      \n      if (bibleSqlite.isReady()) {\n        const books = await bibleSqlite.getBooks();\n        // Format to match API response structure - abbrev as { pt: string }\n        return books.map(book => ({\n          name: book.name,\n          abbrev: { pt: book.abbrev }, // Object with pt property to match API\n          chapters: book.chapters,\n          testament: book.testament,\n        }));\n      }\n      return [];\n    } catch (error) {\n      console.error(\"Error fetching SQLite books:\", error);\n      return [];\n    }\n  };\n\n  const clearAllOffline = async () => {\n    try {\n      await offlineStorage.clearAll();\n      setDownloadedChapters(new Set());\n      \n      toast({\n        title: \"Cache limpo\",\n        description: \"Todo o conteúdo offline foi removido\",\n      });\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro ao limpar cache\",\n        description: error.message,\n      });\n    }\n  };\n\n  const getStorageStats = async () => {\n    return await offlineStorage.getStorageStats();\n  };\n\n  return (\n    <OfflineContext.Provider\n      value={{\n        isOnline,\n        downloadedChapters,\n        isDownloading,\n        downloadProgress,\n        sqliteReady,\n        downloadChapter,\n        downloadBook,\n        deleteChapter,\n        deleteBook,\n        isChapterOffline,\n        getOfflineChapter,\n        getSqliteChapter,\n        getSqliteBooks,\n        clearAllOffline,\n        getStorageStats,\n      }}\n    >\n      {children}\n    </OfflineContext.Provider>\n  );\n}\n","path":null,"size_bytes":12160,"size_tokens":null},"server/seed-daily-verses.ts":{"content":"import type { InsertDailyVerse } from \"@shared/schema\";\n\nexport const seedDailyVerses: InsertDailyVerse[] = [\n  {\n    dayOfYear: 1,\n    book: \"João\",\n    chapter: 3,\n    verseNumber: 16,\n    version: \"nvi\",\n    text: \"Porque Deus tanto amou o mundo que deu o seu Filho Unigênito, para que todo o que nele crer não pereça, mas tenha a vida eterna.\",\n    reference: \"João 3:16\",\n    theme: \"amor\",\n  },\n  {\n    dayOfYear: 2,\n    book: \"Filipenses\",\n    chapter: 4,\n    verseNumber: 13,\n    version: \"nvi\",\n    text: \"Tudo posso naquele que me fortalece.\",\n    reference: \"Filipenses 4:13\",\n    theme: \"força\",\n  },\n  {\n    dayOfYear: 3,\n    book: \"Salmos\",\n    chapter: 23,\n    verseNumber: 1,\n    version: \"nvi\",\n    text: \"O Senhor é o meu pastor; nada me faltará.\",\n    reference: \"Salmos 23:1\",\n    theme: \"confiança\",\n  },\n  {\n    dayOfYear: 4,\n    book: \"Provérbios\",\n    chapter: 3,\n    verseNumber: 5,\n    version: \"nvi\",\n    text: \"Confie no Senhor de todo o seu coração e não se apoie em seu próprio entendimento.\",\n    reference: \"Provérbios 3:5\",\n    theme: \"confiança\",\n  },\n  {\n    dayOfYear: 5,\n    book: \"Romanos\",\n    chapter: 8,\n    verseNumber: 28,\n    version: \"nvi\",\n    text: \"Sabemos que Deus age em todas as coisas para o bem daqueles que o amam, dos que foram chamados de acordo com o seu propósito.\",\n    reference: \"Romanos 8:28\",\n    theme: \"esperança\",\n  },\n  {\n    dayOfYear: 6,\n    book: \"Jeremias\",\n    chapter: 29,\n    verseNumber: 11,\n    version: \"nvi\",\n    text: \"Porque sou eu que conheço os planos que tenho para vocês, diz o Senhor, planos de fazê-los prosperar e não de causar dano, planos de dar a vocês esperança e um futuro.\",\n    reference: \"Jeremias 29:11\",\n    theme: \"esperança\",\n  },\n  {\n    dayOfYear: 7,\n    book: \"Isaías\",\n    chapter: 40,\n    verseNumber: 31,\n    version: \"nvi\",\n    text: \"Mas aqueles que esperam no Senhor renovam as suas forças. Voam alto como águias; correm e não ficam exaustos, andam e não se cansam.\",\n    reference: \"Isaías 40:31\",\n    theme: \"força\",\n  },\n  {\n    dayOfYear: 8,\n    book: \"Mateus\",\n    chapter: 11,\n    verseNumber: 28,\n    version: \"nvi\",\n    text: \"Venham a mim, todos os que estão cansados e sobrecarregados, e eu darei descanso a vocês.\",\n    reference: \"Mateus 11:28\",\n    theme: \"descanso\",\n  },\n  {\n    dayOfYear: 9,\n    book: \"Salmos\",\n    chapter: 46,\n    verseNumber: 1,\n    version: \"nvi\",\n    text: \"Deus é o nosso refúgio e a nossa fortaleza, auxílio sempre presente na adversidade.\",\n    reference: \"Salmos 46:1\",\n    theme: \"proteção\",\n  },\n  {\n    dayOfYear: 10,\n    book: \"Josué\",\n    chapter: 1,\n    verseNumber: 9,\n    version: \"nvi\",\n    text: \"Não fui eu que ordenei a você? Seja forte e corajoso! Não se apavore, nem se desanime, pois o Senhor, o seu Deus, estará com você por onde você andar.\",\n    reference: \"Josué 1:9\",\n    theme: \"coragem\",\n  },\n  {\n    dayOfYear: 11,\n    book: \"1 Coríntios\",\n    chapter: 13,\n    verseNumber: 4,\n    version: \"nvi\",\n    text: \"O amor é paciente, o amor é bondoso. Não inveja, não se vangloria, não se orgulha.\",\n    reference: \"1 Coríntios 13:4\",\n    theme: \"amor\",\n  },\n  {\n    dayOfYear: 12,\n    book: \"Salmos\",\n    chapter: 119,\n    verseNumber: 105,\n    version: \"nvi\",\n    text: \"Lâmpada para os meus pés é a tua palavra e luz para o meu caminho.\",\n    reference: \"Salmos 119:105\",\n    theme: \"orientação\",\n  },\n  {\n    dayOfYear: 13,\n    book: \"Gálatas\",\n    chapter: 5,\n    verseNumber: 22,\n    version: \"nvi\",\n    text: \"Mas o fruto do Espírito é amor, alegria, paz, paciência, amabilidade, bondade, fidelidade.\",\n    reference: \"Gálatas 5:22\",\n    theme: \"espiritualidade\",\n  },\n  {\n    dayOfYear: 14,\n    book: \"Efésios\",\n    chapter: 2,\n    verseNumber: 8,\n    version: \"nvi\",\n    text: \"Pois vocês são salvos pela graça, por meio da fé, e isto não vem de vocês, é dom de Deus.\",\n    reference: \"Efésios 2:8\",\n    theme: \"graça\",\n  },\n  {\n    dayOfYear: 15,\n    book: \"Colossenses\",\n    chapter: 3,\n    verseNumber: 23,\n    version: \"nvi\",\n    text: \"Tudo o que fizerem, façam de todo o coração, como para o Senhor, e não para os homens.\",\n    reference: \"Colossenses 3:23\",\n    theme: \"propósito\",\n  },\n  {\n    dayOfYear: 16,\n    book: \"Hebreus\",\n    chapter: 11,\n    verseNumber: 1,\n    version: \"nvi\",\n    text: \"Ora, a fé é a certeza daquilo que esperamos e a prova das coisas que não vemos.\",\n    reference: \"Hebreus 11:1\",\n    theme: \"fé\",\n  },\n  {\n    dayOfYear: 17,\n    book: \"Tiago\",\n    chapter: 1,\n    verseNumber: 2,\n    version: \"nvi\",\n    text: \"Meus irmãos, considerem motivo de grande alegria o fato de passarem por diversas provações.\",\n    reference: \"Tiago 1:2\",\n    theme: \"alegria\",\n  },\n  {\n    dayOfYear: 18,\n    book: \"1 Pedro\",\n    chapter: 5,\n    verseNumber: 7,\n    version: \"nvi\",\n    text: \"Lancem sobre ele toda a sua ansiedade, porque ele tem cuidado de vocês.\",\n    reference: \"1 Pedro 5:7\",\n    theme: \"paz\",\n  },\n  {\n    dayOfYear: 19,\n    book: \"2 Timóteo\",\n    chapter: 1,\n    verseNumber: 7,\n    version: \"nvi\",\n    text: \"Pois Deus não nos deu espírito de covardia, mas de poder, de amor e de equilíbrio.\",\n    reference: \"2 Timóteo 1:7\",\n    theme: \"coragem\",\n  },\n  {\n    dayOfYear: 20,\n    book: \"Salmos\",\n    chapter: 27,\n    verseNumber: 1,\n    version: \"nvi\",\n    text: \"O Senhor é a minha luz e a minha salvação; de quem terei temor? O Senhor é o meu forte refúgio; de quem terei medo?\",\n    reference: \"Salmos 27:1\",\n    theme: \"proteção\",\n  },\n  {\n    dayOfYear: 21,\n    book: \"Mateus\",\n    chapter: 6,\n    verseNumber: 33,\n    version: \"nvi\",\n    text: \"Busquem, pois, em primeiro lugar o Reino de Deus e a sua justiça, e todas essas coisas serão acrescentadas a vocês.\",\n    reference: \"Mateus 6:33\",\n    theme: \"prioridades\",\n  },\n  {\n    dayOfYear: 22,\n    book: \"Romanos\",\n    chapter: 12,\n    verseNumber: 2,\n    version: \"nvi\",\n    text: \"Não se amoldem ao padrão deste mundo, mas transformem-se pela renovação da sua mente, para que sejam capazes de experimentar e comprovar a boa, agradável e perfeita vontade de Deus.\",\n    reference: \"Romanos 12:2\",\n    theme: \"transformação\",\n  },\n  {\n    dayOfYear: 23,\n    book: \"Provérbios\",\n    chapter: 16,\n    verseNumber: 3,\n    version: \"nvi\",\n    text: \"Consagre ao Senhor tudo o que você faz, e os seus planos serão bem-sucedidos.\",\n    reference: \"Provérbios 16:3\",\n    theme: \"sucesso\",\n  },\n  {\n    dayOfYear: 24,\n    book: \"Isaías\",\n    chapter: 41,\n    verseNumber: 10,\n    version: \"nvi\",\n    text: \"Não tema, pois estou com você; não tenha medo, pois sou o seu Deus. Eu o fortalecerei e o ajudarei; eu o segurarei com a minha mão direita vitoriosa.\",\n    reference: \"Isaías 41:10\",\n    theme: \"coragem\",\n  },\n  {\n    dayOfYear: 25,\n    book: \"João\",\n    chapter: 14,\n    verseNumber: 6,\n    version: \"nvi\",\n    text: \"Respondeu Jesus: 'Eu sou o caminho, a verdade e a vida. Ninguém vem ao Pai, a não ser por mim.'\",\n    reference: \"João 14:6\",\n    theme: \"salvação\",\n  },\n  {\n    dayOfYear: 26,\n    book: \"Salmos\",\n    chapter: 91,\n    verseNumber: 1,\n    version: \"nvi\",\n    text: \"Aquele que habita no abrigo do Altíssimo e descansa à sombra do Todo-poderoso.\",\n    reference: \"Salmos 91:1\",\n    theme: \"proteção\",\n  },\n  {\n    dayOfYear: 27,\n    book: \"Eclesiastes\",\n    chapter: 3,\n    verseNumber: 1,\n    version: \"nvi\",\n    text: \"Há um tempo certo para tudo. Há um tempo certo para cada propósito debaixo do céu.\",\n    reference: \"Eclesiastes 3:1\",\n    theme: \"tempo\",\n  },\n  {\n    dayOfYear: 28,\n    book: \"Atos\",\n    chapter: 1,\n    verseNumber: 8,\n    version: \"nvi\",\n    text: \"Mas receberão poder quando o Espírito Santo descer sobre vocês, e serão minhas testemunhas em Jerusalém, em toda a Judeia e Samaria, e até os confins da terra.\",\n    reference: \"Atos 1:8\",\n    theme: \"poder\",\n  },\n  {\n    dayOfYear: 29,\n    book: \"Apocalipse\",\n    chapter: 3,\n    verseNumber: 20,\n    version: \"nvi\",\n    text: \"Eis que estou à porta e bato. Se alguém ouvir a minha voz e abrir a porta, entrarei e cearei com ele, e ele comigo.\",\n    reference: \"Apocalipse 3:20\",\n    theme: \"comunhão\",\n  },\n  {\n    dayOfYear: 30,\n    book: \"Miquéias\",\n    chapter: 6,\n    verseNumber: 8,\n    version: \"nvi\",\n    text: \"Ele mostrou a você, ó homem, o que é bom e o que o Senhor exige: pratique a justiça, ame a fidelidade e ande humildemente com o seu Deus.\",\n    reference: \"Miquéias 6:8\",\n    theme: \"justiça\",\n  },\n];\n","path":null,"size_bytes":8535,"size_tokens":null},"client/src/pages/about.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Heart, \n  Users, \n  Shield,\n  FileText,\n  Lock,\n  HelpCircle,\n  Mail,\n  ChevronRight,\n  BookOpen,\n  Smartphone,\n  Monitor,\n  Tablet,\n  ArrowLeft,\n  ChevronUp,\n  Star,\n  Share2\n} from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Link, useLocation } from \"wouter\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\n\nconst PLAY_STORE_URL = \"https://play.google.com/store/apps/details?id=com.bibliafullstack.app&pcampaignid=web_share\";\n\nexport default function About() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const [showScrollTop, setShowScrollTop] = useState(false);\n\n  useEffect(() => {\n    const handleScroll = () => {\n      setShowScrollTop(window.scrollY > 400);\n    };\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n\n  const scrollToTop = () => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  };\n  \n  const handleShareApp = async () => {\n    const shareData = {\n      title: \"BíbliaFS - Estudo Bíblico Premium\",\n      text: \"Conheça o BíbliaFS! Estudo bíblico com IA teológica, planos de leitura, comunidade e muito mais. Baixe agora:\",\n      url: PLAY_STORE_URL,\n    };\n\n    try {\n      if (navigator.share) {\n        await navigator.share(shareData);\n      } else {\n        await navigator.clipboard.writeText(`${shareData.text}\\n${shareData.url}`);\n        toast({\n          title: \"Link copiado!\",\n          description: \"O link do app foi copiado para a área de transferência.\",\n        });\n      }\n    } catch (err: any) {\n      if (err.name !== \"AbortError\") {\n        await navigator.clipboard.writeText(`${shareData.text}\\n${shareData.url}`);\n        toast({\n          title: \"Link copiado!\",\n          description: \"O link do app foi copiado para a área de transferência.\",\n        });\n      }\n    }\n  };\n\n  const legalPages = [\n    {\n      title: \"Política de Privacidade\",\n      description: \"Como coletamos, usamos e protegemos seus dados\",\n      icon: Shield,\n      href: \"/privacy\",\n      color: \"text-blue-600\",\n      bgColor: \"bg-blue-500/10\"\n    },\n    {\n      title: \"Termos de Uso\",\n      description: \"Regras e condições de uso do aplicativo\",\n      icon: FileText,\n      href: \"/terms\",\n      color: \"text-muted-foreground\",\n      bgColor: \"bg-muted-foreground/10\"\n    },\n    {\n      title: \"Política de Segurança\",\n      description: \"Medidas de segurança e proteção de dados\",\n      icon: Lock,\n      href: \"/security\",\n      color: \"text-green-600\",\n      bgColor: \"bg-green-500/10\"\n    },\n    {\n      title: \"Perguntas Frequentes\",\n      description: \"Dúvidas comuns e como usar o app\",\n      icon: HelpCircle,\n      href: \"/help\",\n      color: \"text-amber-600\",\n      bgColor: \"bg-amber-500/10\"\n    },\n    {\n      title: \"Fale Conosco\",\n      description: \"Entre em contato com nossa equipe\",\n      icon: Mail,\n      href: \"/contact\",\n      color: \"text-pink-600\",\n      bgColor: \"bg-pink-500/10\"\n    }\n  ];\n\n  const appFeatures = [\n    \"Leitura offline para estudar em qualquer lugar\",\n    \"4 traduções bíblicas (NVI, ACF, ARC, RA)\",\n    \"Planos de leitura personalizados\",\n    \"Destaques e anotações coloridas (6 cores)\",\n    \"Diário de orações com gravação de áudio\",\n    \"Gamificação com 50 níveis e conquistas\",\n    \"Assistente teológico com IA (GPT-4o)\",\n    \"Comunidade para compartilhar insights\",\n    \"Podcasts integrados\",\n    \"Modo Professor para criar aulas\"\n  ];\n\n  const platforms = [\n    { name: \"Web\", icon: Monitor, status: \"Disponível\" },\n    { name: \"Desktop\", icon: Monitor, status: \"Disponível\" },\n    { name: \"Android\", icon: Smartphone, status: \"Disponível\" },\n    { name: \"iOS\", icon: Tablet, status: \"Disponível\" }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden selection:bg-primary/30\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"relative z-10 max-w-5xl mx-auto p-4 md:p-12 space-y-12\">\n        <div className=\"flex justify-start\">\n          <Button \n            variant=\"ghost\" \n            size=\"sm\" \n            className=\"rounded-2xl gap-2 text-muted-foreground font-semibold uppercase tracking-widest text-[10px]\"\n            onClick={() => setLocation(\"/\")}\n          >\n            <ArrowLeft className=\"h-3 w-3\" />\n            Voltar ao Início\n          </Button>\n        </div>\n\n        <div className=\"text-center space-y-4\">\n          <div className=\"flex justify-center\">\n            <div className=\"relative group\">\n              <div className=\"absolute -inset-4 bg-gradient-to-br from-primary to-purple-600 rounded-3xl blur-2xl opacity-20 group-hover:opacity-40 transition-opacity duration-500\" />\n              <div className=\"relative h-20 w-20 rounded-2xl bg-card flex items-center justify-center shadow-xl border border-border\">\n                <BookOpen className=\"h-10 w-10 text-primary drop-shadow-sm\" />\n              </div>\n            </div>\n          </div>\n          <div className=\"space-y-1\">\n            <h1 className=\"text-2xl md:text-3xl font-semibold tracking-tighter text-amber-700 dark:text-amber-500 uppercase italic\">\n              Sobre o BíbliaFS\n            </h1>\n          </div>\n          <p className=\"text-muted-foreground text-base max-w-2xl mx-auto font-medium uppercase tracking-tight leading-tight\">\n            Transformando o estudo bíblico com tecnologia de ponta e inteligência artificial.\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n          <Card className=\"rounded-[2.5rem] border-none bg-gradient-to-br from-rose-500/10 via-card to-pink-500/5 shadow-xl overflow-hidden group relative\">\n            <div className=\"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-rose-500/15 to-transparent rounded-bl-full z-0\" />\n            <CardHeader className=\"p-8 relative z-10\">\n              <CardTitle className=\"flex items-center gap-4 text-xl font-semibold text-foreground\">\n                <div className=\"p-2 rounded-xl bg-gradient-to-br from-rose-500 to-pink-600 shadow-lg\">\n                  <Heart className=\"h-5 w-5 text-white\" />\n                </div>\n                Nossa Missão\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-8 pt-0 space-y-4 text-muted-foreground font-medium relative z-10\">\n              <p>O BíbliaFS nasceu com o propósito de tornar o estudo da Palavra de Deus mais acessível, personalizado e envolvente.</p>\n              <p>Acreditamos que a tecnologia pode ser uma ferramenta poderosa para aproximar as pessoas das Escrituras Sagradas.</p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"rounded-[2.5rem] border-none bg-gradient-to-br from-indigo-500/10 via-card to-purple-500/5 shadow-xl overflow-hidden group relative\">\n            <div className=\"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-indigo-500/15 to-transparent rounded-bl-full z-0\" />\n            <CardHeader className=\"p-8 relative z-10\">\n              <CardTitle className=\"flex items-center gap-4 text-xl font-semibold text-foreground\">\n                <div className=\"p-2 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 shadow-lg\">\n                  <Users className=\"h-5 w-5 text-white\" />\n                </div>\n                Para Igrejas e Grupos\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-8 pt-0 space-y-4 text-muted-foreground font-medium relative z-10\">\n              <p>Se alguma igreja tiver interesse de usar para dar aulas para alunos, entre em contato que criamos um plano de acordo com a quantidade de membros.</p>\n              <p>Desenvolvido com dedicação pela equipe FabriSite.</p>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"space-y-6\">\n          <div className=\"text-center\">\n            <h2 className=\"text-2xl font-semibold text-foreground tracking-tight uppercase italic\">Apoie o App</h2>\n          </div>\n          <div className=\"grid sm:grid-cols-2 gap-4\">\n            <Card className=\"rounded-3xl border-none bg-gradient-to-br from-amber-500/10 via-card to-yellow-500/5 shadow-xl overflow-hidden group relative\">\n              <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-amber-500/15 to-transparent rounded-bl-full z-0\" />\n              <CardContent className=\"p-6 relative z-10\">\n                <div className=\"flex items-center gap-4 mb-4\">\n                  <div className=\"p-2 rounded-xl bg-gradient-to-br from-amber-500 to-yellow-600 shadow-lg\">\n                    <Star className=\"h-5 w-5 text-white\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-foreground\">Avalie o App</h3>\n                    <p className=\"text-xs text-muted-foreground\">Deixe sua avaliacao na Play Store</p>\n                  </div>\n                </div>\n                <Button\n                  variant=\"outline\"\n                  className=\"w-full rounded-xl gap-2\"\n                  onClick={() => window.open(PLAY_STORE_URL, '_blank')}\n                  data-testid=\"button-rate-app\"\n                >\n                  <Star className=\"h-4 w-4\" />\n                  Avaliar na Play Store\n                </Button>\n              </CardContent>\n            </Card>\n\n            <Card className=\"rounded-3xl border-none bg-gradient-to-br from-emerald-500/10 via-card to-teal-500/5 shadow-xl overflow-hidden group relative\">\n              <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-emerald-500/15 to-transparent rounded-bl-full z-0\" />\n              <CardContent className=\"p-6 relative z-10\">\n                <div className=\"flex items-center gap-4 mb-4\">\n                  <div className=\"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 shadow-lg\">\n                    <Share2 className=\"h-5 w-5 text-white\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-foreground\">Compartilhar</h3>\n                    <p className=\"text-xs text-muted-foreground\">Convide amigos para usar o app</p>\n                  </div>\n                </div>\n                <Button\n                  variant=\"outline\"\n                  className=\"w-full rounded-xl gap-2\"\n                  onClick={handleShareApp}\n                  data-testid=\"button-share-app\"\n                >\n                  <Share2 className=\"h-4 w-4\" />\n                  Compartilhar o App\n                </Button>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n\n        <div className=\"space-y-6\">\n          <div className=\"text-center\">\n            <h2 className=\"text-2xl font-semibold text-foreground tracking-tight uppercase italic\">Apoie o App</h2>\n          </div>\n          <div className=\"grid sm:grid-cols-2 gap-4\">\n            <Card className=\"rounded-3xl border-none bg-gradient-to-br from-amber-500/10 via-card to-yellow-500/5 shadow-xl overflow-hidden group relative\">\n              <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-amber-500/15 to-transparent rounded-bl-full z-0\" />\n              <CardContent className=\"p-6 relative z-10\">\n                <div className=\"flex items-center gap-4 mb-4\">\n                  <div className=\"p-2 rounded-xl bg-gradient-to-br from-amber-500 to-yellow-600 shadow-lg\">\n                    <Star className=\"h-5 w-5 text-white\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-foreground\">Avalie o App</h3>\n                    <p className=\"text-xs text-muted-foreground\">Deixe sua avaliacao na Play Store</p>\n                  </div>\n                </div>\n                <Button\n                  variant=\"outline\"\n                  className=\"w-full rounded-xl gap-2\"\n                  onClick={() => window.open(PLAY_STORE_URL, '_blank')}\n                  data-testid=\"button-rate-app\"\n                >\n                  <Star className=\"h-4 w-4\" />\n                  Avaliar na Play Store\n                </Button>\n              </CardContent>\n            </Card>\n\n            <Card className=\"rounded-3xl border-none bg-gradient-to-br from-emerald-500/10 via-card to-teal-500/5 shadow-xl overflow-hidden group relative\">\n              <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-emerald-500/15 to-transparent rounded-bl-full z-0\" />\n              <CardContent className=\"p-6 relative z-10\">\n                <div className=\"flex items-center gap-4 mb-4\">\n                  <div className=\"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 shadow-lg\">\n                    <Share2 className=\"h-5 w-5 text-white\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-foreground\">Compartilhar</h3>\n                    <p className=\"text-xs text-muted-foreground\">Convide amigos para usar o app</p>\n                  </div>\n                </div>\n                <Button\n                  variant=\"outline\"\n                  className=\"w-full rounded-xl gap-2\"\n                  onClick={handleShareApp}\n                  data-testid=\"button-share-app\"\n                >\n                  <Share2 className=\"h-4 w-4\" />\n                  Compartilhar o App\n                </Button>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n\n        <div className=\"space-y-6\">\n          <div className=\"text-center\">\n            <h2 className=\"text-2xl font-semibold text-foreground tracking-tight uppercase italic\">Informações Legais</h2>\n          </div>\n          <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {legalPages.map((page, index) => (\n              <Link key={index} href={page.href}>\n                <Card className=\"rounded-3xl border-none glass-premium hover-premium shadow-sm cursor-pointer transition-all hover:shadow-md active:scale-95 group\">\n                  <CardContent className=\"p-6 flex items-center gap-4\">\n                    <div className={`h-12 w-12 rounded-xl ${page.bgColor} flex items-center justify-center flex-shrink-0`}>\n                      <page.icon className={`h-6 w-6 ${page.color}`} />\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"font-semibold text-foreground uppercase text-xs tracking-tight\">{page.title}</h3>\n                    </div>\n                    <ChevronRight className=\"h-4 w-4 text-muted-foreground group-hover:translate-x-1 transition-transform\" />\n                  </CardContent>\n                </Card>\n              </Link>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":15347,"size_tokens":null},"client/src/pages/terms.tsx":{"content":"import { motion } from \"framer-motion\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { FileText, ArrowLeft, CheckCircle2, AlertTriangle, ShieldAlert, BookOpen, Scale, Mail } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nexport default function Terms() {\n  const sections = [\n    {\n      title: \"1. Aceitação dos Termos\",\n      icon: CheckCircle2,\n      content: \"Ao acessar e usar o BíbliaFS, você concorda em cumprir e estar vinculado a estes Termos de Uso. Se você não concordar com alguma parte destes termos, não deverá usar nosso aplicativo.\"\n    },\n    {\n      title: \"2. Uso do Serviço\",\n      icon: BookOpen,\n      intro: \"O BíbliaFS é um aplicativo gratuito de estudo bíblico. Você concorda em usar o serviço apenas para fins legais e de acordo com estes Termos.\",\n      forbidden: [\n        \"Usar o serviço para qualquer finalidade ilegal ou não autorizada\",\n        \"Tentar acessar dados de outros usuários\",\n        \"Interferir ou interromper o serviço ou servidores\",\n        \"Usar o conteúdo para fins comerciais sem autorização\",\n        \"Publicar conteúdo ofensivo, difamatório ou inadequado\"\n      ]\n    },\n    {\n      title: \"3. Conteúdo do Usuário\",\n      icon: FileText,\n      content: \"Você mantém todos os direitos sobre o conteúdo que cria no aplicativo (notas, orações, posts). No entanto, ao compartilhar conteúdo publicamente na comunidade, você concede ao BíbliaFS uma licença não exclusiva para exibir esse conteúdo. Reservamo-nos o direito de remover qualquer conteúdo que viole estes termos ou seja considerado inadequado.\"\n    },\n    {\n      title: \"4. Propriedade Intelectual\",\n      icon: ShieldAlert,\n      content: \"O aplicativo BíbliaFS e todo seu conteúdo original são propriedade do BíbliaFS e são protegidos por leis de direitos autorais internacionais. Os textos bíblicos disponibilizados são de domínio público ou usados com permissão de seus respectivos detentores de direitos.\"\n    },\n    {\n      title: \"5. Limitação de Responsabilidade\",\n      icon: AlertTriangle,\n      content: \"O BíbliaFS é fornecido 'como está'. Não garantimos que o serviço será ininterrupto ou livre de erros. Não nos responsabilizamos por quaisquer danos resultantes do uso ou incapacidade de usar o serviço.\"\n    },\n    {\n      title: \"6. Modificações\",\n      icon: Scale,\n      content: \"Reservamo-nos o direito de modificar ou substituir estes Termos a qualquer momento. Mudanças significativas serão notificadas através do aplicativo.\"\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] rounded-full bg-primary/20 dark:bg-primary/10 blur-[120px] animate-pulse\" />\n        <div className=\"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] rounded-full bg-primary/10 dark:bg-primary/5 blur-[120px] animate-pulse\" />\n      </div>\n\n      <div className=\"relative z-10 max-w-4xl mx-auto p-4 md:p-8 space-y-8\">\n        <motion.div \n          initial={{ opacity: 0, x: -20 }} \n          animate={{ opacity: 1, x: 0 }}\n          className=\"flex items-center gap-4\"\n        >\n          <Link href=\"/about\" data-testid=\"link-back-terms\">\n            <Button variant=\"ghost\" size=\"icon\" className=\"rounded-xl\" data-testid=\"button-back-terms\">\n              <ArrowLeft className=\"h-5 w-5\" />\n            </Button>\n          </Link>\n          <p className=\"text-muted-foreground\">Voltar para Sobre</p>\n        </motion.div>\n\n        <motion.div \n          initial={{ opacity: 0, y: -20 }} \n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center space-y-4 mb-12\"\n        >\n          <div className=\"flex justify-center mb-6\">\n            <div className=\"h-24 w-24 rounded-3xl glass-premium hover-premium shadow-xl flex items-center justify-center relative overflow-hidden\">\n              <FileText className=\"h-12 w-12 text-blue-600 drop-shadow-sm\" />\n            </div>\n          </div>\n          <h1 className=\"text-5xl font-black bg-gradient-to-r from-foreground to-muted-foreground bg-clip-text text-transparent italic uppercase tracking-tighter\">\n            Termos de Uso\n          </h1>\n          <p className=\"text-muted-foreground font-bold italic\">\n            Última atualização: {new Date().toLocaleDateString('pt-BR')}\n          </p>\n        </motion.div>\n\n        {sections.map((section, idx) => (\n          <motion.div\n            key={section.title}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.1 + idx * 0.05 }}\n          >\n            <Card className=\"rounded-[2rem] border-none glass-premium hover-premium shadow-xl relative overflow-hidden group\">\n              <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-muted to-transparent rounded-bl-full z-0\" />\n              <CardHeader className=\"relative z-10\">\n                <CardTitle className=\"flex items-center gap-3 text-foreground font-black uppercase italic tracking-tighter\">\n                  <div className=\"p-2.5 rounded-xl bg-muted border border-border text-primary shadow-sm\">\n                    <section.icon className=\"h-5 w-5\" />\n                  </div>\n                  {section.title}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-muted-foreground font-medium leading-relaxed relative z-10\">\n                {section.content && <p>{section.content}</p>}\n                {section.intro && <p className=\"text-foreground font-bold italic\">{section.intro}</p>}\n                {section.forbidden && (\n                  <div className=\"space-y-3 pt-2\">\n                    <p className=\"font-black text-foreground uppercase tracking-widest text-xs italic\">Você concorda em NÃO:</p>\n                    <ul className=\"space-y-3\">\n                      {section.forbidden.map((item, i) => (\n                        <li key={i} className=\"flex items-start gap-3\">\n                          <span className=\"h-2 w-2 rounded-full bg-destructive/60 shadow-sm mt-2 flex-shrink-0\" />\n                          <span className=\"text-muted-foreground\">{item}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </motion.div>\n        ))}\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }}>\n          <Card className=\"rounded-[2rem] border-none glass-premium hover-premium shadow-xl relative overflow-hidden\">\n            <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-muted to-transparent rounded-bl-full z-0\" />\n            <CardHeader className=\"relative z-10\">\n              <CardTitle className=\"flex items-center gap-3 text-foreground font-black uppercase italic tracking-tighter\">\n                <div className=\"p-2.5 rounded-xl bg-green-500/10 border border-green-100 shadow-sm\">\n                  <Mail className=\"h-5 w-5 text-green-600\" />\n                </div>\n                7. Contato\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"text-muted-foreground font-medium relative z-10\">\n              <p>\n                Se você tiver dúvidas sobre estes Termos de Uso, entre em contato conosco através \n                da página \"Fale Conosco\".\n              </p>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <motion.div \n          initial={{ opacity: 0, y: 20 }} \n          animate={{ opacity: 1, y: 0 }} \n          transition={{ delay: 0.55 }}\n          className=\"grid md:grid-cols-3 gap-6 py-8\"\n        >\n          {[\n            { href: \"/about\", title: \"Sobre\", desc: \"Conheça o BíbliaFS\" },\n            { href: \"/privacy\", title: \"Privacidade\", desc: \"Proteção de dados\" },\n            { href: \"/security\", title: \"Segurança\", desc: \"Medidas de segurança\" }\n          ].map((link, idx) => (\n            <Link key={idx} href={link.href}>\n              <Card className=\"rounded-2xl border-none glass-premium hover-premium shadow-lg cursor-pointer h-full transition-all hover:shadow-xl \">\n                <CardContent className=\"p-6 text-center\">\n                  <h3 className=\"font-black text-foreground mb-1 uppercase tracking-tight\">{link.title}</h3>\n                  <p className=\"text-sm text-muted-foreground font-bold italic\">{link.desc}</p>\n                </CardContent>\n              </Card>\n            </Link>\n          ))}\n        </motion.div>\n\n        <footer className=\"text-center text-sm text-muted-foreground py-8 border-t border-border\">\n          <p>© 2026 BíbliaFS | Desenvolvido por | <a href=\"https://fabrisite.com.br/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary hover:underline font-medium\">FabriSite</a></p>\n        </footer>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":9170,"size_tokens":null},"client/src/pages/contact.tsx":{"content":"import { useState } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { z } from \"zod\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Mail, Send, CheckCircle2, MessageSquare, Heart, Clock, ExternalLink, Star } from \"lucide-react\";\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nconst contactSchema = z.object({\n  name: z.string().min(2, \"Nome deve ter pelo menos 2 caracteres\"),\n  email: z.string().email(\"E-mail inválido\"),\n  subject: z.string().min(5, \"Assunto deve ter pelo menos 5 caracteres\"),\n  message: z.string().min(20, \"Mensagem deve ter pelo menos 20 caracteres\"),\n});\n\ntype ContactForm = z.infer<typeof contactSchema>;\n\nexport default function Contact() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const { isAuthenticated } = useAuth();\n  const [submitted, setSubmitted] = useState(false);\n\n  const form = useForm<ContactForm>({\n    resolver: zodResolver(contactSchema),\n    defaultValues: {\n      name: \"\",\n      email: \"\",\n      subject: \"\",\n      message: \"\",\n    },\n  });\n\n  const contactMutation = useMutation({\n    mutationFn: async (data: ContactForm) => {\n      const response = await apiRequest(\"POST\", \"/api/contact\", data);\n      return await response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: t.contact.success,\n        description: \"Retornaremos em breve. Obrigado pelo contato!\",\n      });\n      setSubmitted(true);\n      form.reset();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Erro ao enviar mensagem\",\n        description: error instanceof Error ? error.message : \"Ocorreu um erro ao enviar sua mensagem. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen bg-background p-6 text-center space-y-6\">\n        <div className=\"h-24 w-24 rounded-3xl bg-primary/10 flex items-center justify-center\">\n          <Mail className=\"h-12 w-12 text-primary\" />\n        </div>\n        <div className=\"space-y-2\">\n          <h1 className=\"text-2xl font-bold tracking-tight\">Fale Conosco</h1>\n          <p className=\"text-muted-foreground max-w-sm\">\n            Para entrar em contato com nossa equipe, você precisa estar conectado.\n          </p>\n        </div>\n        <div className=\"flex flex-col gap-3 w-full max-w-xs\">\n          <Button onClick={() => window.location.href = \"/login\"} className=\"w-full h-12 rounded-xl text-lg font-bold\">\n            Entrar Agora\n          </Button>\n          <Button variant=\"outline\" onClick={() => window.location.href = \"/\"} className=\"w-full h-12 rounded-xl font-bold\">\n            Voltar ao Início\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background relative\">\n      {/* Background Decorative Elements */}\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] rounded-full bg-primary/10 dark:bg-primary/5 blur-[120px] animate-pulse\" />\n        <div className=\"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] rounded-full bg-muted/50 dark:bg-muted/30 blur-[120px] animate-pulse\" />\n      </div>\n\n      <div className=\"relative z-10 max-w-7xl mx-auto px-4 py-12 md:py-20\">\n        <div className=\"text-center space-y-4 mb-16\">\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-bold mb-4\"\n          >\n            <Mail className=\"h-4 w-4\" />\n            <span>Fale Conosco</span>\n          </motion.div>\n          <motion.h1 \n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.1 }}\n            className=\"text-2xl md:text-3xl font-bold tracking-tight text-foreground\"\n          >\n            Como podemos <span className=\"text-primary\">ajudar você?</span>\n          </motion.h1>\n          <motion.p \n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.2 }}\n            className=\"text-lg text-muted-foreground max-w-2xl mx-auto font-bold italic\"\n          >\n            Tem dúvidas, sugestões ou feedback? Adoraríamos ouvir você! Nossa equipe está pronta para oferecer suporte e ouvir suas ideias.\n          </motion.p>\n        </div>\n\n        <div className=\"grid lg:grid-cols-12 gap-12 items-start\">\n          {/* Left Column: Info & NPS */}\n          <div className=\"lg:col-span-5 space-y-8\">\n            <div className=\"grid gap-4\">\n              {[\n                { \n                  icon: MessageSquare, \n                  label: \"Suporte Técnico\", \n                  desc: \"Dúvidas sobre o funcionamento do app\",\n                  gradient: \"from-blue-500/15 via-indigo-500/10 to-transparent\",\n                  iconGradient: \"from-blue-500 to-indigo-600\",\n                  shadow: \"shadow-blue-500/20\"\n                },\n                { \n                  icon: Heart, \n                  label: \"Doações & Apoio\", \n                  desc: \"Apoie o BíbliaFS gratuitamente\",\n                  gradient: \"from-rose-500/15 via-pink-500/10 to-transparent\",\n                  iconGradient: \"from-rose-500 to-pink-600\",\n                  shadow: \"shadow-rose-500/20\"\n                },\n                { \n                  icon: Clock, \n                  label: \"Tempo de Resposta\", \n                  desc: \"Normalmente em até 48 horas úteis\",\n                  gradient: \"from-amber-500/15 via-orange-500/10 to-transparent\",\n                  iconGradient: \"from-amber-500 to-orange-600\",\n                  shadow: \"shadow-amber-500/20\"\n                }\n              ].map((item, i) => (\n                <motion.div \n                  key={i}\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ delay: 0.3 + i * 0.1 }}\n                  className={`group flex items-center gap-6 p-6 rounded-[2rem] bg-gradient-to-r ${item.gradient} border-none shadow-lg ${item.shadow} relative overflow-hidden`}\n                >\n                  <div className=\"absolute top-0 right-0 w-20 h-20 bg-gradient-to-bl from-white/20 to-transparent rounded-bl-full z-0\" />\n                  <div className={`h-14 w-14 rounded-xl bg-gradient-to-br ${item.iconGradient} flex items-center justify-center shadow-lg relative z-10`}>\n                    <item.icon className=\"h-7 w-7 text-white\" />\n                  </div>\n                  <div className=\"relative z-10\">\n                    <p className=\"font-semibold text-lg text-foreground\">{item.label}</p>\n                    <p className=\"text-sm text-muted-foreground mt-0.5\">{item.desc}</p>\n                  </div>\n                </motion.div>\n              ))}\n            </div>\n\n            {/* NPS Card Redesigned */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.6 }}\n            >\n              <Card className=\"rounded-[2.5rem] border-none bg-primary text-primary-foreground shadow-2xl shadow-primary/20 overflow-hidden relative\">\n                <div className=\"absolute top-0 right-0 p-4 opacity-10\">\n                  <Heart className=\"h-32 w-32 -mr-16 -mt-16\" />\n                </div>\n                <CardContent className=\"p-6 sm:p-8 space-y-6 relative z-10\">\n                  <div className=\"space-y-2\">\n                    <h3 className=\"font-bold text-2xl tracking-tight\">Sua voz importa!</h3>\n                    <p className=\"text-primary-foreground/80 text-sm\">\n                      O quanto você recomendaria o BíbliaFS para um amigo? (0-10)\n                    </p>\n                  </div>\n                  \n                  <div className=\"flex justify-start sm:justify-between gap-2 sm:gap-1.5 flex-wrap\">\n                    {[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((num) => (\n                      <button\n                        key={num}\n                        type=\"button\"\n                        data-nps-score={num}\n                        data-testid={`nps-score-${num}`}\n                        onClick={() => {\n                          const event = new CustomEvent('open-nps-score', { detail: { score: num } });\n                          window.dispatchEvent(event);\n                        }}\n                        className=\"w-9 h-9 sm:w-10 sm:h-10 rounded-2xl text-sm font-bold bg-primary-foreground/10 hover:bg-primary-foreground hover:text-primary transition-all transform hover:scale-110 active:scale-95 border border-primary-foreground/20\"\n                      >\n                        {num}\n                      </button>\n                    ))}\n                  </div>\n\n                  <div className=\"pt-2 space-y-3\">\n                    <Button \n                      variant=\"secondary\" \n                      className=\"w-full rounded-2xl h-14 font-bold shadow-lg\"\n                      onClick={() => {\n                        const event = new CustomEvent('open-nps-dialog');\n                        window.dispatchEvent(event);\n                      }}\n                    >\n                      Enviar feedback detalhado\n                    </Button>\n                    \n                    <Button \n                      variant=\"outline\"\n                      className=\"w-full rounded-2xl h-14 font-bold shadow-lg bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white border-none gap-3\"\n                      onClick={() => {\n                        window.open('https://play.google.com/store/apps/details?id=com.bibliafullstack.app', '_blank');\n                      }}\n                      data-testid=\"button-rate-play-store\"\n                    >\n                      <Star className=\"h-5 w-5 fill-current\" />\n                      Avaliar na Play Store\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          </div>\n\n          {/* Right Column: Contact Form */}\n          <div className=\"lg:col-span-7\">\n            <AnimatePresence mode=\"wait\">\n              {!submitted ? (\n                <motion.div\n                  key=\"form\"\n                  initial={{ opacity: 0, scale: 0.95 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  exit={{ opacity: 0, scale: 0.95 }}\n                >\n                  <Card className=\"rounded-[2.5rem] border-none bg-gradient-to-br from-primary/5 via-card to-indigo-500/5 shadow-2xl overflow-hidden relative\">\n                    <div className=\"absolute top-0 right-0 w-48 h-48 bg-gradient-to-bl from-primary/10 via-purple-500/5 to-transparent rounded-bl-full z-0\" />\n                    <div className=\"absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-indigo-500/10 to-transparent rounded-tr-full z-0\" />\n                    <CardHeader className=\"p-8 sm:p-10 md:p-12 pb-0 relative z-10\">\n                      <CardTitle className=\"text-xl sm:text-2xl font-semibold bg-gradient-to-r from-primary via-indigo-600 to-purple-600 bg-clip-text text-transparent\">Envie sua Mensagem</CardTitle>\n                      <CardDescription className=\"text-base text-muted-foreground mt-2\">\n                        Preencha os campos abaixo e entraremos em contato.\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent className=\"p-8 sm:p-10 md:p-14 relative z-10\">\n                      <form onSubmit={form.handleSubmit((data) => contactMutation.mutate(data))} className=\"space-y-10\">\n                        <div className=\"grid md:grid-cols-2 gap-10\">\n                          <div className=\"space-y-4\">\n                            <Label htmlFor=\"name\" className=\"text-[10px] font-bold uppercase tracking-[0.3em] text-muted-foreground ml-2 italic\">Nome Completo</Label>\n                            <Input\n                              id=\"name\"\n                              placeholder=\"Como devemos te chamar?\"\n                              className=\"rounded-2xl h-16 bg-muted border-border focus:border-primary focus:ring-primary/10 transition-all px-8 text-lg font-bold text-foreground placeholder:text-muted-foreground shadow-inner\"\n                              {...form.register(\"name\")}\n                            />\n                            {form.formState.errors.name && (\n                              <p className=\"text-[10px] text-destructive font-bold uppercase tracking-widest ml-2 animate-pulse\">{form.formState.errors.name.message}</p>\n                            )}\n                          </div>\n\n                          <div className=\"space-y-4\">\n                            <Label htmlFor=\"email\" className=\"text-[10px] font-bold uppercase tracking-[0.3em] text-muted-foreground ml-2 italic\">E-mail de Contato</Label>\n                            <Input\n                              id=\"email\"\n                              type=\"email\"\n                              placeholder=\"exemplo@email.com\"\n                              className=\"rounded-2xl h-16 bg-muted border-border focus:border-primary focus:ring-primary/10 transition-all px-8 text-lg font-bold text-foreground placeholder:text-muted-foreground shadow-inner\"\n                              {...form.register(\"email\")}\n                            />\n                            {form.formState.errors.email && (\n                              <p className=\"text-[10px] text-destructive font-bold uppercase tracking-widest ml-2 animate-pulse\">{form.formState.errors.email.message}</p>\n                            )}\n                          </div>\n                        </div>\n\n                        <div className=\"space-y-4\">\n                          <Label htmlFor=\"subject\" className=\"text-[10px] font-bold uppercase tracking-[0.3em] text-muted-foreground ml-2 italic\">Assunto</Label>\n                          <Input\n                            id=\"subject\"\n                            placeholder=\"Sobre o que você gostaria de falar?\"\n                            className=\"rounded-2xl h-16 bg-muted border-border focus:border-primary focus:ring-primary/10 transition-all px-8 text-lg font-bold text-foreground placeholder:text-muted-foreground shadow-inner\"\n                            {...form.register(\"subject\")}\n                          />\n                          {form.formState.errors.subject && (\n                            <p className=\"text-[10px] text-destructive font-bold uppercase tracking-widest ml-2 animate-pulse\">{form.formState.errors.subject.message}</p>\n                          )}\n                        </div>\n\n                        <div className=\"space-y-4\">\n                          <Label htmlFor=\"message\" className=\"text-[10px] font-bold uppercase tracking-[0.3em] text-muted-foreground ml-2 italic\">Sua Mensagem</Label>\n                          <Textarea\n                            id=\"message\"\n                            placeholder=\"Conte-nos os detalhes...\"\n                            className=\"rounded-[2.5rem] min-h-[220px] bg-muted border-border focus:border-primary focus:ring-primary/10 transition-all p-8 text-lg font-bold text-foreground placeholder:text-muted-foreground shadow-inner resize-none\"\n                            {...form.register(\"message\")}\n                          />\n                          {form.formState.errors.message && (\n                            <p className=\"text-[10px] text-destructive font-bold uppercase tracking-widest ml-2 animate-pulse\">{form.formState.errors.message.message}</p>\n                          )}\n                        </div>\n\n                        <Button \n                          type=\"submit\" \n                          disabled={contactMutation.isPending}\n                          className=\"w-full rounded-[2.5rem] h-20 text-2xl font-bold italic uppercase tracking-[0.2em] shadow-2xl shadow-primary/20 transition-all hover:scale-[1.01] active:scale-[0.99] bg-primary text-white\"\n                        >\n                          <Send className=\"h-7 w-7 mr-4 drop-shadow-md\" />\n                          {contactMutation.isPending ? \"Enviando...\" : \"Enviar agora\"}\n                        </Button>\n                      </form>\n                    </CardContent>\n                  </Card>\n                </motion.div>\n              ) : (\n                <motion.div \n                  key=\"success\"\n                  initial={{ opacity: 0, scale: 0.9 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  className=\"py-12\"\n                >\n                  <Card className=\"rounded-[3rem] border-none glass-premium hover-premium shadow-2xl text-center overflow-hidden relative\">\n                    <div className=\"h-4 w-full bg-green-500\" />\n                    <CardHeader className=\"pt-12 sm:pt-16 pb-6 sm:pb-8 px-4 sm:px-8\">\n                      <div className=\"flex justify-center mb-6 sm:mb-10\">\n                        <div className=\"h-24 sm:h-32 w-24 sm:w-32 rounded-[2.5rem] bg-green-500/10 flex items-center justify-center animate-bounce\">\n                          <CheckCircle2 className=\"h-12 sm:h-16 w-12 sm:w-16 text-green-600\" />\n                        </div>\n                      </div>\n                      <CardTitle className=\"text-lg sm:text-xl font-bold\">Mensagem Enviada!</CardTitle>\n                      <CardDescription className=\"text-base sm:text-xl px-4 sm:px-8 mt-4\">\n                        Recebemos seu contato com sucesso. Nossa equipe analisará sua mensagem e retornaremos em até 48 horas.\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent className=\"pb-12 sm:pb-16 px-4 sm:px-8\">\n                      <Button \n                        onClick={() => setSubmitted(false)} \n                        variant=\"outline\"\n                        className=\"w-full rounded-[2rem] h-16 text-xl font-bold border-2\"\n                      >\n                        Enviar Outra Mensagem\n                      </Button>\n                    </CardContent>\n                  </Card>\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n\n        <footer className=\"mt-20 text-center space-y-4 py-12 px-4 border-t border-border/50\">\n          <div className=\"flex flex-wrap justify-center items-center gap-3 sm:gap-6 text-muted-foreground text-sm sm:text-base\">\n            <a href=\"https://fabrisite.com.br/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"hover:text-primary transition-colors font-bold\">FabriSite</a>\n            <span className=\"w-1.5 h-1.5 rounded-full bg-border\" />\n            <a href=\"#\" className=\"hover:text-primary transition-colors font-bold\">Termos de Uso</a>\n            <span className=\"w-1.5 h-1.5 rounded-full bg-border\" />\n            <a href=\"#\" className=\"hover:text-primary transition-colors font-bold\">Privacidade</a>\n          </div>\n          <p className=\"text-xs sm:text-sm text-muted-foreground font-bold italic\">© 2026 BíbliaFS | Desenvolvido por | <a href=\"https://fabrisite.com.br/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary hover:underline\">FabriSite</a></p>\n        </footer>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":20093,"size_tokens":null},"client/src/pages/help.tsx":{"content":"import { motion } from \"framer-motion\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { HelpCircle, MessageCircle, Book, Video, Mail, ArrowLeft, Sparkles, Heart, Globe, Smartphone, Clock } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nexport default function Help() {\n  const faqs = [\n    {\n      q: \"Como criar um plano de leitura?\",\n      a: \"Acesse a seção 'Planos' no menu lateral ou na navegação inferior. Você verá uma lista de planos disponíveis organizados por duração. Clique em 'Iniciar Plano' no plano que desejar e ele será automaticamente adicionado aos seus planos ativos.\",\n      icon: Book\n    },\n    {\n      q: \"Como funciona o modo offline?\",\n      a: \"No leitor da Bíblia, você verá um ícone de nuvem no canto superior. Clique nele para baixar o capítulo atual e poder lê-lo mesmo sem internet. Você pode gerenciar todos os capítulos baixados acessando a página 'Offline' no menu lateral.\",\n      icon: Smartphone\n    },\n    {\n      q: \"Posso destacar e fazer anotações nos versículos?\",\n      a: \"Sim! Ao ler a Bíblia, clique em qualquer versículo para abrir um menu com opções. Você pode escolher entre 6 cores de destaque, adicionar notas pessoais ou salvar como favorito. Todas as marcações ficam sincronizadas na nuvem.\",\n      icon: Sparkles\n    },\n    {\n      q: \"Como funciona o sistema de gamificação?\",\n      a: \"Cada vez que você lê capítulos ou completa planos, ganha XP. Ao acumular XP, você sobe de nível: Iniciante → Aprendiz → Conhecedor → Sábio → Mestre. Além disso, pode conquistar insígnias por atingir marcos especiais.\",\n      icon: Heart\n    },\n    {\n      q: \"Como usar o diário de orações?\",\n      a: \"Acesse 'Orações' no menu e clique em 'Nova Oração'. Você pode escrever sua oração e até gravar um áudio. Quando a oração for respondida, marque-a como 'Respondida' para manter um histórico das bênçãos.\",\n      icon: Clock\n    },\n    {\n      q: \"Igrejas podem usar o BíbliaFS para dar aulas?\",\n      a: \"Sim! Se alguma igreja tiver interesse de usar para dar aulas para alunos, entre em contato que criamos um plano de acordo com a quantidade de membros.\",\n      icon: Heart\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] rounded-full bg-primary/20 dark:bg-primary/10 blur-[120px] animate-pulse\" />\n        <div className=\"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] rounded-full bg-primary/10 dark:bg-primary/5 blur-[120px] animate-pulse\" />\n      </div>\n\n      <div className=\"relative z-10 max-w-4xl mx-auto p-4 md:p-8 space-y-8\">\n        <motion.div \n          initial={{ opacity: 0, x: -20 }} \n          animate={{ opacity: 1, x: 0 }}\n          className=\"flex items-center gap-4\"\n        >\n          <Link href=\"/about\" data-testid=\"link-back-help\">\n            <Button variant=\"ghost\" size=\"icon\" className=\"rounded-xl\" data-testid=\"button-back-help\">\n              <ArrowLeft className=\"h-5 w-5\" />\n            </Button>\n          </Link>\n          <p className=\"text-muted-foreground\">Voltar para Sobre</p>\n        </motion.div>\n\n        <motion.div \n          initial={{ opacity: 0, y: -20 }} \n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center space-y-4 mb-12\"\n        >\n          <div className=\"flex justify-center mb-6\">\n            <div className=\"h-24 w-24 rounded-3xl glass-premium hover-premium shadow-xl flex items-center justify-center relative overflow-hidden group\">\n              <div className=\"absolute inset-0 bg-gradient-to-br from-amber-500/5 via-transparent to-transparent\" />\n              <HelpCircle className=\"h-12 w-12 text-amber-500 drop-shadow-sm relative z-10\" />\n            </div>\n          </div>\n          <h1 className=\"text-2xl md:text-3xl font-bold bg-gradient-to-r from-foreground via-muted-foreground to-foreground bg-clip-text text-transparent italic uppercase tracking-tighter\">\n            Ajuda e Suporte\n          </h1>\n          <p className=\"text-muted-foreground text-lg font-bold\">\n            Estamos aqui para ajudar você a aproveitar ao máximo o BíbliaFS\n          </p>\n        </motion.div>\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }}>\n          <Card data-testid=\"card-faq\" className=\"rounded-[2.5rem] border-none bg-gradient-to-br from-primary/5 via-card to-indigo-500/5 shadow-xl overflow-hidden relative\">\n            <div className=\"absolute top-0 right-0 w-48 h-48 bg-gradient-to-bl from-primary/10 via-purple-500/5 to-transparent rounded-bl-full z-0\" />\n            <CardHeader className=\"p-8 border-b border-border/50 relative z-10\">\n              <CardTitle className=\"flex items-center gap-3 text-2xl font-semibold text-foreground\">\n                <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-primary to-indigo-600 text-white shadow-lg\">\n                  <Book className=\"h-6 w-6\" />\n                </div>\n                Perguntas Frequentes\n              </CardTitle>\n              <CardDescription className=\"text-base text-muted-foreground\">\n                Clique nas perguntas para ver as respostas\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"p-8 relative z-10\">\n              <Accordion type=\"single\" collapsible className=\"w-full space-y-4\">\n                {faqs.map((faq, idx) => (\n                  <AccordionItem \n                    key={idx} \n                    value={`item-${idx}`} \n                    className=\"border-none bg-muted hover:bg-muted transition-colors rounded-2xl px-6 border border-border\"\n                    data-testid={`accordion-faq-${idx}`}\n                  >\n                    <AccordionTrigger className=\"hover:no-underline py-6 font-bold text-lg text-left text-foreground hover:text-foreground transition-colors\" data-testid={`trigger-faq-${idx}`}>\n                      <div className=\"flex items-center gap-4\">\n                        <faq.icon className=\"h-5 w-5 text-primary shrink-0\" />\n                        <span className=\"tracking-tight\">{faq.q}</span>\n                      </div>\n                    </AccordionTrigger>\n                    <AccordionContent className=\"text-muted-foreground text-base font-medium leading-relaxed pb-6\">\n                      {faq.a}\n                    </AccordionContent>\n                  </AccordionItem>\n                ))}\n              </Accordion>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }}>\n            <Card data-testid=\"card-tutorials\" className=\"rounded-[2rem] border-none bg-gradient-to-br from-rose-500/10 via-card to-orange-500/5 shadow-xl h-full relative overflow-hidden\">\n              <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-rose-500/15 to-transparent rounded-bl-full z-0\" />\n              <CardHeader className=\"relative z-10\">\n                <CardTitle className=\"flex items-center gap-3 text-foreground font-semibold\">\n                  <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-rose-500 to-orange-600 text-white shadow-lg\">\n                    <Video className=\"h-6 w-6\" />\n                  </div>\n                  Tutoriais em Vídeo\n                </CardTitle>\n                <CardDescription className=\"text-base text-muted-foreground\">\n                  Aprenda a usar todos os recursos\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-6 relative z-10\">\n                <p className=\"text-muted-foreground font-medium leading-relaxed\">\n                  Em breve disponibilizaremos tutoriais em vídeo para ajudá-lo a explorar todos os recursos do BíbliaFS de forma visual e prática.\n                </p>\n                <Button variant=\"outline\" className=\"w-full rounded-2xl h-12 border-border text-muted-foreground font-bold italic uppercase tracking-widest bg-muted\" disabled>\n                  <Video className=\"h-4 w-4 mr-2\" />\n                  Ver Tutoriais (Em Breve)\n                </Button>\n              </CardContent>\n            </Card>\n          </motion.div>\n\n          <motion.div initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 }}>\n            <Card data-testid=\"card-contact-support\" className=\"rounded-[2rem] border-none bg-gradient-to-br from-emerald-500/10 via-card to-teal-500/5 shadow-xl h-full relative overflow-hidden\">\n              <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-emerald-500/15 to-transparent rounded-bl-full z-0\" />\n              <CardHeader className=\"relative z-10\">\n                <CardTitle className=\"flex items-center gap-3 text-foreground font-semibold\">\n                  <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 shadow-lg text-white\">\n                    <MessageCircle className=\"h-6 w-6\" />\n                  </div>\n                  Precisa de Mais Ajuda?\n                </CardTitle>\n                <CardDescription className=\"text-base font-bold text-muted-foreground italic\">\n                  Nossa equipe está pronta para atendê-lo\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-6 relative z-10\">\n                <p className=\"text-muted-foreground font-medium leading-relaxed\">\n                  Se você não encontrou a resposta para sua dúvida nas FAQs acima, entre em contato conosco diretamente. Responderemos o mais breve possível!\n                </p>\n                <Link href=\"/contact\" data-testid=\"link-contact-help\">\n                  <Button className=\"w-full rounded-2xl h-12 shadow-xl shadow-primary/20 font-bold italic uppercase tracking-widest\" data-testid=\"button-contact-us\">\n                    <Mail className=\"h-4 w-4 mr-2\" />\n                    Fale Conosco\n                  </Button>\n                </Link>\n              </CardContent>\n            </Card>\n          </motion.div>\n        </div>\n\n        <footer className=\"text-center text-sm text-muted-foreground py-8 border-t border-border\">\n          <p>© 2026 BíbliaFS | Desenvolvido por | <a href=\"https://fabrisite.com.br/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary hover:underline font-medium\">FabriSite</a></p>\n        </footer>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":10912,"size_tokens":null},"client/src/pages/privacy.tsx":{"content":"import { motion } from \"framer-motion\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Shield, ArrowLeft, Lock, Eye, Database, Users, Cookie, Baby, RefreshCw, Mail } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nexport default function Privacy() {\n  const sections = [\n    {\n      title: \"1. Informações que Coletamos\",\n      icon: Database,\n      content: [\n        { label: \"Informações de Conta\", desc: \"Nome, e-mail e foto de perfil (quando você se registra)\" },\n        { label: \"Conteúdo do Usuário\", desc: \"Notas, destaques, orações, planos de leitura e posts na comunidade\" },\n        { label: \"Dados de Uso\", desc: \"Estatísticas de leitura, progresso em planos, conquistas e atividades\" },\n        { label: \"Informações Técnicas\", desc: \"Tipo de dispositivo, sistema operacional e dados de navegação\" },\n        { label: \"Dados de Pagamento\", desc: \"Informações de doação processadas de forma segura pelo Stripe\" }\n      ]\n    },\n    {\n      title: \"2. Como Usamos Suas Informações\",\n      icon: Eye,\n      items: [\n        \"Fornecer e melhorar nossos serviços\",\n        \"Personalizar sua experiência de estudo bíblico\",\n        \"Sincronizar seus dados entre dispositivos\",\n        \"Processar doações de forma segura\",\n        \"Enviar notificações sobre planos de leitura (se ativado)\",\n        \"Analisar padrões de uso para melhorar o aplicativo\",\n        \"Comunicar atualizações importantes do serviço\"\n      ]\n    },\n    {\n      title: \"3. Compartilhamento de Informações\",\n      icon: Users,\n      intro: \"Nunca vendemos suas informações pessoais. Compartilhamos dados apenas:\",\n      items: [\n        \"Com outros usuários, quando você publica na comunidade\",\n        \"Com processadores de pagamento (Stripe) para doações seguras\",\n        \"Quando exigido por lei ou ordem judicial\",\n        \"Com seu consentimento explícito\"\n      ]\n    },\n    {\n      title: \"4. Segurança dos Dados\",\n      icon: Lock,\n      items: [\n        \"Criptografia de dados em trânsito (HTTPS/SSL)\",\n        \"Armazenamento seguro em servidores protegidos\",\n        \"Senhas criptografadas com bcrypt\",\n        \"Acesso restrito a dados pessoais\",\n        \"Backups regulares e seguros\"\n      ]\n    },\n    {\n      title: \"5. Seus Direitos\",\n      icon: Shield,\n      items: [\n        \"Acessar suas informações pessoais\",\n        \"Corrigir dados incorretos\",\n        \"Solicitar exclusão de sua conta e dados\",\n        \"Exportar seus dados\",\n        \"Optar por não receber notificações\",\n        \"Revogar consentimentos a qualquer momento\"\n      ]\n    },\n    {\n      title: \"6. Cookies e Armazenamento Local\",\n      icon: Cookie,\n      items: [\n        \"Manter você conectado\",\n        \"Lembrar suas preferências (idioma, tema)\",\n        \"Armazenar conteúdo offline\",\n        \"Melhorar o desempenho do aplicativo\"\n      ]\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] rounded-full bg-primary/20 dark:bg-primary/10 blur-[120px] animate-pulse\" />\n        <div className=\"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] rounded-full bg-primary/10 dark:bg-primary/5 blur-[120px] animate-pulse\" />\n      </div>\n\n      <div className=\"relative z-10 max-w-4xl mx-auto p-4 md:p-8 space-y-8\">\n        <motion.div \n          initial={{ opacity: 0, x: -20 }} \n          animate={{ opacity: 1, x: 0 }}\n          className=\"flex items-center gap-4\"\n        >\n          <Link href=\"/about\" data-testid=\"link-back-privacy\">\n            <Button variant=\"ghost\" size=\"icon\" className=\"rounded-xl\" data-testid=\"button-back-privacy\">\n              <ArrowLeft className=\"h-5 w-5\" />\n            </Button>\n          </Link>\n          <p className=\"text-muted-foreground\">Voltar para Sobre</p>\n        </motion.div>\n\n        <motion.div \n          initial={{ opacity: 0, y: -20 }} \n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center space-y-4 mb-12\"\n        >\n          <div className=\"flex justify-center mb-6\">\n            <div className=\"h-24 w-24 rounded-3xl glass-premium hover-premium shadow-xl flex items-center justify-center relative overflow-hidden\">\n              <Shield className=\"h-12 w-12 text-blue-600 drop-shadow-sm\" />\n            </div>\n          </div>\n          <h1 className=\"text-2xl md:text-3xl font-semibold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent\">\n            Política de Privacidade\n          </h1>\n          <p className=\"text-muted-foreground font-bold italic\">\n            Última atualização: {new Date().toLocaleDateString('pt-BR')}\n          </p>\n        </motion.div>\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }}>\n          <Card data-testid=\"card-intro\" className=\"rounded-[2rem] border-none bg-gradient-to-br from-blue-500/10 via-card to-indigo-500/5 shadow-xl relative overflow-hidden\">\n            <div className=\"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-blue-500/15 to-transparent rounded-bl-full z-0\" />\n            <CardHeader className=\"relative z-10\">\n              <CardTitle className=\"text-xl font-semibold text-foreground\">Introdução</CardTitle>\n            </CardHeader>\n            <CardContent className=\"text-muted-foreground font-medium text-lg relative z-10\">\n              <p>\n                No BíbliaFS, levamos sua privacidade a sério. Esta Política de Privacidade explica \n                como coletamos, usamos, armazenamos e protegemos suas informações pessoais.\n              </p>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        {sections.map((section, idx) => (\n          <motion.div\n            key={section.title}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.15 + idx * 0.05 }}\n          >\n            <Card className=\"rounded-[2rem] border-none bg-gradient-to-br from-primary/5 via-card to-purple-500/5 shadow-xl relative overflow-hidden group\">\n              <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-primary/10 to-transparent rounded-bl-full z-0\" />\n              <CardHeader className=\"relative z-10\">\n                <CardTitle className=\"flex items-center gap-3 text-foreground font-semibold\">\n                  <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-primary to-indigo-600 text-white shadow-lg\">\n                    <section.icon className=\"h-5 w-5\" />\n                  </div>\n                  {section.title}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3 text-muted-foreground font-medium relative z-10\">\n                {section.intro && <p className=\"font-bold text-foreground italic\">{section.intro}</p>}\n                {section.content && (\n                  <ul className=\"space-y-4\">\n                    {section.content.map((item, i) => (\n                      <li key={i} className=\"flex items-start gap-4\">\n                        <span className=\"h-2 w-2 rounded-full bg-primary/60 shadow-sm mt-2 flex-shrink-0\" />\n                        <div>\n                          <strong className=\"text-foreground font-bold  tracking-wider text-[10px] block mb-1\">{item.label}</strong>\n                          <span className=\"text-muted-foreground\">{item.desc}</span>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n                {section.items && (\n                  <ul className=\"space-y-3\">\n                    {section.items.map((item, i) => (\n                      <li key={i} className=\"flex items-start gap-3\">\n                        <span className=\"h-2 w-2 rounded-full bg-primary/60 shadow-sm mt-2 flex-shrink-0\" />\n                        <span className=\"text-muted-foreground\">{item}</span>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n              </CardContent>\n            </Card>\n          </motion.div>\n        ))}\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }}>\n          <Card className=\"rounded-[2rem] border-none glass-premium hover-premium shadow-xl relative overflow-hidden\">\n            <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-muted to-transparent rounded-bl-full z-0\" />\n            <CardHeader className=\"relative z-10\">\n              <CardTitle className=\"flex items-center gap-3 text-foreground font-bold  tracking-tighter\">\n                <div className=\"p-2.5 rounded-xl bg-pink-500/10 border border-pink-100 shadow-sm\">\n                  <Baby className=\"h-5 w-5 text-pink-600\" />\n                </div>\n                7. Privacidade de Menores\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"text-muted-foreground font-medium relative z-10\">\n              <p>\n                O BíbliaFS pode ser usado por menores de idade, mas recomendamos supervisão parental. \n                Não coletamos intencionalmente informações de crianças menores de 13 anos sem \n                consentimento dos pais.\n              </p>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.55 }}>\n          <Card className=\"rounded-[2rem] border-none glass-premium hover-premium shadow-xl relative overflow-hidden\">\n            <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-muted to-transparent rounded-bl-full z-0\" />\n            <CardHeader className=\"relative z-10\">\n              <CardTitle className=\"flex items-center gap-3 text-foreground font-bold  tracking-tighter\">\n                <div className=\"p-2.5 rounded-xl bg-amber-500/10 border border-amber-100 shadow-sm\">\n                  <RefreshCw className=\"h-5 w-5 text-amber-600\" />\n                </div>\n                8. Alterações nesta Política\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"text-muted-foreground font-medium relative z-10\">\n              <p>\n                Podemos atualizar esta Política de Privacidade periodicamente. Notificaremos sobre \n                mudanças significativas através do aplicativo ou por e-mail.\n              </p>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.6 }}>\n          <Card className=\"rounded-[2rem] border-none glass-premium hover-premium shadow-xl relative overflow-hidden\">\n            <div className=\"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-muted to-transparent rounded-bl-full z-0\" />\n            <CardHeader className=\"relative z-10\">\n              <CardTitle className=\"flex items-center gap-3 text-foreground font-bold  tracking-tighter\">\n                <div className=\"p-2.5 rounded-xl bg-green-500/10 border border-green-100 shadow-sm\">\n                  <Mail className=\"h-5 w-5 text-green-600\" />\n                </div>\n                9. Contato\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"text-muted-foreground font-medium relative z-10\">\n              <p>\n                Para questões sobre privacidade ou para exercer seus direitos, entre em contato \n                através da página \"Fale Conosco\".\n              </p>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <motion.div \n          initial={{ opacity: 0, y: 20 }} \n          animate={{ opacity: 1, y: 0 }} \n          transition={{ delay: 0.65 }}\n          className=\"grid md:grid-cols-3 gap-6 py-8\"\n        >\n          {[\n            { href: \"/about\", title: \"Sobre\", desc: \"Conheça o BíbliaFS\" },\n            { href: \"/terms\", title: \"Termos de Uso\", desc: \"Regras e condições\" },\n            { href: \"/security\", title: \"Segurança\", desc: \"Proteção de dados\" }\n          ].map((link, idx) => (\n            <Link key={idx} href={link.href}>\n              <Card className=\"rounded-2xl border-none glass-premium hover-premium shadow-lg cursor-pointer h-full transition-all hover:shadow-xl \">\n                <CardContent className=\"p-6 text-center\">\n                  <h3 className=\"font-bold text-foreground mb-1 uppercase tracking-tight\">{link.title}</h3>\n                  <p className=\"text-sm text-muted-foreground font-bold italic\">{link.desc}</p>\n                </CardContent>\n              </Card>\n            </Link>\n          ))}\n        </motion.div>\n\n        <footer className=\"text-center text-sm text-muted-foreground py-8 border-t border-border\">\n          <p>© 2026 BíbliaFS | Desenvolvido por | <a href=\"https://fabrisite.com.br/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary hover:underline font-medium\">FabriSite</a></p>\n        </footer>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":13297,"size_tokens":null},"VALIDATION_GUIDE.md":{"content":"# Guia Completo de Validação - Bíblia+ v2.0\n\n## 📋 Visão Geral\n\nEste guia apresenta uma estratégia completa para validar todo o aplicativo Bíblia+ em múltiplas camadas: dados, segurança, integridade e funcionalidade.\n\n---\n\n## 1. 🛡️ Validação de Dados (Frontend + Backend)\n\n### 1.1 Schema Centralizado (`shared/schema.ts`)\n\n**Estratégia**: Definir schemas Zod reutilizáveis que servem tanto para validação frontend quanto backend.\n\n**Como funciona atualmente**:\n```typescript\n// Exemplo: Schema de orações\nexport const insertPrayerSchema = createInsertSchema(prayers).omit({\n  id: true,\n  userId: true,\n  createdAt: true,\n});\n```\n\n**Melhorias recomendadas**:\n- ✅ Adicionar validações de domínio específicas\n- ✅ Validar limites de caracteres\n- ✅ Validar formatos específicos\n\n**Exemplo de validação robusta**:\n```typescript\nexport const insertPrayerSchema = createInsertSchema(prayers)\n  .omit({ id: true, userId: true, createdAt: true })\n  .extend({\n    title: z.string().min(3, \"Título deve ter pelo menos 3 caracteres\").max(100),\n    content: z.string().min(10, \"Oração deve ter pelo menos 10 caracteres\").max(5000),\n    category: z.enum([\"thanksgiving\", \"supplication\", \"intercession\", \"confession\"]),\n  });\n```\n\n### 1.2 Validação Frontend (Formulários)\n\n**Localização**: Componentes de formulário usam `react-hook-form` + `zodResolver`\n\n**Checklist de validação frontend**:\n- ✅ Usar `zodResolver` em todos os formulários\n- ✅ Mostrar mensagens de erro claras\n- ✅ Validar antes de enviar ao backend\n- ✅ Feedback visual de erros\n\n**Exemplo**:\n```typescript\nconst form = useForm<InsertPrayer>({\n  resolver: zodResolver(insertPrayerSchema),\n  defaultValues: { title: \"\", content: \"\", category: \"supplication\" }\n});\n```\n\n### 1.3 Validação Backend (API Routes)\n\n**Localização**: `server/routes.ts`\n\n**Checklist de validação backend**:\n- ✅ Re-validar SEMPRE no backend (nunca confiar no cliente)\n- ✅ Usar `safeParse()` do Zod para validação segura\n- ✅ Retornar erros HTTP apropriados (400 para dados inválidos)\n- ✅ Validar ownership (userId)\n\n**Exemplo de rota validada**:\n```typescript\napp.post(\"/api/prayers\", isAuthenticated, async (req, res) => {\n  // 1. Validar dados com Zod\n  const result = insertPrayerSchema.safeParse(req.body);\n  \n  if (!result.success) {\n    return res.status(400).json({ \n      error: \"Dados inválidos\", \n      details: result.error.errors \n    });\n  }\n  \n  // 2. Adicionar userId do usuário autenticado\n  const prayerData = {\n    ...result.data,\n    userId: req.user!.id\n  };\n  \n  // 3. Criar no banco\n  const prayer = await storage.createPrayer(prayerData);\n  \n  res.json(prayer);\n});\n```\n\n---\n\n## 2. 🔐 Validação de Segurança\n\n### 2.1 Autenticação\n\n**Middleware**: `isAuthenticated` em `server/index.ts`\n\n**Checklist**:\n- ✅ Todas as rotas protegidas usam `isAuthenticated`\n- ✅ Session management com PostgreSQL\n- ✅ Cookies httpOnly e secure\n\n**Rotas que DEVEM ser protegidas**:\n```typescript\n// ✅ Correto\napp.get(\"/api/prayers\", isAuthenticated, async (req, res) => { ... });\napp.post(\"/api/plans/:id/progress\", isAuthenticated, async (req, res) => { ... });\napp.delete(\"/api/highlights/:id\", isAuthenticated, async (req, res) => { ... });\n```\n\n### 2.2 Autorização (Ownership)\n\n**Estratégia**: Verificar se o usuário tem permissão para acessar/modificar o recurso\n\n**Checklist**:\n- ✅ Sempre verificar `userId` antes de modificar dados\n- ✅ Usar queries com filtro `where: { id, userId }`\n- ✅ Retornar 403 Forbidden se não for o dono\n\n**Exemplo**:\n```typescript\n// ❌ INSEGURO - qualquer usuário pode deletar qualquer oração\napp.delete(\"/api/prayers/:id\", isAuthenticated, async (req, res) => {\n  await storage.deletePrayer(parseInt(req.params.id));\n  res.json({ success: true });\n});\n\n// ✅ SEGURO - só pode deletar suas próprias orações\napp.delete(\"/api/prayers/:id\", isAuthenticated, async (req, res) => {\n  const prayerId = parseInt(req.params.id);\n  const prayer = await storage.getPrayerById(prayerId);\n  \n  if (!prayer || prayer.userId !== req.user!.id) {\n    return res.status(403).json({ error: \"Acesso negado\" });\n  }\n  \n  await storage.deletePrayer(prayerId);\n  res.json({ success: true });\n});\n```\n\n### 2.3 Proteção de Dados Sensíveis\n\n**Checklist**:\n- ✅ Nunca retornar senhas ou tokens\n- ✅ Usar variáveis de ambiente para secrets\n- ✅ Sanitizar inputs de usuário (especialmente em posts da comunidade)\n- ✅ Validar webhooks do Stripe com assinatura\n\n---\n\n## 3. 💾 Validação de Integridade de Dados\n\n### 3.1 Transações para Operações Múltiplas\n\n**Quando usar**: Ao modificar múltiplas tabelas relacionadas\n\n**Exemplos críticos**:\n- Completar plano de leitura → atualizar progress + adicionar XP + desbloquear conquista\n- Ler capítulo → marcar como lido + adicionar XP + verificar streak\n\n**Implementação**:\n```typescript\n// Usar transação do Drizzle\nawait db.transaction(async (tx) => {\n  // 1. Marcar progresso\n  await tx.update(readingProgress).set({ completed: true });\n  \n  // 2. Adicionar XP\n  await tx.update(users).set({ xp: sql`${users.xp} + 50` });\n  \n  // 3. Verificar conquistas\n  const newAchievements = await checkAchievements(userId, tx);\n});\n```\n\n### 3.2 Validação de Relacionamentos\n\n**Checklist**:\n- ✅ Verificar se recursos relacionados existem antes de criar\n- ✅ Impedir órfãos (ex: progresso de plano sem plano existente)\n- ✅ Cascata de deleções quando apropriado\n\n**Exemplo**:\n```typescript\n// Antes de criar progresso, validar que o plano existe\napp.post(\"/api/plans/:planId/start\", isAuthenticated, async (req, res) => {\n  const plan = await storage.getReadingPlanById(parseInt(req.params.planId));\n  \n  if (!plan) {\n    return res.status(404).json({ error: \"Plano não encontrado\" });\n  }\n  \n  // Agora pode criar o progresso\n  const progress = await storage.startReadingPlan(req.user!.id, plan.id);\n  res.json(progress);\n});\n```\n\n### 3.3 Sincronização Offline\n\n**Validação necessária**:\n- ✅ Verificar conflitos de versão ao sincronizar\n- ✅ Resolver conflitos (last-write-wins ou merge)\n- ✅ Validar integridade do cache IndexedDB\n\n---\n\n## 4. 🧪 Estratégia de Testes\n\n### 4.1 Testes Unitários (Schemas e Lógica)\n\n**Ferramenta**: Vitest\n\n**O que testar**:\n```typescript\n// Exemplo: Testar validação de schema\ndescribe(\"Prayer Schema\", () => {\n  it(\"deve aceitar oração válida\", () => {\n    const valid = { title: \"Oração\", content: \"Senhor, ajude...\", category: \"supplication\" };\n    expect(insertPrayerSchema.safeParse(valid).success).toBe(true);\n  });\n  \n  it(\"deve rejeitar título muito curto\", () => {\n    const invalid = { title: \"A\", content: \"Conteúdo válido\", category: \"supplication\" };\n    expect(insertPrayerSchema.safeParse(invalid).success).toBe(false);\n  });\n});\n```\n\n### 4.2 Testes de Integração (API)\n\n**Ferramenta**: Supertest + banco de teste\n\n**O que testar**:\n```typescript\ndescribe(\"POST /api/prayers\", () => {\n  it(\"deve criar oração com dados válidos\", async () => {\n    const response = await request(app)\n      .post(\"/api/prayers\")\n      .send({ title: \"Título\", content: \"Conteúdo...\", category: \"thanksgiving\" })\n      .set(\"Cookie\", authCookie);\n    \n    expect(response.status).toBe(200);\n    expect(response.body).toHaveProperty(\"id\");\n  });\n  \n  it(\"deve rejeitar dados inválidos\", async () => {\n    const response = await request(app)\n      .post(\"/api/prayers\")\n      .send({ title: \"A\" }); // título muito curto, sem content\n    \n    expect(response.status).toBe(400);\n  });\n});\n```\n\n### 4.3 Testes E2E (Fluxo Completo)\n\n**Ferramenta**: Playwright ou Cypress\n\n**Fluxos críticos para testar**:\n\n1. **Plano de Leitura Completo**:\n   - Login → Escolher plano → Iniciar → Ler capítulos → Completar → Verificar XP/conquistas\n\n2. **Diário de Orações**:\n   - Criar oração → Gravar áudio → Editar → Marcar como respondida → Deletar\n\n3. **Modo Offline**:\n   - Baixar capítulos → Desconectar internet → Ler offline → Reconectar → Sincronizar\n\n4. **Doações**:\n   - Preencher formulário → Processar pagamento Stripe → Receber confirmação → Ver no perfil\n\n5. **Gamificação**:\n   - Ler 7 dias seguidos → Verificar streak → Desbloquear conquista → Subir de nível\n\n**Exemplo**:\n```typescript\ntest(\"fluxo completo de plano de leitura\", async ({ page }) => {\n  // 1. Login\n  await page.goto(\"/\");\n  await page.click(\"[data-testid='button-login']\");\n  \n  // 2. Escolher plano\n  await page.goto(\"/plans\");\n  await page.click(\"[data-testid='plan-7-days']\");\n  await page.click(\"[data-testid='button-start-plan']\");\n  \n  // 3. Ler primeiro capítulo\n  await page.click(\"[data-testid='link-first-chapter']\");\n  await page.waitForSelector(\"[data-testid='verse-1']\");\n  \n  // 4. Marcar como lido\n  await page.click(\"[data-testid='button-mark-complete']\");\n  \n  // 5. Verificar XP aumentou\n  await page.goto(\"/progress\");\n  const xp = await page.textContent(\"[data-testid='text-xp']\");\n  expect(parseInt(xp!)).toBeGreaterThan(0);\n});\n```\n\n---\n\n## 5. 🌐 Validação de APIs Externas\n\n### 5.1 ABíbliaDigital API\n\n**Checklist**:\n- ✅ Validar resposta com Zod schema\n- ✅ Fallback para cache offline se API falhar\n- ✅ Retry logic para falhas temporárias\n- ✅ Logging de erros\n\n**Exemplo**:\n```typescript\nconst bibleVerseSchema = z.object({\n  book: z.object({ name: z.string() }),\n  chapter: z.object({ number: z.number() }),\n  verses: z.array(z.object({\n    number: z.number(),\n    text: z.string()\n  }))\n});\n\nasync function fetchChapter(book: string, chapter: number) {\n  try {\n    const response = await fetch(`https://www.abibliadigital.com.br/api/verses/nvi/${book}/${chapter}`);\n    const data = await response.json();\n    \n    // Validar resposta\n    const result = bibleVerseSchema.safeParse(data);\n    \n    if (!result.success) {\n      console.error(\"Resposta da API inválida:\", result.error);\n      return loadFromOfflineCache(book, chapter); // fallback\n    }\n    \n    return result.data;\n  } catch (error) {\n    console.error(\"Erro ao buscar capítulo:\", error);\n    return loadFromOfflineCache(book, chapter);\n  }\n}\n```\n\n### 5.2 Stripe (Doações)\n\n**Checklist**:\n- ✅ Validar webhook signature\n- ✅ Verificar payment_intent status\n- ✅ Atualizar banco apenas após confirmação\n- ✅ Idempotência (não processar evento duplicado)\n\n---\n\n## 6. ✅ Checklist de Validação por Feature\n\n### 📖 Planos de Leitura\n- [ ] Schema validado (duração, schedule)\n- [ ] Ownership verificado (só pode modificar seus planos)\n- [ ] Transação ao completar (progress + XP + conquista)\n- [ ] Teste E2E: criar → ler → completar\n\n### 🙏 Diário de Orações\n- [ ] Validação de tamanho (título, conteúdo)\n- [ ] Categorias enum validadas\n- [ ] Áudio base64 validado\n- [ ] Ownership em edição/deleção\n- [ ] Teste: criar → editar → marcar respondida → deletar\n\n### 🎮 Gamificação\n- [ ] XP sempre não-negativo\n- [ ] Níveis calculados corretamente\n- [ ] Streak UTC midnight logic validado\n- [ ] Conquistas desbloqueadas apenas uma vez\n- [ ] Teste: acumular XP → subir nível → desbloquear badge\n\n### 📱 Modo Offline\n- [ ] IndexedDB sync validado\n- [ ] Conflitos de versão resolvidos\n- [ ] Limite de armazenamento respeitado\n- [ ] Teste: download → offline → sync\n\n### 💰 Doações (Stripe)\n- [ ] Webhook signature verificada\n- [ ] Status transitions validadas\n- [ ] Valores monetários validados (>= 1.00)\n- [ ] Teste: formulário → pagamento → confirmação\n\n### 👥 Comunidade\n- [ ] Input sanitizado (XSS prevention)\n- [ ] Like/unlike idempotente\n- [ ] Referências bíblicas validadas\n- [ ] Teste: criar post → curtir → descurtir\n\n---\n\n## 7. 🚀 Implementação Rápida\n\n### Prioridade 1 (Crítico - Fazer Agora)\n1. ✅ Adicionar validação de ownership em TODAS as rotas de edição/deleção\n2. ✅ Re-validar dados no backend com `safeParse()`\n3. ✅ Proteger webhooks do Stripe com signature\n4. ✅ Adicionar tratamento de erro em APIs externas\n\n### Prioridade 2 (Importante - Esta Semana)\n1. ✅ Implementar transações para operações de gamificação\n2. ✅ Adicionar testes unitários para schemas críticos\n3. ✅ Validar sincronização offline\n4. ✅ Adicionar rate limiting em endpoints sensíveis\n\n### Prioridade 3 (Desejável - Próximo Sprint)\n1. ✅ Testes E2E para fluxos principais\n2. ✅ Monitoring e alertas de erro\n3. ✅ Performance testing\n4. ✅ Accessibility validation\n\n---\n\n## 8. 📊 Como Validar Tudo (Passo a Passo)\n\n### Método 1: Validação Manual\n1. **Frontend**: Testar cada formulário com dados inválidos\n2. **Backend**: Usar Postman/Insomnia para testar APIs\n3. **Segurança**: Tentar acessar recursos de outros usuários\n4. **Fluxos**: Seguir user stories do início ao fim\n\n### Método 2: Automação\n1. **Setup**: Configurar Vitest + Playwright\n2. **Escrever**: Criar testes para schemas + rotas + fluxos\n3. **Executar**: `npm test` antes de cada deploy\n4. **CI/CD**: Integrar testes no pipeline\n\n### Método 3: Code Review\n1. **Checklist**: Usar este guia como checklist\n2. **Pair Review**: Revisar código com colega\n3. **Security Audit**: Verificar endpoints protegidos\n4. **Data Flow**: Rastrear dados do frontend ao banco\n\n---\n\n## 🎯 Resumo Executivo\n\n| Camada | O que validar | Como validar | Status Atual |\n|--------|---------------|--------------|--------------|\n| **Frontend** | Formulários, inputs | Zod + react-hook-form | ✅ Parcial |\n| **Backend** | Dados, ownership | safeParse() + middleware | ⚠️ Precisa melhorar |\n| **Segurança** | Auth, autorização | isAuthenticated + userId check | ✅ Implementado |\n| **Dados** | Integridade, relacionamentos | Transactions + foreign keys | ⚠️ Precisa transações |\n| **APIs** | Respostas externas | Schema validation + fallback | ⚠️ Precisa schemas |\n| **Testes** | Fluxos completos | Vitest + Playwright | ❌ Não implementado |\n\n---\n\n## 📝 Próximos Passos\n\n1. **Imediato**: Auditar todas as rotas e adicionar validação de ownership\n2. **Curto prazo**: Implementar testes unitários para schemas\n3. **Médio prazo**: Adicionar testes E2E para fluxos críticos\n4. **Longo prazo**: CI/CD com validação automática\n\n---\n\n**Documento criado em**: 20 de novembro de 2025  \n**Versão do app**: Bíblia+ v2.0  \n**Próxima revisão**: Após implementar Prioridade 1\n","path":null,"size_bytes":14358,"size_tokens":null},"server/api-client.ts":{"content":"/**\n * Robust API client with retry logic, timeouts, and structured error handling\n * for external API calls (ABíbliaDigital, Stripe, etc.)\n */\n\ninterface FetchOptions {\n  method?: string;\n  headers?: Record<string, string>;\n  body?: string;\n  timeout?: number;\n  retries?: number;\n  retryDelay?: number;\n}\n\ninterface ApiResponse<T> {\n  data?: T;\n  error?: string;\n  status?: string;\n  fromCache?: boolean;\n}\n\nexport class ApiError extends Error {\n  constructor(\n    public message: string,\n    public statusCode?: number,\n    public retryable: boolean = false\n  ) {\n    super(message);\n    this.name = \"ApiError\";\n  }\n}\n\n/**\n * Fetch with timeout support\n */\nasync function fetchWithTimeout(\n  url: string,\n  options: FetchOptions & { timeoutMs: number }\n): Promise<Response> {\n  const controller = new AbortController();\n  const timeout = setTimeout(() => controller.abort(), options.timeoutMs);\n\n  try {\n    const response = await fetch(url, {\n      ...options,\n      signal: controller.signal,\n    });\n    clearTimeout(timeout);\n    return response;\n  } catch (error: any) {\n    clearTimeout(timeout);\n    if (error.name === \"AbortError\") {\n      throw new ApiError(\n        `Request timeout after ${options.timeoutMs}ms`,\n        408,\n        true\n      );\n    }\n    throw error;\n  }\n}\n\n/**\n * Sleep utility for retry delays\n */\nfunction sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n/**\n * Robust fetch with retry logic and exponential backoff\n */\nexport async function robustFetch<T = any>(\n  url: string,\n  options: FetchOptions = {}\n): Promise<ApiResponse<T>> {\n  const {\n    method = \"GET\",\n    headers = {},\n    body,\n    timeout = 10000, // 10 seconds default\n    retries = 3,\n    retryDelay = 1000, // 1 second base delay\n  } = options;\n\n  let lastError: Error | null = null;\n  let attempt = 0;\n\n  while (attempt <= retries) {\n    try {\n      const response = await fetchWithTimeout(url, {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...headers,\n        },\n        body,\n        timeoutMs: timeout,\n      });\n\n      // Handle HTTP errors\n      if (!response.ok) {\n        const isRetryable = response.status >= 500 || response.status === 429;\n        const errorText = await response.text().catch(() => \"Unknown error\");\n        \n        throw new ApiError(\n          `HTTP ${response.status}: ${errorText}`,\n          response.status,\n          isRetryable\n        );\n      }\n\n      // Parse JSON response\n      const data = await response.json();\n      \n      // Check for API-specific error formats\n      if (data.error || data.err) {\n        throw new ApiError(\n          data.error || data.err || \"API returned error\",\n          response.status,\n          false\n        );\n      }\n\n      return { data, status: \"success\" };\n    } catch (error: any) {\n      lastError = error;\n      attempt++;\n\n      // Log attempt\n      console.warn(\n        `API request failed (attempt ${attempt}/${retries + 1}): ${url}`,\n        error.message\n      );\n\n      // Determine if we should retry\n      const shouldRetry =\n        attempt <= retries &&\n        (error instanceof ApiError ? error.retryable : true) &&\n        error.name !== \"AbortError\"; // Don't retry timeouts\n\n      if (!shouldRetry) {\n        break;\n      }\n\n      // Exponential backoff: 1s, 2s, 4s, 8s...\n      const delay = retryDelay * Math.pow(2, attempt - 1);\n      console.log(`Retrying in ${delay}ms...`);\n      await sleep(delay);\n    }\n  }\n\n  // All retries exhausted\n  const errorMessage =\n    lastError instanceof ApiError\n      ? lastError.message\n      : `Failed to fetch from ${url}: ${lastError?.message || \"Unknown error\"}`;\n\n  return {\n    error: errorMessage,\n    status: \"failed\",\n  };\n}\n\n/**\n * Fetch with fallback - try primary source, then fallback\n */\nexport async function fetchWithFallback<T>(\n  primaryUrl: string,\n  fallbackFn: () => T | Promise<T>,\n  options: FetchOptions = {}\n): Promise<ApiResponse<T>> {\n  const result = await robustFetch<T>(primaryUrl, options);\n\n  if (result.error) {\n    console.warn(`Primary API failed, using fallback: ${result.error}`);\n    try {\n      const fallbackData = await Promise.resolve(fallbackFn());\n      return {\n        data: fallbackData,\n        status: \"success\",\n        fromCache: true,\n      };\n    } catch (fallbackError: any) {\n      console.error(\"Fallback also failed:\", fallbackError.message);\n      return {\n        error: \"Both primary and fallback sources failed\",\n        status: \"failed\",\n      };\n    }\n  }\n\n  return result;\n}\n","path":null,"size_bytes":4581,"size_tokens":null},"client/src/pages/pricing.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport { \n  Check,\n  Sparkles,\n  Zap,\n  Crown,\n  ArrowLeft,\n  Loader2,\n  Settings,\n  Star,\n  Shield\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { useEffect } from \"react\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { motion } from \"framer-motion\";\nimport { STRIPE_MONTHLY_PRICE_ID, STRIPE_YEARLY_PRICE_ID, STRIPE_PREMIUM_PLUS_PRICE_ID } from \"@/lib/env-config\";\n\ninterface SubscriptionStatus {\n  plan: string;\n  stripeCustomerId: string | null;\n  stripeSubscriptionId: string | null;\n  aiRequestsToday: number;\n  aiRequestsResetAt: string | null;\n}\n\nconst plans = [\n  {\n    id: \"free\",\n    name: \"Gratuito\",\n    price: \"R$ 0\",\n    period: \"para sempre\",\n    description: \"Comece sua jornada bíblica\",\n    icon: Star,\n    iconBg: \"bg-muted0\",\n    features: [\n      \"Bíblia completa (4 versões)\",\n      \"Versículo do Dia\",\n      \"Destaques coloridos\",\n      \"Notas e anotações\",\n      \"Diário de orações\",\n      \"3 perguntas IA/dia\",\n    ],\n    cta: \"Plano Atual\",\n    popular: false,\n    priceId: null,\n    planType: \"free\",\n  },\n  {\n    id: \"monthly\",\n    name: \"Mensal\",\n    price: \"R$ 19,90\",\n    period: \"por mês\",\n    description: \"Acesso premium completo\",\n    icon: Sparkles,\n    iconBg: \"bg-primary\",\n    features: [\n      \"Tudo do Gratuito\",\n      \"IA Teológica: ~300 perguntas/mês\",\n      \"Podcasts integrados\",\n      \"Modo Professor\",\n      \"Áudio narrado\",\n      \"Temas personalizados\",\n      \"Suporte prioritário\",\n    ],\n    cta: \"Assinar\",\n    popular: true,\n    priceId: STRIPE_MONTHLY_PRICE_ID,\n    planType: \"monthly\",\n  },\n  {\n    id: \"yearly\",\n    name: \"Anual\",\n    price: \"R$ 149,90\",\n    period: \"por ano\",\n    description: \"Economize 37%\",\n    icon: Crown,\n    iconBg: \"bg-amber-500\",\n    features: [\n      \"Tudo do Mensal\",\n      \"IA Teológica: ~2.750 perguntas/ano\",\n      \"Economia de R$ 89/ano\",\n      \"Badge exclusivo\",\n      \"Comunidade VIP\",\n      \"Influencie recursos\",\n    ],\n    cta: \"Assinar\",\n    popular: false,\n    priceId: STRIPE_YEARLY_PRICE_ID,\n    planType: \"yearly\",\n  },\n  {\n    id: \"premium_plus\",\n    name: \"Premium Plus\",\n    price: \"R$ 289\",\n    period: \"por ano\",\n    description: \"Máximo poder de IA\",\n    icon: Zap,\n    iconBg: \"bg-blue-800\",\n    features: [\n      \"Tudo do Anual\",\n      \"IA Teológica: ~5.200 perguntas/ano\",\n      \"Dobro do limite comparado ao Anual\",\n      \"Acesso antecipado a recursos\",\n      \"Suporte VIP 24h\",\n    ],\n    cta: \"Assinar\",\n    popular: false,\n    priceId: STRIPE_PREMIUM_PLUS_PRICE_ID,\n    planType: \"premium_plus\",\n  },\n];\n\nconst faqs = [\n  {\n    question: \"Posso cancelar a qualquer momento?\",\n    answer: \"Sim! Cancele quando quiser, sem taxas. O acesso continua até o fim do período pago.\"\n  },\n  {\n    question: \"Quais formas de pagamento?\",\n    answer: \"Cartão de crédito, PIX e boleto via Stripe - a plataforma mais segura do mundo.\"\n  },\n  {\n    question: \"Funciona em vários dispositivos?\",\n    answer: \"Sim! Use em todos os seus dispositivos com sincronização automática.\"\n  },\n  {\n    question: \"Igrejas podem usar o BíbliaFS para dar aulas?\",\n    answer: \"Sim! Se alguma igreja tiver interesse de usar para dar aulas para alunos, entre em contato que criamos um plano de acordo com a quantidade de membros.\"\n  },\n];\n\nexport default function Pricing() {\n  const { toast } = useToast();\n  const [location] = useLocation();\n\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    if (params.get('success') === 'true') {\n      toast({\n        title: \"Pagamento confirmado!\",\n        description: \"Sua assinatura foi ativada. Aproveite o Premium!\",\n      });\n      window.history.replaceState({}, '', '/planos');\n    } else if (params.get('canceled') === 'true') {\n      toast({\n        title: \"Pagamento cancelado\",\n        description: \"Você pode tentar novamente quando quiser.\",\n        variant: \"destructive\",\n      });\n      window.history.replaceState({}, '', '/planos');\n    }\n  }, [location, toast]);\n\n  const { data: subscription } = useQuery<SubscriptionStatus>({\n    queryKey: ['/api/subscriptions/status'],\n  });\n\n  const checkoutMutation = useMutation({\n    mutationFn: async ({ priceId, planType }: { priceId: string; planType: string }) => {\n      const response = await apiRequest(\"POST\", '/api/subscriptions/checkout', { priceId, planType });\n      return response.json();\n    },\n    onSuccess: (data: { url: string }) => {\n      if (data.url) {\n        window.open(data.url, '_blank');\n      }\n    },\n    onError: (error: any) => {\n      const errorMsg = error.message || \"Erro ao processar pagamento\";\n      toast({\n        title: \"Erro no pagamento\",\n        description: errorMsg.includes(\"No such price\") \n          ? \"Plano não configurado. Entre em contato conosco.\"\n          : errorMsg,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const portalMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(\"POST\", '/api/subscriptions/portal');\n      return response.json();\n    },\n    onSuccess: (data: { url: string }) => {\n      if (data.url) {\n        window.open(data.url, '_blank');\n      }\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro\",\n        description: error.message || \"Tente novamente\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubscribe = (plan: typeof plans[0]) => {\n    if (plan.id === 'free') return;\n    \n    if (!plan.priceId) {\n      toast({\n        title: \"Em breve\",\n        description: \"Sistema de pagamentos em configuração. Tente novamente em breve.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    checkoutMutation.mutate({ priceId: plan.priceId, planType: plan.planType });\n  };\n\n  const currentPlan = subscription?.plan || 'free';\n  const isPremium = currentPlan !== 'free';\n\n  const getButtonConfig = (plan: typeof plans[0]) => {\n    const isCurrentPlan = plan.id === currentPlan;\n    \n    if (isCurrentPlan && isPremium) {\n      return { text: \"Gerenciar\", disabled: false, isPortal: true };\n    }\n    if (plan.id === 'free' && currentPlan === 'free') {\n      return { text: \"Plano Atual\", disabled: true, isPortal: false };\n    }\n    if (plan.id === 'free' && isPremium) {\n      return { text: \"Gerenciar\", disabled: false, isPortal: true };\n    }\n    if (isPremium && plan.id !== currentPlan) {\n      return { text: \"Mudar Plano\", disabled: false, isPortal: true };\n    }\n    return { text: plan.cta, disabled: false, isPortal: false };\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden mesh-primary\">\n      {/* Decorative background elements */}\n      <div className=\"absolute top-[-20%] right-[-10%] w-[50%] h-[50%] bg-primary/10 dark:bg-primary/5 rounded-full blur-[150px]\" />\n      <div className=\"absolute bottom-[-20%] left-[-10%] w-[50%] h-[50%] bg-muted/50 dark:bg-muted/30 rounded-full blur-[150px]\" />\n      \n      {/* Header */}\n      <div className=\"relative z-10 p-4 md:p-6\">\n        <Link href=\"/\">\n          <Button variant=\"ghost\" size=\"sm\" className=\"rounded-2xl\" data-testid=\"button-back\">\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Voltar\n          </Button>\n        </Link>\n      </div>\n\n      {/* Hero */}\n      <section className=\"relative z-10 px-4 pb-8 md:pb-12 text-center\">\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n        >\n          <p className=\"text-sm font-bold text-primary uppercase tracking-widest mb-3\">Planos Premium</p>\n          <h1 className=\"font-display text-2xl md:text-3xl font-extrabold mb-4 tracking-tight\" data-testid=\"text-page-title\">\n            Escolha seu Plano\n          </h1>\n          <p className=\"text-muted-foreground text-lg max-w-2xl mx-auto font-bold italic\">\n            Transforme seu estudo bíblico com recursos premium\n          </p>\n          \n          {isPremium && (\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              transition={{ delay: 0.3 }}\n            >\n              <Badge className=\"mt-6 bg-green-500/20 text-green-600 border-green-500/30 px-4 py-2 rounded-full text-sm font-bold\">\n                <Crown className=\"h-4 w-4 mr-2\" />\n                Assinante {currentPlan === 'monthly' ? 'Mensal' : currentPlan === 'yearly' ? 'Anual' : 'Premium Plus'}\n              </Badge>\n            </motion.div>\n          )}\n        </motion.div>\n      </section>\n\n      {/* Plans Grid */}\n      <section className=\"relative z-10 px-4 pb-12 md:pb-16\">\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8\">\n            {plans.filter(plan => plan.id !== 'free').map((plan, index) => {\n              const buttonConfig = getButtonConfig(plan);\n              const isCurrentPlan = plan.id === currentPlan;\n              const IconComponent = plan.icon;\n              \n              return (\n                <motion.div\n                  key={plan.id}\n                  initial={{ opacity: 0, y: 30 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: index * 0.1, duration: 0.5 }}\n                >\n                <Card \n                  className={`relative flex flex-col transition-all duration-700 rounded-[3rem] border-none glass-premium hover-premium shadow-[0_20px_50px_rgba(0,0,0,0.1)] hover:shadow-primary/30 overflow-hidden ${\n                    plan.popular ? 'ring-4 ring-primary shadow-primary/40 scale-105 z-20' : 'hover:scale-[1.03] border-2 border-transparent hover:border-primary/20'\n                  } ${isCurrentPlan ? 'ring-4 ring-green-500/50' : ''}`}\n                  data-testid={`card-plan-${plan.id}`}\n                >\n                  {plan.popular && (\n                    <div className=\"absolute inset-0 bg-gradient-to-b from-primary/5 to-transparent pointer-events-none\" />\n                  )}\n                  <div className={`absolute top-0 right-0 w-40 h-40 bg-gradient-to-bl ${plan.id === 'monthly' ? 'from-primary/5' : plan.id === 'yearly' ? 'from-amber-500/5' : 'from-blue-600/5'} via-transparent to-transparent z-0`} />\n                  <CardHeader className=\"pb-4 space-y-4 pt-10 px-8 relative z-10\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className={`h-16 w-16 rounded-2xl ${plan.iconBg} flex items-center justify-center shadow-lg border border-white/50`}>\n                        <IconComponent className=\"h-8 w-8 text-white drop-shadow-sm\" />\n                      </div>\n                      {plan.popular && (\n                        <Badge className=\"bg-primary text-white text-xs px-5 py-2 rounded-full font-black uppercase tracking-widest shadow-xl shadow-primary/40 border-none animate-pulse\">\n                          MAIS POPULAR\n                        </Badge>\n                      )}\n                    </div>\n                    \n                    <div>\n                      <CardTitle className=\"text-3xl font-black text-foreground tracking-tighter uppercase\">{plan.name}</CardTitle>\n                      <CardDescription className=\"text-base mt-2 font-bold text-primary italic bg-primary/5 inline-block px-3 py-1 rounded-lg\">\n                        {plan.description}\n                      </CardDescription>\n                    </div>\n                    \n                    <div className=\"pt-6 flex flex-col items-center justify-center bg-primary/10 rounded-[2rem] p-6 border-2 border-primary/20 shadow-inner\">\n                      <div className=\"flex items-baseline gap-1\">\n                        <span className=\"text-2xl font-black text-primary\">R$</span>\n                        <span className=\"text-6xl font-black text-foreground tracking-tighter\">\n                          {plan.price.replace('R$ ', '')}\n                        </span>\n                      </div>\n                      <div className=\"mt-2 bg-primary px-4 py-1 rounded-full shadow-lg shadow-primary/30\">\n                        <span className=\"text-white text-base font-black uppercase tracking-widest\">\n                          /{plan.period.toUpperCase()}\n                        </span>\n                      </div>\n                    </div>\n                  </CardHeader>\n\n                  <CardContent className=\"flex-1 pb-8 px-8 relative z-10\">\n                    <ul className=\"space-y-4\">\n                      {plan.features.map((feature, i) => (\n                        <li key={i} className=\"flex items-start gap-3 text-base\" data-testid={`feature-${plan.id}-${i}`}>\n                          <div className=\"p-1 rounded-full bg-muted border border-border mt-1 shadow-inner\">\n                            <Check className=\"h-3 w-3 text-primary\" />\n                          </div>\n                          <span className=\"font-bold text-muted-foreground leading-relaxed\">{feature}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </CardContent>\n\n                  <CardFooter className=\"pb-10 px-8 relative z-10\">\n                    <Button \n                      className={`w-full h-16 rounded-2xl font-black text-xl italic uppercase tracking-tighter transition-all hover:scale-[1.02] active:scale-[0.98] ${\n                        plan.popular ? 'bg-primary text-white shadow-2xl shadow-primary/40 hover:bg-primary/90' : 'bg-white dark:bg-zinc-900 text-foreground border-2 border-primary/20 hover:border-primary shadow-xl'\n                      }`}\n                      variant={plan.popular ? \"default\" : \"outline\"}\n                      disabled={buttonConfig.disabled || checkoutMutation.isPending || portalMutation.isPending}\n                      onClick={() => {\n                        if (buttonConfig.isPortal) {\n                          portalMutation.mutate();\n                        } else {\n                          handleSubscribe(plan);\n                        }\n                      }}\n                      data-testid={`button-cta-${plan.id}`}\n                    >\n                      {(checkoutMutation.isPending || portalMutation.isPending) && (\n                        <Loader2 className=\"h-5 w-5 mr-3 animate-spin\" />\n                      )}\n                      {buttonConfig.text}\n                      {buttonConfig.isPortal && <Settings className=\"h-5 w-5 ml-3\" />}\n                    </Button>\n                  </CardFooter>\n                </Card>\n                </motion.div>\n              );\n            })}\n          </div>\n        </div>\n      </section>\n\n      {/* Trust Badges */}\n      <section className=\"relative z-10 px-4 pb-12\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.5 }}\n          className=\"max-w-4xl mx-auto\"\n        >\n          <div className=\"flex flex-wrap justify-center gap-6 md:gap-10\">\n            <div className=\"flex items-center gap-2 bg-card px-5 py-3 rounded-2xl border border-border shadow-lg\">\n              <Shield className=\"h-5 w-5 text-green-500\" />\n              <span className=\"text-sm font-medium\">Pagamento seguro</span>\n            </div>\n            <div className=\"flex items-center gap-2 bg-card px-5 py-3 rounded-2xl border border-border shadow-lg\">\n              <Check className=\"h-5 w-5 text-green-500\" />\n              <span className=\"text-sm font-medium\">Cancele quando quiser</span>\n            </div>\n            <div className=\"flex items-center gap-2 bg-card px-5 py-3 rounded-2xl border border-border shadow-lg\">\n              <Star className=\"h-5 w-5 text-amber-500\" />\n              <span className=\"text-sm font-medium\">Garantia de 30 dias</span>\n            </div>\n          </div>\n        </motion.div>\n      </section>\n\n      {/* FAQ */}\n      <section className=\"relative z-10 px-4 pb-16\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.6 }}\n          className=\"max-w-2xl mx-auto\"\n        >\n          <h2 className=\"font-display text-3xl font-bold text-center mb-8\">\n            Perguntas Frequentes\n          </h2>\n          \n          <Accordion type=\"single\" collapsible className=\"w-full bg-card rounded-3xl border border-border shadow-xl overflow-hidden\">\n            {faqs.map((faq, index) => (\n              <AccordionItem key={index} value={`item-${index}`} className=\"border-b-border/30 last:border-b-0 px-6\">\n                <AccordionTrigger className=\"text-left py-5 text-base font-medium hover:no-underline\" data-testid={`faq-question-${index}`}>\n                  {faq.question}\n                </AccordionTrigger>\n                <AccordionContent className=\"text-muted-foreground pb-5 text-base font-medium\">\n                  {faq.answer}\n                </AccordionContent>\n              </AccordionItem>\n            ))}\n          </Accordion>\n        </motion.div>\n      </section>\n\n      {/* Footer CTA */}\n      <section className=\"relative z-10 px-4 pb-16\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.7 }}\n          className=\"max-w-2xl mx-auto text-center\"\n        >\n          <p className=\"text-muted-foreground mb-6 text-lg font-bold italic\">\n            Dúvidas? Estamos aqui para ajudar\n          </p>\n          <Link href=\"/contact\">\n            <Button variant=\"outline\" size=\"lg\" className=\"rounded-2xl px-8 h-12 font-bold\" data-testid=\"button-contact\">\n              Fale Conosco\n            </Button>\n          </Link>\n        </motion.div>\n      </section>\n    </div>\n  );\n}\n","path":null,"size_bytes":18256,"size_tokens":null},"server/multilingual-bible-apis.ts":{"content":"// Multilingual Bible APIs - Português via GitHub thiagobodruk/bible (JSON estático - SEM RATE LIMITS)\n// Suporta: Português (NVI, ACF) via cache local\n\nexport interface BibleVerse {\n  number: number;\n  text: string;\n}\n\nexport interface BibleChapter {\n  book: { name: string; abbrev: string };\n  chapter: { number: number };\n  verses: BibleVerse[];\n}\n\nexport interface BibleBook {\n  abbrev: { pt: string };\n  name: string;\n  chapters: number;\n  testament: string;\n}\n\nconst OLD_TESTAMENT_ABBREVS = new Set([\n  \"gn\",\"ex\",\"lv\",\"nm\",\"dt\",\"js\",\"jz\",\"rt\",\"1sm\",\"2sm\",\"1rs\",\"2rs\",\n  \"1cr\",\"2cr\",\"ed\",\"ne\",\"et\",\"jó\",\"sl\",\"pv\",\"ec\",\"ct\",\"is\",\"jr\",\n  \"lm\",\"ez\",\"dn\",\"os\",\"jl\",\"am\",\"ob\",\"jn\",\"mq\",\"na\",\"hc\",\"sf\",\"ag\",\"zc\",\"ml\"\n]);\n\nfunction getTestament(abbrev: string): string {\n  return OLD_TESTAMENT_ABBREVS.has(abbrev.toLowerCase()) ? \"VT\" : \"NT\";\n}\n\nlet bibleCache: Record<string, any> = {};\n\n// Helper to fetch with retry and timeout\nasync function fetchWithTimeout(url: string, timeout = 10000): Promise<Response> {\n  const controller = new AbortController();\n  const id = setTimeout(() => controller.abort(), timeout);\n  try {\n    const response = await fetch(url, { signal: controller.signal });\n    clearTimeout(id);\n    return response;\n  } catch (e) {\n    clearTimeout(id);\n    throw e;\n  }\n}\n\n// Book name mappings for each language\nconst BOOK_MAPPINGS: Record<string, Record<string, string>> = {\n  en: {\n    'gn': 'Genesis', 'ex': 'Exodus', 'lv': 'Leviticus', 'nm': 'Numbers', 'dt': 'Deuteronomy',\n    'js': 'Joshua', 'jz': 'Judges', 'rt': 'Ruth', '1sm': '1Samuel', '2sm': '2Samuel',\n    '1rs': '1Kings', '2rs': '2Kings', '1cr': '1Chronicles', '2cr': '2Chronicles',\n    'ed': 'Ezra', 'ne': 'Nehemiah', 'et': 'Esther', 'job': 'Job', 'sl': 'Psalms',\n    'pv': 'Proverbs', 'ec': 'Ecclesiastes', 'ct': 'SongofSolomon', 'is': 'Isaiah',\n    'jr': 'Jeremiah', 'lm': 'Lamentations', 'ez': 'Ezekiel', 'dn': 'Daniel',\n    'os': 'Hosea', 'jl': 'Joel', 'am': 'Amos', 'ob': 'Obadiah', 'jn': 'Jonah',\n    'mq': 'Micah', 'na': 'Nahum', 'hc': 'Habakkuk', 'sf': 'Zephaniah',\n    'ag': 'Haggai', 'zc': 'Zechariah', 'ml': 'Malachi',\n    'mt': 'Matthew', 'mc': 'Mark', 'lc': 'Luke', 'jo': 'John', 'at': 'Acts',\n    'rm': 'Romans', '1co': '1Corinthians', '2co': '2Corinthians', 'gl': 'Galatians',\n    'ef': 'Ephesians', 'fp': 'Philippians', 'cl': 'Colossians',\n    '1ts': '1Thessalonians', '2ts': '2Thessalonians',\n    '1tm': '1Timothy', '2tm': '2Timothy', 'tt': 'Titus', 'fm': 'Philemon',\n    'hb': 'Hebrews', 'tg': 'James', '1pe': '1Peter', '2pe': '2Peter',\n    '1jo': '1John', '2jo': '2John', '3jo': '3John', 'jd': 'Jude', 'ap': 'Revelation',\n  },\n  es: {\n    'gn': 'genesis', 'ex': 'exodus', 'lv': 'leviticus', 'nm': 'numbers', 'dt': 'deuteronomy',\n    'js': 'joshua', 'jz': 'judges', 'rt': 'ruth', '1sm': '1-samuel', '2sm': '2-samuel',\n    '1rs': '1-kings', '2rs': '2-kings', '1cr': '1-chronicles', '2cr': '2-chronicles',\n    'ed': 'ezra', 'ne': 'nehemiah', 'et': 'esther', 'job': 'job', 'sl': 'psalms',\n    'pv': 'proverbs', 'ec': 'ecclesiastes', 'ct': 'song-of-solomon', 'is': 'isaiah',\n    'jr': 'jeremiah', 'lm': 'lamentations', 'ez': 'ezekiel', 'dn': 'daniel',\n    'os': 'hosea', 'jl': 'joel', 'am': 'amos', 'ob': 'obadiah', 'jn': 'jonah',\n    'mq': 'micah', 'na': 'nahum', 'hc': 'habakkuk', 'sf': 'zephaniah',\n    'ag': 'haggai', 'zc': 'zechariah', 'ml': 'malachi',\n    'mt': 'matthew', 'mc': 'mark', 'lc': 'luke', 'jo': 'john', 'at': 'acts',\n    'rm': 'romans', '1co': '1-corinthians', '2co': '2-corinthians', 'gl': 'galatians',\n    'ef': 'ephesians', 'fp': 'philippians', 'cl': 'colossians',\n    '1ts': '1-thessalonians', '2ts': '2-thessalonians',\n    '1tm': '1-timothy', '2tm': '2-timothy', 'tt': 'titus', 'fm': 'philemon',\n    'hb': 'hebrews', 'tg': 'james', '1pe': '1-peter', '2pe': '2-peter',\n    '1jo': '1-john', '2jo': '2-john', '3jo': '3-john', 'jd': 'jude', 'ap': 'revelation',\n  },\n};\n\n// Fetch English Bible (wldeh/bible-api via CDN)\nexport async function fetchEnglishBible(book: string, chapter: number): Promise<BibleChapter> {\n  const bookName = BOOK_MAPPINGS.en[book] || book;\n  const url = `https://cdn.jsdelivr.net/gh/wldeh/bible-api/bibles/eng-web/books/${bookName}/chapters/${chapter}.json`;\n  \n  const response = await fetchWithTimeout(url);\n  \n  if (!response.ok) {\n    throw new Error(`English Bible API error: ${response.status}`);\n  }\n  \n  const data = await response.json();\n  \n  return {\n    book: { name: data.name || book, abbrev: book },\n    chapter: { number: chapter },\n    verses: data.verses.map((v: any) => ({\n      number: v.verse,\n      text: v.text,\n    })),\n  };\n}\n\n// Fetch Spanish Bible (Spanish Bible API - Reina Valera 1960)\nexport async function fetchSpanishBible(book: string, chapter: number): Promise<BibleChapter> {\n  const bookName = BOOK_MAPPINGS.es[book] || book;\n  const url = `https://ajphchgh0i.execute-api.us-west-2.amazonaws.com/dev/api/books/${bookName}/verses?range=${chapter}:1-${chapter}:200`;\n  \n  const response = await fetchWithTimeout(url);\n  \n  if (!response.ok) {\n    throw new Error(`Spanish Bible API error: ${response.status}`);\n  }\n  \n  const verses = await response.json();\n  \n  return {\n    book: { name: bookName, abbrev: book },\n    chapter: { number: chapter },\n    verses: verses.map((v: any) => ({\n      number: parseInt(v.reference.split(':')[1]) || v.verse || 1,\n      text: v.text || v.cleanText,\n    })),\n  };\n}\n\n// Fetch Dutch Bible (wldeh/bible-api - Statenvertaling)\nexport async function fetchDutchBible(book: string, chapter: number): Promise<BibleChapter> {\n  const bookName = BOOK_MAPPINGS.en[book] || book; // Use English mapping as fallback\n  const url = `https://cdn.jsdelivr.net/gh/wldeh/bible-api/bibles/nld-sv/books/${bookName}/chapters/${chapter}.json`;\n  \n  const response = await fetchWithTimeout(url);\n  \n  if (!response.ok) {\n    throw new Error(`Dutch Bible API error: ${response.status}`);\n  }\n  \n  const data = await response.json();\n  \n  return {\n    book: { name: data.name || book, abbrev: book },\n    chapter: { number: chapter },\n    verses: data.verses.map((v: any) => ({\n      number: v.verse,\n      text: v.text,\n    })),\n  };\n}\n\n// Fetch Portuguese Bible (GitHub thiagobodruk/bible - JSON estático, SEM RATE LIMITS!)\nexport async function fetchPortugueseBible(version: string, book: string, chapter: number): Promise<BibleChapter> {\n  const versionMap: Record<string, string> = {\n    'nvi': 'pt_nvi',\n    'acf': 'pt_acf',\n    'arc': 'pt_acf',\n    'ra': 'pt_nvi',\n  };\n  \n  const githubVersion = versionMap[version] || 'pt_nvi';\n  const cacheKey = `full-${githubVersion}`;\n  \n  try {\n    if (!bibleCache[cacheKey]) {\n      console.log(`[Bible API] Loading full Portuguese Bible: ${githubVersion}`);\n      const url = `https://raw.githubusercontent.com/thiagobodruk/bible/master/json/${githubVersion}.json`;\n      const response = await fetchWithTimeout(url, 15000); // 15s for full bible load\n      \n      if (!response.ok) {\n        throw new Error(`Portuguese Bible API error: ${response.status}`);\n      }\n      \n      bibleCache[cacheKey] = await response.json();\n    }\n    \n    const bibleData = bibleCache[cacheKey];\n    // Exact mapping for thiagobodruk abbreviations\n    const bookData = bibleData.find((b: any) => b.abbrev.toLowerCase() === book.toLowerCase());\n    \n    if (!bookData || !bookData.chapters || !bookData.chapters[chapter - 1]) {\n      throw new Error(`Chapter not found in JSON: ${book} ${chapter}`);\n    }\n    \n    const verses = bookData.chapters[chapter - 1];\n    \n    return {\n      book: { \n        name: bookData.name || book, \n        abbrev: book \n      },\n      chapter: { number: chapter },\n      verses: Array.isArray(verses) ? verses.map((text: string, index: number) => ({\n        number: index + 1,\n        text: typeof text === 'string' ? text.trim() : (text as any).text || '',\n      })) : [],\n    };\n  } catch (error) {\n    console.warn(`[Portuguese Bible] Error for ${book} ${chapter}:`, error);\n    throw error;\n  }\n}\n\n// Fetch Bible Books (multi-version support)\nexport async function fetchBibleBooks(): Promise<BibleBook[]> {\n  let books: BibleBook[] = [];\n\n  try {\n    const response = await fetchWithTimeout(\"https://www.abibliadigital.com.br/api/books\", 5000);\n    if (response.ok) {\n      books = await response.json();\n    }\n  } catch (e: any) {\n    console.warn(\"[Bible API] Primary books fetch failed, trying static fallback:\", e.message);\n  }\n\n  if (books.length === 0) {\n    try {\n      const url = \"https://raw.githubusercontent.com/thiagobodruk/bible/master/json/pt_nvi.json\";\n      const response = await fetchWithTimeout(url, 5000);\n      if (response.ok) {\n        const data = await response.json();\n        books = data.map((b: any) => ({\n          abbrev: { pt: b.abbrev.toLowerCase() },\n          name: b.name,\n          chapters: b.chapters.length,\n          testament: \"\"\n        }));\n      }\n    } catch (e: any) {\n      console.error(\"[Bible API] All book fetch attempts failed:\", e.message);\n    }\n  }\n\n  return books.map(b => ({\n    ...b,\n    testament: (b.testament && b.testament !== \"\") ? b.testament : getTestament(b.abbrev?.pt || \"\")\n  }));\n}\n\n// Main function - Switch based on language with caching\nexport async function fetchBibleChapter(\n  language: string,\n  version: string,\n  book: string,\n  chapter: number\n): Promise<BibleChapter> {\n  const cacheKey = `${language}-${version}-${book}-${chapter}`;\n  if (bibleCache[cacheKey]) {\n    return bibleCache[cacheKey];\n  }\n\n  let result: BibleChapter;\n  try {\n    switch (language) {\n      case 'pt':\n        result = await fetchPortugueseBible(version, book, chapter);\n        break;\n      case 'en':\n        result = await fetchEnglishBible(book, chapter);\n        break;\n      case 'es':\n        result = await fetchSpanishBible(book, chapter);\n        break;\n      case 'nl':\n        result = await fetchDutchBible(book, chapter);\n        break;\n      default:\n        result = await fetchPortugueseBible(version, book, chapter);\n    }\n\n    // Cache only if it has verses\n    if (result && result.verses && result.verses.length > 0) {\n      bibleCache[cacheKey] = result;\n    }\n    return result;\n  } catch (error) {\n    console.error(`[Bible API] Error fetching ${cacheKey}:`, error);\n    // Try fallback for Portuguese if main fetch fails\n    if (language === 'pt') {\n      const { getFallbackChapter } = await import('./bible-chapters-fallback');\n      const fallback = getFallbackChapter(version, book, chapter);\n      if (fallback) return fallback;\n    }\n    throw error;\n  }\n}\n","path":null,"size_bytes":10520,"size_tokens":null},"client/src/lib/gamification-levels.ts":{"content":"export interface GamificationLevel {\n  level: number;\n  title: string;\n  titleEn: string;\n  minXp: number;\n  maxXp: number;\n  badge: string;\n}\n\nexport const GAMIFICATION_LEVELS: GamificationLevel[] = [\n  { level: 1, title: \"Iniciante\", titleEn: \"Beginner\", minXp: 0, maxXp: 100, badge: \"seedling\" },\n  { level: 2, title: \"Curioso\", titleEn: \"Curious\", minXp: 100, maxXp: 250, badge: \"sprout\" },\n  { level: 3, title: \"Aprendiz\", titleEn: \"Apprentice\", minXp: 250, maxXp: 450, badge: \"leaf\" },\n  { level: 4, title: \"Estudante\", titleEn: \"Student\", minXp: 450, maxXp: 700, badge: \"book\" },\n  { level: 5, title: \"Dedicado\", titleEn: \"Dedicated\", minXp: 700, maxXp: 1000, badge: \"star\" },\n  { level: 6, title: \"Persistente\", titleEn: \"Persistent\", minXp: 1000, maxXp: 1350, badge: \"flame\" },\n  { level: 7, title: \"Focado\", titleEn: \"Focused\", minXp: 1350, maxXp: 1750, badge: \"target\" },\n  { level: 8, title: \"Constante\", titleEn: \"Constant\", minXp: 1750, maxXp: 2200, badge: \"calendar\" },\n  { level: 9, title: \"Comprometido\", titleEn: \"Committed\", minXp: 2200, maxXp: 2700, badge: \"check\" },\n  { level: 10, title: \"Leitor Bronze\", titleEn: \"Bronze Reader\", minXp: 2700, maxXp: 3250, badge: \"bronze\" },\n  { level: 11, title: \"Explorador\", titleEn: \"Explorer\", minXp: 3250, maxXp: 3850, badge: \"compass\" },\n  { level: 12, title: \"Buscador\", titleEn: \"Seeker\", minXp: 3850, maxXp: 4500, badge: \"search\" },\n  { level: 13, title: \"Investigador\", titleEn: \"Investigator\", minXp: 4500, maxXp: 5200, badge: \"magnifier\" },\n  { level: 14, title: \"Estudioso\", titleEn: \"Studious\", minXp: 5200, maxXp: 5950, badge: \"glasses\" },\n  { level: 15, title: \"Aplicado\", titleEn: \"Diligent\", minXp: 5950, maxXp: 6750, badge: \"pencil\" },\n  { level: 16, title: \"Devoto\", titleEn: \"Devout\", minXp: 6750, maxXp: 7600, badge: \"heart\" },\n  { level: 17, title: \"Fiel\", titleEn: \"Faithful\", minXp: 7600, maxXp: 8500, badge: \"shield\" },\n  { level: 18, title: \"Zeloso\", titleEn: \"Zealous\", minXp: 8500, maxXp: 9450, badge: \"fire\" },\n  { level: 19, title: \"Diligente\", titleEn: \"Hardworking\", minXp: 9450, maxXp: 10450, badge: \"hammer\" },\n  { level: 20, title: \"Leitor Prata\", titleEn: \"Silver Reader\", minXp: 10450, maxXp: 11500, badge: \"silver\" },\n  { level: 21, title: \"Conhecedor\", titleEn: \"Knowledgeable\", minXp: 11500, maxXp: 12600, badge: \"brain\" },\n  { level: 22, title: \"Sábio Iniciante\", titleEn: \"Novice Sage\", minXp: 12600, maxXp: 13750, badge: \"owl\" },\n  { level: 23, title: \"Pensador\", titleEn: \"Thinker\", minXp: 13750, maxXp: 14950, badge: \"lightbulb\" },\n  { level: 24, title: \"Reflexivo\", titleEn: \"Reflective\", minXp: 14950, maxXp: 16200, badge: \"mirror\" },\n  { level: 25, title: \"Contemplativo\", titleEn: \"Contemplative\", minXp: 16200, maxXp: 17500, badge: \"meditation\" },\n  { level: 26, title: \"Instruído\", titleEn: \"Learned\", minXp: 17500, maxXp: 18850, badge: \"scroll\" },\n  { level: 27, title: \"Esclarecido\", titleEn: \"Enlightened\", minXp: 18850, maxXp: 20250, badge: \"sun\" },\n  { level: 28, title: \"Iluminado\", titleEn: \"Illuminated\", minXp: 20250, maxXp: 21700, badge: \"lantern\" },\n  { level: 29, title: \"Inspirado\", titleEn: \"Inspired\", minXp: 21700, maxXp: 23200, badge: \"dove\" },\n  { level: 30, title: \"Leitor Ouro\", titleEn: \"Gold Reader\", minXp: 23200, maxXp: 24750, badge: \"gold\" },\n  { level: 31, title: \"Discípulo\", titleEn: \"Disciple\", minXp: 24750, maxXp: 26350, badge: \"footsteps\" },\n  { level: 32, title: \"Seguidor Fiel\", titleEn: \"Faithful Follower\", minXp: 26350, maxXp: 28000, badge: \"path\" },\n  { level: 33, title: \"Guardião\", titleEn: \"Guardian\", minXp: 28000, maxXp: 29700, badge: \"guardian\" },\n  { level: 34, title: \"Protetor\", titleEn: \"Protector\", minXp: 29700, maxXp: 31450, badge: \"armor\" },\n  { level: 35, title: \"Defensor\", titleEn: \"Defender\", minXp: 31450, maxXp: 33250, badge: \"sword\" },\n  { level: 36, title: \"Guerreiro\", titleEn: \"Warrior\", minXp: 33250, maxXp: 35100, badge: \"warrior\" },\n  { level: 37, title: \"Vencedor\", titleEn: \"Victor\", minXp: 35100, maxXp: 37000, badge: \"victory\" },\n  { level: 38, title: \"Campeão\", titleEn: \"Champion\", minXp: 37000, maxXp: 38950, badge: \"medal\" },\n  { level: 39, title: \"Herói da Fé\", titleEn: \"Hero of Faith\", minXp: 38950, maxXp: 40950, badge: \"hero\" },\n  { level: 40, title: \"Leitor Platina\", titleEn: \"Platinum Reader\", minXp: 40950, maxXp: 43000, badge: \"platinum\" },\n  { level: 41, title: \"Mestre Iniciante\", titleEn: \"Novice Master\", minXp: 43000, maxXp: 45100, badge: \"crown-bronze\" },\n  { level: 42, title: \"Mestre Aprendiz\", titleEn: \"Apprentice Master\", minXp: 45100, maxXp: 47250, badge: \"crown-silver\" },\n  { level: 43, title: \"Mestre Estudioso\", titleEn: \"Studious Master\", minXp: 47250, maxXp: 49450, badge: \"crown-gold\" },\n  { level: 44, title: \"Mestre Sábio\", titleEn: \"Wise Master\", minXp: 49450, maxXp: 51700, badge: \"wisdom\" },\n  { level: 45, title: \"Mestre Iluminado\", titleEn: \"Illuminated Master\", minXp: 51700, maxXp: 54000, badge: \"halo\" },\n  { level: 46, title: \"Doutor da Palavra\", titleEn: \"Doctor of the Word\", minXp: 54000, maxXp: 56350, badge: \"doctorate\" },\n  { level: 47, title: \"Teólogo Avançado\", titleEn: \"Advanced Theologian\", minXp: 56350, maxXp: 58750, badge: \"theology\" },\n  { level: 48, title: \"Erudito Bíblico\", titleEn: \"Biblical Scholar\", minXp: 58750, maxXp: 61200, badge: \"scholar\" },\n  { level: 49, title: \"Grão-Mestre\", titleEn: \"Grand Master\", minXp: 61200, maxXp: 63700, badge: \"grandmaster\" },\n  { level: 50, title: \"Mestre Teólogo\", titleEn: \"Master Theologian\", minXp: 63700, maxXp: Infinity, badge: \"ultimate\" },\n];\n\nexport const getLevelInfo = (level: number): GamificationLevel => {\n  const clampedLevel = Math.min(Math.max(level, 1), 50);\n  return GAMIFICATION_LEVELS[clampedLevel - 1];\n};\n\nexport const getLevelByXp = (totalXp: number): GamificationLevel => {\n  for (let i = GAMIFICATION_LEVELS.length - 1; i >= 0; i--) {\n    if (totalXp >= GAMIFICATION_LEVELS[i].minXp) {\n      return GAMIFICATION_LEVELS[i];\n    }\n  }\n  return GAMIFICATION_LEVELS[0];\n};\n\nexport const getXpForNextLevel = (currentLevel: number): number => {\n  if (currentLevel >= 50) return 0;\n  const nextLevel = GAMIFICATION_LEVELS[currentLevel];\n  return nextLevel ? nextLevel.minXp : 0;\n};\n\nexport const getXpProgressInLevel = (totalXp: number, level: number): { current: number; needed: number; percent: number } => {\n  const currentLevelInfo = GAMIFICATION_LEVELS[level - 1];\n  const nextLevelInfo = GAMIFICATION_LEVELS[level] || currentLevelInfo;\n  \n  const xpInCurrentLevel = totalXp - currentLevelInfo.minXp;\n  const xpNeededForNextLevel = nextLevelInfo.minXp - currentLevelInfo.minXp;\n  \n  if (level >= 50) {\n    return { current: totalXp, needed: totalXp, percent: 100 };\n  }\n  \n  return {\n    current: xpInCurrentLevel,\n    needed: xpNeededForNextLevel,\n    percent: Math.min((xpInCurrentLevel / xpNeededForNextLevel) * 100, 100)\n  };\n};\n","path":null,"size_bytes":6849,"size_tokens":null},"client/src/components/UserProfile.tsx":{"content":"import { useAuth } from \"@/hooks/useAuth\";\nimport { getSupabase } from \"@/lib/supabase\";\nimport { clearAllAuthStorage } from \"@/lib/persistentStorage\";\nimport { apiFetch } from \"@/lib/config\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Button } from \"@/components/ui/button\";\nimport { LogOut, User, Settings, Crown } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nexport function UserProfile() {\n  const { user, session } = useAuth();\n\n  if (!user) return null;\n\n  const displayName = user.displayName || user.fullName || user.email || \"Usuário\";\n  const initials = displayName\n    .split(\" \")\n    .map((n: string) => n[0])\n    .join(\"\")\n    .toUpperCase()\n    .slice(0, 2);\n\n  const handleLogout = async () => {\n    try {\n      // Logout from Supabase (this clears the session from localStorage and IndexedDB)\n      await getSupabase().auth.signOut();\n      await clearAllAuthStorage();\n      // Then notify backend (optional, for audit purposes)\n      if (session?.access_token) {\n        await apiFetch(\"/api/auth/logout\", { \n          method: \"POST\",\n          headers: {\n            'Authorization': `Bearer ${session.access_token}`,\n            'Content-Type': 'application/json'\n          }\n        }).catch(() => {}); // Ignore backend logout errors\n      }\n      window.location.href = \"/\";\n    } catch (error) {\n      console.error(\"Logout failed:\", error);\n      window.location.href = \"/\";\n    }\n  };\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-10 w-10\" data-testid=\"button-user-profile\">\n          <Avatar className=\"h-9 w-9\">\n            {user.profileImageUrl && <AvatarImage src={user.profileImageUrl} alt={displayName} />}\n            <AvatarFallback className=\"text-xs font-semibold bg-gradient-to-br from-primary to-accent text-primary-foreground\">{initials}</AvatarFallback>\n          </Avatar>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-56\">\n        <DropdownMenuLabel className=\"flex items-center gap-2\">\n          <Avatar className=\"h-8 w-8\">\n            {user.profileImageUrl && <AvatarImage src={user.profileImageUrl} alt={displayName} />}\n            <AvatarFallback className=\"text-xs font-semibold\">{initials}</AvatarFallback>\n          </Avatar>\n          <div className=\"flex flex-col overflow-hidden\">\n            <span className=\"text-sm font-semibold truncate\">{displayName}</span>\n            <span className=\"text-xs text-muted-foreground truncate\">{user.email}</span>\n          </div>\n        </DropdownMenuLabel>\n        <DropdownMenuSeparator />\n        <Link href=\"/perfil\">\n          <DropdownMenuItem data-testid=\"menu-item-profile\">\n            <User className=\"h-4 w-4 mr-2 text-blue-500\" />\n            <span>Meu Perfil</span>\n          </DropdownMenuItem>\n        </Link>\n        <Link href=\"/pricing\">\n          <DropdownMenuItem data-testid=\"menu-item-pricing\">\n            <Crown className=\"h-4 w-4 mr-2 text-yellow-500\" />\n            <span>Assinaturas</span>\n          </DropdownMenuItem>\n        </Link>\n        <Link href=\"/configurações\">\n          <DropdownMenuItem data-testid=\"menu-item-settings\">\n            <Settings className=\"h-4 w-4 mr-2 text-primary\" />\n            <span>Configurações</span>\n          </DropdownMenuItem>\n        </Link>\n        <DropdownMenuSeparator />\n        <DropdownMenuItem onClick={handleLogout} data-testid=\"menu-item-logout\">\n          <LogOut className=\"h-4 w-4 mr-2\" />\n          <span>Sair</span>\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","path":null,"size_bytes":3842,"size_tokens":null},"client/src/pages/security.tsx":{"content":"import { motion } from \"framer-motion\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Lock, \n  Shield, \n  Server, \n  Key, \n  Eye, \n  RefreshCw,\n  CheckCircle,\n  AlertTriangle,\n  Database,\n  Globe,\n  Fingerprint,\n  ShieldCheck,\n  ArrowLeft\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nexport default function Security() {\n  const securityMeasures = [\n    {\n      icon: Lock,\n      title: \"Criptografia HTTPS/TLS\",\n      description: \"Todas as comunicações entre seu dispositivo e nossos servidores são criptografadas usando protocolo TLS 1.3, garantindo que seus dados não sejam interceptados.\"\n    },\n    {\n      icon: Database,\n      title: \"Banco de Dados Seguro\",\n      description: \"Utilizamos PostgreSQL com criptografia em repouso. Seus dados pessoais, notas e orações são armazenados de forma segura em servidores protegidos.\"\n    },\n    {\n      icon: Key,\n      title: \"Autenticação Segura\",\n      description: \"Login com email e senha protegido por criptografia bcrypt, garantindo autenticação segura e proteção de credenciais.\"\n    },\n    {\n      icon: Shield,\n      title: \"Proteção de Sessão\",\n      description: \"Sessões gerenciadas com cookies httpOnly e secure, com expiração automática e renovação segura de tokens.\"\n    },\n    {\n      icon: Eye,\n      title: \"Privacidade por Design\",\n      description: \"Nunca vendemos ou compartilhamos seus dados com terceiros para fins de marketing. Seus dados são usados exclusivamente para melhorar sua experiência.\"\n    },\n    {\n      icon: Server,\n      title: \"Infraestrutura Cloud\",\n      description: \"Hospedagem em infraestrutura de nuvem com alta disponibilidade, backups automáticos e proteção contra DDoS.\"\n    }\n  ];\n\n  const dataProtection = [\n    { title: \"Dados Criptografados\", description: \"Criptografia AES-256 para dados sensíveis\" },\n    { title: \"Backups Automáticos\", description: \"Backups diários com retenção de 30 dias\" },\n    { title: \"Acesso Restrito\", description: \"Apenas equipe autorizada acessa dados\" },\n    { title: \"Logs de Auditoria\", description: \"Registro de acessos para monitoramento\" },\n    { title: \"Recuperação de Desastres\", description: \"Plano de contingência para incidentes\" },\n    { title: \"Testes de Segurança\", description: \"Verificações periódicas de vulnerabilidades\" }\n  ];\n\n  const bestPractices = [\n    \"Mantenha seu navegador sempre atualizado\",\n    \"Não compartilhe sua conta com terceiros\",\n    \"Use uma conexão segura (evite Wi-Fi público sem VPN)\",\n    \"Faça logout ao usar dispositivos compartilhados\",\n    \"Verifique se o endereço começa com https://\",\n    \"Reporte qualquer atividade suspeita imediatamente\"\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] rounded-full bg-primary/20 dark:bg-primary/10 blur-[120px] animate-pulse\" />\n        <div className=\"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] rounded-full bg-primary/10 dark:bg-primary/5 blur-[120px] animate-pulse\" />\n      </div>\n      <div className=\"relative z-10 max-w-4xl mx-auto p-4 md:p-8 space-y-8\">\n        <motion.div \n          initial={{ opacity: 0, x: -20 }} \n          animate={{ opacity: 1, x: 0 }}\n          className=\"flex items-center gap-4\"\n        >\n          <Link href=\"/about\" data-testid=\"link-back-security\">\n            <Button variant=\"ghost\" size=\"icon\" className=\"rounded-xl\" data-testid=\"button-back-security\">\n              <ArrowLeft className=\"h-5 w-5\" />\n            </Button>\n          </Link>\n          <p className=\"text-muted-foreground\">Voltar para Sobre</p>\n        </motion.div>\n\n        <motion.div \n          initial={{ opacity: 0, y: -20 }} \n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center space-y-4\"\n        >\n          <div className=\"flex justify-center mb-4\">\n            <div className=\"h-20 w-20 rounded-2xl bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-xl shadow-green-500/20\">\n              <ShieldCheck className=\"h-10 w-10 text-white\" />\n            </div>\n          </div>\n          <h1 className=\"text-4xl font-bold bg-gradient-to-r from-green-500 to-green-600 bg-clip-text text-transparent\">\n            Segurança\n          </h1>\n          <p className=\"text-muted-foreground text-lg max-w-2xl mx-auto\">\n            Conheça as medidas que tomamos para proteger seus dados e garantir uma experiência segura no BíbliaFS.\n          </p>\n        </motion.div>\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }}>\n          <Card data-testid=\"card-commitment\" className=\"rounded-2xl border-none bg-gradient-to-br from-green-500/10 to-green-500/5 backdrop-blur-xl shadow-lg\">\n            <CardContent className=\"p-8\">\n              <div className=\"flex items-start gap-6\">\n                <div className=\"h-14 w-14 rounded-2xl bg-green-500/10 flex items-center justify-center flex-shrink-0\">\n                  <Shield className=\"h-8 w-8 text-green-600\" />\n                </div>\n                <div>\n                  <h3 className=\"font-bold text-xl mb-3 text-green-600\">Nosso Compromisso</h3>\n                  <p className=\"text-muted-foreground text-lg leading-relaxed\">\n                    O BíbliaFS foi desenvolvido com segurança em mente desde o início. Utilizamos as melhores \n                    práticas da indústria para proteger seus dados pessoais, suas orações, notas e toda sua \n                    jornada espiritual registrada em nosso aplicativo.\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <div className=\"space-y-6\">\n          <h2 className=\"text-2xl font-bold flex items-center gap-3\">\n            <div className=\"p-2 rounded-xl bg-primary/10\">\n              <Lock className=\"h-6 w-6 text-primary\" />\n            </div>\n            Medidas de Segurança\n          </h2>\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            {securityMeasures.map((measure, index) => (\n              <motion.div\n                key={index}\n                initial={{ opacity: 0, scale: 0.95 }}\n                animate={{ opacity: 1, scale: 1 }}\n                transition={{ delay: 0.15 + index * 0.05 }}\n              >\n                <Card data-testid={`card-security-${index}`} className=\"rounded-2xl border-none bg-card/80 backdrop-blur-xl shadow-lg h-full\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-start gap-4\">\n                      <div className=\"h-12 w-12 rounded-xl bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                        <measure.icon className=\"h-6 w-6 text-primary\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-bold text-lg mb-2\">{measure.title}</h3>\n                        <p className=\"text-sm text-muted-foreground leading-relaxed\">\n                          {measure.description}\n                        </p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n        </div>\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.45 }}>\n          <Card data-testid=\"card-data-protection\" className=\"rounded-2xl border-none bg-card/80 backdrop-blur-xl shadow-lg\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-3 text-xl\">\n                <div className=\"p-2.5 rounded-xl bg-blue-500/10\">\n                  <Database className=\"h-6 w-6 text-blue-600\" />\n                </div>\n                Proteção de Dados\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid sm:grid-cols-2 gap-4\">\n                {dataProtection.map((item, index) => (\n                  <div key={index} className=\"flex items-center gap-4 p-4 rounded-xl bg-muted/50 border border-border/50\">\n                    <CheckCircle className=\"h-6 w-6 text-green-600 flex-shrink-0\" />\n                    <div>\n                      <p className=\"font-bold text-base\">{item.title}</p>\n                      <p className=\"text-sm text-muted-foreground\">{item.description}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }}>\n          <Card data-testid=\"card-ai-security\" className=\"rounded-2xl border-none bg-card/80 backdrop-blur-xl shadow-lg\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-3 text-xl\">\n                <div className=\"p-2.5 rounded-xl bg-muted-foreground/10\">\n                  <Fingerprint className=\"h-6 w-6 text-muted-foreground\" />\n                </div>\n                Segurança da IA\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4 text-muted-foreground\">\n              <p className=\"text-lg\">\n                O BíbliaFS utiliza a API da OpenAI para fornecer assistência teológica. Garantimos que:\n              </p>\n              <ul className=\"grid sm:grid-cols-2 gap-4\">\n                {[\n                  \"Suas conversas com a IA não são usadas para treinar modelos\",\n                  \"Dados são transmitidos de forma criptografada\",\n                  \"Não armazenamos histórico além do necessário\",\n                  \"Chaves de API são protegidas rigorosamente\"\n                ].map((item, i) => (\n                  <li key={i} className=\"flex items-start gap-3 p-3 rounded-xl bg-muted/30\">\n                    <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\n                    <span className=\"text-sm font-medium\">{item}</span>\n                  </li>\n                ))}\n              </ul>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.55 }}>\n          <Card data-testid=\"card-best-practices\" className=\"rounded-2xl border-none bg-card/80 backdrop-blur-xl shadow-lg\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-3 text-xl\">\n                <div className=\"p-2.5 rounded-xl bg-amber-500/10\">\n                  <AlertTriangle className=\"h-6 w-6 text-amber-600\" />\n                </div>\n                Boas Práticas para Usuários\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-muted-foreground text-lg mb-6\">\n                Recomendamos que você siga estas práticas para manter sua conta segura:\n              </p>\n              <div className=\"grid sm:grid-cols-2 gap-4\">\n                {bestPractices.map((practice, index) => (\n                  <div key={index} className=\"flex items-start gap-4 p-4 rounded-xl bg-muted/30\">\n                    <div className=\"h-8 w-8 rounded-full bg-amber-500/10 flex items-center justify-center flex-shrink-0\">\n                      <span className=\"text-amber-600 font-bold\">{index + 1}</span>\n                    </div>\n                    <span className=\"text-sm font-medium leading-tight pt-1\">{practice}</span>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.6 }}>\n          <Card data-testid=\"card-incident\" className=\"rounded-2xl border-none bg-card/80 backdrop-blur-xl shadow-lg border-l-4 border-l-red-500\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-3 text-xl\">\n                <div className=\"p-2.5 rounded-xl bg-red-500/10\">\n                  <RefreshCw className=\"h-6 w-6 text-red-600\" />\n                </div>\n                Resposta a Incidentes\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4 text-muted-foreground\">\n              <p className=\"text-lg font-medium text-foreground\">Em caso de qualquer incidente de segurança:</p>\n              <div className=\"grid gap-3\">\n                {[\n                  \"Notificaremos usuários afetados em até 72 horas\",\n                  \"Tomaremos medidas imediatas para conter o incidente\",\n                  \"Investigaremos a causa raiz e corrigiremos\",\n                  \"Forneceremos orientações sobre ações preventivas\"\n                ].map((item, i) => (\n                  <div key={i} className=\"flex items-center gap-3 p-3 rounded-xl bg-red-500/5\">\n                    <div className=\"h-2 w-2 rounded-full bg-red-500\" />\n                    <span className=\"text-sm\">{item}</span>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.65 }}>\n          <Card data-testid=\"card-contact-security\" className=\"rounded-2xl border-none bg-gradient-to-br from-primary/10 to-primary/5 backdrop-blur-xl shadow-lg\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-3 text-xl\">\n                <div className=\"p-2.5 rounded-xl bg-primary/10\">\n                  <Globe className=\"h-6 w-6 text-primary\" />\n                </div>\n                Reportar Vulnerabilidades\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <p className=\"text-muted-foreground text-lg leading-relaxed\">\n                Se você descobrir uma vulnerabilidade de segurança, por favor nos informe imediatamente \n                através da página de contato. Valorizamos pesquisadores de segurança que nos ajudam a \n                manter o BíbliaFS seguro.\n              </p>\n              <Link href=\"/contact\">\n                <Button className=\"rounded-xl h-12 px-8 gap-2 shadow-lg shadow-primary/20\" data-testid=\"button-report-vulnerability\">\n                  Reportar Vulnerabilidade\n                  <Shield className=\"h-4 w-4\" />\n                </Button>\n              </Link>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <motion.div \n          initial={{ opacity: 0, y: 20 }} \n          animate={{ opacity: 1, y: 0 }} \n          transition={{ delay: 0.7 }}\n          className=\"grid md:grid-cols-3 gap-4 py-8\"\n        >\n          {[\n            { href: \"/about\", title: \"Sobre\", desc: \"Conheça o BíbliaFS\" },\n            { href: \"/privacy\", title: \"Privacidade\", desc: \"Proteção de dados\" },\n            { href: \"/terms\", title: \"Termos\", desc: \"Regras e condições\" }\n          ].map((link, idx) => (\n            <Link key={idx} href={link.href}>\n              <Card className=\"rounded-2xl border-none bg-card/80 backdrop-blur-xl shadow-lg cursor-pointer h-full transition-all hover:shadow-xl\">\n                <CardContent className=\"p-5 text-center\">\n                  <h3 className=\"font-bold mb-1\">{link.title}</h3>\n                  <p className=\"text-sm text-muted-foreground\">{link.desc}</p>\n                </CardContent>\n              </Card>\n            </Link>\n          ))}\n        </motion.div>\n\n        <footer className=\"text-center text-sm text-muted-foreground py-8 border-t border-border/50\">\n          <p>© 2026 BíbliaFS | Desenvolvido por | <a href=\"https://fabrisite.com.br/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary hover:underline font-medium\">FabriSite</a></p>\n        </footer>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":16122,"size_tokens":null},"client/src/components/ProfileImageUpload.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Upload, X } from \"lucide-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { apiFetch } from \"@/lib/config\";\n\ninterface ProfileImageUploadProps {\n  currentImage?: string | null;\n  userName: string;\n}\n\nexport function ProfileImageUpload({ currentImage, userName }: ProfileImageUploadProps) {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [preview, setPreview] = useState<string | null>(null);\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith(\"image/\")) {\n      toast({\n        title: \"Erro\",\n        description: \"Por favor, selecione uma imagem válida\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Validate file size (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      toast({\n        title: \"Erro\",\n        description: \"A imagem deve ter menos de 5MB\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      // Convert to base64\n      const reader = new FileReader();\n      reader.onload = async (e) => {\n        const base64 = e.target?.result as string;\n        setPreview(base64);\n\n        // Upload to server\n        try {\n          const response = await apiFetch(\"/api/profile/upload-image\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ imageData: base64 }),\n          });\n\n          if (!response.ok) {\n            throw new Error(\"Falha ao fazer upload\");\n          }\n\n          const data = await response.json();\n\n          // Invalidate auth query to refresh user data\n          queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n\n          toast({\n            title: \"Sucesso\",\n            description: \"Foto de perfil atualizada com sucesso!\",\n          });\n\n          setPreview(null);\n        } catch (error) {\n          console.error(\"Upload error:\", error);\n          toast({\n            title: \"Erro\",\n            description: \"Falha ao fazer upload da imagem\",\n            variant: \"destructive\",\n          });\n        }\n      };\n\n      reader.readAsDataURL(file);\n    } finally {\n      setIsLoading(false);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = \"\";\n      }\n    }\n  };\n\n  const displayImage = preview || currentImage;\n  const initials = userName\n    .split(\" \")\n    .map((n) => n[0])\n    .join(\"\")\n    .toUpperCase()\n    .slice(0, 2);\n\n  return (\n    <div className=\"relative inline-block\">\n      <Avatar className=\"h-24 w-24 ring-4 ring-primary/20\">\n        <AvatarImage src={displayImage || undefined} />\n        <AvatarFallback className=\"bg-gradient-to-br from-primary to-accent text-primary-foreground text-3xl font-semibold\">\n          {initials}\n        </AvatarFallback>\n      </Avatar>\n\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleFileSelect}\n        className=\"hidden\"\n        data-testid=\"input-profile-image\"\n      />\n\n      <Button\n        size=\"sm\"\n        variant=\"default\"\n        className=\"absolute bottom-0 right-0 rounded-full h-10 w-10 p-0 shadow-lg\"\n        onClick={() => fileInputRef.current?.click()}\n        disabled={isLoading}\n        data-testid=\"button-upload-image\"\n      >\n        {isLoading ? (\n          <div className=\"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full\" />\n        ) : preview ? (\n          <X className=\"h-5 w-5\" />\n        ) : (\n          <Upload className=\"h-5 w-5\" />\n        )}\n      </Button>\n    </div>\n  );\n}\n","path":null,"size_bytes":4106,"size_tokens":null},"server/scripts/generate-bible-sqlite.ts":{"content":"import initSqlJs, { Database } from \"sql.js\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\n\nconst NVI_JSON_URL = \"https://raw.githubusercontent.com/thiagobodruk/bible/master/json/pt_nvi.json\";\nconst OUTPUT_PATH = path.join(process.cwd(), \"client/public/bible.db\");\n\ninterface BibleBook {\n  abbrev: string;\n  chapters: string[][];\n}\n\nconst bookInfo: Record<string, { order: number; testament: string; name: string }> = {\n  gn: { order: 1, testament: \"AT\", name: \"Gênesis\" },\n  ex: { order: 2, testament: \"AT\", name: \"Êxodo\" },\n  lv: { order: 3, testament: \"AT\", name: \"Levítico\" },\n  nm: { order: 4, testament: \"AT\", name: \"Números\" },\n  dt: { order: 5, testament: \"AT\", name: \"Deuteronômio\" },\n  js: { order: 6, testament: \"AT\", name: \"Josué\" },\n  jz: { order: 7, testament: \"AT\", name: \"Juízes\" },\n  rt: { order: 8, testament: \"AT\", name: \"Rute\" },\n  \"1sm\": { order: 9, testament: \"AT\", name: \"1 Samuel\" },\n  \"2sm\": { order: 10, testament: \"AT\", name: \"2 Samuel\" },\n  \"1rs\": { order: 11, testament: \"AT\", name: \"1 Reis\" },\n  \"2rs\": { order: 12, testament: \"AT\", name: \"2 Reis\" },\n  \"1cr\": { order: 13, testament: \"AT\", name: \"1 Crônicas\" },\n  \"2cr\": { order: 14, testament: \"AT\", name: \"2 Crônicas\" },\n  ed: { order: 15, testament: \"AT\", name: \"Esdras\" },\n  ne: { order: 16, testament: \"AT\", name: \"Neemias\" },\n  et: { order: 17, testament: \"AT\", name: \"Ester\" },\n  job: { order: 18, testament: \"AT\", name: \"Jó\" },\n  jó: { order: 18, testament: \"AT\", name: \"Jó\" },\n  sl: { order: 19, testament: \"AT\", name: \"Salmos\" },\n  pv: { order: 20, testament: \"AT\", name: \"Provérbios\" },\n  ec: { order: 21, testament: \"AT\", name: \"Eclesiastes\" },\n  ct: { order: 22, testament: \"AT\", name: \"Cantares\" },\n  is: { order: 23, testament: \"AT\", name: \"Isaías\" },\n  jr: { order: 24, testament: \"AT\", name: \"Jeremias\" },\n  lm: { order: 25, testament: \"AT\", name: \"Lamentações\" },\n  ez: { order: 26, testament: \"AT\", name: \"Ezequiel\" },\n  dn: { order: 27, testament: \"AT\", name: \"Daniel\" },\n  os: { order: 28, testament: \"AT\", name: \"Oséias\" },\n  jl: { order: 29, testament: \"AT\", name: \"Joel\" },\n  am: { order: 30, testament: \"AT\", name: \"Amós\" },\n  ob: { order: 31, testament: \"AT\", name: \"Obadias\" },\n  jn: { order: 32, testament: \"AT\", name: \"Jonas\" },\n  mq: { order: 33, testament: \"AT\", name: \"Miquéias\" },\n  na: { order: 34, testament: \"AT\", name: \"Naum\" },\n  hc: { order: 35, testament: \"AT\", name: \"Habacuque\" },\n  sf: { order: 36, testament: \"AT\", name: \"Sofonias\" },\n  ag: { order: 37, testament: \"AT\", name: \"Ageu\" },\n  zc: { order: 38, testament: \"AT\", name: \"Zacarias\" },\n  ml: { order: 39, testament: \"AT\", name: \"Malaquias\" },\n  mt: { order: 40, testament: \"NT\", name: \"Mateus\" },\n  mc: { order: 41, testament: \"NT\", name: \"Marcos\" },\n  lc: { order: 42, testament: \"NT\", name: \"Lucas\" },\n  jo: { order: 43, testament: \"NT\", name: \"João\" },\n  at: { order: 44, testament: \"NT\", name: \"Atos\" },\n  atos: { order: 44, testament: \"NT\", name: \"Atos\" },\n  rm: { order: 45, testament: \"NT\", name: \"Romanos\" },\n  \"1co\": { order: 46, testament: \"NT\", name: \"1 Coríntios\" },\n  \"2co\": { order: 47, testament: \"NT\", name: \"2 Coríntios\" },\n  gl: { order: 48, testament: \"NT\", name: \"Gálatas\" },\n  ef: { order: 49, testament: \"NT\", name: \"Efésios\" },\n  fp: { order: 50, testament: \"NT\", name: \"Filipenses\" },\n  cl: { order: 51, testament: \"NT\", name: \"Colossenses\" },\n  \"1ts\": { order: 52, testament: \"NT\", name: \"1 Tessalonicenses\" },\n  \"2ts\": { order: 53, testament: \"NT\", name: \"2 Tessalonicenses\" },\n  \"1tm\": { order: 54, testament: \"NT\", name: \"1 Timóteo\" },\n  \"2tm\": { order: 55, testament: \"NT\", name: \"2 Timóteo\" },\n  tt: { order: 56, testament: \"NT\", name: \"Tito\" },\n  fm: { order: 57, testament: \"NT\", name: \"Filemom\" },\n  hb: { order: 58, testament: \"NT\", name: \"Hebreus\" },\n  tg: { order: 59, testament: \"NT\", name: \"Tiago\" },\n  \"1pe\": { order: 60, testament: \"NT\", name: \"1 Pedro\" },\n  \"2pe\": { order: 61, testament: \"NT\", name: \"2 Pedro\" },\n  \"1jo\": { order: 62, testament: \"NT\", name: \"1 João\" },\n  \"2jo\": { order: 63, testament: \"NT\", name: \"2 João\" },\n  \"3jo\": { order: 64, testament: \"NT\", name: \"3 João\" },\n  jd: { order: 65, testament: \"NT\", name: \"Judas\" },\n  ap: { order: 66, testament: \"NT\", name: \"Apocalipse\" },\n};\n\nasync function fetchBibleJson(): Promise<BibleBook[]> {\n  console.log(\"Fetching Bible JSON from GitHub...\");\n  const response = await fetch(NVI_JSON_URL);\n  if (!response.ok) {\n    throw new Error(`Failed to fetch Bible JSON: ${response.statusText}`);\n  }\n  const data = await response.json();\n  console.log(`Fetched ${data.length} books`);\n  return data;\n}\n\nasync function generateSQLiteDatabase(books: BibleBook[]): Promise<Uint8Array> {\n  console.log(\"Initializing sql.js...\");\n  const SQL = await initSqlJs();\n  const db: Database = new SQL.Database();\n\n  console.log(\"Creating tables...\");\n  db.run(`\n    CREATE TABLE books (\n      id INTEGER PRIMARY KEY,\n      abbrev TEXT NOT NULL UNIQUE,\n      name TEXT NOT NULL,\n      chapters INTEGER NOT NULL,\n      testament TEXT NOT NULL,\n      book_order INTEGER NOT NULL\n    );\n  `);\n\n  db.run(`\n    CREATE TABLE verses (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      book_id INTEGER NOT NULL,\n      chapter INTEGER NOT NULL,\n      verse INTEGER NOT NULL,\n      text TEXT NOT NULL,\n      FOREIGN KEY (book_id) REFERENCES books(id)\n    );\n  `);\n\n  db.run(`CREATE INDEX idx_verses_book_chapter ON verses(book_id, chapter);`);\n  db.run(`CREATE INDEX idx_books_abbrev ON books(abbrev);`);\n\n  console.log(\"Inserting books and verses...\");\n  let totalVerses = 0;\n\n  const insertBook = db.prepare(\n    \"INSERT INTO books (id, abbrev, name, chapters, testament, book_order) VALUES (?, ?, ?, ?, ?, ?)\"\n  );\n  const insertVerse = db.prepare(\n    \"INSERT INTO verses (book_id, chapter, verse, text) VALUES (?, ?, ?, ?)\"\n  );\n\n  for (const book of books) {\n    const abbrev = book.abbrev.toLowerCase();\n    const info = bookInfo[abbrev];\n    \n    if (!info) {\n      console.warn(`Unknown book abbreviation: ${abbrev}, skipping...`);\n      continue;\n    }\n\n    const bookId = info.order;\n    const chapterCount = book.chapters.length;\n\n    insertBook.run([bookId, abbrev, info.name, chapterCount, info.testament, info.order]);\n\n    for (let chapterIdx = 0; chapterIdx < book.chapters.length; chapterIdx++) {\n      const chapterNum = chapterIdx + 1;\n      const verses = book.chapters[chapterIdx];\n\n      for (let verseIdx = 0; verseIdx < verses.length; verseIdx++) {\n        const verseNum = verseIdx + 1;\n        const verseText = verses[verseIdx] || \"\";\n        if (verseText) {\n          insertVerse.run([bookId, chapterNum, verseNum, verseText]);\n          totalVerses++;\n        }\n      }\n    }\n  }\n\n  insertBook.free();\n  insertVerse.free();\n\n  console.log(`Inserted ${books.length} books and ${totalVerses} verses`);\n\n  const data = db.export();\n  db.close();\n\n  return data;\n}\n\nasync function main() {\n  try {\n    const books = await fetchBibleJson();\n    const dbData = await generateSQLiteDatabase(books);\n\n    const outputDir = path.dirname(OUTPUT_PATH);\n    if (!fs.existsSync(outputDir)) {\n      fs.mkdirSync(outputDir, { recursive: true });\n    }\n\n    fs.writeFileSync(OUTPUT_PATH, Buffer.from(dbData));\n    console.log(`SQLite database saved to: ${OUTPUT_PATH}`);\n    console.log(`File size: ${(dbData.length / 1024 / 1024).toFixed(2)} MB`);\n  } catch (error) {\n    console.error(\"Error generating SQLite database:\", error);\n    process.exit(1);\n  }\n}\n\nmain();\n","path":null,"size_bytes":7478,"size_tokens":null},"client/src/lib/offline/bibleSqlite.ts":{"content":"import initSqlJs, { Database } from \"sql.js\";\nimport { isNative } from \"../config\";\n\nconst abbrevMapping: Record<string, string> = {\n  job: \"jó\",\n  at: \"atos\",\n};\n\nfunction normalizeAbbrev(abbrev: string): string {\n  const lower = abbrev.toLowerCase();\n  return abbrevMapping[lower] || lower;\n}\n\ninterface BibleBook {\n  id: number;\n  abbrev: string;\n  name: string;\n  chapters: number;\n  testament: string;\n  book_order: number;\n}\n\ninterface BibleVerse {\n  id: number;\n  book_id: number;\n  chapter: number;\n  verse: number;\n  text: string;\n}\n\ninterface ChapterData {\n  book: string;\n  bookName: string;\n  chapter: number;\n  verses: { verse: number; text: string }[];\n  totalChapters: number;\n}\n\nclass BibleSQLiteService {\n  private db: Database | null = null;\n  private isLoading = false;\n  private loadPromise: Promise<void> | null = null;\n\n  async init(): Promise<boolean> {\n    if (this.db) return true;\n    \n    if (this.loadPromise) {\n      await this.loadPromise;\n      return this.db !== null;\n    }\n\n    this.loadPromise = this.loadDatabase();\n    await this.loadPromise;\n    return this.db !== null;\n  }\n\n  private async loadDatabase(): Promise<void> {\n    if (this.isLoading || this.db) return;\n    \n    this.isLoading = true;\n    try {\n      console.log(\"[BibleSQLite] Initializing sql.js...\");\n      const SQL = await initSqlJs({\n        locateFile: (file) => `https://sql.js.org/dist/${file}`,\n      });\n\n      // Use correct path for Capacitor (assets are served from root)\n      const dbPath = isNative ? \"/bible.db\" : \"./bible.db\";\n      console.log(`[BibleSQLite] Fetching bible.db from ${dbPath}...`);\n      const response = await fetch(dbPath);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch bible.db: ${response.status}`);\n      }\n\n      const buffer = await response.arrayBuffer();\n      this.db = new SQL.Database(new Uint8Array(buffer));\n      console.log(\"[BibleSQLite] Database loaded successfully\");\n    } catch (error) {\n      console.error(\"[BibleSQLite] Error loading database:\", error);\n      this.db = null;\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  async getBooks(): Promise<BibleBook[]> {\n    await this.init();\n    if (!this.db) return [];\n\n    try {\n      const result = this.db.exec(\"SELECT * FROM books ORDER BY book_order\");\n      if (!result.length) return [];\n\n      const columns = result[0].columns;\n      return result[0].values.map((row) => {\n        const book: any = {};\n        columns.forEach((col, idx) => {\n          book[col] = row[idx];\n        });\n        return book as BibleBook;\n      });\n    } catch (error) {\n      console.error(\"[BibleSQLite] Error getting books:\", error);\n      return [];\n    }\n  }\n\n  async getBook(abbrev: string): Promise<BibleBook | null> {\n    await this.init();\n    if (!this.db) return null;\n\n    try {\n      const normalizedAbbrev = normalizeAbbrev(abbrev);\n      const stmt = this.db.prepare(\"SELECT * FROM books WHERE abbrev = ?\");\n      stmt.bind([normalizedAbbrev]);\n      \n      if (stmt.step()) {\n        const row = stmt.getAsObject();\n        stmt.free();\n        return row as unknown as BibleBook;\n      }\n      stmt.free();\n      return null;\n    } catch (error) {\n      console.error(\"[BibleSQLite] Error getting book:\", error);\n      return null;\n    }\n  }\n\n  async getChapter(abbrev: string, chapter: number): Promise<ChapterData | null> {\n    await this.init();\n    if (!this.db) return null;\n\n    try {\n      const book = await this.getBook(abbrev);\n      if (!book) {\n        console.warn(`[BibleSQLite] Book not found: ${abbrev}`);\n        return null;\n      }\n\n      const stmt = this.db.prepare(\n        \"SELECT verse, text FROM verses WHERE book_id = ? AND chapter = ? ORDER BY verse\"\n      );\n      stmt.bind([book.id, chapter]);\n\n      const verses: { verse: number; text: string }[] = [];\n      while (stmt.step()) {\n        const row = stmt.getAsObject();\n        verses.push({\n          verse: row.verse as number,\n          text: row.text as string,\n        });\n      }\n      stmt.free();\n\n      if (verses.length === 0) {\n        console.warn(`[BibleSQLite] No verses found for ${abbrev} ${chapter}`);\n        return null;\n      }\n\n      return {\n        book: book.abbrev,\n        bookName: book.name,\n        chapter,\n        verses,\n        totalChapters: book.chapters,\n      };\n    } catch (error) {\n      console.error(\"[BibleSQLite] Error getting chapter:\", error);\n      return null;\n    }\n  }\n\n  async getVerse(abbrev: string, chapter: number, verse: number): Promise<string | null> {\n    await this.init();\n    if (!this.db) return null;\n\n    try {\n      const book = await this.getBook(abbrev);\n      if (!book) return null;\n\n      const stmt = this.db.prepare(\n        \"SELECT text FROM verses WHERE book_id = ? AND chapter = ? AND verse = ?\"\n      );\n      stmt.bind([book.id, chapter, verse]);\n\n      let text: string | null = null;\n      if (stmt.step()) {\n        const row = stmt.getAsObject();\n        text = row.text as string;\n      }\n      stmt.free();\n      return text;\n    } catch (error) {\n      console.error(\"[BibleSQLite] Error getting verse:\", error);\n      return null;\n    }\n  }\n\n  async searchVerses(query: string, limit = 50): Promise<{ book: string; chapter: number; verse: number; text: string }[]> {\n    await this.init();\n    if (!this.db) return [];\n\n    try {\n      const searchQuery = `%${query}%`;\n      const stmt = this.db.prepare(`\n        SELECT b.abbrev as book, v.chapter, v.verse, v.text \n        FROM verses v \n        JOIN books b ON v.book_id = b.id \n        WHERE v.text LIKE ? \n        ORDER BY b.book_order, v.chapter, v.verse\n        LIMIT ?\n      `);\n      stmt.bind([searchQuery, limit]);\n\n      const results: { book: string; chapter: number; verse: number; text: string }[] = [];\n      while (stmt.step()) {\n        const row = stmt.getAsObject();\n        results.push({\n          book: row.book as string,\n          chapter: row.chapter as number,\n          verse: row.verse as number,\n          text: row.text as string,\n        });\n      }\n      stmt.free();\n      return results;\n    } catch (error) {\n      console.error(\"[BibleSQLite] Error searching verses:\", error);\n      return [];\n    }\n  }\n\n  isReady(): boolean {\n    return this.db !== null;\n  }\n\n  close(): void {\n    if (this.db) {\n      this.db.close();\n      this.db = null;\n    }\n  }\n}\n\nexport const bibleSqlite = new BibleSQLiteService();\n","path":null,"size_bytes":6418,"size_tokens":null},"server/seed-stripe-products.ts":{"content":"import Stripe from 'stripe';\n\nasync function getStripeClient() {\n  const hostname = process.env.REPLIT_CONNECTORS_HOSTNAME;\n  const xReplitToken = process.env.REPL_IDENTITY\n    ? 'repl ' + process.env.REPL_IDENTITY\n    : process.env.WEB_REPL_RENEWAL\n      ? 'depl ' + process.env.WEB_REPL_RENEWAL\n      : null;\n\n  if (!xReplitToken) {\n    throw new Error('X_REPLIT_TOKEN not found');\n  }\n\n  const url = new URL(`https://${hostname}/api/v2/connection`);\n  url.searchParams.set('include_secrets', 'true');\n  url.searchParams.set('connector_names', 'stripe');\n  url.searchParams.set('environment', 'development');\n\n  const response = await fetch(url.toString(), {\n    headers: {\n      'Accept': 'application/json',\n      'X_REPLIT_TOKEN': xReplitToken\n    }\n  });\n\n  const data = await response.json();\n  const connectionSettings = data.items?.[0];\n\n  if (!connectionSettings?.settings?.secret) {\n    throw new Error('Stripe connection not found');\n  }\n\n  return new Stripe(connectionSettings.settings.secret, {\n    apiVersion: '2025-08-27.basil' as any,\n  });\n}\n\nasync function createProducts() {\n  console.log('🚀 Creating BíbliaFS Stripe products...\\n');\n  \n  const stripe = await getStripeClient();\n\n  // Check if products already exist\n  const existingProducts = await stripe.products.search({ \n    query: \"name:'BíbliaFS'\" \n  });\n  \n  if (existingProducts.data.length > 0) {\n    console.log('⚠️ Products already exist. Listing current price IDs:\\n');\n    \n    for (const product of existingProducts.data) {\n      const prices = await stripe.prices.list({ product: product.id, active: true });\n      console.log(`📦 ${product.name}`);\n      for (const price of prices.data) {\n        console.log(`   Price ID: ${price.id}`);\n        console.log(`   Amount: R$ ${(price.unit_amount! / 100).toFixed(2)}`);\n        console.log(`   Interval: ${price.recurring?.interval || 'one-time'}\\n`);\n      }\n    }\n    return;\n  }\n\n  // Create Monthly Plan Product\n  console.log('📦 Creating Monthly Plan...');\n  const monthlyProduct = await stripe.products.create({\n    name: 'BíbliaFS Premium Mensal',\n    description: 'Acesso completo à BíbliaFS com IA ilimitada, podcasts, modo professor e mais',\n    metadata: {\n      plan_type: 'monthly',\n      app: 'bibliafs'\n    }\n  });\n\n  const monthlyPrice = await stripe.prices.create({\n    product: monthlyProduct.id,\n    unit_amount: 1990, // R$ 19,90 (in cents)\n    currency: 'brl',\n    recurring: { interval: 'month' },\n    lookup_key: 'monthly',\n    metadata: { plan_type: 'monthly' }\n  });\n\n  console.log(`✅ Monthly Plan created!`);\n  console.log(`   Product ID: ${monthlyProduct.id}`);\n  console.log(`   Price ID: ${monthlyPrice.id}\\n`);\n\n  // Create Annual Plan Product\n  console.log('📦 Creating Annual Plan...');\n  const yearlyProduct = await stripe.products.create({\n    name: 'BíbliaFS Premium Anual',\n    description: 'Acesso completo por 1 ano - Economize 37%',\n    metadata: {\n      plan_type: 'yearly',\n      app: 'bibliafs'\n    }\n  });\n\n  const yearlyPrice = await stripe.prices.create({\n    product: yearlyProduct.id,\n    unit_amount: 14990, // R$ 149,90 (in cents)\n    currency: 'brl',\n    recurring: { interval: 'year' },\n    lookup_key: 'yearly',\n    metadata: { plan_type: 'yearly' }\n  });\n\n  console.log(`✅ Annual Plan created!`);\n  console.log(`   Product ID: ${yearlyProduct.id}`);\n  console.log(`   Price ID: ${yearlyPrice.id}\\n`);\n\n  // Create Premium Plus Plan Product\n  console.log('📦 Creating Premium Plus Plan...');\n  const premiumPlusProduct = await stripe.products.create({\n    name: 'BíbliaFS Premium Plus',\n    description: 'O plano mais completo - Dobro do limite de IA + Acesso VIP',\n    metadata: {\n      plan_type: 'premium_plus',\n      app: 'bibliafs'\n    }\n  });\n\n  const premiumPlusPrice = await stripe.prices.create({\n    product: premiumPlusProduct.id,\n    unit_amount: 28900, // R$ 289,00 (in cents)\n    currency: 'brl',\n    recurring: { interval: 'year' },\n    lookup_key: 'premium_plus',\n    metadata: { plan_type: 'premium_plus' }\n  });\n\n  console.log(`✅ Premium Plus Plan created!`);\n  console.log(`   Product ID: ${premiumPlusProduct.id}`);\n  console.log(`   Price ID: ${premiumPlusPrice.id}\\n`);\n\n  console.log('═══════════════════════════════════════════════════════════');\n  console.log('🎉 All products created successfully!');\n  console.log('═══════════════════════════════════════════════════════════\\n');\n  \n  console.log('📋 CONFIGURE THESE ENVIRONMENT VARIABLES:\\n');\n  console.log(`VITE_STRIPE_MONTHLY_PRICE_ID=${monthlyPrice.id}`);\n  console.log(`VITE_STRIPE_YEARLY_PRICE_ID=${yearlyPrice.id}`);\n  console.log(`VITE_STRIPE_PREMIUM_PLUS_PRICE_ID=${premiumPlusPrice.id}`);\n  console.log('\\n');\n}\n\ncreateProducts().catch(console.error);\n","path":null,"size_bytes":4995,"size_tokens":null},"client/src/hooks/use-supabase-auth.tsx":{"content":"import { createContext, useContext, useEffect, useState, type ReactNode } from \"react\";\nimport { initSupabase, getSupabase } from \"@/lib/supabase\";\nimport { clearAllAuthStorage } from \"@/lib/persistentStorage\";\nimport type { User, Session } from \"@supabase/supabase-js\";\n\ninterface AuthContextType {\n  user: User | null;\n  session: Session | null;\n  loading: boolean;\n  signOut: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  user: null,\n  session: null,\n  loading: true,\n  signOut: async () => {},\n});\n\nexport function SupabaseAuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [session, setSession] = useState<Session | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    let subscription: { unsubscribe: () => void } | null = null;\n\n    const init = async () => {\n      const supabase = await initSupabase();\n      \n      const { data: { session } } = await supabase.auth.getSession();\n      setSession(session);\n      setUser(session?.user ?? null);\n      setLoading(false);\n\n      const { data } = supabase.auth.onAuthStateChange(\n        (_event, session) => {\n          setSession(session);\n          setUser(session?.user ?? null);\n          setLoading(false);\n        }\n      );\n      subscription = data.subscription;\n    };\n\n    init();\n\n    return () => {\n      if (subscription) subscription.unsubscribe();\n    };\n  }, []);\n\n  const signOut = async () => {\n    const supabase = getSupabase();\n    await supabase.auth.signOut();\n    await clearAllAuthStorage();\n    setUser(null);\n    setSession(null);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, session, loading, signOut }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useSupabaseAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useSupabaseAuth must be used within SupabaseAuthProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":1990,"size_tokens":null},"client/src/pages/login.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { initSupabase } from \"@/lib/supabase\";\nimport { isNative } from \"@/lib/config\";\nimport { APP_URL } from \"@/lib/env-config\";\nimport { Eye, EyeOff, Loader2 } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nconst loginSchema = z.object({\n  email: z.string().email(\"Email inválido\"),\n  password: z.string().min(6, \"Senha deve ter pelo menos 6 caracteres\"),\n});\n\ntype LoginFormData = z.infer<typeof loginSchema>;\n\nimport logoImage from \"../assets/logo-new.png\";\nimport { motion } from \"framer-motion\";\n\nexport default function Login() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const { isAuthenticated, isLoading: authLoading } = useAuth();\n  const [hasAttemptedLogin, setHasAttemptedLogin] = useState(false);\n\n  // Redirect to home if user is already authenticated when page loads\n  // This handles the case where user navigates to /login but is already logged in\n  useEffect(() => {\n    if (!authLoading && isAuthenticated && !hasAttemptedLogin) {\n      // Small delay to ensure state is synchronized\n      const timer = setTimeout(() => setLocation(\"/\"), 100);\n      return () => clearTimeout(timer);\n    }\n  }, [isAuthenticated, authLoading, setLocation, hasAttemptedLogin]);\n  const [showPassword, setShowPassword] = useState(false);\n\n  const form = useForm<LoginFormData>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n    },\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (data: LoginFormData) => {\n      const client = await initSupabase();\n      \n      const { data: authData, error } = await client.auth.signInWithPassword({\n        email: data.email,\n        password: data.password,\n      });\n      \n      if (error) {\n        console.error(\"[Login] signInWithPassword error:\", error.message, error.status);\n        if (error.message === \"Invalid login credentials\") {\n          throw new Error(\"E-mail ou senha incorretos.\");\n        } else if (error.message === \"Email not confirmed\") {\n          throw new Error(\"Seu e-mail ainda não foi confirmado. Verifique sua caixa de entrada.\");\n        } else {\n          throw new Error(error.message);\n        }\n      }\n      \n      return authData;\n    },\n    onSuccess: async () => {\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      await queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      await queryClient.refetchQueries({ queryKey: [\"/api/auth/user\"] });\n      \n      toast({\n        title: \"Login realizado!\",\n        description: \"Bem-vindo de volta!\",\n      });\n      \n      window.location.href = \"/\";\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro no login\",\n        description: error.message || \"Email ou senha incorretos\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const [googleLoading, setGoogleLoading] = useState(false);\n\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const error = params.get('error');\n    if (error) {\n      const detail = params.get('detail');\n      const errorMessages: Record<string, string> = {\n        google_denied: \"Login com Google foi cancelado.\",\n        google_init_failed: \"Erro ao iniciar login com Google.\",\n        token_exchange_failed: `Erro na autenticação com Google.${detail ? ` (${detail})` : ''} Tente novamente.`,\n        supabase_auth_failed: `Erro ao autenticar.${detail ? ` (${detail})` : ''} Tente novamente.`,\n        config_error: \"Google OAuth não está configurado.\",\n        supabase_config: \"Configuração do servidor incompleta. Contate o suporte.\",\n        no_code: \"Resposta inválida do Google.\",\n        invalid_state: \"Sessão expirada. Tente novamente.\",\n        unexpected: \"Erro inesperado. Tente novamente.\",\n      };\n      toast({\n        title: \"Erro no login com Google\",\n        description: errorMessages[error] || \"Erro desconhecido no login.\",\n        variant: \"destructive\",\n      });\n      window.history.replaceState({}, '', '/login');\n    }\n  }, [toast]);\n\n  const handleGoogleLogin = () => {\n    setGoogleLoading(true);\n    console.log(\"[Google Login] Redirecting to backend OAuth flow\");\n    const baseUrl = APP_URL || window.location.origin;\n    window.location.href = `${baseUrl}/api/auth/google`;\n  };\n\n  const onSubmit = (data: LoginFormData) => {\n    setHasAttemptedLogin(true);\n    loginMutation.mutate(data);\n  };\n\n  if (authLoading) return null;\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n\n      <div className=\"relative z-10 flex items-center justify-center min-h-screen p-4\">\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.6, ease: \"easeOut\" }}\n        className=\"w-full max-w-md relative z-10\"\n      >\n        <Card className=\"border-none shadow-2xl rounded-3xl backdrop-blur-sm bg-card/90\">\n          <CardHeader className=\"text-center space-y-2 pt-6\">\n            <motion.div \n              initial={{ scale: 0.8, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              transition={{ delay: 0.2, duration: 0.5 }}\n              className=\"mx-auto\"\n            >\n              <img src={logoImage} alt=\"BíbliaFS Logo\" className=\"w-16 h-16 object-cover rounded-2xl shadow-xl hover:scale-105 transition-transform duration-300\" />\n            </motion.div>\n            <CardTitle className=\"text-2xl font-extrabold tracking-tight\">Bem-vindo</CardTitle>\n            <CardDescription className=\"text-sm font-medium\">\n              Acesse sua conta para continuar sua jornada\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"px-8 pb-6\">\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"font-bold text-xs\">Email</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"email\"\n                          placeholder=\"seu@email.com\"\n                          className=\"h-11 rounded-xl bg-muted/50 border-primary/5 focus-visible:ring-primary text-base\"\n                          data-testid=\"input-email\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"password\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"font-bold text-xs\">Senha</FormLabel>\n                      <FormControl>\n                        <div className=\"relative\">\n                          <Input\n                            type={showPassword ? \"text\" : \"password\"}\n                            placeholder=\"Sua senha\"\n                            className=\"h-11 rounded-xl bg-muted/50 border-primary/5 focus-visible:ring-primary text-base pr-10\"\n                            data-testid=\"input-password\"\n                            {...field}\n                          />\n                          <button\n                            type=\"button\"\n                            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n                            onClick={() => setShowPassword(!showPassword)}\n                            data-testid=\"button-toggle-password\"\n                          >\n                            {showPassword ? (\n                              <EyeOff className=\"h-4 w-4\" />\n                            ) : (\n                              <Eye className=\"h-4 w-4\" />\n                            )}\n                          </button>\n                        </div>\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <div className=\"flex justify-end\">\n                  <Link \n                    href=\"/forgot-password\" \n                    className=\"text-xs font-bold text-primary hover:text-primary/80 transition-colors\"\n                    data-testid=\"link-forgot-password\"\n                  >\n                    Esqueceu sua senha?\n                  </Link>\n                </div>\n                <Button\n                  type=\"submit\"\n                  className=\"w-full h-12 rounded-xl font-bold text-base shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all\"\n                  disabled={loginMutation.isPending}\n                  data-testid=\"button-login\"\n                >\n                  {loginMutation.isPending ? (\n                    <>\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                      Entrando...\n                    </>\n                  ) : (\n                    \"Entrar agora\"\n                  )}\n                </Button>\n                \n                <div className=\"relative py-4\">\n                  <div className=\"absolute inset-0 flex items-center\">\n                    <span className=\"w-full border-t border-border/50\" />\n                  </div>\n                  <div className=\"relative flex justify-center text-[10px] uppercase\">\n                    <span className=\"bg-card px-4 text-muted-foreground font-semibold tracking-wider\">\n                      Entrar com Google\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"flex flex-col pt-2\">\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    className=\"w-full h-12 rounded-xl font-bold text-base border-primary/20 hover:bg-muted/50 transition-all flex items-center justify-center gap-3 shadow-sm\"\n                    onClick={handleGoogleLogin}\n                    disabled={googleLoading}\n                    data-testid=\"button-google-login\"\n                  >\n                    <svg className=\"w-6 h-6\" viewBox=\"0 0 24 24\">\n                      <path\n                        d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n                        fill=\"#4285F4\"\n                      />\n                      <path\n                        d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n                        fill=\"#34A853\"\n                      />\n                      <path\n                        d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n                        fill=\"#FBBC05\"\n                      />\n                      <path\n                        d=\"M12 5.38c1.62 0 3.06.56 4.21 1.66l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n                        fill=\"#EA4335\"\n                      />\n                    </svg>\n                    Acessar com Google\n                  </Button>\n                </div>\n\n                <div className=\"pt-2\">\n                  <Link href=\"/\" className=\"w-full\">\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      className=\"w-full h-11 rounded-xl font-bold text-sm text-muted-foreground hover:text-primary transition-all\"\n                    >\n                      Voltar para Landing Page\n                    </Button>\n                  </Link>\n                </div>\n              </form>\n            </Form>\n          </CardContent>\n          <CardFooter className=\"flex flex-col gap-4 px-8 pb-6 bg-muted/20 rounded-b-3xl border-t border-border/50\">\n            <p className=\"text-xs text-center text-muted-foreground pt-4 font-medium\">\n              Não tem uma conta?{\" \"}\n              <Link href=\"/register\" className=\"text-primary font-bold hover:underline underline-offset-4\" data-testid=\"link-register\">\n                Criar uma conta grátis\n              </Link>\n            </p>\n          </CardFooter>\n        </Card>\n      </motion.div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":13571,"size_tokens":null},"client/src/lib/supabase.ts":{"content":"import { createClient, SupabaseClient } from '@supabase/supabase-js';\nimport { SUPABASE_URL, SUPABASE_ANON_KEY } from './env-config';\nimport { persistentStorage, syncLocalStorageToIndexedDB, hydrateLocalStorageFromIndexedDB } from './persistentStorage';\n\nconst customStorage = {\n  getItem: (key: string): string | null => {\n    return localStorage.getItem(key);\n  },\n  setItem: (key: string, value: string): void => {\n    localStorage.setItem(key, value);\n    persistentStorage.setItem(key, value).catch(err => {\n      console.warn('[Supabase Storage] Failed to persist to IndexedDB:', err);\n    });\n  },\n  removeItem: (key: string): void => {\n    localStorage.removeItem(key);\n    persistentStorage.removeItem(key).catch(err => {\n      console.warn('[Supabase Storage] Failed to remove from IndexedDB:', err);\n    });\n  }\n};\n\nlet supabaseInstance: SupabaseClient | null = null;\nlet initPromise: Promise<SupabaseClient> | null = null;\nlet hydrationDone = false;\n\nfunction createSupabaseClient(): SupabaseClient {\n  const client = createClient(\n    SUPABASE_URL,\n    SUPABASE_ANON_KEY,\n    {\n      auth: {\n        autoRefreshToken: true,\n        persistSession: true,\n        detectSessionInUrl: true,\n        storage: customStorage,\n      },\n    }\n  );\n\n  client.auth.onAuthStateChange((event) => {\n    if (event === 'SIGNED_IN' || event === 'TOKEN_REFRESHED') {\n      syncLocalStorageToIndexedDB();\n    }\n  });\n\n  return client;\n}\n\nexport async function initSupabase(): Promise<SupabaseClient> {\n  if (supabaseInstance) return supabaseInstance;\n  \n  if (initPromise) return initPromise;\n  \n  initPromise = (async () => {\n    if (!hydrationDone) {\n      await hydrateLocalStorageFromIndexedDB();\n      hydrationDone = true;\n    }\n    supabaseInstance = createSupabaseClient();\n    return supabaseInstance;\n  })();\n  \n  return initPromise;\n}\n\nexport function getSupabase(): SupabaseClient {\n  if (!supabaseInstance) {\n    console.warn('[Supabase] getSupabase called before initSupabase - creating client without hydration');\n    supabaseInstance = createSupabaseClient();\n  }\n  return supabaseInstance;\n}\n\nexport const supabase = new Proxy({} as SupabaseClient, {\n  get(_target, prop) {\n    return getSupabase()[prop as keyof SupabaseClient];\n  }\n});\n","path":null,"size_bytes":2250,"size_tokens":null},"server/seed-stripe-donations.ts":{"content":"import Stripe from 'stripe';\n\nasync function getStripeClient() {\n  const hostname = process.env.REPLIT_CONNECTORS_HOSTNAME;\n  const xReplitToken = process.env.REPL_IDENTITY\n    ? 'repl ' + process.env.REPL_IDENTITY\n    : process.env.WEB_REPL_RENEWAL\n      ? 'depl ' + process.env.WEB_REPL_RENEWAL\n      : null;\n\n  if (!xReplitToken) {\n    throw new Error('X_REPLIT_TOKEN not found');\n  }\n\n  const url = new URL(`https://${hostname}/api/v2/connection`);\n  url.searchParams.set('include_secrets', 'true');\n  url.searchParams.set('connector_names', 'stripe');\n  url.searchParams.set('environment', 'development');\n\n  const response = await fetch(url.toString(), {\n    headers: {\n      'Accept': 'application/json',\n      'X_REPLIT_TOKEN': xReplitToken\n    }\n  });\n\n  const data = await response.json();\n  const connectionSettings = data.items?.[0];\n\n  if (!connectionSettings?.settings?.secret) {\n    throw new Error('Stripe connection not found');\n  }\n\n  return new Stripe(connectionSettings.settings.secret, {\n    apiVersion: '2025-08-27.basil' as any,\n  });\n}\n\nasync function createDonationProducts() {\n  console.log('🙏 Creating BíbliaFS Donation products...\\n');\n  \n  const stripe = await getStripeClient();\n\n  // Donation amounts\n  const donations = [\n    { name: 'R$ 10', amount: 1000, displayName: 'Doação R$ 10' },\n    { name: 'R$ 25', amount: 2500, displayName: 'Doação R$ 25' },\n    { name: 'R$ 50', amount: 5000, displayName: 'Doação R$ 50' },\n    { name: 'R$ 100', amount: 10000, displayName: 'Doação R$ 100' },\n  ];\n\n  console.log('📋 Creating donation products:\\n');\n  \n  const results: any = {};\n\n  for (const donation of donations) {\n    try {\n      // Check if product already exists\n      const existingProducts = await stripe.products.search({ \n        query: `name:'${donation.displayName}'`\n      });\n\n      if (existingProducts.data.length > 0) {\n        const product = existingProducts.data[0];\n        const prices = await stripe.prices.list({ product: product.id, active: true });\n        const price = prices.data[0];\n        \n        console.log(`⏭️ ${donation.displayName} já existe`);\n        console.log(`   Product ID: ${product.id}`);\n        console.log(`   Price ID: ${price.id}\\n`);\n        \n        results[donation.name] = { productId: product.id, priceId: price.id };\n        continue;\n      }\n\n      // Create new donation product\n      const product = await stripe.products.create({\n        name: donation.displayName,\n        description: 'Doação única para apoiar o BíbliaFS',\n        metadata: {\n          type: 'donation',\n          amount_brl: donation.name,\n          app: 'bibliafs'\n        }\n      });\n\n      const price = await stripe.prices.create({\n        product: product.id,\n        currency: 'brl',\n        custom_unit_amount: { enabled: true, maximum: 50000 }, // Permitir valores customizados até R$ 500\n      });\n\n      console.log(`✅ ${donation.displayName} criado!`);\n      console.log(`   Product ID: ${product.id}`);\n      console.log(`   Price ID: ${price.id}\\n`);\n\n      results[donation.name] = { productId: product.id, priceId: price.id };\n    } catch (error: any) {\n      console.error(`❌ Erro ao criar ${donation.displayName}:`, error.message);\n    }\n  }\n\n  console.log('═══════════════════════════════════════════════════════════');\n  console.log('🎉 Produtos de doação criados com sucesso!');\n  console.log('═══════════════════════════════════════════════════════════\\n');\n  \n  console.log('📋 PREÇOS CRIADOS:\\n');\n  for (const [name, data] of Object.entries(results)) {\n    console.log(`${name}:`);\n    console.log(`  VITE_STRIPE_DONATION_${name.replace('R$ ', '').toUpperCase()}_PRICE_ID=${data.priceId}`);\n  }\n  console.log('\\n');\n}\n\ncreateDonationProducts().catch(console.error);\n","path":null,"size_bytes":4023,"size_tokens":null},"client/src/pages/forgot-password.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Book, Loader2, ArrowLeft, CheckCircle, Mail } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nconst forgotPasswordSchema = z.object({\n  email: z.string().email(\"Email inválido\"),\n});\n\ntype ForgotPasswordFormData = z.infer<typeof forgotPasswordSchema>;\n\nexport default function ForgotPassword() {\n  const { toast } = useToast();\n  const [emailSent, setEmailSent] = useState(false);\n\n  const form = useForm<ForgotPasswordFormData>({\n    resolver: zodResolver(forgotPasswordSchema),\n    defaultValues: {\n      email: \"\",\n    },\n  });\n\n  const forgotPasswordMutation = useMutation({\n    mutationFn: async (data: ForgotPasswordFormData) => {\n      const response = await apiRequest(\"POST\", \"/api/auth/forgot-password\", data);\n      return response.json();\n    },\n    onSuccess: () => {\n      setEmailSent(true);\n      toast({\n        title: \"Email enviado!\",\n        description: \"Verifique sua caixa de entrada para redefinir sua senha.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro\",\n        description: error.message || \"Não foi possível enviar o email de recuperação\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: ForgotPasswordFormData) => {\n    forgotPasswordMutation.mutate(data);\n  };\n\n  if (emailSent) {\n    return (\n      <div className=\"min-h-screen bg-background relative overflow-hidden\">\n        <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n          <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n          <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n        </div>\n        <div className=\"relative z-10 flex items-center justify-center min-h-screen p-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center space-y-4\">\n            <div className=\"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center\">\n              <CheckCircle className=\"w-8 h-8 text-green-600 dark:text-green-400\" />\n            </div>\n            <CardTitle className=\"text-2xl font-bold\">Email Enviado!</CardTitle>\n            <CardDescription>\n              Enviamos um link de recuperação para o email informado. \n              Verifique sua caixa de entrada e spam.\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"p-4 bg-muted rounded-md\">\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                <Mail className=\"w-4 h-4\" />\n                <span>O link expira em 1 hora</span>\n              </div>\n            </div>\n          </CardContent>\n          <CardFooter className=\"flex flex-col gap-4\">\n            <Link href=\"/login\" className=\"w-full\">\n              <Button variant=\"outline\" className=\"w-full\" data-testid=\"button-back-login\">\n                <ArrowLeft className=\"mr-2 h-4 w-4\" />\n                Voltar para o login\n              </Button>\n            </Link>\n          </CardFooter>\n        </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"relative z-10 flex items-center justify-center min-h-screen p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center space-y-4\">\n          <div className=\"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center\">\n            <Book className=\"w-8 h-8 text-primary\" />\n          </div>\n          <CardTitle className=\"text-2xl font-bold\">Esqueceu sua senha?</CardTitle>\n          <CardDescription>\n            Digite seu email e enviaremos um link para você criar uma nova senha.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Email</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"email\"\n                        placeholder=\"seu@email.com\"\n                        data-testid=\"input-email\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={forgotPasswordMutation.isPending}\n                data-testid=\"button-send-reset\"\n              >\n                {forgotPasswordMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Enviando...\n                  </>\n                ) : (\n                  \"Enviar link de recuperação\"\n                )}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n        <CardFooter className=\"flex flex-col gap-4\">\n          <Link href=\"/login\" className=\"w-full\">\n            <Button variant=\"ghost\" className=\"w-full\" data-testid=\"button-back-login\">\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\n              Voltar para o login\n            </Button>\n          </Link>\n        </CardFooter>\n      </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":6569,"size_tokens":null},"client/src/pages/reset-password.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation, useSearch } from \"wouter\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { apiFetch } from \"@/lib/config\";\nimport { Book, Loader2, Eye, EyeOff, CheckCircle, ArrowLeft } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { getSupabase } from \"@/lib/supabase\";\n\nconst resetPasswordSchema = z.object({\n  password: z.string().min(6, \"Senha deve ter pelo menos 6 caracteres\"),\n  confirmPassword: z.string().min(6, \"Confirme sua senha\"),\n}).refine((data) => data.password === data.confirmPassword, {\n  message: \"As senhas não coincidem\",\n  path: [\"confirmPassword\"],\n});\n\ntype ResetPasswordFormData = z.infer<typeof resetPasswordSchema>;\n\nexport default function ResetPassword() {\n  const [, setLocation] = useLocation();\n  const searchString = useSearch();\n  const { toast } = useToast();\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [passwordReset, setPasswordReset] = useState(false);\n\n  const params = new URLSearchParams(searchString);\n  const accessToken = params.get(\"access_token\");\n  const refreshToken = params.get(\"refresh_token\");\n  const type = params.get(\"type\");\n  const customToken = params.get(\"token\");\n\n  const hasValidToken = !!(accessToken || customToken);\n\n  const form = useForm<ResetPasswordFormData>({\n    resolver: zodResolver(resetPasswordSchema),\n    defaultValues: {\n      password: \"\",\n      confirmPassword: \"\",\n    },\n  });\n\n  const resetPasswordMutation = useMutation({\n    mutationFn: async (data: ResetPasswordFormData) => {\n      if (customToken) {\n        const res = await apiFetch(\"/api/auth/reset-password\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ token: customToken, password: data.password }),\n        });\n        const result = await res.json();\n        if (!res.ok) throw new Error(result.message || \"Erro ao redefinir senha\");\n        return result;\n      } else {\n        const { error } = await getSupabase().auth.updateUser({\n          password: data.password\n        });\n        if (error) throw error;\n        return { success: true };\n      }\n    },\n    onSuccess: () => {\n      setPasswordReset(true);\n      toast({\n        title: \"Senha redefinida!\",\n        description: \"Sua senha foi alterada com sucesso.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro\",\n        description: error.message || \"Não foi possível redefinir a senha. O link pode ter expirado.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: ResetPasswordFormData) => {\n    resetPasswordMutation.mutate(data);\n  };\n\n  if (!hasValidToken && type === 'recovery') {\n    return (\n      <div className=\"min-h-screen bg-background relative overflow-hidden\">\n        <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n          <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n          <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n        </div>\n        <div className=\"relative z-10 flex items-center justify-center min-h-screen p-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center space-y-4\">\n            <div className=\"mx-auto w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center\">\n              <Book className=\"w-8 h-8 text-red-600 dark:text-red-400\" />\n            </div>\n            <CardTitle className=\"text-2xl font-bold\">Link Inválido</CardTitle>\n            <CardDescription>\n              O link de recuperação é inválido ou expirou. Por favor, solicite um novo link.\n            </CardDescription>\n          </CardHeader>\n          <CardFooter className=\"flex flex-col gap-4\">\n            <Link href=\"/forgot-password\" title=\"Solicitar novo link\" className=\"w-full\">\n              <Button className=\"w-full\" data-testid=\"button-request-new\">\n                Solicitar novo link\n              </Button>\n            </Link>\n            <Link href=\"/login\" title=\"Voltar para o login\" className=\"w-full\">\n              <Button variant=\"ghost\" className=\"w-full\" data-testid=\"button-back-login\">\n                <ArrowLeft className=\"mr-2 h-4 w-4\" />\n                Voltar para o login\n              </Button>\n            </Link>\n          </CardFooter>\n        </Card>\n        </div>\n      </div>\n    );\n  }\n\n  if (passwordReset) {\n    return (\n      <div className=\"min-h-screen bg-background relative overflow-hidden\">\n        <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n          <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n          <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n        </div>\n        <div className=\"relative z-10 flex items-center justify-center min-h-screen p-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center space-y-4\">\n            <div className=\"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center\">\n              <CheckCircle className=\"w-8 h-8 text-green-600 dark:text-green-400\" />\n            </div>\n            <CardTitle className=\"text-2xl font-bold\">Senha Redefinida!</CardTitle>\n            <CardDescription>\n              Sua senha foi alterada com sucesso. Agora você pode fazer login com sua nova senha.\n            </CardDescription>\n          </CardHeader>\n          <CardFooter className=\"flex flex-col gap-4\">\n            <Link href=\"/login\" className=\"w-full\">\n              <Button className=\"w-full\" data-testid=\"button-go-login\">\n                Ir para o login\n              </Button>\n            </Link>\n          </CardFooter>\n        </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"relative z-10 flex items-center justify-center min-h-screen p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center space-y-4\">\n          <div className=\"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center\">\n            <Book className=\"w-8 h-8 text-primary\" />\n          </div>\n          <CardTitle className=\"text-2xl font-bold\">Nova Senha</CardTitle>\n          <CardDescription>\n            Digite sua nova senha abaixo.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"password\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nova Senha</FormLabel>\n                    <FormControl>\n                      <div className=\"relative\">\n                        <Input\n                          type={showPassword ? \"text\" : \"password\"}\n                          placeholder=\"Mínimo 6 caracteres\"\n                          data-testid=\"input-password\"\n                          {...field}\n                        />\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"absolute right-0 top-0 h-full px-3 hover:bg-transparent\"\n                          onClick={() => setShowPassword(!showPassword)}\n                          data-testid=\"button-toggle-password\"\n                        >\n                          {showPassword ? (\n                            <EyeOff className=\"h-4 w-4 text-muted-foreground\" />\n                          ) : (\n                            <Eye className=\"h-4 w-4 text-muted-foreground\" />\n                          )}\n                        </Button>\n                      </div>\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"confirmPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Confirmar Senha</FormLabel>\n                    <FormControl>\n                      <div className=\"relative\">\n                        <Input\n                          type={showConfirmPassword ? \"text\" : \"password\"}\n                          placeholder=\"Digite novamente\"\n                          data-testid=\"input-confirm-password\"\n                          {...field}\n                        />\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"absolute right-0 top-0 h-full px-3 hover:bg-transparent\"\n                          onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                          data-testid=\"button-toggle-confirm-password\"\n                        >\n                          {showConfirmPassword ? (\n                            <EyeOff className=\"h-4 w-4 text-muted-foreground\" />\n                          ) : (\n                            <Eye className=\"h-4 w-4 text-muted-foreground\" />\n                          )}\n                        </Button>\n                      </div>\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={resetPasswordMutation.isPending}\n                data-testid=\"button-reset-password\"\n              >\n                {resetPasswordMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Redefinindo...\n                  </>\n                ) : (\n                  \"Redefinir Senha\"\n                )}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n        <CardFooter className=\"flex flex-col gap-4\">\n          <Link href=\"/login\" className=\"w-full\">\n            <Button variant=\"ghost\" className=\"w-full\" data-testid=\"button-back-login\">\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\n              Voltar para o login\n            </Button>\n          </Link>\n        </CardFooter>\n      </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":11635,"size_tokens":null},"client/src/pages/register.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { initSupabase } from \"@/lib/supabase\";\nimport { apiFetch, isNative } from \"@/lib/config\";\nimport { APP_URL } from \"@/lib/env-config\";\nimport { Eye, EyeOff, Loader2, ArrowLeft, CheckCircle2, Mail, RefreshCw } from \"lucide-react\";\nimport { SiGoogle } from \"react-icons/si\";\nimport { Link } from \"wouter\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport logoImage from \"../assets/logo-new.png\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nconst registerSchema = z.object({\n  email: z.string().email(\"Email invalido\"),\n  firstName: z.string().min(2, \"Nome deve ter pelo menos 2 caracteres\"),\n  lastName: z.string().min(2, \"Sobrenome deve ter pelo menos 2 caracteres\"),\n  password: z.string()\n    .min(6, \"Senha deve ter pelo menos 6 caracteres\"),\n  confirmPassword: z.string(),\n}).refine((data) => data.password === data.confirmPassword, {\n  message: \"As senhas nao coincidem\",\n  path: [\"confirmPassword\"],\n});\n\ntype RegisterFormData = z.infer<typeof registerSchema>;\n\ntype Step = \"register\" | \"verify\" | \"success\";\n\nexport default function Register() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const { isLoading: authLoading } = useAuth();\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [step, setStep] = useState<Step>(\"register\");\n  const [registeredEmail, setRegisteredEmail] = useState(\"\");\n  const [registeredUserId, setRegisteredUserId] = useState(\"\");\n  const [otpDigits, setOtpDigits] = useState([\"\", \"\", \"\", \"\", \"\", \"\"]);\n  const [resendCooldown, setResendCooldown] = useState(0);\n  const inputRefs = useRef<(HTMLInputElement | null)[]>([]);\n\n  useEffect(() => {\n    if (resendCooldown > 0) {\n      const timer = setTimeout(() => setResendCooldown(resendCooldown - 1), 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [resendCooldown]);\n\n  const form = useForm<RegisterFormData>({\n    resolver: zodResolver(registerSchema),\n    defaultValues: {\n      email: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n    },\n  });\n\n  const registerMutation = useMutation({\n    mutationFn: async (data: RegisterFormData) => {\n      const response = await apiFetch(\"/api/auth/register-with-otp\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          email: data.email,\n          password: data.password,\n          firstName: data.firstName,\n          lastName: data.lastName,\n        }),\n      });\n      \n      const result = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(result.message || \"Erro ao criar conta\");\n      }\n      \n      if (result.code) {\n        console.log(\"[DEV] Codigo OTP:\", result.code);\n      }\n      \n      return result;\n    },\n    onSuccess: (data) => {\n      setRegisteredEmail(data.email);\n      setRegisteredUserId(data.userId);\n      setStep(\"verify\");\n      setResendCooldown(60);\n      toast({\n        title: \"Codigo enviado!\",\n        description: `Enviamos um codigo de verificacao para ${data.email}`,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao criar conta\",\n        description: error.message || \"Nao foi possivel criar sua conta\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const verifyMutation = useMutation({\n    mutationFn: async (code: string) => {\n      const response = await apiFetch(\"/api/auth/verify-otp\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email: registeredEmail, code, userId: registeredUserId }),\n      });\n      \n      const result = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(result.message || \"Codigo invalido\");\n      }\n      \n      return result;\n    },\n    onSuccess: () => {\n      setStep(\"success\");\n      toast({\n        title: \"Email verificado!\",\n        description: \"Sua conta foi confirmada com sucesso.\",\n      });\n      setTimeout(() => {\n        setLocation(\"/login\");\n      }, 2500);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Codigo invalido\",\n        description: error.message || \"Verifique o codigo e tente novamente\",\n        variant: \"destructive\",\n      });\n      setOtpDigits([\"\", \"\", \"\", \"\", \"\", \"\"]);\n      inputRefs.current[0]?.focus();\n    },\n  });\n\n  const resendMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiFetch(\"/api/auth/resend-otp\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email: registeredEmail }),\n      });\n      \n      const result = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(result.message || \"Erro ao reenviar codigo\");\n      }\n      \n      if (result.code) {\n        console.log(\"[DEV] Novo codigo OTP:\", result.code);\n      }\n      \n      return result;\n    },\n    onSuccess: () => {\n      setResendCooldown(60);\n      setOtpDigits([\"\", \"\", \"\", \"\", \"\", \"\"]);\n      toast({\n        title: \"Codigo reenviado!\",\n        description: `Novo codigo enviado para ${registeredEmail}`,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao reenviar\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleOtpChange = (index: number, value: string) => {\n    if (!/^\\d*$/.test(value)) return;\n    \n    const newDigits = [...otpDigits];\n    \n    if (value.length > 1) {\n      const chars = value.split(\"\").filter(c => /\\d/.test(c)).slice(0, 6);\n      chars.forEach((char, i) => {\n        if (index + i < 6) {\n          newDigits[index + i] = char;\n        }\n      });\n      setOtpDigits(newDigits);\n      const nextIndex = Math.min(index + chars.length, 5);\n      inputRefs.current[nextIndex]?.focus();\n      \n      const fullCode = newDigits.join(\"\");\n      if (fullCode.length === 6 && !verifyMutation.isPending) {\n        verifyMutation.mutate(fullCode);\n      }\n      return;\n    }\n    \n    newDigits[index] = value;\n    setOtpDigits(newDigits);\n    \n    if (value && index < 5) {\n      inputRefs.current[index + 1]?.focus();\n    }\n    \n    const fullCode = newDigits.join(\"\");\n    if (fullCode.length === 6 && !verifyMutation.isPending) {\n      verifyMutation.mutate(fullCode);\n    }\n  };\n\n  const handleOtpKeyDown = (index: number, e: React.KeyboardEvent) => {\n    if (e.key === \"Backspace\" && !otpDigits[index] && index > 0) {\n      inputRefs.current[index - 1]?.focus();\n    }\n  };\n\n  const onSubmit = (data: RegisterFormData) => {\n    registerMutation.mutate(data);\n  };\n\n  if (authLoading) return null;\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n\n      <div className=\"relative z-10 flex items-center justify-center min-h-screen p-4\">\n        <AnimatePresence mode=\"wait\">\n          {step === \"register\" && (\n            <motion.div\n              key=\"register\"\n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, x: -50 }}\n              transition={{ duration: 0.4, ease: \"easeOut\" }}\n              className=\"w-full max-w-md relative z-10\"\n            >\n              <Card className=\"border-none shadow-2xl rounded-3xl backdrop-blur-sm bg-card/90\">\n                <CardHeader className=\"text-center space-y-2 pt-6\">\n                  <motion.div \n                    initial={{ rotate: -10, opacity: 0 }}\n                    animate={{ rotate: 0, opacity: 1 }}\n                    transition={{ delay: 0.2, duration: 0.5 }}\n                    className=\"mx-auto\"\n                  >\n                    <img src={logoImage} alt=\"BibliaFS Logo\" className=\"w-16 h-16 object-cover rounded-2xl shadow-xl\" />\n                  </motion.div>\n                  <CardTitle className=\"text-2xl font-extrabold tracking-tight\">Criar Conta</CardTitle>\n                  <CardDescription className=\"text-sm font-medium\">\n                    Junte-se a nossa comunidade de estudo biblico\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"px-8 pb-6\">\n                  <Form {...form}>\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-3\">\n                      <div className=\"grid grid-cols-2 gap-3\">\n                        <FormField\n                          control={form.control}\n                          name=\"firstName\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel className=\"font-bold text-xs\">Nome</FormLabel>\n                              <FormControl>\n                                <Input\n                                  placeholder=\"Joao\"\n                                  className=\"h-10 rounded-xl bg-muted/50 border-primary/5 focus-visible:ring-primary font-medium text-sm\"\n                                  data-testid=\"input-firstName\"\n                                  {...field}\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={form.control}\n                          name=\"lastName\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel className=\"font-bold text-xs\">Sobrenome</FormLabel>\n                              <FormControl>\n                                <Input\n                                  placeholder=\"Silva\"\n                                  className=\"h-10 rounded-xl bg-muted/50 border-primary/5 focus-visible:ring-primary font-medium text-sm\"\n                                  data-testid=\"input-lastName\"\n                                  {...field}\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n                      <FormField\n                        control={form.control}\n                        name=\"email\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"font-bold text-xs\">Email</FormLabel>\n                            <FormControl>\n                              <Input\n                                type=\"email\"\n                                placeholder=\"seu@email.com\"\n                                className=\"h-10 rounded-xl bg-muted/50 border-primary/5 focus-visible:ring-primary font-medium text-sm\"\n                                data-testid=\"input-email\"\n                                {...field}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"password\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"font-bold text-xs\">Senha</FormLabel>\n                            <FormControl>\n                              <div className=\"relative\">\n                                <Input\n                                  type={showPassword ? \"text\" : \"password\"}\n                                  placeholder=\"Minimo 6 caracteres\"\n                                  className=\"h-10 rounded-xl bg-muted/50 border-primary/5 focus-visible:ring-primary font-medium pr-10 text-sm\"\n                                  data-testid=\"input-password\"\n                                  {...field}\n                                />\n                                <button\n                                  type=\"button\"\n                                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n                                  onClick={() => setShowPassword(!showPassword)}\n                                  data-testid=\"button-toggle-password\"\n                                >\n                                  {showPassword ? (\n                                    <EyeOff className=\"h-4 w-4\" />\n                                  ) : (\n                                    <Eye className=\"h-4 w-4\" />\n                                  )}\n                                </button>\n                              </div>\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"confirmPassword\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel className=\"font-bold text-xs\">Confirmar Senha</FormLabel>\n                            <FormControl>\n                              <div className=\"relative\">\n                                <Input\n                                  type={showConfirmPassword ? \"text\" : \"password\"}\n                                  placeholder=\"Confirme sua senha\"\n                                  className=\"h-10 rounded-xl bg-muted/50 border-primary/5 focus-visible:ring-primary font-medium pr-10 text-sm\"\n                                  data-testid=\"input-confirmPassword\"\n                                  {...field}\n                                />\n                                <button\n                                  type=\"button\"\n                                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n                                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                                  data-testid=\"button-toggle-confirmPassword\"\n                                >\n                                  {showConfirmPassword ? (\n                                    <EyeOff className=\"h-4 w-4\" />\n                                  ) : (\n                                    <Eye className=\"h-4 w-4\" />\n                                  )}\n                                </button>\n                              </div>\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <Button\n                        type=\"submit\"\n                        className=\"w-full h-12 rounded-xl font-bold text-base shadow-lg shadow-primary/20 transition-all mt-2\"\n                        disabled={registerMutation.isPending}\n                        data-testid=\"button-register\"\n                      >\n                        {registerMutation.isPending ? (\n                          <>\n                            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                            Criando conta...\n                          </>\n                        ) : (\n                          \"Comecar agora\"\n                        )}\n                      </Button>\n                    </form>\n                  </Form>\n                </CardContent>\n                <CardFooter className=\"flex flex-col gap-4 px-8 pb-6 bg-muted/20 rounded-b-3xl border-t border-border/50\">\n                  <div className=\"w-full space-y-3 pt-4\">\n                    <div className=\"relative py-2\">\n                      <div className=\"absolute inset-0 flex items-center\">\n                        <span className=\"w-full border-t border-border\" />\n                      </div>\n                      <div className=\"relative flex justify-center text-[10px] uppercase\">\n                        <span className=\"bg-muted px-4 text-muted-foreground font-bold tracking-wider\">Registrar com Google</span>\n                      </div>\n                    </div>\n\n                    <div className=\"flex flex-col pt-1\">\n                      <Button\n                        variant=\"outline\"\n                        type=\"button\"\n                        className=\"w-full h-11 rounded-xl font-bold text-sm flex items-center justify-center gap-3 border-border/50 bg-card transition-all shadow-sm hover:bg-muted/50\"\n                        onClick={() => {\n                          console.log(\"[Register Google] Redirecting to backend OAuth flow\");\n                          const baseUrl = APP_URL || window.location.origin;\n                          window.location.href = `${baseUrl}/api/auth/google`;\n                        }}\n                        data-testid=\"button-register-google\"\n                      >\n                        <SiGoogle className=\"h-5 w-5 text-[#4285F4]\" />\n                        Criar conta com Google\n                      </Button>\n                    </div>\n\n                    <Link href=\"/\" className=\"w-full block\">\n                      <Button\n                        type=\"button\"\n                        variant=\"ghost\"\n                        className=\"w-full h-10 rounded-xl font-bold text-xs text-muted-foreground transition-all\"\n                      >\n                        Voltar para Landing Page\n                      </Button>\n                    </Link>\n                  </div>\n\n                  <p className=\"text-xs text-center text-muted-foreground font-medium\">\n                    Ja tem uma conta?{\" \"}\n                    <Link href=\"/login\" className=\"text-primary font-bold hover:underline underline-offset-4\" data-testid=\"link-login\">\n                      Fazer login\n                    </Link>\n                  </p>\n                </CardFooter>\n              </Card>\n            </motion.div>\n          )}\n\n          {step === \"verify\" && (\n            <motion.div\n              key=\"verify\"\n              initial={{ opacity: 0, x: 50 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -50 }}\n              transition={{ duration: 0.4, ease: \"easeOut\" }}\n              className=\"w-full max-w-md relative z-10\"\n            >\n              <Card className=\"border-none shadow-2xl rounded-3xl backdrop-blur-sm bg-card/90\">\n                <CardHeader className=\"text-center space-y-3 pt-8\">\n                  <motion.div\n                    initial={{ scale: 0 }}\n                    animate={{ scale: 1 }}\n                    transition={{ delay: 0.2, type: \"spring\", stiffness: 200 }}\n                    className=\"mx-auto\"\n                  >\n                    <div className=\"h-16 w-16 rounded-2xl bg-primary/10 flex items-center justify-center mx-auto\">\n                      <Mail className=\"h-8 w-8 text-primary\" />\n                    </div>\n                  </motion.div>\n                  <CardTitle className=\"text-2xl font-extrabold tracking-tight\">Verifique seu email</CardTitle>\n                  <CardDescription className=\"text-sm font-medium px-4\">\n                    Enviamos um codigo de 6 digitos para{\" \"}\n                    <span className=\"font-bold text-foreground\">{registeredEmail}</span>\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"px-8 pb-8\">\n                  <div className=\"space-y-6\">\n                    <div className=\"flex justify-center gap-2\">\n                      {otpDigits.map((digit, index) => (\n                        <Input\n                          key={index}\n                          ref={(el) => { inputRefs.current[index] = el; }}\n                          type=\"text\"\n                          inputMode=\"numeric\"\n                          maxLength={index === 0 ? 6 : 1}\n                          value={digit}\n                          onChange={(e) => handleOtpChange(index, e.target.value)}\n                          onKeyDown={(e) => handleOtpKeyDown(index, e)}\n                          className=\"w-12 h-14 text-center text-xl font-bold rounded-xl bg-muted/50 border-primary/10 focus-visible:ring-primary focus-visible:border-primary\"\n                          data-testid={`input-otp-${index}`}\n                          autoFocus={index === 0}\n                          disabled={verifyMutation.isPending}\n                        />\n                      ))}\n                    </div>\n\n                    <Button\n                      className=\"w-full h-12 rounded-xl font-bold text-base shadow-lg shadow-primary/20 transition-all\"\n                      disabled={verifyMutation.isPending || otpDigits.join(\"\").length !== 6}\n                      onClick={() => {\n                        const fullCode = otpDigits.join(\"\");\n                        if (fullCode.length === 6) {\n                          verifyMutation.mutate(fullCode);\n                        }\n                      }}\n                      data-testid=\"button-verify-otp\"\n                    >\n                      {verifyMutation.isPending ? (\n                        <>\n                          <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                          Verificando...\n                        </>\n                      ) : (\n                        \"Verificar codigo\"\n                      )}\n                    </Button>\n\n                    <div className=\"text-center space-y-3\">\n                      <p className=\"text-xs text-muted-foreground\">\n                        Nao recebeu o codigo?\n                      </p>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => resendMutation.mutate()}\n                        disabled={resendCooldown > 0 || resendMutation.isPending}\n                        className=\"font-bold text-sm\"\n                        data-testid=\"button-resend-otp\"\n                      >\n                        {resendMutation.isPending ? (\n                          <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                        ) : (\n                          <RefreshCw className=\"mr-2 h-4 w-4\" />\n                        )}\n                        {resendCooldown > 0 \n                          ? `Reenviar em ${resendCooldown}s` \n                          : \"Reenviar codigo\"}\n                      </Button>\n                    </div>\n\n                    <Button\n                      variant=\"ghost\"\n                      className=\"w-full font-bold text-sm text-muted-foreground\"\n                      onClick={() => {\n                        setStep(\"register\");\n                        setOtpDigits([\"\", \"\", \"\", \"\", \"\", \"\"]);\n                      }}\n                      data-testid=\"button-back-to-register\"\n                    >\n                      <ArrowLeft className=\"mr-2 h-4 w-4\" />\n                      Voltar e usar outro email\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          )}\n\n          {step === \"success\" && (\n            <motion.div\n              key=\"success\"\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ duration: 0.5, ease: \"easeOut\" }}\n              className=\"w-full max-w-md relative z-10\"\n            >\n              <Card className=\"border-none shadow-2xl rounded-3xl backdrop-blur-sm bg-card/90\">\n                <CardContent className=\"py-12 px-8 text-center space-y-6\">\n                  <motion.div\n                    initial={{ scale: 0 }}\n                    animate={{ scale: 1 }}\n                    transition={{ delay: 0.2, type: \"spring\", stiffness: 200 }}\n                  >\n                    <div className=\"h-20 w-20 rounded-full bg-green-500/10 flex items-center justify-center mx-auto\">\n                      <CheckCircle2 className=\"h-10 w-10 text-green-600\" />\n                    </div>\n                  </motion.div>\n                  <div className=\"space-y-2\">\n                    <h2 className=\"text-2xl font-extrabold tracking-tight\">Conta verificada!</h2>\n                    <p className=\"text-sm text-muted-foreground font-medium\">\n                      Seu email foi confirmado com sucesso. Redirecionando para o login...\n                    </p>\n                  </div>\n                  <Loader2 className=\"h-5 w-5 animate-spin mx-auto text-primary\" />\n                </CardContent>\n              </Card>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":25920,"size_tokens":null},"server/supabaseAuth.ts":{"content":"import type { RequestHandler } from \"express\";\nimport { createClient, SupabaseClient } from \"@supabase/supabase-js\";\n\n// Try backend vars first, then fallback to VITE_ prefixed (they might be set as regular env vars)\nconst supabaseUrl = process.env.SUPABASE_URL || process.env.VITE_SUPABASE_URL;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_ANON_KEY || process.env.VITE_SUPABASE_ANON_KEY;\n\nlet supabaseAdmin: SupabaseClient | null = null;\n\nif (supabaseUrl && supabaseServiceKey) {\n  try {\n    supabaseAdmin = createClient(supabaseUrl, supabaseServiceKey, {\n      auth: {\n        autoRefreshToken: false,\n        persistSession: false,\n      },\n    });\n    console.log(\"[Supabase] Admin client initialized successfully\");\n  } catch (error) {\n    console.warn(\"[Supabase] Failed to initialize admin client:\", error);\n  }\n} else {\n  console.warn(\"⚠️  Supabase environment variables not configured (SUPABASE_URL, SUPABASE_ANON_KEY)\");\n}\n\nexport { supabaseAdmin };\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  try {\n    const authHeader = req.headers.authorization;\n    \n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n      console.log(\"[Auth] No token provided\");\n      return res.status(401).json({ message: \"Unauthorized - No token provided\" });\n    }\n    \n    const token = authHeader.substring(7);\n    console.log(\"[Auth] Verifying token, length:\", token.length);\n    \n    if (!supabaseAdmin) {\n      console.error(\"[Auth] Supabase not configured\");\n      return res.status(500).json({ message: \"Authentication service not configured\" });\n    }\n    \n    const { data: { user }, error } = await supabaseAdmin.auth.getUser(token);\n    \n    if (error) {\n      console.error(\"[Auth] Token validation error:\", error.message, error.status);\n      return res.status(401).json({ message: \"Unauthorized - Invalid token\", error: error.message });\n    }\n    \n    if (!user) {\n      console.log(\"[Auth] No user found for token\");\n      return res.status(401).json({ message: \"Unauthorized - User not found\" });\n    }\n    \n    console.log(\"[Auth] User authenticated:\", user.id, user.email);\n    \n    (req as any).user = {\n      claims: {\n        sub: user.id,\n        email: user.email,\n        first_name: user.user_metadata?.first_name || user.user_metadata?.firstName || \"\",\n        last_name: user.user_metadata?.last_name || user.user_metadata?.lastName || \"\",\n      },\n      supabaseUser: user,\n    };\n    \n    return next();\n  } catch (error: any) {\n    console.error(\"[Auth] Error verifying token:\", error.message);\n    return res.status(500).json({ message: \"Unauthorized\", error: error.message });\n  }\n};\n","path":null,"size_bytes":2696,"size_tokens":null},"server/stripeClient.ts":{"content":"import Stripe from 'stripe';\n\nlet connectionSettings: any;\n\nasync function getCredentials() {\n  const hostname = process.env.REPLIT_CONNECTORS_HOSTNAME;\n  const xReplitToken = process.env.REPL_IDENTITY\n    ? 'repl ' + process.env.REPL_IDENTITY\n    : process.env.WEB_REPL_RENEWAL\n      ? 'depl ' + process.env.WEB_REPL_RENEWAL\n      : null;\n\n  if (!xReplitToken) {\n    throw new Error('X_REPLIT_TOKEN not found for repl/depl');\n  }\n\n  // Use stripe connector for all environments\n  const connectorName = 'stripe';\n  const isProduction = process.env.REPLIT_DEPLOYMENT === '1';\n  const targetEnvironment = isProduction ? 'production' : 'development';\n\n  const url = new URL(`https://${hostname}/api/v2/connection`);\n  url.searchParams.set('include_secrets', 'true');\n  url.searchParams.set('connector_names', connectorName);\n  url.searchParams.set('environment', targetEnvironment);\n\n  const response = await fetch(url.toString(), {\n    headers: {\n      'Accept': 'application/json',\n      'X_REPLIT_TOKEN': xReplitToken\n    }\n  });\n\n  const data = await response.json();\n  \n  connectionSettings = data.items?.[0];\n\n  if (!connectionSettings || (!connectionSettings.settings.publishable || !connectionSettings.settings.secret)) {\n    throw new Error(`Stripe ${targetEnvironment} connection not found`);\n  }\n\n  return {\n    publishableKey: connectionSettings.settings.publishable,\n    secretKey: connectionSettings.settings.secret,\n  };\n}\n\nexport async function getUncachableStripeClient() {\n  const { secretKey } = await getCredentials();\n\n  return new Stripe(secretKey, {\n    apiVersion: '2025-11-17.clover',\n  });\n}\n\nexport async function getStripePublishableKey() {\n  const { publishableKey } = await getCredentials();\n  return publishableKey;\n}\n\nexport async function getStripeSecretKey() {\n  const { secretKey } = await getCredentials();\n  return secretKey;\n}\n\nlet stripeSync: any = null;\n\nexport async function getStripeSync() {\n  if (!stripeSync) {\n    const { StripeSync } = await import('stripe-replit-sync');\n    const secretKey = await getStripeSecretKey();\n\n    stripeSync = new StripeSync({\n      poolConfig: {\n        connectionString: process.env.DATABASE_URL!,\n        max: 2,\n      },\n      stripeSecretKey: secretKey,\n    });\n  }\n  return stripeSync;\n}\n","path":null,"size_bytes":2268,"size_tokens":null},"server/seed-products.ts":{"content":"/**\n * Seed Products Script for BíbliaFS\n * \n * This script creates the subscription products and prices in Stripe.\n * Run this once in development to create products.\n * \n * Usage: npx tsx server/seed-products.ts\n * \n * The created prices will be synced to the database via webhooks.\n * Update your frontend with the generated price IDs.\n */\n\nimport Stripe from 'stripe';\n\nasync function seedProducts() {\n  const secretKey = process.env.STRIPE_SECRET_KEY;\n  \n  if (!secretKey) {\n    console.error('❌ STRIPE_SECRET_KEY não configurada');\n    process.exit(1);\n  }\n  \n  const stripe = new Stripe(secretKey, {\n    apiVersion: '2025-08-27.basil',\n  });\n\n  console.log('🚀 Creating BíbliaFS subscription products...\\n');\n\n  try {\n    // Create Mensal (Monthly) product\n    console.log('📦 Creating Mensal (Monthly) product...');\n    const monthlyProduct = await stripe.products.create({\n      name: 'Mensal',\n      description: 'Acesso premium completo - IA Teológica, Podcasts, Modo Professor, Áudio narrado',\n      metadata: {\n        type: 'subscription',\n        plan: 'monthly',\n        aiLimit: '~500 perguntas/mês',\n      },\n    });\n    console.log(`✅ Mensal product created: ${monthlyProduct.id}`);\n\n    const monthlyPrice = await stripe.prices.create({\n      product: monthlyProduct.id,\n      unit_amount: 1990, // R$ 19,90\n      currency: 'brl',\n      recurring: {\n        interval: 'month',\n      },\n      metadata: {\n        plan: 'monthly',\n      },\n    });\n    console.log(`✅ Mensal price created: ${monthlyPrice.id}\\n`);\n\n    // Create Anual (Yearly) product\n    console.log('📦 Creating Anual (Yearly) product...');\n    const yearlyProduct = await stripe.products.create({\n      name: 'Anual',\n      description: 'Tudo do Mensal + Economia de 37% - IA Teológica, Badge exclusivo, Comunidade VIP',\n      metadata: {\n        type: 'subscription',\n        plan: 'yearly',\n        aiLimit: '~3.750 perguntas/ano',\n        savings: 'R$ 89/ano',\n      },\n    });\n    console.log(`✅ Anual product created: ${yearlyProduct.id}`);\n\n    const yearlyPrice = await stripe.prices.create({\n      product: yearlyProduct.id,\n      unit_amount: 14990, // R$ 149,90\n      currency: 'brl',\n      recurring: {\n        interval: 'year',\n      },\n      metadata: {\n        plan: 'yearly',\n      },\n    });\n    console.log(`✅ Anual price created: ${yearlyPrice.id}\\n`);\n\n    // Create Premium Plus product\n    console.log('📦 Creating Premium Plus product...');\n    const premiumPlusProduct = await stripe.products.create({\n      name: 'Premium Plus',\n      description: 'Máximo poder de IA - Dobro do limite Anual + Acesso antecipado a recursos + Suporte VIP 24h',\n      metadata: {\n        type: 'subscription',\n        plan: 'premium_plus',\n        aiLimit: '~7.200 perguntas/ano',\n      },\n    });\n    console.log(`✅ Premium Plus product created: ${premiumPlusProduct.id}`);\n\n    const premiumPlusPrice = await stripe.prices.create({\n      product: premiumPlusProduct.id,\n      unit_amount: 28900, // R$ 289,00\n      currency: 'brl',\n      recurring: {\n        interval: 'year',\n      },\n      metadata: {\n        plan: 'premium_plus',\n      },\n    });\n    console.log(`✅ Premium Plus price created: ${premiumPlusPrice.id}\\n`);\n\n    // Output summary\n    console.log('========================================');\n    console.log('✨ All products created successfully!');\n    console.log('========================================\\n');\n\n    console.log('📝 Update your environment variables:\\n');\n    console.log(`VITE_STRIPE_MONTHLY_PRICE_ID=${monthlyPrice.id}`);\n    console.log(`VITE_STRIPE_YEARLY_PRICE_ID=${yearlyPrice.id}`);\n    console.log(`VITE_STRIPE_PREMIUM_PLUS_PRICE_ID=${premiumPlusPrice.id}\\n`);\n\n    console.log('🎯 Price IDs summary:');\n    console.log(`  Mensal:        ${monthlyPrice.id}`);\n    console.log(`  Anual:         ${yearlyPrice.id}`);\n    console.log(`  Premium Plus:  ${premiumPlusPrice.id}\\n`);\n\n    console.log('✅ Prices are being synced to database via webhooks');\n    console.log('✅ You can now use these price IDs in your checkout flow\\n');\n  } catch (error: any) {\n    console.error('❌ Error creating products:', error.message);\n    process.exit(1);\n  }\n}\n\nseedProducts();\n","path":null,"size_bytes":4239,"size_tokens":null},"client/public/sw.js":{"content":"const IS_DEV = self.location.hostname === 'localhost' || \n               self.location.hostname.includes('replit') ||\n               self.location.hostname.includes('.dev') ||\n               self.location.port === '5000';\n\nif (IS_DEV) {\n  self.addEventListener('install', () => {\n    self.skipWaiting();\n  });\n  \n  self.addEventListener('activate', (event) => {\n    event.waitUntil(\n      caches.keys().then((names) => {\n        return Promise.all(names.map((name) => caches.delete(name)));\n      }).then(() => {\n        return self.registration.unregister();\n      }).then(() => {\n        return self.clients.matchAll();\n      }).then((clients) => {\n        clients.forEach((client) => client.navigate(client.url));\n      })\n    );\n  });\n  \n  return;\n}\n\nconst CACHE_NAME = 'bibliasf-v1.1.0';\nconst STATIC_CACHE = 'bibliasf-static-v1.1.0';\nconst DYNAMIC_CACHE = 'bibliasf-dynamic-v1.1.0';\n\nconst STATIC_ASSETS = [\n  '/',\n  '/index.html',\n  '/manifest.json',\n  '/bible.db',\n  '/favicon.ico',\n  '/favicon.png',\n  '/android-chrome-192x192.png',\n  '/android-chrome-512x512.png',\n  '/apple-touch-icon.png'\n];\n\nconst API_CACHE_PATTERNS = [\n  /\\/api\\/bible\\//,\n  /\\/api\\/daily-verse/,\n  /\\/api\\/reading-plans/\n];\n\nself.addEventListener('install', (event) => {\n  console.log('[ServiceWorker] Install');\n  event.waitUntil(\n    caches.open(STATIC_CACHE)\n      .then((cache) => {\n        console.log('[ServiceWorker] Caching static assets');\n        return cache.addAll(STATIC_ASSETS);\n      })\n      .then(() => self.skipWaiting())\n  );\n});\n\nself.addEventListener('activate', (event) => {\n  console.log('[ServiceWorker] Activate');\n  event.waitUntil(\n    caches.keys()\n      .then((keys) => {\n        return Promise.all(\n          keys\n            .filter((key) => key !== STATIC_CACHE && key !== DYNAMIC_CACHE && key !== CACHE_NAME)\n            .map((key) => {\n              console.log('[ServiceWorker] Removing old cache:', key);\n              return caches.delete(key);\n            })\n        );\n      })\n      .then(() => clients.claim())\n  );\n});\n\nself.addEventListener('fetch', (event) => {\n  const { request } = event;\n  const url = new URL(request.url);\n\n  if (request.method !== 'GET') {\n    return;\n  }\n\n  if (url.origin !== location.origin) {\n    return;\n  }\n\n  const isApiRequest = url.pathname.startsWith('/api/');\n  const shouldCacheApi = API_CACHE_PATTERNS.some(pattern => pattern.test(url.pathname));\n\n  if (isApiRequest) {\n    if (shouldCacheApi) {\n      event.respondWith(networkFirstWithCache(request, DYNAMIC_CACHE));\n    } else {\n      event.respondWith(networkOnly(request));\n    }\n  } else {\n    event.respondWith(cacheFirstWithNetwork(request));\n  }\n});\n\nasync function cacheFirstWithNetwork(request) {\n  const cachedResponse = await caches.match(request);\n  if (cachedResponse) {\n    return cachedResponse;\n  }\n\n  try {\n    const networkResponse = await fetch(request);\n    if (networkResponse.ok) {\n      const cache = await caches.open(STATIC_CACHE);\n      cache.put(request, networkResponse.clone());\n    }\n    return networkResponse;\n  } catch (error) {\n    console.log('[ServiceWorker] Fetch failed, returning offline page:', error);\n    const offlineResponse = await caches.match('/');\n    if (offlineResponse) {\n      return offlineResponse;\n    }\n    return new Response('Offline', { status: 503, statusText: 'Service Unavailable' });\n  }\n}\n\nasync function networkFirstWithCache(request, cacheName) {\n  try {\n    const networkResponse = await fetch(request);\n    if (networkResponse.ok) {\n      const cache = await caches.open(cacheName);\n      cache.put(request, networkResponse.clone());\n    }\n    return networkResponse;\n  } catch (error) {\n    console.log('[ServiceWorker] Network failed, trying cache:', error);\n    const cachedResponse = await caches.match(request);\n    if (cachedResponse) {\n      return cachedResponse;\n    }\n    return new Response(JSON.stringify({ error: 'Offline' }), {\n      status: 503,\n      headers: { 'Content-Type': 'application/json' }\n    });\n  }\n}\n\nasync function networkOnly(request) {\n  try {\n    return await fetch(request);\n  } catch (error) {\n    return new Response(JSON.stringify({ error: 'Offline' }), {\n      status: 503,\n      headers: { 'Content-Type': 'application/json' }\n    });\n  }\n}\n\nself.addEventListener('push', (event) => {\n  console.log('[ServiceWorker] Push received');\n  \n  let data = {\n    title: 'BíbliaFS',\n    body: 'Você tem uma nova notificação',\n    icon: '/android-chrome-192x192.png',\n    badge: '/favicon.png',\n    tag: 'bibliasf-notification',\n    data: {}\n  };\n  \n  if (event.data) {\n    try {\n      data = { ...data, ...event.data.json() };\n    } catch (e) {\n      data.body = event.data.text();\n    }\n  }\n  \n  const options = {\n    body: data.body,\n    icon: data.icon || '/android-chrome-192x192.png',\n    badge: data.badge || '/favicon.png',\n    tag: data.tag || 'bibliasf-notification',\n    vibrate: [100, 50, 100],\n    data: data.data || {},\n    actions: data.actions || [\n      { action: 'open', title: 'Abrir' },\n      { action: 'dismiss', title: 'Fechar' }\n    ],\n    requireInteraction: data.requireInteraction || false\n  };\n  \n  event.waitUntil(\n    self.registration.showNotification(data.title, options)\n  );\n});\n\nself.addEventListener('notificationclick', (event) => {\n  console.log('[ServiceWorker] Notification click:', event.action);\n  \n  event.notification.close();\n  \n  if (event.action === 'dismiss') {\n    return;\n  }\n  \n  const urlToOpen = event.notification.data?.url || '/';\n  \n  event.waitUntil(\n    clients.matchAll({ type: 'window', includeUncontrolled: true })\n      .then((clientList) => {\n        for (const client of clientList) {\n          if (client.url.includes(self.location.origin) && 'focus' in client) {\n            client.navigate(urlToOpen);\n            return client.focus();\n          }\n        }\n        if (clients.openWindow) {\n          return clients.openWindow(urlToOpen);\n        }\n      })\n  );\n  \n  if (event.notification.data?.notificationId) {\n    fetch('/api/notifications/clicked', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ notificationId: event.notification.data.notificationId })\n    }).catch(console.error);\n  }\n});\n\nself.addEventListener('notificationclose', (event) => {\n  console.log('[ServiceWorker] Notification closed');\n});\n\nself.addEventListener('message', (event) => {\n  if (event.data && event.data.type === 'SKIP_WAITING') {\n    self.skipWaiting();\n  }\n});\n","path":null,"size_bytes":6491,"size_tokens":null},"server/notification-scheduler.ts":{"content":"import { db } from './db';\nimport { notificationPreferences, users } from '@shared/schema';\nimport { eq, and, sql } from 'drizzle-orm';\nimport { sendPushNotification, getRandomInsight } from './push-notifications';\n\nconst CHECK_INTERVAL_MS = 60000;\nconst lastSentCache = new Map<string, string>();\n\nfunction getCurrentTimeInTimezone(timezone: string): { hour: number; minute: number; dayOfWeek: number } {\n  try {\n    const now = new Date();\n    const formatter = new Intl.DateTimeFormat('en-US', {\n      timeZone: timezone,\n      hour: 'numeric',\n      minute: 'numeric',\n      hour12: false,\n      weekday: 'short',\n    });\n    \n    const parts = formatter.formatToParts(now);\n    const hour = parseInt(parts.find(p => p.type === 'hour')?.value || '0');\n    const minute = parseInt(parts.find(p => p.type === 'minute')?.value || '0');\n    const weekday = parts.find(p => p.type === 'weekday')?.value || '';\n    \n    const dayMap: Record<string, number> = {\n      'Sun': 0, 'Mon': 1, 'Tue': 2, 'Wed': 3, 'Thu': 4, 'Fri': 5, 'Sat': 6\n    };\n    \n    return { hour, minute, dayOfWeek: dayMap[weekday] || 0 };\n  } catch {\n    const now = new Date();\n    return { hour: now.getHours(), minute: now.getMinutes(), dayOfWeek: now.getDay() };\n  }\n}\n\nfunction shouldSendNotification(\n  prefTime: string,\n  currentHour: number,\n  currentMinute: number,\n  isWeekendOnly: boolean,\n  dayOfWeek: number,\n  userId: string,\n  notificationType: string\n): boolean {\n  const [prefHour, prefMinute] = prefTime.split(':').map(Number);\n  \n  if (isWeekendOnly && dayOfWeek !== 0 && dayOfWeek !== 6) {\n    return false;\n  }\n  \n  if (prefHour !== currentHour || Math.abs(prefMinute - currentMinute) > 1) {\n    return false;\n  }\n  \n  const cacheKey = `${userId}-${notificationType}-${new Date().toDateString()}`;\n  if (lastSentCache.get(cacheKey)) {\n    return false;\n  }\n  \n  return true;\n}\n\nfunction markAsSent(userId: string, notificationType: string): void {\n  const cacheKey = `${userId}-${notificationType}-${new Date().toDateString()}`;\n  lastSentCache.set(cacheKey, new Date().toISOString());\n  \n  const today = new Date().toDateString();\n  const keysToDelete: string[] = [];\n  lastSentCache.forEach((_, key) => {\n    if (!key.includes(today)) {\n      keysToDelete.push(key);\n    }\n  });\n  keysToDelete.forEach(key => lastSentCache.delete(key));\n}\n\nasync function checkAndSendNotifications(): Promise<void> {\n  try {\n    const allPrefs = await db.select().from(notificationPreferences);\n    \n    for (const prefs of allPrefs) {\n      const timezone = prefs.timezone || 'America/Sao_Paulo';\n      const { hour, minute, dayOfWeek } = getCurrentTimeInTimezone(timezone);\n      \n      if (prefs.readingReminders && prefs.readingReminderTime) {\n        if (shouldSendNotification(\n          prefs.readingReminderTime,\n          hour,\n          minute,\n          prefs.weekendOnly || false,\n          dayOfWeek,\n          prefs.userId,\n          'reading'\n        )) {\n          const insight = getRandomInsight('reading');\n          await sendPushNotification(prefs.userId, {\n            title: 'Hora da Leitura Bíblica',\n            body: insight,\n            icon: '/icons/bible-icon.png',\n            tag: 'reading-reminder',\n            data: { type: 'reading', url: '/bible' },\n            actions: [\n              { action: 'open', title: 'Ler Agora' },\n              { action: 'dismiss', title: 'Depois' }\n            ],\n          });\n          markAsSent(prefs.userId, 'reading');\n          console.log(`[Scheduler] Sent reading reminder to user ${prefs.userId}`);\n        }\n      }\n      \n      if (prefs.prayerReminders && prefs.prayerReminderTime) {\n        if (shouldSendNotification(\n          prefs.prayerReminderTime,\n          hour,\n          minute,\n          prefs.weekendOnly || false,\n          dayOfWeek,\n          prefs.userId,\n          'prayer'\n        )) {\n          const insight = getRandomInsight('prayer');\n          await sendPushNotification(prefs.userId, {\n            title: 'Momento de Oração',\n            body: insight,\n            icon: '/icons/prayer-icon.png',\n            tag: 'prayer-reminder',\n            data: { type: 'prayer', url: '/prayers' },\n            actions: [\n              { action: 'open', title: 'Orar Agora' },\n              { action: 'dismiss', title: 'Depois' }\n            ],\n          });\n          markAsSent(prefs.userId, 'prayer');\n          console.log(`[Scheduler] Sent prayer reminder to user ${prefs.userId}`);\n        }\n      }\n      \n      if (prefs.dailyVerseNotification && prefs.dailyVerseTime) {\n        if (shouldSendNotification(\n          prefs.dailyVerseTime,\n          hour,\n          minute,\n          prefs.weekendOnly || false,\n          dayOfWeek,\n          prefs.userId,\n          'daily-verse'\n        )) {\n          await sendPushNotification(prefs.userId, {\n            title: 'Versículo do Dia',\n            body: 'Um novo versículo inspirador está esperando por você!',\n            icon: '/icons/verse-icon.png',\n            tag: 'daily-verse',\n            data: { type: 'daily-verse', url: '/' },\n            actions: [\n              { action: 'open', title: 'Ver Versículo' }\n            ],\n          });\n          markAsSent(prefs.userId, 'daily-verse');\n          console.log(`[Scheduler] Sent daily verse to user ${prefs.userId}`);\n        }\n      }\n    }\n  } catch (error) {\n    console.error('[Scheduler] Error checking notifications:', error);\n  }\n}\n\nlet schedulerInterval: NodeJS.Timeout | null = null;\n\nexport function startNotificationScheduler(): void {\n  if (schedulerInterval) {\n    console.log('[Scheduler] Already running');\n    return;\n  }\n  \n  console.log('[Scheduler] Starting notification scheduler...');\n  \n  checkAndSendNotifications();\n  \n  schedulerInterval = setInterval(checkAndSendNotifications, CHECK_INTERVAL_MS);\n  \n  console.log('[Scheduler] Notification scheduler started - checking every minute');\n}\n\nexport function stopNotificationScheduler(): void {\n  if (schedulerInterval) {\n    clearInterval(schedulerInterval);\n    schedulerInterval = null;\n    console.log('[Scheduler] Notification scheduler stopped');\n  }\n}\n","path":null,"size_bytes":6126,"size_tokens":null},"client/src/hooks/usePushNotifications.ts":{"content":"import { useState, useEffect, useCallback } from 'react';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiFetch } from '@/lib/config';\n\ninterface PushNotificationState {\n  isSupported: boolean;\n  isSubscribed: boolean;\n  isLoading: boolean;\n  permission: NotificationPermission | 'default';\n}\n\nexport function usePushNotifications() {\n  const { toast } = useToast();\n  const [state, setState] = useState<PushNotificationState>({\n    isSupported: false,\n    isSubscribed: false,\n    isLoading: true,\n    permission: 'default',\n  });\n\n  useEffect(() => {\n    const checkSupport = async () => {\n      const isSupported = 'serviceWorker' in navigator && 'PushManager' in window;\n      \n      if (!isSupported) {\n        setState(prev => ({ ...prev, isSupported: false, isLoading: false }));\n        return;\n      }\n\n      const permission = Notification.permission;\n      let isSubscribed = false;\n\n      try {\n        const registration = await navigator.serviceWorker.getRegistration();\n        if (registration) {\n          const subscription = await registration.pushManager.getSubscription();\n          isSubscribed = !!subscription;\n        }\n      } catch (error) {\n        console.error('[Push] Error checking subscription:', error);\n      }\n\n      setState({\n        isSupported: true,\n        isSubscribed,\n        isLoading: false,\n        permission,\n      });\n    };\n\n    checkSupport();\n  }, []);\n\n  const registerServiceWorker = useCallback(async (): Promise<ServiceWorkerRegistration | null> => {\n    try {\n      const registration = await navigator.serviceWorker.register('/sw.js');\n      console.log('[Push] Service Worker registered');\n      return registration;\n    } catch (error) {\n      console.error('[Push] Service Worker registration failed:', error);\n      return null;\n    }\n  }, []);\n\n  const subscribe = useCallback(async (): Promise<boolean> => {\n    setState(prev => ({ ...prev, isLoading: true }));\n\n    try {\n      const permission = await Notification.requestPermission();\n      \n      if (permission !== 'granted') {\n        toast({\n          title: 'Permissão negada',\n          description: 'Você precisa permitir notificações para receber lembretes.',\n          variant: 'destructive',\n        });\n        setState(prev => ({ ...prev, isLoading: false, permission }));\n        return false;\n      }\n\n      const vapidResponse = await apiFetch('/api/notifications/vapid-key');\n      if (!vapidResponse.ok) {\n        throw new Error('Push notifications not configured on server');\n      }\n      const { publicKey } = await vapidResponse.json();\n\n      let registration = await navigator.serviceWorker.getRegistration();\n      if (!registration) {\n        const newRegistration = await registerServiceWorker();\n        if (!newRegistration) {\n          throw new Error('Could not register service worker');\n        }\n        registration = newRegistration;\n      }\n\n      const subscription = await registration.pushManager.subscribe({\n        userVisibleOnly: true,\n        applicationServerKey: urlBase64ToUint8Array(publicKey),\n      });\n\n      await apiFetch('/api/notifications/subscribe', {\n        method: 'POST',\n        body: JSON.stringify({ subscription }),\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n      });\n\n      toast({\n        title: 'Notificações ativadas',\n        description: 'Você receberá lembretes de leitura e oração.',\n      });\n\n      setState(prev => ({\n        ...prev,\n        isSubscribed: true,\n        isLoading: false,\n        permission: 'granted',\n      }));\n\n      return true;\n    } catch (error: any) {\n      console.error('[Push] Subscribe error:', error);\n      toast({\n        title: 'Erro ao ativar notificações',\n        description: error.message || 'Tente novamente mais tarde.',\n        variant: 'destructive',\n      });\n      setState(prev => ({ ...prev, isLoading: false }));\n      return false;\n    }\n  }, [toast, registerServiceWorker]);\n\n  const unsubscribe = useCallback(async (): Promise<boolean> => {\n    setState(prev => ({ ...prev, isLoading: true }));\n\n    try {\n      const registration = await navigator.serviceWorker.getRegistration();\n      if (registration) {\n        const subscription = await registration.pushManager.getSubscription();\n        if (subscription) {\n          await apiFetch('/api/notifications/unsubscribe', {\n            method: 'POST',\n            body: JSON.stringify({ endpoint: subscription.endpoint }),\n            headers: { 'Content-Type': 'application/json' },\n            credentials: 'include',\n          });\n          await subscription.unsubscribe();\n        }\n      }\n\n      toast({\n        title: 'Notificações desativadas',\n        description: 'Você não receberá mais lembretes.',\n      });\n\n      setState(prev => ({\n        ...prev,\n        isSubscribed: false,\n        isLoading: false,\n      }));\n\n      return true;\n    } catch (error: any) {\n      console.error('[Push] Unsubscribe error:', error);\n      toast({\n        title: 'Erro ao desativar notificações',\n        description: error.message || 'Tente novamente.',\n        variant: 'destructive',\n      });\n      setState(prev => ({ ...prev, isLoading: false }));\n      return false;\n    }\n  }, [toast]);\n\n  const sendTestNotification = useCallback(async (): Promise<boolean> => {\n    try {\n      const response = await apiFetch('/api/notifications/test', {\n        method: 'POST',\n        credentials: 'include',\n      });\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        toast({\n          title: 'Notificação enviada',\n          description: 'Você deve receber uma notificação de teste em instantes.',\n        });\n        return true;\n      }\n      return false;\n    } catch (error: any) {\n      toast({\n        title: 'Erro',\n        description: 'Não foi possível enviar a notificação de teste.',\n        variant: 'destructive',\n      });\n      return false;\n    }\n  }, [toast]);\n\n  return {\n    ...state,\n    subscribe,\n    unsubscribe,\n    sendTestNotification,\n  };\n}\n\nfunction urlBase64ToUint8Array(base64String: string): Uint8Array {\n  const padding = '='.repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding)\n    .replace(/-/g, '+')\n    .replace(/_/g, '/');\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n","path":null,"size_bytes":6530,"size_tokens":null},"server/push-notifications.ts":{"content":"import webpush from 'web-push';\nimport { db } from './db';\nimport { pushSubscriptions, notificationPreferences, notificationHistory, users } from '@shared/schema';\nimport { eq, and, sql } from 'drizzle-orm';\n\nconst VAPID_PUBLIC_KEY = process.env.VAPID_PUBLIC_KEY || '';\nconst VAPID_PRIVATE_KEY = process.env.VAPID_PRIVATE_KEY || '';\nconst VAPID_SUBJECT = process.env.VAPID_SUBJECT || 'mailto:contato@bibliasf.com';\n\nif (VAPID_PUBLIC_KEY && VAPID_PRIVATE_KEY) {\n  webpush.setVapidDetails(VAPID_SUBJECT, VAPID_PUBLIC_KEY, VAPID_PRIVATE_KEY);\n  console.log('[Push] VAPID keys configured successfully');\n} else {\n  console.log('[Push] VAPID keys not configured - push notifications disabled');\n}\n\nexport function getVapidPublicKey(): string {\n  return VAPID_PUBLIC_KEY;\n}\n\nexport async function initPushTables(): Promise<void> {\n  try {\n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS push_subscriptions (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        user_id VARCHAR NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n        endpoint TEXT NOT NULL,\n        p256dh TEXT NOT NULL,\n        auth TEXT NOT NULL,\n        user_agent TEXT,\n        is_active BOOLEAN DEFAULT true,\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n    \n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS notification_preferences (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        user_id VARCHAR NOT NULL REFERENCES users(id) ON DELETE CASCADE UNIQUE,\n        reading_reminders BOOLEAN DEFAULT true,\n        reading_reminder_time VARCHAR(5) DEFAULT '08:00',\n        prayer_reminders BOOLEAN DEFAULT true,\n        prayer_reminder_time VARCHAR(5) DEFAULT '07:00',\n        daily_verse_notification BOOLEAN DEFAULT true,\n        daily_verse_time VARCHAR(5) DEFAULT '06:00',\n        community_activity BOOLEAN DEFAULT false,\n        teacher_mode_updates BOOLEAN DEFAULT true,\n        weekend_only BOOLEAN DEFAULT false,\n        timezone VARCHAR(50) DEFAULT 'America/Sao_Paulo',\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      )\n    `);\n    \n    await db.execute(sql`\n      CREATE TABLE IF NOT EXISTS notification_history (\n        id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n        user_id VARCHAR NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n        type VARCHAR(50) NOT NULL,\n        title VARCHAR(255) NOT NULL,\n        body TEXT NOT NULL,\n        data JSONB,\n        sent_at TIMESTAMP DEFAULT NOW(),\n        clicked BOOLEAN DEFAULT false,\n        clicked_at TIMESTAMP\n      )\n    `);\n    \n    console.log('[Push] Notification tables initialized');\n  } catch (error) {\n    console.error('[Push] Error initializing tables:', error);\n  }\n}\n\nexport async function savePushSubscription(\n  userId: string,\n  subscription: { endpoint: string; keys: { p256dh: string; auth: string } },\n  userAgent?: string\n): Promise<void> {\n  await db.delete(pushSubscriptions).where(\n    and(\n      eq(pushSubscriptions.userId, userId),\n      eq(pushSubscriptions.endpoint, subscription.endpoint)\n    )\n  );\n  \n  await db.insert(pushSubscriptions).values({\n    userId,\n    endpoint: subscription.endpoint,\n    p256dh: subscription.keys.p256dh,\n    auth: subscription.keys.auth,\n    userAgent,\n    isActive: true,\n  });\n}\n\nexport async function removePushSubscription(userId: string, endpoint: string): Promise<void> {\n  await db.delete(pushSubscriptions).where(\n    and(\n      eq(pushSubscriptions.userId, userId),\n      eq(pushSubscriptions.endpoint, endpoint)\n    )\n  );\n}\n\nexport async function getNotificationPreferences(userId: string) {\n  const [prefs] = await db.select().from(notificationPreferences).where(eq(notificationPreferences.userId, userId));\n  \n  if (!prefs) {\n    const [newPrefs] = await db.insert(notificationPreferences)\n      .values({ userId })\n      .returning();\n    return newPrefs;\n  }\n  \n  return prefs;\n}\n\nexport async function updateNotificationPreferences(\n  userId: string,\n  preferences: Partial<{\n    readingReminders: boolean;\n    readingReminderTime: string;\n    prayerReminders: boolean;\n    prayerReminderTime: string;\n    dailyVerseNotification: boolean;\n    dailyVerseTime: string;\n    communityActivity: boolean;\n    teacherModeUpdates: boolean;\n    weekendOnly: boolean;\n    timezone: string;\n  }>\n) {\n  const existing = await getNotificationPreferences(userId);\n  \n  const [updated] = await db.update(notificationPreferences)\n    .set({\n      ...preferences,\n      updatedAt: new Date(),\n    })\n    .where(eq(notificationPreferences.userId, userId))\n    .returning();\n  \n  return updated;\n}\n\nexport async function sendPushNotification(\n  userId: string,\n  notification: {\n    title: string;\n    body: string;\n    icon?: string;\n    badge?: string;\n    tag?: string;\n    data?: any;\n    actions?: Array<{ action: string; title: string }>;\n    requireInteraction?: boolean;\n  }\n): Promise<{ success: boolean; sent: number; failed: number }> {\n  if (!VAPID_PUBLIC_KEY || !VAPID_PRIVATE_KEY) {\n    console.log('[Push] VAPID keys not configured, skipping notification');\n    return { success: false, sent: 0, failed: 0 };\n  }\n  \n  const subscriptions = await db.select()\n    .from(pushSubscriptions)\n    .where(and(\n      eq(pushSubscriptions.userId, userId),\n      eq(pushSubscriptions.isActive, true)\n    ));\n  \n  if (subscriptions.length === 0) {\n    console.log('[Push] No active subscriptions for user:', userId);\n    return { success: false, sent: 0, failed: 0 };\n  }\n  \n  const payload = JSON.stringify(notification);\n  let sent = 0;\n  let failed = 0;\n  \n  for (const sub of subscriptions) {\n    try {\n      await webpush.sendNotification(\n        {\n          endpoint: sub.endpoint,\n          keys: {\n            p256dh: sub.p256dh,\n            auth: sub.auth,\n          },\n        },\n        payload\n      );\n      sent++;\n    } catch (error: any) {\n      console.error('[Push] Error sending notification:', error.statusCode || error.message);\n      \n      if (error.statusCode === 410 || error.statusCode === 404) {\n        await db.update(pushSubscriptions)\n          .set({ isActive: false })\n          .where(eq(pushSubscriptions.id, sub.id));\n      }\n      failed++;\n    }\n  }\n  \n  await db.insert(notificationHistory).values({\n    userId,\n    type: notification.tag || 'general',\n    title: notification.title,\n    body: notification.body,\n    data: notification.data,\n  });\n  \n  return { success: sent > 0, sent, failed };\n}\n\nexport async function sendBulkNotifications(\n  userIds: string[],\n  notification: {\n    title: string;\n    body: string;\n    icon?: string;\n    tag?: string;\n    data?: any;\n  }\n): Promise<{ total: number; sent: number; failed: number }> {\n  let totalSent = 0;\n  let totalFailed = 0;\n  \n  for (const userId of userIds) {\n    const result = await sendPushNotification(userId, notification);\n    totalSent += result.sent;\n    totalFailed += result.failed;\n  }\n  \n  return { total: userIds.length, sent: totalSent, failed: totalFailed };\n}\n\nexport async function markNotificationClicked(notificationId: string): Promise<void> {\n  await db.update(notificationHistory)\n    .set({ clicked: true, clickedAt: new Date() })\n    .where(eq(notificationHistory.id, notificationId));\n}\n\nconst READING_INSIGHTS = [\n  \"Dedique 15 minutos hoje para meditar na Palavra de Deus.\",\n  \"A leitura bíblica transforma corações. Que tal começar agora?\",\n  \"Cada versículo lido é uma semente plantada em seu coração.\",\n  \"Não deixe passar o dia sem alimentar sua alma com a Palavra.\",\n  \"A Bíblia tem uma mensagem especial para você hoje. Descubra!\",\n  \"Sua jornada de fé cresce a cada página lida.\",\n  \"Reserve um momento de paz para a leitura bíblica.\",\n  \"A Palavra de Deus é lâmpada para os seus pés.\",\n];\n\nconst PRAYER_INSIGHTS = [\n  \"Comece o dia conversando com Deus em oração.\",\n  \"A oração é o momento de intimidade com o Pai.\",\n  \"Deus está esperando para ouvir seu coração.\",\n  \"Reserve um tempo para agradecer pelas bênçãos recebidas.\",\n  \"A oração sincera move montanhas.\",\n];\n\nexport function getRandomInsight(type: 'reading' | 'prayer'): string {\n  const insights = type === 'reading' ? READING_INSIGHTS : PRAYER_INSIGHTS;\n  return insights[Math.floor(Math.random() * insights.length)];\n}\n","path":null,"size_bytes":8302,"size_tokens":null},"server/get-prices.ts":{"content":"/**\n * Get Price IDs from Products\n * Run this to get all price IDs from your created products\n */\n\nimport Stripe from 'stripe';\n\nconst productIds = {\n  mensal: 'prod_TbawhaXAcd6Fxy',\n  anual: 'prod_TbaxiGxB514Hbl',\n  premiumPlus: 'prod_TbayGlqeiPPdgo',\n  donation10: 'prod_Tbb2DFxgX8OTW0',\n  donation25: 'prod_Tbb2QjKgwak0Mx',\n  donation50: 'prod_Tbb36dLzJ3j68W',\n  donation100: 'prod_Tbb5iKjtyRp8uV',\n};\n\nasync function getPrices() {\n  const secretKey = process.env.STRIPE_SECRET_KEY;\n  \n  if (!secretKey) {\n    console.error('❌ STRIPE_SECRET_KEY não configurada');\n    process.exit(1);\n  }\n  \n  const stripe = new Stripe(secretKey, {\n    apiVersion: '2025-08-27.basil',\n  });\n\n  console.log('📦 Buscando Price IDs dos produtos...\\n');\n\n  try {\n    const results: Record<string, string> = {};\n\n    // Get prices for each product\n    for (const [name, productId] of Object.entries(productIds)) {\n      const prices = await stripe.prices.list({\n        product: productId,\n        active: true,\n      });\n\n      if (prices.data.length > 0) {\n        const priceId = prices.data[0].id;\n        results[name] = priceId;\n        console.log(`✅ ${name}: ${priceId}`);\n      } else {\n        console.log(`❌ ${name}: Nenhum preço ativo encontrado`);\n      }\n    }\n\n    console.log('\\n========================================');\n    console.log('📝 Copie e cole no seu ambiente:\\n');\n    \n    console.log('# PLANOS');\n    console.log(`VITE_STRIPE_MONTHLY_PRICE_ID=${results.mensal}`);\n    console.log(`VITE_STRIPE_YEARLY_PRICE_ID=${results.anual}`);\n    console.log(`VITE_STRIPE_PREMIUM_PLUS_PRICE_ID=${results.premiumPlus}`);\n    \n    console.log('\\n# DOAÇÕES');\n    console.log(`VITE_STRIPE_DONATION_10_PRICE_ID=${results.donation10}`);\n    console.log(`VITE_STRIPE_DONATION_25_PRICE_ID=${results.donation25}`);\n    console.log(`VITE_STRIPE_DONATION_50_PRICE_ID=${results.donation50}`);\n    console.log(`VITE_STRIPE_DONATION_100_PRICE_ID=${results.donation100}`);\n    \n    console.log('\\n========================================\\n');\n  } catch (error: any) {\n    console.error('❌ Erro:', error.message);\n    process.exit(1);\n  }\n}\n\ngetPrices();\n","path":null,"size_bytes":2156,"size_tokens":null},"docs/SECURITY_CHECKLIST.md":{"content":"# 🔒 BíbliaFS - Checklist de Segurança e Ferramentas\n\n## ✅ Status da Auditoria de Segurança\n\n### 1. Isolamento de Dados por Usuário\n| Item | Status | Descrição |\n|------|--------|-----------|\n| Queries filtradas por userId | ✅ | Todas as queries em `server/storage.ts` filtram por userId |\n| Validação de ownership em updates | ✅ | Updates verificam propriedade antes de modificar |\n| Stripping de userId em payloads | ✅ | Prevents ownership escalation attacks |\n| Posts da comunidade isolados | ✅ | Likes e comments associados ao userId correto |\n\n### 2. Proteção contra Vulnerabilidades (OWASP Top 10)\n| Vulnerabilidade | Status | Implementação |\n|-----------------|--------|---------------|\n| SQL Injection | ✅ | Drizzle ORM com queries parametrizadas |\n| XSS (Cross-Site Scripting) | ✅ | Helmet CSP headers configurados |\n| CSRF | ⚠️ | SameSite cookies + Supabase JWT tokens (parcial) |\n| Broken Authentication | ✅ | Supabase Auth + bcrypt + session management |\n| Sensitive Data Exposure | ✅ | passwordHash removido de respostas |\n| Security Misconfiguration | ✅ | Helmet headers + rate limiting |\n| Broken Access Control | ✅ | isAuthenticated middleware + userId validation |\n| Rate Limiting | ✅ | express-rate-limit (100 req/15min, 10 auth/15min) |\n\n### 3. Headers de Segurança (Helmet)\n| Header | Status | Configuração |\n|--------|--------|--------------|\n| Content-Security-Policy | ✅ | Configurado para Stripe, Supabase, OpenAI |\n| X-Frame-Options | ✅ | DENY (padrão Helmet) |\n| X-Content-Type-Options | ✅ | nosniff |\n| X-XSS-Protection | ✅ | Habilitado |\n| Strict-Transport-Security | ✅ | Habilitado em produção |\n\n### 4. Integração Stripe\n| Item | Status | Descrição |\n|------|--------|-----------|\n| Webhook signature verification | ✅ | `stripe.webhooks.constructEvent` |\n| STRIPE_WEBHOOK_SECRET | ✅ | Configurado e verificado |\n| rawBody preservado | ✅ | Para verificação de webhook |\n| Checkout session com metadata | ✅ | userId e planType incluídos |\n| Customer ID management | ✅ | Criado antes do checkout |\n\n### 5. Autenticação e Sessões\n| Item | Status | Descrição |\n|------|--------|-----------|\n| Password hashing | ✅ | bcrypt com salt 10 |\n| Token management | ✅ | Supabase JWT |\n| Session persistence | ✅ | supabase.auth.getSession() |\n| Email enumeration prevention | ✅ | Forgot password sempre retorna sucesso |\n| Debug endpoints protegidos | ✅ | Bloqueados em produção |\n\n---\n\n## 🛠️ Ferramentas Recomendadas para Testes\n\n### Links e Acessibilidade\n| Ferramenta | URL | Uso |\n|------------|-----|-----|\n| W3C Link Checker | https://validator.w3.org/checklink | Verificar links quebrados |\n| WAVE | https://wave.webaim.org | Acessibilidade |\n| axe DevTools | Chrome Extension | Acessibilidade inline |\n\n### Responsividade\n| Ferramenta | URL | Uso |\n|------------|-----|-----|\n| Chrome DevTools | Built-in (F12) | Device Mode para testar resoluções |\n| BrowserStack | https://browserstack.com | Testes em dispositivos reais |\n| Responsive Design Checker | https://responsivedesignchecker.com | Preview rápido |\n\n### Segurança\n| Ferramenta | URL | Uso |\n|------------|-----|-----|\n| OWASP ZAP | https://www.zaproxy.org | Scan de vulnerabilidades |\n| Lighthouse | Chrome DevTools | Audit de segurança e performance |\n| Sucuri SiteCheck | https://sitecheck.sucuri.net | Scan de malware |\n| SecurityHeaders.com | https://securityheaders.com | Verificar headers de segurança |\n| SSL Labs | https://ssllabs.com/ssltest | Verificar certificado TLS |\n\n### Performance\n| Ferramenta | URL | Uso |\n|------------|-----|-----|\n| Lighthouse | Chrome DevTools | Performance audit |\n| WebPageTest | https://webpagetest.org | Testes de velocidade |\n| GTmetrix | https://gtmetrix.com | Análise de performance |\n\n---\n\n## 📋 Testes Manuais Recomendados\n\n### Antes do Deploy\n- [ ] Testar login/logout em navegador limpo\n- [ ] Verificar que dados de um usuário não aparecem para outro\n- [ ] Testar fluxo de pagamento Stripe em modo teste\n- [ ] Verificar responsividade em mobile (iOS Safari, Chrome Android)\n- [ ] Testar modo offline\n- [ ] Verificar que endpoints de debug retornam 404 em produção\n\n### Após o Deploy\n- [ ] Verificar HTTPS ativo e certificado válido\n- [ ] Testar SecurityHeaders.com para headers de segurança\n- [ ] Verificar que webhook Stripe está funcionando\n- [ ] Testar login com email real\n- [ ] Verificar sincronização com Supabase\n\n---\n\n## 🔐 Políticas RLS do Supabase\n\nO arquivo `docs/SUPABASE_RLS_POLICIES.sql` contém políticas de Row Level Security para:\n\n- **Tabelas de usuário**: users, notes, highlights, bookmarks, prayers\n- **Planos e progresso**: reading_plans, user_achievements, lesson_progress\n- **Conteúdo**: offline_content, verse_commentaries, podcast_subscriptions\n- **Comunidade**: community_posts, comments, post_likes\n- **Financeiro**: donations (com acesso admin)\n\n### Como Aplicar\n1. Acesse o SQL Editor no Supabase Dashboard\n2. Cole o conteúdo de `docs/SUPABASE_RLS_POLICIES.sql`\n3. Execute o script\n4. Verifique que RLS está habilitado nas tabelas\n\n---\n\n## 📱 Checklist de Responsividade\n\n### Breakpoints Testados\n| Breakpoint | Largura | Elementos Testados |\n|------------|---------|-------------------|\n| Mobile | < 768px | BottomNav visível, Sidebar oculta, Menu hamburger |\n| Tablet | 768-1024px | Sidebar colapsível, Layout adaptativo |\n| Desktop | > 1024px | Sidebar completa, Layout de 2 colunas |\n\n### Componentes Responsivos\n- ✅ AppSidebar - Desktop/Mobile variants\n- ✅ BottomNav - Mobile only (md:hidden)\n- ✅ Landing page - Grid responsivo, hero adaptativo\n- ✅ Cards e formulários - w-full, max-w constraints\n- ✅ Dialogs - Centralizados, max-w-lg\n- ✅ Sheets - Slide from side (mobile navigation)\n\n---\n\n## 🚨 Resposta a Incidentes\n\n### Se houver suspeita de vazamento de dados:\n1. Revogar tokens de sessão afetados\n2. Notificar usuários impactados\n3. Revisar logs de acesso\n4. Aplicar correções e documentar\n\n### Contato para reportar vulnerabilidades:\n- Email: security@bibliafS.app (configurar)\n- Resposta esperada: 48 horas\n\n---\n\n## 📊 Resumo da Auditoria\n\n| Categoria | Pontuação | Status |\n|-----------|-----------|--------|\n| Isolamento de Dados | 10/10 | ✅ Excelente |\n| Proteção XSS/CSRF | 9/10 | ✅ Muito Bom |\n| SQL Injection | 10/10 | ✅ Excelente |\n| Autenticação | 9/10 | ✅ Muito Bom |\n| Rate Limiting | 10/10 | ✅ Excelente |\n| Stripe Security | 10/10 | ✅ Excelente |\n| Responsividade | 9/10 | ✅ Muito Bom |\n| **TOTAL** | **67/70** | **✅ Aprovado** |\n\n---\n\n*Última auditoria: Dezembro 2025*\n*Próxima revisão recomendada: Março 2026*\n","path":null,"size_bytes":6676,"size_tokens":null},"client/src/lib/cacheUtils.ts":{"content":"// Cache utility for static data with TTL\nconst CACHE_TTL = 1000 * 60 * 60; // 1 hour default\n\nexport function getCachedData<T>(key: string): T | null {\n  try {\n    const item = localStorage.getItem(`cache_${key}`);\n    if (!item) return null;\n    \n    const { data, timestamp } = JSON.parse(item);\n    if (Date.now() - timestamp > CACHE_TTL) {\n      localStorage.removeItem(`cache_${key}`);\n      return null;\n    }\n    \n    return data as T;\n  } catch {\n    return null;\n  }\n}\n\nexport function setCachedData<T>(key: string, data: T): void {\n  try {\n    localStorage.setItem(`cache_${key}`, JSON.stringify({\n      data,\n      timestamp: Date.now()\n    }));\n  } catch {\n    // localStorage might be full or unavailable\n  }\n}\n\nexport function clearCache(key: string): void {\n  try {\n    localStorage.removeItem(`cache_${key}`);\n  } catch {\n    // ignore\n  }\n}\n","path":null,"size_bytes":859,"size_tokens":null},"client/src/components/LoadingFallback.tsx":{"content":"export function LoadingFallback() {\n  return (\n    <div className=\"flex items-center justify-center min-h-screen\">\n      <div className=\"space-y-4 w-full max-w-md px-4\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-muted rounded w-3/4 mb-4\"></div>\n          <div className=\"space-y-3\">\n            <div className=\"h-4 bg-muted rounded\"></div>\n            <div className=\"h-4 bg-muted rounded w-5/6\"></div>\n            <div className=\"h-4 bg-muted rounded w-4/6\"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":560,"size_tokens":null},"client/src/lib/offline/syncUtils.ts":{"content":"interface SyncableItem {\n  id: string;\n  updatedAt: string | Date;\n}\n\ninterface SyncConflict<T> {\n  localItem: T;\n  serverItem: T;\n  conflictType: 'server_newer' | 'local_newer' | 'both_modified';\n}\n\ninterface SyncResult<T> {\n  toUpload: T[];\n  toDownload: T[];\n  conflicts: SyncConflict<T>[];\n}\n\nexport function detectSyncConflicts<T extends SyncableItem>(\n  localItems: T[],\n  serverItems: T[],\n  lastSyncedAt: Date\n): SyncResult<T> {\n  const toUpload: T[] = [];\n  const toDownload: T[] = [];\n  const conflicts: SyncConflict<T>[] = [];\n\n  const serverMap = new Map(serverItems.map(item => [item.id, item]));\n  const localMap = new Map(localItems.map(item => [item.id, item]));\n\n  for (const local of localItems) {\n    const server = serverMap.get(local.id);\n    const localTime = new Date(local.updatedAt).getTime();\n    const syncTime = lastSyncedAt.getTime();\n\n    if (!server) {\n      if (localTime > syncTime) {\n        toUpload.push(local);\n      }\n    } else {\n      const serverTime = new Date(server.updatedAt).getTime();\n      const localModified = localTime > syncTime;\n      const serverModified = serverTime > syncTime;\n\n      if (localModified && serverModified) {\n        conflicts.push({\n          localItem: local,\n          serverItem: server,\n          conflictType: 'both_modified'\n        });\n      } else if (serverModified) {\n        toDownload.push(server);\n      } else if (localModified) {\n        toUpload.push(local);\n      }\n    }\n  }\n\n  for (const server of serverItems) {\n    if (!localMap.has(server.id)) {\n      toDownload.push(server);\n    }\n  }\n\n  return { toUpload, toDownload, conflicts };\n}\n\nexport function resolveConflict<T extends SyncableItem>(\n  conflict: SyncConflict<T>,\n  strategy: 'keep_local' | 'keep_server' | 'keep_newest'\n): T {\n  switch (strategy) {\n    case 'keep_local':\n      return conflict.localItem;\n    case 'keep_server':\n      return conflict.serverItem;\n    case 'keep_newest':\n      const localTime = new Date(conflict.localItem.updatedAt).getTime();\n      const serverTime = new Date(conflict.serverItem.updatedAt).getTime();\n      return localTime > serverTime ? conflict.localItem : conflict.serverItem;\n    default:\n      return conflict.serverItem;\n  }\n}\n\nconst SYNC_KEY_PREFIX = 'biblia_sync_';\n\nexport function getLastSyncTime(dataType: string): Date {\n  const stored = localStorage.getItem(`${SYNC_KEY_PREFIX}${dataType}`);\n  return stored ? new Date(stored) : new Date(0);\n}\n\nexport function setLastSyncTime(dataType: string, time: Date = new Date()): void {\n  localStorage.setItem(`${SYNC_KEY_PREFIX}${dataType}`, time.toISOString());\n}\n\nexport async function compressData(data: string): Promise<Uint8Array> {\n  const encoder = new TextEncoder();\n  const stream = new ReadableStream({\n    start(controller) {\n      controller.enqueue(encoder.encode(data));\n      controller.close();\n    }\n  });\n\n  const compressedStream = stream.pipeThrough(new CompressionStream('gzip'));\n  const chunks: Uint8Array[] = [];\n  const reader = compressedStream.getReader();\n\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done) break;\n    chunks.push(value);\n  }\n\n  const totalLength = chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n  const result = new Uint8Array(totalLength);\n  let offset = 0;\n  for (const chunk of chunks) {\n    result.set(chunk, offset);\n    offset += chunk.length;\n  }\n\n  return result;\n}\n\nexport async function decompressData(compressed: Uint8Array): Promise<string> {\n  const stream = new ReadableStream({\n    start(controller) {\n      controller.enqueue(compressed);\n      controller.close();\n    }\n  });\n\n  const decompressedStream = stream.pipeThrough(new DecompressionStream('gzip'));\n  const chunks: Uint8Array[] = [];\n  const reader = decompressedStream.getReader();\n\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done) break;\n    chunks.push(value);\n  }\n\n  const totalLength = chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n  const result = new Uint8Array(totalLength);\n  let offset = 0;\n  for (const chunk of chunks) {\n    result.set(chunk, offset);\n    offset += chunk.length;\n  }\n\n  return new TextDecoder().decode(result);\n}\n\nexport function calculateCompressionRatio(original: number, compressed: number): number {\n  return Math.round((1 - compressed / original) * 100);\n}\n","path":null,"size_bytes":4335,"size_tokens":null},"client/src/pages/groups.tsx":{"content":"import { useState, useEffect, useRef, useCallback } from \"react\";\nimport { SiWhatsapp } from \"react-icons/si\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormDescription, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { \n  Users, \n  Plus, \n  Lock,\n  Globe,\n  UserPlus,\n  LogOut,\n  MessageCircle,\n  BookOpen,\n  Loader2,\n  Crown,\n  Send,\n  Mail,\n  Phone,\n  Copy,\n  Check,\n  ArrowLeft,\n  Sparkles,\n  GraduationCap,\n  Star,\n  CheckCircle2,\n  AlertCircle,\n  FileText,\n  ChevronRight,\n  Trash2,\n  Settings,\n  MoreVertical,\n  Calendar as CalendarIcon,\n  Link as LinkIcon,\n  Video\n} from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { Link } from \"wouter\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { formatDistanceToNow, format, isToday, isYesterday, isSameDay } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\n\nconst formSchema = z.object({\n  name: z.string().min(3, \"Nome deve ter pelo menos 3 caracteres\").max(100),\n  description: z.string().max(500).optional(),\n  isPublic: z.boolean().default(false),\n});\n\nconst inviteSchema = z.object({\n  email: z.string().email(\"Email inválido\").optional().or(z.literal(\"\")),\n  phone: z.string().optional(),\n});\n\nconst messageSchema = z.object({\n  content: z.string().min(1, \"Mensagem não pode estar vazia\").max(2000),\n});\n\nconst discussionSchema = z.object({\n  title: z.string().min(3, \"Título deve ter pelo menos 3 caracteres\").max(200),\n  description: z.string().max(500).optional(),\n  question: z.string().max(500).optional(),\n  verseReference: z.string().max(100).optional(),\n  verseText: z.string().max(1000).optional(),\n  useAI: z.boolean().default(true),\n});\n\nconst answerSchema = z.object({\n  content: z.string().min(10, \"Resposta deve ter pelo menos 10 caracteres\").max(2000),\n  verseReference: z.string().max(100).optional(),\n});\n\ntype GroupFormData = z.infer<typeof formSchema>;\ntype InviteFormData = z.infer<typeof inviteSchema>;\ntype MessageFormData = z.infer<typeof messageSchema>;\ntype DiscussionFormData = z.infer<typeof discussionSchema>;\ntype AnswerFormData = z.infer<typeof answerSchema>;\n\ninterface Group {\n  id: string;\n  name: string;\n  description?: string;\n  isPublic: boolean;\n  maxMembers?: number;\n  leaderId: string;\n  createdAt: string;\n  role?: string;\n  joinedAt?: string;\n}\n\ninterface GroupMember {\n  id: string;\n  userId: string;\n  role: string;\n  joinedAt: string;\n  userName?: string;\n  userEmail?: string;\n  userImage?: string;\n}\n\ninterface GroupMessage {\n  id: string;\n  groupId: string;\n  userId: string;\n  content: string;\n  replyToId?: string | null;\n  verseReference?: string;\n  verseText?: string;\n  messageType: string;\n  createdAt: string;\n  user: {\n    id: string;\n    displayName?: string;\n    profileImageUrl?: string;\n  };\n}\n\ninterface GroupInvite {\n  id: string;\n  groupId: string;\n  inviteCode: string;\n  invitedEmail?: string;\n  invitedPhone?: string;\n  status: string;\n  expiresAt: string;\n  createdAt: string;\n}\n\ninterface GroupDiscussion {\n  id: string;\n  groupId: string;\n  createdById: string;\n  title: string;\n  description?: string;\n  question: string;\n  verseReference?: string;\n  verseText?: string;\n  aiSynthesis?: string;\n  synthesizedAt?: string;\n  status: string;\n  allowAnonymous: boolean;\n  deadline?: string;\n  createdAt: string;\n  creator?: {\n    id: string;\n    displayName?: string;\n    profileImageUrl?: string;\n  };\n  answers?: GroupAnswer[];\n}\n\ninterface GroupAnswer {\n  id: string;\n  discussionId: string;\n  userId: string;\n  content: string;\n  verseReference?: string;\n  reviewStatus: string;\n  reviewComment?: string;\n  isAnonymous: boolean;\n  createdAt: string;\n  user?: {\n    id: string;\n    displayName?: string;\n    profileImageUrl?: string;\n  };\n}\n\ninterface GroupMeeting {\n  id: string;\n  groupId: string;\n  title: string;\n  description?: string;\n  meetingDate: string;\n  location?: string;\n  isOnline: boolean;\n  meetingLink?: string;\n  createdBy: string;\n  createdAt: string;\n}\n\ninterface GroupResource {\n  id: string;\n  groupId: string;\n  title: string;\n  description?: string;\n  resourceType: string;\n  url?: string;\n  lessonId?: string;\n  createdBy: string;\n  createdAt: string;\n}\n\n\nexport default function Groups() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const { t } = useLanguage();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [selectedGroup, setSelectedGroup] = useState<Group | null>(null);\n  const [activeTab, setActiveTab] = useState<\"chat\" | \"members\" | \"invites\" | \"discussions\" | \"calendar\" | \"resources\">(\"chat\");\n  const [isInviteDialogOpen, setIsInviteDialogOpen] = useState(false);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const [groupForAction, setGroupForAction] = useState<Group | null>(null);\n  const [isGridEditDialogOpen, setIsGridEditDialogOpen] = useState(false);\n  const [isGridDeleteDialogOpen, setIsGridDeleteDialogOpen] = useState(false);\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: GroupFormData) => {\n      const res = await apiRequest(\"PATCH\", `/api/groups/${selectedGroup?.id}`, data);\n      return res.json();\n    },\n    onSuccess: (updatedGroup: Group) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups/my\"] });\n      setSelectedGroup({ ...selectedGroup!, ...updatedGroup });\n      setIsEditDialogOpen(false);\n      toast({\n        title: \"Grupo atualizado!\",\n        description: \"As informações do grupo foram salvas.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao atualizar grupo\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"DELETE\", `/api/groups/${selectedGroup?.id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups/my\"] });\n      setSelectedGroup(null);\n      setIsDeleteDialogOpen(false);\n      toast({\n        title: \"Grupo excluído\",\n        description: \"O grupo foi removido permanentemente.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao excluir grupo\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const gridUpdateMutation = useMutation({\n    mutationFn: async (data: GroupFormData) => {\n      const res = await apiRequest(\"PATCH\", `/api/groups/${groupForAction?.id}`, data);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups/my\"] });\n      setIsGridEditDialogOpen(false);\n      setGroupForAction(null);\n      toast({\n        title: \"Grupo atualizado!\",\n        description: \"As informações do grupo foram salvas.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao atualizar grupo\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const gridDeleteMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"DELETE\", `/api/groups/${groupForAction?.id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups/my\"] });\n      setIsGridDeleteDialogOpen(false);\n      setGroupForAction(null);\n      toast({\n        title: \"Grupo excluído\",\n        description: \"O grupo foi removido permanentemente.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao excluir grupo\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const [isJoinByCodeDialogOpen, setIsJoinByCodeDialogOpen] = useState(false);\n  const [inviteCode, setInviteCode] = useState(\"\");\n  const [copiedCode, setCopiedCode] = useState<string | null>(null);\n  const [isDiscussionDialogOpen, setIsDiscussionDialogOpen] = useState(false);\n  const [selectedDiscussion, setSelectedDiscussion] = useState<GroupDiscussion | null>(null);\n  const [isSynthesizing, setIsSynthesizing] = useState(false);\n  const [isMeetingDialogOpen, setIsMeetingDialogOpen] = useState(false);\n  const [isResourceDialogOpen, setIsResourceDialogOpen] = useState(false);\n\n  const { data: allGroups = [], isLoading: loadingAll } = useQuery<Group[]>({\n    queryKey: [\"/api/groups\"],\n    retry: 0,\n  });\n\n  const { data: myGroups = [], isLoading: loadingMy } = useQuery<Group[]>({\n    queryKey: [\"/api/groups/my\"],\n    retry: 0,\n    enabled: !!user,\n  });\n\n  // Helper to check if user is the leader of the current group\n  const isLeaderGlobal = selectedGroup ? (selectedGroup.leaderId === user?.id || selectedGroup.role === \"leader\") : false;\n\n  const { data: groupMembers = [] } = useQuery<GroupMember[]>({\n    queryKey: [\"/api/groups\", selectedGroup?.id, \"members\"],\n    enabled: !!selectedGroup,\n  });\n\n  const { data: groupMessages = [], isLoading: loadingMessages } = useQuery<GroupMessage[]>({\n    queryKey: [\"/api/groups\", selectedGroup?.id, \"messages\"],\n    enabled: !!selectedGroup,\n    refetchInterval: 5000,\n  });\n\n  const { data: groupInvites = [] } = useQuery<GroupInvite[]>({\n    queryKey: [\"/api/groups\", selectedGroup?.id, \"invites\"],\n    enabled: !!selectedGroup && (selectedGroup.role === \"leader\" || selectedGroup.role === \"moderator\"),\n  });\n\n  const { data: groupDiscussions = [], isLoading: loadingDiscussions } = useQuery<GroupDiscussion[]>({\n    queryKey: [\"/api/groups\", selectedGroup?.id, \"discussions\"],\n    enabled: !!selectedGroup,\n  });\n\n  const { data: groupMeetings = [] } = useQuery<GroupMeeting[]>({\n    queryKey: [\"/api/groups\", selectedGroup?.id, \"meetings\"],\n    enabled: !!selectedGroup,\n    staleTime: 0,\n    refetchOnWindowFocus: true,\n  });\n\n  const { data: groupResources = [] } = useQuery<GroupResource[]>({\n    queryKey: [\"/api/groups\", selectedGroup?.id, \"resources\"],\n    enabled: !!selectedGroup,\n    staleTime: 0,\n    refetchOnWindowFocus: true,\n  });\n\n  const [replyingTo, setReplyingTo] = useState<GroupMessage | null>(null);\n  const [messageToDelete, setMessageToDelete] = useState<string | null>(null);\n  const [isMessageDeleteDialogOpen, setIsMessageDeleteDialogOpen] = useState(false);\n  const chatScrollRef = useRef<HTMLDivElement>(null);\n  const prevMessageCountRef = useRef(0);\n\n  const deleteMessageMutation = useMutation({\n    mutationFn: async (messageId: string) => {\n      await apiRequest(\"DELETE\", `/api/groups/${selectedGroup?.id}/messages/${messageId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\", selectedGroup?.id, \"messages\"] });\n      setIsMessageDeleteDialogOpen(false);\n      setMessageToDelete(null);\n      toast({ title: \"Mensagem apagada\" });\n    },\n    onError: (error: any) => {\n      toast({ title: \"Erro ao apagar mensagem\", description: error?.message, variant: \"destructive\" });\n    }\n  });\n\n  useEffect(() => {\n    if (groupMessages.length > 0 && groupMessages.length !== prevMessageCountRef.current) {\n      prevMessageCountRef.current = groupMessages.length;\n      setTimeout(() => {\n        if (chatScrollRef.current) {\n          chatScrollRef.current.scrollTop = chatScrollRef.current.scrollHeight;\n        }\n      }, 100);\n    }\n  }, [groupMessages.length]);\n\n  const [editingMeeting, setEditingMeeting] = useState<GroupMeeting | null>(null);\n\n  const updateMeetingMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await apiRequest(\"PATCH\", `/api/groups/${selectedGroup?.id}/meetings/${editingMeeting?.id}`, data);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\", selectedGroup?.id, \"meetings\"] });\n      setEditingMeeting(null);\n      setIsMeetingDialogOpen(false);\n      meetingForm.reset();\n      toast({ title: \"Reunião atualizada!\" });\n    },\n    onError: (error: any) => {\n      toast({ title: \"Erro ao atualizar reunião\", description: error?.message, variant: \"destructive\" });\n    }\n  });\n\n  const [isMeetingDeleteDialogOpen, setIsMeetingDeleteDialogOpen] = useState(false);\n  const [meetingToDelete, setMeetingToDelete] = useState<string | null>(null);\n\n  const deleteMeetingMutation = useMutation({\n    mutationFn: async (meetingId: string) => {\n      await apiRequest(\"DELETE\", `/api/groups/${selectedGroup?.id}/meetings/${meetingId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\", selectedGroup?.id, \"meetings\"] });\n      toast({ title: \"Reunião removida\" });\n      setIsMeetingDeleteDialogOpen(false);\n      setMeetingToDelete(null);\n    },\n    onError: (error: any) => {\n      toast({ title: \"Erro ao remover reunião\", description: error?.message, variant: \"destructive\" });\n    }\n  });\n\n  const { data: discussionDetails } = useQuery<GroupDiscussion>({\n    queryKey: [\"/api/discussions\", selectedDiscussion?.id],\n    enabled: !!selectedDiscussion,\n    refetchInterval: 10000,\n  });\n\n  const form = useForm<GroupFormData>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      isPublic: false,\n    },\n  });\n\n  const inviteForm = useForm<InviteFormData>({\n    resolver: zodResolver(inviteSchema),\n    defaultValues: {\n      email: \"\",\n      phone: \"\",\n    },\n  });\n\n  const editForm = useForm<GroupFormData>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      name: selectedGroup?.name || \"\",\n      description: selectedGroup?.description || \"\",\n      isPublic: selectedGroup?.isPublic || false,\n    },\n  });\n\n  const gridEditForm = useForm<GroupFormData>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      isPublic: false,\n    },\n  });\n\n  // Update edit form values when group changes\n  useEffect(() => {\n    if (selectedGroup) {\n      editForm.reset({\n        name: selectedGroup.name,\n        description: selectedGroup.description || \"\",\n        isPublic: selectedGroup.isPublic,\n      });\n    }\n  }, [selectedGroup, editForm]);\n\n  // Update grid edit form when groupForAction changes\n  useEffect(() => {\n    if (groupForAction) {\n      gridEditForm.reset({\n        name: groupForAction.name,\n        description: groupForAction.description || \"\",\n        isPublic: groupForAction.isPublic,\n      });\n    }\n  }, [groupForAction, gridEditForm]);\n\n  const messageForm = useForm<MessageFormData>({\n    resolver: zodResolver(messageSchema),\n    defaultValues: {\n      content: \"\",\n    },\n  });\n\n  const discussionForm = useForm<DiscussionFormData>({\n    resolver: zodResolver(discussionSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      question: \"\",\n      verseReference: \"\",\n      verseText: \"\",\n      useAI: true,\n    },\n  });\n\n  const answerForm = useForm<AnswerFormData>({\n    resolver: zodResolver(answerSchema),\n    defaultValues: {\n      content: \"\",\n      verseReference: \"\",\n    },\n  });\n\n  const meetingForm = useForm({\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      meetingDate: new Date().toISOString().slice(0, 16),\n      location: \"\",\n      isOnline: false,\n      meetingLink: \"\",\n    }\n  });\n\n  const resourceForm = useForm({\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      resourceType: \"link\",\n      url: \"\",\n    }\n  });\n\n  const createMeetingMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await apiRequest(\"POST\", `/api/groups/${selectedGroup?.id}/meetings`, data);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\", selectedGroup?.id, \"meetings\"] });\n      setIsMeetingDialogOpen(false);\n      meetingForm.reset();\n      toast({ title: \"Reunião agendada!\" });\n    },\n    onError: (error: any) => {\n      toast({ title: \"Erro ao agendar reunião\", description: error?.message || \"Tente novamente.\", variant: \"destructive\" });\n    }\n  });\n\n  const createResourceMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await apiRequest(\"POST\", `/api/groups/${selectedGroup?.id}/resources`, data);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\", selectedGroup?.id, \"resources\"] });\n      setIsResourceDialogOpen(false);\n      resourceForm.reset();\n      toast({ title: \"Recurso adicionado!\" });\n    },\n    onError: (error: any) => {\n      toast({ title: \"Erro ao adicionar recurso\", description: error?.message || \"Tente novamente.\", variant: \"destructive\" });\n    }\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: GroupFormData): Promise<Group> => {\n      const res = await apiRequest(\"POST\", \"/api/groups\", data);\n      return res.json();\n    },\n    onSuccess: (newGroup: Group) => {\n      queryClient.setQueryData([\"/api/groups\"], (oldData: Group[] = []) => [\n        newGroup,\n        ...oldData,\n      ]);\n      \n      queryClient.setQueryData([\"/api/groups/my\"], (oldData: Group[] = []) => [\n        {\n          ...newGroup,\n          role: newGroup.role || \"leader\",\n          joinedAt: newGroup.joinedAt || new Date().toISOString(),\n        },\n        ...oldData,\n      ]);\n      \n      setIsCreateDialogOpen(false);\n      form.reset();\n      toast({\n        title: \"Grupo criado!\",\n        description: \"Seu grupo de estudo foi criado com sucesso.\",\n      });\n      \n      setTimeout(() => {\n        queryClient.invalidateQueries({ queryKey: [\"/api/groups\"] });\n        queryClient.invalidateQueries({ queryKey: [\"/api/groups/my\"] });\n      }, 500);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao criar grupo\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const joinMutation = useMutation({\n    mutationFn: async (groupId: string) => {\n      return await apiRequest(\"POST\", `/api/groups/${groupId}/join`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups/my\"] });\n      toast({\n        title: \"Bem-vindo ao grupo!\",\n        description: \"Você agora é membro deste grupo.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao entrar no grupo\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const leaveMutation = useMutation({\n    mutationFn: async (groupId: string) => {\n      return await apiRequest(\"POST\", `/api/groups/${groupId}/leave`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups/my\"] });\n      setSelectedGroup(null);\n      toast({\n        title: \"Você saiu do grupo\",\n        description: \"Você não é mais membro deste grupo.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao sair do grupo\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const sendMessageMutation = useMutation({\n    mutationFn: async (data: MessageFormData) => {\n      const payload: any = { ...data };\n      if (replyingTo) {\n        payload.replyToId = replyingTo.id;\n      }\n      return await apiRequest(\"POST\", `/api/groups/${selectedGroup?.id}/messages`, payload);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\", selectedGroup?.id, \"messages\"] });\n      messageForm.reset();\n      setReplyingTo(null);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao enviar mensagem\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const createInviteMutation = useMutation({\n    mutationFn: async (data: InviteFormData): Promise<GroupInvite> => {\n      const res = await apiRequest(\"POST\", `/api/groups/${selectedGroup?.id}/invites`, data);\n      return res.json();\n    },\n    onSuccess: (invite: GroupInvite) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\", selectedGroup?.id, \"invites\"] });\n      inviteForm.reset();\n      setIsInviteDialogOpen(false);\n      \n      const inviteUrl = `${window.location.origin}/groups?code=${invite.inviteCode}`;\n      const whatsappMessage = `Olá! Você foi convidado para o grupo \"${selectedGroup?.name}\" no BíbliaFS. Use o código: ${invite.inviteCode} ou acesse: ${inviteUrl}`;\n      const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(whatsappMessage)}`;\n      \n      toast({\n        title: \"Convite criado! 🎉\",\n        description: (\n          <div className=\"flex flex-col gap-2 mt-2\">\n            <p className=\"text-sm\">Código: <span className=\"font-mono font-bold text-primary\">{invite.inviteCode}</span></p>\n            <div className=\"flex gap-2\">\n              <a \n                href={whatsappUrl} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"inline-flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white text-sm font-medium px-3 py-1.5 rounded-lg transition-colors\"\n              >\n                <SiWhatsapp className=\"h-4 w-4\" />\n                Enviar via WhatsApp\n              </a>\n            </div>\n          </div>\n        ),\n        duration: 15000,\n      });\n      \n      // Auto copy to clipboard\n      if (navigator.clipboard && navigator.clipboard.writeText) {\n        navigator.clipboard.writeText(inviteUrl).catch(err => {\n          console.warn(\"Failed to copy invite URL:\", err);\n        });\n      }\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao criar convite\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const acceptInviteMutation = useMutation({\n    mutationFn: async (code: string) => {\n      return await apiRequest(\"POST\", \"/api/invites/accept\", { code });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups/my\"] });\n      setIsJoinByCodeDialogOpen(false);\n      setInviteCode(\"\");\n      toast({\n        title: \"Bem-vindo ao grupo!\",\n        description: \"Você agora é membro deste grupo.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao usar código\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const removeMemberMutation = useMutation({\n    mutationFn: async (memberId: string) => {\n      return await apiRequest(\"DELETE\", `/api/groups/${selectedGroup?.id}/members/${memberId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\", selectedGroup?.id, \"members\"] });\n      toast({ title: \"Membro removido\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Erro ao remover membro\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const updateMemberRoleMutation = useMutation({\n    mutationFn: async ({ memberId, role }: { memberId: string; role: string }) => {\n      return await apiRequest(\"PATCH\", `/api/groups/${selectedGroup?.id}/members/${memberId}`, { role });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\", selectedGroup?.id, \"members\"] });\n      toast({ title: \"Cargo atualizado\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Erro ao atualizar cargo\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const createDiscussionMutation = useMutation({\n    mutationFn: async (data: DiscussionFormData): Promise<GroupDiscussion> => {\n      console.log(\"Creating discussion for group:\", selectedGroup?.id, \"with data:\", data);\n      const res = await apiRequest(\"POST\", `/api/groups/${selectedGroup?.id}/discussions`, data);\n      if (!res.ok) {\n        const errorData = await res.json();\n        throw new Error(errorData.error || \"Erro ao criar discussão\");\n      }\n      return res.json();\n    },\n    onSuccess: (discussion: GroupDiscussion) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/groups\", selectedGroup?.id, \"discussions\"] });\n      discussionForm.reset();\n      setIsDiscussionDialogOpen(false);\n      toast({\n        title: \"Discussão criada!\",\n        description: discussion.question ? \"Pergunta gerada com sucesso\" : \"Discussão iniciada\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao criar discussão\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const submitAnswerMutation = useMutation({\n    mutationFn: async (data: AnswerFormData) => {\n      return await apiRequest(\"POST\", `/api/discussions/${selectedDiscussion?.id}/answers`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/discussions\", selectedDiscussion?.id] });\n      answerForm.reset();\n      toast({\n        title: \"Resposta enviada!\",\n        description: \"Sua resposta foi registrada.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao enviar resposta\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const synthesizeMutation = useMutation({\n    mutationFn: async (discussionId: string) => {\n      setIsSynthesizing(true);\n      const res = await apiRequest(\"POST\", `/api/discussions/${discussionId}/synthesize`, {});\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/discussions\", selectedDiscussion?.id] });\n      setIsSynthesizing(false);\n      toast({\n        title: \"Síntese gerada!\",\n        description: \"A IA analisou todas as respostas.\",\n      });\n    },\n    onError: (error: Error) => {\n      setIsSynthesizing(false);\n      toast({\n        title: \"Erro ao sintetizar\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const reviewAnswerMutation = useMutation({\n    mutationFn: async ({ answerId, status, comment }: { answerId: string; status: string; comment?: string }) => {\n      return await apiRequest(\"PATCH\", `/api/answers/${answerId}/review`, { status, comment });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/discussions\", selectedDiscussion?.id] });\n      toast({\n        title: \"Avaliação salva!\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao avaliar\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: GroupFormData) => {\n    createMutation.mutate(data);\n  };\n\n  const onSendMessage = (data: MessageFormData) => {\n    sendMessageMutation.mutate(data);\n  };\n\n  const onCreateInvite = (data: InviteFormData) => {\n    if (!data.email && !data.phone) {\n      toast({\n        title: \"Erro\",\n        description: \"Informe um email ou telefone\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    console.log(\"Creating invite with data:\", data);\n    createInviteMutation.mutate(data);\n  };\n\n  const copyInviteCode = (code: string) => {\n    navigator.clipboard.writeText(code);\n    setCopiedCode(code);\n    setTimeout(() => setCopiedCode(null), 2000);\n    toast({\n      title: \"Código copiado!\",\n      description: \"Compartilhe este código com quem deseja convidar.\",\n    });\n  };\n\n  const isLoading = loadingAll || loadingMy;\n  const publicGroups = allGroups.filter(g => g.isPublic);\n  const myGroupIds = new Set(myGroups.map(g => g.id));\n\n  // Group detail view\n  if (selectedGroup) {\n    const isLeaderOrMod = selectedGroup.role === \"leader\" || selectedGroup.role === \"moderator\" || selectedGroup.leaderId === user?.id;\n    const isLeader = isLeaderGlobal;\n    \n    return (\n      <div className=\"min-h-screen bg-background relative mesh-primary\">\n        <div className=\"max-w-4xl mx-auto p-2 sm:p-6 md:p-8 relative z-10 w-full\">\n          <div className=\"flex flex-col sm:flex-row items-center justify-between mb-6 gap-4\">\n            <Button \n              variant=\"ghost\" \n              onClick={() => setSelectedGroup(null)}\n              className=\"rounded-full hover-elevate w-full sm:w-auto justify-start sm:justify-center\"\n              data-testid=\"button-back\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Voltar aos grupos\n            </Button>\n\n            <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n              <DialogContent className=\"rounded-[2rem] border-0 shadow-2xl\">\n                <DialogHeader>\n                  <DialogTitle className=\"text-2xl font-display font-bold\">Editar Grupo</DialogTitle>\n                </DialogHeader>\n                <Form {...editForm}>\n                  <form onSubmit={editForm.handleSubmit((data) => updateMutation.mutate(data))} className=\"space-y-4\">\n                    <FormField\n                      control={editForm.control}\n                      name=\"name\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Nome do Grupo</FormLabel>\n                          <FormControl>\n                            <Input {...field} data-testid=\"input-edit-name\" className=\"rounded-xl\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                    <FormField\n                      control={editForm.control}\n                      name=\"description\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Descrição</FormLabel>\n                          <FormControl>\n                            <Textarea {...field} data-testid=\"input-edit-description\" className=\"rounded-xl min-h-[100px]\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                    <FormField\n                      control={editForm.control}\n                      name=\"isPublic\"\n                      render={({ field }) => (\n                        <FormItem className=\"flex items-center justify-between rounded-xl border p-4 bg-muted/30\">\n                          <div className=\"space-y-0.5\">\n                            <FormLabel className=\"text-base\">Grupo Público</FormLabel>\n                            <FormDescription>Visível para toda a comunidade.</FormDescription>\n                          </div>\n                          <FormControl>\n                            <Switch checked={field.value} onCheckedChange={field.onChange} data-testid=\"switch-edit-public\" />\n                          </FormControl>\n                        </FormItem>\n                      )}\n                    />\n                    <DialogFooter>\n                      <Button type=\"submit\" disabled={updateMutation.isPending} data-testid=\"button-save-group\" className=\"rounded-xl w-full font-bold\">\n                        {updateMutation.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n                        Salvar Alterações\n                      </Button>\n                    </DialogFooter>\n                  </form>\n                </Form>\n              </DialogContent>\n            </Dialog>\n\n            <Dialog open={isDeleteDialogOpen} onOpenChange={setIsDeleteDialogOpen}>\n              <DialogContent className=\"rounded-[2rem] border-0 shadow-2xl\">\n                <DialogHeader>\n                  <DialogTitle className=\"text-2xl font-display font-bold text-destructive\">Excluir Grupo?</DialogTitle>\n                  <DialogDescription className=\"text-base pt-2\">\n                    Esta ação não pode ser desfeita. Todas as mensagens e dados do grupo serão perdidos para sempre.\n                  </DialogDescription>\n                </DialogHeader>\n                <DialogFooter className=\"flex flex-col sm:flex-row gap-3 mt-4\">\n                  <Button variant=\"outline\" onClick={() => setIsDeleteDialogOpen(false)} data-testid=\"button-cancel-delete\" className=\"rounded-xl flex-1 order-2 sm:order-1\">Cancelar</Button>\n                  <Button variant=\"destructive\" onClick={() => deleteMutation.mutate()} disabled={deleteMutation.isPending} data-testid=\"button-confirm-delete\" className=\"rounded-xl flex-1 order-1 sm:order-2 font-bold\">\n                    {deleteMutation.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n                    Confirmar Exclusão\n                  </Button>\n                </DialogFooter>\n              </DialogContent>\n            </Dialog>\n          </div>\n\n          <Card className=\"border-none glass-premium hover-premium rounded-[2.5rem] ring-2 ring-primary/15\">\n            <CardHeader className=\"pb-6\">\n              <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n                <div className=\"flex-1 min-w-0\">\n                  <CardTitle className=\"flex items-center gap-3 text-xl sm:text-3xl font-display font-bold text-foreground flex-wrap\">\n                    <div className=\"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-2xl bg-primary/10 text-primary shrink-0\">\n                      <Users className=\"h-6 w-6\" />\n                    </div>\n                    {selectedGroup.name}\n                    {selectedGroup.role === \"leader\" && (\n                      <div className=\"p-1 rounded-full bg-amber-500/10\" title=\"Líder\">\n                        <Crown className=\"h-5 w-5 text-amber-500\" />\n                      </div>\n                    )}\n                  </CardTitle>\n                  <CardDescription className=\"mt-2 text-base font-medium\">\n                    {selectedGroup.description || \"Grupo de estudo bíblico\"}\n                  </CardDescription>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Badge variant=\"secondary\" className=\"rounded-full px-4 py-1.5 bg-primary/10 text-primary border-0 font-bold\">\n                    {selectedGroup.isPublic ? (\n                      <><Globe className=\"h-3.5 w-3.5 mr-1.5\" /> Público</>\n                    ) : (\n                      <><Lock className=\"h-3.5 w-3.5 mr-1.5\" /> Privado</>\n                    )}\n                  </Badge>\n                  {isLeader && (\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button variant=\"ghost\" size=\"icon\" className=\"rounded-full\" data-testid=\"button-group-menu\">\n                          <MoreVertical className=\"h-5 w-5\" />\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\" className=\"rounded-xl w-48\">\n                        <DropdownMenuItem \n                          className=\"cursor-pointer\"\n                          onClick={() => setIsEditDialogOpen(true)}\n                          data-testid=\"menu-edit-group\"\n                        >\n                          <Settings className=\"h-4 w-4 mr-2\" />\n                          Editar Grupo\n                        </DropdownMenuItem>\n                        <DropdownMenuItem \n                          className=\"text-destructive cursor-pointer\"\n                          onClick={() => setIsDeleteDialogOpen(true)}\n                          data-testid=\"menu-delete-group\"\n                        >\n                          <Trash2 className=\"h-4 w-4 mr-2\" />\n                          Excluir Grupo\n                        </DropdownMenuItem>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  )}\n                </div>\n              </div>\n            </CardHeader>\n\n            <CardContent className=\"p-2 sm:p-6\">\n              <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as any)} className=\"w-full\">\n                <TabsList className=\"grid grid-cols-3 sm:grid-cols-6 w-full p-1 bg-muted/50 rounded-xl gap-1 h-auto mb-4\">\n                  <TabsTrigger value=\"chat\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm font-semibold text-[11px] px-2 py-2\" data-testid=\"tab-chat\">\n                    <MessageCircle className=\"h-3.5 w-3.5 mr-1\" />\n                    Chat\n                  </TabsTrigger>\n                  <TabsTrigger value=\"calendar\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm font-semibold text-[11px] px-2 py-2\" data-testid=\"tab-calendar\">\n                    <CalendarIcon className=\"h-3.5 w-3.5 mr-1\" />\n                    Agenda\n                  </TabsTrigger>\n                  <TabsTrigger value=\"resources\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm font-semibold text-[11px] px-2 py-2\" data-testid=\"tab-resources\">\n                    <LinkIcon className=\"h-3.5 w-3.5 mr-1\" />\n                    Arquivos\n                  </TabsTrigger>\n                  <TabsTrigger value=\"discussions\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm font-semibold text-[11px] px-2 py-2\" data-testid=\"tab-discussions\">\n                    <GraduationCap className=\"h-3.5 w-3.5 mr-1\" />\n                    Estudos\n                  </TabsTrigger>\n                  <TabsTrigger value=\"members\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm font-semibold text-[11px] px-2 py-2\" data-testid=\"tab-members\">\n                    <Users className=\"h-3.5 w-3.5 mr-1\" />\n                    Membros\n                  </TabsTrigger>\n                  {isLeaderOrMod && (\n                    <TabsTrigger value=\"invites\" className=\"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm font-semibold text-[11px] px-2 py-2\" data-testid=\"tab-invites\">\n                      <UserPlus className=\"h-3.5 w-3.5 mr-1\" />\n                      Convites\n                    </TabsTrigger>\n                  )}\n                </TabsList>\n\n                <TabsContent value=\"calendar\" className=\"space-y-4\">\n                  <div className=\"flex justify-between items-center mb-4\">\n                    <h3 className=\"text-lg font-bold\">Próximas Reuniões</h3>\n                    {isLeaderOrMod && (\n                      <Button onClick={() => setIsMeetingDialogOpen(true)} size=\"sm\" className=\"rounded-xl\">\n                        <Plus className=\"h-4 w-4 mr-2\" />\n                        Agendar\n                      </Button>\n                    )}\n                  </div>\n                  <div className=\"grid gap-4\">\n                    {groupMeetings.length === 0 ? (\n                      <div className=\"text-center py-12 border-2 border-dashed rounded-2xl\">\n                        <CalendarIcon className=\"h-12 w-12 text-muted-foreground/20 mx-auto mb-4\" />\n                        <p className=\"text-muted-foreground\">Nenhuma reunião agendada</p>\n                      </div>\n                    ) : (\n                      groupMeetings.map((meeting) => (\n                        <Card key={meeting.id} className=\"hover-elevate\">\n                          <CardContent className=\"p-4\">\n                            <div className=\"flex flex-col sm:flex-row justify-between items-start gap-3\">\n                              <div className=\"flex-1 min-w-0\">\n                                <h4 className=\"font-bold text-base sm:text-lg\">{meeting.title}</h4>\n                                {meeting.description && (\n                                  <p className=\"text-sm text-muted-foreground mt-1 line-clamp-2\">{meeting.description}</p>\n                                )}\n                                <div className=\"flex flex-wrap gap-3 mt-3 text-xs font-semibold text-primary\">\n                                  <span className=\"flex items-center gap-1.5 bg-primary/10 px-2 py-1 rounded-md\">\n                                    <CalendarIcon className=\"h-3.5 w-3.5\" />\n                                    {new Date(meeting.meetingDate).toLocaleDateString(\"pt-BR\", { timeZone: \"America/Sao_Paulo\" })} {new Date(meeting.meetingDate).toLocaleTimeString(\"pt-BR\", { hour: \"2-digit\", minute: \"2-digit\", timeZone: \"America/Sao_Paulo\" })}\n                                  </span>\n                                  {meeting.location && (\n                                    <span className=\"flex items-center gap-1.5 bg-muted px-2 py-1 rounded-md text-foreground/70\">\n                                      <Globe className=\"h-3.5 w-3.5\" />\n                                      {meeting.location}\n                                    </span>\n                                  )}\n                                  {meeting.isOnline && (\n                                    <span className=\"flex items-center gap-1.5 bg-blue-500/10 text-blue-600 px-2 py-1 rounded-md\">\n                                      <Video className=\"h-3.5 w-3.5\" />\n                                      Online\n                                    </span>\n                                  )}\n                                </div>\n                              </div>\n                              \n                              <div className=\"flex flex-col gap-2\">\n                                {meeting.isOnline && meeting.meetingLink && (\n                                  <Button \n                                    size=\"sm\" \n                                    variant=\"outline\" \n                                    className=\"gap-2 rounded-lg\"\n                                    asChild\n                                  >\n                                    <a href={meeting.meetingLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                                      <Video className=\"h-3.5 w-3.5\" />\n                                      Entrar\n                                    </a>\n                                  </Button>\n                                )}\n                                \n                                {isLeader && (\n                                  <div className=\"flex gap-1\">\n                                    <Button\n                                      size=\"icon\"\n                                      variant=\"ghost\"\n                                      onClick={() => {\n                                        setEditingMeeting(meeting);\n                                        meetingForm.reset({\n                                          title: meeting.title,\n                                          description: meeting.description || \"\",\n                                          meetingDate: new Date(meeting.meetingDate).toISOString().slice(0, 16),\n                                          location: meeting.location || \"\",\n                                          isOnline: meeting.isOnline,\n                                          meetingLink: meeting.meetingLink || \"\",\n                                        });\n                                        setIsMeetingDialogOpen(true);\n                                      }}\n                                    >\n                                      <Settings className=\"h-4 w-4\" />\n                                    </Button>\n                                    <Button\n                                      size=\"icon\"\n                                      variant=\"ghost\"\n                                      onClick={() => {\n                                        setMeetingToDelete(meeting.id);\n                                        setIsMeetingDeleteDialogOpen(true);\n                                      }}\n                                    >\n                                      <Trash2 className=\"h-4 w-4\" />\n                                    </Button>\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n                          </CardContent>\n                        </Card>\n                      ))\n                    )}\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"resources\" className=\"space-y-4\">\n                  <div className=\"flex justify-between items-center\">\n                    <h3 className=\"text-lg font-bold\">Materiais e Links</h3>\n                    <Button onClick={() => setIsResourceDialogOpen(true)} size=\"sm\" className=\"rounded-xl\">\n                      <Plus className=\"h-4 w-4 mr-2\" />\n                      Adicionar\n                    </Button>\n                  </div>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {groupResources.length === 0 ? (\n                      <div className=\"col-span-full text-center py-12 border-2 border-dashed rounded-2xl\">\n                        <LinkIcon className=\"h-12 w-12 text-muted-foreground/20 mx-auto mb-4\" />\n                        <p className=\"text-muted-foreground\">Nenhum recurso disponível</p>\n                      </div>\n                    ) : (\n                      groupResources.map((resource) => (\n                        <Card key={resource.id} className=\"hover-elevate\">\n                          <CardContent className=\"p-4\">\n                            <Badge variant=\"secondary\" className=\"mb-2\">\n                              {resource.resourceType === 'link' ? 'Link' : 'Arquivo'}\n                            </Badge>\n                            <h4 className=\"font-bold text-sm\">{resource.title}</h4>\n                            <p className=\"text-xs text-muted-foreground line-clamp-2 mt-1\">{resource.description}</p>\n                            {resource.url && (\n                              <Button asChild size=\"sm\" variant=\"ghost\" className=\"w-full mt-3 rounded-xl border border-primary/10\">\n                                <a href={resource.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                                  <Globe className=\"h-3.5 w-3.5 mr-2\" />\n                                  Acessar\n                                </a>\n                              </Button>\n                            )}\n                          </CardContent>\n                        </Card>\n                      ))\n                    )}\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"chat\" className=\"space-y-0 flex flex-col h-[calc(100vh-420px)] min-h-[300px]\">\n                  <div \n                    ref={chatScrollRef}\n                    className=\"flex-1 overflow-y-auto border rounded-lg p-3 space-y-1\"\n                    data-testid=\"chat-scroll-area\"\n                  >\n                    {loadingMessages ? (\n                      <div className=\"flex items-center justify-center h-full\">\n                        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n                      </div>\n                    ) : groupMessages.length === 0 ? (\n                      <div className=\"flex flex-col items-center justify-center h-full text-center py-12\">\n                        <MessageCircle className=\"h-12 w-12 text-muted-foreground mb-4\" />\n                        <p className=\"text-muted-foreground font-medium\">Nenhuma mensagem ainda</p>\n                        <p className=\"text-sm text-muted-foreground mt-1\">Seja o primeiro a iniciar a conversa!</p>\n                      </div>\n                    ) : (\n                      <div className=\"space-y-1\">\n                        {(() => {\n                          const sorted = [...groupMessages].sort((a, b) => \n                            new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()\n                          );\n                          let lastDate: string | null = null;\n                          return sorted.map((message) => {\n                            const msgDate = new Date(message.createdAt);\n                            const dateKey = format(msgDate, \"yyyy-MM-dd\");\n                            let showDateSeparator = false;\n                            if (dateKey !== lastDate) {\n                              showDateSeparator = true;\n                              lastDate = dateKey;\n                            }\n                            const isOwn = (message as any).user?.id === user?.id || message.userId === user?.id;\n                            const displayName = (message as any).user?.displayName || \"Membro\";\n                            const profileImg = (message as any).user?.profileImageUrl || \"\";\n                            const replyMsg = message.replyToId ? sorted.find(m => m.id === message.replyToId) : null;\n\n                            return (\n                              <div key={message.id}>\n                                {showDateSeparator && (\n                                  <div className=\"flex items-center justify-center my-3\" data-testid={`date-separator-${dateKey}`}>\n                                    <div className=\"flex-1 h-px bg-border\" />\n                                    <span className=\"px-3 text-xs text-muted-foreground font-medium\">\n                                      {isToday(msgDate) ? \"Hoje\" : isYesterday(msgDate) ? \"Ontem\" : format(msgDate, \"dd 'de' MMMM\", { locale: ptBR })}\n                                    </span>\n                                    <div className=\"flex-1 h-px bg-border\" />\n                                  </div>\n                                )}\n                                <div \n                                  className={`group flex gap-2 py-1 ${isOwn ? \"flex-row-reverse\" : \"\"}`}\n                                  data-testid={`message-${message.id}`}\n                                >\n                                  {!isOwn && (\n                                    <Avatar className=\"h-7 w-7 flex-shrink-0 mt-1\">\n                                      <AvatarImage src={profileImg} />\n                                      <AvatarFallback className=\"text-xs\">\n                                        {displayName.charAt(0)}\n                                      </AvatarFallback>\n                                    </Avatar>\n                                  )}\n                                  <div className={`max-w-[75%] ${isOwn ? \"items-end\" : \"items-start\"} flex flex-col`}>\n                                    {!isOwn && (\n                                      <span className=\"text-xs font-medium text-muted-foreground ml-1 mb-0.5\">\n                                        {displayName}\n                                      </span>\n                                    )}\n                                    <div className={`rounded-2xl px-3 py-2 relative ${isOwn ? \"bg-primary text-primary-foreground rounded-tr-sm\" : \"bg-muted rounded-tl-sm\"}`}>\n                                      {replyMsg && (\n                                        <div className={`text-xs mb-1 pb-1 border-b ${isOwn ? \"border-primary-foreground/20\" : \"border-border\"} opacity-70`}>\n                                          <span className=\"font-medium\">{(replyMsg as any).user?.displayName || \"Membro\"}</span>\n                                          <p className=\"truncate max-w-[200px]\">{replyMsg.content}</p>\n                                        </div>\n                                      )}\n                                      {message.verseReference && (\n                                        <div className=\"text-xs opacity-80 mb-1 flex items-center gap-1\">\n                                          <BookOpen className=\"h-3 w-3\" />\n                                          {message.verseReference}\n                                        </div>\n                                      )}\n                                      <p className=\"text-sm whitespace-pre-wrap break-words\">{message.content}</p>\n                                      <span className={`text-[10px] mt-0.5 block ${isOwn ? \"text-primary-foreground/60 text-right\" : \"text-muted-foreground\"}`}>\n                                        {format(msgDate, \"HH:mm\")}\n                                      </span>\n                                    </div>\n                                    <div className={`flex gap-1 mt-0.5 invisible group-hover:visible ${isOwn ? \"flex-row-reverse\" : \"\"}`}>\n                                      <button\n                                        onClick={() => setReplyingTo(message)}\n                                        className=\"text-xs text-muted-foreground hover:text-foreground px-1\"\n                                        data-testid={`reply-message-${message.id}`}\n                                      >\n                                        Responder\n                                      </button>\n                                      {isOwn && (\n                                        <button\n                                          onClick={() => {\n                                            setMessageToDelete(message.id);\n                                            setIsMessageDeleteDialogOpen(true);\n                                          }}\n                                          className=\"text-xs text-destructive hover:text-destructive/80 px-1\"\n                                          data-testid={`delete-message-${message.id}`}\n                                        >\n                                          Apagar\n                                        </button>\n                                      )}\n                                    </div>\n                                  </div>\n                                </div>\n                              </div>\n                            );\n                          });\n                        })()}\n                      </div>\n                    )}\n                  </div>\n\n                  {replyingTo && (\n                    <div className=\"flex items-center gap-2 px-3 py-2 bg-muted/50 border-l-2 border-primary rounded-md mt-2\">\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-xs font-medium text-primary\">\n                          Respondendo a {(replyingTo as any).user?.displayName || \"Membro\"}\n                        </p>\n                        <p className=\"text-xs text-muted-foreground truncate\">{replyingTo.content}</p>\n                      </div>\n                      <Button \n                        size=\"icon\" \n                        variant=\"ghost\" \n                        onClick={() => setReplyingTo(null)}\n                        data-testid=\"cancel-reply\"\n                      >\n                        <AlertCircle className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  )}\n\n                  <Form {...messageForm}>\n                    <form onSubmit={messageForm.handleSubmit(onSendMessage)} className=\"flex gap-2 mt-2\">\n                      <FormField\n                        control={messageForm.control}\n                        name=\"content\"\n                        render={({ field }) => (\n                          <FormItem className=\"flex-1 min-w-0\">\n                            <FormControl>\n                              <Input \n                                placeholder={replyingTo ? \"Digite sua resposta...\" : \"Digite sua mensagem...\"}\n                                className=\"rounded-full\"\n                                data-testid=\"input-message\"\n                                {...field}\n                              />\n                            </FormControl>\n                          </FormItem>\n                        )}\n                      />\n                      <Button \n                        type=\"submit\" \n                        size=\"icon\"\n                        disabled={sendMessageMutation.isPending}\n                        className=\"rounded-full flex-shrink-0\"\n                        data-testid=\"button-send-message\"\n                      >\n                        {sendMessageMutation.isPending ? (\n                          <Loader2 className=\"h-4 w-4 animate-spin\" />\n                        ) : (\n                          <Send className=\"h-4 w-4\" />\n                        )}\n                      </Button>\n                    </form>\n                  </Form>\n\n                  <Dialog open={isMessageDeleteDialogOpen} onOpenChange={setIsMessageDeleteDialogOpen}>\n                    <DialogContent>\n                      <DialogHeader>\n                        <DialogTitle>Apagar mensagem</DialogTitle>\n                        <DialogDescription>\n                          Tem certeza que deseja apagar esta mensagem? Esta ação não pode ser desfeita.\n                        </DialogDescription>\n                      </DialogHeader>\n                      <DialogFooter className=\"gap-2\">\n                        <Button variant=\"outline\" onClick={() => setIsMessageDeleteDialogOpen(false)}>\n                          Cancelar\n                        </Button>\n                        <Button \n                          variant=\"destructive\" \n                          onClick={() => messageToDelete && deleteMessageMutation.mutate(messageToDelete)}\n                          disabled={deleteMessageMutation.isPending}\n                        >\n                          {deleteMessageMutation.isPending ? <Loader2 className=\"h-4 w-4 animate-spin mr-2\" /> : <Trash2 className=\"h-4 w-4 mr-2\" />}\n                          Apagar\n                        </Button>\n                      </DialogFooter>\n                    </DialogContent>\n                  </Dialog>\n                </TabsContent>\n\n                <TabsContent value=\"members\">\n                  <div className=\"flex justify-between items-center mb-4 gap-2\">\n                    <h3 className=\"text-lg font-bold\">Membros</h3>\n                    {isLeader && (\n                      <Button onClick={() => setActiveTab(\"invites\")} size=\"sm\" className=\"rounded-xl\">\n                        <UserPlus className=\"h-4 w-4 mr-1.5\" />\n                        Convidar\n                      </Button>\n                    )}\n                  </div>\n                  <div className=\"space-y-2\">\n                    {groupMembers.map((member) => (\n                      <div \n                        key={member.id} \n                        className=\"flex items-center gap-2 sm:gap-3 p-3 rounded-lg bg-muted/50\"\n                        data-testid={`member-${member.id}`}\n                      >\n                        <Avatar className=\"h-9 w-9 sm:h-10 sm:w-10 flex-shrink-0\">\n                          <AvatarImage src={member.userImage || \"\"} />\n                          <AvatarFallback>\n                            {member.userName?.charAt(0) || \"U\"}\n                          </AvatarFallback>\n                        </Avatar>\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"font-medium text-sm sm:text-base truncate\">{member.userName || \"Usuário\"}</p>\n                          <p className=\"text-xs sm:text-sm text-muted-foreground truncate\">{member.userEmail}</p>\n                        </div>\n                        <div className=\"flex items-center gap-1 sm:gap-2 flex-shrink-0\">\n                          <Badge variant={member.role === \"leader\" ? \"default\" : \"secondary\"} className=\"text-[10px] sm:text-xs\">\n                            {member.role === \"leader\" && <Crown className=\"h-3 w-3 mr-1\" />}\n                            {member.role === \"leader\" ? \"Líder\" : member.role === \"moderator\" ? \"Mod\" : \"Membro\"}\n                          </Badge>\n                          \n                          {isLeader && member.userId !== user?.id && (\n                            <DropdownMenu>\n                              <DropdownMenuTrigger asChild>\n                                <Button variant=\"ghost\" size=\"icon\" data-testid={`manage-member-${member.id}`}>\n                                  <MoreVertical className=\"h-4 w-4\" />\n                                </Button>\n                              </DropdownMenuTrigger>\n                              <DropdownMenuContent align=\"end\" className=\"rounded-xl\">\n                                <DropdownMenuItem \n                                  className=\"cursor-pointer\"\n                                  onClick={() => updateMemberRoleMutation.mutate({ memberId: member.id, role: member.role === \"moderator\" ? \"member\" : \"moderator\" })}\n                                >\n                                  <Crown className=\"h-4 w-4 mr-2\" />\n                                  {member.role === \"moderator\" ? \"Remover Moderador\" : \"Tornar Moderador\"}\n                                </DropdownMenuItem>\n                                <DropdownMenuItem \n                                  className=\"text-destructive cursor-pointer\"\n                                  onClick={() => removeMemberMutation.mutate(member.id)}\n                                >\n                                  <Trash2 className=\"h-4 w-4 mr-2\" />\n                                  Remover do Grupo\n                                </DropdownMenuItem>\n                              </DropdownMenuContent>\n                            </DropdownMenu>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                  <p className=\"text-sm text-muted-foreground mt-3\">{groupMembers.length} membro{groupMembers.length !== 1 ? 's' : ''}</p>\n                </TabsContent>\n\n                {isLeaderOrMod && (\n                  <TabsContent value=\"invites\">\n                    <div className=\"space-y-4\">\n                      <div className=\"flex justify-between items-center gap-2\">\n                        <h4 className=\"font-medium\">Convites pendentes</h4>\n                        <Dialog open={isInviteDialogOpen} onOpenChange={setIsInviteDialogOpen}>\n                          <DialogTrigger asChild>\n                            <Button size=\"sm\" data-testid=\"button-new-invite\">\n                              <Plus className=\"h-4 w-4 mr-2\" />\n                              Novo Convite\n                            </Button>\n                          </DialogTrigger>\n                          <DialogContent>\n                            <DialogHeader>\n                              <DialogTitle>Convidar para o grupo</DialogTitle>\n                              <DialogDescription>\n                                Envie um convite por email ou telefone\n                              </DialogDescription>\n                            </DialogHeader>\n                            <Form {...inviteForm}>\n                              <form onSubmit={inviteForm.handleSubmit(onCreateInvite)} className=\"space-y-4\">\n                                <FormField\n                                  control={inviteForm.control}\n                                  name=\"email\"\n                                  render={({ field }) => (\n                                    <FormItem>\n                                      <FormLabel>Email</FormLabel>\n                                      <FormControl>\n                                        <div className=\"flex gap-2\">\n                                          <Mail className=\"h-4 w-4 mt-3 text-muted-foreground\" />\n                                          <Input \n                                            placeholder=\"email@exemplo.com\"\n                                            data-testid=\"input-invite-email\"\n                                            {...field}\n                                          />\n                                        </div>\n                                      </FormControl>\n                                      <FormMessage />\n                                    </FormItem>\n                                  )}\n                                />\n                                <FormField\n                                  control={inviteForm.control}\n                                  name=\"phone\"\n                                  render={({ field }) => (\n                                    <FormItem>\n                                      <FormLabel>Telefone (opcional)</FormLabel>\n                                      <FormControl>\n                                        <div className=\"flex gap-2\">\n                                          <Phone className=\"h-4 w-4 mt-3 text-muted-foreground\" />\n                                          <Input \n                                            placeholder=\"(11) 99999-9999\"\n                                            data-testid=\"input-invite-phone\"\n                                            {...field}\n                                          />\n                                        </div>\n                                      </FormControl>\n                                      <FormMessage />\n                                    </FormItem>\n                                  )}\n                                />\n                                <DialogFooter>\n                                  <Button \n                                    type=\"submit\" \n                                    disabled={createInviteMutation.isPending}\n                                    data-testid=\"button-create-invite\"\n                                  >\n                                    {createInviteMutation.isPending ? (\n                                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                                    ) : (\n                                      <UserPlus className=\"h-4 w-4 mr-2\" />\n                                    )}\n                                    Criar Convite\n                                  </Button>\n                                </DialogFooter>\n                              </form>\n                            </Form>\n                          </DialogContent>\n                        </Dialog>\n                      </div>\n\n                      {groupInvites.length === 0 ? (\n                        <div className=\"text-center py-8 text-muted-foreground\">\n                          <UserPlus className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                          <p>Nenhum convite pendente</p>\n                          <p className=\"text-sm\">Crie um convite para adicionar membros</p>\n                        </div>\n                      ) : (\n                        <div className=\"space-y-3\">\n                          {groupInvites.map((invite) => (\n                            <div \n                              key={invite.id} \n                              className=\"flex flex-col sm:flex-row sm:items-center justify-between p-4 gap-4 rounded-2xl border bg-card/50 shadow-sm\"\n                              data-testid={`invite-${invite.id}`}\n                            >\n                              <div className=\"space-y-1.5 flex-1 min-w-0\">\n                                <div className=\"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3\">\n                                  {invite.invitedEmail && (\n                                    <div className=\"flex items-center gap-2 text-sm font-semibold min-w-0\">\n                                      <Mail className=\"h-4 w-4 text-primary/70 flex-shrink-0\" />\n                                      <span className=\"truncate\">{invite.invitedEmail}</span>\n                                    </div>\n                                  )}\n                                  {invite.invitedPhone && (\n                                    <div className=\"flex items-center gap-2 text-sm font-semibold\">\n                                      <Phone className=\"h-4 w-4 text-primary/70 flex-shrink-0\" />\n                                      <span>{invite.invitedPhone}</span>\n                                    </div>\n                                  )}\n                                </div>\n                                <div className=\"flex items-center gap-2\">\n                                  <div className=\"text-[10px] uppercase font-bold tracking-wider text-muted-foreground/60 bg-muted px-2 py-0.5 rounded-md\">\n                                    Código: <span className=\"font-mono text-primary\">{invite.inviteCode}</span>\n                                  </div>\n                                </div>\n                              </div>\n                              <div className=\"flex items-center gap-2 pt-2 sm:pt-0 border-t sm:border-t-0 border-border/50\">\n                                <Badge \n                                  variant={invite.status === \"pending\" ? \"outline\" : invite.status === \"accepted\" ? \"default\" : \"secondary\"}\n                                  className=\"capitalize font-bold text-[10px] tracking-tight\"\n                                >\n                                  {invite.status === \"pending\" ? \"Pendente\" : invite.status === \"accepted\" ? \"Aceito\" : \"Expirado\"}\n                                </Badge>\n                                <div className=\"flex items-center gap-1 ml-auto\">\n                                  <Button \n                                    size=\"icon\" \n                                    variant=\"ghost\"\n                                    onClick={() => copyInviteCode(invite.inviteCode)}\n                                    data-testid={`button-copy-${invite.id}`}\n                                  >\n                                    {copiedCode === invite.inviteCode ? (\n                                      <Check className=\"h-4 w-4 text-green-500\" />\n                                    ) : (\n                                      <Copy className=\"h-4 w-4\" />\n                                    )}\n                                  </Button>\n                                  <Button \n                                    size=\"icon\" \n                                    variant=\"ghost\"\n                                    className=\"text-green-600\"\n                                    onClick={() => {\n                                      const inviteUrl = `${window.location.origin}/groups?code=${invite.inviteCode}`;\n                                      const message = `Olá! Você foi convidado para o grupo \"${selectedGroup?.name}\" no BíbliaFS. Use o código: ${invite.inviteCode} ou acesse: ${inviteUrl}`;\n                                      window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, '_blank');\n                                    }}\n                                    data-testid={`button-whatsapp-${invite.id}`}\n                                  >\n                                    <SiWhatsapp className=\"h-4 w-4\" />\n                                  </Button>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  </TabsContent>\n                )}\n\n                <TabsContent value=\"discussions\" className=\"space-y-4\">\n                  {selectedDiscussion ? (\n                    // Discussion Detail View\n                    <div className=\"space-y-4\">\n                      <Button \n                        variant=\"ghost\" \n                        size=\"sm\" \n                        onClick={() => setSelectedDiscussion(null)}\n                        data-testid=\"button-back-discussions\"\n                      >\n                        <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                        Voltar às discussões\n                      </Button>\n\n                      <Card>\n                        <CardHeader>\n                          <div className=\"flex items-start justify-between\">\n                            <div>\n                              <CardTitle className=\"text-lg\">{discussionDetails?.title || selectedDiscussion.title}</CardTitle>\n                              <CardDescription>{discussionDetails?.description || selectedDiscussion.description}</CardDescription>\n                            </div>\n                            <Badge variant={discussionDetails?.status === \"open\" ? \"default\" : discussionDetails?.status === \"synthesized\" ? \"secondary\" : \"outline\"}>\n                              {discussionDetails?.status === \"open\" ? \"Aberta\" : discussionDetails?.status === \"synthesized\" ? \"Sintetizada\" : \"Encerrada\"}\n                            </Badge>\n                          </div>\n                          {discussionDetails?.verseReference && (\n                            <div className=\"mt-2 p-3 bg-muted rounded-lg\">\n                              <p className=\"text-sm font-medium flex items-center gap-1\">\n                                <BookOpen className=\"h-4 w-4\" />\n                                {discussionDetails.verseReference}\n                              </p>\n                              {discussionDetails.verseText && (\n                                <p className=\"text-sm text-muted-foreground mt-1 italic\">\"{discussionDetails.verseText}\"</p>\n                              )}\n                            </div>\n                          )}\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                          <div className=\"p-4 bg-primary/10 rounded-lg border border-primary/20\">\n                            <p className=\"font-medium flex items-center gap-2 mb-2\">\n                              <Sparkles className=\"h-4 w-4 text-primary\" />\n                              Pergunta para Reflexão\n                            </p>\n                            <p className=\"text-lg\">{discussionDetails?.question || selectedDiscussion.question}</p>\n                          </div>\n\n                          {/* Answer Form */}\n                          {discussionDetails?.status === \"open\" && (\n                            <Form {...answerForm}>\n                              <form onSubmit={answerForm.handleSubmit((data) => submitAnswerMutation.mutate(data))} className=\"space-y-3\">\n                                <FormField\n                                  control={answerForm.control}\n                                  name=\"content\"\n                                  render={({ field }) => (\n                                    <FormItem>\n                                      <FormLabel>Sua Resposta</FormLabel>\n                                      <FormControl>\n                                        <Textarea \n                                          placeholder=\"Compartilhe sua reflexão...\" \n                                          rows={4}\n                                          data-testid=\"input-answer\"\n                                          {...field}\n                                        />\n                                      </FormControl>\n                                      <FormMessage />\n                                    </FormItem>\n                                  )}\n                                />\n                                <FormField\n                                  control={answerForm.control}\n                                  name=\"verseReference\"\n                                  render={({ field }) => (\n                                    <FormItem>\n                                      <FormLabel>Referência Bíblica (opcional)</FormLabel>\n                                      <FormControl>\n                                        <Input \n                                          placeholder=\"Ex: João 3:16\" \n                                          data-testid=\"input-answer-verse\"\n                                          {...field}\n                                        />\n                                      </FormControl>\n                                    </FormItem>\n                                  )}\n                                />\n                                <Button \n                                  type=\"submit\" \n                                  disabled={submitAnswerMutation.isPending}\n                                  data-testid=\"button-submit-answer\"\n                                >\n                                  {submitAnswerMutation.isPending ? (\n                                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                                  ) : (\n                                    <Send className=\"h-4 w-4 mr-2\" />\n                                  )}\n                                  Enviar Resposta\n                                </Button>\n                              </form>\n                            </Form>\n                          )}\n\n                          {/* Answers List */}\n                          <Separator />\n                          <div className=\"space-y-3\">\n                            <h4 className=\"font-medium flex items-center gap-2\">\n                              <MessageCircle className=\"h-4 w-4\" />\n                              Respostas ({discussionDetails?.answers?.length || 0})\n                            </h4>\n                            \n                            {discussionDetails?.answers?.length === 0 ? (\n                              <div className=\"text-center py-6 text-muted-foreground\">\n                                <MessageCircle className=\"h-10 w-10 mx-auto mb-2 opacity-50\" />\n                                <p>Nenhuma resposta ainda</p>\n                                <p className=\"text-sm\">Seja o primeiro a compartilhar!</p>\n                              </div>\n                            ) : (\n                              <div className=\"space-y-3\">\n                                {discussionDetails?.answers?.map((answer) => (\n                                  <Card key={answer.id} className=\"p-4\">\n                                    <div className=\"flex items-start gap-3\">\n                                      <Avatar className=\"h-8 w-8\">\n                                        <AvatarImage src={answer.isAnonymous ? \"\" : (answer.user?.profileImageUrl || \"\")} />\n                                        <AvatarFallback>\n                                          {answer.isAnonymous ? \"?\" : (answer.user?.displayName?.charAt(0) || \"U\")}\n                                        </AvatarFallback>\n                                      </Avatar>\n                                      <div className=\"flex-1\">\n                                        <div className=\"flex items-center gap-2 mb-1\">\n                                          <span className=\"font-medium text-sm\">\n                                            {answer.isAnonymous ? \"Anônimo\" : (answer.user?.displayName || \"Membro\")}\n                                          </span>\n                                          <span className=\"text-xs text-muted-foreground\">\n                                            {formatDistanceToNow(new Date(answer.createdAt), { addSuffix: true, locale: ptBR })}\n                                          </span>\n                                          {answer.reviewStatus === \"excellent\" && (\n                                            <Badge variant=\"default\" className=\"text-xs\">\n                                              <Star className=\"h-3 w-3 mr-1\" />\n                                              Excelente\n                                            </Badge>\n                                          )}\n                                          {answer.reviewStatus === \"approved\" && (\n                                            <Badge variant=\"secondary\" className=\"text-xs\">\n                                              <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n                                              Aprovada\n                                            </Badge>\n                                          )}\n                                          {answer.reviewStatus === \"needs_review\" && (\n                                            <Badge variant=\"outline\" className=\"text-xs\">\n                                              <AlertCircle className=\"h-3 w-3 mr-1\" />\n                                              Revisar\n                                            </Badge>\n                                          )}\n                                        </div>\n                                        <p className=\"text-sm\">{answer.content}</p>\n                                        {answer.verseReference && (\n                                          <p className=\"text-xs text-primary mt-1 flex items-center gap-1\">\n                                            <BookOpen className=\"h-3 w-3\" />\n                                            {answer.verseReference}\n                                          </p>\n                                        )}\n                                        {answer.reviewComment && (\n                                          <p className=\"text-xs text-muted-foreground mt-2 italic bg-muted p-2 rounded\">\n                                            Comentário do líder: {answer.reviewComment}\n                                          </p>\n                                        )}\n                                        \n                                        {/* Leader Review Actions */}\n                                        {isLeaderOrMod && answer.reviewStatus === \"pending\" && (\n                                          <div className=\"flex gap-2 mt-2\">\n                                            <Button \n                                              size=\"sm\" \n                                              variant=\"outline\"\n                                              onClick={() => reviewAnswerMutation.mutate({ answerId: answer.id, status: \"excellent\" })}\n                                              data-testid={`button-review-excellent-${answer.id}`}\n                                            >\n                                              <Star className=\"h-3 w-3 mr-1\" />\n                                              Excelente\n                                            </Button>\n                                            <Button \n                                              size=\"sm\" \n                                              variant=\"outline\"\n                                              onClick={() => reviewAnswerMutation.mutate({ answerId: answer.id, status: \"approved\" })}\n                                              data-testid={`button-review-approve-${answer.id}`}\n                                            >\n                                              <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n                                              Aprovar\n                                            </Button>\n                                          </div>\n                                        )}\n                                      </div>\n                                    </div>\n                                  </Card>\n                                ))}\n                              </div>\n                            )}\n                          </div>\n\n                          {/* AI Synthesis */}\n                          {discussionDetails?.aiSynthesis && (\n                            <>\n                              <Separator />\n                              <div className=\"space-y-3\">\n                                <h4 className=\"font-medium flex items-center gap-2\">\n                                  <Sparkles className=\"h-4 w-4 text-primary\" />\n                                  Síntese da IA\n                                </h4>\n                                <div className=\"prose prose-sm max-w-none p-4 bg-muted/50 rounded-lg\">\n                                  <div className=\"whitespace-pre-wrap\">{discussionDetails.aiSynthesis}</div>\n                                </div>\n                              </div>\n                            </>\n                          )}\n\n                          {/* Leader Actions */}\n                          {isLeaderOrMod && discussionDetails?.status === \"open\" && (discussionDetails?.answers?.length || 0) >= 1 && (\n                            <div className=\"flex gap-2 pt-4\">\n                              <Button \n                                onClick={() => synthesizeMutation.mutate(selectedDiscussion.id)}\n                                disabled={isSynthesizing}\n                                data-testid=\"button-synthesize\"\n                              >\n                                {isSynthesizing ? (\n                                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                                ) : (\n                                  <Sparkles className=\"h-4 w-4 mr-2\" />\n                                )}\n                                Gerar Síntese com IA\n                              </Button>\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    </div>\n                  ) : (\n                    // Discussions List View\n                    <div className=\"space-y-4\">\n                      {isLeaderOrMod && (\n                        <div className=\"flex justify-end\">\n                          <Dialog open={isDiscussionDialogOpen} onOpenChange={setIsDiscussionDialogOpen}>\n                            <DialogTrigger asChild>\n                              <Button data-testid=\"button-new-discussion\">\n                                <Plus className=\"h-4 w-4 mr-2\" />\n                                Nova Discussão\n                              </Button>\n                            </DialogTrigger>\n                            <DialogContent className=\"max-w-lg\">\n                              <DialogHeader>\n                                <DialogTitle>Criar Discussão Estruturada</DialogTitle>\n                                <DialogDescription>\n                                  A IA vai gerar uma pergunta reflexiva baseada no tema e versículo\n                                </DialogDescription>\n                              </DialogHeader>\n                              <Form {...discussionForm}>\n                                <form onSubmit={discussionForm.handleSubmit((data) => createDiscussionMutation.mutate(data))} className=\"space-y-4\">\n                                  <FormField\n                                    control={discussionForm.control}\n                                    name=\"title\"\n                                    render={({ field }) => (\n                                      <FormItem>\n                                        <FormLabel>Tema da Discussão</FormLabel>\n                                        <FormControl>\n                                          <Input \n                                            placeholder=\"Ex: A importância da oração\" \n                                            data-testid=\"input-discussion-title\"\n                                            {...field}\n                                          />\n                                        </FormControl>\n                                        <FormMessage />\n                                      </FormItem>\n                                    )}\n                                  />\n                                  <FormField\n                                    control={discussionForm.control}\n                                    name=\"description\"\n                                    render={({ field }) => (\n                                      <FormItem>\n                                        <FormLabel>Descrição (opcional)</FormLabel>\n                                        <FormControl>\n                                          <Textarea \n                                            placeholder=\"Breve contexto para a discussão...\"\n                                            rows={2}\n                                            data-testid=\"input-discussion-description\"\n                                            {...field}\n                                          />\n                                        </FormControl>\n                                      </FormItem>\n                                    )}\n                                  />\n                                  <FormField\n                                    control={discussionForm.control}\n                                    name=\"verseReference\"\n                                    render={({ field }) => (\n                                      <FormItem>\n                                        <FormLabel>Referência Bíblica</FormLabel>\n                                        <FormControl>\n                                          <Input \n                                            placeholder=\"Ex: Mateus 6:5-15\" \n                                            data-testid=\"input-discussion-verse\"\n                                            {...field}\n                                          />\n                                        </FormControl>\n                                      </FormItem>\n                                    )}\n                                  />\n                                  <FormField\n                                    control={discussionForm.control}\n                                    name=\"verseText\"\n                                    render={({ field }) => (\n                                      <FormItem>\n                                        <FormLabel>Texto do Versículo (opcional)</FormLabel>\n                                        <FormControl>\n                                          <Textarea \n                                            placeholder=\"Cole aqui o texto do versículo...\"\n                                            rows={3}\n                                            data-testid=\"input-discussion-verse-text\"\n                                            {...field}\n                                          />\n                                        </FormControl>\n                                      </FormItem>\n                                    )}\n                                  />\n                                  <FormField\n                                    control={discussionForm.control}\n                                    name=\"useAI\"\n                                    render={({ field }) => (\n                                      <FormItem className=\"flex items-center gap-3 space-y-0 p-3 bg-muted rounded-lg\">\n                                        <FormControl>\n                                          <Switch\n                                            checked={field.value}\n                                            onCheckedChange={field.onChange}\n                                            data-testid=\"switch-use-ai\"\n                                          />\n                                        </FormControl>\n                                        <div className=\"flex-1\">\n                                          <FormLabel className=\"flex items-center gap-2 cursor-pointer\">\n                                            <Sparkles className=\"h-4 w-4 text-primary\" />\n                                            Gerar pergunta com IA\n                                          </FormLabel>\n                                          <p className=\"text-xs text-muted-foreground\">\n                                            A IA criará uma pergunta reflexiva baseada no tema\n                                          </p>\n                                        </div>\n                                      </FormItem>\n                                    )}\n                                  />\n                                  {!discussionForm.watch(\"useAI\") && (\n                                    <FormField\n                                      control={discussionForm.control}\n                                      name=\"question\"\n                                      render={({ field }) => (\n                                        <FormItem>\n                                          <FormLabel>Sua Pergunta</FormLabel>\n                                          <FormControl>\n                                            <Textarea \n                                              placeholder=\"Digite a pergunta para discussão...\"\n                                              rows={2}\n                                              data-testid=\"input-discussion-question\"\n                                              {...field}\n                                            />\n                                          </FormControl>\n                                          <FormMessage />\n                                        </FormItem>\n                                      )}\n                                    />\n                                  )}\n                                  <DialogFooter>\n                                    <Button \n                                      type=\"submit\" \n                                      disabled={createDiscussionMutation.isPending}\n                                      data-testid=\"button-create-discussion\"\n                                    >\n                                      {createDiscussionMutation.isPending ? (\n                                        <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                                      ) : (\n                                        <Sparkles className=\"h-4 w-4 mr-2\" />\n                                      )}\n                                      Criar Discussão\n                                    </Button>\n                                  </DialogFooter>\n                                </form>\n                              </Form>\n                            </DialogContent>\n                          </Dialog>\n                        </div>\n                      )}\n\n                      {loadingDiscussions ? (\n                        <div className=\"flex items-center justify-center py-12\">\n                          <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n                        </div>\n                      ) : groupDiscussions.length === 0 ? (\n                        <div className=\"text-center py-12 text-muted-foreground\">\n                          <GraduationCap className=\"h-16 w-16 mx-auto mb-4 opacity-50\" />\n                          <p className=\"text-lg\">Nenhuma discussão ainda</p>\n                          <p className=\"text-sm\">\n                            {isLeaderOrMod \n                              ? \"Crie uma discussão estruturada com IA\" \n                              : \"O líder do grupo pode criar discussões\"}\n                          </p>\n                        </div>\n                      ) : (\n                        <div className=\"space-y-3\">\n                          {groupDiscussions.map((discussion) => (\n                            <Card \n                              key={discussion.id} \n                              className=\"cursor-pointer hover-elevate\"\n                              onClick={() => setSelectedDiscussion(discussion)}\n                              data-testid={`discussion-${discussion.id}`}\n                            >\n                              <CardHeader className=\"pb-2\">\n                                <div className=\"flex items-start justify-between gap-2\">\n                                  <CardTitle className=\"text-base\">{discussion.title}</CardTitle>\n                                  <Badge variant={discussion.status === \"open\" ? \"default\" : discussion.status === \"synthesized\" ? \"secondary\" : \"outline\"}>\n                                    {discussion.status === \"open\" ? \"Aberta\" : discussion.status === \"synthesized\" ? \"Sintetizada\" : \"Encerrada\"}\n                                  </Badge>\n                                </div>\n                                {discussion.verseReference && (\n                                  <p className=\"text-sm text-primary flex items-center gap-1\">\n                                    <BookOpen className=\"h-3 w-3\" />\n                                    {discussion.verseReference}\n                                  </p>\n                                )}\n                              </CardHeader>\n                              <CardContent className=\"pt-0\">\n                                <p className=\"text-sm text-muted-foreground line-clamp-2\">{discussion.question}</p>\n                                <div className=\"flex items-center gap-4 mt-3 text-xs text-muted-foreground\">\n                                  <span className=\"flex items-center gap-1\">\n                                    <MessageCircle className=\"h-3 w-3\" />\n                                    {discussion.answers?.length || 0} respostas\n                                  </span>\n                                  <span>\n                                    {formatDistanceToNow(new Date(discussion.createdAt), { addSuffix: true, locale: ptBR })}\n                                  </span>\n                                  {discussion.aiSynthesis && (\n                                    <span className=\"flex items-center gap-1 text-primary\">\n                                      <Sparkles className=\"h-3 w-3\" />\n                                      Síntese disponível\n                                    </span>\n                                  )}\n                                </div>\n                              </CardContent>\n                            </Card>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </TabsContent>\n              </Tabs>\n            </CardContent>\n\n            <CardFooter className=\"justify-between\">\n              <div className=\"text-sm text-muted-foreground\">\n                {groupMembers.length} membro{groupMembers.length !== 1 ? \"s\" : \"\"}\n              </div>\n              {selectedGroup.role !== \"leader\" && (\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  onClick={() => leaveMutation.mutate(selectedGroup.id)}\n                  disabled={leaveMutation.isPending}\n                  data-testid=\"button-leave-group\"\n                >\n                  <LogOut className=\"h-4 w-4 mr-2\" />\n                  Sair do Grupo\n                </Button>\n              )}\n            </CardFooter>\n          </Card>\n        </div>\n\n        {/* Modal Nova/Editar Reunião - dentro do grupo */}\n        <Dialog open={isMeetingDialogOpen} onOpenChange={(open) => {\n          setIsMeetingDialogOpen(open);\n          if (!open) setEditingMeeting(null);\n        }}>\n          <DialogContent className=\"sm:max-w-[425px] rounded-2xl\">\n            <DialogHeader>\n              <DialogTitle>{editingMeeting ? \"Editar Reunião\" : \"Agendar Reunião\"}</DialogTitle>\n              <DialogDescription>\n                {editingMeeting ? \"Altere os detalhes da reunião selecionada.\" : \"Defina os detalhes do próximo encontro do grupo.\"}\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"grid gap-4 py-4\">\n              <div className=\"grid gap-2\">\n                <label className=\"text-sm font-medium\">Título</label>\n                <Input {...meetingForm.register(\"title\")} placeholder=\"Ex: Estudo de Romanos\" className=\"rounded-xl\" data-testid=\"input-meeting-title\" />\n              </div>\n              <div className=\"grid gap-2\">\n                <label className=\"text-sm font-medium\">Data e Hora</label>\n                <Input {...meetingForm.register(\"meetingDate\")} type=\"datetime-local\" className=\"rounded-xl\" data-testid=\"input-meeting-date\" />\n              </div>\n              <div className=\"grid gap-2\">\n                <label className=\"text-sm font-medium\">Local/Plataforma</label>\n                <Input {...meetingForm.register(\"location\")} placeholder=\"Ex: Casa do João ou Google Meet\" className=\"rounded-xl\" data-testid=\"input-meeting-location\" />\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Switch \n                  checked={meetingForm.watch(\"isOnline\")} \n                  onCheckedChange={(checked) => meetingForm.setValue(\"isOnline\", checked)} \n                  data-testid=\"switch-meeting-online\"\n                />\n                <label className=\"text-sm font-medium\">Reunião Online</label>\n              </div>\n              {meetingForm.watch(\"isOnline\") && (\n                <div className=\"grid gap-2\">\n                  <label className=\"text-sm font-medium\">Link da Reunião</label>\n                  <Input {...meetingForm.register(\"meetingLink\")} placeholder=\"https://meet.google.com/...\" className=\"rounded-xl\" data-testid=\"input-meeting-link\" />\n                </div>\n              )}\n            </div>\n            <DialogFooter>\n              <Button \n                onClick={meetingForm.handleSubmit((data) => {\n                  if (editingMeeting) {\n                    updateMeetingMutation.mutate(data);\n                  } else {\n                    createMeetingMutation.mutate(data);\n                  }\n                })} \n                className=\"rounded-xl w-full\"\n                disabled={createMeetingMutation.isPending || updateMeetingMutation.isPending}\n                data-testid=\"button-save-meeting\"\n              >\n                {(createMeetingMutation.isPending || updateMeetingMutation.isPending) ? (\n                  <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                ) : (\n                  editingMeeting ? <Check className=\"h-4 w-4 mr-2\" /> : <CalendarIcon className=\"h-4 w-4 mr-2\" />\n                )}\n                {editingMeeting ? \"Salvar Alterações\" : \"Agendar Reunião\"}\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n\n        {/* Modal Confirmação de Exclusão de Reunião */}\n        <Dialog open={isMeetingDeleteDialogOpen} onOpenChange={setIsMeetingDeleteDialogOpen}>\n          <DialogContent className=\"sm:max-w-[425px] rounded-2xl\">\n            <DialogHeader>\n              <DialogTitle className=\"text-destructive\">Excluir Reunião?</DialogTitle>\n              <DialogDescription>\n                Esta ação não pode ser desfeita. A reunião será removida permanentemente da agenda do grupo.\n              </DialogDescription>\n            </DialogHeader>\n            <DialogFooter className=\"flex gap-2\">\n              <Button \n                variant=\"outline\" \n                onClick={() => setIsMeetingDeleteDialogOpen(false)}\n                className=\"rounded-xl flex-1\"\n              >\n                Cancelar\n              </Button>\n              <Button \n                variant=\"destructive\" \n                onClick={() => meetingToDelete && deleteMeetingMutation.mutate(meetingToDelete)}\n                disabled={deleteMeetingMutation.isPending}\n                className=\"rounded-xl flex-1\"\n              >\n                {deleteMeetingMutation.isPending ? <Loader2 className=\"h-4 w-4 animate-spin mr-2\" /> : <Trash2 className=\"h-4 w-4 mr-2\" />}\n                Confirmar Exclusão\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n\n        {/* Modal Novo Recurso - dentro do grupo */}\n        <Dialog open={isResourceDialogOpen} onOpenChange={setIsResourceDialogOpen}>\n          <DialogContent className=\"sm:max-w-[425px] rounded-2xl\">\n            <DialogHeader>\n              <DialogTitle>Adicionar Recurso</DialogTitle>\n              <DialogDescription>Compartilhe materiais úteis com o grupo.</DialogDescription>\n            </DialogHeader>\n            <div className=\"grid gap-4 py-4\">\n              <div className=\"grid gap-2\">\n                <label className=\"text-sm font-medium\">Título</label>\n                <Input {...resourceForm.register(\"title\")} placeholder=\"Ex: PDF do Estudo\" className=\"rounded-xl\" data-testid=\"input-resource-title\" />\n              </div>\n              <div className=\"grid gap-2\">\n                <label className=\"text-sm font-medium\">Descrição</label>\n                <Textarea {...resourceForm.register(\"description\")} placeholder=\"Do que se trata este material?\" className=\"rounded-xl\" data-testid=\"input-resource-description\" />\n              </div>\n              <div className=\"grid gap-2\">\n                <label className=\"text-sm font-medium\">URL / Link</label>\n                <Input {...resourceForm.register(\"url\")} placeholder=\"https://...\" className=\"rounded-xl\" data-testid=\"input-resource-url\" />\n              </div>\n            </div>\n            <DialogFooter>\n              <Button \n                onClick={resourceForm.handleSubmit((data) => createResourceMutation.mutate(data))} \n                className=\"rounded-xl w-full\"\n                disabled={createResourceMutation.isPending}\n                data-testid=\"button-save-resource\"\n              >\n                {createResourceMutation.isPending ? <Loader2 className=\"h-4 w-4 animate-spin mr-2\" /> : <LinkIcon className=\"h-4 w-4 mr-2\" />}\n                Adicionar Recurso\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </div>\n    );\n  }\n\n  if (isLoading && allGroups.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-b from-background via-background/95 to-background/90\">\n        <div className=\"flex items-center justify-center py-20\">\n          <div className=\"text-center space-y-4\">\n            <div className=\"relative\">\n              <Loader2 className=\"h-12 w-12 animate-spin text-primary mx-auto\" />\n              <div className=\"absolute inset-0 blur-xl bg-primary/20 animate-pulse rounded-full\" />\n            </div>\n            <p className=\"text-muted-foreground font-medium animate-pulse tracking-wide\">Preparando seus grupos...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background relative mesh-primary\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"relative z-10 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-10 space-y-10\">\n        <motion.div \n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center space-y-2\"\n        >\n          <p className=\"text-[10px] font-semibold text-primary uppercase tracking-[0.2em]\">COMUNIDADE</p>\n          <h1 className=\"font-display text-xl sm:text-2xl font-bold text-foreground\" data-testid=\"text-page-title\">\n            Grupos de Estudo\n          </h1>\n          <p className=\"text-sm text-muted-foreground\">\n            Compartilhe sua fé e cresça em conhecimento bíblico com sua comunidade\n          </p>\n        </motion.div>\n        \n        <div className=\"flex flex-col sm:flex-row items-center justify-center gap-3\">\n            <Button \n              variant=\"outline\" \n              size=\"lg\" \n              onClick={() => setIsJoinByCodeDialogOpen(true)}\n              className=\"rounded-2xl h-14 px-8 border-primary/20  hover:border-primary/40 transition-all font-bold flex-1 sm:flex-none shadow-sm\" \n              data-testid=\"button-use-code\"\n            >\n              <UserPlus className=\"h-5 w-5 mr-2.5 text-primary\" />\n              Usar Código\n            </Button>\n\n            <Button \n              size=\"lg\" \n              onClick={() => setIsCreateDialogOpen(true)}\n              className=\"rounded-2xl h-14 px-8 font-bold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all flex-1 sm:flex-none\" \n              data-testid=\"button-create-group\"\n            >\n              <Plus className=\"h-5 w-5 mr-2.5\" />\n              Criar Grupo\n            </Button>\n        </div>\n\n        <Tabs defaultValue=\"my-groups\" className=\"space-y-8\">\n          <div className=\"overflow-x-auto scrollbar-hide\">\n            <TabsList className=\"inline-flex w-max min-w-full bg-muted/30 p-1.5 rounded-2xl border border-primary/5\">\n              <TabsTrigger \n                value=\"my-groups\" \n                className=\"rounded-xl px-4 sm:px-8 py-2.5 data-[state=active]:bg-background data-[state=active]:shadow-lg font-bold transition-all whitespace-nowrap text-sm\"\n                data-testid=\"tab-my-groups\"\n              >\n                Meus Grupos ({myGroups.length})\n              </TabsTrigger>\n              <TabsTrigger \n                value=\"discover\" \n                className=\"rounded-xl px-4 sm:px-8 py-2.5 data-[state=active]:bg-background data-[state=active]:shadow-lg font-bold transition-all whitespace-nowrap text-sm\"\n                data-testid=\"tab-discover\"\n              >\n                Descobrir Novos Grupos ({publicGroups.length})\n              </TabsTrigger>\n            </TabsList>\n          </div>\n\n          <TabsContent value=\"my-groups\" className=\"mt-0\">\n            {myGroups.length === 0 ? (\n              <motion.div\n                initial={{ opacity: 0, scale: 0.95 }}\n                animate={{ opacity: 1, scale: 1 }}\n              >\n                <Card className=\"border-none glass-premium hover-premium rounded-3xl ring-2 ring-primary/10\">\n                  <CardContent className=\"flex flex-col items-center justify-center py-20 text-center\">\n                    <div className=\"flex h-24 w-24 items-center justify-center rounded-3xl bg-primary/10 mb-6 rotate-3\">\n                      <Users className=\"h-10 w-10 text-primary\" />\n                    </div>\n                    <h3 className=\"font-bold text-2xl text-foreground mb-3\">Sua jornada começa aqui</h3>\n                    <p className=\"text-muted-foreground mb-8 max-w-sm font-medium\">\n                      Você ainda não participa de nenhum grupo. Comece criando o seu ou explorando comunidades existentes.\n                    </p>\n                    <Button \n                      size=\"lg\"\n                      className=\"rounded-2xl h-14 px-10 font-bold shadow-lg shadow-primary/20\"\n                      onClick={() => setIsCreateDialogOpen(true)} \n                      data-testid=\"button-create-first-group\"\n                    >\n                      <Plus className=\"h-5 w-5 mr-2.5\" />\n                      Criar Primeiro Grupo\n                    </Button>\n                  </CardContent>\n                </Card>\n              </motion.div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {myGroups.map((group, index) => (\n                  <motion.div\n                    key={group.id}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: index * 0.1 }}\n                  >\n                    <Card \n                      className=\"group relative overflow-hidden border-none bg-card/40 backdrop-blur-sm hover:bg-card/60 shadow-lg hover:shadow-2xl transition-all duration-500 rounded-3xl cursor-pointer\"\n                      onClick={(e) => {\n                        // Prevent navigation if clicking the menu\n                        if ((e.target as HTMLElement).closest('[data-group-menu]')) return;\n                        setSelectedGroup(group);\n                      }} \n                      data-testid={`card-group-${group.id}`}\n                    >\n                      <div className=\"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-primary/80 to-primary/20 opacity-0 group-hover:opacity-100 transition-opacity\" />\n                      <CardHeader className=\"pb-4\">\n                        <div className=\"flex justify-between items-start gap-2 mb-4 flex-wrap\">\n                          <div className=\"p-3.5 rounded-2xl bg-primary/5 group- transition-colors\">\n                            <Users className=\"h-7 w-7 text-primary\" />\n                          </div>\n                          <div className=\"flex flex-col items-end gap-2\" data-group-menu>\n                            <Badge variant=\"secondary\" className=\"bg-amber-500/10 text-amber-600 border-amber-200 rounded-xl px-3 py-1 text-[10px] font-bold uppercase tracking-wider\">\n                              {group.role === \"leader\" ? (\n                                <><Crown className=\"h-3 w-3 mr-1 text-amber-500\" /> Líder</>\n                              ) : \"Membro\"}\n                            </Badge>\n                            <div className=\"relative\">\n                              <DropdownMenu>\n                                <DropdownMenuTrigger asChild>\n                                  <Button \n                                    variant=\"ghost\" \n                                    size=\"icon\" \n                                    className=\"rounded-full\"\n                                    onClick={(e) => {\n                                      e.stopPropagation();\n                                    }}\n                                    data-testid=\"button-group-options\"\n                                  >\n                                    <MoreVertical className=\"h-4 w-4\" />\n                                  </Button>\n                                </DropdownMenuTrigger>\n                                <DropdownMenuContent align=\"end\" className=\"rounded-xl border-0 shadow-2xl\">\n                                  {group.role === \"leader\" && (\n                                    <>\n                                      <DropdownMenuItem \n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          setGroupForAction(group);\n                                          setIsGridEditDialogOpen(true);\n                                        }}\n                                        className=\"gap-2 cursor-pointer focus:bg-primary/5 rounded-lg\"\n                                      >\n                                        <Settings className=\"h-4 w-4\" />\n                                        Editar Grupo\n                                      </DropdownMenuItem>\n                                      <DropdownMenuItem \n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          setGroupForAction(group);\n                                          setIsGridDeleteDialogOpen(true);\n                                        }}\n                                        className=\"gap-2 cursor-pointer focus:bg-destructive/5 text-destructive focus:text-destructive rounded-lg\"\n                                      >\n                                        <LogOut className=\"h-4 w-4\" />\n                                        Excluir Grupo\n                                      </DropdownMenuItem>\n                                    </>\n                                  )}\n                                  <DropdownMenuItem \n                                    onClick={(e) => {\n                                      e.stopPropagation();\n                                      setSelectedGroup(group);\n                                    }}\n                                    className=\"gap-2 cursor-pointer focus:bg-primary/5 rounded-lg\"\n                                  >\n                                    <ChevronRight className=\"h-4 w-4\" />\n                                    Ver Grupo\n                                  </DropdownMenuItem>\n                                </DropdownMenuContent>\n                              </DropdownMenu>\n                            </div>\n                          </div>\n                        </div>\n                        <CardTitle className=\"text-2xl font-bold group-hover:text-primary transition-colors leading-tight\">\n                          {group.name}\n                        </CardTitle>\n                        <CardDescription className=\"line-clamp-2 text-sm font-medium leading-relaxed mt-2 text-muted-foreground/80\">\n                          {group.description || \"Nenhuma descrição fornecida para este grupo.\"}\n                        </CardDescription>\n                      </CardHeader>\n                      <CardFooter className=\"pt-4 border-t border-primary/5 flex items-center justify-between\">\n                        <div className=\"flex items-center gap-1.5 text-xs font-bold text-primary/60 uppercase tracking-widest\">\n                          {group.isPublic ? (\n                            <><Globe className=\"h-3.5 w-3.5\" /> Público</>\n                          ) : (\n                            <><Lock className=\"h-3.5 w-3.5\" /> Privado</>\n                          )}\n                        </div>\n                        <div className=\"flex items-center gap-1.5 text-primary font-bold text-sm group-hover:translate-x-1 transition-transform\">\n                          Acessar <ChevronRight className=\"h-4 w-4\" />\n                        </div>\n                      </CardFooter>\n                    </Card>\n                  </motion.div>\n                ))}\n              </div>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"discover\" className=\"mt-0\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {publicGroups.map((group, index) => (\n                <motion.div\n                  key={group.id}\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: index * 0.1 }}\n                >\n                  <Card className=\"group border-none glass-premium hover-premium rounded-3xl ring-2 ring-primary/10 hover:ring-primary/30 transition-all duration-500 overflow-hidden\">\n                    <CardHeader className=\"pb-4\">\n                      <div className=\"p-3.5 rounded-2xl bg-blue-500/5 group-hover:bg-blue-500/10 transition-colors w-fit mb-4\">\n                        <Globe className=\"h-7 w-7 text-blue-500\" />\n                      </div>\n                      <CardTitle className=\"text-2xl font-bold\">{group.name}</CardTitle>\n                      <CardDescription className=\"line-clamp-2 min-h-[3rem] mt-2 text-sm font-medium text-muted-foreground/80\">\n                        {group.description}\n                      </CardDescription>\n                    </CardHeader>\n                    <CardFooter className=\"bg-primary/5 p-5 group- transition-colors\">\n                      {!user ? (\n                        <Link href=\"/login\">\n                          <Button className=\"w-full rounded-2xl font-bold h-12 shadow-md shadow-primary/10\">\n                            Entrar para participar\n                          </Button>\n                        </Link>\n                      ) : myGroupIds.has(group.id) ? (\n                        <Button \n                          className=\"w-full rounded-2xl font-bold h-12 shadow-md shadow-primary/10\"\n                          variant=\"outline\"\n                          onClick={() => setSelectedGroup(group)}\n                        >\n                          <CheckCircle2 className=\"mr-2 h-5 w-5\" /> Já é membro\n                        </Button>\n                      ) : (\n                        <Button \n                          className=\"w-full rounded-2xl font-bold h-12 shadow-md shadow-primary/10\"\n                          onClick={() => joinMutation.mutate(group.id)}\n                          disabled={joinMutation.isPending}\n                        >\n                          {joinMutation.isPending ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : \"Participar agora\"}\n                        </Button>\n                      )}\n                    </CardFooter>\n                  </Card>\n                </motion.div>\n              ))}\n            </div>\n          </TabsContent>\n        </Tabs>\n      </div>\n\n      {/* Join by Code Dialog */}\n      <Dialog open={isJoinByCodeDialogOpen} onOpenChange={setIsJoinByCodeDialogOpen}>\n        <DialogContent className=\"rounded-3xl border-none shadow-2xl\">\n          <DialogHeader>\n            <div className=\"p-3 rounded-2xl bg-primary/10 w-fit mb-4\">\n              <UserPlus className=\"h-6 w-6 text-primary\" />\n            </div>\n            <DialogTitle className=\"text-2xl font-bold\">Usar Código de Convite</DialogTitle>\n            <DialogDescription className=\"text-base\">\n              Digite o código que você recebeu para entrar em um grupo privado\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <Input \n              placeholder=\"Digite o código (ex: ABC12345)\"\n              value={inviteCode}\n              onChange={(e) => setInviteCode(e.target.value.toUpperCase())}\n              className=\"h-14 font-mono text-center text-xl rounded-2xl bg-muted/50 border-primary/10 focus-visible:ring-primary tracking-widest\"\n              data-testid=\"input-invite-code\"\n            />\n          </div>\n          <DialogFooter className=\"gap-3 sm:gap-0\">\n            <Button \n              variant=\"outline\" \n              className=\"rounded-xl\"\n              onClick={() => {\n                setIsJoinByCodeDialogOpen(false);\n                setInviteCode(\"\");\n              }}\n            >\n              Cancelar\n            </Button>\n            <Button \n              onClick={() => acceptInviteMutation.mutate(inviteCode)}\n              disabled={!inviteCode || acceptInviteMutation.isPending}\n              className=\"rounded-xl font-bold shadow-lg shadow-primary/20\"\n              data-testid=\"button-accept-invite\"\n            >\n              {acceptInviteMutation.isPending ? (\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n              ) : (\n                <Check className=\"h-4 w-4 mr-2\" />\n              )}\n              Entrar no Grupo\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Create Group Dialog */}\n      <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n        <DialogContent className=\"rounded-3xl border-none shadow-2xl max-w-xl\">\n          <DialogHeader>\n            <div className=\"p-3 rounded-2xl bg-primary/10 w-fit mb-4\">\n              <Plus className=\"h-6 w-6 text-primary\" />\n            </div>\n            <DialogTitle className=\"text-3xl font-bold\">Novo Grupo</DialogTitle>\n            <DialogDescription className=\"text-base\">\n              Crie um ambiente seguro para compartilhar conhecimento bíblico.\n            </DialogDescription>\n          </DialogHeader>\n          \n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6 pt-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"font-bold text-sm\">Nome do Grupo</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Ex: Jovens em Cristo\" \n                        className=\"h-14 rounded-2xl bg-muted/50 border-primary/10 focus-visible:ring-primary text-lg\"\n                        data-testid=\"input-group-name\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"font-bold text-sm\">Descrição</FormLabel>\n                    <FormControl>\n                      <Textarea \n                        placeholder=\"Qual o objetivo principal deste grupo?\" \n                        rows={3}\n                        className=\"rounded-2xl bg-muted/50 border-primary/10 focus-visible:ring-primary resize-none p-4\"\n                        data-testid=\"textarea-group-description\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"isPublic\"\n                render={({ field }) => (\n                  <FormItem className=\"flex items-center justify-between p-4 rounded-2xl bg-muted/30 border border-primary/5\">\n                    <div className=\"space-y-0.5\">\n                      <FormLabel className=\"font-bold text-base flex items-center gap-2\">\n                        <Globe className=\"h-4 w-4 text-primary\" />\n                        Grupo Público\n                      </FormLabel>\n                      <p className=\"text-xs text-muted-foreground font-medium\">Outras pessoas poderão encontrar e entrar no grupo</p>\n                    </div>\n                    <FormControl>\n                      <Switch\n                        checked={field.value}\n                        onCheckedChange={field.onChange}\n                        data-testid=\"switch-is-public\"\n                      />\n                    </FormControl>\n                  </FormItem>\n                )}\n              />\n              <DialogFooter className=\"pt-4\">\n                <Button \n                  type=\"submit\" \n                  disabled={createMutation.isPending}\n                  className=\"w-full h-14 rounded-2xl font-bold text-lg shadow-lg shadow-primary/20\"\n                  data-testid=\"button-save-group\"\n                >\n                  {createMutation.isPending ? (\n                    <Loader2 className=\"h-5 w-5 mr-2 animate-spin\" />\n                  ) : (\n                    <Check className=\"h-5 w-5 mr-2\" />\n                  )}\n                  Criar Comunidade\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Grid Edit Dialog */}\n      <Dialog open={isGridEditDialogOpen} onOpenChange={(open) => {\n        setIsGridEditDialogOpen(open);\n        if (!open) setGroupForAction(null);\n      }}>\n        <DialogContent className=\"rounded-[2rem] border-0 shadow-2xl\">\n          <DialogHeader>\n            <DialogTitle className=\"text-2xl font-display font-bold\">Editar Grupo</DialogTitle>\n          </DialogHeader>\n          <Form {...gridEditForm}>\n            <form onSubmit={gridEditForm.handleSubmit((data) => gridUpdateMutation.mutate(data))} className=\"space-y-4\">\n              <FormField\n                control={gridEditForm.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nome do Grupo</FormLabel>\n                    <FormControl>\n                      <Input {...field} data-testid=\"input-grid-edit-name\" className=\"rounded-xl h-12\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={gridEditForm.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Descrição</FormLabel>\n                    <FormControl>\n                      <Textarea {...field} data-testid=\"input-grid-edit-description\" className=\"rounded-xl min-h-[100px]\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={gridEditForm.control}\n                name=\"isPublic\"\n                render={({ field }) => (\n                  <FormItem className=\"flex items-center justify-between rounded-xl border p-4 bg-muted/30\">\n                    <div className=\"space-y-0.5\">\n                      <FormLabel className=\"text-base\">Grupo Público</FormLabel>\n                      <FormDescription>Visível para toda a comunidade.</FormDescription>\n                    </div>\n                    <FormControl>\n                      <Switch checked={field.value} onCheckedChange={field.onChange} data-testid=\"switch-grid-edit-public\" />\n                    </FormControl>\n                  </FormItem>\n                )}\n              />\n              <DialogFooter>\n                <Button type=\"submit\" disabled={gridUpdateMutation.isPending} data-testid=\"button-grid-save-group\" className=\"rounded-xl h-12 w-full font-bold\">\n                  {gridUpdateMutation.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n                  Salvar Alterações\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Grid Delete Dialog */}\n      <Dialog open={isGridDeleteDialogOpen} onOpenChange={(open) => {\n        setIsGridDeleteDialogOpen(open);\n        if (!open) setGroupForAction(null);\n      }}>\n        <DialogContent className=\"rounded-[2rem] border-0 shadow-2xl\">\n          <DialogHeader>\n            <DialogTitle className=\"text-2xl font-display font-bold text-destructive\">Excluir Grupo?</DialogTitle>\n            <DialogDescription className=\"text-base pt-2\">\n              Esta ação não pode ser desfeita. Todas as mensagens e dados do grupo \"{groupForAction?.name}\" serão perdidos para sempre.\n            </DialogDescription>\n          </DialogHeader>\n          <DialogFooter className=\"flex flex-col sm:flex-row gap-3 mt-4\">\n            <Button variant=\"outline\" onClick={() => setIsGridDeleteDialogOpen(false)} data-testid=\"button-grid-cancel-delete\" className=\"rounded-xl h-12 flex-1 order-2 sm:order-1\">Cancelar</Button>\n            <Button variant=\"destructive\" onClick={() => gridDeleteMutation.mutate()} disabled={gridDeleteMutation.isPending} data-testid=\"button-grid-confirm-delete\" className=\"rounded-xl h-12 flex-1 order-1 sm:order-2 font-bold\">\n              {gridDeleteMutation.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n              Confirmar Exclusão\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","path":null,"size_bytes":132327,"size_tokens":null},"client/src/pages/version-compare.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { \n  BookOpen, \n  Columns,\n  ChevronLeft,\n  ChevronRight,\n  Loader2\n} from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useOffline } from \"@/contexts/OfflineContext\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { apiFetch } from \"@/lib/config\";\n\n// Multilingual Bible Books\nconst BIBLE_BOOKS = {\n  pt: [\n  \"Gênesis\", \"Êxodo\", \"Levítico\", \"Números\", \"Deuteronômio\",\n  \"Josué\", \"Juízes\", \"Rute\", \"1 Samuel\", \"2 Samuel\",\n  \"1 Reis\", \"2 Reis\", \"1 Crônicas\", \"2 Crônicas\", \"Esdras\",\n  \"Neemias\", \"Ester\", \"Jó\", \"Salmos\", \"Provérbios\",\n  \"Eclesiastes\", \"Cantares\", \"Isaías\", \"Jeremias\", \"Lamentações\",\n  \"Ezequiel\", \"Daniel\", \"Oséias\", \"Joel\", \"Amós\",\n  \"Obadias\", \"Jonas\", \"Miquéias\", \"Naum\", \"Habacuque\",\n  \"Sofonias\", \"Ageu\", \"Zacarias\", \"Malaquias\",\n  \"Mateus\", \"Marcos\", \"Lucas\", \"João\", \"Atos\",\n  \"Romanos\", \"1 Coríntios\", \"2 Coríntios\", \"Gálatas\", \"Efésios\",\n  \"Filipenses\", \"Colossenses\", \"1 Tessalonicenses\", \"2 Tessalonicenses\", \"1 Timóteo\",\n  \"2 Timóteo\", \"Tito\", \"Filemom\", \"Hebreus\", \"Tiago\",\n  \"1 Pedro\", \"2 Pedro\", \"1 João\", \"2 João\", \"3 João\",\n  \"Judas\", \"Apocalipse\"\n  ],\n  en: [\n  \"Genesis\", \"Exodus\", \"Leviticus\", \"Numbers\", \"Deuteronomy\",\n  \"Joshua\", \"Judges\", \"Ruth\", \"1 Samuel\", \"2 Samuel\",\n  \"1 Kings\", \"2 Kings\", \"1 Chronicles\", \"2 Chronicles\", \"Ezra\",\n  \"Nehemiah\", \"Esther\", \"Job\", \"Psalms\", \"Proverbs\",\n  \"Ecclesiastes\", \"Song of Songs\", \"Isaiah\", \"Jeremiah\", \"Lamentations\",\n  \"Ezekiel\", \"Daniel\", \"Hosea\", \"Joel\", \"Amos\",\n  \"Obadiah\", \"Jonah\", \"Micah\", \"Nahum\", \"Habakkuk\",\n  \"Zephaniah\", \"Haggai\", \"Zechariah\", \"Malachi\",\n  \"Matthew\", \"Mark\", \"Luke\", \"John\", \"Acts\",\n  \"Romans\", \"1 Corinthians\", \"2 Corinthians\", \"Galatians\", \"Ephesians\",\n  \"Philippians\", \"Colossians\", \"1 Thessalonians\", \"2 Thessalonians\", \"1 Timothy\",\n  \"2 Timothy\", \"Titus\", \"Philemon\", \"Hebrews\", \"James\",\n  \"1 Peter\", \"2 Peter\", \"1 John\", \"2 John\", \"3 John\",\n  \"Jude\", \"Revelation\"\n  ],\n  nl: [\n  \"Genesis\", \"Exodus\", \"Leviticus\", \"Numeri\", \"Deuteronomium\",\n  \"Jozua\", \"Richteren\", \"Ruth\", \"1 Samuel\", \"2 Samuel\",\n  \"1 Koningen\", \"2 Koningen\", \"1 Kronieken\", \"2 Kronieken\", \"Ezra\",\n  \"Nehemia\", \"Esther\", \"Job\", \"Psalmen\", \"Spreuken\",\n  \"Prediker\", \"Hooglied\", \"Jesaja\", \"Jeremia\", \"Klaagliederen\",\n  \"Ezechiël\", \"Daniël\", \"Hosea\", \"Joël\", \"Amos\",\n  \"Obadja\", \"Jona\", \"Micha\", \"Nahum\", \"Habakuk\",\n  \"Zefanja\", \"Haggaï\", \"Zacharia\", \"Maleachi\",\n  \"Mattheus\", \"Markus\", \"Lukas\", \"Johannes\", \"Handelingen\",\n  \"Romeinen\", \"1 Corinthiërs\", \"2 Corinthiërs\", \"Galaten\", \"Efeziërs\",\n  \"Filippenzen\", \"Colossenzen\", \"1 Thessalonicenzen\", \"2 Thessalonicenzen\", \"1 Timoteüs\",\n  \"2 Timoteüs\", \"Titus\", \"Filemon\", \"Hebreeën\", \"Jakobus\",\n  \"1 Petrus\", \"2 Petrus\", \"1 Johannes\", \"2 Johannes\", \"3 Johannes\",\n  \"Judas\", \"Openbaring\"\n  ],\n  es: [\n  \"Génesis\", \"Éxodo\", \"Levítico\", \"Números\", \"Deuteronomio\",\n  \"Josué\", \"Jueces\", \"Rut\", \"1 Samuel\", \"2 Samuel\",\n  \"1 Reyes\", \"2 Reyes\", \"1 Crónicas\", \"2 Crónicas\", \"Esdras\",\n  \"Nehemías\", \"Ester\", \"Job\", \"Salmos\", \"Proverbios\",\n  \"Eclesiastés\", \"Cantar de los Cantares\", \"Isaías\", \"Jeremías\", \"Lamentaciones\",\n  \"Ezequiel\", \"Daniel\", \"Oseas\", \"Joel\", \"Amós\",\n  \"Abdías\", \"Jonás\", \"Miqueas\", \"Nahúm\", \"Habacuc\",\n  \"Sofonías\", \"Ageo\", \"Zacarías\", \"Malaquías\",\n  \"Mateo\", \"Marcos\", \"Lucas\", \"Juan\", \"Hechos\",\n  \"Romanos\", \"1 Corintios\", \"2 Corintios\", \"Gálatas\", \"Efesios\",\n  \"Filipenses\", \"Colosenses\", \"1 Tesalonicenses\", \"2 Tesalonicenses\", \"1 Timoteo\",\n  \"2 Timoteo\", \"Tito\", \"Filemón\", \"Hebreos\", \"Santiago\",\n  \"1 Pedro\", \"2 Pedro\", \"1 Juan\", \"2 Juan\", \"3 Juan\",\n  \"Judas\", \"Apocalipsis\"\n  ]\n};\n\n// Map book names to SQLite abbreviations (universal for all languages)\nconst bookNameToAbbrev: { [lang: string]: { [key: string]: string } } = {\n  pt: {\n  \"Gênesis\": \"gn\", \"Êxodo\": \"ex\", \"Levítico\": \"lv\", \"Números\": \"nm\", \"Deuteronômio\": \"dt\",\n  \"Josué\": \"js\", \"Juízes\": \"jz\", \"Rute\": \"rt\", \"1 Samuel\": \"1sm\", \"2 Samuel\": \"2sm\",\n  \"1 Reis\": \"1rs\", \"2 Reis\": \"2rs\", \"1 Crônicas\": \"1cr\", \"2 Crônicas\": \"2cr\", \"Esdras\": \"esd\",\n  \"Neemias\": \"ne\", \"Ester\": \"et\", \"Jó\": \"jó\", \"Salmos\": \"sl\", \"Provérbios\": \"pv\",\n  \"Eclesiastes\": \"ec\", \"Cantares\": \"ct\", \"Isaías\": \"is\", \"Jeremias\": \"jr\", \"Lamentações\": \"lm\",\n  \"Ezequiel\": \"ez\", \"Daniel\": \"dn\", \"Oséias\": \"os\", \"Joel\": \"jl\", \"Amós\": \"am\",\n  \"Obadias\": \"ob\", \"Jonas\": \"jn\", \"Miquéias\": \"mq\", \"Naum\": \"na\", \"Habacuque\": \"hc\",\n  \"Sofonias\": \"sf\", \"Ageu\": \"ag\", \"Zacarias\": \"zc\", \"Malaquias\": \"ml\",\n  \"Mateus\": \"mt\", \"Marcos\": \"mc\", \"Lucas\": \"lc\", \"João\": \"jo\", \"Atos\": \"at\",\n  \"Romanos\": \"rm\", \"1 Coríntios\": \"1co\", \"2 Coríntios\": \"2co\", \"Gálatas\": \"gl\", \"Efésios\": \"ef\",\n  \"Filipenses\": \"fp\", \"Colossenses\": \"cl\", \"1 Tessalonicenses\": \"1ts\", \"2 Tessalonicenses\": \"2ts\", \"1 Timóteo\": \"1tm\",\n  \"2 Timóteo\": \"2tm\", \"Tito\": \"tt\", \"Filemom\": \"fm\", \"Hebreus\": \"hb\", \"Tiago\": \"tg\",\n  \"1 Pedro\": \"1pd\", \"2 Pedro\": \"2pd\", \"1 João\": \"1jo\", \"2 João\": \"2jo\", \"3 João\": \"3jo\",\n  \"Judas\": \"jd\", \"Apocalipse\": \"ap\"\n  },\n  en: {\n  \"Genesis\": \"gn\", \"Exodus\": \"ex\", \"Leviticus\": \"lv\", \"Numbers\": \"nm\", \"Deuteronomy\": \"dt\",\n  \"Joshua\": \"js\", \"Judges\": \"jz\", \"Ruth\": \"rt\", \"1 Samuel\": \"1sm\", \"2 Samuel\": \"2sm\",\n  \"1 Kings\": \"1rs\", \"2 Kings\": \"2rs\", \"1 Chronicles\": \"1cr\", \"2 Chronicles\": \"2cr\", \"Ezra\": \"esd\",\n  \"Nehemiah\": \"ne\", \"Esther\": \"et\", \"Job\": \"jó\", \"Psalms\": \"sl\", \"Proverbs\": \"pv\",\n  \"Ecclesiastes\": \"ec\", \"Song of Songs\": \"ct\", \"Isaiah\": \"is\", \"Jeremiah\": \"jr\", \"Lamentations\": \"lm\",\n  \"Ezekiel\": \"ez\", \"Daniel\": \"dn\", \"Hosea\": \"os\", \"Joel\": \"jl\", \"Amos\": \"am\",\n  \"Obadiah\": \"ob\", \"Jonah\": \"jn\", \"Micah\": \"mq\", \"Nahum\": \"na\", \"Habakkuk\": \"hc\",\n  \"Zephaniah\": \"sf\", \"Haggai\": \"ag\", \"Zechariah\": \"zc\", \"Malachi\": \"ml\",\n  \"Matthew\": \"mt\", \"Mark\": \"mc\", \"Luke\": \"lc\", \"John\": \"jo\", \"Acts\": \"at\",\n  \"Romans\": \"rm\", \"1 Corinthians\": \"1co\", \"2 Corinthians\": \"2co\", \"Galatians\": \"gl\", \"Ephesians\": \"ef\",\n  \"Philippians\": \"fp\", \"Colossians\": \"cl\", \"1 Thessalonians\": \"1ts\", \"2 Thessalonians\": \"2ts\", \"1 Timothy\": \"1tm\",\n  \"2 Timothy\": \"2tm\", \"Titus\": \"tt\", \"Philemon\": \"fm\", \"Hebrews\": \"hb\", \"James\": \"tg\",\n  \"1 Peter\": \"1pd\", \"2 Peter\": \"2pd\", \"1 John\": \"1jo\", \"2 John\": \"2jo\", \"3 John\": \"3jo\",\n  \"Jude\": \"jd\", \"Revelation\": \"ap\"\n  },\n  nl: {\n  \"Genesis\": \"gn\", \"Exodus\": \"ex\", \"Leviticus\": \"lv\", \"Numeri\": \"nm\", \"Deuteronomium\": \"dt\",\n  \"Jozua\": \"js\", \"Richteren\": \"jz\", \"Ruth\": \"rt\", \"1 Samuel\": \"1sm\", \"2 Samuel\": \"2sm\",\n  \"1 Koningen\": \"1rs\", \"2 Koningen\": \"2rs\", \"1 Kronieken\": \"1cr\", \"2 Kronieken\": \"2cr\", \"Ezra\": \"esd\",\n  \"Nehemia\": \"ne\", \"Esther\": \"et\", \"Job\": \"jó\", \"Psalmen\": \"sl\", \"Spreuken\": \"pv\",\n  \"Prediker\": \"ec\", \"Hooglied\": \"ct\", \"Jesaja\": \"is\", \"Jeremia\": \"jr\", \"Klaagliederen\": \"lm\",\n  \"Ezechiël\": \"ez\", \"Daniël\": \"dn\", \"Hosea\": \"os\", \"Joël\": \"jl\", \"Amos\": \"am\",\n  \"Obadja\": \"ob\", \"Jona\": \"jn\", \"Micha\": \"mq\", \"Nahum\": \"na\", \"Habakuk\": \"hc\",\n  \"Zefanja\": \"sf\", \"Haggaï\": \"ag\", \"Zacharia\": \"zc\", \"Maleachi\": \"ml\",\n  \"Mattheus\": \"mt\", \"Markus\": \"mc\", \"Lukas\": \"lc\", \"Johannes\": \"jo\", \"Handelingen\": \"at\",\n  \"Romeinen\": \"rm\", \"1 Corinthiërs\": \"1co\", \"2 Corinthiërs\": \"2co\", \"Galaten\": \"gl\", \"Efeziërs\": \"ef\",\n  \"Filippenzen\": \"fp\", \"Colossenzen\": \"cl\", \"1 Thessalonicenzen\": \"1ts\", \"2 Thessalonicenzen\": \"2ts\", \"1 Timoteüs\": \"1tm\",\n  \"2 Timoteüs\": \"2tm\", \"Titus\": \"tt\", \"Filemon\": \"fm\", \"Hebreeën\": \"hb\", \"Jakobus\": \"tg\",\n  \"1 Petrus\": \"1pd\", \"2 Petrus\": \"2pd\", \"1 Johannes\": \"1jo\", \"2 Johannes\": \"2jo\", \"3 Johannes\": \"3jo\",\n  \"Judas\": \"jd\", \"Openbaring\": \"ap\"\n  },\n  es: {\n  \"Génesis\": \"gn\", \"Éxodo\": \"ex\", \"Levítico\": \"lv\", \"Números\": \"nm\", \"Deuteronomio\": \"dt\",\n  \"Josué\": \"js\", \"Jueces\": \"jz\", \"Rut\": \"rt\", \"1 Samuel\": \"1sm\", \"2 Samuel\": \"2sm\",\n  \"1 Reyes\": \"1rs\", \"2 Reyes\": \"2rs\", \"1 Crónicas\": \"1cr\", \"2 Crónicas\": \"2cr\", \"Esdras\": \"esd\",\n  \"Nehemías\": \"ne\", \"Ester\": \"et\", \"Job\": \"jó\", \"Salmos\": \"sl\", \"Proverbios\": \"pv\",\n  \"Eclesiastés\": \"ec\", \"Cantar de los Cantares\": \"ct\", \"Isaías\": \"is\", \"Jeremías\": \"jr\", \"Lamentaciones\": \"lm\",\n  \"Ezequiel\": \"ez\", \"Daniel\": \"dn\", \"Oseas\": \"os\", \"Joel\": \"jl\", \"Amós\": \"am\",\n  \"Abdías\": \"ob\", \"Jonás\": \"jn\", \"Miqueas\": \"mq\", \"Nahúm\": \"na\", \"Habacuc\": \"hc\",\n  \"Sofonías\": \"sf\", \"Ageo\": \"ag\", \"Zacarías\": \"zc\", \"Malaquías\": \"ml\",\n  \"Mateo\": \"mt\", \"Marcos\": \"mc\", \"Lucas\": \"lc\", \"Juan\": \"jo\", \"Hechos\": \"at\",\n  \"Romanos\": \"rm\", \"1 Corintios\": \"1co\", \"2 Corintios\": \"2co\", \"Gálatas\": \"gl\", \"Efesios\": \"ef\",\n  \"Filipenses\": \"fp\", \"Colosenses\": \"cl\", \"1 Tesalonicenses\": \"1ts\", \"2 Tesalonicenses\": \"2ts\", \"1 Timoteo\": \"1tm\",\n  \"2 Timoteo\": \"2tm\", \"Tito\": \"tt\", \"Filemón\": \"fm\", \"Hebreos\": \"hb\", \"Santiago\": \"tg\",\n  \"1 Pedro\": \"1pd\", \"2 Pedro\": \"2pd\", \"1 Juan\": \"1jo\", \"2 Juan\": \"2jo\", \"3 Juan\": \"3jo\",\n  \"Judas\": \"jd\", \"Apocalipsis\": \"ap\"\n  }\n};\n\nconst VERSIONS = [\n  { id: \"nvi\", name: \"NVI\", fullName: \"Nova Versão Internacional\" },\n  { id: \"acf\", name: \"ACF\", fullName: \"Almeida Corrigida Fiel\" },\n  { id: \"arc\", name: \"ARC\", fullName: \"Almeida Revista e Corrigida\" },\n  { id: \"ra\", name: \"RA\", fullName: \"Almeida Revista e Atualizada\" },\n];\n\ninterface Verse {\n  number: number;\n  text: string;\n}\n\ninterface VersionData {\n  versionId: string;\n  versionName: string;\n  verses: Verse[];\n  isLoading: boolean;\n  error?: string;\n}\n\nexport default function VersionCompare() {\n  const { toast } = useToast();\n  const { language } = useLanguage();\n  const { sqliteReady, getSqliteChapter } = useOffline();\n  \n  // Get books for current language, default to first book\n  const currentBooks = BIBLE_BOOKS[language as keyof typeof BIBLE_BOOKS] || BIBLE_BOOKS.pt;\n  const bookMapping = bookNameToAbbrev[language as keyof typeof bookNameToAbbrev] || bookNameToAbbrev.pt;\n  \n  const [selectedBook, setSelectedBook] = useState(currentBooks[42]); // John\n  const [selectedChapter, setSelectedChapter] = useState(3);\n  const [selectedVersions, setSelectedVersions] = useState([\"nvi\", \"acf\"]);\n  const [versionsData, setVersionsData] = useState<VersionData[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [maxChapter, setMaxChapter] = useState(21);\n\n  // Fallback: fetch from API when SQLite is not available\n  const fetchChapterFromAPI = async (versionId: string, abbrev: string, chapter: number) => {\n    try {\n      const response = await apiFetch(`/api/bible/${versionId}/${abbrev}/${chapter}`);\n      if (!response.ok) throw new Error(\"API fetch failed\");\n      return await response.json();\n    } catch (err) {\n      console.warn(`[VersionCompare] API fallback failed for ${versionId}/${abbrev}/${chapter}`);\n      return null;\n    }\n  };\n\n  const fetchChapterData = async () => {\n    setIsLoading(true);\n    const newData: VersionData[] = [];\n\n    for (const versionId of selectedVersions) {\n      try {\n        const abbrev = bookMapping[selectedBook] || selectedBook.toLowerCase();\n        let chapterData = null;\n        \n        // Try SQLite first if available\n        if (sqliteReady) {\n          chapterData = await getSqliteChapter(abbrev, selectedChapter);\n        }\n        \n        // Fallback to API if SQLite not ready or didn't return data\n        if (!chapterData?.verses) {\n          chapterData = await fetchChapterFromAPI(versionId, abbrev, selectedChapter);\n        }\n        \n        if (chapterData?.verses) {\n          newData.push({\n            versionId,\n            versionName: VERSIONS.find(v => v.id === versionId)?.name || versionId.toUpperCase(),\n            verses: chapterData.verses.map((v: any, i: number) => ({\n              number: v.verse || v.number || i + 1,\n              text: typeof v === 'string' ? v : v.text || \"\"\n            })),\n            isLoading: false,\n          });\n        } else {\n          newData.push({\n            versionId,\n            versionName: VERSIONS.find(v => v.id === versionId)?.name || versionId.toUpperCase(),\n            verses: [],\n            isLoading: false,\n            error: \"Capítulo não encontrado\",\n          });\n        }\n      } catch (err) {\n        newData.push({\n          versionId,\n          versionName: VERSIONS.find(v => v.id === versionId)?.name || versionId.toUpperCase(),\n          verses: [],\n          isLoading: false,\n          error: \"Erro ao carregar\",\n        });\n      }\n    }\n\n    setVersionsData(newData);\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    // Fetch data immediately - fallback to API if SQLite not ready\n    fetchChapterData();\n  }, [selectedBook, selectedChapter, selectedVersions, sqliteReady, language]);\n\n  // Update selected book when language changes\n  useEffect(() => {\n    setSelectedBook(currentBooks[42]); // Reset to John in new language\n  }, [language]);\n\n  const toggleVersion = (versionId: string) => {\n    if (selectedVersions.includes(versionId)) {\n      if (selectedVersions.length > 1) {\n        setSelectedVersions(selectedVersions.filter(v => v !== versionId));\n      }\n    } else {\n      if (selectedVersions.length < 3) {\n        setSelectedVersions([...selectedVersions, versionId]);\n      } else {\n        toast({\n          title: \"Limite atingido\",\n          description: \"Você pode comparar até 3 versões simultaneamente\",\n        });\n      }\n    }\n  };\n\n  const navigateChapter = (direction: number) => {\n    const newChapter = selectedChapter + direction;\n    if (newChapter >= 1 && newChapter <= maxChapter) {\n      setSelectedChapter(newChapter);\n    }\n  };\n\n  const maxVerses = Math.max(...versionsData.map(v => v.verses.length), 0);\n\n  return (\n    <div className=\"min-h-screen bg-background relative overflow-hidden\">\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 h-96 w-96 rounded-full bg-primary/10 dark:bg-primary/5 blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 h-96 w-96 rounded-full bg-muted/50 dark:bg-muted/30 blur-3xl\" />\n      </div>\n      <div className=\"relative z-10 max-w-7xl mx-auto p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h1 className=\"font-display text-4xl font-bold mb-2 flex items-center gap-3\" data-testid=\"text-page-title\">\n              <div className=\"flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-700\">\n                <Columns className=\"h-6 w-6 text-white\" />\n              </div>\n              Comparar Versões\n            </h1>\n            <p className=\"text-lg text-muted-foreground\">\n              Compare versículos em diferentes traduções lado a lado\n            </p>\n          </div>\n        </div>\n\n        <Card className=\"mb-6\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex flex-wrap items-center gap-4\">\n              <div className=\"flex-1 min-w-48\">\n                <Select value={selectedBook} onValueChange={setSelectedBook}>\n                  <SelectTrigger data-testid=\"select-book\">\n                    <SelectValue placeholder=\"Livro\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {currentBooks.map((book) => (\n                      <SelectItem key={book} value={book}>\n                        {book}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                <Button \n                  variant=\"outline\" \n                  size=\"icon\"\n                  onClick={() => navigateChapter(-1)}\n                  disabled={selectedChapter <= 1}\n                  data-testid=\"button-prev-chapter\"\n                >\n                  <ChevronLeft className=\"h-4 w-4\" />\n                </Button>\n                <Input\n                  type=\"number\"\n                  value={selectedChapter}\n                  onChange={(e) => setSelectedChapter(parseInt(e.target.value) || 1)}\n                  className=\"w-20 text-center\"\n                  min={1}\n                  max={maxChapter}\n                  data-testid=\"input-chapter\"\n                />\n                <Button \n                  variant=\"outline\" \n                  size=\"icon\"\n                  onClick={() => navigateChapter(1)}\n                  disabled={selectedChapter >= maxChapter}\n                  data-testid=\"button-next-chapter\"\n                >\n                  <ChevronRight className=\"h-4 w-4\" />\n                </Button>\n              </div>\n\n              <Separator orientation=\"vertical\" className=\"h-8\" />\n\n              <div className=\"flex gap-2 flex-wrap\">\n                {VERSIONS.map((version) => (\n                  <Badge\n                    key={version.id}\n                    variant={selectedVersions.includes(version.id) ? \"default\" : \"outline\"}\n                    className=\"cursor-pointer toggle-elevate px-3 py-1\"\n                    onClick={() => toggleVersion(version.id)}\n                    data-testid={`badge-version-${version.id}`}\n                  >\n                    {version.name}\n                  </Badge>\n                ))}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {!sqliteReady || isLoading ? (\n          <div className=\"flex items-center justify-center py-20\">\n            <div className=\"text-center\">\n              <Loader2 className=\"h-12 w-12 animate-spin text-primary mx-auto mb-4\" />\n              <p className=\"text-muted-foreground\">\n                {!sqliteReady ? \"Inicializando banco de dados...\" : \"Carregando versículos...\"}\n              </p>\n            </div>\n          </div>\n        ) : (\n          <div className={`grid gap-4 ${selectedVersions.length === 1 ? '' : selectedVersions.length === 2 ? 'md:grid-cols-2' : 'md:grid-cols-3'}`}>\n            {versionsData.map((versionData) => (\n              <Card key={versionData.versionId} data-testid={`card-version-${versionData.versionId}`}>\n                <CardHeader className=\"py-3 px-4 bg-muted/50 sticky top-0 z-10\">\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\n                    <BookOpen className=\"h-4 w-4\" />\n                    {versionData.versionName}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"p-0\">\n                  <ScrollArea className=\"h-[60vh]\">\n                    <div className=\"p-4 space-y-4\">\n                      {versionData.error ? (\n                        <p className=\"text-muted-foreground text-center py-8\">\n                          {versionData.error}\n                        </p>\n                      ) : versionData.verses.length === 0 ? (\n                        <p className=\"text-muted-foreground text-center py-8\">\n                          Nenhum versículo encontrado\n                        </p>\n                      ) : (\n                        versionData.verses.map((verse) => (\n                          <div key={verse.number} className=\"group\" data-testid={`verse-${versionData.versionId}-${verse.number}`}>\n                            <span className=\"text-primary font-bold mr-2\">\n                              {verse.number}\n                            </span>\n                            <span className=\"text-foreground leading-relaxed\">\n                              {verse.text}\n                            </span>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                  </ScrollArea>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n\n        {versionsData.length > 0 && !isLoading && (\n          <Card className=\"mt-6\">\n            <CardContent className=\"py-4\">\n              <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\n                <span>\n                  {selectedBook} {selectedChapter} • {maxVerses} versículos\n                </span>\n                <span>\n                  Comparando {selectedVersions.length} {selectedVersions.length === 1 ? 'versão' : 'versões'}\n                </span>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":20614,"size_tokens":null},"client/src/lib/audioService.ts":{"content":"// Bible Audio Service - Online/Offline Smart Playback with Supabase Storage\nimport { getApiUrl } from \"./config\";\nimport { SUPABASE_URL } from \"./env-config\";\n\n// Define inline type to avoid circular dependency\ninterface OfflineContextType {\n  getOfflineAudio?: (bookCode: string, chapter: number, version: string) => Promise<ArrayBuffer | null>;\n}\n\n// Supabase Storage URL for Bible audio files\n// Format: {SUPABASE_URL}/storage/v1/object/public/bible-audio/{LANG}/{VERSION}/{BOOK}/{CHAPTER}.mp3\nconst AUDIO_STORAGE_BASE = SUPABASE_URL \n  ? `${SUPABASE_URL}/storage/v1/object/public/bible-audio`\n  : \"\";\n\n// Comprehensive book mapping: Portuguese + English names → abbreviations\nconst BOOK_CODES: { [key: string]: string } = {\n  // Portuguese\n  \"Gênesis\": \"gn\", \"Genesis\": \"gn\", \"Êxodo\": \"ex\", \"Exodus\": \"ex\",\n  \"Levítico\": \"lv\", \"Leviticus\": \"lv\", \"Números\": \"nm\", \"Numbers\": \"nm\",\n  \"Deuteronômio\": \"dt\", \"Deuteronomy\": \"dt\", \"Josué\": \"js\", \"Joshua\": \"js\",\n  \"Juízes\": \"jz\", \"Judges\": \"jz\", \"Rute\": \"rt\", \"Ruth\": \"rt\",\n  \"1 Samuel\": \"1sm\", \"1Samuel\": \"1sm\", \"2 Samuel\": \"2sm\", \"2Samuel\": \"2sm\",\n  \"1 Reis\": \"1rs\", \"1Kings\": \"1rs\", \"2 Reis\": \"2rs\", \"2Kings\": \"2rs\",\n  \"1 Crônicas\": \"1cr\", \"1Chronicles\": \"1cr\", \"2 Crônicas\": \"2cr\", \"2Chronicles\": \"2cr\",\n  \"Esdras\": \"ed\", \"Ezra\": \"ed\", \"Neemias\": \"ne\", \"Nehemiah\": \"ne\",\n  \"Ester\": \"et\", \"Esther\": \"et\", \"Jó\": \"job\", \"Job\": \"job\",\n  \"Salmos\": \"sl\", \"Psalms\": \"sl\", \"Provérbios\": \"pv\", \"Proverbs\": \"pv\",\n  \"Eclesiastes\": \"ec\", \"Ecclesiastes\": \"ec\", \"Cantares\": \"ct\", \"SongofSolomon\": \"ct\",\n  \"Isaías\": \"is\", \"Isaiah\": \"is\", \"Jeremias\": \"jr\", \"Jeremiah\": \"jr\",\n  \"Lamentações\": \"lm\", \"Lamentations\": \"lm\", \"Ezequiel\": \"ez\", \"Ezekiel\": \"ez\",\n  \"Daniel\": \"dn\", \"Oseias\": \"os\", \"Hosea\": \"os\", \"Joel\": \"jl\",\n  \"Amós\": \"am\", \"Amos\": \"am\", \"Obadias\": \"ob\", \"Obadiah\": \"ob\",\n  \"Jonas\": \"jn\", \"Jonah\": \"jn\", \"Miqueias\": \"mq\", \"Micah\": \"mq\",\n  \"Naum\": \"na\", \"Nahum\": \"na\", \"Habacuque\": \"hc\", \"Habakkuk\": \"hc\",\n  \"Sofonias\": \"sf\", \"Zephaniah\": \"sf\", \"Ageu\": \"ag\", \"Haggai\": \"ag\",\n  \"Zacarias\": \"zc\", \"Zechariah\": \"zc\", \"Malaquias\": \"ml\", \"Malachi\": \"ml\",\n  \"Mateus\": \"mt\", \"Matthew\": \"mt\", \"Marcos\": \"mc\", \"Mark\": \"mc\",\n  \"Lucas\": \"lc\", \"Luke\": \"lc\", \"João\": \"jo\", \"John\": \"jo\", \"Atos\": \"at\", \"Acts\": \"at\",\n  \"Romanos\": \"rm\", \"Romans\": \"rm\", \"1 Coríntios\": \"1co\", \"1Corinthians\": \"1co\",\n  \"2 Coríntios\": \"2co\", \"2Corinthians\": \"2co\", \"Gálatas\": \"gl\", \"Galatians\": \"gl\",\n  \"Efésios\": \"ef\", \"Ephesians\": \"ef\", \"Filipenses\": \"fp\", \"Philippians\": \"fp\",\n  \"Colossenses\": \"cl\", \"Colossians\": \"cl\", \"1 Tessalonicenses\": \"1ts\",\n  \"1Thessalonians\": \"1ts\", \"2 Tessalonicenses\": \"2ts\", \"2Thessalonians\": \"2ts\",\n  \"1 Timóteo\": \"1tm\", \"1Timothy\": \"1tm\", \"2 Timóteo\": \"2tm\", \"2Timothy\": \"2tm\",\n  \"Tito\": \"tt\", \"Titus\": \"tt\", \"Filemom\": \"fm\", \"Philemon\": \"fm\",\n  \"Hebreus\": \"hb\", \"Hebrews\": \"hb\", \"Tiago\": \"tg\", \"James\": \"tg\",\n  \"1 Pedro\": \"1pe\", \"1Peter\": \"1pe\", \"2 Pedro\": \"2pe\", \"2Peter\": \"2pe\",\n  \"1 João\": \"1jo\", \"1John\": \"1jo\", \"2 João\": \"2jo\", \"2John\": \"2jo\",\n  \"3 João\": \"3jo\", \"3John\": \"3jo\", \"Judas\": \"jd\", \"Jude\": \"jd\",\n  \"Apocalipse\": \"ap\", \"Revelation\": \"ap\",\n};\n\nexport interface AudioPlayOptions {\n  book: string;\n  chapter: number;\n  version: string;\n  offline: OfflineContextType | null;\n  isOnline: boolean;\n}\n\nexport interface AudioProgress {\n  bookCode: string;\n  chapter: number;\n  version: string;\n  playbackPosition: number;\n  totalDuration: number;\n  lastPlayedAt: Date;\n}\n\nfunction getBookCode(bookName: string): string {\n  // Try exact match first\n  if (BOOK_CODES[bookName]) return BOOK_CODES[bookName];\n  \n  // Try case-insensitive match\n  for (const [key, value] of Object.entries(BOOK_CODES)) {\n    if (key.toLowerCase() === bookName.toLowerCase()) {\n      return value;\n    }\n  }\n  \n  // Fallback: use first 2 letters lowercase\n  return bookName.toLowerCase().substring(0, 2);\n}\n\n// Get auth token from localStorage (Supabase stores it there)\nfunction getAuthToken(): string | null {\n  try {\n    const supabaseKey = Object.keys(localStorage).find(k => k.startsWith('sb-') && k.endsWith('-auth-token'));\n    if (supabaseKey) {\n      const data = JSON.parse(localStorage.getItem(supabaseKey) || '{}');\n      return data?.access_token || null;\n    }\n    return null;\n  } catch {\n    return null;\n  }\n}\n\nexport async function getAudioUrl(\n  book: string,\n  chapter: number,\n  version: string = \"ARC\",\n  language: string = \"PT\"\n): Promise<string> {\n  const bookCode = getBookCode(book);\n  if (!AUDIO_STORAGE_BASE) {\n    console.error(\"[Audio] Supabase URL not configured\");\n    throw new Error(\"Audio storage not configured\");\n  }\n  // Format: {SUPABASE}/storage/v1/object/public/bible-audio/{LANG}/{VERSION}/{BOOK}/{CHAPTER}.mp3\n  const url = `${AUDIO_STORAGE_BASE}/${language.toUpperCase()}/${version.toUpperCase()}/${bookCode}/${chapter}.mp3`;\n  console.log(`[Audio] Generated URL: ${url}`);\n  return url;\n}\n\nexport async function playBibleAudio(\n  options: AudioPlayOptions,\n  audioElement: HTMLAudioElement,\n  language: string = \"PT\"\n): Promise<void> {\n  const { book, chapter, version, offline, isOnline } = options;\n  const bookCode = getBookCode(book);\n\n  try {\n    // Offline: check IndexedDB first\n    if (offline?.getOfflineAudio) {\n      const cachedAudio = await offline.getOfflineAudio(bookCode, chapter, version);\n      if (cachedAudio) {\n        console.log(`[Audio] Playing from offline cache: ${book} ${chapter}`);\n        const blob = new Blob([cachedAudio], { type: \"audio/mpeg\" });\n        const blobUrl = URL.createObjectURL(blob);\n        audioElement.src = blobUrl;\n        await audioElement.play();\n        return;\n      }\n    }\n\n    // Online: Use backend API (has server-side cache + OpenAI TTS fallback)\n    if (isOnline) {\n      const apiPath = `/api/bible/audio/${language.toLowerCase()}/${version.toLowerCase()}/${bookCode}/${chapter}`;\n      const apiUrl = getApiUrl(apiPath);\n      console.log(`[Audio] Streaming via API: ${apiUrl}`);\n      \n      const token = getAuthToken();\n      const headers: Record<string, string> = token ? { Authorization: `Bearer ${token}` } : {};\n      \n      const response = await fetch(apiUrl, {\n        method: \"GET\",\n        credentials: \"include\",\n        headers,\n        signal: AbortSignal.timeout(120000),\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Falha ao carregar áudio: ${response.status}`);\n      }\n      \n      const blob = await response.blob();\n      const blobUrl = URL.createObjectURL(blob);\n      audioElement.src = blobUrl;\n      await audioElement.play();\n      return;\n    }\n\n    throw new Error(\"Áudio não disponível. Conecte à internet para ouvir.\");\n  } catch (error) {\n    console.error(\"Erro ao reproduzir áudio:\", error);\n    throw error;\n  }\n}\n\nexport async function downloadChapterAudio(\n  book: string,\n  chapter: number,\n  version: string = \"ARC\",\n  language: string = \"PT\",\n  onProgress?: (progress: number) => void\n): Promise<Blob> {\n  const bookCode = getBookCode(book);\n  \n  // Use OpenAI TTS API endpoint (Supabase Storage is empty)\n  const apiPath = `/api/bible/audio/${language.toLowerCase()}/${version.toLowerCase()}/${bookCode}/${chapter}`;\n  const apiUrl = getApiUrl(apiPath);\n  console.log(`[Audio] Downloading via TTS API: ${apiUrl}`);\n  \n  const token = getAuthToken();\n  const headers: Record<string, string> = token ? { Authorization: `Bearer ${token}` } : {};\n\n  const response = await fetch(apiUrl, {\n    method: \"GET\",\n    credentials: \"include\",\n    headers,\n    signal: AbortSignal.timeout(120000),\n  });\n  \n  if (!response.ok) {\n    throw new Error(`Falha ao baixar áudio: ${response.status}`);\n  }\n\n  const contentLength = Number(response.headers.get(\"content-length\")) || 0;\n  const reader = response.body?.getReader();\n\n  if (!reader) {\n    const blob = await response.blob();\n    onProgress?.(100);\n    return blob;\n  }\n\n  const chunks: Uint8Array[] = [];\n  let receivedLength = 0;\n\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done) break;\n\n    chunks.push(value);\n    receivedLength += value.length;\n\n    if (onProgress && contentLength) {\n      onProgress(Math.round((receivedLength / contentLength) * 100));\n    }\n  }\n\n  return new Blob(chunks, { type: \"audio/mpeg\" });\n}\n\nexport async function downloadBookAudio(\n  book: string,\n  chapters: number,\n  version: string = \"ARC\",\n  language: string = \"PT\",\n  onProgress?: (progress: number) => void\n): Promise<Map<number, Blob>> {\n  const audioMap = new Map<number, Blob>();\n  const totalChapters = chapters;\n\n  for (let ch = 1; ch <= totalChapters; ch++) {\n    try {\n      const audio = await downloadChapterAudio(book, ch, version, language);\n      audioMap.set(ch, audio);\n      onProgress?.(Math.round((ch / totalChapters) * 100));\n    } catch (error) {\n      console.warn(`Falha ao baixar capítulo ${ch}:`, error);\n      continue;\n    }\n  }\n\n  return audioMap;\n}\n\nexport function formatTime(seconds: number): string {\n  const hrs = Math.floor(seconds / 3600);\n  const mins = Math.floor((seconds % 3600) / 60);\n  const secs = Math.floor(seconds % 60);\n\n  if (hrs > 0) {\n    return `${hrs}:${String(mins).padStart(2, \"0\")}:${String(secs).padStart(2, \"0\")}`;\n  }\n  return `${mins}:${String(secs).padStart(2, \"0\")}`;\n}\n","path":null,"size_bytes":9233,"size_tokens":null},"client/src/lib/offline/podcastStorage.ts":{"content":"const DB_NAME = \"biblia-podcasts-offline\";\nconst STORE_NAME = \"episodes\";\nconst DB_VERSION = 1;\n\nexport interface OfflineEpisode {\n  id: string;\n  podcastId: string;\n  title: string;\n  audioData: Blob;\n  downloadedAt: number;\n  size: number;\n}\n\nclass PodcastStorage {\n  private db: IDBDatabase | null = null;\n\n  async init(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => {\n        this.db = request.result;\n        resolve();\n      };\n\n      request.onupgradeneeded = (event) => {\n        const db = (event.target as IDBOpenDBRequest).result;\n        \n        if (!db.objectStoreNames.contains(STORE_NAME)) {\n          const store = db.createObjectStore(STORE_NAME, { keyPath: \"id\" });\n          store.createIndex(\"podcastId\", \"podcastId\", { unique: false });\n          store.createIndex(\"downloadedAt\", \"downloadedAt\", { unique: false });\n        }\n      };\n    });\n  }\n\n  async saveEpisode(episode: OfflineEpisode): Promise<void> {\n    if (!this.db) await this.init();\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([STORE_NAME], \"readwrite\");\n      const store = transaction.objectStore(STORE_NAME);\n      const request = store.put(episode);\n\n      request.onsuccess = () => resolve();\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async getEpisode(id: string): Promise<OfflineEpisode | null> {\n    if (!this.db) await this.init();\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([STORE_NAME], \"readonly\");\n      const store = transaction.objectStore(STORE_NAME);\n      const request = store.get(id);\n\n      request.onsuccess = () => resolve(request.result || null);\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async getAllEpisodes(): Promise<OfflineEpisode[]> {\n    if (!this.db) await this.init();\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([STORE_NAME], \"readonly\");\n      const store = transaction.objectStore(STORE_NAME);\n      const request = store.getAll();\n\n      request.onsuccess = () => resolve(request.result || []);\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async deleteEpisode(id: string): Promise<void> {\n    if (!this.db) await this.init();\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([STORE_NAME], \"readwrite\");\n      const store = transaction.objectStore(STORE_NAME);\n      const request = store.delete(id);\n\n      request.onsuccess = () => resolve();\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async isDownloaded(id: string): Promise<boolean> {\n    const episode = await this.getEpisode(id);\n    return episode !== null;\n  }\n\n  async getStorageStats(): Promise<{ count: number; totalSize: number }> {\n    const episodes = await this.getAllEpisodes();\n    return {\n      count: episodes.length,\n      totalSize: episodes.reduce((sum, ep) => sum + ep.size, 0),\n    };\n  }\n\n  async clearAll(): Promise<void> {\n    if (!this.db) await this.init();\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([STORE_NAME], \"readwrite\");\n      const store = transaction.objectStore(STORE_NAME);\n      const request = store.clear();\n\n      request.onsuccess = () => resolve();\n      request.onerror = () => reject(request.error);\n    });\n  }\n}\n\nexport const podcastStorage = new PodcastStorage();\n","path":null,"size_bytes":3599,"size_tokens":null},"AUDIO_STATUS.md":{"content":"# 🎵 Áudio português - STATUS\n\n## ✅ Concluído\n- **Rute (Capítulos 1-4)**: 100% ✅\n  - 4 arquivos em `PT/ARC/rt/`\n  - Prontos para reprodução\n\n## 🔄 Em Progresso\n- **Genesis (Capítulos 1-50)**: Baixando agora...\n  - ETA: ~50 minutos\n  - Pode monitorar: `tail -f /tmp/genesis-download.log`\n\n## 📂 Estrutura no Supabase\n\n```\nbible-audio/\n└── PT/\n    └── ARC/\n        ├── rt/ ✅ (1.mp3 - 4.mp3)\n        └── gn/ 🔄 (1.mp3 - 50.mp3)\n```\n\n## 🚀 Próximos Passos\n\n1. Espera Genesis terminar (~50 min)\n2. Testa reprodução no app\n3. Faz upload de outros livros\n\n## 📊 Estatísticas\n\n- **Tempo por capítulo**: ~1-2 segundo\n- **Tamanho por capítulo**: ~0.14 MB  \n- **Total Genesis**: ~7 MB\n- **Total 4 Evangelhos**: ~20 MB\n- **Supabase limite**: 1 GB grátis (plenty!)\n","path":null,"size_bytes":808,"size_tokens":null},"PT_AUDIO_DOWNLOAD_GUIDE.md":{"content":"# 🎵 Download Áudio Português Brasil - Automático\n\n## 🚀 Quick Start\n\n```bash\n# Genesis (50 capítulos)\nnpx tsx server/scripts/download-pt-audio-from-archive.ts gn 50\n\n# Mateus (28 capítulos)\nnpx tsx server/scripts/download-pt-audio-from-archive.ts mt 28\n\n# João (21 capítulos)\nnpx tsx server/scripts/download-pt-audio-from-archive.ts jo 21\n```\n\n✅ **Pronto!** Vai fazer download de Archive.org + upload automático para Supabase!\n\n---\n\n## 📖 Livros Disponíveis\n\n```\ngn - Genesis             (50 capítulos)\nex - Êxodo              (40 capítulos)\nlv - Levítico           (27 capítulos)\nnm - Números            (36 capítulos)\ndt - Deuteronômio       (34 capítulos)\njs - Josué              (24 capítulos)\njz - Juízes             (21 capítulos)\nrt - Rute               (4 capítulos)\nmt - Mateus             (28 capítulos)\nmc - Marcos             (16 capítulos)\nlc - Lucas              (24 capítulos)\njo - João               (21 capítulos)\n```\n\n---\n\n## ⚙️ O que o Script Faz\n\n1. **Baixa** do Archive.org (públicamente disponível)\n2. **Organiza** em formato correto\n3. **Sobe** automaticamente para Supabase Storage\n4. **Limpa** arquivos temporários\n5. **Sincroniza** com seu app em tempo real\n\n---\n\n## ⏱️ Tempo Estimado\n\n- Genesis: ~50 minutos (50 arquivos x 1s delay)\n- Mateus: ~28 minutos\n- Livro pequeno: ~5 minutos\n\n---\n\n## 📊 Resultado Final\n\nDepois de rodar, seus áudios estarão em:\n\n```\nPT/ARC/gn/1.mp3\nPT/ARC/gn/2.mp3\n...\nPT/ARC/gn/50.mp3\n```\n\nE o app **automaticamente consegue reproduzir**! 🎵\n\n---\n\n## ❓ Dúvidas?\n\n- **Espaço**: Supabase oferece 1 GB grátis\n- **Qualidade**: MP3 em qualidade alta\n- **Fontes**: Archive.org + Faith Comes By Hearing\n- **Credenciais**: Precisa de `SUPABASE_SERVICE_ROLE_KEY` no `.env`\n","path":null,"size_bytes":1776,"size_tokens":null},"AUDIO_UPLOAD_GUIDE.md":{"content":"# 📚 Como Upload de Áudio para Supabase Storage\n\n## 1️⃣ Organizar seus arquivos localmente\n\nCrie uma pasta com todos os MP3s que você baixou:\n\n```\naudio-files/\n├── 1.mp3  (Genesis 1)\n├── 2.mp3  (Genesis 2)\n├── 3.mp3  (Genesis 3)\n└── ... (mais capítulos)\n```\n\n**Importante:** Os arquivos devem ser nomeados como `{CAPÍTULO}.mp3`\n\n## 2️⃣ Fazer upload usando o script\n\n```bash\n# Para Inglês (EN/WEB)\nnpx tsx server/scripts/upload-local-audio.ts ./audio-files EN WEB gn\n\n# Para Português (PT/ARC)\nnpx tsx server/scripts/upload-local-audio.ts ./audio-files PT ARC mt\n\n# Genérico\nnpx tsx server/scripts/upload-local-audio.ts [pasta-local] [IDIOMA] [VERSÃO] [LIVRO]\n```\n\n## 3️⃣ Parâmetros\n\n| Parâmetro | Exemplo | Descrição |\n|-----------|---------|-----------|\n| `[pasta-local]` | `./audio-files` | Pasta com MP3s |\n| `[IDIOMA]` | `EN`, `PT` | EN = English, PT = Português |\n| `[VERSÃO]` | `WEB`, `ARC` | WEB = World English Bible, ARC = Almeida |\n| `[LIVRO]` | `gn`, `mt`, `jo` | Abreviação do livro |\n\n## 4️⃣ Abreviações de Livros\n\n```\nOT: gn, ex, lv, nm, dt, js, jz, rt, 1sm, 2sm, 1rs, 2rs, 1cr, 2cr, ed, ne, et, job, sl, pv, ec, ct, is, jr, lm, ez, dn, os, jl, am, ob, jn, mq, na, hc, sf, ag, zc, ml\nNT: mt, mc, lc, jo, at, rm, 1co, 2co, gl, ef, fp, cl, 1ts, 2ts, 1tm, 2tm, tt, fm, hb, tg, 1pe, 2pe, 1jo, 2jo, 3jo, jd, ap\n```\n\n## 5️⃣ Exemplo Completo\n\n```bash\n# Baixei Genesis em inglês em ./my-audio/\nnpx tsx server/scripts/upload-local-audio.ts ./my-audio EN WEB gn\n\n# Esperado:\n# ✅ EN/WEB/gn/1.mp3 (7.2 MB)\n# ✅ EN/WEB/gn/2.mp3 (4.5 MB)\n# ... 50 capítulos no total\n```\n\n## ⚠️ Dicas\n\n- **Formato**: Apenas MP3 funciona\n- **Taxa**: 1 arquivo por segundo (para não sobrecarregar)\n- **Credenciais**: Precisa de `SUPABASE_SERVICE_ROLE_KEY` no `.env`\n- **Espaço**: Supabase oferece 1 GB grátis por projeto\n\n## ✨ Depois do Upload\n\nOs arquivos estarão disponíveis em:\n```\nhttps://[seu-supabase-url]/storage/v1/object/public/bible-audio/EN/WEB/gn/1.mp3\n```\n\nE o app automaticamente conseguirá reproduzir! 🎵\n","path":null,"size_bytes":2083,"size_tokens":null},"server/scripts/upload-local-audio.ts":{"content":"/**\n * Upload Local Bible Audio Files to Supabase Storage\n * \n * Usage:\n *   npx tsx server/scripts/upload-local-audio.ts [sourceDir] [lang] [version] [bookAbbrev]\n * \n * Examples:\n *   npx tsx server/scripts/upload-local-audio.ts ./audio-files EN WEB gn\n *   npx tsx server/scripts/upload-local-audio.ts ./pt-audio PT ARC mt\n */\n\nimport { createClient } from \"@supabase/supabase-js\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\nimport \"dotenv/config\";\n\nconst supabaseUrl = process.env.SUPABASE_URL || process.env.VITE_SUPABASE_URL;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseServiceKey) {\n  console.error(\"❌ Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY\");\n  process.exit(1);\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey);\nconst BUCKET_NAME = \"bible-audio\";\n\nasync function uploadFile(\n  filePath: string,\n  remoteFileName: string\n): Promise<boolean> {\n  try {\n    const fileData = fs.readFileSync(filePath);\n    const { error } = await supabase.storage\n      .from(BUCKET_NAME)\n      .upload(remoteFileName, fileData, {\n        contentType: \"audio/mpeg\",\n        upsert: true,\n      });\n\n    if (error) {\n      console.error(`❌ Upload failed: ${remoteFileName}`);\n      console.error(`   Error: ${error.message}`);\n      return false;\n    }\n\n    const stats = fs.statSync(filePath);\n    const sizeMB = (stats.size / 1024 / 1024).toFixed(2);\n    console.log(`✅ ${remoteFileName} (${sizeMB} MB)`);\n    return true;\n  } catch (error: any) {\n    console.error(`❌ Error uploading ${remoteFileName}:`, error.message);\n    return false;\n  }\n}\n\nasync function main() {\n  const args = process.argv.slice(2);\n  \n  if (args.length < 4) {\n    console.log(\"📚 Bible Audio Uploader for Supabase Storage\\n\");\n    console.log(\"Usage:\");\n    console.log(\"  npx tsx server/scripts/upload-local-audio.ts [sourceDir] [lang] [version] [bookAbbrev]\\n\");\n    console.log(\"Examples:\");\n    console.log(\"  npx tsx server/scripts/upload-local-audio.ts ./audio-files EN WEB gn\");\n    console.log(\"  npx tsx server/scripts/upload-local-audio.ts ./pt-audio PT ARC mt\\n\");\n    console.log(\"File Structure Expected:\");\n    console.log(\"  sourceDir/\");\n    console.log(\"    ├── 1.mp3\");\n    console.log(\"    ├── 2.mp3\");\n    console.log(\"    └── ... (chapter MP3s)\\n\");\n    process.exit(0);\n  }\n\n  const [sourceDir, lang, version, bookAbbrev] = args;\n\n  // Validate source directory\n  if (!fs.existsSync(sourceDir)) {\n    console.error(`❌ Source directory not found: ${sourceDir}`);\n    process.exit(1);\n  }\n\n  // Get all MP3 files from source directory\n  const files = fs.readdirSync(sourceDir).filter(f => f.endsWith('.mp3'));\n  \n  if (files.length === 0) {\n    console.error(`❌ No MP3 files found in: ${sourceDir}`);\n    process.exit(1);\n  }\n\n  console.log(`🚀 Uploading Bible Audio to Supabase Storage`);\n  console.log(`🗂️  Source: ${sourceDir}`);\n  console.log(`📍 Destination: ${lang}/${version}/${bookAbbrev}/`);\n  console.log(`📦 Files: ${files.length}\\n`);\n\n  let successful = 0;\n  let failed = 0;\n\n  for (const file of files) {\n    const filePath = path.join(sourceDir, file);\n    const remoteFileName = `${lang}/${version}/${bookAbbrev}/${file}`;\n    \n    if (await uploadFile(filePath, remoteFileName)) {\n      successful++;\n    } else {\n      failed++;\n    }\n    \n    // Rate limiting: 1 second between uploads\n    await new Promise(resolve => setTimeout(resolve, 1000));\n  }\n\n  console.log(`\\n✨ Upload Complete!`);\n  console.log(`✅ Successful: ${successful}`);\n  console.log(`❌ Failed: ${failed}`);\n  console.log(`\\n📝 Files available at:`);\n  console.log(`   https://[supabase-url]/storage/v1/object/public/bible-audio/${lang}/${version}/${bookAbbrev}/[chapter].mp3`);\n}\n\nmain().catch(console.error);\n","path":null,"size_bytes":3859,"size_tokens":null},"server/scripts/list-audio-files.ts":{"content":"import { createClient } from \"@supabase/supabase-js\";\nimport \"dotenv/config\";\n\nconst supabaseUrl = process.env.SUPABASE_URL || process.env.VITE_SUPABASE_URL;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseServiceKey) {\n  console.error(\"❌ Missing credentials\");\n  process.exit(1);\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey);\n\nasync function listFiles() {\n  console.log(\"📂 Listing bible-audio bucket contents...\\n\");\n  \n  try {\n    // List PT/ARC folder\n    const { data, error } = await supabase.storage\n      .from(\"bible-audio\")\n      .list(\"PT/ARC\", { limit: 100 });\n    \n    if (error) {\n      console.error(\"❌ Error:\", error.message);\n      return;\n    }\n    \n    if (!data || data.length === 0) {\n      console.log(\"❌ Nenhum arquivo em PT/ARC/\");\n      return;\n    }\n    \n    console.log(`✅ Found ${data.length} items in PT/ARC/:\\n`);\n    for (const item of data) {\n      if (item.id) {\n        console.log(`  📁 ${item.name}/ (folder)`);\n      }\n    }\n    \n    // Try to list Ruth files\n    console.log(\"\\n--- Checking RT folder ---\");\n    const { data: rtFiles, error: rtError } = await supabase.storage\n      .from(\"bible-audio\")\n      .list(\"PT/ARC/rt\", { limit: 100 });\n    \n    if (rtError) {\n      console.error(\"❌ RT Error:\", rtError.message);\n      return;\n    }\n    \n    if (rtFiles && rtFiles.length > 0) {\n      console.log(`✅ Found ${rtFiles.length} files in PT/ARC/rt/:`);\n      rtFiles.forEach(f => console.log(`  - ${f.name}`));\n    } else {\n      console.log(\"❌ No files found in PT/ARC/rt/\");\n    }\n    \n  } catch (error: any) {\n    console.error(\"Error:\", error.message);\n  }\n}\n\nlistFiles();\n","path":null,"size_bytes":1740,"size_tokens":null},"server/scripts/download-pt-audio-from-archive.ts":{"content":"/**\n * Download Portuguese Bible Audio from Archive.org\n * Automatically organizes and uploads to Supabase Storage\n * \n * Usage:\n *   npx tsx server/scripts/download-pt-audio-from-archive.ts [book-abbrev] [chapters]\n * \n * Examples:\n *   npx tsx server/scripts/download-pt-audio-from-archive.ts gn 50    # Genesis\n *   npx tsx server/scripts/download-pt-audio-from-archive.ts mt 28    # Matthew\n *   npx tsx server/scripts/download-pt-audio-from-archive.ts all 1189 # Full Bible\n */\n\nimport { createClient } from \"@supabase/supabase-js\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\nimport { exec } from \"child_process\";\nimport { promisify } from \"util\";\nimport \"dotenv/config\";\n\nconst execPromise = promisify(exec);\n\nconst supabaseUrl = process.env.SUPABASE_URL || process.env.VITE_SUPABASE_URL;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseServiceKey) {\n  console.error(\"❌ Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY\");\n  process.exit(1);\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey);\nconst BUCKET_NAME = \"bible-audio\";\n\n// Bible book map to Archive.org file names\nconst BOOK_MAP: { [key: string]: { archiveName: string; chapters: number } } = {\n  gn: { archiveName: \"Bible_pt_01_genesis\", chapters: 50 },\n  ex: { archiveName: \"Bible_pt_02_exodus\", chapters: 40 },\n  lv: { archiveName: \"Bible_pt_03_leviticus\", chapters: 27 },\n  nm: { archiveName: \"Bible_pt_04_numbers\", chapters: 36 },\n  dt: { archiveName: \"Bible_pt_05_deuteronomy\", chapters: 34 },\n  js: { archiveName: \"Bible_pt_06_joshua\", chapters: 24 },\n  jz: { archiveName: \"Bible_pt_07_judges\", chapters: 21 },\n  rt: { archiveName: \"Bible_pt_08_ruth\", chapters: 4 },\n  mt: { archiveName: \"Bible_pt_40_matthew\", chapters: 28 },\n  mc: { archiveName: \"Bible_pt_41_mark\", chapters: 16 },\n  lc: { archiveName: \"Bible_pt_42_luke\", chapters: 24 },\n  jo: { archiveName: \"Bible_pt_43_john\", chapters: 21 },\n};\n\nasync function downloadFromArchive(url: string, outputFile: string): Promise<boolean> {\n  try {\n    console.log(`  Downloading: ${url}`);\n    const { stdout } = await execPromise(\n      `curl -L -o \"${outputFile}\" \"${url}\" 2>/dev/null && echo \"success\"`\n    );\n    \n    if (!fs.existsSync(outputFile)) {\n      console.error(`    ❌ Download failed`);\n      return false;\n    }\n    \n    const stats = fs.statSync(outputFile);\n    const sizeMB = (stats.size / 1024 / 1024).toFixed(2);\n    console.log(`    ✅ Downloaded (${sizeMB} MB)`);\n    return true;\n  } catch (error: any) {\n    console.error(`    ❌ Error:`, error.message);\n    return false;\n  }\n}\n\nasync function uploadToSupabase(\n  filePath: string,\n  bookAbbrev: string,\n  chapter: number\n): Promise<boolean> {\n  try {\n    const fileData = fs.readFileSync(filePath);\n    const remoteFileName = `PT/ARC/${bookAbbrev}/${chapter}.mp3`;\n    \n    const { error } = await supabase.storage\n      .from(BUCKET_NAME)\n      .upload(remoteFileName, fileData, {\n        contentType: \"audio/mpeg\",\n        upsert: true,\n      });\n\n    if (error) {\n      console.error(`    ❌ Upload failed:`, error.message);\n      return false;\n    }\n\n    const sizeMB = (fileData.byteLength / 1024 / 1024).toFixed(2);\n    console.log(`    ✅ Uploaded to PT/ARC/${bookAbbrev}/${chapter}.mp3 (${sizeMB} MB)`);\n    return true;\n  } catch (error: any) {\n    console.error(`    ❌ Upload error:`, error.message);\n    return false;\n  }\n}\n\nasync function main() {\n  const args = process.argv.slice(2);\n  \n  if (args.length < 2) {\n    console.log(\"🎵 Download Portuguese Bible Audio from Archive.org\\n\");\n    console.log(\"Usage:\");\n    console.log(\"  npx tsx server/scripts/download-pt-audio-from-archive.ts [book] [chapters]\\n\");\n    console.log(\"Available books:\");\n    Object.entries(BOOK_MAP).forEach(([abbrev, info]) => {\n      console.log(`  ${abbrev.padEnd(4)} - ${info.archiveName} (${info.chapters} chapters)`);\n    });\n    console.log(\"\\nExamples:\");\n    console.log(\"  npx tsx server/scripts/download-pt-audio-from-archive.ts gn 50\");\n    console.log(\"  npx tsx server/scripts/download-pt-audio-from-archive.ts mt 28\\n\");\n    process.exit(0);\n  }\n\n  const [bookAbbrev, chaptersArg] = args;\n  const bookInfo = BOOK_MAP[bookAbbrev];\n\n  if (!bookInfo) {\n    console.error(`❌ Unknown book: ${bookAbbrev}`);\n    process.exit(1);\n  }\n\n  const chapters = parseInt(chaptersArg);\n  const tempDir = \"./temp-audio-download\";\n  \n  if (!fs.existsSync(tempDir)) {\n    fs.mkdirSync(tempDir, { recursive: true });\n  }\n\n  console.log(`\\n🚀 Download & Upload Portuguese Audio`);\n  console.log(`📖 Book: ${bookInfo.archiveName}`);\n  console.log(`📦 Chapters: ${chapters}\\n`);\n\n  let successful = 0;\n  let failed = 0;\n\n  for (let ch = 1; ch <= chapters; ch++) {\n    const archiveUrl = `https://archive.org/download/por_audio_bible/${bookInfo.archiveName}_${ch.toString().padStart(2, \"0\")}.mp3`;\n    const tempFile = path.join(tempDir, `ch_${ch}.mp3`);\n\n    process.stdout.write(`Ch ${ch.toString().padStart(3)}: `);\n\n    // Download from Archive.org\n    if (!await downloadFromArchive(archiveUrl, tempFile)) {\n      failed++;\n      continue;\n    }\n\n    // Upload to Supabase\n    if (await uploadToSupabase(tempFile, bookAbbrev, ch)) {\n      successful++;\n    } else {\n      failed++;\n    }\n\n    // Delete temp file to save space\n    if (fs.existsSync(tempFile)) {\n      fs.unlinkSync(tempFile);\n    }\n\n    // Rate limiting: 1 second between requests\n    await new Promise(resolve => setTimeout(resolve, 1000));\n  }\n\n  // Cleanup\n  if (fs.existsSync(tempDir)) {\n    fs.rmSync(tempDir, { recursive: true });\n  }\n\n  console.log(`\\n✨ Complete!`);\n  console.log(`✅ Successful: ${successful}`);\n  console.log(`❌ Failed: ${failed}`);\n}\n\nmain().catch(console.error);\n","path":null,"size_bytes":5780,"size_tokens":null},"test-supabase-list.js":{"content":"const { createClient } = require(\"@supabase/supabase-js\");\n\nconst supabaseUrl = \"https://olvumxgyoazdftdyasmx.supabase.co\";\nconst supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n\nif (!supabaseKey) {\n  console.error(\"❌ SUPABASE_SERVICE_ROLE_KEY not set\");\n  process.exit(1);\n}\n\nconst supabase = createClient(supabaseUrl, supabaseKey);\n\nasync function listFiles() {\n  console.log(\"📂 Listing bible-audio bucket...\\n\");\n  \n  try {\n    const { data, error } = await supabase.storage\n      .from(\"bible-audio\")\n      .list(\"PT/ARC/rt\", { limit: 100 });\n    \n    if (error) {\n      console.error(\"❌ Error:\", error);\n      return;\n    }\n    \n    if (!data || data.length === 0) {\n      console.log(\"❌ Nenhum arquivo encontrado em PT/ARC/rt/\");\n      return;\n    }\n    \n    console.log(`✅ Found ${data.length} files:`);\n    data.forEach(file => {\n      console.log(`  - ${file.name}`);\n    });\n  } catch (error) {\n    console.error(\"Error:\", error.message);\n  }\n}\n\nlistFiles();\n","path":null,"size_bytes":985,"size_tokens":null},"client/src/pages/email-verification.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2, Mail, RefreshCw, Edit2 } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface EmailVerificationProps {\n  email?: string;\n}\n\nexport default function EmailVerification(props: EmailVerificationProps) {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [email, setEmail] = useState(props.email || \"\");\n  const [code, setCode] = useState(\"\");\n  const [timeLeft, setTimeLeft] = useState(120);\n  const [canResend, setCanResend] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [newEmail, setNewEmail] = useState(email);\n\n  // Load email from sessionStorage on mount\n  useEffect(() => {\n    const storedEmail = sessionStorage.getItem(\"verificationEmail\");\n    if (storedEmail && !email) {\n      setEmail(storedEmail);\n      setNewEmail(storedEmail);\n    }\n  }, [email]);\n\n  // Timer para reenvio\n  useEffect(() => {\n    if (canResend) return;\n\n    const timer = setInterval(() => {\n      setTimeLeft((prev) => {\n        if (prev <= 1) {\n          setCanResend(true);\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [canResend]);\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\n  };\n\n  // Verifica código OTP via backend\n  const verifyMutation = useMutation({\n    mutationFn: async () => {\n      if (code.length !== 6) {\n        throw new Error(\"Digite um código de 6 dígitos\");\n      }\n\n      const response = await apiRequest(\"POST\", \"/api/auth/verify-otp\", {\n        email,\n        code,\n      });\n      \n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.message || \"Código inválido\");\n      }\n      \n      return data;\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Email verificado!\",\n        description: \"Bem-vindo à BíbliaFS! Você já pode fazer login.\",\n      });\n      // Clear session storage\n      sessionStorage.removeItem(\"verificationEmail\");\n      // Redirect to login\n      setTimeout(() => setLocation(\"/login\"), 1500);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Código inválido\",\n        description: error.message || \"Tente novamente\",\n        variant: \"destructive\",\n      });\n      setCode(\"\");\n    },\n  });\n\n  // Reenvio de código via backend\n  const resendMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(\"POST\", \"/api/auth/resend-otp\", { email });\n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.message || \"Erro ao reenviar código\");\n      }\n      \n      // In development, show code in console\n      if (data.code) {\n        console.log(\"[DEV] Código OTP:\", data.code);\n      }\n      \n      return data;\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Código reenviado!\",\n        description: \"Verifique sua caixa de entrada e spam.\",\n      });\n      setTimeLeft(120);\n      setCanResend(false);\n      setCode(\"\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao reenviar\",\n        description: error.message || \"Tente novamente mais tarde\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Atualizar email e reenviar código\n  const updateEmailMutation = useMutation({\n    mutationFn: async () => {\n      if (!newEmail || newEmail === email) {\n        throw new Error(\"Digite um email diferente\");\n      }\n      \n      const response = await apiRequest(\"POST\", \"/api/auth/resend-otp\", { email: newEmail });\n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.message || \"Erro ao enviar código\");\n      }\n      \n      // Update stored email\n      sessionStorage.setItem(\"verificationEmail\", newEmail);\n      setEmail(newEmail);\n      setIsEditing(false);\n      setCode(\"\");\n      \n      // In development, show code in console\n      if (data.code) {\n        console.log(\"[DEV] Código OTP:\", data.code);\n      }\n      \n      return data;\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Email atualizado!\",\n        description: \"Novo código foi enviado.\",\n      });\n      setTimeLeft(120);\n      setCanResend(false);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (isEditing) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-primary/5 p-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center space-y-4\">\n            <CardTitle className=\"text-2xl font-bold\">Corrigir E-mail</CardTitle>\n            <CardDescription>Digite um novo email para receber o código</CardDescription>\n          </CardHeader>\n\n          <CardContent className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium text-foreground\">Novo Email</label>\n              <Input\n                type=\"email\"\n                value={newEmail}\n                onChange={(e) => setNewEmail(e.target.value)}\n                placeholder=\"novo@email.com\"\n                data-testid=\"input-new-email\"\n                className=\"mt-2\"\n              />\n            </div>\n          </CardContent>\n\n          <CardFooter className=\"gap-3 flex-col\">\n            <Button\n              className=\"w-full\"\n              onClick={() => updateEmailMutation.mutate()}\n              disabled={updateEmailMutation.isPending}\n              data-testid=\"button-confirm-email\"\n            >\n              {updateEmailMutation.isPending ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : null}\n              Atualizar Email\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"w-full\"\n              onClick={() => {\n                setIsEditing(false);\n                setNewEmail(email);\n              }}\n              data-testid=\"button-cancel-email\"\n            >\n              Cancelar\n            </Button>\n          </CardFooter>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-primary/5 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center space-y-4\">\n          <div className=\"mx-auto w-20 h-20 bg-gradient-to-br from-primary/20 to-blue-500/20 rounded-full flex items-center justify-center border border-primary/30\">\n            <Mail className=\"w-10 h-10 text-primary\" />\n          </div>\n\n          <CardTitle className=\"text-2xl font-bold\">Verifique seu Email</CardTitle>\n\n          <CardDescription className=\"text-base\">\n            Enviamos um código de 6 dígitos para{\" \"}\n            <span className=\"font-semibold text-primary break-all\">{email}</span>\n          </CardDescription>\n        </CardHeader>\n\n        <CardContent className=\"space-y-6\">\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium text-foreground\">Código de Verificação</label>\n            <Input\n              type=\"text\"\n              inputMode=\"numeric\"\n              maxLength={6}\n              value={code}\n              onChange={(e) => {\n                const value = e.target.value.replace(/\\D/g, \"\");\n                setCode(value);\n              }}\n              placeholder=\"000000\"\n              data-testid=\"input-verification-code\"\n              className=\"text-center text-2xl font-bold tracking-widest\"\n            />\n            <p className=\"text-xs text-muted-foreground text-center\">Digite o código de 6 dígitos</p>\n          </div>\n\n          <Button\n            onClick={() => verifyMutation.mutate()}\n            disabled={verifyMutation.isPending || code.length !== 6}\n            className=\"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-700 text-white font-semibold\"\n            data-testid=\"button-verify-code\"\n          >\n            {verifyMutation.isPending ? (\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n            ) : null}\n            Verificar Email\n          </Button>\n\n          <div className=\"flex justify-center\">\n            <Button\n              variant=\"ghost\"\n              onClick={() => resendMutation.mutate()}\n              disabled={!canResend || resendMutation.isPending}\n              className=\"text-primary hover:text-primary/80\"\n              data-testid=\"button-resend-code\"\n            >\n              <RefreshCw className=\"mr-1 h-4 w-4\" />\n              {canResend ? \"Não recebeu o código? Reenviar\" : `Reenviar em ${formatTime(timeLeft)}`}\n            </Button>\n          </div>\n\n          <div className=\"flex justify-center\">\n            <Button\n              variant=\"ghost\"\n              onClick={() => setIsEditing(true)}\n              className=\"text-muted-foreground hover:text-foreground\"\n              data-testid=\"button-change-email\"\n            >\n              <Edit2 className=\"mr-1 h-4 w-4\" />\n              Corrigir E-Mail\n            </Button>\n          </div>\n        </CardContent>\n\n        <CardFooter className=\"text-center text-xs text-muted-foreground\">\n          <p className=\"w-full\">\n            Verifique sua caixa de spam se não encontrar o email.\n          </p>\n        </CardFooter>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":10001,"size_tokens":null},"client/src/components/UpdatePopup.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { X, Download, Clock, Shield, Sparkles, Bug, Zap, ShieldCheck } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { APP_VERSION } from \"@/lib/config\";\n\nconst PLAY_STORE_URL = \"https://play.google.com/store/apps/details?id=com.bibliafullstack.app\";\nconst STORAGE_KEY = \"bibliasf_update_dismissed_at\";\nconst DISMISS_DURATION_MS = 24 * 60 * 60 * 1000;\n\ninterface UpdateInfo {\n  currentVersion: string;\n  latestVersion: string;\n  downloadSize: string;\n  critical?: boolean;\n  releaseNotes: {\n    icon: \"sparkles\" | \"bug\" | \"zap\" | \"shield-check\";\n    title: string;\n    description: string;\n  }[];\n}\n\nconst iconMap = {\n  sparkles: Sparkles,\n  bug: Bug,\n  zap: Zap,\n  \"shield-check\": ShieldCheck,\n};\n\nexport function UpdatePopup() {\n  const [isVisible, setIsVisible] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [updateInfo, setUpdateInfo] = useState<UpdateInfo | null>(null);\n\n  useEffect(() => {\n    checkForUpdates();\n    \n    const handleSWUpdate = () => {\n      console.log(\"[UpdatePopup] SW updateAvailable event received\");\n      setUpdateInfo(prev => prev || {\n        currentVersion: APP_VERSION,\n        latestVersion: \"Nova\",\n        downloadSize: \"~15 MB\",\n        releaseNotes: [\n          { icon: \"sparkles\", title: \"Novos recursos\", description: \"Melhorias na experiência de estudo\" },\n          { icon: \"bug\", title: \"Correções\", description: \"Bugs corrigidos para maior estabilidade\" },\n          { icon: \"zap\", title: \"Performance\", description: \"App mais rápido e responsivo\" },\n        ],\n      });\n      setIsVisible(true);\n    };\n\n    window.addEventListener('updateAvailable', handleSWUpdate);\n    return () => window.removeEventListener('updateAvailable', handleSWUpdate);\n  }, []);\n\n  const checkForUpdates = async () => {\n    // Forçar verificação em todos os ambientes mobile e PWA\n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n    const isStandalone = window.matchMedia('(display-mode: standalone)').matches || (window.navigator as any).standalone;\n    \n    // Se não for mobile nem PWA, ainda permitimos verificação na Web para garantir\n    // Mas priorizamos o comportamento de app se for mobile\n    console.log(\"[UpdatePopup] Checking updates. Mobile:\", isMobile, \"Standalone:\", isStandalone);\n\n    const dismissedAt = localStorage.getItem(STORAGE_KEY);\n    if (dismissedAt) {\n      const dismissedTime = parseInt(dismissedAt, 10);\n      // Only skip if dismissed in the last 5 minutes for testing/transition\n      if (Date.now() - dismissedTime < 5 * 60 * 1000) {\n        return;\n      }\n    }\n\n    try {\n      const response = await fetch(`/api/app/version?current=${APP_VERSION}`);\n      if (!response.ok) return;\n      \n      const data = await response.json();\n      \n      if (data.updateAvailable) {\n        setUpdateInfo({\n          currentVersion: data.currentVersion,\n          latestVersion: data.latestVersion,\n          downloadSize: data.downloadSize || \"~15 MB\",\n          releaseNotes: data.releaseNotes || [\n            { icon: \"sparkles\", title: \"Novos recursos\", description: \"Melhorias na experiência de estudo\" },\n            { icon: \"bug\", title: \"Correções\", description: \"Bugs corrigidos para maior estabilidade\" },\n            { icon: \"zap\", title: \"Performance\", description: \"App mais rápido e responsivo\" },\n          ],\n        });\n        setIsVisible(true);\n      }\n    } catch (error) {\n      console.error(\"[UpdatePopup] Error checking for updates:\", error);\n    }\n  };\n\n  const handleUpdate = () => {\n    setIsLoading(true);\n    \n    const marketUrl = \"market://details?id=com.bibliafullstack.app\";\n    \n    const iframe = document.createElement(\"iframe\");\n    iframe.style.display = \"none\";\n    iframe.src = marketUrl;\n    document.body.appendChild(iframe);\n    \n    setTimeout(() => {\n      document.body.removeChild(iframe);\n      window.open(PLAY_STORE_URL, \"_blank\");\n      setIsLoading(false);\n      setIsVisible(false);\n    }, 500);\n  };\n\n  const handleDismiss = () => {\n    localStorage.setItem(STORAGE_KEY, Date.now().toString());\n    setIsVisible(false);\n  };\n\n  if (!updateInfo) return null;\n\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\"\n          onClick={handleDismiss}\n        >\n          <motion.div\n            initial={{ opacity: 0, y: 50, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: 50, scale: 0.95 }}\n            transition={{ type: \"spring\", duration: 0.5 }}\n            className=\"relative w-[calc(100%-48px)] max-w-[280px] bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden mx-6\"\n            onClick={(e) => e.stopPropagation()}\n            data-testid=\"update-popup\"\n          >\n            <div className=\"absolute top-0 left-0 right-0 h-16 bg-gradient-to-br from-[#6c5dd3] to-[#ff9e6d]\" />\n            \n            <button\n              onClick={handleDismiss}\n              className=\"absolute top-2 right-2 z-10 p-1 rounded-full bg-white/20 hover-elevate active-elevate-2 transition-colors\"\n              data-testid=\"button-close-update\"\n            >\n              <X className=\"w-3.5 h-3.5 text-white\" />\n            </button>\n\n            <div className=\"relative pt-4 px-4 pb-4\">\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center shrink-0\">\n                  <Download className=\"w-5 h-5 text-[#6c5dd3]\" />\n                </div>\n                <div className=\"text-left\">\n                  <h2 className=\"text-sm font-extrabold text-gray-900 dark:text-white leading-tight\">\n                    Nova Versão\n                  </h2>\n                  <p className=\"text-[10px] text-gray-500 dark:text-gray-400\">\n                    v{updateInfo.latestVersion} disponível\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"space-y-1.5 mb-4\">\n                {updateInfo.releaseNotes.slice(0, 1).map((note, index) => {\n                  const IconComponent = iconMap[note.icon];\n                  return (\n                    <div\n                      key={index}\n                      className=\"flex items-start gap-2 p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50 border border-gray-100 dark:border-gray-800\"\n                    >\n                      <IconComponent className=\"w-3 h-3 text-[#6c5dd3] mt-0.5 shrink-0\" />\n                      <p className=\"text-[10px] text-gray-600 dark:text-gray-300 leading-snug\">\n                        <span className=\"font-bold\">{note.title}:</span> {note.description}\n                      </p>\n                    </div>\n                  );\n                })}\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-2 mb-4\">\n                <Button\n                  onClick={handleUpdate}\n                  disabled={isLoading}\n                  className=\"h-9 rounded-lg bg-gradient-to-r from-[#6c5dd3] to-[#ff9e6d] text-white font-bold shadow-sm text-[11px] px-2\"\n                  data-testid=\"button-update-now\"\n                >\n                  {isLoading ? (\n                    <motion.div\n                      animate={{ rotate: 360 }}\n                      transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n                      className=\"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full\"\n                    />\n                  ) : (\n                    \"Atualizar\"\n                  )}\n                </Button>\n\n                <Button\n                  onClick={handleDismiss}\n                  variant=\"ghost\"\n                  className=\"h-9 text-gray-500 dark:text-gray-400 text-[11px] px-2\"\n                  data-testid=\"button-remind-later\"\n                >\n                  Depois\n                </Button>\n              </div>\n\n              <div className=\"text-center text-[9px] text-gray-400 dark:text-gray-500\">\n                <p>Tamanho: {updateInfo.downloadSize} • Seguro</p>\n              </div>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n","path":null,"size_bytes":8557,"size_tokens":null},"client/src/lib/config.ts":{"content":"import { Capacitor } from '@capacitor/core';\nimport { APP_URL } from './env-config';\n\nexport const APP_VERSION = '1.0.10';\nexport const APP_NAME = 'BíbliaFS';\n\nfunction isNativePlatform(): boolean {\n  try {\n    return Capacitor.isNativePlatform();\n  } catch {\n    return false;\n  }\n}\n\nexport const isNative = isNativePlatform();\n\nexport function getApiUrl(path: string): string {\n  if (isNative) {\n    if (path.startsWith('/')) {\n      return `${APP_URL}${path}`;\n    }\n    return `${APP_URL}/${path}`;\n  }\n  return path;\n}\n\nexport async function apiFetch(\n  input: RequestInfo | URL,\n  init?: RequestInit\n): Promise<Response> {\n  const url = typeof input === 'string' ? getApiUrl(input) : input;\n  return fetch(url, init);\n}\n","path":null,"size_bytes":727,"size_tokens":null},"android/app/src/main/assets/public/cordova_plugins.js":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"scripts/inject-env.js":{"content":"import fs from 'fs';\nimport path from 'path';\n\n// This script creates a .env file with the required variables for Vite build\n// It reads from process.env and writes to .env so Vite can access them\n\nconst envVars = [\n  'VITE_SUPABASE_URL',\n  'VITE_SUPABASE_ANON_KEY',\n  'VITE_STRIPE_PUBLIC_KEY',\n  'VITE_STRIPE_MONTHLY_PRICE_ID',\n  'VITE_STRIPE_YEARLY_PRICE_ID',\n  'VITE_STRIPE_PREMIUM_PLUS_PRICE_ID',\n  'VITE_STRIPE_DONATION_10_PRICE_ID',\n  'VITE_STRIPE_DONATION_25_PRICE_ID',\n  'VITE_STRIPE_DONATION_50_PRICE_ID',\n  'VITE_STRIPE_DONATION_100_PRICE_ID',\n  'VITE_STRIPE_DONATION_CUSTOM_PRICE_ID',\n  'VITE_APP_URL'\n];\n\nlet envContent = '';\n\nfor (const varName of envVars) {\n  const value = process.env[varName];\n  if (value) {\n    envContent += `${varName}=${value}\\n`;\n    console.log(`✓ ${varName} found`);\n  } else {\n    console.log(`✗ ${varName} not found`);\n  }\n}\n\n// Write to .env file in the root directory\nfs.writeFileSync('.env', envContent);\nconsole.log('\\n.env file created for Vite build');\n","path":null,"size_bytes":1005,"size_tokens":null},"client/src/lib/shareUtils.ts":{"content":"export interface ShareData {\n  title: string;\n  text: string;\n  url?: string;\n}\n\nexport async function shareContent(data: ShareData): Promise<boolean> {\n  if (navigator.share) {\n    try {\n      await navigator.share({\n        title: data.title,\n        text: data.text,\n        url: data.url || window.location.href,\n      });\n      return true;\n    } catch (error) {\n      if ((error as Error).name !== \"AbortError\") {\n        console.error(\"Share failed:\", error);\n      }\n      return false;\n    }\n  }\n  return false;\n}\n\nexport function copyToClipboard(text: string): Promise<boolean> {\n  return navigator.clipboard.writeText(text).then(\n    () => true,\n    () => false\n  );\n}\n\nexport function generateVerseShareText(\n  bookName: string,\n  chapter: number,\n  verseNumber: number,\n  verseText: string,\n  version: string\n): string {\n  return `\"${verseText}\"\\n\\n— ${bookName} ${chapter}:${verseNumber} (${version.toUpperCase()})\\n\\nCompartilhado via BíbliaFS`;\n}\n\nexport function generateVerseShareUrl(\n  book: string,\n  chapter: number,\n  verse: number,\n  version: string\n): string {\n  // Import dynamically to avoid circular dependency\n  const APP_URL = \"https://bibliafs.com.br\";\n  return `${APP_URL}/bible?book=${book}&chapter=${chapter}&verse=${verse}&version=${version}`;\n}\n\nexport function getWhatsAppShareUrl(text: string): string {\n  return `https://wa.me/?text=${encodeURIComponent(text)}`;\n}\n\nexport function getTelegramShareUrl(text: string, url?: string): string {\n  const params = new URLSearchParams({ text });\n  if (url) params.append(\"url\", url);\n  return `https://t.me/share/url?${params.toString()}`;\n}\n\nexport function getTwitterShareUrl(text: string, url?: string): string {\n  const params = new URLSearchParams({ text });\n  if (url) params.append(\"url\", url);\n  return `https://twitter.com/intent/tweet?${params.toString()}`;\n}\n\nexport function getFacebookShareUrl(url: string): string {\n  return `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;\n}\n","path":null,"size_bytes":1999,"size_tokens":null},"android/app/src/main/assets/public/assets/web-C8I059dS.js":{"content":"import{W as t}from\"./index-UgX1grkG.js\";class s extends t{constructor(){super(),this.handleVisibilityChange=()=>{const e={isActive:document.hidden!==!0};this.notifyListeners(\"appStateChange\",e),document.hidden?this.notifyListeners(\"pause\",null):this.notifyListeners(\"resume\",null)},document.addEventListener(\"visibilitychange\",this.handleVisibilityChange,!1)}exitApp(){throw this.unimplemented(\"Not implemented on web.\")}async getInfo(){throw this.unimplemented(\"Not implemented on web.\")}async getLaunchUrl(){return{url:\"\"}}async getState(){return{isActive:document.hidden!==!0}}async minimizeApp(){throw this.unimplemented(\"Not implemented on web.\")}async toggleBackButtonHandler(){throw this.unimplemented(\"Not implemented on web.\")}}export{s as AppWeb};\n","path":null,"size_bytes":758,"size_tokens":null},"client/src/hooks/useDeepLinks.ts":{"content":"import { useEffect } from 'react';\nimport { App, URLOpenListenerEvent } from '@capacitor/app';\nimport { isNative } from '@/lib/config';\nimport { supabase } from '@/lib/supabase';\n\nexport function useDeepLinks(onAuthCallback?: () => void) {\n  useEffect(() => {\n    if (!isNative) return;\n\n    const handleDeepLink = async (event: URLOpenListenerEvent) => {\n      const url = event.url;\n      console.log('[DeepLink] Received URL:', url);\n\n      try {\n        const urlObj = new URL(url);\n        let authSuccess = false;\n        \n        if (urlObj.hash && urlObj.hash.includes('access_token')) {\n          const hashParams = new URLSearchParams(urlObj.hash.substring(1));\n          const accessToken = hashParams.get('access_token');\n          const refreshToken = hashParams.get('refresh_token');\n\n          if (accessToken && refreshToken) {\n            console.log('[DeepLink] Setting session from OAuth callback');\n            const { error } = await supabase.auth.setSession({\n              access_token: accessToken,\n              refresh_token: refreshToken,\n            });\n\n            if (error) {\n              console.error('[DeepLink] Error setting session:', error);\n            } else {\n              console.log('[DeepLink] Session set successfully');\n              authSuccess = true;\n            }\n          }\n        } else if (urlObj.searchParams.has('code')) {\n          const code = urlObj.searchParams.get('code');\n          if (code) {\n            console.log('[DeepLink] Exchanging auth code for session');\n            const { error } = await supabase.auth.exchangeCodeForSession(code);\n            if (error) {\n              console.error('[DeepLink] Error exchanging code:', error);\n            } else {\n              console.log('[DeepLink] Code exchanged successfully');\n              authSuccess = true;\n            }\n          }\n        }\n        \n        if (authSuccess) {\n          onAuthCallback?.();\n        }\n      } catch (error) {\n        console.error('[DeepLink] Error processing URL:', error);\n      }\n    };\n\n    App.addListener('appUrlOpen', handleDeepLink);\n\n    App.getLaunchUrl().then((result) => {\n      if (result?.url) {\n        console.log('[DeepLink] App launched with URL:', result.url);\n        handleDeepLink({ url: result.url });\n      }\n    });\n\n    return () => {\n      App.removeAllListeners();\n    };\n  }, [onAuthCallback]);\n}\n","path":null,"size_bytes":2387,"size_tokens":null},"client/src/lib/persistentStorage.ts":{"content":"const DB_NAME = 'bibliaffs-auth';\nconst STORE_NAME = 'session';\nconst DB_VERSION = 1;\n\nlet dbPromise: Promise<IDBDatabase> | null = null;\n\nfunction getDB(): Promise<IDBDatabase> {\n  if (dbPromise) return dbPromise;\n  \n  dbPromise = new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n    \n    request.onerror = () => reject(request.error);\n    request.onsuccess = () => resolve(request.result);\n    \n    request.onupgradeneeded = (event) => {\n      const db = (event.target as IDBOpenDBRequest).result;\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\n        db.createObjectStore(STORE_NAME);\n      }\n    };\n  });\n  \n  return dbPromise;\n}\n\nexport const persistentStorage = {\n  async getItem(key: string): Promise<string | null> {\n    try {\n      const db = await getDB();\n      return new Promise((resolve, reject) => {\n        const transaction = db.transaction(STORE_NAME, 'readonly');\n        const store = transaction.objectStore(STORE_NAME);\n        const request = store.get(key);\n        \n        request.onerror = () => reject(request.error);\n        request.onsuccess = () => resolve(request.result ?? null);\n      });\n    } catch (error) {\n      console.warn('[PersistentStorage] IndexedDB getItem failed:', error);\n      return null;\n    }\n  },\n  \n  async setItem(key: string, value: string): Promise<void> {\n    try {\n      const db = await getDB();\n      return new Promise((resolve, reject) => {\n        const transaction = db.transaction(STORE_NAME, 'readwrite');\n        const store = transaction.objectStore(STORE_NAME);\n        const request = store.put(value, key);\n        \n        request.onerror = () => reject(request.error);\n        request.onsuccess = () => resolve();\n      });\n    } catch (error) {\n      console.warn('[PersistentStorage] IndexedDB setItem failed:', error);\n    }\n  },\n  \n  async removeItem(key: string): Promise<void> {\n    try {\n      const db = await getDB();\n      return new Promise((resolve, reject) => {\n        const transaction = db.transaction(STORE_NAME, 'readwrite');\n        const store = transaction.objectStore(STORE_NAME);\n        const request = store.delete(key);\n        \n        request.onerror = () => reject(request.error);\n        request.onsuccess = () => resolve();\n      });\n    } catch (error) {\n      console.warn('[PersistentStorage] IndexedDB removeItem failed:', error);\n    }\n  },\n\n  async getAllKeys(): Promise<string[]> {\n    try {\n      const db = await getDB();\n      return new Promise((resolve, reject) => {\n        const transaction = db.transaction(STORE_NAME, 'readonly');\n        const store = transaction.objectStore(STORE_NAME);\n        const request = store.getAllKeys();\n        \n        request.onerror = () => reject(request.error);\n        request.onsuccess = () => resolve(request.result.map(k => String(k)));\n      });\n    } catch (error) {\n      console.warn('[PersistentStorage] IndexedDB getAllKeys failed:', error);\n      return [];\n    }\n  },\n\n  async clearAll(): Promise<void> {\n    try {\n      const db = await getDB();\n      return new Promise((resolve, reject) => {\n        const transaction = db.transaction(STORE_NAME, 'readwrite');\n        const store = transaction.objectStore(STORE_NAME);\n        const request = store.clear();\n        \n        request.onerror = () => reject(request.error);\n        request.onsuccess = () => resolve();\n      });\n    } catch (error) {\n      console.warn('[PersistentStorage] IndexedDB clearAll failed:', error);\n    }\n  }\n};\n\nexport async function hydrateLocalStorageFromIndexedDB(): Promise<void> {\n  try {\n    const keys = await persistentStorage.getAllKeys();\n    const supabaseKeys = keys.filter(key => key.startsWith('sb-'));\n    \n    for (const key of supabaseKeys) {\n      const localValue = localStorage.getItem(key);\n      if (!localValue) {\n        const idbValue = await persistentStorage.getItem(key);\n        if (idbValue) {\n          console.log(`[Hydration] Restoring ${key} from IndexedDB to localStorage`);\n          localStorage.setItem(key, idbValue);\n        }\n      }\n    }\n  } catch (error) {\n    console.warn('[Hydration] Failed to hydrate localStorage from IndexedDB:', error);\n  }\n}\n\nexport async function syncLocalStorageToIndexedDB(): Promise<void> {\n  try {\n    const keys = Object.keys(localStorage).filter(key => key.startsWith('sb-'));\n    \n    for (const key of keys) {\n      const value = localStorage.getItem(key);\n      if (value) {\n        await persistentStorage.setItem(key, value);\n      }\n    }\n  } catch (error) {\n    console.warn('[Sync] Failed to sync localStorage to IndexedDB:', error);\n  }\n}\n\nexport async function clearAllAuthStorage(): Promise<void> {\n  try {\n    const keys = Object.keys(localStorage).filter(key => key.startsWith('sb-'));\n    for (const key of keys) {\n      localStorage.removeItem(key);\n    }\n    \n    await persistentStorage.clearAll();\n    console.log('[Auth] Cleared all auth storage');\n  } catch (error) {\n    console.warn('[Auth] Failed to clear all auth storage:', error);\n  }\n}\n","path":null,"size_bytes":5043,"size_tokens":null},"android/app/src/main/assets/public/assets/index-UgX1grkG.js":{"content":"var ZU=Object.defineProperty;var TS=e=>{throw TypeError(e)};var e9=(e,t,r)=>t in e?ZU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var U=(e,t,r)=>e9(e,typeof t!=\"symbol\"?t+\"\":t,r),Ly=(e,t,r)=>t.has(e)||TS(\"Cannot \"+r);var B=(e,t,r)=>(Ly(e,t,\"read from private field\"),r?r.call(e):t.get(e)),lt=(e,t,r)=>t.has(e)?TS(\"Cannot add the same private member more than once\"):t instanceof WeakSet?t.add(e):t.set(e,r),De=(e,t,r,s)=>(Ly(e,t,\"write to private field\"),s?s.call(e,r):t.set(e,r),r),Ot=(e,t,r)=>(Ly(e,t,\"access private method\"),r);var mp=(e,t,r,s)=>({set _(a){De(e,t,a,r)},get _(){return B(e,t,s)}});function K4(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!=\"string\"&&!Array.isArray(s)){for(const a in s)if(a!==\"default\"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}))}(function(){const t=document.createElement(\"link\").relList;if(t&&t.supports&&t.supports(\"modulepreload\"))return;for(const a of document.querySelectorAll('link[rel=\"modulepreload\"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type===\"childList\")for(const o of i.addedNodes)o.tagName===\"LINK\"&&o.rel===\"modulepreload\"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin===\"use-credentials\"?i.credentials=\"include\":a.crossOrigin===\"anonymous\"?i.credentials=\"omit\":i.credentials=\"same-origin\",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var cd=typeof globalThis<\"u\"?globalThis:typeof window<\"u\"?window:typeof global<\"u\"?global:typeof self<\"u\"?self:{};function dv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}function Yu(e){if(e.__esModule)return e;var t=e.default;if(typeof t==\"function\"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,\"__esModule\",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var G4={exports:{}},uv={},Q4={exports:{}},Bt={};/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var _f=Symbol.for(\"react.element\"),t9=Symbol.for(\"react.portal\"),r9=Symbol.for(\"react.fragment\"),s9=Symbol.for(\"react.strict_mode\"),n9=Symbol.for(\"react.profiler\"),a9=Symbol.for(\"react.provider\"),i9=Symbol.for(\"react.context\"),o9=Symbol.for(\"react.forward_ref\"),l9=Symbol.for(\"react.suspense\"),c9=Symbol.for(\"react.memo\"),d9=Symbol.for(\"react.lazy\"),AS=Symbol.iterator;function u9(e){return e===null||typeof e!=\"object\"?null:(e=AS&&e[AS]||e[\"@@iterator\"],typeof e==\"function\"?e:null)}var J4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X4=Object.assign,Y4={};function Zu(e,t,r){this.props=e,this.context=t,this.refs=Y4,this.updater=r||J4}Zu.prototype.isReactComponent={};Zu.prototype.setState=function(e,t){if(typeof e!=\"object\"&&typeof e!=\"function\"&&e!=null)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,e,t,\"setState\")};Zu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,\"forceUpdate\")};function Z4(){}Z4.prototype=Zu.prototype;function Yj(e,t,r){this.props=e,this.context=t,this.refs=Y4,this.updater=r||J4}var Zj=Yj.prototype=new Z4;Zj.constructor=Yj;X4(Zj,Zu.prototype);Zj.isPureReactComponent=!0;var RS=Array.isArray,e5=Object.prototype.hasOwnProperty,e1={current:null},t5={key:!0,ref:!0,__self:!0,__source:!0};function r5(e,t,r){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=\"\"+t.key),t)e5.call(t,s)&&!t5.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:_f,type:e,key:i,ref:o,props:a,_owner:e1.current}}function h9(e,t){return{$$typeof:_f,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function t1(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===_f}function m9(e){var t={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+e.replace(/[=:]/g,function(r){return t[r]})}var OS=/\\/+/g;function $y(e,t){return typeof e==\"object\"&&e!==null&&e.key!=null?m9(\"\"+e.key):t.toString(36)}function lg(e,t,r,s,a){var i=typeof e;(i===\"undefined\"||i===\"boolean\")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case\"string\":case\"number\":o=!0;break;case\"object\":switch(e.$$typeof){case _f:case t9:o=!0}}if(o)return o=e,a=a(o),e=s===\"\"?\".\"+$y(o,0):s,RS(a)?(r=\"\",e!=null&&(r=e.replace(OS,\"$&/\")+\"/\"),lg(a,t,r,\"\",function(d){return d})):a!=null&&(t1(a)&&(a=h9(a,r+(!a.key||o&&o.key===a.key?\"\":(\"\"+a.key).replace(OS,\"$&/\")+\"/\")+e)),t.push(a)),1;if(o=0,s=s===\"\"?\".\":s+\":\",RS(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+$y(i,l);o+=lg(i,t,r,c,a)}else if(c=u9(e),typeof c==\"function\")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+$y(i,l++),o+=lg(i,t,r,c,a);else if(i===\"object\")throw t=String(e),Error(\"Objects are not valid as a React child (found: \"+(t===\"[object Object]\"?\"object with keys {\"+Object.keys(e).join(\", \")+\"}\":t)+\"). If you meant to render a collection of children, use an array instead.\");return o}function fp(e,t,r){if(e==null)return e;var s=[],a=0;return lg(e,s,\"\",\"\",function(i){return t.call(r,i,a++)}),s}function f9(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mn={current:null},cg={transition:null},p9={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:cg,ReactCurrentOwner:e1};function s5(){throw Error(\"act(...) is not supported in production builds of React.\")}Bt.Children={map:fp,forEach:function(e,t,r){fp(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return fp(e,function(){t++}),t},toArray:function(e){return fp(e,function(t){return t})||[]},only:function(e){if(!t1(e))throw Error(\"React.Children.only expected to receive a single React element child.\");return e}};Bt.Component=Zu;Bt.Fragment=r9;Bt.Profiler=n9;Bt.PureComponent=Yj;Bt.StrictMode=s9;Bt.Suspense=l9;Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p9;Bt.act=s5;Bt.cloneElement=function(e,t,r){if(e==null)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+e+\".\");var s=X4({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=e1.current),t.key!==void 0&&(a=\"\"+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)e5.call(t,c)&&!t5.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:_f,type:e.type,key:a,ref:i,props:s,_owner:o}};Bt.createContext=function(e){return e={$$typeof:i9,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:a9,_context:e},e.Consumer=e};Bt.createElement=r5;Bt.createFactory=function(e){var t=r5.bind(null,e);return t.type=e,t};Bt.createRef=function(){return{current:null}};Bt.forwardRef=function(e){return{$$typeof:o9,render:e}};Bt.isValidElement=t1;Bt.lazy=function(e){return{$$typeof:d9,_payload:{_status:-1,_result:e},_init:f9}};Bt.memo=function(e,t){return{$$typeof:c9,type:e,compare:t===void 0?null:t}};Bt.startTransition=function(e){var t=cg.transition;cg.transition={};try{e()}finally{cg.transition=t}};Bt.unstable_act=s5;Bt.useCallback=function(e,t){return mn.current.useCallback(e,t)};Bt.useContext=function(e){return mn.current.useContext(e)};Bt.useDebugValue=function(){};Bt.useDeferredValue=function(e){return mn.current.useDeferredValue(e)};Bt.useEffect=function(e,t){return mn.current.useEffect(e,t)};Bt.useId=function(){return mn.current.useId()};Bt.useImperativeHandle=function(e,t,r){return mn.current.useImperativeHandle(e,t,r)};Bt.useInsertionEffect=function(e,t){return mn.current.useInsertionEffect(e,t)};Bt.useLayoutEffect=function(e,t){return mn.current.useLayoutEffect(e,t)};Bt.useMemo=function(e,t){return mn.current.useMemo(e,t)};Bt.useReducer=function(e,t,r){return mn.current.useReducer(e,t,r)};Bt.useRef=function(e){return mn.current.useRef(e)};Bt.useState=function(e){return mn.current.useState(e)};Bt.useSyncExternalStore=function(e,t,r){return mn.current.useSyncExternalStore(e,t,r)};Bt.useTransition=function(){return mn.current.useTransition()};Bt.version=\"18.3.1\";Q4.exports=Bt;var f=Q4.exports;const He=dv(f),n5=K4({__proto__:null,default:He},[f]);/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var g9=f,x9=Symbol.for(\"react.element\"),v9=Symbol.for(\"react.fragment\"),y9=Object.prototype.hasOwnProperty,b9=g9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w9={key:!0,ref:!0,__self:!0,__source:!0};function a5(e,t,r){var s,a={},i=null,o=null;r!==void 0&&(i=\"\"+r),t.key!==void 0&&(i=\"\"+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)y9.call(t,s)&&!w9.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:x9,type:e,key:i,ref:o,props:a,_owner:b9.current}}uv.Fragment=v9;uv.jsx=a5;uv.jsxs=a5;G4.exports=uv;var n=G4.exports,i5={exports:{}},ra={},o5={exports:{}},l5={};/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */(function(e){function t(H,V){var oe=H.length;H.push(V);e:for(;0<oe;){var _e=oe-1>>>1,ke=H[_e];if(0<a(ke,V))H[_e]=V,H[oe]=ke,oe=_e;else break e}}function r(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var V=H[0],oe=H.pop();if(oe!==V){H[0]=oe;e:for(var _e=0,ke=H.length,at=ke>>>1;_e<at;){var it=2*(_e+1)-1,kt=H[it],wt=it+1,Ee=H[wt];if(0>a(kt,oe))wt<ke&&0>a(Ee,kt)?(H[_e]=Ee,H[wt]=oe,_e=wt):(H[_e]=kt,H[it]=oe,_e=it);else if(wt<ke&&0>a(Ee,oe))H[_e]=Ee,H[wt]=oe,_e=wt;else break e}}return V}function a(H,V){var oe=H.sortIndex-V.sortIndex;return oe!==0?oe:H.id-V.id}if(typeof performance==\"object\"&&typeof performance.now==\"function\"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,g=!1,v=!1,x=!1,w=typeof setTimeout==\"function\"?setTimeout:null,y=typeof clearTimeout==\"function\"?clearTimeout:null,b=typeof setImmediate<\"u\"?setImmediate:null;typeof navigator<\"u\"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(H){for(var V=r(d);V!==null;){if(V.callback===null)s(d);else if(V.startTime<=H)s(d),V.sortIndex=V.expirationTime,t(c,V);else break;V=r(d)}}function _(H){if(x=!1,N(H),!v)if(r(c)!==null)v=!0,F(E);else{var V=r(d);V!==null&&ce(_,V.startTime-H)}}function E(H,V){v=!1,x&&(x=!1,y(C),C=-1),g=!0;var oe=m;try{for(N(V),h=r(c);h!==null&&(!(h.expirationTime>V)||H&&!q());){var _e=h.callback;if(typeof _e==\"function\"){h.callback=null,m=h.priorityLevel;var ke=_e(h.expirationTime<=V);V=e.unstable_now(),typeof ke==\"function\"?h.callback=ke:h===r(c)&&s(c),N(V)}else s(c);h=r(c)}if(h!==null)var at=!0;else{var it=r(d);it!==null&&ce(_,it.startTime-V),at=!1}return at}finally{h=null,m=oe,g=!1}}var k=!1,P=null,C=-1,A=5,O=-1;function q(){return!(e.unstable_now()-O<A)}function K(){if(P!==null){var H=e.unstable_now();O=H;var V=!0;try{V=P(!0,H)}finally{V?D():(k=!1,P=null)}}else k=!1}var D;if(typeof b==\"function\")D=function(){b(K)};else if(typeof MessageChannel<\"u\"){var W=new MessageChannel,Q=W.port2;W.port1.onmessage=K,D=function(){Q.postMessage(null)}}else D=function(){w(K,0)};function F(H){P=H,k||(k=!0,D())}function ce(H,V){C=w(function(){H(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,F(E))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):A=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(H){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var oe=m;m=V;try{return H()}finally{m=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,V){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var oe=m;m=H;try{return V()}finally{m=oe}},e.unstable_scheduleCallback=function(H,V,oe){var _e=e.unstable_now();switch(typeof oe==\"object\"&&oe!==null?(oe=oe.delay,oe=typeof oe==\"number\"&&0<oe?_e+oe:_e):oe=_e,H){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=oe+ke,H={id:u++,callback:V,priorityLevel:H,startTime:oe,expirationTime:ke,sortIndex:-1},oe>_e?(H.sortIndex=oe,t(d,H),r(c)===null&&H===r(d)&&(x?(y(C),C=-1):x=!0,ce(_,oe-_e))):(H.sortIndex=ke,t(c,H),v||g||(v=!0,F(E))),H},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(H){var V=m;return function(){var oe=m;m=V;try{return H.apply(this,arguments)}finally{m=oe}}}})(l5);o5.exports=l5;var j9=o5.exports;/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var N9=f,Zn=j9;function be(e){for(var t=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+e,r=1;r<arguments.length;r++)t+=\"&args[]=\"+encodeURIComponent(arguments[r]);return\"Minified React error #\"+e+\"; visit \"+t+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var c5=new Set,_m={};function Gc(e,t){Nu(e,t),Nu(e+\"Capture\",t)}function Nu(e,t){for(_m[e]=t,e=0;e<t.length;e++)c5.add(t[e])}var ao=!(typeof window>\"u\"||typeof window.document>\"u\"||typeof window.document.createElement>\"u\"),v0=Object.prototype.hasOwnProperty,_9=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,IS={},DS={};function S9(e){return v0.call(DS,e)?!0:v0.call(IS,e)?!1:_9.test(e)?DS[e]=!0:(IS[e]=!0,!1)}function k9(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case\"function\":case\"symbol\":return!0;case\"boolean\":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!==\"data-\"&&e!==\"aria-\");default:return!1}}function C9(e,t,r,s){if(t===null||typeof t>\"u\"||k9(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function fn(e,t,r,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var $s={};\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(e){$s[e]=new fn(e,0,!1,e,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(e){var t=e[0];$s[t]=new fn(t,1,!1,e[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(e){$s[e]=new fn(e,2,!1,e.toLowerCase(),null,!1,!1)});[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(e){$s[e]=new fn(e,2,!1,e,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(e){$s[e]=new fn(e,3,!1,e.toLowerCase(),null,!1,!1)});[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(e){$s[e]=new fn(e,3,!0,e,null,!1,!1)});[\"capture\",\"download\"].forEach(function(e){$s[e]=new fn(e,4,!1,e,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(e){$s[e]=new fn(e,6,!1,e,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(e){$s[e]=new fn(e,5,!1,e.toLowerCase(),null,!1,!1)});var r1=/[\\-:]([a-z])/g;function s1(e){return e[1].toUpperCase()}\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(e){var t=e.replace(r1,s1);$s[t]=new fn(t,1,!1,e,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(e){var t=e.replace(r1,s1);$s[t]=new fn(t,1,!1,e,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(e){var t=e.replace(r1,s1);$s[t]=new fn(t,1,!1,e,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(e){$s[e]=new fn(e,1,!1,e.toLowerCase(),null,!1,!1)});$s.xlinkHref=new fn(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(e){$s[e]=new fn(e,1,!1,e.toLowerCase(),null,!0,!0)});function n1(e,t,r,s){var a=$s.hasOwnProperty(t)?$s[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!==\"o\"&&t[0]!==\"O\"||t[1]!==\"n\"&&t[1]!==\"N\")&&(C9(t,r,a,s)&&(r=null),s||a===null?S9(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,\"\"+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:\"\":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?\"\":\"\"+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var go=N9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pp=Symbol.for(\"react.element\"),kd=Symbol.for(\"react.portal\"),Cd=Symbol.for(\"react.fragment\"),a1=Symbol.for(\"react.strict_mode\"),y0=Symbol.for(\"react.profiler\"),d5=Symbol.for(\"react.provider\"),u5=Symbol.for(\"react.context\"),i1=Symbol.for(\"react.forward_ref\"),b0=Symbol.for(\"react.suspense\"),w0=Symbol.for(\"react.suspense_list\"),o1=Symbol.for(\"react.memo\"),Lo=Symbol.for(\"react.lazy\"),h5=Symbol.for(\"react.offscreen\"),MS=Symbol.iterator;function Ph(e){return e===null||typeof e!=\"object\"?null:(e=MS&&e[MS]||e[\"@@iterator\"],typeof e==\"function\"?e:null)}var Rr=Object.assign,Fy;function Kh(e){if(Fy===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\\n( *(at )?)/);Fy=t&&t[1]||\"\"}return`\n`+Fy+e}var Vy=!1;function zy(e,t){if(!e||Vy)return\"\";Vy=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack==\"string\"){for(var a=d.stack.split(`\n`),i=s.stack.split(`\n`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`\n`+a[o].replace(\" at new \",\" at \");return e.displayName&&c.includes(\"<anonymous>\")&&(c=c.replace(\"<anonymous>\",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Vy=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:\"\")?Kh(e):\"\"}function E9(e){switch(e.tag){case 5:return Kh(e.type);case 16:return Kh(\"Lazy\");case 13:return Kh(\"Suspense\");case 19:return Kh(\"SuspenseList\");case 0:case 2:case 15:return e=zy(e.type,!1),e;case 11:return e=zy(e.type.render,!1),e;case 1:return e=zy(e.type,!0),e;default:return\"\"}}function j0(e){if(e==null)return null;if(typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case Cd:return\"Fragment\";case kd:return\"Portal\";case y0:return\"Profiler\";case a1:return\"StrictMode\";case b0:return\"Suspense\";case w0:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case u5:return(e.displayName||\"Context\")+\".Consumer\";case d5:return(e._context.displayName||\"Context\")+\".Provider\";case i1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||\"\",e=e!==\"\"?\"ForwardRef(\"+e+\")\":\"ForwardRef\"),e;case o1:return t=e.displayName||null,t!==null?t:j0(e.type)||\"Memo\";case Lo:t=e._payload,e=e._init;try{return j0(e(t))}catch{}}return null}function P9(e){var t=e.type;switch(e.tag){case 24:return\"Cache\";case 9:return(t.displayName||\"Context\")+\".Consumer\";case 10:return(t._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return e=t.render,e=e.displayName||e.name||\"\",t.displayName||(e!==\"\"?\"ForwardRef(\"+e+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return t;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return j0(t);case 8:return t===a1?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";case 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t==\"function\")return t.displayName||t.name||null;if(typeof t==\"string\")return t}return null}function bl(e){switch(typeof e){case\"boolean\":case\"number\":case\"string\":case\"undefined\":return e;case\"object\":return e;default:return\"\"}}function m5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===\"input\"&&(t===\"checkbox\"||t===\"radio\")}function T9(e){var t=m5(e)?\"checked\":\"value\",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=\"\"+e[t];if(!e.hasOwnProperty(t)&&typeof r<\"u\"&&typeof r.get==\"function\"&&typeof r.set==\"function\"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=\"\"+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=\"\"+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gp(e){e._valueTracker||(e._valueTracker=T9(e))}function f5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s=\"\";return e&&(s=m5(e)?e.checked?\"true\":\"false\":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Fg(e){if(e=e||(typeof document<\"u\"?document:void 0),typeof e>\"u\")return null;try{return e.activeElement||e.body}catch{return e.body}}function N0(e,t){var r=t.checked;return Rr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function LS(e,t){var r=t.defaultValue==null?\"\":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=bl(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type===\"checkbox\"||t.type===\"radio\"?t.checked!=null:t.value!=null}}function p5(e,t){t=t.checked,t!=null&&n1(e,\"checked\",t,!1)}function _0(e,t){p5(e,t);var r=bl(t.value),s=t.type;if(r!=null)s===\"number\"?(r===0&&e.value===\"\"||e.value!=r)&&(e.value=\"\"+r):e.value!==\"\"+r&&(e.value=\"\"+r);else if(s===\"submit\"||s===\"reset\"){e.removeAttribute(\"value\");return}t.hasOwnProperty(\"value\")?S0(e,t.type,r):t.hasOwnProperty(\"defaultValue\")&&S0(e,t.type,bl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $S(e,t,r){if(t.hasOwnProperty(\"value\")||t.hasOwnProperty(\"defaultValue\")){var s=t.type;if(!(s!==\"submit\"&&s!==\"reset\"||t.value!==void 0&&t.value!==null))return;t=\"\"+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==\"\"&&(e.name=\"\"),e.defaultChecked=!!e._wrapperState.initialChecked,r!==\"\"&&(e.name=r)}function S0(e,t,r){(t!==\"number\"||Fg(e.ownerDocument)!==e)&&(r==null?e.defaultValue=\"\"+e._wrapperState.initialValue:e.defaultValue!==\"\"+r&&(e.defaultValue=\"\"+r))}var Gh=Array.isArray;function Hd(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t[\"$\"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty(\"$\"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=\"\"+bl(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function k0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(be(91));return Rr({},t,{value:void 0,defaultValue:void 0,children:\"\"+e._wrapperState.initialValue})}function FS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(be(92));if(Gh(r)){if(1<r.length)throw Error(be(93));r=r[0]}t=r}t==null&&(t=\"\"),r=t}e._wrapperState={initialValue:bl(r)}}function g5(e,t){var r=bl(t.value),s=bl(t.defaultValue);r!=null&&(r=\"\"+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=\"\"+s)}function VS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==\"\"&&t!==null&&(e.value=t)}function x5(e){switch(e){case\"svg\":return\"http://www.w3.org/2000/svg\";case\"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function C0(e,t){return e==null||e===\"http://www.w3.org/1999/xhtml\"?x5(t):e===\"http://www.w3.org/2000/svg\"&&t===\"foreignObject\"?\"http://www.w3.org/1999/xhtml\":e}var xp,v5=function(e){return typeof MSApp<\"u\"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!==\"http://www.w3.org/2000/svg\"||\"innerHTML\"in e)e.innerHTML=t;else{for(xp=xp||document.createElement(\"div\"),xp.innerHTML=\"<svg>\"+t.valueOf().toString()+\"</svg>\",t=xp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sm(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var am={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A9=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(am).forEach(function(e){A9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),am[t]=am[e]})});function y5(e,t,r){return t==null||typeof t==\"boolean\"||t===\"\"?\"\":r||typeof t!=\"number\"||t===0||am.hasOwnProperty(e)&&am[e]?(\"\"+t).trim():t+\"px\"}function b5(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf(\"--\")===0,a=y5(r,t[r],s);r===\"float\"&&(r=\"cssFloat\"),s?e.setProperty(r,a):e[r]=a}}var R9=Rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function E0(e,t){if(t){if(R9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(be(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(be(60));if(typeof t.dangerouslySetInnerHTML!=\"object\"||!(\"__html\"in t.dangerouslySetInnerHTML))throw Error(be(61))}if(t.style!=null&&typeof t.style!=\"object\")throw Error(be(62))}}function P0(e,t){if(e.indexOf(\"-\")===-1)return typeof t.is==\"string\";switch(e){case\"annotation-xml\":case\"color-profile\":case\"font-face\":case\"font-face-src\":case\"font-face-uri\":case\"font-face-format\":case\"font-face-name\":case\"missing-glyph\":return!1;default:return!0}}var T0=null;function l1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var A0=null,Wd=null,Kd=null;function zS(e){if(e=Cf(e)){if(typeof A0!=\"function\")throw Error(be(280));var t=e.stateNode;t&&(t=gv(t),A0(e.stateNode,e.type,t))}}function w5(e){Wd?Kd?Kd.push(e):Kd=[e]:Wd=e}function j5(){if(Wd){var e=Wd,t=Kd;if(Kd=Wd=null,zS(e),t)for(e=0;e<t.length;e++)zS(t[e])}}function N5(e,t){return e(t)}function _5(){}var By=!1;function S5(e,t,r){if(By)return e(t,r);By=!0;try{return N5(e,t,r)}finally{By=!1,(Wd!==null||Kd!==null)&&(_5(),j5())}}function km(e,t){var r=e.stateNode;if(r===null)return null;var s=gv(r);if(s===null)return null;r=s[t];e:switch(t){case\"onClick\":case\"onClickCapture\":case\"onDoubleClick\":case\"onDoubleClickCapture\":case\"onMouseDown\":case\"onMouseDownCapture\":case\"onMouseMove\":case\"onMouseMoveCapture\":case\"onMouseUp\":case\"onMouseUpCapture\":case\"onMouseEnter\":(s=!s.disabled)||(e=e.type,s=!(e===\"button\"||e===\"input\"||e===\"select\"||e===\"textarea\")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!=\"function\")throw Error(be(231,t,typeof r));return r}var R0=!1;if(ao)try{var Th={};Object.defineProperty(Th,\"passive\",{get:function(){R0=!0}}),window.addEventListener(\"test\",Th,Th),window.removeEventListener(\"test\",Th,Th)}catch{R0=!1}function O9(e,t,r,s,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var im=!1,Vg=null,zg=!1,O0=null,I9={onError:function(e){im=!0,Vg=e}};function D9(e,t,r,s,a,i,o,l,c){im=!1,Vg=null,O9.apply(I9,arguments)}function M9(e,t,r,s,a,i,o,l,c){if(D9.apply(this,arguments),im){if(im){var d=Vg;im=!1,Vg=null}else throw Error(be(198));zg||(zg=!0,O0=d)}}function Qc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function k5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function BS(e){if(Qc(e)!==e)throw Error(be(188))}function L9(e){var t=e.alternate;if(!t){if(t=Qc(e),t===null)throw Error(be(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return BS(a),e;if(i===s)return BS(a),t;i=i.sibling}throw Error(be(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(be(189))}}if(r.alternate!==s)throw Error(be(190))}if(r.tag!==3)throw Error(be(188));return r.stateNode.current===r?e:t}function C5(e){return e=L9(e),e!==null?E5(e):null}function E5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=E5(e);if(t!==null)return t;e=e.sibling}return null}var P5=Zn.unstable_scheduleCallback,US=Zn.unstable_cancelCallback,$9=Zn.unstable_shouldYield,F9=Zn.unstable_requestPaint,qr=Zn.unstable_now,V9=Zn.unstable_getCurrentPriorityLevel,c1=Zn.unstable_ImmediatePriority,T5=Zn.unstable_UserBlockingPriority,Bg=Zn.unstable_NormalPriority,z9=Zn.unstable_LowPriority,A5=Zn.unstable_IdlePriority,hv=null,xi=null;function B9(e){if(xi&&typeof xi.onCommitFiberRoot==\"function\")try{xi.onCommitFiberRoot(hv,e,void 0,(e.current.flags&128)===128)}catch{}}var Ha=Math.clz32?Math.clz32:H9,U9=Math.log,q9=Math.LN2;function H9(e){return e>>>=0,e===0?32:31-(U9(e)/q9|0)|0}var vp=64,yp=4194304;function Qh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ug(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?s=Qh(l):(i&=o,i!==0&&(s=Qh(i)))}else o=r&~a,o!==0?s=Qh(o):i!==0&&(s=Qh(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Ha(t),a=1<<r,s|=e[r],t&=~a;return s}function W9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K9(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ha(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&s)&&(a[o]=W9(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function I0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function R5(){var e=vp;return vp<<=1,!(vp&4194240)&&(vp=64),e}function Uy(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Sf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ha(t),e[t]=r}function G9(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ha(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function d1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Ha(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var dr=0;function O5(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var I5,u1,D5,M5,L5,D0=!1,bp=[],ol=null,ll=null,cl=null,Cm=new Map,Em=new Map,Fo=[],Q9=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");function qS(e,t){switch(e){case\"focusin\":case\"focusout\":ol=null;break;case\"dragenter\":case\"dragleave\":ll=null;break;case\"mouseover\":case\"mouseout\":cl=null;break;case\"pointerover\":case\"pointerout\":Cm.delete(t.pointerId);break;case\"gotpointercapture\":case\"lostpointercapture\":Em.delete(t.pointerId)}}function Ah(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Cf(t),t!==null&&u1(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function J9(e,t,r,s,a){switch(t){case\"focusin\":return ol=Ah(ol,e,t,r,s,a),!0;case\"dragenter\":return ll=Ah(ll,e,t,r,s,a),!0;case\"mouseover\":return cl=Ah(cl,e,t,r,s,a),!0;case\"pointerover\":var i=a.pointerId;return Cm.set(i,Ah(Cm.get(i)||null,e,t,r,s,a)),!0;case\"gotpointercapture\":return i=a.pointerId,Em.set(i,Ah(Em.get(i)||null,e,t,r,s,a)),!0}return!1}function $5(e){var t=cc(e.target);if(t!==null){var r=Qc(t);if(r!==null){if(t=r.tag,t===13){if(t=k5(r),t!==null){e.blockedOn=t,L5(e.priority,function(){D5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function dg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=M0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);T0=s,r.target.dispatchEvent(s),T0=null}else return t=Cf(r),t!==null&&u1(t),e.blockedOn=r,!1;t.shift()}return!0}function HS(e,t,r){dg(e)&&r.delete(t)}function X9(){D0=!1,ol!==null&&dg(ol)&&(ol=null),ll!==null&&dg(ll)&&(ll=null),cl!==null&&dg(cl)&&(cl=null),Cm.forEach(HS),Em.forEach(HS)}function Rh(e,t){e.blockedOn===t&&(e.blockedOn=null,D0||(D0=!0,Zn.unstable_scheduleCallback(Zn.unstable_NormalPriority,X9)))}function Pm(e){function t(a){return Rh(a,e)}if(0<bp.length){Rh(bp[0],e);for(var r=1;r<bp.length;r++){var s=bp[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ol!==null&&Rh(ol,e),ll!==null&&Rh(ll,e),cl!==null&&Rh(cl,e),Cm.forEach(t),Em.forEach(t),r=0;r<Fo.length;r++)s=Fo[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Fo.length&&(r=Fo[0],r.blockedOn===null);)$5(r),r.blockedOn===null&&Fo.shift()}var Gd=go.ReactCurrentBatchConfig,qg=!0;function Y9(e,t,r,s){var a=dr,i=Gd.transition;Gd.transition=null;try{dr=1,h1(e,t,r,s)}finally{dr=a,Gd.transition=i}}function Z9(e,t,r,s){var a=dr,i=Gd.transition;Gd.transition=null;try{dr=4,h1(e,t,r,s)}finally{dr=a,Gd.transition=i}}function h1(e,t,r,s){if(qg){var a=M0(e,t,r,s);if(a===null)Zy(e,t,s,Hg,r),qS(e,s);else if(J9(a,e,t,r,s))s.stopPropagation();else if(qS(e,s),t&4&&-1<Q9.indexOf(e)){for(;a!==null;){var i=Cf(a);if(i!==null&&I5(i),i=M0(e,t,r,s),i===null&&Zy(e,t,s,Hg,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else Zy(e,t,s,null,r)}}var Hg=null;function M0(e,t,r,s){if(Hg=null,e=l1(s),e=cc(e),e!==null)if(t=Qc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=k5(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hg=e,null}function F5(e){switch(e){case\"cancel\":case\"click\":case\"close\":case\"contextmenu\":case\"copy\":case\"cut\":case\"auxclick\":case\"dblclick\":case\"dragend\":case\"dragstart\":case\"drop\":case\"focusin\":case\"focusout\":case\"input\":case\"invalid\":case\"keydown\":case\"keypress\":case\"keyup\":case\"mousedown\":case\"mouseup\":case\"paste\":case\"pause\":case\"play\":case\"pointercancel\":case\"pointerdown\":case\"pointerup\":case\"ratechange\":case\"reset\":case\"resize\":case\"seeked\":case\"submit\":case\"touchcancel\":case\"touchend\":case\"touchstart\":case\"volumechange\":case\"change\":case\"selectionchange\":case\"textInput\":case\"compositionstart\":case\"compositionend\":case\"compositionupdate\":case\"beforeblur\":case\"afterblur\":case\"beforeinput\":case\"blur\":case\"fullscreenchange\":case\"focus\":case\"hashchange\":case\"popstate\":case\"select\":case\"selectstart\":return 1;case\"drag\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"mousemove\":case\"mouseout\":case\"mouseover\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"scroll\":case\"toggle\":case\"touchmove\":case\"wheel\":case\"mouseenter\":case\"mouseleave\":case\"pointerenter\":case\"pointerleave\":return 4;case\"message\":switch(V9()){case c1:return 1;case T5:return 4;case Bg:case z9:return 16;case A5:return 536870912;default:return 16}default:return 16}}var el=null,m1=null,ug=null;function V5(){if(ug)return ug;var e,t=m1,r=t.length,s,a=\"value\"in el?el.value:el.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===a[i-s];s++);return ug=a.slice(e,1<s?1-s:void 0)}function hg(e){var t=e.keyCode;return\"charCode\"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wp(){return!0}function WS(){return!1}function sa(e){function t(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wp:WS,this.isPropagationStopped=WS,this}return Rr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!=\"unknown\"&&(r.returnValue=!1),this.isDefaultPrevented=wp)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!=\"unknown\"&&(r.cancelBubble=!0),this.isPropagationStopped=wp)},persist:function(){},isPersistent:wp}),t}var eh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},f1=sa(eh),kf=Rr({},eh,{view:0,detail:0}),eq=sa(kf),qy,Hy,Oh,mv=Rr({},kf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:p1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return\"movementX\"in e?e.movementX:(e!==Oh&&(Oh&&e.type===\"mousemove\"?(qy=e.screenX-Oh.screenX,Hy=e.screenY-Oh.screenY):Hy=qy=0,Oh=e),qy)},movementY:function(e){return\"movementY\"in e?e.movementY:Hy}}),KS=sa(mv),tq=Rr({},mv,{dataTransfer:0}),rq=sa(tq),sq=Rr({},kf,{relatedTarget:0}),Wy=sa(sq),nq=Rr({},eh,{animationName:0,elapsedTime:0,pseudoElement:0}),aq=sa(nq),iq=Rr({},eh,{clipboardData:function(e){return\"clipboardData\"in e?e.clipboardData:window.clipboardData}}),oq=sa(iq),lq=Rr({},eh,{data:0}),GS=sa(lq),cq={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},dq={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},uq={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function hq(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uq[e])?!!t[e]:!1}function p1(){return hq}var mq=Rr({},kf,{key:function(e){if(e.key){var t=cq[e.key]||e.key;if(t!==\"Unidentified\")return t}return e.type===\"keypress\"?(e=hg(e),e===13?\"Enter\":String.fromCharCode(e)):e.type===\"keydown\"||e.type===\"keyup\"?dq[e.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:p1,charCode:function(e){return e.type===\"keypress\"?hg(e):0},keyCode:function(e){return e.type===\"keydown\"||e.type===\"keyup\"?e.keyCode:0},which:function(e){return e.type===\"keypress\"?hg(e):e.type===\"keydown\"||e.type===\"keyup\"?e.keyCode:0}}),fq=sa(mq),pq=Rr({},mv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QS=sa(pq),gq=Rr({},kf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:p1}),xq=sa(gq),vq=Rr({},eh,{propertyName:0,elapsedTime:0,pseudoElement:0}),yq=sa(vq),bq=Rr({},mv,{deltaX:function(e){return\"deltaX\"in e?e.deltaX:\"wheelDeltaX\"in e?-e.wheelDeltaX:0},deltaY:function(e){return\"deltaY\"in e?e.deltaY:\"wheelDeltaY\"in e?-e.wheelDeltaY:\"wheelDelta\"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wq=sa(bq),jq=[9,13,27,32],g1=ao&&\"CompositionEvent\"in window,om=null;ao&&\"documentMode\"in document&&(om=document.documentMode);var Nq=ao&&\"TextEvent\"in window&&!om,z5=ao&&(!g1||om&&8<om&&11>=om),JS=\" \",XS=!1;function B5(e,t){switch(e){case\"keyup\":return jq.indexOf(t.keyCode)!==-1;case\"keydown\":return t.keyCode!==229;case\"keypress\":case\"mousedown\":case\"focusout\":return!0;default:return!1}}function U5(e){return e=e.detail,typeof e==\"object\"&&\"data\"in e?e.data:null}var Ed=!1;function _q(e,t){switch(e){case\"compositionend\":return U5(t);case\"keypress\":return t.which!==32?null:(XS=!0,JS);case\"textInput\":return e=t.data,e===JS&&XS?null:e;default:return null}}function Sq(e,t){if(Ed)return e===\"compositionend\"||!g1&&B5(e,t)?(e=V5(),ug=m1=el=null,Ed=!1,e):null;switch(e){case\"paste\":return null;case\"keypress\":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case\"compositionend\":return z5&&t.locale!==\"ko\"?null:t.data;default:return null}}var kq={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===\"input\"?!!kq[e.type]:t===\"textarea\"}function q5(e,t,r,s){w5(s),t=Wg(t,\"onChange\"),0<t.length&&(r=new f1(\"onChange\",\"change\",null,r,s),e.push({event:r,listeners:t}))}var lm=null,Tm=null;function Cq(e){tO(e,0)}function fv(e){var t=Ad(e);if(f5(t))return e}function Eq(e,t){if(e===\"change\")return t}var H5=!1;if(ao){var Ky;if(ao){var Gy=\"oninput\"in document;if(!Gy){var ZS=document.createElement(\"div\");ZS.setAttribute(\"oninput\",\"return;\"),Gy=typeof ZS.oninput==\"function\"}Ky=Gy}else Ky=!1;H5=Ky&&(!document.documentMode||9<document.documentMode)}function e2(){lm&&(lm.detachEvent(\"onpropertychange\",W5),Tm=lm=null)}function W5(e){if(e.propertyName===\"value\"&&fv(Tm)){var t=[];q5(t,Tm,e,l1(e)),S5(Cq,t)}}function Pq(e,t,r){e===\"focusin\"?(e2(),lm=t,Tm=r,lm.attachEvent(\"onpropertychange\",W5)):e===\"focusout\"&&e2()}function Tq(e){if(e===\"selectionchange\"||e===\"keyup\"||e===\"keydown\")return fv(Tm)}function Aq(e,t){if(e===\"click\")return fv(t)}function Rq(e,t){if(e===\"input\"||e===\"change\")return fv(t)}function Oq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qa=typeof Object.is==\"function\"?Object.is:Oq;function Am(e,t){if(Qa(e,t))return!0;if(typeof e!=\"object\"||e===null||typeof t!=\"object\"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!v0.call(t,a)||!Qa(e[a],t[a]))return!1}return!0}function t2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r2(e,t){var r=t2(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=t2(r)}}function K5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?K5(e,t.parentNode):\"contains\"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function G5(){for(var e=window,t=Fg();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href==\"string\"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Fg(e.document)}return t}function x1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===\"input\"&&(e.type===\"text\"||e.type===\"search\"||e.type===\"tel\"||e.type===\"url\"||e.type===\"password\")||t===\"textarea\"||e.contentEditable===\"true\")}function Iq(e){var t=G5(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&K5(r.ownerDocument.documentElement,r)){if(s!==null&&x1(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),\"selectionStart\"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=r2(r,i);var o=r2(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus==\"function\"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Dq=ao&&\"documentMode\"in document&&11>=document.documentMode,Pd=null,L0=null,cm=null,$0=!1;function s2(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;$0||Pd==null||Pd!==Fg(s)||(s=Pd,\"selectionStart\"in s&&x1(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),cm&&Am(cm,s)||(cm=s,s=Wg(L0,\"onSelect\"),0<s.length&&(t=new f1(\"onSelect\",\"select\",null,t,r),e.push({event:t,listeners:s}),t.target=Pd)))}function jp(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r[\"Webkit\"+e]=\"webkit\"+t,r[\"Moz\"+e]=\"moz\"+t,r}var Td={animationend:jp(\"Animation\",\"AnimationEnd\"),animationiteration:jp(\"Animation\",\"AnimationIteration\"),animationstart:jp(\"Animation\",\"AnimationStart\"),transitionend:jp(\"Transition\",\"TransitionEnd\")},Qy={},Q5={};ao&&(Q5=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Td.animationend.animation,delete Td.animationiteration.animation,delete Td.animationstart.animation),\"TransitionEvent\"in window||delete Td.transitionend.transition);function pv(e){if(Qy[e])return Qy[e];if(!Td[e])return e;var t=Td[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Q5)return Qy[e]=t[r];return e}var J5=pv(\"animationend\"),X5=pv(\"animationiteration\"),Y5=pv(\"animationstart\"),Z5=pv(\"transitionend\"),eO=new Map,n2=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");function Al(e,t){eO.set(e,t),Gc(t,[e])}for(var Jy=0;Jy<n2.length;Jy++){var Xy=n2[Jy],Mq=Xy.toLowerCase(),Lq=Xy[0].toUpperCase()+Xy.slice(1);Al(Mq,\"on\"+Lq)}Al(J5,\"onAnimationEnd\");Al(X5,\"onAnimationIteration\");Al(Y5,\"onAnimationStart\");Al(\"dblclick\",\"onDoubleClick\");Al(\"focusin\",\"onFocus\");Al(\"focusout\",\"onBlur\");Al(Z5,\"onTransitionEnd\");Nu(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);Nu(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);Nu(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);Nu(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);Gc(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));Gc(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));Gc(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);Gc(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));Gc(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));Gc(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var Jh=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),$q=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(Jh));function a2(e,t,r){var s=e.type||\"unknown-event\";e.currentTarget=r,M9(s,t,void 0,e),e.currentTarget=null}function tO(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;a2(a,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;a2(a,l,d),i=c}}}if(zg)throw e=O0,zg=!1,O0=null,e}function xr(e,t){var r=t[U0];r===void 0&&(r=t[U0]=new Set);var s=e+\"__bubble\";r.has(s)||(rO(t,e,2,!1),r.add(s))}function Yy(e,t,r){var s=0;t&&(s|=4),rO(r,e,s,t)}var Np=\"_reactListening\"+Math.random().toString(36).slice(2);function Rm(e){if(!e[Np]){e[Np]=!0,c5.forEach(function(r){r!==\"selectionchange\"&&($q.has(r)||Yy(r,!1,e),Yy(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Np]||(t[Np]=!0,Yy(\"selectionchange\",!1,t))}}function rO(e,t,r,s){switch(F5(t)){case 1:var a=Y9;break;case 4:a=Z9;break;default:a=h1}r=a.bind(null,t,r,e),a=void 0,!R0||t!==\"touchstart\"&&t!==\"touchmove\"&&t!==\"wheel\"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Zy(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=cc(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}S5(function(){var d=i,u=l1(r),h=[];e:{var m=eO.get(e);if(m!==void 0){var g=f1,v=e;switch(e){case\"keypress\":if(hg(r)===0)break e;case\"keydown\":case\"keyup\":g=fq;break;case\"focusin\":v=\"focus\",g=Wy;break;case\"focusout\":v=\"blur\",g=Wy;break;case\"beforeblur\":case\"afterblur\":g=Wy;break;case\"click\":if(r.button===2)break e;case\"auxclick\":case\"dblclick\":case\"mousedown\":case\"mousemove\":case\"mouseup\":case\"mouseout\":case\"mouseover\":case\"contextmenu\":g=KS;break;case\"drag\":case\"dragend\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"dragstart\":case\"drop\":g=rq;break;case\"touchcancel\":case\"touchend\":case\"touchmove\":case\"touchstart\":g=xq;break;case J5:case X5:case Y5:g=aq;break;case Z5:g=yq;break;case\"scroll\":g=eq;break;case\"wheel\":g=wq;break;case\"copy\":case\"cut\":case\"paste\":g=oq;break;case\"gotpointercapture\":case\"lostpointercapture\":case\"pointercancel\":case\"pointerdown\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"pointerup\":g=QS}var x=(t&4)!==0,w=!x&&e===\"scroll\",y=x?m!==null?m+\"Capture\":null:m;x=[];for(var b=d,N;b!==null;){N=b;var _=N.stateNode;if(N.tag===5&&_!==null&&(N=_,y!==null&&(_=km(b,y),_!=null&&x.push(Om(b,_,N)))),w)break;b=b.return}0<x.length&&(m=new g(m,v,null,r,u),h.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e===\"mouseover\"||e===\"pointerover\",g=e===\"mouseout\"||e===\"pointerout\",m&&r!==T0&&(v=r.relatedTarget||r.fromElement)&&(cc(v)||v[io]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=r.relatedTarget||r.toElement,g=d,v=v?cc(v):null,v!==null&&(w=Qc(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=d),g!==v)){if(x=KS,_=\"onMouseLeave\",y=\"onMouseEnter\",b=\"mouse\",(e===\"pointerout\"||e===\"pointerover\")&&(x=QS,_=\"onPointerLeave\",y=\"onPointerEnter\",b=\"pointer\"),w=g==null?m:Ad(g),N=v==null?m:Ad(v),m=new x(_,b+\"leave\",g,r,u),m.target=w,m.relatedTarget=N,_=null,cc(u)===d&&(x=new x(y,b+\"enter\",v,r,u),x.target=N,x.relatedTarget=w,_=x),w=_,g&&v)t:{for(x=g,y=v,b=0,N=x;N;N=dd(N))b++;for(N=0,_=y;_;_=dd(_))N++;for(;0<b-N;)x=dd(x),b--;for(;0<N-b;)y=dd(y),N--;for(;b--;){if(x===y||y!==null&&x===y.alternate)break t;x=dd(x),y=dd(y)}x=null}else x=null;g!==null&&i2(h,m,g,x,!1),v!==null&&w!==null&&i2(h,w,v,x,!0)}}e:{if(m=d?Ad(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g===\"select\"||g===\"input\"&&m.type===\"file\")var E=Eq;else if(YS(m))if(H5)E=Rq;else{E=Tq;var k=Pq}else(g=m.nodeName)&&g.toLowerCase()===\"input\"&&(m.type===\"checkbox\"||m.type===\"radio\")&&(E=Aq);if(E&&(E=E(e,d))){q5(h,E,r,u);break e}k&&k(e,m,d),e===\"focusout\"&&(k=m._wrapperState)&&k.controlled&&m.type===\"number\"&&S0(m,\"number\",m.value)}switch(k=d?Ad(d):window,e){case\"focusin\":(YS(k)||k.contentEditable===\"true\")&&(Pd=k,L0=d,cm=null);break;case\"focusout\":cm=L0=Pd=null;break;case\"mousedown\":$0=!0;break;case\"contextmenu\":case\"mouseup\":case\"dragend\":$0=!1,s2(h,r,u);break;case\"selectionchange\":if(Dq)break;case\"keydown\":case\"keyup\":s2(h,r,u)}var P;if(g1)e:{switch(e){case\"compositionstart\":var C=\"onCompositionStart\";break e;case\"compositionend\":C=\"onCompositionEnd\";break e;case\"compositionupdate\":C=\"onCompositionUpdate\";break e}C=void 0}else Ed?B5(e,r)&&(C=\"onCompositionEnd\"):e===\"keydown\"&&r.keyCode===229&&(C=\"onCompositionStart\");C&&(z5&&r.locale!==\"ko\"&&(Ed||C!==\"onCompositionStart\"?C===\"onCompositionEnd\"&&Ed&&(P=V5()):(el=u,m1=\"value\"in el?el.value:el.textContent,Ed=!0)),k=Wg(d,C),0<k.length&&(C=new GS(C,e,null,r,u),h.push({event:C,listeners:k}),P?C.data=P:(P=U5(r),P!==null&&(C.data=P)))),(P=Nq?_q(e,r):Sq(e,r))&&(d=Wg(d,\"onBeforeInput\"),0<d.length&&(u=new GS(\"onBeforeInput\",\"beforeinput\",null,r,u),h.push({event:u,listeners:d}),u.data=P))}tO(h,t)})}function Om(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Wg(e,t){for(var r=t+\"Capture\",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=km(e,r),i!=null&&s.unshift(Om(e,i,a)),i=km(e,t),i!=null&&s.push(Om(e,i,a))),e=e.return}return s}function dd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function i2(e,t,r,s,a){for(var i=t._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,a?(c=km(r,i),c!=null&&o.unshift(Om(r,c,l))):a||(c=km(r,i),c!=null&&o.push(Om(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Fq=/\\r\\n?/g,Vq=/\\u0000|\\uFFFD/g;function o2(e){return(typeof e==\"string\"?e:\"\"+e).replace(Fq,`\n`).replace(Vq,\"\")}function _p(e,t,r){if(t=o2(t),o2(e)!==t&&r)throw Error(be(425))}function Kg(){}var F0=null,V0=null;function z0(e,t){return e===\"textarea\"||e===\"noscript\"||typeof t.children==\"string\"||typeof t.children==\"number\"||typeof t.dangerouslySetInnerHTML==\"object\"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var B0=typeof setTimeout==\"function\"?setTimeout:void 0,zq=typeof clearTimeout==\"function\"?clearTimeout:void 0,l2=typeof Promise==\"function\"?Promise:void 0,Bq=typeof queueMicrotask==\"function\"?queueMicrotask:typeof l2<\"u\"?function(e){return l2.resolve(null).then(e).catch(Uq)}:B0;function Uq(e){setTimeout(function(){throw e})}function eb(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r===\"/$\"){if(s===0){e.removeChild(a),Pm(t);return}s--}else r!==\"$\"&&r!==\"$?\"&&r!==\"$!\"||s++;r=a}while(r);Pm(t)}function dl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===\"$\"||t===\"$!\"||t===\"$?\")break;if(t===\"/$\")return null}}return e}function c2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r===\"$\"||r===\"$!\"||r===\"$?\"){if(t===0)return e;t--}else r===\"/$\"&&t++}e=e.previousSibling}return null}var th=Math.random().toString(36).slice(2),ui=\"__reactFiber$\"+th,Im=\"__reactProps$\"+th,io=\"__reactContainer$\"+th,U0=\"__reactEvents$\"+th,qq=\"__reactListeners$\"+th,Hq=\"__reactHandles$\"+th;function cc(e){var t=e[ui];if(t)return t;for(var r=e.parentNode;r;){if(t=r[io]||r[ui]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=c2(e);e!==null;){if(r=e[ui])return r;e=c2(e)}return t}e=r,r=e.parentNode}return null}function Cf(e){return e=e[ui]||e[io],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ad(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(be(33))}function gv(e){return e[Im]||null}var q0=[],Rd=-1;function Rl(e){return{current:e}}function vr(e){0>Rd||(e.current=q0[Rd],q0[Rd]=null,Rd--)}function fr(e,t){Rd++,q0[Rd]=e.current,e.current=t}var wl={},Ys=Rl(wl),An=Rl(!1),Pc=wl;function _u(e,t){var r=e.type.contextTypes;if(!r)return wl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Rn(e){return e=e.childContextTypes,e!=null}function Gg(){vr(An),vr(Ys)}function d2(e,t,r){if(Ys.current!==wl)throw Error(be(168));fr(Ys,t),fr(An,r)}function sO(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!=\"function\")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(be(108,P9(e)||\"Unknown\",a));return Rr({},r,s)}function Qg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wl,Pc=Ys.current,fr(Ys,e),fr(An,An.current),!0}function u2(e,t,r){var s=e.stateNode;if(!s)throw Error(be(169));r?(e=sO(e,t,Pc),s.__reactInternalMemoizedMergedChildContext=e,vr(An),vr(Ys),fr(Ys,e)):vr(An),fr(An,r)}var zi=null,xv=!1,tb=!1;function nO(e){zi===null?zi=[e]:zi.push(e)}function Wq(e){xv=!0,nO(e)}function Ol(){if(!tb&&zi!==null){tb=!0;var e=0,t=dr;try{var r=zi;for(dr=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}zi=null,xv=!1}catch(a){throw zi!==null&&(zi=zi.slice(e+1)),P5(c1,Ol),a}finally{dr=t,tb=!1}}return null}var Od=[],Id=0,Jg=null,Xg=0,fa=[],pa=0,Tc=null,Wi=1,Ki=\"\";function Zl(e,t){Od[Id++]=Xg,Od[Id++]=Jg,Jg=e,Xg=t}function aO(e,t,r){fa[pa++]=Wi,fa[pa++]=Ki,fa[pa++]=Tc,Tc=e;var s=Wi;e=Ki;var a=32-Ha(s)-1;s&=~(1<<a),r+=1;var i=32-Ha(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Wi=1<<32-Ha(t)+a|r<<a|s,Ki=i+e}else Wi=1<<i|r<<a|s,Ki=e}function v1(e){e.return!==null&&(Zl(e,1),aO(e,1,0))}function y1(e){for(;e===Jg;)Jg=Od[--Id],Od[Id]=null,Xg=Od[--Id],Od[Id]=null;for(;e===Tc;)Tc=fa[--pa],fa[pa]=null,Ki=fa[--pa],fa[pa]=null,Wi=fa[--pa],fa[pa]=null}var Jn=null,Qn=null,_r=!1,$a=null;function iO(e,t){var r=xa(5,null,null,0);r.elementType=\"DELETED\",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function h2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jn=e,Qn=dl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===\"\"||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jn=e,Qn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Tc!==null?{id:Wi,overflow:Ki}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=xa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Jn=e,Qn=null,!0):!1;default:return!1}}function H0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function W0(e){if(_r){var t=Qn;if(t){var r=t;if(!h2(e,t)){if(H0(e))throw Error(be(418));t=dl(r.nextSibling);var s=Jn;t&&h2(e,t)?iO(s,r):(e.flags=e.flags&-4097|2,_r=!1,Jn=e)}}else{if(H0(e))throw Error(be(418));e.flags=e.flags&-4097|2,_r=!1,Jn=e}}}function m2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jn=e}function Sp(e){if(e!==Jn)return!1;if(!_r)return m2(e),_r=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!==\"head\"&&t!==\"body\"&&!z0(e.type,e.memoizedProps)),t&&(t=Qn)){if(H0(e))throw oO(),Error(be(418));for(;t;)iO(e,t),t=dl(t.nextSibling)}if(m2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(be(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r===\"/$\"){if(t===0){Qn=dl(e.nextSibling);break e}t--}else r!==\"$\"&&r!==\"$!\"&&r!==\"$?\"||t++}e=e.nextSibling}Qn=null}}else Qn=Jn?dl(e.stateNode.nextSibling):null;return!0}function oO(){for(var e=Qn;e;)e=dl(e.nextSibling)}function Su(){Qn=Jn=null,_r=!1}function b1(e){$a===null?$a=[e]:$a.push(e)}var Kq=go.ReactCurrentBatchConfig;function Ih(e,t,r){if(e=r.ref,e!==null&&typeof e!=\"function\"&&typeof e!=\"object\"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(be(309));var s=r.stateNode}if(!s)throw Error(be(147,e));var a=s,i=\"\"+e;return t!==null&&t.ref!==null&&typeof t.ref==\"function\"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!=\"string\")throw Error(be(284));if(!r._owner)throw Error(be(290,e))}return e}function kp(e,t){throw e=Object.prototype.toString.call(t),Error(be(31,e===\"[object Object]\"?\"object with keys {\"+Object.keys(t).join(\", \")+\"}\":e))}function f2(e){var t=e._init;return t(e._payload)}function lO(e){function t(y,b){if(e){var N=y.deletions;N===null?(y.deletions=[b],y.flags|=16):N.push(b)}}function r(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function s(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function a(y,b){return y=fl(y,b),y.index=0,y.sibling=null,y}function i(y,b,N){return y.index=N,e?(N=y.alternate,N!==null?(N=N.index,N<b?(y.flags|=2,b):N):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,b,N,_){return b===null||b.tag!==6?(b=lb(N,y.mode,_),b.return=y,b):(b=a(b,N),b.return=y,b)}function c(y,b,N,_){var E=N.type;return E===Cd?u(y,b,N.props.children,_,N.key):b!==null&&(b.elementType===E||typeof E==\"object\"&&E!==null&&E.$$typeof===Lo&&f2(E)===b.type)?(_=a(b,N.props),_.ref=Ih(y,b,N),_.return=y,_):(_=yg(N.type,N.key,N.props,null,y.mode,_),_.ref=Ih(y,b,N),_.return=y,_)}function d(y,b,N,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==N.containerInfo||b.stateNode.implementation!==N.implementation?(b=cb(N,y.mode,_),b.return=y,b):(b=a(b,N.children||[]),b.return=y,b)}function u(y,b,N,_,E){return b===null||b.tag!==7?(b=Sc(N,y.mode,_,E),b.return=y,b):(b=a(b,N),b.return=y,b)}function h(y,b,N){if(typeof b==\"string\"&&b!==\"\"||typeof b==\"number\")return b=lb(\"\"+b,y.mode,N),b.return=y,b;if(typeof b==\"object\"&&b!==null){switch(b.$$typeof){case pp:return N=yg(b.type,b.key,b.props,null,y.mode,N),N.ref=Ih(y,null,b),N.return=y,N;case kd:return b=cb(b,y.mode,N),b.return=y,b;case Lo:var _=b._init;return h(y,_(b._payload),N)}if(Gh(b)||Ph(b))return b=Sc(b,y.mode,N,null),b.return=y,b;kp(y,b)}return null}function m(y,b,N,_){var E=b!==null?b.key:null;if(typeof N==\"string\"&&N!==\"\"||typeof N==\"number\")return E!==null?null:l(y,b,\"\"+N,_);if(typeof N==\"object\"&&N!==null){switch(N.$$typeof){case pp:return N.key===E?c(y,b,N,_):null;case kd:return N.key===E?d(y,b,N,_):null;case Lo:return E=N._init,m(y,b,E(N._payload),_)}if(Gh(N)||Ph(N))return E!==null?null:u(y,b,N,_,null);kp(y,N)}return null}function g(y,b,N,_,E){if(typeof _==\"string\"&&_!==\"\"||typeof _==\"number\")return y=y.get(N)||null,l(b,y,\"\"+_,E);if(typeof _==\"object\"&&_!==null){switch(_.$$typeof){case pp:return y=y.get(_.key===null?N:_.key)||null,c(b,y,_,E);case kd:return y=y.get(_.key===null?N:_.key)||null,d(b,y,_,E);case Lo:var k=_._init;return g(y,b,N,k(_._payload),E)}if(Gh(_)||Ph(_))return y=y.get(N)||null,u(b,y,_,E,null);kp(b,_)}return null}function v(y,b,N,_){for(var E=null,k=null,P=b,C=b=0,A=null;P!==null&&C<N.length;C++){P.index>C?(A=P,P=null):A=P.sibling;var O=m(y,P,N[C],_);if(O===null){P===null&&(P=A);break}e&&P&&O.alternate===null&&t(y,P),b=i(O,b,C),k===null?E=O:k.sibling=O,k=O,P=A}if(C===N.length)return r(y,P),_r&&Zl(y,C),E;if(P===null){for(;C<N.length;C++)P=h(y,N[C],_),P!==null&&(b=i(P,b,C),k===null?E=P:k.sibling=P,k=P);return _r&&Zl(y,C),E}for(P=s(y,P);C<N.length;C++)A=g(P,y,C,N[C],_),A!==null&&(e&&A.alternate!==null&&P.delete(A.key===null?C:A.key),b=i(A,b,C),k===null?E=A:k.sibling=A,k=A);return e&&P.forEach(function(q){return t(y,q)}),_r&&Zl(y,C),E}function x(y,b,N,_){var E=Ph(N);if(typeof E!=\"function\")throw Error(be(150));if(N=E.call(N),N==null)throw Error(be(151));for(var k=E=null,P=b,C=b=0,A=null,O=N.next();P!==null&&!O.done;C++,O=N.next()){P.index>C?(A=P,P=null):A=P.sibling;var q=m(y,P,O.value,_);if(q===null){P===null&&(P=A);break}e&&P&&q.alternate===null&&t(y,P),b=i(q,b,C),k===null?E=q:k.sibling=q,k=q,P=A}if(O.done)return r(y,P),_r&&Zl(y,C),E;if(P===null){for(;!O.done;C++,O=N.next())O=h(y,O.value,_),O!==null&&(b=i(O,b,C),k===null?E=O:k.sibling=O,k=O);return _r&&Zl(y,C),E}for(P=s(y,P);!O.done;C++,O=N.next())O=g(P,y,C,O.value,_),O!==null&&(e&&O.alternate!==null&&P.delete(O.key===null?C:O.key),b=i(O,b,C),k===null?E=O:k.sibling=O,k=O);return e&&P.forEach(function(K){return t(y,K)}),_r&&Zl(y,C),E}function w(y,b,N,_){if(typeof N==\"object\"&&N!==null&&N.type===Cd&&N.key===null&&(N=N.props.children),typeof N==\"object\"&&N!==null){switch(N.$$typeof){case pp:e:{for(var E=N.key,k=b;k!==null;){if(k.key===E){if(E=N.type,E===Cd){if(k.tag===7){r(y,k.sibling),b=a(k,N.props.children),b.return=y,y=b;break e}}else if(k.elementType===E||typeof E==\"object\"&&E!==null&&E.$$typeof===Lo&&f2(E)===k.type){r(y,k.sibling),b=a(k,N.props),b.ref=Ih(y,k,N),b.return=y,y=b;break e}r(y,k);break}else t(y,k);k=k.sibling}N.type===Cd?(b=Sc(N.props.children,y.mode,_,N.key),b.return=y,y=b):(_=yg(N.type,N.key,N.props,null,y.mode,_),_.ref=Ih(y,b,N),_.return=y,y=_)}return o(y);case kd:e:{for(k=N.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===N.containerInfo&&b.stateNode.implementation===N.implementation){r(y,b.sibling),b=a(b,N.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else t(y,b);b=b.sibling}b=cb(N,y.mode,_),b.return=y,y=b}return o(y);case Lo:return k=N._init,w(y,b,k(N._payload),_)}if(Gh(N))return v(y,b,N,_);if(Ph(N))return x(y,b,N,_);kp(y,N)}return typeof N==\"string\"&&N!==\"\"||typeof N==\"number\"?(N=\"\"+N,b!==null&&b.tag===6?(r(y,b.sibling),b=a(b,N),b.return=y,y=b):(r(y,b),b=lb(N,y.mode,_),b.return=y,y=b),o(y)):r(y,b)}return w}var ku=lO(!0),cO=lO(!1),Yg=Rl(null),Zg=null,Dd=null,w1=null;function j1(){w1=Dd=Zg=null}function N1(e){var t=Yg.current;vr(Yg),e._currentValue=t}function K0(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Qd(e,t){Zg=e,w1=Dd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pn=!0),e.firstContext=null)}function ja(e){var t=e._currentValue;if(w1!==e)if(e={context:e,memoizedValue:t,next:null},Dd===null){if(Zg===null)throw Error(be(308));Dd=e,Zg.dependencies={lanes:0,firstContext:e}}else Dd=Dd.next=e;return t}var dc=null;function _1(e){dc===null?dc=[e]:dc.push(e)}function dO(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,_1(t)):(r.next=a.next,a.next=r),t.interleaved=r,oo(e,s)}function oo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var $o=!1;function S1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ul(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Qt&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,oo(e,r)}return a=s.interleaved,a===null?(t.next=t,_1(s)):(t.next=a.next,a.next=t),s.interleaved=t,oo(e,r)}function mg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,d1(e,r)}}function p2(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ex(e,t,r,s){var a=e.updateQueue;$o=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,u=d=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((s&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,x=l;switch(m=t,g=r,x.tag){case 1:if(v=x.payload,typeof v==\"function\"){h=v.call(g,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,m=typeof v==\"function\"?v.call(g,h,m):v,m==null)break e;h=Rr({},h,m);break e;case 2:$o=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=g,c=h):u=u.next=g,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Rc|=o,e.lanes=o,e.memoizedState=h}}function g2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!=\"function\")throw Error(be(191,a));a.call(s)}}}var Ef={},vi=Rl(Ef),Dm=Rl(Ef),Mm=Rl(Ef);function uc(e){if(e===Ef)throw Error(be(174));return e}function k1(e,t){switch(fr(Mm,t),fr(Dm,e),fr(vi,Ef),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:C0(null,\"\");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=C0(t,e)}vr(vi),fr(vi,t)}function Cu(){vr(vi),vr(Dm),vr(Mm)}function hO(e){uc(Mm.current);var t=uc(vi.current),r=C0(t,e.type);t!==r&&(fr(Dm,e),fr(vi,r))}function C1(e){Dm.current===e&&(vr(vi),vr(Dm))}var Er=Rl(0);function tx(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data===\"$?\"||r.data===\"$!\"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rb=[];function E1(){for(var e=0;e<rb.length;e++)rb[e]._workInProgressVersionPrimary=null;rb.length=0}var fg=go.ReactCurrentDispatcher,sb=go.ReactCurrentBatchConfig,Ac=0,Ar=null,is=null,fs=null,rx=!1,dm=!1,Lm=0,Gq=0;function Bs(){throw Error(be(321))}function P1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Qa(e[r],t[r]))return!1;return!0}function T1(e,t,r,s,a,i){if(Ac=i,Ar=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fg.current=e===null||e.memoizedState===null?Yq:Zq,e=r(s,a),dm){i=0;do{if(dm=!1,Lm=0,25<=i)throw Error(be(301));i+=1,fs=is=null,t.updateQueue=null,fg.current=e7,e=r(s,a)}while(dm)}if(fg.current=sx,t=is!==null&&is.next!==null,Ac=0,fs=is=Ar=null,rx=!1,t)throw Error(be(300));return e}function A1(){var e=Lm!==0;return Lm=0,e}function ai(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fs===null?Ar.memoizedState=fs=e:fs=fs.next=e,fs}function Na(){if(is===null){var e=Ar.alternate;e=e!==null?e.memoizedState:null}else e=is.next;var t=fs===null?Ar.memoizedState:fs.next;if(t!==null)fs=t,is=e;else{if(e===null)throw Error(be(310));is=e,e={memoizedState:is.memoizedState,baseState:is.baseState,baseQueue:is.baseQueue,queue:is.queue,next:null},fs===null?Ar.memoizedState=fs=e:fs=fs.next=e}return fs}function $m(e,t){return typeof t==\"function\"?t(e):t}function nb(e){var t=Na(),r=t.queue;if(r===null)throw Error(be(311));r.lastRenderedReducer=e;var s=is,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Ac&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,Ar.lanes|=u,Rc|=u}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,Qa(s,t.memoizedState)||(Pn=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Ar.lanes|=i,Rc|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ab(e){var t=Na(),r=t.queue;if(r===null)throw Error(be(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Qa(i,t.memoizedState)||(Pn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function mO(){}function fO(e,t){var r=Ar,s=Na(),a=t(),i=!Qa(s.memoizedState,a);if(i&&(s.memoizedState=a,Pn=!0),s=s.queue,R1(xO.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||fs!==null&&fs.memoizedState.tag&1){if(r.flags|=2048,Fm(9,gO.bind(null,r,s,a,t),void 0,null),bs===null)throw Error(be(349));Ac&30||pO(r,t,a)}return a}function pO(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ar.updateQueue,t===null?(t={lastEffect:null,stores:null},Ar.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function gO(e,t,r,s){t.value=r,t.getSnapshot=s,vO(t)&&yO(e)}function xO(e,t,r){return r(function(){vO(t)&&yO(e)})}function vO(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Qa(e,r)}catch{return!0}}function yO(e){var t=oo(e,1);t!==null&&Wa(t,e,1,-1)}function x2(e){var t=ai();return typeof e==\"function\"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$m,lastRenderedState:e},t.queue=e,e=e.dispatch=Xq.bind(null,Ar,e),[t.memoizedState,e]}function Fm(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ar.updateQueue,t===null?(t={lastEffect:null,stores:null},Ar.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function bO(){return Na().memoizedState}function pg(e,t,r,s){var a=ai();Ar.flags|=e,a.memoizedState=Fm(1|t,r,void 0,s===void 0?null:s)}function vv(e,t,r,s){var a=Na();s=s===void 0?null:s;var i=void 0;if(is!==null){var o=is.memoizedState;if(i=o.destroy,s!==null&&P1(s,o.deps)){a.memoizedState=Fm(t,r,i,s);return}}Ar.flags|=e,a.memoizedState=Fm(1|t,r,i,s)}function v2(e,t){return pg(8390656,8,e,t)}function R1(e,t){return vv(2048,8,e,t)}function wO(e,t){return vv(4,2,e,t)}function jO(e,t){return vv(4,4,e,t)}function NO(e,t){if(typeof t==\"function\")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _O(e,t,r){return r=r!=null?r.concat([e]):null,vv(4,4,NO.bind(null,t,e),r)}function O1(){}function SO(e,t){var r=Na();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&P1(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function kO(e,t){var r=Na();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&P1(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function CO(e,t,r){return Ac&21?(Qa(r,t)||(r=R5(),Ar.lanes|=r,Rc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pn=!0),e.memoizedState=r)}function Qq(e,t){var r=dr;dr=r!==0&&4>r?r:4,e(!0);var s=sb.transition;sb.transition={};try{e(!1),t()}finally{dr=r,sb.transition=s}}function EO(){return Na().memoizedState}function Jq(e,t,r){var s=ml(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},PO(e))TO(t,r);else if(r=dO(e,t,r,s),r!==null){var a=un();Wa(r,e,s,a),AO(r,t,s)}}function Xq(e,t,r){var s=ml(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(PO(e))TO(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Qa(l,o)){var c=t.interleaved;c===null?(a.next=a,_1(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=dO(e,t,a,s),r!==null&&(a=un(),Wa(r,e,s,a),AO(r,t,s))}}function PO(e){var t=e.alternate;return e===Ar||t!==null&&t===Ar}function TO(e,t){dm=rx=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function AO(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,d1(e,r)}}var sx={readContext:ja,useCallback:Bs,useContext:Bs,useEffect:Bs,useImperativeHandle:Bs,useInsertionEffect:Bs,useLayoutEffect:Bs,useMemo:Bs,useReducer:Bs,useRef:Bs,useState:Bs,useDebugValue:Bs,useDeferredValue:Bs,useTransition:Bs,useMutableSource:Bs,useSyncExternalStore:Bs,useId:Bs,unstable_isNewReconciler:!1},Yq={readContext:ja,useCallback:function(e,t){return ai().memoizedState=[e,t===void 0?null:t],e},useContext:ja,useEffect:v2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,pg(4194308,4,NO.bind(null,t,e),r)},useLayoutEffect:function(e,t){return pg(4194308,4,e,t)},useInsertionEffect:function(e,t){return pg(4,2,e,t)},useMemo:function(e,t){var r=ai();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=ai();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Jq.bind(null,Ar,e),[s.memoizedState,e]},useRef:function(e){var t=ai();return e={current:e},t.memoizedState=e},useState:x2,useDebugValue:O1,useDeferredValue:function(e){return ai().memoizedState=e},useTransition:function(){var e=x2(!1),t=e[0];return e=Qq.bind(null,e[1]),ai().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ar,a=ai();if(_r){if(r===void 0)throw Error(be(407));r=r()}else{if(r=t(),bs===null)throw Error(be(349));Ac&30||pO(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,v2(xO.bind(null,s,i,e),[e]),s.flags|=2048,Fm(9,gO.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=ai(),t=bs.identifierPrefix;if(_r){var r=Ki,s=Wi;r=(s&~(1<<32-Ha(s)-1)).toString(32)+r,t=\":\"+t+\"R\"+r,r=Lm++,0<r&&(t+=\"H\"+r.toString(32)),t+=\":\"}else r=Gq++,t=\":\"+t+\"r\"+r.toString(32)+\":\";return e.memoizedState=t},unstable_isNewReconciler:!1},Zq={readContext:ja,useCallback:SO,useContext:ja,useEffect:R1,useImperativeHandle:_O,useInsertionEffect:wO,useLayoutEffect:jO,useMemo:kO,useReducer:nb,useRef:bO,useState:function(){return nb($m)},useDebugValue:O1,useDeferredValue:function(e){var t=Na();return CO(t,is.memoizedState,e)},useTransition:function(){var e=nb($m)[0],t=Na().memoizedState;return[e,t]},useMutableSource:mO,useSyncExternalStore:fO,useId:EO,unstable_isNewReconciler:!1},e7={readContext:ja,useCallback:SO,useContext:ja,useEffect:R1,useImperativeHandle:_O,useInsertionEffect:wO,useLayoutEffect:jO,useMemo:kO,useReducer:ab,useRef:bO,useState:function(){return ab($m)},useDebugValue:O1,useDeferredValue:function(e){var t=Na();return is===null?t.memoizedState=e:CO(t,is.memoizedState,e)},useTransition:function(){var e=ab($m)[0],t=Na().memoizedState;return[e,t]},useMutableSource:mO,useSyncExternalStore:fO,useId:EO,unstable_isNewReconciler:!1};function Oa(e,t){if(e&&e.defaultProps){t=Rr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function G0(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Rr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var yv={isMounted:function(e){return(e=e._reactInternals)?Qc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=un(),a=ml(e),i=Yi(s,a);i.payload=t,r!=null&&(i.callback=r),t=ul(e,i,a),t!==null&&(Wa(t,e,a,s),mg(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=un(),a=ml(e),i=Yi(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ul(e,i,a),t!==null&&(Wa(t,e,a,s),mg(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=un(),s=ml(e),a=Yi(r,s);a.tag=2,t!=null&&(a.callback=t),t=ul(e,a,s),t!==null&&(Wa(t,e,s,r),mg(t,e,s))}};function y2(e,t,r,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate==\"function\"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!Am(r,s)||!Am(a,i):!0}function RO(e,t,r){var s=!1,a=wl,i=t.contextType;return typeof i==\"object\"&&i!==null?i=ja(i):(a=Rn(t)?Pc:Ys.current,s=t.contextTypes,i=(s=s!=null)?_u(e,a):wl),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yv,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function b2(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps==\"function\"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps==\"function\"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&yv.enqueueReplaceState(t,t.state,null)}function Q0(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},S1(e);var i=t.contextType;typeof i==\"object\"&&i!==null?a.context=ja(i):(i=Rn(t)?Pc:Ys.current,a.context=_u(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i==\"function\"&&(G0(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps==\"function\"||typeof a.getSnapshotBeforeUpdate==\"function\"||typeof a.UNSAFE_componentWillMount!=\"function\"&&typeof a.componentWillMount!=\"function\"||(t=a.state,typeof a.componentWillMount==\"function\"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==\"function\"&&a.UNSAFE_componentWillMount(),t!==a.state&&yv.enqueueReplaceState(a,a.state,null),ex(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount==\"function\"&&(e.flags|=4194308)}function Eu(e,t){try{var r=\"\",s=t;do r+=E9(s),s=s.return;while(s);var a=r}catch(i){a=`\nError generating stack: `+i.message+`\n`+i.stack}return{value:e,source:t,stack:a,digest:null}}function ib(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function J0(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var t7=typeof WeakMap==\"function\"?WeakMap:Map;function OO(e,t,r){r=Yi(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){ax||(ax=!0,iw=s),J0(e,t)},r}function IO(e,t,r){r=Yi(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s==\"function\"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){J0(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch==\"function\"&&(r.callback=function(){J0(e,t),typeof s!=\"function\"&&(hl===null?hl=new Set([this]):hl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:\"\"})}),r}function w2(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new t7;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=p7.bind(null,e,t,r),t.then(e,e))}function j2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function N2(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Yi(-1,1),t.tag=2,ul(r,t,1))),r.lanes|=1),e)}var r7=go.ReactCurrentOwner,Pn=!1;function nn(e,t,r,s){t.child=e===null?cO(t,null,r,s):ku(t,e.child,r,s)}function _2(e,t,r,s,a){r=r.render;var i=t.ref;return Qd(t,a),s=T1(e,t,r,s,i,a),r=A1(),e!==null&&!Pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,lo(e,t,a)):(_r&&r&&v1(t),t.flags|=1,nn(e,t,s,a),t.child)}function S2(e,t,r,s,a){if(e===null){var i=r.type;return typeof i==\"function\"&&!z1(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,DO(e,t,i,s,a)):(e=yg(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Am,r(o,s)&&e.ref===t.ref)return lo(e,t,a)}return t.flags|=1,e=fl(i,s),e.ref=t.ref,e.return=t,t.child=e}function DO(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(Am(i,s)&&e.ref===t.ref)if(Pn=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Pn=!0);else return t.lanes=e.lanes,lo(e,t,a)}return X0(e,t,r,s,a)}function MO(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode===\"hidden\")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fr(Ld,qn),qn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fr(Ld,qn),qn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,fr(Ld,qn),qn|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,fr(Ld,qn),qn|=s;return nn(e,t,a,r),t.child}function LO(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function X0(e,t,r,s,a){var i=Rn(r)?Pc:Ys.current;return i=_u(t,i),Qd(t,a),r=T1(e,t,r,s,i,a),s=A1(),e!==null&&!Pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,lo(e,t,a)):(_r&&s&&v1(t),t.flags|=1,nn(e,t,r,a),t.child)}function k2(e,t,r,s,a){if(Rn(r)){var i=!0;Qg(t)}else i=!1;if(Qd(t,a),t.stateNode===null)gg(e,t),RO(t,r,s),Q0(t,r,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d==\"object\"&&d!==null?d=ja(d):(d=Rn(r)?Pc:Ys.current,d=_u(t,d));var u=r.getDerivedStateFromProps,h=typeof u==\"function\"||typeof o.getSnapshotBeforeUpdate==\"function\";h||typeof o.UNSAFE_componentWillReceiveProps!=\"function\"&&typeof o.componentWillReceiveProps!=\"function\"||(l!==s||c!==d)&&b2(t,o,s,d),$o=!1;var m=t.memoizedState;o.state=m,ex(t,s,o,a),c=t.memoizedState,l!==s||m!==c||An.current||$o?(typeof u==\"function\"&&(G0(t,r,u,s),c=t.memoizedState),(l=$o||y2(t,r,l,s,m,c,d))?(h||typeof o.UNSAFE_componentWillMount!=\"function\"&&typeof o.componentWillMount!=\"function\"||(typeof o.componentWillMount==\"function\"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount==\"function\"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount==\"function\"&&(t.flags|=4194308)):(typeof o.componentDidMount==\"function\"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount==\"function\"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,uO(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Oa(t.type,l),o.props=d,h=t.pendingProps,m=o.context,c=r.contextType,typeof c==\"object\"&&c!==null?c=ja(c):(c=Rn(r)?Pc:Ys.current,c=_u(t,c));var g=r.getDerivedStateFromProps;(u=typeof g==\"function\"||typeof o.getSnapshotBeforeUpdate==\"function\")||typeof o.UNSAFE_componentWillReceiveProps!=\"function\"&&typeof o.componentWillReceiveProps!=\"function\"||(l!==h||m!==c)&&b2(t,o,s,c),$o=!1,m=t.memoizedState,o.state=m,ex(t,s,o,a);var v=t.memoizedState;l!==h||m!==v||An.current||$o?(typeof g==\"function\"&&(G0(t,r,g,s),v=t.memoizedState),(d=$o||y2(t,r,d,s,m,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!=\"function\"&&typeof o.componentWillUpdate!=\"function\"||(typeof o.componentWillUpdate==\"function\"&&o.componentWillUpdate(s,v,c),typeof o.UNSAFE_componentWillUpdate==\"function\"&&o.UNSAFE_componentWillUpdate(s,v,c)),typeof o.componentDidUpdate==\"function\"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate==\"function\"&&(t.flags|=1024)):(typeof o.componentDidUpdate!=\"function\"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!=\"function\"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),o.props=s,o.state=v,o.context=c,s=d):(typeof o.componentDidUpdate!=\"function\"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!=\"function\"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return Y0(e,t,r,s,i,a)}function Y0(e,t,r,s,a,i){LO(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&u2(t,r,!1),lo(e,t,i);s=t.stateNode,r7.current=t;var l=o&&typeof r.getDerivedStateFromError!=\"function\"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=ku(t,e.child,null,i),t.child=ku(t,null,l,i)):nn(e,t,l,i),t.memoizedState=s.state,a&&u2(t,r,!0),t.child}function $O(e){var t=e.stateNode;t.pendingContext?d2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&d2(e,t.context,!1),k1(e,t.containerInfo)}function C2(e,t,r,s,a){return Su(),b1(a),t.flags|=256,nn(e,t,r,s),t.child}var Z0={dehydrated:null,treeContext:null,retryLane:0};function ew(e){return{baseLanes:e,cachePool:null,transitions:null}}function FO(e,t,r){var s=t.pendingProps,a=Er.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),fr(Er,a&1),e===null)return W0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data===\"$!\"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:\"hidden\",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jv(o,s,0,null),e=Sc(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ew(r),t.memoizedState=Z0,e):I1(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return s7(e,t,o,s,l,a,r);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:\"hidden\",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=fl(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=fl(l,i):(i=Sc(i,o,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?ew(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Z0,s}return i=e.child,e=i.sibling,s=fl(i,{mode:\"visible\",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function I1(e,t){return t=jv({mode:\"visible\",children:t},e.mode,0,null),t.return=e,e.child=t}function Cp(e,t,r,s){return s!==null&&b1(s),ku(t,e.child,null,r),e=I1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function s7(e,t,r,s,a,i,o){if(r)return t.flags&256?(t.flags&=-257,s=ib(Error(be(422))),Cp(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=jv({mode:\"visible\",children:s.children},a,0,null),i=Sc(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&ku(t,e.child,null,o),t.child.memoizedState=ew(o),t.memoizedState=Z0,i);if(!(t.mode&1))return Cp(e,t,o,null);if(a.data===\"$!\"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(be(419)),s=ib(i,s,void 0),Cp(e,t,o,s)}if(l=(o&e.childLanes)!==0,Pn||l){if(s=bs,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,oo(e,a),Wa(s,e,a,-1))}return V1(),s=ib(Error(be(421))),Cp(e,t,o,s)}return a.data===\"$?\"?(t.flags|=128,t.child=e.child,t=g7.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Qn=dl(a.nextSibling),Jn=t,_r=!0,$a=null,e!==null&&(fa[pa++]=Wi,fa[pa++]=Ki,fa[pa++]=Tc,Wi=e.id,Ki=e.overflow,Tc=t),t=I1(t,s.children),t.flags|=4096,t)}function E2(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),K0(e.return,t,r)}function ob(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function VO(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(nn(e,t,s.children,r),s=Er.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&E2(e,r,t);else if(e.tag===19)E2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(fr(Er,s),!(t.mode&1))t.memoizedState=null;else switch(a){case\"forwards\":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&tx(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ob(t,!1,a,r,i);break;case\"backwards\":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&tx(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ob(t,!0,r,null,i);break;case\"together\":ob(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Rc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(be(153));if(t.child!==null){for(e=t.child,r=fl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=fl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function n7(e,t,r){switch(t.tag){case 3:$O(t),Su();break;case 5:hO(t);break;case 1:Rn(t.type)&&Qg(t);break;case 4:k1(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;fr(Yg,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(fr(Er,Er.current&1),t.flags|=128,null):r&t.child.childLanes?FO(e,t,r):(fr(Er,Er.current&1),e=lo(e,t,r),e!==null?e.sibling:null);fr(Er,Er.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return VO(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),fr(Er,Er.current),s)break;return null;case 22:case 23:return t.lanes=0,MO(e,t,r)}return lo(e,t,r)}var zO,tw,BO,UO;zO=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tw=function(){};BO=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,uc(vi.current);var i=null;switch(r){case\"input\":a=N0(e,a),s=N0(e,s),i=[];break;case\"select\":a=Rr({},a,{value:void 0}),s=Rr({},s,{value:void 0}),i=[];break;case\"textarea\":a=k0(e,a),s=k0(e,s),i=[];break;default:typeof a.onClick!=\"function\"&&typeof s.onClick==\"function\"&&(e.onclick=Kg)}E0(r,s);var o;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d===\"style\"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]=\"\")}else d!==\"dangerouslySetInnerHTML\"&&d!==\"children\"&&d!==\"suppressContentEditableWarning\"&&d!==\"suppressHydrationWarning\"&&d!==\"autoFocus\"&&(_m.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d===\"style\")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]=\"\");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d===\"dangerouslySetInnerHTML\"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d===\"children\"?typeof c!=\"string\"&&typeof c!=\"number\"||(i=i||[]).push(d,\"\"+c):d!==\"suppressContentEditableWarning\"&&d!==\"suppressHydrationWarning\"&&(_m.hasOwnProperty(d)?(c!=null&&d===\"onScroll\"&&xr(\"scroll\",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push(\"style\",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};UO=function(e,t,r,s){r!==s&&(t.flags|=4)};function Dh(e,t){if(!_r)switch(e.tailMode){case\"hidden\":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case\"collapsed\":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Us(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function a7(e,t,r){var s=t.pendingProps;switch(y1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Us(t),null;case 1:return Rn(t.type)&&Gg(),Us(t),null;case 3:return s=t.stateNode,Cu(),vr(An),vr(Ys),E1(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Sp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$a!==null&&(cw($a),$a=null))),tw(e,t),Us(t),null;case 5:C1(t);var a=uc(Mm.current);if(r=t.type,e!==null&&t.stateNode!=null)BO(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(be(166));return Us(t),null}if(e=uc(vi.current),Sp(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[ui]=t,s[Im]=i,e=(t.mode&1)!==0,r){case\"dialog\":xr(\"cancel\",s),xr(\"close\",s);break;case\"iframe\":case\"object\":case\"embed\":xr(\"load\",s);break;case\"video\":case\"audio\":for(a=0;a<Jh.length;a++)xr(Jh[a],s);break;case\"source\":xr(\"error\",s);break;case\"img\":case\"image\":case\"link\":xr(\"error\",s),xr(\"load\",s);break;case\"details\":xr(\"toggle\",s);break;case\"input\":LS(s,i),xr(\"invalid\",s);break;case\"select\":s._wrapperState={wasMultiple:!!i.multiple},xr(\"invalid\",s);break;case\"textarea\":FS(s,i),xr(\"invalid\",s)}E0(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o===\"children\"?typeof l==\"string\"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&_p(s.textContent,l,e),a=[\"children\",l]):typeof l==\"number\"&&s.textContent!==\"\"+l&&(i.suppressHydrationWarning!==!0&&_p(s.textContent,l,e),a=[\"children\",\"\"+l]):_m.hasOwnProperty(o)&&l!=null&&o===\"onScroll\"&&xr(\"scroll\",s)}switch(r){case\"input\":gp(s),$S(s,i,!0);break;case\"textarea\":gp(s),VS(s);break;case\"select\":case\"option\":break;default:typeof i.onClick==\"function\"&&(s.onclick=Kg)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e===\"http://www.w3.org/1999/xhtml\"&&(e=x5(r)),e===\"http://www.w3.org/1999/xhtml\"?r===\"script\"?(e=o.createElement(\"div\"),e.innerHTML=\"<script><\\/script>\",e=e.removeChild(e.firstChild)):typeof s.is==\"string\"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r===\"select\"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[ui]=t,e[Im]=s,zO(e,t,!1,!1),t.stateNode=e;e:{switch(o=P0(r,s),r){case\"dialog\":xr(\"cancel\",e),xr(\"close\",e),a=s;break;case\"iframe\":case\"object\":case\"embed\":xr(\"load\",e),a=s;break;case\"video\":case\"audio\":for(a=0;a<Jh.length;a++)xr(Jh[a],e);a=s;break;case\"source\":xr(\"error\",e),a=s;break;case\"img\":case\"image\":case\"link\":xr(\"error\",e),xr(\"load\",e),a=s;break;case\"details\":xr(\"toggle\",e),a=s;break;case\"input\":LS(e,s),a=N0(e,s),xr(\"invalid\",e);break;case\"option\":a=s;break;case\"select\":e._wrapperState={wasMultiple:!!s.multiple},a=Rr({},s,{value:void 0}),xr(\"invalid\",e);break;case\"textarea\":FS(e,s),a=k0(e,s),xr(\"invalid\",e);break;default:a=s}E0(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i===\"style\"?b5(e,c):i===\"dangerouslySetInnerHTML\"?(c=c?c.__html:void 0,c!=null&&v5(e,c)):i===\"children\"?typeof c==\"string\"?(r!==\"textarea\"||c!==\"\")&&Sm(e,c):typeof c==\"number\"&&Sm(e,\"\"+c):i!==\"suppressContentEditableWarning\"&&i!==\"suppressHydrationWarning\"&&i!==\"autoFocus\"&&(_m.hasOwnProperty(i)?c!=null&&i===\"onScroll\"&&xr(\"scroll\",e):c!=null&&n1(e,i,c,o))}switch(r){case\"input\":gp(e),$S(e,s,!1);break;case\"textarea\":gp(e),VS(e);break;case\"option\":s.value!=null&&e.setAttribute(\"value\",\"\"+bl(s.value));break;case\"select\":e.multiple=!!s.multiple,i=s.value,i!=null?Hd(e,!!s.multiple,i,!1):s.defaultValue!=null&&Hd(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick==\"function\"&&(e.onclick=Kg)}switch(r){case\"button\":case\"input\":case\"select\":case\"textarea\":s=!!s.autoFocus;break e;case\"img\":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Us(t),null;case 6:if(e&&t.stateNode!=null)UO(e,t,e.memoizedProps,s);else{if(typeof s!=\"string\"&&t.stateNode===null)throw Error(be(166));if(r=uc(Mm.current),uc(vi.current),Sp(t)){if(s=t.stateNode,r=t.memoizedProps,s[ui]=t,(i=s.nodeValue!==r)&&(e=Jn,e!==null))switch(e.tag){case 3:_p(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_p(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[ui]=t,t.stateNode=s}return Us(t),null;case 13:if(vr(Er),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_r&&Qn!==null&&t.mode&1&&!(t.flags&128))oO(),Su(),t.flags|=98560,i=!1;else if(i=Sp(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(be(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(be(317));i[ui]=t}else Su(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Us(t),i=!1}else $a!==null&&(cw($a),$a=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Er.current&1?ds===0&&(ds=3):V1())),t.updateQueue!==null&&(t.flags|=4),Us(t),null);case 4:return Cu(),tw(e,t),e===null&&Rm(t.stateNode.containerInfo),Us(t),null;case 10:return N1(t.type._context),Us(t),null;case 17:return Rn(t.type)&&Gg(),Us(t),null;case 19:if(vr(Er),i=t.memoizedState,i===null)return Us(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)Dh(i,!1);else{if(ds!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=tx(e),o!==null){for(t.flags|=128,Dh(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return fr(Er,Er.current&1|2),t.child}e=e.sibling}i.tail!==null&&qr()>Pu&&(t.flags|=128,s=!0,Dh(i,!1),t.lanes=4194304)}else{if(!s)if(e=tx(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Dh(i,!0),i.tail===null&&i.tailMode===\"hidden\"&&!o.alternate&&!_r)return Us(t),null}else 2*qr()-i.renderingStartTime>Pu&&r!==1073741824&&(t.flags|=128,s=!0,Dh(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=qr(),t.sibling=null,r=Er.current,fr(Er,s?r&1|2:r&1),t):(Us(t),null);case 22:case 23:return F1(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?qn&1073741824&&(Us(t),t.subtreeFlags&6&&(t.flags|=8192)):Us(t),null;case 24:return null;case 25:return null}throw Error(be(156,t.tag))}function i7(e,t){switch(y1(t),t.tag){case 1:return Rn(t.type)&&Gg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cu(),vr(An),vr(Ys),E1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return C1(t),null;case 13:if(vr(Er),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(be(340));Su()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vr(Er),null;case 4:return Cu(),null;case 10:return N1(t.type._context),null;case 22:case 23:return F1(),null;case 24:return null;default:return null}}var Ep=!1,Gs=!1,o7=typeof WeakSet==\"function\"?WeakSet:Set,Le=null;function Md(e,t){var r=e.ref;if(r!==null)if(typeof r==\"function\")try{r(null)}catch(s){Mr(e,t,s)}else r.current=null}function rw(e,t,r){try{r()}catch(s){Mr(e,t,s)}}var P2=!1;function l7(e,t){if(F0=qg,e=G5(),x1(e)){if(\"selectionStart\"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var g;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==i||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===e)break t;if(m===r&&++d===a&&(l=o),m===i&&++u===s&&(c=o),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(V0={focusedElem:e,selectionRange:r},qg=!1,Le=t;Le!==null;)if(t=Le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Le=e;else for(;Le!==null;){t=Le;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,w=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:Oa(t.type,x),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent=\"\":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(_){Mr(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Le=e;break}Le=t.return}return v=P2,P2=!1,v}function um(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&rw(t,r,i)}a=a.next}while(a!==s)}}function bv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function sw(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t==\"function\"?t(e):t.current=e}}function qO(e){var t=e.alternate;t!==null&&(e.alternate=null,qO(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ui],delete t[Im],delete t[U0],delete t[qq],delete t[Hq])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function HO(e){return e.tag===5||e.tag===3||e.tag===4}function T2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||HO(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nw(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Kg));else if(s!==4&&(e=e.child,e!==null))for(nw(e,t,r),e=e.sibling;e!==null;)nw(e,t,r),e=e.sibling}function aw(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(aw(e,t,r),e=e.sibling;e!==null;)aw(e,t,r),e=e.sibling}var As=null,Ma=!1;function Eo(e,t,r){for(r=r.child;r!==null;)WO(e,t,r),r=r.sibling}function WO(e,t,r){if(xi&&typeof xi.onCommitFiberUnmount==\"function\")try{xi.onCommitFiberUnmount(hv,r)}catch{}switch(r.tag){case 5:Gs||Md(r,t);case 6:var s=As,a=Ma;As=null,Eo(e,t,r),As=s,Ma=a,As!==null&&(Ma?(e=As,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):As.removeChild(r.stateNode));break;case 18:As!==null&&(Ma?(e=As,r=r.stateNode,e.nodeType===8?eb(e.parentNode,r):e.nodeType===1&&eb(e,r),Pm(e)):eb(As,r.stateNode));break;case 4:s=As,a=Ma,As=r.stateNode.containerInfo,Ma=!0,Eo(e,t,r),As=s,Ma=a;break;case 0:case 11:case 14:case 15:if(!Gs&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&rw(r,t,o),a=a.next}while(a!==s)}Eo(e,t,r);break;case 1:if(!Gs&&(Md(r,t),s=r.stateNode,typeof s.componentWillUnmount==\"function\"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Mr(r,t,l)}Eo(e,t,r);break;case 21:Eo(e,t,r);break;case 22:r.mode&1?(Gs=(s=Gs)||r.memoizedState!==null,Eo(e,t,r),Gs=s):Eo(e,t,r);break;default:Eo(e,t,r)}}function A2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new o7),t.forEach(function(s){var a=x7.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Pa(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:As=l.stateNode,Ma=!1;break e;case 3:As=l.stateNode.containerInfo,Ma=!0;break e;case 4:As=l.stateNode.containerInfo,Ma=!0;break e}l=l.return}if(As===null)throw Error(be(160));WO(i,o,a),As=null,Ma=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Mr(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)KO(t,e),t=t.sibling}function KO(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pa(t,e),si(e),s&4){try{um(3,e,e.return),bv(3,e)}catch(x){Mr(e,e.return,x)}try{um(5,e,e.return)}catch(x){Mr(e,e.return,x)}}break;case 1:Pa(t,e),si(e),s&512&&r!==null&&Md(r,r.return);break;case 5:if(Pa(t,e),si(e),s&512&&r!==null&&Md(r,r.return),e.flags&32){var a=e.stateNode;try{Sm(a,\"\")}catch(x){Mr(e,e.return,x)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l===\"input\"&&i.type===\"radio\"&&i.name!=null&&p5(a,i),P0(l,o);var d=P0(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u===\"style\"?b5(a,h):u===\"dangerouslySetInnerHTML\"?v5(a,h):u===\"children\"?Sm(a,h):n1(a,u,h,d)}switch(l){case\"input\":_0(a,i);break;case\"textarea\":g5(a,i);break;case\"select\":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Hd(a,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Hd(a,!!i.multiple,i.defaultValue,!0):Hd(a,!!i.multiple,i.multiple?[]:\"\",!1))}a[Im]=i}catch(x){Mr(e,e.return,x)}}break;case 6:if(Pa(t,e),si(e),s&4){if(e.stateNode===null)throw Error(be(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){Mr(e,e.return,x)}}break;case 3:if(Pa(t,e),si(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Pm(t.containerInfo)}catch(x){Mr(e,e.return,x)}break;case 4:Pa(t,e),si(e);break;case 13:Pa(t,e),si(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(L1=qr())),s&4&&A2(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Gs=(d=Gs)||u,Pa(t,e),Gs=d):Pa(t,e),si(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Le=e,u=e.child;u!==null;){for(h=Le=u;Le!==null;){switch(m=Le,g=m.child,m.tag){case 0:case 11:case 14:case 15:um(4,m,m.return);break;case 1:Md(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount==\"function\"){s=m,r=m.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){Mr(s,r,x)}}break;case 5:Md(m,m.return);break;case 22:if(m.memoizedState!==null){O2(h);continue}}g!==null?(g.return=m,Le=g):O2(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty==\"function\"?i.setProperty(\"display\",\"none\",\"important\"):i.display=\"none\"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty(\"display\")?c.display:null,l.style.display=y5(\"display\",o))}catch(x){Mr(e,e.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?\"\":h.memoizedProps}catch(x){Mr(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Pa(t,e),si(e),s&4&&A2(e);break;case 21:break;default:Pa(t,e),si(e)}}function si(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(HO(r)){var s=r;break e}r=r.return}throw Error(be(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Sm(a,\"\"),s.flags&=-33);var i=T2(e);aw(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=T2(e);nw(e,l,o);break;default:throw Error(be(161))}}catch(c){Mr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function c7(e,t,r){Le=e,GO(e)}function GO(e,t,r){for(var s=(e.mode&1)!==0;Le!==null;){var a=Le,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Ep;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Gs;l=Ep;var d=Gs;if(Ep=o,(Gs=c)&&!d)for(Le=a;Le!==null;)o=Le,c=o.child,o.tag===22&&o.memoizedState!==null?I2(a):c!==null?(c.return=o,Le=c):I2(a);for(;i!==null;)Le=i,GO(i),i=i.sibling;Le=a,Ep=l,Gs=d}R2(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Le=i):R2(e)}}function R2(e){for(;Le!==null;){var t=Le;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gs||bv(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Gs)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Oa(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&g2(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}g2(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case\"button\":case\"input\":case\"select\":case\"textarea\":c.autoFocus&&r.focus();break;case\"img\":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Pm(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}Gs||t.flags&512&&sw(t)}catch(m){Mr(t,t.return,m)}}if(t===e){Le=null;break}if(r=t.sibling,r!==null){r.return=t.return,Le=r;break}Le=t.return}}function O2(e){for(;Le!==null;){var t=Le;if(t===e){Le=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Le=r;break}Le=t.return}}function I2(e){for(;Le!==null;){var t=Le;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{bv(4,t)}catch(c){Mr(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount==\"function\"){var a=t.return;try{s.componentDidMount()}catch(c){Mr(t,a,c)}}var i=t.return;try{sw(t)}catch(c){Mr(t,i,c)}break;case 5:var o=t.return;try{sw(t)}catch(c){Mr(t,o,c)}}}catch(c){Mr(t,t.return,c)}if(t===e){Le=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Le=l;break}Le=t.return}}var d7=Math.ceil,nx=go.ReactCurrentDispatcher,D1=go.ReactCurrentOwner,va=go.ReactCurrentBatchConfig,Qt=0,bs=null,Xr=null,Ls=0,qn=0,Ld=Rl(0),ds=0,Vm=null,Rc=0,wv=0,M1=0,hm=null,_n=null,L1=0,Pu=1/0,Vi=null,ax=!1,iw=null,hl=null,Pp=!1,tl=null,ix=0,mm=0,ow=null,xg=-1,vg=0;function un(){return Qt&6?qr():xg!==-1?xg:xg=qr()}function ml(e){return e.mode&1?Qt&2&&Ls!==0?Ls&-Ls:Kq.transition!==null?(vg===0&&(vg=R5()),vg):(e=dr,e!==0||(e=window.event,e=e===void 0?16:F5(e.type)),e):1}function Wa(e,t,r,s){if(50<mm)throw mm=0,ow=null,Error(be(185));Sf(e,r,s),(!(Qt&2)||e!==bs)&&(e===bs&&(!(Qt&2)&&(wv|=r),ds===4&&Vo(e,Ls)),On(e,s),r===1&&Qt===0&&!(t.mode&1)&&(Pu=qr()+500,xv&&Ol()))}function On(e,t){var r=e.callbackNode;K9(e,t);var s=Ug(e,e===bs?Ls:0);if(s===0)r!==null&&US(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&US(r),t===1)e.tag===0?Wq(D2.bind(null,e)):nO(D2.bind(null,e)),Bq(function(){!(Qt&6)&&Ol()}),r=null;else{switch(O5(s)){case 1:r=c1;break;case 4:r=T5;break;case 16:r=Bg;break;case 536870912:r=A5;break;default:r=Bg}r=rI(r,QO.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function QO(e,t){if(xg=-1,vg=0,Qt&6)throw Error(be(327));var r=e.callbackNode;if(Jd()&&e.callbackNode!==r)return null;var s=Ug(e,e===bs?Ls:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=ox(e,s);else{t=s;var a=Qt;Qt|=2;var i=XO();(bs!==e||Ls!==t)&&(Vi=null,Pu=qr()+500,_c(e,t));do try{m7();break}catch(l){JO(e,l)}while(!0);j1(),nx.current=i,Qt=a,Xr!==null?t=0:(bs=null,Ls=0,t=ds)}if(t!==0){if(t===2&&(a=I0(e),a!==0&&(s=a,t=lw(e,a))),t===1)throw r=Vm,_c(e,0),Vo(e,s),On(e,qr()),r;if(t===6)Vo(e,s);else{if(a=e.current.alternate,!(s&30)&&!u7(a)&&(t=ox(e,s),t===2&&(i=I0(e),i!==0&&(s=i,t=lw(e,i))),t===1))throw r=Vm,_c(e,0),Vo(e,s),On(e,qr()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(be(345));case 2:ec(e,_n,Vi);break;case 3:if(Vo(e,s),(s&130023424)===s&&(t=L1+500-qr(),10<t)){if(Ug(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){un(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=B0(ec.bind(null,e,_n,Vi),t);break}ec(e,_n,Vi);break;case 4:if(Vo(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-Ha(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=qr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*d7(s/1960))-s,10<s){e.timeoutHandle=B0(ec.bind(null,e,_n,Vi),s);break}ec(e,_n,Vi);break;case 5:ec(e,_n,Vi);break;default:throw Error(be(329))}}}return On(e,qr()),e.callbackNode===r?QO.bind(null,e):null}function lw(e,t){var r=hm;return e.current.memoizedState.isDehydrated&&(_c(e,t).flags|=256),e=ox(e,t),e!==2&&(t=_n,_n=r,t!==null&&cw(t)),e}function cw(e){_n===null?_n=e:_n.push.apply(_n,e)}function u7(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!Qa(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vo(e,t){for(t&=~M1,t&=~wv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ha(t),s=1<<r;e[r]=-1,t&=~s}}function D2(e){if(Qt&6)throw Error(be(327));Jd();var t=Ug(e,0);if(!(t&1))return On(e,qr()),null;var r=ox(e,t);if(e.tag!==0&&r===2){var s=I0(e);s!==0&&(t=s,r=lw(e,s))}if(r===1)throw r=Vm,_c(e,0),Vo(e,t),On(e,qr()),r;if(r===6)throw Error(be(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ec(e,_n,Vi),On(e,qr()),null}function $1(e,t){var r=Qt;Qt|=1;try{return e(t)}finally{Qt=r,Qt===0&&(Pu=qr()+500,xv&&Ol())}}function Oc(e){tl!==null&&tl.tag===0&&!(Qt&6)&&Jd();var t=Qt;Qt|=1;var r=va.transition,s=dr;try{if(va.transition=null,dr=1,e)return e()}finally{dr=s,va.transition=r,Qt=t,!(Qt&6)&&Ol()}}function F1(){qn=Ld.current,vr(Ld)}function _c(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,zq(r)),Xr!==null)for(r=Xr.return;r!==null;){var s=r;switch(y1(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Gg();break;case 3:Cu(),vr(An),vr(Ys),E1();break;case 5:C1(s);break;case 4:Cu();break;case 13:vr(Er);break;case 19:vr(Er);break;case 10:N1(s.type._context);break;case 22:case 23:F1()}r=r.return}if(bs=e,Xr=e=fl(e.current,null),Ls=qn=t,ds=0,Vm=null,M1=wv=Rc=0,_n=hm=null,dc!==null){for(t=0;t<dc.length;t++)if(r=dc[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}dc=null}return e}function JO(e,t){do{var r=Xr;try{if(j1(),fg.current=sx,rx){for(var s=Ar.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}rx=!1}if(Ac=0,fs=is=Ar=null,dm=!1,Lm=0,D1.current=null,r===null||r.return===null){ds=1,Vm=t,Xr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Ls,l.flags|=32768,c!==null&&typeof c==\"object\"&&typeof c.then==\"function\"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=j2(o);if(g!==null){g.flags&=-257,N2(g,o,l,i,t),g.mode&1&&w2(i,d,t),t=g,c=d;var v=t.updateQueue;if(v===null){var x=new Set;x.add(c),t.updateQueue=x}else v.add(c);break e}else{if(!(t&1)){w2(i,d,t),V1();break e}c=Error(be(426))}}else if(_r&&l.mode&1){var w=j2(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),N2(w,o,l,i,t),b1(Eu(c,l));break e}}i=c=Eu(c,l),ds!==4&&(ds=2),hm===null?hm=[i]:hm.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=OO(i,c,t);p2(i,y);break e;case 1:l=c;var b=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError==\"function\"||N!==null&&typeof N.componentDidCatch==\"function\"&&(hl===null||!hl.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=IO(i,l,t);p2(i,_);break e}}i=i.return}while(i!==null)}ZO(r)}catch(E){t=E,Xr===r&&r!==null&&(Xr=r=r.return);continue}break}while(!0)}function XO(){var e=nx.current;return nx.current=sx,e===null?sx:e}function V1(){(ds===0||ds===3||ds===2)&&(ds=4),bs===null||!(Rc&268435455)&&!(wv&268435455)||Vo(bs,Ls)}function ox(e,t){var r=Qt;Qt|=2;var s=XO();(bs!==e||Ls!==t)&&(Vi=null,_c(e,t));do try{h7();break}catch(a){JO(e,a)}while(!0);if(j1(),Qt=r,nx.current=s,Xr!==null)throw Error(be(261));return bs=null,Ls=0,ds}function h7(){for(;Xr!==null;)YO(Xr)}function m7(){for(;Xr!==null&&!$9();)YO(Xr)}function YO(e){var t=tI(e.alternate,e,qn);e.memoizedProps=e.pendingProps,t===null?ZO(e):Xr=t,D1.current=null}function ZO(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=i7(r,t),r!==null){r.flags&=32767,Xr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ds=6,Xr=null;return}}else if(r=a7(r,t,qn),r!==null){Xr=r;return}if(t=t.sibling,t!==null){Xr=t;return}Xr=t=e}while(t!==null);ds===0&&(ds=5)}function ec(e,t,r){var s=dr,a=va.transition;try{va.transition=null,dr=1,f7(e,t,r,s)}finally{va.transition=a,dr=s}return null}function f7(e,t,r,s){do Jd();while(tl!==null);if(Qt&6)throw Error(be(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(be(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(G9(e,i),e===bs&&(Xr=bs=null,Ls=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Pp||(Pp=!0,rI(Bg,function(){return Jd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=va.transition,va.transition=null;var o=dr;dr=1;var l=Qt;Qt|=4,D1.current=null,l7(e,r),KO(r,e),Iq(V0),qg=!!F0,V0=F0=null,e.current=r,c7(r),F9(),Qt=l,dr=o,va.transition=i}else e.current=r;if(Pp&&(Pp=!1,tl=e,ix=a),i=e.pendingLanes,i===0&&(hl=null),B9(r.stateNode),On(e,qr()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(ax)throw ax=!1,e=iw,iw=null,e;return ix&1&&e.tag!==0&&Jd(),i=e.pendingLanes,i&1?e===ow?mm++:(mm=0,ow=e):mm=0,Ol(),null}function Jd(){if(tl!==null){var e=O5(ix),t=va.transition,r=dr;try{if(va.transition=null,dr=16>e?16:e,tl===null)var s=!1;else{if(e=tl,tl=null,ix=0,Qt&6)throw Error(be(331));var a=Qt;for(Qt|=4,Le=e.current;Le!==null;){var i=Le,o=i.child;if(Le.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Le=d;Le!==null;){var u=Le;switch(u.tag){case 0:case 11:case 15:um(8,u,i)}var h=u.child;if(h!==null)h.return=u,Le=h;else for(;Le!==null;){u=Le;var m=u.sibling,g=u.return;if(qO(u),u===d){Le=null;break}if(m!==null){m.return=g,Le=m;break}Le=g}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}Le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Le=o;else e:for(;Le!==null;){if(i=Le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:um(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Le=y;break e}Le=i.return}}var b=e.current;for(Le=b;Le!==null;){o=Le;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,Le=N;else e:for(o=b;Le!==null;){if(l=Le,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:bv(9,l)}}catch(E){Mr(l,l.return,E)}if(l===o){Le=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Le=_;break e}Le=l.return}}if(Qt=a,Ol(),xi&&typeof xi.onPostCommitFiberRoot==\"function\")try{xi.onPostCommitFiberRoot(hv,e)}catch{}s=!0}return s}finally{dr=r,va.transition=t}}return!1}function M2(e,t,r){t=Eu(r,t),t=OO(e,t,1),e=ul(e,t,1),t=un(),e!==null&&(Sf(e,1,t),On(e,t))}function Mr(e,t,r){if(e.tag===3)M2(e,e,r);else for(;t!==null;){if(t.tag===3){M2(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError==\"function\"||typeof s.componentDidCatch==\"function\"&&(hl===null||!hl.has(s))){e=Eu(r,e),e=IO(t,e,1),t=ul(t,e,1),e=un(),t!==null&&(Sf(t,1,e),On(t,e));break}}t=t.return}}function p7(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=un(),e.pingedLanes|=e.suspendedLanes&r,bs===e&&(Ls&r)===r&&(ds===4||ds===3&&(Ls&130023424)===Ls&&500>qr()-L1?_c(e,0):M1|=r),On(e,t)}function eI(e,t){t===0&&(e.mode&1?(t=yp,yp<<=1,!(yp&130023424)&&(yp=4194304)):t=1);var r=un();e=oo(e,t),e!==null&&(Sf(e,t,r),On(e,r))}function g7(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),eI(e,r)}function x7(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(be(314))}s!==null&&s.delete(t),eI(e,r)}var tI;tI=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||An.current)Pn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Pn=!1,n7(e,t,r);Pn=!!(e.flags&131072)}else Pn=!1,_r&&t.flags&1048576&&aO(t,Xg,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;gg(e,t),e=t.pendingProps;var a=_u(t,Ys.current);Qd(t,r),a=T1(null,t,s,e,a,r);var i=A1();return t.flags|=1,typeof a==\"object\"&&a!==null&&typeof a.render==\"function\"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rn(s)?(i=!0,Qg(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,S1(t),a.updater=yv,t.stateNode=a,a._reactInternals=t,Q0(t,s,e,r),t=Y0(null,t,s,!0,i,r)):(t.tag=0,_r&&i&&v1(t),nn(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(gg(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=y7(s),e=Oa(s,e),a){case 0:t=X0(null,t,s,e,r);break e;case 1:t=k2(null,t,s,e,r);break e;case 11:t=_2(null,t,s,e,r);break e;case 14:t=S2(null,t,s,Oa(s.type,e),r);break e}throw Error(be(306,s,\"\"))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Oa(s,a),X0(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Oa(s,a),k2(e,t,s,a,r);case 3:e:{if($O(t),e===null)throw Error(be(387));s=t.pendingProps,i=t.memoizedState,a=i.element,uO(e,t),ex(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Eu(Error(be(423)),t),t=C2(e,t,s,r,a);break e}else if(s!==a){a=Eu(Error(be(424)),t),t=C2(e,t,s,r,a);break e}else for(Qn=dl(t.stateNode.containerInfo.firstChild),Jn=t,_r=!0,$a=null,r=cO(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Su(),s===a){t=lo(e,t,r);break e}nn(e,t,s,r)}t=t.child}return t;case 5:return hO(t),e===null&&W0(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,z0(s,a)?o=null:i!==null&&z0(s,i)&&(t.flags|=32),LO(e,t),nn(e,t,o,r),t.child;case 6:return e===null&&W0(t),null;case 13:return FO(e,t,r);case 4:return k1(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ku(t,null,s,r):nn(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Oa(s,a),_2(e,t,s,a,r);case 7:return nn(e,t,t.pendingProps,r),t.child;case 8:return nn(e,t,t.pendingProps.children,r),t.child;case 12:return nn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,fr(Yg,s._currentValue),s._currentValue=o,i!==null)if(Qa(i.value,o)){if(i.children===a.children&&!An.current){t=lo(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Yi(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),K0(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(be(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),K0(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}nn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Qd(t,r),a=ja(a),s=s(a),t.flags|=1,nn(e,t,s,r),t.child;case 14:return s=t.type,a=Oa(s,t.pendingProps),a=Oa(s.type,a),S2(e,t,s,a,r);case 15:return DO(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Oa(s,a),gg(e,t),t.tag=1,Rn(s)?(e=!0,Qg(t)):e=!1,Qd(t,r),RO(t,s,a),Q0(t,s,a,r),Y0(null,t,s,!0,e,r);case 19:return VO(e,t,r);case 22:return MO(e,t,r)}throw Error(be(156,t.tag))};function rI(e,t){return P5(e,t)}function v7(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xa(e,t,r,s){return new v7(e,t,r,s)}function z1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function y7(e){if(typeof e==\"function\")return z1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===i1)return 11;if(e===o1)return 14}return 2}function fl(e,t){var r=e.alternate;return r===null?(r=xa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function yg(e,t,r,s,a,i){var o=2;if(s=e,typeof e==\"function\")z1(e)&&(o=1);else if(typeof e==\"string\")o=5;else e:switch(e){case Cd:return Sc(r.children,a,i,t);case a1:o=8,a|=8;break;case y0:return e=xa(12,r,t,a|2),e.elementType=y0,e.lanes=i,e;case b0:return e=xa(13,r,t,a),e.elementType=b0,e.lanes=i,e;case w0:return e=xa(19,r,t,a),e.elementType=w0,e.lanes=i,e;case h5:return jv(r,a,i,t);default:if(typeof e==\"object\"&&e!==null)switch(e.$$typeof){case d5:o=10;break e;case u5:o=9;break e;case i1:o=11;break e;case o1:o=14;break e;case Lo:o=16,s=null;break e}throw Error(be(130,e==null?e:typeof e,\"\"))}return t=xa(o,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function Sc(e,t,r,s){return e=xa(7,e,s,t),e.lanes=r,e}function jv(e,t,r,s){return e=xa(22,e,s,t),e.elementType=h5,e.lanes=r,e.stateNode={isHidden:!1},e}function lb(e,t,r){return e=xa(6,e,null,t),e.lanes=r,e}function cb(e,t,r){return t=xa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function b7(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uy(0),this.expirationTimes=Uy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uy(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function B1(e,t,r,s,a,i,o,l,c){return e=new b7(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xa(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},S1(i),e}function w7(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kd,key:s==null?null:\"\"+s,children:e,containerInfo:t,implementation:r}}function sI(e){if(!e)return wl;e=e._reactInternals;e:{if(Qc(e)!==e||e.tag!==1)throw Error(be(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(be(171))}if(e.tag===1){var r=e.type;if(Rn(r))return sO(e,r,t)}return t}function nI(e,t,r,s,a,i,o,l,c){return e=B1(r,s,!0,e,a,i,o,l,c),e.context=sI(null),r=e.current,s=un(),a=ml(r),i=Yi(s,a),i.callback=t??null,ul(r,i,a),e.current.lanes=a,Sf(e,a,s),On(e,s),e}function Nv(e,t,r,s){var a=t.current,i=un(),o=ml(a);return r=sI(r),t.context===null?t.context=r:t.pendingContext=r,t=Yi(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ul(a,t,o),e!==null&&(Wa(e,a,o,i),mg(e,a,o)),o}function lx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function L2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function U1(e,t){L2(e,t),(e=e.alternate)&&L2(e,t)}function j7(){return null}var aI=typeof reportError==\"function\"?reportError:function(e){console.error(e)};function q1(e){this._internalRoot=e}_v.prototype.render=q1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(be(409));Nv(e,t,null,null)};_v.prototype.unmount=q1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Oc(function(){Nv(null,e,null,null)}),t[io]=null}};function _v(e){this._internalRoot=e}_v.prototype.unstable_scheduleHydration=function(e){if(e){var t=M5();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Fo.length&&t!==0&&t<Fo[r].priority;r++);Fo.splice(r,0,e),r===0&&$5(e)}};function H1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==\" react-mount-point-unstable \"))}function $2(){}function N7(e,t,r,s,a){if(a){if(typeof s==\"function\"){var i=s;s=function(){var d=lx(o);i.call(d)}}var o=nI(t,s,e,0,null,!1,!1,\"\",$2);return e._reactRootContainer=o,e[io]=o.current,Rm(e.nodeType===8?e.parentNode:e),Oc(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s==\"function\"){var l=s;s=function(){var d=lx(c);l.call(d)}}var c=B1(e,0,!1,null,null,!1,!1,\"\",$2);return e._reactRootContainer=c,e[io]=c.current,Rm(e.nodeType===8?e.parentNode:e),Oc(function(){Nv(t,c,r,s)}),c}function kv(e,t,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a==\"function\"){var l=a;a=function(){var c=lx(o);l.call(c)}}Nv(t,o,e,a)}else o=N7(r,t,e,a,s);return lx(o)}I5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Qh(t.pendingLanes);r!==0&&(d1(t,r|1),On(t,qr()),!(Qt&6)&&(Pu=qr()+500,Ol()))}break;case 13:Oc(function(){var s=oo(e,1);if(s!==null){var a=un();Wa(s,e,1,a)}}),U1(e,1)}};u1=function(e){if(e.tag===13){var t=oo(e,134217728);if(t!==null){var r=un();Wa(t,e,134217728,r)}U1(e,134217728)}};D5=function(e){if(e.tag===13){var t=ml(e),r=oo(e,t);if(r!==null){var s=un();Wa(r,e,t,s)}U1(e,t)}};M5=function(){return dr};L5=function(e,t){var r=dr;try{return dr=e,t()}finally{dr=r}};A0=function(e,t,r){switch(t){case\"input\":if(_0(e,r),t=r.name,r.type===\"radio\"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+t)+'][type=\"radio\"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=gv(s);if(!a)throw Error(be(90));f5(s),_0(s,a)}}}break;case\"textarea\":g5(e,r);break;case\"select\":t=r.value,t!=null&&Hd(e,!!r.multiple,t,!1)}};N5=$1;_5=Oc;var _7={usingClientEntryPoint:!1,Events:[Cf,Ad,gv,w5,j5,$1]},Mh={findFiberByHostInstance:cc,bundleType:0,version:\"18.3.1\",rendererPackageName:\"react-dom\"},S7={bundleType:Mh.bundleType,version:Mh.version,rendererPackageName:Mh.rendererPackageName,rendererConfig:Mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:go.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=C5(e),e===null?null:e.stateNode},findFiberByHostInstance:Mh.findFiberByHostInstance||j7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.3.1-next-f1338f8080-20240426\"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<\"u\"){var Tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tp.isDisabled&&Tp.supportsFiber)try{hv=Tp.inject(S7),xi=Tp}catch{}}ra.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_7;ra.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H1(t))throw Error(be(200));return w7(e,t,null,r)};ra.createRoot=function(e,t){if(!H1(e))throw Error(be(299));var r=!1,s=\"\",a=aI;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=B1(e,1,!1,null,null,r,!1,s,a),e[io]=t.current,Rm(e.nodeType===8?e.parentNode:e),new q1(t)};ra.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render==\"function\"?Error(be(188)):(e=Object.keys(e).join(\",\"),Error(be(268,e)));return e=C5(t),e=e===null?null:e.stateNode,e};ra.flushSync=function(e){return Oc(e)};ra.hydrate=function(e,t,r){if(!Sv(t))throw Error(be(200));return kv(null,e,t,!0,r)};ra.hydrateRoot=function(e,t,r){if(!H1(e))throw Error(be(405));var s=r!=null&&r.hydratedSources||null,a=!1,i=\"\",o=aI;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=nI(t,null,e,1,r??null,a,!1,i,o),e[io]=t.current,Rm(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new _v(t)};ra.render=function(e,t,r){if(!Sv(t))throw Error(be(200));return kv(null,e,t,!1,r)};ra.unmountComponentAtNode=function(e){if(!Sv(e))throw Error(be(40));return e._reactRootContainer?(Oc(function(){kv(null,null,e,!1,function(){e._reactRootContainer=null,e[io]=null})}),!0):!1};ra.unstable_batchedUpdates=$1;ra.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Sv(r))throw Error(be(200));if(e==null||e._reactInternals===void 0)throw Error(be(38));return kv(e,t,r,!1,s)};ra.version=\"18.3.1-next-f1338f8080-20240426\";function iI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>\"u\"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=\"function\"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iI)}catch(e){console.error(e)}}iI(),i5.exports=ra;var Jc=i5.exports;const k7=dv(Jc);var oI,F2=Jc;oI=F2.createRoot,F2.hydrateRoot;function C7(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,s,a,i,o=[],l=\"\",c=e.split(\"/\");for(c[0]||c.shift();a=c.shift();)r=a[0],r===\"*\"?(o.push(r),l+=a[1]===\"?\"?\"(?:/(.*))?\":\"/(.*)\"):r===\":\"?(s=a.indexOf(\"?\",1),i=a.indexOf(\".\",1),o.push(a.substring(1,~s?s:~i?i:a.length)),l+=~s&&!~i?\"(?:/([^/]+?))?\":\"/([^/]+?)\",~i&&(l+=(~s?\"?\":\"\")+\"\\\\\"+a.substring(i))):l+=\"/\"+a;return{keys:o,pattern:new RegExp(\"^\"+l+(t?\"(?=$|/)\":\"/?$\"),\"i\")}}var lI={exports:{}},cI={};/**\n * @license React\n * use-sync-external-store-shim.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var Tu=f;function E7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var P7=typeof Object.is==\"function\"?Object.is:E7,T7=Tu.useState,A7=Tu.useEffect,R7=Tu.useLayoutEffect,O7=Tu.useDebugValue;function I7(e,t){var r=t(),s=T7({inst:{value:r,getSnapshot:t}}),a=s[0].inst,i=s[1];return R7(function(){a.value=r,a.getSnapshot=t,db(a)&&i({inst:a})},[e,r,t]),A7(function(){return db(a)&&i({inst:a}),e(function(){db(a)&&i({inst:a})})},[e]),O7(r),r}function db(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!P7(e,r)}catch{return!0}}function D7(e,t){return t()}var M7=typeof window>\"u\"||typeof window.document>\"u\"||typeof window.document.createElement>\"u\"?D7:I7;cI.useSyncExternalStore=Tu.useSyncExternalStore!==void 0?Tu.useSyncExternalStore:M7;lI.exports=cI;var L7=lI.exports;const $7=n5.useInsertionEffect,F7=typeof window<\"u\"&&typeof window.document<\"u\"&&typeof window.document.createElement<\"u\",V7=F7?f.useLayoutEffect:f.useEffect,z7=$7||V7,dI=e=>{const t=f.useRef([e,(...r)=>t[0](...r)]).current;return z7(()=>{t[0]=e}),t[1]},B7=\"popstate\",W1=\"pushState\",K1=\"replaceState\",U7=\"hashchange\",V2=[B7,W1,K1,U7],q7=e=>{for(const t of V2)addEventListener(t,e);return()=>{for(const t of V2)removeEventListener(t,e)}},uI=(e,t)=>L7.useSyncExternalStore(q7,e,t),H7=()=>location.search,W7=({ssrSearch:e=\"\"}={})=>uI(H7,()=>e),z2=()=>location.pathname,K7=({ssrPath:e}={})=>uI(z2,e?()=>e:z2),G7=(e,{replace:t=!1,state:r=null}={})=>history[t?K1:W1](r,\"\",e),Q7=(e={})=>[K7(e),G7],B2=Symbol.for(\"wouter_v3\");if(typeof history<\"u\"&&typeof window[B2]>\"u\"){for(const e of[W1,K1]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),r}}Object.defineProperty(window,B2,{value:!0})}const J7=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?\"~\"+t:t.slice(e.length)||\"/\",hI=(e=\"\")=>e===\"/\"?\"\":e,X7=(e,t)=>e[0]===\"~\"?e.slice(1):hI(t)+e,Y7=(e=\"\",t)=>J7(dw(hI(e)),dw(t)),Z7=e=>e[0]===\"?\"?e.slice(1):e,dw=e=>{try{return decodeURI(e)}catch{return e}},eH=e=>dw(Z7(e)),mI={hook:Q7,searchHook:W7,parser:C7,base:\"\",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},fI=f.createContext(mI),rh=()=>f.useContext(fI),pI={},gI=f.createContext(pI),tH=()=>f.useContext(gI),Cv=e=>{const[t,r]=e.hook(e);return[Y7(e.base,t),dI((s,a)=>r(X7(s,e.base),a))]},Za=()=>Cv(rh()),rH=()=>{const e=rh();return eH(e.searchHook(e))},xI=(e,t,r,s)=>{const{pattern:a,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||\"*\",s),o=a.exec(r)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((h,m)=>[h,c[m]])):o.groups;let u={...c};return d&&Object.assign(u,d),u})(),...s?[l]:[]]:[!1,null]},sH=({children:e,...t})=>{var u,h;const r=rh(),s=t.hook?mI:r;let a=s;const[i,o]=((u=t.ssrPath)==null?void 0:u.split(\"?\"))??[];o&&(t.ssrSearch=o,t.ssrPath=i),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let l=f.useRef({}),c=l.current,d=c;for(let m in s){const g=m===\"base\"?s[m]+(t[m]||\"\"):t[m]||s[m];c===d&&g!==d[m]&&(l.current=d={...d}),d[m]=g,g!==s[m]&&(a=d)}return f.createElement(fI.Provider,{value:a,children:e})},U2=({children:e,component:t},r)=>t?f.createElement(t,{params:r}):typeof e==\"function\"?e(r):e,nH=e=>{let t=f.useRef(pI),r=t.current;for(const s in e)e[s]!==r[s]&&(r=e);return Object.keys(e).length===0&&(r=e),t.current=r},ze=({path:e,nest:t,match:r,...s})=>{const a=rh(),[i]=Cv(a),[o,l,c]=r??xI(a.parser,e,i,t),d=nH({...tH(),...l});if(!o)return null;const u=c?f.createElement(sH,{base:c},U2(s,d)):U2(s,d);return f.createElement(gI.Provider,{value:d,children:u})},Oe=f.forwardRef((e,t)=>{const r=rh(),[s,a]=Cv(r),{to:i=\"\",href:o=i,onClick:l,asChild:c,children:d,className:u,replace:h,state:m,...g}=e,v=dI(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(l==null||l(w),w.defaultPrevented||(w.preventDefault(),a(o,e)))}),x=r.hrefs(o[0]===\"~\"?o.slice(1):r.base+o,r);return c&&f.isValidElement(d)?f.cloneElement(d,{onClick:v,href:x}):f.createElement(\"a\",{...g,onClick:v,href:x,className:u!=null&&u.call?u(s===o):u,children:d,ref:t})}),vI=e=>Array.isArray(e)?e.flatMap(t=>vI(t&&t.type===f.Fragment?t.props.children:t)):[e],q2=({children:e,location:t})=>{const r=rh(),[s]=Cv(r);for(const a of vI(e)){let i=0;if(f.isValidElement(a)&&(i=xI(r.parser,a.props.path,t||s,a.props.nest))[0])return f.cloneElement(a,{match:i})}return null};var sh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ic=typeof window>\"u\"||\"Deno\"in globalThis;function ha(){}function aH(e,t){return typeof e==\"function\"?e(t):e}function uw(e){return typeof e==\"number\"&&e>=0&&e!==1/0}function yI(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Xd(e,t){return typeof e==\"function\"?e(t):e}function Fa(e,t){return typeof e==\"function\"?e(t):e}function H2(e,t){const{type:r=\"all\",exact:s,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==G1(o,t.options))return!1}else if(!zm(t.queryKey,o))return!1}if(r!==\"all\"){const c=t.isActive();if(r===\"active\"&&!c||r===\"inactive\"&&c)return!1}return!(typeof l==\"boolean\"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function W2(e,t){const{exact:r,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Dc(t.options.mutationKey)!==Dc(i))return!1}else if(!zm(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function G1(e,t){return((t==null?void 0:t.queryKeyHashFn)||Dc)(e)}function Dc(e){return JSON.stringify(e,(t,r)=>hw(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function zm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e==\"object\"&&typeof t==\"object\"?!Object.keys(t).some(r=>!zm(e[r],t[r])):!1}function bI(e,t){if(e===t)return e;const r=K2(e)&&K2(t);if(r||hw(e)&&hw(t)){const s=r?e:Object.keys(e),a=s.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d];(!r&&s.includes(u)||r)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=bI(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return a===o&&c===a?e:l}return t}function cx(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function K2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function hw(e){if(!G2(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!G2(r)||!r.hasOwnProperty(\"isPrototypeOf\")||Object.getPrototypeOf(e)!==Object.prototype)}function G2(e){return Object.prototype.toString.call(e)===\"[object Object]\"}function iH(e){return new Promise(t=>{setTimeout(t,e)})}function mw(e,t,r){return typeof r.structuralSharing==\"function\"?r.structuralSharing(e,t):r.structuralSharing!==!1?bI(e,t):t}function oH(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function lH(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var Q1=Symbol();function wI(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Q1?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var xc,Ho,du,GP,cH=(GP=class extends sh{constructor(){super();lt(this,xc);lt(this,Ho);lt(this,du);De(this,du,t=>{if(!Ic&&window.addEventListener){const r=()=>t();return window.addEventListener(\"visibilitychange\",r,!1),()=>{window.removeEventListener(\"visibilitychange\",r)}}})}onSubscribe(){B(this,Ho)||this.setEventListener(B(this,du))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,Ho))==null||t.call(this),De(this,Ho,void 0))}setEventListener(t){var r;De(this,du,t),(r=B(this,Ho))==null||r.call(this),De(this,Ho,t(s=>{typeof s==\"boolean\"?this.setFocused(s):this.onFocus()}))}setFocused(t){B(this,xc)!==t&&(De(this,xc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof B(this,xc)==\"boolean\"?B(this,xc):((t=globalThis.document)==null?void 0:t.visibilityState)!==\"hidden\"}},xc=new WeakMap,Ho=new WeakMap,du=new WeakMap,GP),J1=new cH,uu,Wo,hu,QP,dH=(QP=class extends sh{constructor(){super();lt(this,uu,!0);lt(this,Wo);lt(this,hu);De(this,hu,t=>{if(!Ic&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener(\"online\",r,!1),window.addEventListener(\"offline\",s,!1),()=>{window.removeEventListener(\"online\",r),window.removeEventListener(\"offline\",s)}}})}onSubscribe(){B(this,Wo)||this.setEventListener(B(this,hu))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,Wo))==null||t.call(this),De(this,Wo,void 0))}setEventListener(t){var r;De(this,hu,t),(r=B(this,Wo))==null||r.call(this),De(this,Wo,t(this.setOnline.bind(this)))}setOnline(t){B(this,uu)!==t&&(De(this,uu,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return B(this,uu)}},uu=new WeakMap,Wo=new WeakMap,hu=new WeakMap,QP),dx=new dH;function fw(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status=\"pending\",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:\"fulfilled\",value:a}),e(a)},r.reject=a=>{s({status:\"rejected\",reason:a}),t(a)},r}function uH(e){return Math.min(1e3*2**e,3e4)}function jI(e){return(e??\"online\")===\"online\"?dx.isOnline():!0}var NI=class extends Error{constructor(e){super(\"CancelledError\"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ub(e){return e instanceof NI}function _I(e){let t=!1,r=0,s=!1,a;const i=fw(),o=x=>{var w;s||(m(new NI(x)),(w=e.abort)==null||w.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>J1.isFocused()&&(e.networkMode===\"always\"||dx.isOnline())&&e.canRun(),u=()=>jI(e.networkMode)&&e.canRun(),h=x=>{var w;s||(s=!0,(w=e.onSuccess)==null||w.call(e,x),a==null||a(),i.resolve(x))},m=x=>{var w;s||(s=!0,(w=e.onError)==null||w.call(e,x),a==null||a(),i.reject(x))},g=()=>new Promise(x=>{var w;a=y=>{(s||d())&&x(y)},(w=e.onPause)==null||w.call(e)}).then(()=>{var x;a=void 0,s||(x=e.onContinue)==null||x.call(e)}),v=()=>{if(s)return;let x;const w=r===0?e.initialPromise:void 0;try{x=w??e.fn()}catch(y){x=Promise.reject(y)}Promise.resolve(x).then(h).catch(y=>{var k;if(s)return;const b=e.retry??(Ic?0:3),N=e.retryDelay??uH,_=typeof N==\"function\"?N(r,y):N,E=b===!0||typeof b==\"number\"&&r<b||typeof b==\"function\"&&b(r,y);if(t||!E){m(y);return}r++,(k=e.onFail)==null||k.call(e,r,y),iH(_).then(()=>d()?void 0:g()).then(()=>{t?m(y):v()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?v():g().then(v),i)}}function hH(){let e=[],t=0,r=l=>{l()},s=l=>{l()},a=l=>setTimeout(l,0);const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var cs=hH(),vc,JP,SI=(JP=class{constructor(){lt(this,vc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),uw(this.gcTime)&&De(this,vc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ic?1/0:5*60*1e3))}clearGcTimeout(){B(this,vc)&&(clearTimeout(B(this,vc)),De(this,vc,void 0))}},vc=new WeakMap,JP),mu,fu,ua,qs,bf,yc,Da,$i,XP,mH=(XP=class extends SI{constructor(t){super();lt(this,Da);lt(this,mu);lt(this,fu);lt(this,ua);lt(this,qs);lt(this,bf);lt(this,yc);De(this,yc,!1),De(this,bf,t.defaultOptions),this.setOptions(t.options),this.observers=[],De(this,ua,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,De(this,mu,fH(this.options)),this.state=t.state??B(this,mu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=B(this,qs))==null?void 0:t.promise}setOptions(t){this.options={...B(this,bf),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus===\"idle\"&&B(this,ua).remove(this)}setData(t,r){const s=mw(this.state.data,t,this.options);return Ot(this,Da,$i).call(this,{data:s,type:\"success\",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){Ot(this,Da,$i).call(this,{type:\"setState\",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=B(this,qs))==null?void 0:s.promise;return(a=B(this,qs))==null||a.cancel(t),r?r.then(ha).catch(ha):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,mu))}isActive(){return this.observers.some(t=>Fa(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Q1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!yI(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=B(this,qs))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=B(this,qs))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),B(this,ua).notify({type:\"observerAdded\",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(B(this,qs)&&(B(this,yc)?B(this,qs).cancel({revert:!0}):B(this,qs).cancelRetry()),this.scheduleGc()),B(this,ua).notify({type:\"observerRemoved\",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ot(this,Da,$i).call(this,{type:\"invalidate\"})}fetch(t,r){var c,d,u;if(this.state.fetchStatus!==\"idle\"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(B(this,qs))return B(this,qs).continueRetry(),B(this,qs).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,a=h=>{Object.defineProperty(h,\"signal\",{enumerable:!0,get:()=>(De(this,yc,!0),s.signal)})},i=()=>{const h=wI(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return a(m),De(this,yc,!1),this.options.persister?this.options.persister(h,m,this):h(m)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),De(this,fu,this.state),(this.state.fetchStatus===\"idle\"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&Ot(this,Da,$i).call(this,{type:\"fetch\",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=h=>{var m,g,v,x;ub(h)&&h.silent||Ot(this,Da,$i).call(this,{type:\"error\",error:h}),ub(h)||((g=(m=B(this,ua).config).onError)==null||g.call(m,h,this),(x=(v=B(this,ua).config).onSettled)==null||x.call(v,this.state.data,h,this)),this.scheduleGc()};return De(this,qs,_I({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:h=>{var m,g,v,x;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){l(w);return}(g=(m=B(this,ua).config).onSuccess)==null||g.call(m,h,this),(x=(v=B(this,ua).config).onSettled)==null||x.call(v,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,m)=>{Ot(this,Da,$i).call(this,{type:\"failed\",failureCount:h,error:m})},onPause:()=>{Ot(this,Da,$i).call(this,{type:\"pause\"})},onContinue:()=>{Ot(this,Da,$i).call(this,{type:\"continue\"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),B(this,qs).start()}},mu=new WeakMap,fu=new WeakMap,ua=new WeakMap,qs=new WeakMap,bf=new WeakMap,yc=new WeakMap,Da=new WeakSet,$i=function(t){const r=s=>{switch(t.type){case\"failed\":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case\"pause\":return{...s,fetchStatus:\"paused\"};case\"continue\":return{...s,fetchStatus:\"fetching\"};case\"fetch\":return{...s,...kI(s.data,this.options),fetchMeta:t.meta??null};case\"success\":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:\"success\",...!t.manual&&{fetchStatus:\"idle\",fetchFailureCount:0,fetchFailureReason:null}};case\"error\":const a=t.error;return ub(a)&&a.revert&&B(this,fu)?{...B(this,fu),fetchStatus:\"idle\"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:\"idle\",status:\"error\"};case\"invalidate\":return{...s,isInvalidated:!0};case\"setState\":return{...s,...t.state}}};this.state=r(this.state),cs.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),B(this,ua).notify({query:this,type:\"updated\",action:t})})},XP);function kI(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jI(t.networkMode)?\"fetching\":\"paused\",...e===void 0&&{error:null,status:\"pending\"}}}function fH(e){const t=typeof e.initialData==\"function\"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt==\"function\"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?\"success\":\"pending\",fetchStatus:\"idle\"}}var oi,YP,pH=(YP=class extends sh{constructor(t={}){super();lt(this,oi);this.config=t,De(this,oi,new Map)}build(t,r,s){const a=r.queryKey,i=r.queryHash??G1(a,r);let o=this.get(i);return o||(o=new mH({cache:this,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){B(this,oi).has(t.queryHash)||(B(this,oi).set(t.queryHash,t),this.notify({type:\"added\",query:t}))}remove(t){const r=B(this,oi).get(t.queryHash);r&&(t.destroy(),r===t&&B(this,oi).delete(t.queryHash),this.notify({type:\"removed\",query:t}))}clear(){cs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return B(this,oi).get(t)}getAll(){return[...B(this,oi).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>H2(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>H2(t,s)):r}notify(t){cs.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){cs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){cs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},oi=new WeakMap,YP),li,tn,bc,ci,Oo,ZP,gH=(ZP=class extends SI{constructor(t){super();lt(this,ci);lt(this,li);lt(this,tn);lt(this,bc);this.mutationId=t.mutationId,De(this,tn,t.mutationCache),De(this,li,[]),this.state=t.state||CI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){B(this,li).includes(t)||(B(this,li).push(t),this.clearGcTimeout(),B(this,tn).notify({type:\"observerAdded\",mutation:this,observer:t}))}removeObserver(t){De(this,li,B(this,li).filter(r=>r!==t)),this.scheduleGc(),B(this,tn).notify({type:\"observerRemoved\",mutation:this,observer:t})}optionalRemove(){B(this,li).length||(this.state.status===\"pending\"?this.scheduleGc():B(this,tn).remove(this))}continue(){var t;return((t=B(this,bc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,o,l,c,d,u,h,m,g,v,x,w,y,b,N,_,E,k,P;De(this,bc,_I({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error(\"No mutationFn found\")),onFail:(C,A)=>{Ot(this,ci,Oo).call(this,{type:\"failed\",failureCount:C,error:A})},onPause:()=>{Ot(this,ci,Oo).call(this,{type:\"pause\"})},onContinue:()=>{Ot(this,ci,Oo).call(this,{type:\"continue\"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,tn).canRun(this)}));const r=this.state.status===\"pending\",s=!B(this,bc).canStart();try{if(!r){Ot(this,ci,Oo).call(this,{type:\"pending\",variables:t,isPaused:s}),await((i=(a=B(this,tn).config).onMutate)==null?void 0:i.call(a,t,this));const A=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));A!==this.state.context&&Ot(this,ci,Oo).call(this,{type:\"pending\",context:A,variables:t,isPaused:s})}const C=await B(this,bc).start();return await((d=(c=B(this,tn).config).onSuccess)==null?void 0:d.call(c,C,t,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,C,t,this.state.context)),await((g=(m=B(this,tn).config).onSettled)==null?void 0:g.call(m,C,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,C,null,t,this.state.context)),Ot(this,ci,Oo).call(this,{type:\"success\",data:C}),C}catch(C){try{throw await((y=(w=B(this,tn).config).onError)==null?void 0:y.call(w,C,t,this.state.context,this)),await((N=(b=this.options).onError)==null?void 0:N.call(b,C,t,this.state.context)),await((E=(_=B(this,tn).config).onSettled)==null?void 0:E.call(_,void 0,C,this.state.variables,this.state.context,this)),await((P=(k=this.options).onSettled)==null?void 0:P.call(k,void 0,C,t,this.state.context)),C}finally{Ot(this,ci,Oo).call(this,{type:\"error\",error:C})}}finally{B(this,tn).runNext(this)}}},li=new WeakMap,tn=new WeakMap,bc=new WeakMap,ci=new WeakSet,Oo=function(t){const r=s=>{switch(t.type){case\"failed\":return{...s,failureCount:t.failureCount,failureReason:t.error};case\"pause\":return{...s,isPaused:!0};case\"continue\":return{...s,isPaused:!1};case\"pending\":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:\"pending\",variables:t.variables,submittedAt:Date.now()};case\"success\":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:\"success\",isPaused:!1};case\"error\":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:\"error\"}}};this.state=r(this.state),cs.batch(()=>{B(this,li).forEach(s=>{s.onMutationUpdate(t)}),B(this,tn).notify({mutation:this,type:\"updated\",action:t})})},ZP);function CI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:\"idle\",variables:void 0,submittedAt:0}}var Un,wf,eT,xH=(eT=class extends sh{constructor(t={}){super();lt(this,Un);lt(this,wf);this.config=t,De(this,Un,new Map),De(this,wf,Date.now())}build(t,r,s){const a=new gH({mutationCache:this,mutationId:++mp(this,wf)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){const r=Ap(t),s=B(this,Un).get(r)??[];s.push(t),B(this,Un).set(r,s),this.notify({type:\"added\",mutation:t})}remove(t){var s;const r=Ap(t);if(B(this,Un).has(r)){const a=(s=B(this,Un).get(r))==null?void 0:s.filter(i=>i!==t);a&&(a.length===0?B(this,Un).delete(r):B(this,Un).set(r,a))}this.notify({type:\"removed\",mutation:t})}canRun(t){var s;const r=(s=B(this,Un).get(Ap(t)))==null?void 0:s.find(a=>a.state.status===\"pending\");return!r||r===t}runNext(t){var s;const r=(s=B(this,Un).get(Ap(t)))==null?void 0:s.find(a=>a!==t&&a.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){cs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...B(this,Un).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(s=>W2(r,s))}findAll(t={}){return this.getAll().filter(r=>W2(t,r))}notify(t){cs.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return cs.batch(()=>Promise.all(t.map(r=>r.continue().catch(ha))))}},Un=new WeakMap,wf=new WeakMap,eT);function Ap(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Q2(e){return{onFetch:(t,r)=>{var u,h,m,g,v;const s=t.options,a=(m=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,i=((g=t.state.data)==null?void 0:g.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const w=N=>{Object.defineProperty(N,\"signal\",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener(\"abort\",()=>{x=!0}),t.signal)})},y=wI(t.options,t.fetchOptions),b=async(N,_,E)=>{if(x)return Promise.reject();if(_==null&&N.pages.length)return Promise.resolve(N);const k={queryKey:t.queryKey,pageParam:_,direction:E?\"backward\":\"forward\",meta:t.options.meta};w(k);const P=await y(k),{maxPages:C}=t.options,A=E?lH:oH;return{pages:A(N.pages,P,C),pageParams:A(N.pageParams,_,C)}};if(a&&i.length){const N=a===\"backward\",_=N?vH:J2,E={pages:i,pageParams:o},k=_(s,E);l=await b(E,k,N)}else{const N=e??i.length;do{const _=c===0?o[0]??s.initialPageParam:J2(s,l);if(c>0&&_==null)break;l=await b(l,_),c++}while(c<N)}return l};t.options.persister?t.fetchFn=()=>{var x,w;return(w=(x=t.options).persister)==null?void 0:w.call(x,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function J2(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function vH(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var Ir,Ko,Go,pu,gu,Qo,xu,vu,tT,yH=(tT=class{constructor(e={}){lt(this,Ir);lt(this,Ko);lt(this,Go);lt(this,pu);lt(this,gu);lt(this,Qo);lt(this,xu);lt(this,vu);De(this,Ir,e.queryCache||new pH),De(this,Ko,e.mutationCache||new xH),De(this,Go,e.defaultOptions||{}),De(this,pu,new Map),De(this,gu,new Map),De(this,Qo,0)}mount(){mp(this,Qo)._++,B(this,Qo)===1&&(De(this,xu,J1.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Ir).onFocus())})),De(this,vu,dx.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Ir).onOnline())})))}unmount(){var e,t;mp(this,Qo)._--,B(this,Qo)===0&&((e=B(this,xu))==null||e.call(this),De(this,xu,void 0),(t=B(this,vu))==null||t.call(this),De(this,vu,void 0))}isFetching(e){return B(this,Ir).findAll({...e,fetchStatus:\"fetching\"}).length}isMutating(e){return B(this,Ko).findAll({...e,status:\"pending\"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=B(this,Ir).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),s=B(this,Ir).build(this,r);return e.revalidateIfStale&&s.isStaleByTime(Xd(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return B(this,Ir).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=B(this,Ir).get(s.queryHash),i=a==null?void 0:a.state.data,o=aH(t,i);if(o!==void 0)return B(this,Ir).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return cs.batch(()=>B(this,Ir).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=B(this,Ir).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=B(this,Ir);cs.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=B(this,Ir),s={type:\"active\",...e};return cs.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},s=cs.batch(()=>B(this,Ir).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(ha).catch(ha)}invalidateQueries(e={},t={}){return cs.batch(()=>{if(B(this,Ir).findAll(e).forEach(s=>{s.invalidate()}),e.refetchType===\"none\")return Promise.resolve();const r={...e,type:e.refetchType??e.type??\"active\"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},s=cs.batch(()=>B(this,Ir).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(ha)),a.state.fetchStatus===\"paused\"?Promise.resolve():i}));return Promise.all(s).then(ha)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=B(this,Ir).build(this,t);return r.isStaleByTime(Xd(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ha).catch(ha)}fetchInfiniteQuery(e){return e.behavior=Q2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ha).catch(ha)}ensureInfiniteQueryData(e){return e.behavior=Q2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return dx.isOnline()?B(this,Ko).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,Ir)}getMutationCache(){return B(this,Ko)}getDefaultOptions(){return B(this,Go)}setDefaultOptions(e){De(this,Go,e)}setQueryDefaults(e,t){B(this,pu).set(Dc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...B(this,pu).values()];let r={};return t.forEach(s=>{zm(e,s.queryKey)&&(r={...r,...s.defaultOptions})}),r}setMutationDefaults(e,t){B(this,gu).set(Dc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...B(this,gu).values()];let r={};return t.forEach(s=>{zm(e,s.mutationKey)&&(r={...r,...s.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...B(this,Go).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=G1(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!==\"always\"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode=\"offlineFirst\"),t.enabled!==!0&&t.queryFn===Q1&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,Go).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,Ir).clear(),B(this,Ko).clear()}},Ir=new WeakMap,Ko=new WeakMap,Go=new WeakMap,pu=new WeakMap,gu=new WeakMap,Qo=new WeakMap,xu=new WeakMap,vu=new WeakMap,tT),bn,Ut,jf,rn,wc,yu,Jo,di,Nf,bu,wu,jc,Nc,Xo,ju,ar,Xh,pw,gw,xw,vw,yw,bw,ww,EI,rT,bH=(rT=class extends sh{constructor(t,r){super();lt(this,ar);lt(this,bn);lt(this,Ut);lt(this,jf);lt(this,rn);lt(this,wc);lt(this,yu);lt(this,Jo);lt(this,di);lt(this,Nf);lt(this,bu);lt(this,wu);lt(this,jc);lt(this,Nc);lt(this,Xo);lt(this,ju,new Set);this.options=r,De(this,bn,t),De(this,di,null),De(this,Jo,fw()),this.options.experimental_prefetchInRender||B(this,Jo).reject(new Error(\"experimental_prefetchInRender feature flag is not enabled\")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(B(this,Ut).addObserver(this),X2(B(this,Ut),this.options)?Ot(this,ar,Xh).call(this):this.updateResult(),Ot(this,ar,vw).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jw(B(this,Ut),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jw(B(this,Ut),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ot(this,ar,yw).call(this),Ot(this,ar,bw).call(this),B(this,Ut).removeObserver(this)}setOptions(t,r){const s=this.options,a=B(this,Ut);if(this.options=B(this,bn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!=\"boolean\"&&typeof this.options.enabled!=\"function\"&&typeof Fa(this.options.enabled,B(this,Ut))!=\"boolean\")throw new Error(\"Expected enabled to be a boolean or a callback that returns a boolean\");Ot(this,ar,ww).call(this),B(this,Ut).setOptions(this.options),s._defaulted&&!cx(this.options,s)&&B(this,bn).getQueryCache().notify({type:\"observerOptionsUpdated\",query:B(this,Ut),observer:this});const i=this.hasListeners();i&&Y2(B(this,Ut),a,this.options,s)&&Ot(this,ar,Xh).call(this),this.updateResult(r),i&&(B(this,Ut)!==a||Fa(this.options.enabled,B(this,Ut))!==Fa(s.enabled,B(this,Ut))||Xd(this.options.staleTime,B(this,Ut))!==Xd(s.staleTime,B(this,Ut)))&&Ot(this,ar,pw).call(this);const o=Ot(this,ar,gw).call(this);i&&(B(this,Ut)!==a||Fa(this.options.enabled,B(this,Ut))!==Fa(s.enabled,B(this,Ut))||o!==B(this,Xo))&&Ot(this,ar,xw).call(this,o)}getOptimisticResult(t){const r=B(this,bn).getQueryCache().build(B(this,bn),t),s=this.createResult(r,t);return jH(this,s)&&(De(this,rn,s),De(this,yu,this.options),De(this,wc,B(this,Ut).state)),s}getCurrentResult(){return B(this,rn)}trackResult(t,r){const s={};return Object.keys(t).forEach(a=>{Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),r==null||r(a),t[a])})}),s}trackProp(t){B(this,ju).add(t)}getCurrentQuery(){return B(this,Ut)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=B(this,bn).defaultQueryOptions(t),s=B(this,bn).getQueryCache().build(B(this,bn),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return Ot(this,ar,Xh).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),B(this,rn)))}createResult(t,r){var C;const s=B(this,Ut),a=this.options,i=B(this,rn),o=B(this,wc),l=B(this,yu),d=t!==s?t.state:B(this,jf),{state:u}=t;let h={...u},m=!1,g;if(r._optimisticResults){const A=this.hasListeners(),O=!A&&X2(t,r),q=A&&Y2(t,s,r,a);(O||q)&&(h={...h,...kI(u.data,t.options)}),r._optimisticResults===\"isRestoring\"&&(h.fetchStatus=\"idle\")}let{error:v,errorUpdatedAt:x,status:w}=h;if(r.select&&h.data!==void 0)if(i&&h.data===(o==null?void 0:o.data)&&r.select===B(this,Nf))g=B(this,bu);else try{De(this,Nf,r.select),g=r.select(h.data),g=mw(i==null?void 0:i.data,g,r),De(this,bu,g),De(this,di,null)}catch(A){De(this,di,A)}else g=h.data;if(r.placeholderData!==void 0&&g===void 0&&w===\"pending\"){let A;if(i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))A=i.data;else if(A=typeof r.placeholderData==\"function\"?r.placeholderData((C=B(this,wu))==null?void 0:C.state.data,B(this,wu)):r.placeholderData,r.select&&A!==void 0)try{A=r.select(A),De(this,di,null)}catch(O){De(this,di,O)}A!==void 0&&(w=\"success\",g=mw(i==null?void 0:i.data,A,r),m=!0)}B(this,di)&&(v=B(this,di),g=B(this,bu),x=Date.now(),w=\"error\");const y=h.fetchStatus===\"fetching\",b=w===\"pending\",N=w===\"error\",_=b&&y,E=g!==void 0,P={status:w,fetchStatus:h.fetchStatus,isPending:b,isSuccess:w===\"success\",isError:N,isInitialLoading:_,isLoading:_,data:g,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:N&&!E,isPaused:h.fetchStatus===\"paused\",isPlaceholderData:m,isRefetchError:N&&E,isStale:X1(t,r),refetch:this.refetch,promise:B(this,Jo)};if(this.options.experimental_prefetchInRender){const A=K=>{P.status===\"error\"?K.reject(P.error):P.data!==void 0&&K.resolve(P.data)},O=()=>{const K=De(this,Jo,P.promise=fw());A(K)},q=B(this,Jo);switch(q.status){case\"pending\":t.queryHash===s.queryHash&&A(q);break;case\"fulfilled\":(P.status===\"error\"||P.data!==q.value)&&O();break;case\"rejected\":(P.status!==\"error\"||P.error!==q.reason)&&O();break}}return P}updateResult(t){const r=B(this,rn),s=this.createResult(B(this,Ut),this.options);if(De(this,wc,B(this,Ut).state),De(this,yu,this.options),B(this,wc).data!==void 0&&De(this,wu,B(this,Ut)),cx(s,r))return;De(this,rn,s);const a={},i=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o==\"function\"?o():o;if(l===\"all\"||!l&&!B(this,ju).size)return!0;const c=new Set(l??B(this,ju));return this.options.throwOnError&&c.add(\"error\"),Object.keys(B(this,rn)).some(d=>{const u=d;return B(this,rn)[u]!==r[u]&&c.has(u)})};(t==null?void 0:t.listeners)!==!1&&i()&&(a.listeners=!0),Ot(this,ar,EI).call(this,{...a,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ot(this,ar,vw).call(this)}},bn=new WeakMap,Ut=new WeakMap,jf=new WeakMap,rn=new WeakMap,wc=new WeakMap,yu=new WeakMap,Jo=new WeakMap,di=new WeakMap,Nf=new WeakMap,bu=new WeakMap,wu=new WeakMap,jc=new WeakMap,Nc=new WeakMap,Xo=new WeakMap,ju=new WeakMap,ar=new WeakSet,Xh=function(t){Ot(this,ar,ww).call(this);let r=B(this,Ut).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(ha)),r},pw=function(){Ot(this,ar,yw).call(this);const t=Xd(this.options.staleTime,B(this,Ut));if(Ic||B(this,rn).isStale||!uw(t))return;const s=yI(B(this,rn).dataUpdatedAt,t)+1;De(this,jc,setTimeout(()=>{B(this,rn).isStale||this.updateResult()},s))},gw=function(){return(typeof this.options.refetchInterval==\"function\"?this.options.refetchInterval(B(this,Ut)):this.options.refetchInterval)??!1},xw=function(t){Ot(this,ar,bw).call(this),De(this,Xo,t),!(Ic||Fa(this.options.enabled,B(this,Ut))===!1||!uw(B(this,Xo))||B(this,Xo)===0)&&De(this,Nc,setInterval(()=>{(this.options.refetchIntervalInBackground||J1.isFocused())&&Ot(this,ar,Xh).call(this)},B(this,Xo)))},vw=function(){Ot(this,ar,pw).call(this),Ot(this,ar,xw).call(this,Ot(this,ar,gw).call(this))},yw=function(){B(this,jc)&&(clearTimeout(B(this,jc)),De(this,jc,void 0))},bw=function(){B(this,Nc)&&(clearInterval(B(this,Nc)),De(this,Nc,void 0))},ww=function(){const t=B(this,bn).getQueryCache().build(B(this,bn),this.options);if(t===B(this,Ut))return;const r=B(this,Ut);De(this,Ut,t),De(this,jf,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},EI=function(t){cs.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(B(this,rn))}),B(this,bn).getQueryCache().notify({query:B(this,Ut),type:\"observerResultsUpdated\"})})},rT);function wH(e,t){return Fa(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status===\"error\"&&t.retryOnMount===!1)}function X2(e,t){return wH(e,t)||e.state.data!==void 0&&jw(e,t,t.refetchOnMount)}function jw(e,t,r){if(Fa(t.enabled,e)!==!1){const s=typeof r==\"function\"?r(e):r;return s===\"always\"||s!==!1&&X1(e,t)}return!1}function Y2(e,t,r,s){return(e!==t||Fa(s.enabled,e)===!1)&&(!r.suspense||e.state.status!==\"error\")&&X1(e,r)}function X1(e,t){return Fa(t.enabled,e)!==!1&&e.isStaleByTime(Xd(t.staleTime,e))}function jH(e,t){return!cx(e.getCurrentResult(),t)}var Yo,Zo,wn,Ui,no,bg,Nw,sT,NH=(sT=class extends sh{constructor(r,s){super();lt(this,no);lt(this,Yo);lt(this,Zo);lt(this,wn);lt(this,Ui);De(this,Yo,r),this.setOptions(s),this.bindMethods(),Ot(this,no,bg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const s=this.options;this.options=B(this,Yo).defaultMutationOptions(r),cx(this.options,s)||B(this,Yo).getMutationCache().notify({type:\"observerOptionsUpdated\",mutation:B(this,wn),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Dc(s.mutationKey)!==Dc(this.options.mutationKey)?this.reset():((a=B(this,wn))==null?void 0:a.state.status)===\"pending\"&&B(this,wn).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=B(this,wn))==null||r.removeObserver(this)}onMutationUpdate(r){Ot(this,no,bg).call(this),Ot(this,no,Nw).call(this,r)}getCurrentResult(){return B(this,Zo)}reset(){var r;(r=B(this,wn))==null||r.removeObserver(this),De(this,wn,void 0),Ot(this,no,bg).call(this),Ot(this,no,Nw).call(this)}mutate(r,s){var a;return De(this,Ui,s),(a=B(this,wn))==null||a.removeObserver(this),De(this,wn,B(this,Yo).getMutationCache().build(B(this,Yo),this.options)),B(this,wn).addObserver(this),B(this,wn).execute(r)}},Yo=new WeakMap,Zo=new WeakMap,wn=new WeakMap,Ui=new WeakMap,no=new WeakSet,bg=function(){var s;const r=((s=B(this,wn))==null?void 0:s.state)??CI();De(this,Zo,{...r,isPending:r.status===\"pending\",isSuccess:r.status===\"success\",isError:r.status===\"error\",isIdle:r.status===\"idle\",mutate:this.mutate,reset:this.reset})},Nw=function(r){cs.batch(()=>{var s,a,i,o,l,c,d,u;if(B(this,Ui)&&this.hasListeners()){const h=B(this,Zo).variables,m=B(this,Zo).context;(r==null?void 0:r.type)===\"success\"?((a=(s=B(this,Ui)).onSuccess)==null||a.call(s,r.data,h,m),(o=(i=B(this,Ui)).onSettled)==null||o.call(i,r.data,null,h,m)):(r==null?void 0:r.type)===\"error\"&&((c=(l=B(this,Ui)).onError)==null||c.call(l,r.error,h,m),(u=(d=B(this,Ui)).onSettled)==null||u.call(d,void 0,r.error,h,m))}this.listeners.forEach(h=>{h(B(this,Zo))})})},sT),PI=f.createContext(void 0),Ev=e=>{const t=f.useContext(PI);if(!t)throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");return t},_H=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(PI.Provider,{value:e,children:t})),TI=f.createContext(!1),SH=()=>f.useContext(TI);TI.Provider;function kH(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var CH=f.createContext(kH()),EH=()=>f.useContext(CH);function AI(e,t){return typeof e==\"function\"?e(...t):!!e}function _w(){}var PH=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},TH=e=>{f.useEffect(()=>{e.clearReset()},[e])},AH=({result:e,errorResetBoundary:t,throwOnError:r,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&AI(r,[e.error,s]),RH=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime==\"number\"&&(e.gcTime=Math.max(e.gcTime,1e3)))},OH=(e,t)=>e.isLoading&&e.isFetching&&!t,IH=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Z2=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function DH(e,t,r){var u,h,m,g,v;const s=Ev(),a=SH(),i=EH(),o=s.defaultQueryOptions(e);(h=(u=s.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||h.call(u,o),o._optimisticResults=a?\"isRestoring\":\"optimistic\",RH(o),PH(o,i),TH(i);const l=!s.getQueryCache().get(o.queryHash),[c]=f.useState(()=>new t(s,o)),d=c.getOptimisticResult(o);if(f.useSyncExternalStore(f.useCallback(x=>{const w=a?_w:c.subscribe(cs.batchCalls(x));return c.updateResult(),w},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),IH(o,d))throw Z2(o,c,i);if(AH({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash)}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!Ic&&OH(d,a)){const x=l?Z2(o,c,i):(v=s.getQueryCache().get(o.queryHash))==null?void 0:v.promise;x==null||x.catch(_w).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Ct(e,t){return DH(e,bH)}function qe(e,t){const r=Ev(),[s]=f.useState(()=>new NH(r,e));f.useEffect(()=>{s.setOptions(e)},[s,e]);const a=f.useSyncExternalStore(f.useCallback(o=>s.subscribe(cs.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=f.useCallback((o,l)=>{s.mutate(o,l).catch(_w)},[s]);if(a.error&&AI(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}var Y1={},ux={},Sw=function(e,t){return Sw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},Sw(e,t)};function RI(e,t){if(typeof t!=\"function\"&&t!==null)throw new TypeError(\"Class extends value \"+String(t)+\" is not a constructor or null\");Sw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ga=function(){return ga=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ga.apply(this,arguments)};function Il(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols==\"function\")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function OI(e,t,r,s){var a=arguments.length,i=a<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,r):s,o;if(typeof Reflect==\"object\"&&typeof Reflect.decorate==\"function\")i=Reflect.decorate(e,t,r,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function II(e,t){return function(r,s){t(r,s,e)}}function DI(e,t,r,s,a,i){function o(y){if(y!==void 0&&typeof y!=\"function\")throw new TypeError(\"Function expected\");return y}for(var l=s.kind,c=l===\"getter\"?\"get\":l===\"setter\"?\"set\":\"value\",d=!t&&e?s.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,s.name):{}),h,m=!1,g=r.length-1;g>=0;g--){var v={};for(var x in s)v[x]=x===\"access\"?{}:s[x];for(var x in s.access)v.access[x]=s.access[x];v.addInitializer=function(y){if(m)throw new TypeError(\"Cannot add initializers after decoration has completed\");i.push(o(y||null))};var w=(0,r[g])(l===\"accessor\"?{get:u.get,set:u.set}:u[c],v);if(l===\"accessor\"){if(w===void 0)continue;if(w===null||typeof w!=\"object\")throw new TypeError(\"Object expected\");(h=o(w.get))&&(u.get=h),(h=o(w.set))&&(u.set=h),(h=o(w.init))&&a.unshift(h)}else(h=o(w))&&(l===\"field\"?a.unshift(h):u[c]=h)}d&&Object.defineProperty(d,s.name,u),m=!0}function MI(e,t,r){for(var s=arguments.length>2,a=0;a<t.length;a++)r=s?t[a].call(e,r):t[a].call(e);return s?r:void 0}function LI(e){return typeof e==\"symbol\"?e:\"\".concat(e)}function $I(e,t,r){return typeof t==\"symbol\"&&(t=t.description?\"[\".concat(t.description,\"]\"):\"\"),Object.defineProperty(e,\"name\",{configurable:!0,value:r?\"\".concat(r,\" \",t):t})}function FI(e,t){if(typeof Reflect==\"object\"&&typeof Reflect.metadata==\"function\")return Reflect.metadata(e,t)}function Fe(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})}function VI(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,a,i,o=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol==\"function\"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(s)throw new TypeError(\"Generator is already executing.\");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(s=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],a=0}finally{s=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Pv=Object.create?function(e,t,r,s){s===void 0&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||(\"get\"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]};function zI(e,t){for(var r in e)r!==\"default\"&&!Object.prototype.hasOwnProperty.call(t,r)&&Pv(t,e,r)}function hx(e){var t=typeof Symbol==\"function\"&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&typeof e.length==\"number\")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}function Z1(e,t){var r=typeof Symbol==\"function\"&&e[Symbol.iterator];if(!r)return e;var s=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}function BI(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Z1(arguments[t]));return e}function UI(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var s=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,a++)s[a]=i[o];return s}function eN(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}function Au(e){return this instanceof Au?(this.v=e,this):new Au(e)}function qI(e,t,r){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var s=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator==\"function\"?AsyncIterator:Object).prototype),l(\"next\"),l(\"throw\"),l(\"return\",o),a[Symbol.asyncIterator]=function(){return this},a;function o(g){return function(v){return Promise.resolve(v).then(g,h)}}function l(g,v){s[g]&&(a[g]=function(x){return new Promise(function(w,y){i.push([g,x,w,y])>1||c(g,x)})},v&&(a[g]=v(a[g])))}function c(g,v){try{d(s[g](v))}catch(x){m(i[0][3],x)}}function d(g){g.value instanceof Au?Promise.resolve(g.value.v).then(u,h):m(i[0][2],g)}function u(g){c(\"next\",g)}function h(g){c(\"throw\",g)}function m(g,v){g(v),i.shift(),i.length&&c(i[0][0],i[0][1])}}function HI(e){var t,r;return t={},s(\"next\"),s(\"throw\",function(a){throw a}),s(\"return\"),t[Symbol.iterator]=function(){return this},t;function s(a,i){t[a]=e[a]?function(o){return(r=!r)?{value:Au(e[a](o)),done:!1}:i?i(o):o}:i}}function WI(e){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof hx==\"function\"?hx(e):e[Symbol.iterator](),r={},s(\"next\"),s(\"throw\"),s(\"return\"),r[Symbol.asyncIterator]=function(){return this},r);function s(i){r[i]=e[i]&&function(o){return new Promise(function(l,c){o=e[i](o),a(l,c,o.done,o.value)})}}function a(i,o,l,c){Promise.resolve(c).then(function(d){i({value:d,done:l})},o)}}function KI(e,t){return Object.defineProperty?Object.defineProperty(e,\"raw\",{value:t}):e.raw=t,e}var MH=Object.create?function(e,t){Object.defineProperty(e,\"default\",{enumerable:!0,value:t})}:function(e,t){e.default=t},kw=function(e){return kw=Object.getOwnPropertyNames||function(t){var r=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[r.length]=s);return r},kw(e)};function GI(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=kw(e),s=0;s<r.length;s++)r[s]!==\"default\"&&Pv(t,e,r[s]);return MH(t,e),t}function QI(e){return e&&e.__esModule?e:{default:e}}function JI(e,t,r,s){if(r===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t==\"function\"?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return r===\"m\"?s:r===\"a\"?s.call(e):s?s.value:t.get(e)}function XI(e,t,r,s,a){if(s===\"m\")throw new TypeError(\"Private method is not writable\");if(s===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t==\"function\"?e!==t||!a:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return s===\"a\"?a.call(e,r):a?a.value=r:t.set(e,r),r}function YI(e,t){if(t===null||typeof t!=\"object\"&&typeof t!=\"function\")throw new TypeError(\"Cannot use 'in' operator on non-object\");return typeof e==\"function\"?t===e:e.has(t)}function ZI(e,t,r){if(t!=null){if(typeof t!=\"object\"&&typeof t!=\"function\")throw new TypeError(\"Object expected.\");var s,a;if(r){if(!Symbol.asyncDispose)throw new TypeError(\"Symbol.asyncDispose is not defined.\");s=t[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError(\"Symbol.dispose is not defined.\");s=t[Symbol.dispose],r&&(a=s)}if(typeof s!=\"function\")throw new TypeError(\"Object not disposable.\");a&&(s=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:s,async:r})}else r&&e.stack.push({async:!0});return t}var LH=typeof SuppressedError==\"function\"?SuppressedError:function(e,t,r){var s=new Error(r);return s.name=\"SuppressedError\",s.error=e,s.suppressed=t,s};function e3(e){function t(i){e.error=e.hasError?new LH(i,e.error,\"An error was suppressed during disposal.\"):i,e.hasError=!0}var r,s=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&s===1)return s=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(i).then(a,function(o){return t(o),a()})}else s|=1}catch(o){t(o)}if(s===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function t3(e,t){return typeof e==\"string\"&&/^\\.\\.?\\//.test(e)?e.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i,function(r,s,a,i,o){return s?t?\".jsx\":\".js\":a&&(!i||!o)?r:a+i+\".\"+o.toLowerCase()+\"js\"}):e}const $H={__extends:RI,__assign:ga,__rest:Il,__decorate:OI,__param:II,__esDecorate:DI,__runInitializers:MI,__propKey:LI,__setFunctionName:$I,__metadata:FI,__awaiter:Fe,__generator:VI,__createBinding:Pv,__exportStar:zI,__values:hx,__read:Z1,__spread:BI,__spreadArrays:UI,__spreadArray:eN,__await:Au,__asyncGenerator:qI,__asyncDelegator:HI,__asyncValues:WI,__makeTemplateObject:KI,__importStar:GI,__importDefault:QI,__classPrivateFieldGet:JI,__classPrivateFieldSet:XI,__classPrivateFieldIn:YI,__addDisposableResource:ZI,__disposeResources:e3,__rewriteRelativeImportExtension:t3},FH=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:ZI,get __assign(){return ga},__asyncDelegator:HI,__asyncGenerator:qI,__asyncValues:WI,__await:Au,__awaiter:Fe,__classPrivateFieldGet:JI,__classPrivateFieldIn:YI,__classPrivateFieldSet:XI,__createBinding:Pv,__decorate:OI,__disposeResources:e3,__esDecorate:DI,__exportStar:zI,__extends:RI,__generator:VI,__importDefault:QI,__importStar:GI,__makeTemplateObject:KI,__metadata:FI,__param:II,__propKey:LI,__read:Z1,__rest:Il,__rewriteRelativeImportExtension:t3,__runInitializers:MI,__setFunctionName:$I,__spread:BI,__spreadArray:eN,__spreadArrays:UI,__values:hx,default:$H},Symbol.toStringTag,{value:\"Module\"})),VH=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Tv=class extends Error{constructor(t,r=\"FunctionsError\",s){super(t),this.name=r,this.context=s}},r3=class extends Tv{constructor(t){super(\"Failed to send a request to the Edge Function\",\"FunctionsFetchError\",t)}},Cw=class extends Tv{constructor(t){super(\"Relay Error invoking the Edge Function\",\"FunctionsRelayError\",t)}},Ew=class extends Tv{constructor(t){super(\"Edge Function returned a non-2xx status code\",\"FunctionsHttpError\",t)}};var mx;(function(e){e.Any=\"any\",e.ApNortheast1=\"ap-northeast-1\",e.ApNortheast2=\"ap-northeast-2\",e.ApSouth1=\"ap-south-1\",e.ApSoutheast1=\"ap-southeast-1\",e.ApSoutheast2=\"ap-southeast-2\",e.CaCentral1=\"ca-central-1\",e.EuCentral1=\"eu-central-1\",e.EuWest1=\"eu-west-1\",e.EuWest2=\"eu-west-2\",e.EuWest3=\"eu-west-3\",e.SaEast1=\"sa-east-1\",e.UsEast1=\"us-east-1\",e.UsWest1=\"us-west-1\",e.UsWest2=\"us-west-2\"})(mx||(mx={}));class zH{constructor(t,{headers:r={},customFetch:s,region:a=mx.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=VH(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Fe(this,arguments,void 0,function*(r,s={}){var a;let i,o;try{const{headers:l,method:c,body:d,signal:u,timeout:h}=s;let m={},{region:g}=s;g||(g=this.region);const v=new URL(`${this.url}/${r}`);g&&g!==\"any\"&&(m[\"x-region\"]=g,v.searchParams.set(\"forceFunctionRegion\",g));let x;d&&(l&&!Object.prototype.hasOwnProperty.call(l,\"Content-Type\")||!l)?typeof Blob<\"u\"&&d instanceof Blob||d instanceof ArrayBuffer?(m[\"Content-Type\"]=\"application/octet-stream\",x=d):typeof d==\"string\"?(m[\"Content-Type\"]=\"text/plain\",x=d):typeof FormData<\"u\"&&d instanceof FormData?x=d:(m[\"Content-Type\"]=\"application/json\",x=JSON.stringify(d)):x=d;let w=u;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),u?(w=o.signal,u.addEventListener(\"abort\",()=>o.abort())):w=o.signal);const y=yield this.fetch(v.toString(),{method:c||\"POST\",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:x,signal:w}).catch(E=>{throw new r3(E)}),b=y.headers.get(\"x-relay-error\");if(b&&b===\"true\")throw new Cw(y);if(!y.ok)throw new Ew(y);let N=((a=y.headers.get(\"Content-Type\"))!==null&&a!==void 0?a:\"text/plain\").split(\";\")[0].trim(),_;return N===\"application/json\"?_=yield y.json():N===\"application/octet-stream\"||N===\"application/pdf\"?_=yield y.blob():N===\"text/event-stream\"?_=y:N===\"multipart/form-data\"?_=yield y.formData():_=yield y.text(),{data:_,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof Ew||l instanceof Cw?l.context:void 0}}finally{i&&clearTimeout(i)}})}}const BH=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return mx},FunctionsClient:zH,FunctionsError:Tv,FunctionsFetchError:r3,FunctionsHttpError:Ew,FunctionsRelayError:Cw},Symbol.toStringTag,{value:\"Module\"})),s3=Yu(BH);var Qs={};const nh=Yu(FH);var Rp={},Op={},Ip={},Dp={},Mp={},Lp={},ek;function n3(){if(ek)return Lp;ek=1,Object.defineProperty(Lp,\"__esModule\",{value:!0});class e extends Error{constructor(r){super(r.message),this.name=\"PostgrestError\",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Lp.default=e,Lp}var tk;function a3(){if(tk)return Mp;tk=1,Object.defineProperty(Mp,\"__esModule\",{value:!0});const t=nh.__importDefault(n3());let r=class{constructor(a){var i,o;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(o=a.isMaybeSingle)!==null&&o!==void 0?o:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||([\"GET\",\"HEAD\"].includes(this.method)?this.headers.set(\"Accept-Profile\",this.schema):this.headers.set(\"Content-Profile\",this.schema)),this.method!==\"GET\"&&this.method!==\"HEAD\"&&this.headers.set(\"Content-Type\",\"application/json\");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,u,h,m;let g=null,v=null,x=null,w=c.status,y=c.statusText;if(c.ok){if(this.method!==\"HEAD\"){const E=await c.text();E===\"\"||(this.headers.get(\"Accept\")===\"text/csv\"||this.headers.get(\"Accept\")&&(!((d=this.headers.get(\"Accept\"))===null||d===void 0)&&d.includes(\"application/vnd.pgrst.plan+text\"))?v=E:v=JSON.parse(E))}const N=(u=this.headers.get(\"Prefer\"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),_=(h=c.headers.get(\"content-range\"))===null||h===void 0?void 0:h.split(\"/\");N&&_&&_.length>1&&(x=parseInt(_[1])),this.isMaybeSingle&&this.method===\"GET\"&&Array.isArray(v)&&(v.length>1?(g={code:\"PGRST116\",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:\"JSON object requested, multiple (or no) rows returned\"},v=null,x=null,w=406,y=\"Not Acceptable\"):v.length===1?v=v[0]:v=null)}else{const N=await c.text();try{g=JSON.parse(N),Array.isArray(g)&&c.status===404&&(v=[],g=null,w=200,y=\"OK\")}catch{c.status===404&&N===\"\"?(w=204,y=\"No Content\"):g={message:N}}if(g&&this.isMaybeSingle&&(!((m=g==null?void 0:g.details)===null||m===void 0)&&m.includes(\"0 rows\"))&&(g=null,w=200,y=\"OK\"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:v,count:x,status:w,statusText:y}});return this.shouldThrowOnError||(l=l.catch(c=>{var d,u,h,m,g,v;let x=\"\";const w=c==null?void 0:c.cause;if(w){const y=(d=w==null?void 0:w.message)!==null&&d!==void 0?d:\"\",b=(u=w==null?void 0:w.code)!==null&&u!==void 0?u:\"\";x=`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:\"FetchError\"}: ${c==null?void 0:c.message}`,x+=`\n\nCaused by: ${(m=w==null?void 0:w.name)!==null&&m!==void 0?m:\"Error\"}: ${y}`,b&&(x+=` (${b})`),w!=null&&w.stack&&(x+=`\n${w.stack}`)}else x=(g=c==null?void 0:c.stack)!==null&&g!==void 0?g:\"\";return{error:{message:`${(v=c==null?void 0:c.name)!==null&&v!==void 0?v:\"FetchError\"}: ${c==null?void 0:c.message}`,details:x,hint:\"\",code:\"\"},data:null,count:null,status:0,statusText:\"\"}})),l.then(a,i)}returns(){return this}overrideTypes(){return this}};return Mp.default=r,Mp}var rk;function i3(){if(rk)return Dp;rk=1,Object.defineProperty(Dp,\"__esModule\",{value:!0});const t=nh.__importDefault(a3());let r=class extends t.default{select(a){let i=!1;const o=(a??\"*\").split(\"\").map(l=>/\\s/.test(l)&&!i?\"\":(l==='\"'&&(i=!i),l)).join(\"\");return this.url.searchParams.set(\"select\",o),this.headers.append(\"Prefer\",\"return=representation\"),this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:\"order\",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:\"\"}${a}.${i?\"asc\":\"desc\"}${o===void 0?\"\":o?\".nullsfirst\":\".nullslast\"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>\"u\"?\"limit\":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>\"u\"?\"offset\":`${l}.offset`,d=typeof l>\"u\"?\"limit\":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(d,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set(\"Accept\",\"application/vnd.pgrst.object+json\"),this}maybeSingle(){return this.method===\"GET\"?this.headers.set(\"Accept\",\"application/json\"):this.headers.set(\"Accept\",\"application/vnd.pgrst.object+json\"),this.isMaybeSingle=!0,this}csv(){return this.headers.set(\"Accept\",\"text/csv\"),this}geojson(){return this.headers.set(\"Accept\",\"application/geo+json\"),this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:d=\"text\"}={}){var u;const h=[a?\"analyze\":null,i?\"verbose\":null,o?\"settings\":null,l?\"buffers\":null,c?\"wal\":null].filter(Boolean).join(\"|\"),m=(u=this.headers.get(\"Accept\"))!==null&&u!==void 0?u:\"application/json\";return this.headers.set(\"Accept\",`application/vnd.pgrst.plan+${d}; for=\"${m}\"; options=${h};`),d===\"json\"?this:this}rollback(){return this.headers.append(\"Prefer\",\"tx=rollback\"),this}returns(){return this}maxAffected(a){return this.headers.append(\"Prefer\",\"handling=strict\"),this.headers.append(\"Prefer\",`max-affected=${a}`),this}};return Dp.default=r,Dp}var sk;function tN(){if(sk)return Ip;sk=1,Object.defineProperty(Ip,\"__esModule\",{value:!0});const t=nh.__importDefault(i3()),r=new RegExp(\"[,()]\");let s=class extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(\",\")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(\",\")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(\",\")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(\",\")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(c=>typeof c==\"string\"&&r.test(c)?`\"${c}\"`:`${c}`).join(\",\");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o==\"string\"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(\",\")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o==\"string\"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(\",\")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o==\"string\"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(\",\")}}`),this}textSearch(i,o,{config:l,type:c}={}){let d=\"\";c===\"plain\"?d=\"pl\":c===\"phrase\"?d=\"ph\":c===\"websearch\"&&(d=\"w\");const u=l===void 0?\"\":`(${l})`;return this.url.searchParams.append(i,`${d}fts${u}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:\"or\";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}};return Ip.default=s,Ip}var nk;function o3(){if(nk)return Op;nk=1,Object.defineProperty(Op,\"__esModule\",{value:!0});const t=nh.__importDefault(tN());let r=class{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(a,i){const{head:o=!1,count:l}=i??{},c=o?\"HEAD\":\"GET\";let d=!1;const u=(a??\"*\").split(\"\").map(h=>/\\s/.test(h)&&!d?\"\":(h==='\"'&&(d=!d),h)).join(\"\");return this.url.searchParams.set(\"select\",u),l&&this.headers.append(\"Prefer\",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:o=!0}={}){var l;const c=\"POST\";if(i&&this.headers.append(\"Prefer\",`count=${i}`),o||this.headers.append(\"Prefer\",\"missing=default\"),Array.isArray(a)){const d=a.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(d.length>0){const u=[...new Set(d)].map(h=>`\"${h}\"`);this.url.searchParams.set(\"columns\",u.join(\",\"))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var d;const u=\"POST\";if(this.headers.append(\"Prefer\",`resolution=${o?\"ignore\":\"merge\"}-duplicates`),i!==void 0&&this.url.searchParams.set(\"on_conflict\",i),l&&this.headers.append(\"Prefer\",`count=${l}`),c||this.headers.append(\"Prefer\",\"missing=default\"),Array.isArray(a)){const h=a.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(h.length>0){const m=[...new Set(h)].map(g=>`\"${g}\"`);this.url.searchParams.set(\"columns\",m.join(\",\"))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(a,{count:i}={}){var o;const l=\"PATCH\";return i&&this.headers.append(\"Prefer\",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:a}={}){var i;const o=\"DELETE\";return a&&this.headers.append(\"Prefer\",`count=${a}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};return Op.default=r,Op}var ak;function UH(){if(ak)return Rp;ak=1,Object.defineProperty(Rp,\"__esModule\",{value:!0});const e=nh,t=e.__importDefault(o3()),r=e.__importDefault(tN());let s=class l3{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){if(!i||typeof i!=\"string\"||i.trim()===\"\")throw new Error(\"Invalid relation name: relation must be a non-empty string.\");const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new l3(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:d}={}){var u;let h;const m=new URL(`${this.url}/rpc/${i}`);let g;l||c?(h=l?\"HEAD\":\"GET\",Object.entries(o).filter(([x,w])=>w!==void 0).map(([x,w])=>[x,Array.isArray(w)?`{${w.join(\",\")}}`:`${w}`]).forEach(([x,w])=>{m.searchParams.append(x,w)})):(h=\"POST\",g=o);const v=new Headers(this.headers);return d&&v.set(\"Prefer\",`count=${d}`),new r.default({method:h,url:m,headers:v,schema:this.schemaName,body:g,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};return Rp.default=s,Rp}Object.defineProperty(Qs,\"__esModule\",{value:!0});Qs.PostgrestError=Qs.PostgrestBuilder=Qs.PostgrestTransformBuilder=Qs.PostgrestFilterBuilder=Qs.PostgrestQueryBuilder=Qs.PostgrestClient=void 0;const ah=nh,c3=ah.__importDefault(UH());Qs.PostgrestClient=c3.default;const d3=ah.__importDefault(o3());Qs.PostgrestQueryBuilder=d3.default;const u3=ah.__importDefault(tN());Qs.PostgrestFilterBuilder=u3.default;const h3=ah.__importDefault(i3());Qs.PostgrestTransformBuilder=h3.default;const m3=ah.__importDefault(a3());Qs.PostgrestBuilder=m3.default;const f3=ah.__importDefault(n3());Qs.PostgrestError=f3.default;Qs.default={PostgrestClient:c3.default,PostgrestQueryBuilder:d3.default,PostgrestFilterBuilder:u3.default,PostgrestTransformBuilder:h3.default,PostgrestBuilder:m3.default,PostgrestError:f3.default};class p3{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<\"u\")return{type:\"native\",constructor:WebSocket};if(typeof globalThis<\"u\"&&typeof globalThis.WebSocket<\"u\")return{type:\"native\",constructor:globalThis.WebSocket};if(typeof global<\"u\"&&typeof global.WebSocket<\"u\")return{type:\"native\",constructor:global.WebSocket};if(typeof globalThis<\"u\"&&typeof globalThis.WebSocketPair<\"u\"&&typeof globalThis.WebSocket>\"u\")return{type:\"cloudflare\",error:\"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.\",workaround:\"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.\"};if(typeof globalThis<\"u\"&&globalThis.EdgeRuntime||typeof navigator<\"u\"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes(\"Vercel-Edge\")))return{type:\"unsupported\",error:\"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.\",workaround:\"Use serverless functions or a different deployment target for WebSocket functionality.\"};if(typeof process<\"u\"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,\"\").split(\".\")[0]);return a>=22?typeof globalThis.WebSocket<\"u\"?{type:\"native\",constructor:globalThis.WebSocket}:{type:\"unsupported\",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:\"Provide a WebSocket implementation via the transport option.\"}:{type:\"unsupported\",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install \"ws\" package and provide it via the transport option:\nimport ws from \"ws\"\nnew RealtimeClient(url, { transport: ws })`}}}return{type:\"unsupported\",error:\"Unknown JavaScript runtime without WebSocket support.\",workaround:\"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||\"WebSocket not supported in this environment.\";throw t.workaround&&(r+=`\n\nSuggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type===\"native\"||t.type===\"ws\"}catch{return!1}}}const qH=\"2.87.1\",HH=`realtime-js/${qH}`,g3=\"1.0.0\",WH=\"2.0.0\",ik=g3,Pw=1e4,KH=1e3,GH=100;var ic;(function(e){e[e.connecting=0]=\"connecting\",e[e.open=1]=\"open\",e[e.closing=2]=\"closing\",e[e.closed=3]=\"closed\"})(ic||(ic={}));var Gr;(function(e){e.closed=\"closed\",e.errored=\"errored\",e.joined=\"joined\",e.joining=\"joining\",e.leaving=\"leaving\"})(Gr||(Gr={}));var La;(function(e){e.close=\"phx_close\",e.error=\"phx_error\",e.join=\"phx_join\",e.reply=\"phx_reply\",e.leave=\"phx_leave\",e.access_token=\"access_token\"})(La||(La={}));var Tw;(function(e){e.websocket=\"websocket\"})(Tw||(Tw={}));var oc;(function(e){e.Connecting=\"connecting\",e.Open=\"open\",e.Closing=\"closing\",e.Closed=\"closed\"})(oc||(oc={}));class QH{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT=\"broadcast\",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event==\"string\")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s;const a=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,s;const a=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,s){var a,i;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:\"\",c=(i=t.join_ref)!==null&&i!==void 0?i:\"\",d=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?\"\":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+d.length+h.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(g),x=0;v.setUint8(x++,this.KINDS.userBroadcastPush),v.setUint8(x++,c.length),v.setUint8(x++,l.length),v.setUint8(x++,o.length),v.setUint8(x++,d.length),v.setUint8(x++,h.length),v.setUint8(x++,r),Array.from(c,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(l,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(o,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(d,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(h,y=>v.setUint8(x++,y.charCodeAt(0)));var w=new Uint8Array(g.byteLength+s.byteLength);return w.set(new Uint8Array(g),0),w.set(new Uint8Array(s),g.byteLength),w.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t==\"string\"){const s=JSON.parse(t),[a,i,o,l,c]=s;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,s){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const d=s.decode(t.slice(c,c+a));c=c+a;const u=s.decode(t.slice(c,c+i));c=c+i;const h=s.decode(t.slice(c,c+o));c=c+o;const m=t.slice(c,t.byteLength),g=l===this.JSON_ENCODING?JSON.parse(s.decode(m)):m,v={type:this.BROADCAST_EVENT,event:u,payload:g};return o>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)===\"ArrayBuffer\"}_pick(t,r){return!t||typeof t!=\"object\"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>r.includes(s)))}}class x3{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mr;(function(e){e.abstime=\"abstime\",e.bool=\"bool\",e.date=\"date\",e.daterange=\"daterange\",e.float4=\"float4\",e.float8=\"float8\",e.int2=\"int2\",e.int4=\"int4\",e.int4range=\"int4range\",e.int8=\"int8\",e.int8range=\"int8range\",e.json=\"json\",e.jsonb=\"jsonb\",e.money=\"money\",e.numeric=\"numeric\",e.oid=\"oid\",e.reltime=\"reltime\",e.text=\"text\",e.time=\"time\",e.timestamp=\"timestamp\",e.timestamptz=\"timestamptz\",e.timetz=\"timetz\",e.tsrange=\"tsrange\",e.tstzrange=\"tstzrange\"})(mr||(mr={}));const ok=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=JH(o,e,t,a),i),{}):{}},JH=(e,t,r,s)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!s.includes(i)?v3(i,o):Aw(o)},v3=(e,t)=>{if(e.charAt(0)===\"_\"){const r=e.slice(1,e.length);return eW(t,r)}switch(e){case mr.bool:return XH(t);case mr.float4:case mr.float8:case mr.int2:case mr.int4:case mr.int8:case mr.numeric:case mr.oid:return YH(t);case mr.json:case mr.jsonb:return ZH(t);case mr.timestamp:return tW(t);case mr.abstime:case mr.date:case mr.daterange:case mr.int4range:case mr.int8range:case mr.money:case mr.reltime:case mr.text:case mr.time:case mr.timestamptz:case mr.timetz:case mr.tsrange:case mr.tstzrange:return Aw(t);default:return Aw(t)}},Aw=e=>e,XH=e=>{switch(e){case\"t\":return!0;case\"f\":return!1;default:return e}},YH=e=>{if(typeof e==\"string\"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ZH=e=>{if(typeof e==\"string\")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},eW=(e,t)=>{if(typeof e!=\"string\")return e;const r=e.length-1,s=e[r];if(e[0]===\"{\"&&s===\"}\"){let i;const o=e.slice(1,r);try{i=JSON.parse(\"[\"+o+\"]\")}catch{i=o?o.split(\",\"):[]}return i.map(l=>v3(t,l))}return e},tW=e=>typeof e==\"string\"?e.replace(\" \",\"T\"):e,y3=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,\"http\"),t.pathname=t.pathname.replace(/\\/+$/,\"\").replace(/\\/socket\\/websocket$/i,\"\").replace(/\\/socket$/i,\"\").replace(/\\/websocket$/i,\"\"),t.pathname===\"\"||t.pathname===\"/\"?t.pathname=\"/api/broadcast\":t.pathname=t.pathname+\"/api/broadcast\",t.href};class hb{constructor(t,r,s={},a=Pw){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref=\"\",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref=\"\",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived(\"timeout\")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger(\"timeout\",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Rw;(function(e){e.SYNC=\"sync\",e.JOIN=\"join\",e.LEAVE=\"leave\"})(Rw||(Rw={}));let b3=class wg{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:\"presence_state\",diff:\"presence_diff\"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wg.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=wg.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=wg.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger(\"presence\",{event:\"join\",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger(\"presence\",{event:\"leave\",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger(\"presence\",{event:\"sync\"})})}static syncState(t,r,s,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const m=u.map(w=>w.presence_ref),g=h.map(w=>w.presence_ref),v=u.filter(w=>g.indexOf(w.presence_ref)<0),x=h.filter(w=>m.indexOf(w.presence_ref)<0);v.length>0&&(l[d]=v),x.length>0&&(c[d]=x)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(t,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(g=>g.presence_ref),m=u.filter(g=>h.indexOf(g.presence_ref)<0);t[l].unshift(...m)}s(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return\"metas\"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Ow;(function(e){e.ALL=\"*\",e.INSERT=\"INSERT\",e.UPDATE=\"UPDATE\",e.DELETE=\"DELETE\"})(Ow||(Ow={}));var Yd;(function(e){e.BROADCAST=\"broadcast\",e.PRESENCE=\"presence\",e.POSTGRES_CHANGES=\"postgres_changes\",e.SYSTEM=\"system\"})(Yd||(Yd={}));var ii;(function(e){e.SUBSCRIBED=\"SUBSCRIBED\",e.TIMED_OUT=\"TIMED_OUT\",e.CLOSED=\"CLOSED\",e.CHANNEL_ERROR=\"CHANNEL_ERROR\"})(ii||(ii={}));const rW=Gr;let w3=class Yh{constructor(t,r={config:{}},s){var a,i;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Gr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,\"\"),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:\"\",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new hb(this,La.join,this.params,this.timeout),this.rejoinTimer=new x3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive(\"ok\",()=>{this.state=Gr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log(\"channel\",`close ${this.topic} ${this._joinRef()}`),this.state=Gr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log(\"channel\",`error ${this.topic}`,o),this.state=Gr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive(\"timeout\",()=>{this._isJoining()&&(this.socket.log(\"channel\",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive(\"error\",o=>{this._isLeaving()||this._isClosed()||(this.socket.log(\"channel\",`error ${this.topic}`,o),this.state=Gr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(La.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new b3(this),this.broadcastEndpointURL=y3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Gr.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(g=>g.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Yd.PRESENCE]&&this.bindings[Yd.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(ii.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(ii.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive(\"ok\",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){t==null||t(ii.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,w=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,y=[];for(let b=0;b<w;b++){const N=x[b],{filter:{event:_,schema:E,table:k,filter:P}}=N,C=g&&g[b];if(C&&C.event===_&&Yh.isFilterValueEqual(C.schema,E)&&Yh.isFilterValueEqual(C.table,k)&&Yh.isFilterValueEqual(C.filter,P))y.push(Object.assign(Object.assign({},N),{id:C.id}));else{this.unsubscribe(),this.state=Gr.errored,t==null||t(ii.CHANNEL_ERROR,new Error(\"mismatch between server and client bindings for postgres changes\"));return}}this.bindings.postgres_changes=y,t&&t(ii.SUBSCRIBED);return}}).receive(\"error\",g=>{this.state=Gr.errored,t==null||t(ii.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(\", \")||\"error\")))}).receive(\"timeout\",()=>{t==null||t(ii.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:\"presence\",event:\"track\",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:\"presence\",event:\"untrack\"},t)}on(t,r,s){return this.state===Gr.joined&&t===Yd.PRESENCE&&(this.socket.log(\"channel\",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:\"\";if(r==null)return Promise.reject(\"Payload is required for httpSend()\");const o={method:\"POST\",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:\"\",\"Content-Type\":\"application/json\"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var s,a;if(!this._canPush()&&t.type===\"broadcast\"){console.warn(\"Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.\");const{event:i,payload:o}=t,c={method:\"POST\",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:\"\",apikey:this.socket.apiKey?this.socket.apiKey:\"\",\"Content-Type\":\"application/json\"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?\"ok\":\"error\"}catch(d){return d.name===\"AbortError\"?\"timed out\":\"error\"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type===\"broadcast\"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i(\"ok\"),d.receive(\"ok\",()=>i(\"ok\")),d.receive(\"error\",()=>i(\"error\")),d.receive(\"timeout\",()=>i(\"timed out\"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Gr.leaving;const r=()=>{this.socket.log(\"channel\",`leave ${this.topic}`),this._trigger(La.close,\"leave\",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new hb(this,La.leave,{},t),s.receive(\"ok\",()=>{r(),a(\"ok\")}).receive(\"timeout\",()=>{r(),a(\"timed out\")}).receive(\"error\",()=>{a(\"error\")}),s.send(),this._canPush()||s.trigger(\"ok\",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Gr.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new hb(this,t,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>GH){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log(\"channel\",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=La;if(s&&[l,c,d,u].indexOf(o)>=0&&s!==this._joinRef())return;let m=this._onMessage(o,r,s);if(r&&!m)throw\"channel onMessage callbacks must return the payload, modified or unmodified\";[\"insert\",\"update\",\"delete\"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var v,x,w;return((v=g.filter)===null||v===void 0?void 0:v.event)===\"*\"||((w=(x=g.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(g=>g.callback(m,s)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var v,x,w,y,b,N;if([\"broadcast\",\"presence\",\"postgres_changes\"].includes(o))if(\"id\"in g){const _=g.id,E=(v=g.filter)===null||v===void 0?void 0:v.event;return _&&((x=r.ids)===null||x===void 0?void 0:x.includes(_))&&(E===\"*\"||(E==null?void 0:E.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(b=(y=g==null?void 0:g.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _===\"*\"||_===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m==\"object\"&&\"ids\"in m){const v=m.data,{schema:x,table:w,commit_timestamp:y,type:b,errors:N}=v;m=Object.assign(Object.assign({},{schema:x,table:w,commit_timestamp:y,eventType:b,new:{},old:{},errors:N}),this._getPayloadRecords(v))}g.callback(m,s)})}_isClosed(){return this.state===Gr.closed}_isJoined(){return this.state===Gr.joined}_isJoining(){return this.state===Gr.joining}_isLeaving(){return this.state===Gr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Yh.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(La.close,{},t)}_onError(t){this._on(La.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type===\"INSERT\"||t.type===\"UPDATE\")&&(r.new=ok(t.columns,t.record)),(t.type===\"UPDATE\"||t.type===\"DELETE\")&&(r.old=ok(t.columns,t.old_record)),r}};const mb=()=>{},$p={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sW=[1e3,2e3,5e3,1e4],nW=1e4,aW=`\n  addEventListener(\"message\", (e) => {\n    if (e.data.event === \"start\") {\n      setInterval(() => postMessage({ event: \"keepAlive\" }), e.data.interval);\n    }\n  });`;let iW=class{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint=\"\",this.httpEndpoint=\"\",this.headers={},this.params={},this.timeout=Pw,this.transport=null,this.heartbeatIntervalMs=$p.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=mb,this.ref=0,this.reconnectTimer=null,this.vsn=ik,this.logger=mb,this.conn=null,this.sendBuffer=[],this.serializer=new QH,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState=\"disconnected\",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error(\"API key is required to connect to Realtime\");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Tw.websocket}`,this.httpEndpoint=y3(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState(\"connecting\"),this.accessToken&&!this._authPromise&&this._setAuthSafely(\"connect\"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=p3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState(\"disconnected\");const r=t.message;throw r.includes(\"Node.js\")?new Error(`${r}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the \"ws\" package:\n\n  npm install ws\n\n  import ws from \"ws\"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState(\"disconnecting\",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState(\"disconnected\")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState(\"disconnected\")},typeof this.conn.close==\"function\"&&(t?this.conn.close(t,r??\"\"):this.conn.close()),this._teardownConnection()}else this._setConnectionState(\"disconnected\")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ic.connecting:return oc.Connecting;case ic.open:return oc.Open;case ic.closing:return oc.Closing;default:return oc.Closed}}isConnected(){return this.connectionState()===oc.Open}isConnecting(){return this._connectionState===\"connecting\"}isDisconnecting(){return this._connectionState===\"disconnecting\"}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new w3(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log(\"push\",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback(\"disconnected\")}catch(r){this.log(\"error\",\"error in heartbeat callback\",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log(\"transport\",\"heartbeat timeout. Attempting to re-establish connection\");try{this.heartbeatCallback(\"timeout\")}catch(r){this.log(\"error\",\"error in heartbeat callback\",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(KH,\"heartbeat timeout\"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},$p.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:\"phoenix\",event:\"heartbeat\",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback(\"sent\")}catch(r){this.log(\"error\",\"error in heartbeat callback\",r)}this._setAuthSafely(\"heartbeat\")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log(\"transport\",`leaving duplicate topic \"${t}\"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic===\"phoenix\"&&r.event===\"phx_reply\")try{this.heartbeatCallback(r.payload.status===\"ok\"?\"ok\":\"error\")}catch(d){this.log(\"error\",\"error in heartbeat callback\",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:i,ref:o}=r,l=o?`(${o})`:\"\",c=i.status||\"\";this.log(\"receive\",`${c} ${s} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(s)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks(\"message\",r)})}_clearTimer(t){var r;t===\"heartbeat\"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t===\"reconnect\"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer(\"heartbeat\"),this._clearTimer(\"reconnect\")}_setupConnectionHandlers(){this.conn&&(\"binaryType\"in this.conn&&(this.conn.binaryType=\"arraybuffer\"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ic.open||this.conn.readyState===ic.connecting)try{this.conn.close()}catch(t){this.log(\"error\",\"Error closing connection\",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState(\"connected\"),this.log(\"transport\",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log(\"error\",\"error waiting for auth on connect\",r),this.flushSendBuffer()}),this._clearTimer(\"reconnect\"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks(\"open\")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log(\"worker\",`starting worker for from ${this.workerUrl}`):this.log(\"worker\",\"starting default worker\");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log(\"worker\",\"worker error\",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event===\"keepAlive\"&&this.sendHeartbeat()},this.workerRef.postMessage({event:\"start\",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState(\"disconnected\"),this.log(\"transport\",\"close\",t),this._triggerChanError(),this._clearTimer(\"heartbeat\"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks(\"close\",t)}_onConnError(t){this._setConnectionState(\"disconnected\"),this.log(\"transport\",`${t}`),this._triggerChanError(),this._triggerStateCallbacks(\"error\",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(La.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\\?/)?\"&\":\"?\",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([aW],{type:\"application/javascript\"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t===\"connecting\"?this._wasManualDisconnect=!1:t===\"disconnecting\"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,s=!1;if(t)r=t,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log(\"error\",\"Error fetching access token from callback\",a),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:HH};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(La.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t=\"general\"){this._isManualToken()||this.setAuth().catch(r=>{this.log(\"error\",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(a){this.log(\"error\",`error in ${t} callback`,a)}})}catch(s){this.log(\"error\",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new x3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$p.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,a,i,o,l,c,d,u,h,m,g;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:Pw,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:$p.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:mb,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:ik,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:v=>sW[v-1]||nW,this.vsn){case g3:this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(v,x)=>x(JSON.stringify(v)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(v,x)=>x(JSON.parse(v));break;case WH:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<\"u\"&&!window.Worker)throw new Error(\"Web Worker is not supported\");this.workerUrl=t==null?void 0:t.workerUrl}}};const oW=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:rW,get REALTIME_LISTEN_TYPES(){return Yd},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Ow},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Rw},get REALTIME_SUBSCRIBE_STATES(){return ii},RealtimeChannel:w3,RealtimeClient:iW,RealtimePresence:b3,WebSocketFactory:p3},Symbol.toStringTag,{value:\"Module\"})),j3=Yu(oW);class Pf extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name=\"StorageError\"}}function Nr(e){return typeof e==\"object\"&&e!==null&&\"__isStorageError\"in e}class N3 extends Pf{constructor(t,r,s){super(t),this.name=\"StorageApiError\",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fx extends Pf{constructor(t,r){super(t),this.name=\"StorageUnknownError\",this.originalError=r}}const rN=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),lW=()=>Response,Iw=e=>{if(Array.isArray(e))return e.map(r=>Iw(r));if(typeof e==\"function\"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,\"\"));t[a]=Iw(s)}),t},cW=e=>{if(typeof e!=\"object\"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},dW=e=>!e||typeof e!=\"string\"||e.length===0||e.length>100||e.trim()!==e||e.includes(\"/\")||e.includes(\"\\\\\")?!1:/^[\\w!.\\*'() &$@=;:+,?-]+$/.test(e),fb=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error==\"string\"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},uW=(e,t,r)=>Fe(void 0,void 0,void 0,function*(){const s=yield lW();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+\"\";t(new N3(fb(a),i,o))}).catch(a=>{t(new fx(fb(a),a))}):t(new fx(fb(e),e))}),hW=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e===\"GET\"||!s?a:(cW(s)?(a.headers=Object.assign({\"Content-Type\":\"application/json\"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Tf(e,t,r,s,a,i){return Fe(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,hW(t,s,a,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>uW(c,l,s))})})}function Bm(e,t,r,s){return Fe(this,void 0,void 0,function*(){return Tf(e,\"GET\",t,r,s)})}function Ia(e,t,r,s,a){return Fe(this,void 0,void 0,function*(){return Tf(e,\"POST\",t,s,a,r)})}function Dw(e,t,r,s,a){return Fe(this,void 0,void 0,function*(){return Tf(e,\"PUT\",t,s,a,r)})}function mW(e,t,r,s){return Fe(this,void 0,void 0,function*(){return Tf(e,\"HEAD\",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function sN(e,t,r,s,a){return Fe(this,void 0,void 0,function*(){return Tf(e,\"DELETE\",t,s,a,r)})}class fW{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nr(t))return{data:null,error:t};throw t}})}}var _3;class pW{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[_3]=\"BlobDownloadBuilder\",this.promise=null}asStream(){return new fW(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nr(t))return{data:null,error:t};throw t}})}}_3=Symbol.toStringTag;const gW={limit:100,offset:0,sortBy:{column:\"name\",order:\"asc\"}},lk={cacheControl:\"3600\",contentType:\"text/plain;charset=UTF-8\",upsert:!1};class xW{constructor(t,r={},s,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=rN(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,s,a){return Fe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},lk),a);let l=Object.assign(Object.assign({},this.headers),t===\"POST\"&&{\"x-upsert\":String(o.upsert)});const c=o.metadata;typeof Blob<\"u\"&&s instanceof Blob?(i=new FormData,i.append(\"cacheControl\",o.cacheControl),c&&i.append(\"metadata\",this.encodeMetadata(c)),i.append(\"\",s)):typeof FormData<\"u\"&&s instanceof FormData?(i=s,i.has(\"cacheControl\")||i.append(\"cacheControl\",o.cacheControl),c&&!i.has(\"metadata\")&&i.append(\"metadata\",this.encodeMetadata(c))):(i=s,l[\"cache-control\"]=`max-age=${o.cacheControl}`,l[\"content-type\"]=o.contentType,c&&(l[\"x-metadata\"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<\"u\"&&i instanceof ReadableStream||i&&typeof i==\"object\"&&\"pipe\"in i&&typeof i.pipe==\"function\")&&!o.duplex&&(o.duplex=\"half\")),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield(t==\"PUT\"?Dw:Ia)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nr(i))return{data:null,error:i};throw i}})}upload(t,r,s){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate(\"POST\",t,r,s)})}uploadToSignedUrl(t,r,s,a){return Fe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set(\"token\",r);try{let c;const d=Object.assign({upsert:lk.upsert},a),u=Object.assign(Object.assign({},this.headers),{\"x-upsert\":String(d.upsert)});typeof Blob<\"u\"&&s instanceof Blob?(c=new FormData,c.append(\"cacheControl\",d.cacheControl),c.append(\"\",s)):typeof FormData<\"u\"&&s instanceof FormData?(c=s,c.append(\"cacheControl\",d.cacheControl)):(c=s,u[\"cache-control\"]=`max-age=${d.cacheControl}`,u[\"content-type\"]=d.contentType);const h=yield Dw(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Nr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Fe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a[\"x-upsert\"]=\"true\");const i=yield Ia(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get(\"token\");if(!l)throw new Pf(\"No token returned by API\");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}update(t,r,s){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate(\"PUT\",t,r,s)})}move(t,r,s){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}copy(t,r,s){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield Ia(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,s){return Fe(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Ia(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?\"\":s.download}`:\"\";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,s){return Fe(this,void 0,void 0,function*(){try{const a=yield Ia(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?\"\":s.download}`:\"\";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<\"u\"?\"render/image/authenticated\":\"object\",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:\"\",l=this._getFinalPath(t),c=()=>Bm(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new pW(c,this.shouldThrowOnError)}info(t){return Fe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield Bm(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Iw(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}exists(t){return Fe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield mW(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s)&&s instanceof fx){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?\"\":r.download}`:\"\";i!==\"\"&&a.push(i);const l=typeof(r==null?void 0:r.transform)<\"u\"?\"render/image\":\"object\",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==\"\"&&a.push(c);let d=a.join(\"&\");return d!==\"\"&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield sN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}list(t,r,s){return Fe(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},gW),r),{prefix:t||\"\"});return{data:yield Ia(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}listV2(t,r){return Fe(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield Ia(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<\"u\"?Buffer.from(t).toString(\"base64\"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\\/+/,\"\")}`}_removeEmptyFolders(t){return t.replace(/^\\/|\\/$/g,\"\").replace(/\\/+/g,\"/\")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join(\"&\")}}const S3=\"2.87.1\",k3={\"X-Client-Info\":`storage-js/${S3}`};class vW{constructor(t,r={},s,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes(\"storage.supabase.\")&&(i.hostname=i.hostname.replace(\"supabase.\",\"storage.supabase.\")),this.url=i.href.replace(/\\/$/,\"\"),this.headers=Object.assign(Object.assign({},k3),r),this.fetch=rN(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Fe(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Bm(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}getBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Bm(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}createBucket(t){return Fe(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield Ia(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Fe(this,void 0,void 0,function*(){try{return{data:yield Dw(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield sN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&(\"limit\"in t&&(r.limit=String(t.limit)),\"offset\"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?\"?\"+new URLSearchParams(r).toString():\"\"}}var Um=class extends Error{constructor(e,t){var r;super(e),this.name=\"IcebergError\",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType===\"CommitStateUnknownException\"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes(\"CommitState\"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function yW(e,t,r){const s=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&s.searchParams.set(a,i);return s.toString()}async function bW(e){return!e||e.type===\"none\"?{}:e.type===\"bearer\"?{Authorization:`Bearer ${e.token}`}:e.type===\"header\"?{[e.name]:e.value}:e.type===\"custom\"?await e.getHeaders():{}}function wW(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:a,body:i,headers:o}){const l=yW(e.baseUrl,s,a),c=await bW(e.auth),d=await t(l,{method:r,headers:{...i?{\"Content-Type\":\"application/json\"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),u=await d.text(),h=(d.headers.get(\"content-type\")||\"\").includes(\"application/json\"),m=h&&u?JSON.parse(u):u;if(!d.ok){const g=h?m:void 0,v=g==null?void 0:g.error;throw new Um((v==null?void 0:v.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:g})}return{status:d.status,headers:d.headers,data:m}}}}function Fp(e){return e.join(\"\u001f\")}var jW=class{constructor(e,t=\"\"){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Fp(e.namespace)}:void 0;return(await this.client.request({method:\"GET\",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:\"POST\",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:\"DELETE\",path:`${this.prefix}/namespaces/${Fp(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:\"GET\",path:`${this.prefix}/namespaces/${Fp(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:\"HEAD\",path:`${this.prefix}/namespaces/${Fp(e.namespace)}`}),!0}catch(t){if(t instanceof Um&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Um&&r.status===409)return;throw r}}};function ud(e){return e.join(\"\u001f\")}var NW=class{constructor(e,t=\"\",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:\"GET\",path:`${this.prefix}/namespaces/${ud(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r[\"X-Iceberg-Access-Delegation\"]=this.accessDelegation),(await this.client.request({method:\"POST\",path:`${this.prefix}/namespaces/${ud(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:\"POST\",path:`${this.prefix}/namespaces/${ud(e.namespace)}/tables/${e.name}`,body:t});return{\"metadata-location\":r.data[\"metadata-location\"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:\"DELETE\",path:`${this.prefix}/namespaces/${ud(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t[\"X-Iceberg-Access-Delegation\"]=this.accessDelegation),(await this.client.request({method:\"GET\",path:`${this.prefix}/namespaces/${ud(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t[\"X-Iceberg-Access-Delegation\"]=this.accessDelegation);try{return await this.client.request({method:\"HEAD\",path:`${this.prefix}/namespaces/${ud(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Um&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Um&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},_W=class{constructor(e){var s;let t=\"v1\";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith(\"/\")?e.baseUrl:`${e.baseUrl}/`;this.client=wW({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(\",\"),this.namespaceOps=new jW(this.client,t),this.tableOps=new NW(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class C3{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\\/$/,\"\"),this.headers=Object.assign(Object.assign({},k3),r),this.fetch=rN(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}listBuckets(t){return Fe(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set(\"limit\",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set(\"offset\",t.offset.toString()),t!=null&&t.sortColumn&&r.set(\"sortColumn\",t.sortColumn),t!=null&&t.sortOrder&&r.set(\"sortOrder\",t.sortOrder),t!=null&&t.search&&r.set(\"search\",t.search);const s=r.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Bm(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield sN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}from(t){if(!dW(t))throw new Pf(\"Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.\");const r=new _W({baseUrl:this.url,catalogName:t,auth:{type:\"custom\",getHeaders:()=>Fe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(i,o){const l=i[o];return typeof l!=\"function\"?l:(...c)=>Fe(this,void 0,void 0,function*(){try{return{data:yield l.apply(i,c),error:null}}catch(d){if(s)throw d;return{data:null,error:d}}})}})}}const nN={\"X-Client-Info\":`storage-js/${S3}`,\"Content-Type\":\"application/json\"};class aN extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name=\"StorageVectorsError\"}}function kn(e){return typeof e==\"object\"&&e!==null&&\"__isStorageVectorsError\"in e}class jg extends aN{constructor(t,r,s){super(t),this.name=\"StorageVectorsApiError\",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class E3 extends aN{constructor(t,r){super(t),this.name=\"StorageVectorsUnknownError\",this.originalError=r}}var Mw;(function(e){e.InternalError=\"InternalError\",e.S3VectorConflictException=\"S3VectorConflictException\",e.S3VectorNotFoundException=\"S3VectorNotFoundException\",e.S3VectorBucketNotEmpty=\"S3VectorBucketNotEmpty\",e.S3VectorMaxBucketsExceeded=\"S3VectorMaxBucketsExceeded\",e.S3VectorMaxIndexesExceeded=\"S3VectorMaxIndexesExceeded\"})(Mw||(Mw={}));const Av=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),SW=()=>Response,P3=e=>{if(typeof e!=\"object\"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},kW=e=>Array.from(new Float32Array(e)),CW=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},ck=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),EW=(e,t,r)=>Fe(void 0,void 0,void 0,function*(){if(e&&typeof e==\"object\"&&\"status\"in e&&\"ok\"in e&&typeof e.status==\"number\"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json==\"function\")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||a+\"\";t(new jg(ck(o),a,l))}).catch(()=>{const o=a+\"\",l=i.statusText||`HTTP ${a} error`;t(new jg(l,a,o))});else{const o=a+\"\",l=i.statusText||`HTTP ${a} error`;t(new jg(l,a,o))}}else t(new E3(ck(e),e))}),PW=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(P3(s)?(a.headers=Object.assign({\"Content-Type\":\"application/json\"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),r)):a};function TW(e,t,r,s,a,i){return Fe(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,PW(t,s,a,i)).then(c=>{if(!c.ok)throw c;if(s!=null&&s.noResolveJson)return c;const d=c.headers.get(\"content-type\");return!d||!d.includes(\"application/json\")?{}:c.json()}).then(c=>o(c)).catch(c=>EW(c,l,s))})})}function Gn(e,t,r,s,a){return Fe(this,void 0,void 0,function*(){return TW(e,\"POST\",t,s,a,r)})}class T3{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\\/$/,\"\"),this.headers=Object.assign(Object.assign({},nN),r),this.fetch=Av(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Gn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}getIndex(t,r){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(kn(s))return{data:null,error:s};throw s}})}listIndexes(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Gn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(kn(s))return{data:null,error:s};throw s}})}}class A3{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\\/$/,\"\"),this.headers=Object.assign(Object.assign({},nN),r),this.fetch=Av(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error(\"Vector batch size must be between 1 and 500 items\");return{data:(yield Gn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}getVectors(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}listVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error(\"segmentCount must be between 1 and 16\");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Gn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}queryVectors(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}deleteVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error(\"Keys batch size must be between 1 and 500 items\");return{data:(yield Gn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}}class R3{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\\/$/,\"\"),this.headers=Object.assign(Object.assign({},nN),r),this.fetch=Av(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Gn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}getBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}listBuckets(){return Fe(this,arguments,void 0,function*(t={}){try{return{data:yield Gn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Gn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}}class O3 extends R3{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new I3(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Fe(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Fe(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Fe(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Fe(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class I3 extends T3{constructor(t,r,s,a){super(t,r,a),this.vectorBucketName=s}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Fe(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Fe(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Fe(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Fe(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new D3(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class D3 extends A3{constructor(t,r,s,a,i){super(t,r,i),this.vectorBucketName=s,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Fe(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Fe(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Fe(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Fe(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Fe(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class AW extends vW{constructor(t,r={},s,a){super(t,r,s,a)}from(t){return new xW(this.url,this.headers,t,this.fetch)}get vectors(){return new O3(this.url+\"/vector\",{headers:this.headers,fetch:this.fetch})}get analytics(){return new C3(this.url+\"/iceberg\",this.headers,this.fetch)}}const RW=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:C3,StorageApiError:N3,StorageClient:AW,StorageError:Pf,StorageUnknownError:fx,StorageVectorsApiError:jg,StorageVectorsClient:O3,StorageVectorsError:aN,get StorageVectorsErrorCode(){return Mw},StorageVectorsUnknownError:E3,VectorBucketApi:R3,VectorBucketScope:I3,VectorDataApi:A3,VectorIndexApi:T3,VectorIndexScope:D3,isPlainObject:P3,isStorageError:Nr,isStorageVectorsError:kn,normalizeToFloat32:kW,resolveFetch:Av,resolveResponse:SW,validateVectorDimension:CW},Symbol.toStringTag,{value:\"Module\"})),OW=Yu(RW);var M3={},Rv={};Object.defineProperty(Rv,\"__esModule\",{value:!0});Rv.version=void 0;Rv.version=\"2.87.1\";(function(e){Object.defineProperty(e,\"__esModule\",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=Rv;let r=\"\";typeof Deno<\"u\"?r=\"deno\":typeof document<\"u\"?r=\"web\":typeof navigator<\"u\"&&navigator.product===\"ReactNative\"?r=\"react-native\":r=\"node\",e.DEFAULT_HEADERS={\"X-Client-Info\":`supabase-js-${r}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:\"public\"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:\"implicit\"},e.DEFAULT_REALTIME_OPTIONS={}})(M3);var L3={};(function(e){Object.defineProperty(e,\"__esModule\",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=a=>a?(...i)=>a(...i):(...i)=>fetch(...i);e.resolveFetch=t;const r=()=>Headers;e.resolveHeadersConstructor=r;const s=(a,i,o)=>{const l=(0,e.resolveFetch)(o),c=(0,e.resolveHeadersConstructor)();return async(d,u)=>{var h;const m=(h=await i())!==null&&h!==void 0?h:a;let g=new c(u==null?void 0:u.headers);return g.has(\"apikey\")||g.set(\"apikey\",a),g.has(\"Authorization\")||g.set(\"Authorization\",`Bearer ${m}`),l(d,Object.assign(Object.assign({},u),{headers:g}))}};e.fetchWithAuth=s})(L3);var Dl={};Object.defineProperty(Dl,\"__esModule\",{value:!0});Dl.isBrowser=void 0;Dl.uuid=IW;Dl.ensureTrailingSlash=$3;Dl.applySettingDefaults=MW;Dl.validateSupabaseUrl=LW;function IW(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(e){var t=Math.random()*16|0,r=e==\"x\"?t:t&3|8;return r.toString(16)})}function $3(e){return e.endsWith(\"/\")?e:e+\"/\"}const DW=()=>typeof window<\"u\";Dl.isBrowser=DW;function MW(e,t){var r,s;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:h}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>\"\"};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function LW(e){const t=e==null?void 0:e.trim();if(!t)throw new Error(\"supabaseUrl is required.\");if(!t.match(/^https?:\\/\\//i))throw new Error(\"Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.\");try{return new URL($3(t))}catch{throw Error(\"Invalid supabaseUrl: Provided URL is malformed.\")}}var Ov={};const F3=\"2.87.1\",Nd=30*1e3,Lw=3,pb=Lw*Nd,$W=\"http://localhost:9999\",FW=\"supabase.auth.token\",VW={\"X-Client-Info\":`gotrue-js/${F3}`},$w=\"X-Supabase-Api-Version\",V3={\"2024-01-01\":{timestamp:Date.parse(\"2024-01-01T00:00:00.0Z\"),name:\"2024-01-01\"}},zW=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,BW=10*60*1e3;let Ru=class extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name=\"AuthError\",this.status=r,this.code=s}};function We(e){return typeof e==\"object\"&&e!==null&&\"__isAuthError\"in e}let z3=class extends Ru{constructor(t,r,s){super(t,r,s),this.name=\"AuthApiError\",this.status=r,this.code=s}};function B3(e){return We(e)&&e.name===\"AuthApiError\"}let zo=class extends Ru{constructor(t,r){super(t),this.name=\"AuthUnknownError\",this.originalError=r}},xo=class extends Ru{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}},yn=class extends xo{constructor(){super(\"Auth session missing!\",\"AuthSessionMissingError\",400,void 0)}};function U3(e){return We(e)&&e.name===\"AuthSessionMissingError\"}let tc=class extends xo{constructor(){super(\"Auth session or user missing\",\"AuthInvalidTokenResponseError\",500,void 0)}},Zh=class extends xo{constructor(t){super(t,\"AuthInvalidCredentialsError\",400,void 0)}},em=class extends xo{constructor(t,r=null){super(t,\"AuthImplicitGrantRedirectError\",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function q3(e){return We(e)&&e.name===\"AuthImplicitGrantRedirectError\"}let Fw=class extends xo{constructor(t,r=null){super(t,\"AuthPKCEGrantCodeExchangeError\",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},px=class extends xo{constructor(t,r){super(t,\"AuthRetryableFetchError\",r,void 0)}};function Ng(e){return We(e)&&e.name===\"AuthRetryableFetchError\"}let Vw=class extends xo{constructor(t,r,s){super(t,\"AuthWeakPasswordError\",r,\"weak_password\"),this.reasons=s}};function UW(e){return We(e)&&e.name===\"AuthWeakPasswordError\"}let gx=class extends xo{constructor(t){super(t,\"AuthInvalidJwtError\",400,\"invalid_jwt\")}};const xx=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\".split(\"\"),dk=` \t\n\\r=`.split(\"\"),qW=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<dk.length;t+=1)e[dk[t].charCodeAt(0)]=-2;for(let t=0;t<xx.length;t+=1)e[xx[t].charCodeAt(0)]=t;return e})();function uk(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(xx[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(xx[s]),t.queuedBits-=6}}function H3(e,t,r){const s=qW[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character \"${String.fromCharCode(e)}\"`)}}function hk(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{KW(o,s,r)};for(let o=0;o<e.length;o+=1)H3(e.charCodeAt(o),a,i);return t.join(\"\")}function HW(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function WW(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}HW(s,t)}}function KW(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error(\"Invalid UTF-8 sequence\");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error(\"Invalid UTF-8 sequence\");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Zd(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)H3(e.charCodeAt(a),r,s);return new Uint8Array(t)}function GW(e){const t=[];return WW(e,r=>t.push(r)),new Uint8Array(t)}function hc(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>uk(a,r,s)),uk(null,r,s),t.join(\"\")}function QW(e){return Math.round(Date.now()/1e3)+e}function JW(){return Symbol(\"auth-callback\")}const Ps=()=>typeof window<\"u\"&&typeof document<\"u\",Jl={tested:!1,writable:!1},W3=()=>{if(!Ps())return!1;try{if(typeof globalThis.localStorage!=\"object\")return!1}catch{return!1}if(Jl.tested)return Jl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Jl.tested=!0,Jl.writable=!0}catch{Jl.tested=!0,Jl.writable=!1}return Jl.writable};function XW(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]===\"#\")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const K3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),YW=e=>typeof e==\"object\"&&e!==null&&\"status\"in e&&\"ok\"in e&&\"json\"in e&&typeof e.json==\"function\",_d=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Xl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Es=async(e,t)=>{await e.removeItem(t)};class Iv{constructor(){this.promise=new Iv.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Iv.promiseConstructor=Promise;function gb(e){const t=e.split(\".\");if(t.length!==3)throw new gx(\"Invalid JWT structure\");for(let s=0;s<t.length;s++)if(!zW.test(t[s]))throw new gx(\"JWT not in base64url format\");return{header:JSON.parse(hk(t[0])),payload:JSON.parse(hk(t[1])),signature:Zd(t[2]),raw:{header:t[0],payload:t[1]}}}async function ZW(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function eK(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){s(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function tK(e){return(\"0\"+e.toString(16)).substr(-2)}function rK(){const t=new Uint32Array(56);if(typeof crypto>\"u\"){const r=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~\",s=r.length;let a=\"\";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,tK).join(\"\")}async function sK(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest(\"SHA-256\",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join(\"\")}async function nK(e){if(!(typeof crypto<\"u\"&&typeof crypto.subtle<\"u\"&&typeof TextEncoder<\"u\"))return console.warn(\"WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256.\"),e;const r=await sK(e);return btoa(r).replace(/\\+/g,\"-\").replace(/\\//g,\"_\").replace(/=+$/,\"\")}async function hd(e,t,r=!1){const s=rK();let a=s;r&&(a+=\"/PASSWORD_RECOVERY\"),await _d(e,`${t}-code-verifier`,a);const i=await nK(s);return[i,s===i?\"plain\":\"s256\"]}const aK=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function iK(e){const t=e.headers.get($w);if(!t||!t.match(aK))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function oK(e){if(!e)throw new Error(\"Missing exp claim\");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error(\"JWT has expired\")}function lK(e){switch(e){case\"RS256\":return{name:\"RSASSA-PKCS1-v1_5\",hash:{name:\"SHA-256\"}};case\"ES256\":return{name:\"ECDSA\",namedCurve:\"P-256\",hash:{name:\"SHA-256\"}};default:throw new Error(\"Invalid alg claim\")}}const cK=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function md(e){if(!cK.test(e))throw new Error(\"@supabase/auth-js: Expected parameter to be UUID but is not\")}function xb(){const e={};return new Proxy(e,{get:(t,r)=>{if(r===\"__isUserNotAvailableProxy\")return!0;if(typeof r==\"symbol\"){const s=r.toString();if(s===\"Symbol(Symbol.toPrimitive)\"||s===\"Symbol(Symbol.toStringTag)\"||s===\"Symbol(util.inspect.custom)\")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the \"${r}\" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the \"${r}\" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the \"${r}\" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dK(e,t){return new Proxy(e,{get:(r,s,a)=>{if(s===\"__isInsecureUserWarningProxy\")return!0;if(typeof s==\"symbol\"){const i=s.toString();if(i===\"Symbol(Symbol.toPrimitive)\"||i===\"Symbol(Symbol.toStringTag)\"||i===\"Symbol(util.inspect.custom)\"||i===\"Symbol(nodejs.util.inspect.custom)\")return Reflect.get(r,s,a)}return!t.value&&typeof s==\"string\"&&(console.warn(\"Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.\"),t.value=!0),Reflect.get(r,s,a)}})}function mk(e){return JSON.parse(JSON.stringify(e))}const rc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),uK=[502,503,504];async function fk(e){var t;if(!YW(e))throw new px(rc(e),0);if(uK.includes(e.status))throw new px(rc(e),e.status);let r;try{r=await e.json()}catch(i){throw new zo(rc(i),i)}let s;const a=iK(e);if(a&&a.getTime()>=V3[\"2024-01-01\"].timestamp&&typeof r==\"object\"&&r&&typeof r.code==\"string\"?s=r.code:typeof r==\"object\"&&r&&typeof r.error_code==\"string\"&&(s=r.error_code),s){if(s===\"weak_password\")throw new Vw(rc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s===\"session_not_found\")throw new yn}else if(typeof r==\"object\"&&r&&typeof r.weak_password==\"object\"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o==\"string\",!0))throw new Vw(rc(r),e.status,r.weak_password.reasons);throw new z3(rc(r),e.status||500,s)}const hK=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e===\"GET\"?a:(a.headers=Object.assign({\"Content-Type\":\"application/json;charset=UTF-8\"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function mt(e,t,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[$w]||(i[$w]=V3[\"2024-01-01\"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?\"?\"+new URLSearchParams(o).toString():\"\",c=await mK(e,t,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function mK(e,t,r,s,a,i){const o=hK(t,s,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new px(rc(c),0)}if(l.ok||await fk(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await fk(c)}}function Ta(e){var t;let r=null;gK(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=QW(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function pk(e){const t=Ta(e);return!t.error&&e.weak_password&&typeof e.weak_password==\"object\"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message==\"string\"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s==\"string\",!0)&&(t.data.weak_password=e.weak_password),t}function Bo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function fK(e){return{data:e,error:null}}function pK(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=e,o=Il(e,[\"action_link\",\"email_otp\",\"hashed_token\",\"redirect_to\",\"verification_type\"]),l={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function gk(e){return e}function gK(e){return e.access_token&&e.refresh_token&&e.expires_in}const _g=[\"global\",\"local\",\"others\"];let iN=class{constructor({url:t=\"\",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=K3(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=_g[0]){if(_g.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_g.join(\", \")}`);try{return await mt(this.fetch,\"POST\",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await mt(this.fetch,\"POST\",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Bo})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=Il(t,[\"options\"]),a=Object.assign(Object.assign({},s),r);return\"newEmail\"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await mt(this.fetch,\"POST\",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:pK,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(We(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await mt(this.fetch,\"POST\",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Bo})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await mt(this.fetch,\"GET\",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:\"\",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:\"\"},xform:gk});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get(\"x-total-count\"))!==null&&o!==void 0?o:0,g=(c=(l=u.headers.get(\"link\"))===null||l===void 0?void 0:l.split(\",\"))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(\";\")[0].split(\"=\")[1].substring(0,1)),w=JSON.parse(v.split(\";\")[1].split(\"=\")[1]);d[`${w}Page`]=x}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(We(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){md(t);try{return await mt(this.fetch,\"GET\",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Bo})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){md(t);try{return await mt(this.fetch,\"PUT\",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Bo})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){md(t);try{return await mt(this.fetch,\"DELETE\",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Bo})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){md(t.userId);try{const{data:r,error:s}=await mt(this.fetch,\"GET\",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(We(r))return{data:null,error:r};throw r}}async _deleteFactor(t){md(t.userId),md(t.id);try{return{data:await mt(this.fetch,\"DELETE\",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await mt(this.fetch,\"GET\",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:\"\",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:\"\"},xform:gk});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get(\"x-total-count\"))!==null&&o!==void 0?o:0,g=(c=(l=u.headers.get(\"link\"))===null||l===void 0?void 0:l.split(\",\"))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(\";\")[0].split(\"=\")[1].substring(0,1)),w=JSON.parse(v.split(\";\")[1].split(\"=\")[1]);d[`${w}Page`]=x}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(We(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await mt(this.fetch,\"POST\",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(We(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await mt(this.fetch,\"GET\",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(We(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await mt(this.fetch,\"PUT\",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(We(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await mt(this.fetch,\"DELETE\",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await mt(this.fetch,\"POST\",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(We(r))return{data:null,error:r};throw r}}};function xk(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const sc={debug:!!(globalThis&&W3()&&globalThis.localStorage&&globalThis.localStorage.getItem(\"supabase.gotrue-js.locks.debug\")===\"true\")};class oN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let G3=class extends oN{};class xK extends oN{}async function Q3(e,t,r){sc.debug&&console.log(\"@supabase/gotrue-js: navigatorLock: acquire lock\",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),sc.debug&&console.log(\"@supabase/gotrue-js: navigatorLock acquire timed out\",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:\"exclusive\",ifAvailable:!0}:{mode:\"exclusive\",signal:s.signal},async a=>{if(a){sc.debug&&console.log(\"@supabase/gotrue-js: navigatorLock: acquired\",e,a.name);try{return await r()}finally{sc.debug&&console.log(\"@supabase/gotrue-js: navigatorLock: released\",e,a.name)}}else{if(t===0)throw sc.debug&&console.log(\"@supabase/gotrue-js: navigatorLock: not immediately available\",e),new G3(`Acquiring an exclusive Navigator LockManager lock \"${e}\" immediately failed`);if(sc.debug)try{const i=await globalThis.navigator.locks.query();console.log(\"@supabase/gotrue-js: Navigator LockManager state\",JSON.stringify(i,null,\"  \"))}catch(i){console.warn(\"@supabase/gotrue-js: Error when querying Navigator LockManager state\",i)}return console.warn(\"@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request\"),await r()}}))}const vk={};async function vK(e,t,r){var s;const a=(s=vk[e])!==null&&s!==void 0?s:Promise.resolve(),i=Promise.race([a.catch(()=>null),t>=0?new Promise((o,l)=>{setTimeout(()=>{l(new xK(`Acquring process lock with name \"${e}\" timed out`))},t)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await r());return vk[e]=i.catch(async o=>{if(o&&o.isAcquireTimeout)return await a,null;throw o}),await i}function yK(){if(typeof globalThis!=\"object\")try{Object.defineProperty(Object.prototype,\"__magic__\",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<\"u\"&&(self.globalThis=self)}}function J3(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address \"${e}\" is invalid.`);return e.toLowerCase()}function bK(e){return parseInt(e,16)}function wK(e){const t=new TextEncoder().encode(e);return\"0x\"+Array.from(t,s=>s.toString(16).padStart(2,\"0\")).join(\"\")}function jK(e){var t;const{chainId:r,domain:s,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:u,uri:h,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field \"chainId\". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field \"domain\". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field \"nonce\". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field \"uri\". URI must be provided.');if(m!==\"1\")throw new Error(`@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`\n`))throw new Error(`@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\\\n'. Provided value: ${e.statement}`)}const g=J3(e.address),v=u?`${u}://${s}`:s,x=e.statement?`${e.statement}\n`:\"\",w=`${v} wants you to sign in with your Ethereum account:\n${g}\n\n${x}`;let y=`URI: ${h}\nVersion: ${m}\nChain ID: ${r}${o?`\nNonce: ${o}`:\"\"}\nIssued At: ${i.toISOString()}`;if(a&&(y+=`\nExpiration Time: ${a.toISOString()}`),l&&(y+=`\nNot Before: ${l.toISOString()}`),c&&(y+=`\nRequest ID: ${c}`),d){let b=`\nResources:`;for(const N of d){if(!N||typeof N!=\"string\")throw new Error(`@supabase/auth-js: Invalid SIWE message field \"resources\". Every resource must be a valid string. Provided value: ${N}`);b+=`\n- ${N}`}y+=b}return`${w}\n${y}`}class Qr extends Error{constructor({message:t,code:r,cause:s,name:a}){var i;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=a??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:\"Unknown Error\",this.code=r}}class vx extends Qr{constructor(t,r){super({code:\"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY\",cause:r,message:t}),this.name=\"WebAuthnUnknownError\",this.originalError=r}}function NK({error:e,options:t}){var r,s,a;const{publicKey:i}=t;if(!i)throw Error(\"options was missing required publicKey property\");if(e.name===\"AbortError\"){if(t.signal instanceof AbortSignal)return new Qr({message:\"Registration ceremony was sent an abort signal\",code:\"ERROR_CEREMONY_ABORTED\",cause:e})}else if(e.name===\"ConstraintError\"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Qr({message:\"Discoverable credentials were required but no available authenticator supported it\",code:\"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT\",cause:e});if(t.mediation===\"conditional\"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)===\"required\")return new Qr({message:\"User verification was required during automatic registration but it could not be performed\",code:\"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE\",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)===\"required\")return new Qr({message:\"User verification was required but no available authenticator supported it\",code:\"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT\",cause:e})}else{if(e.name===\"InvalidStateError\")return new Qr({message:\"The authenticator was previously registered\",code:\"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED\",cause:e});if(e.name===\"NotAllowedError\")return new Qr({message:e.message,code:\"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY\",cause:e});if(e.name===\"NotSupportedError\")return i.pubKeyCredParams.filter(l=>l.type===\"public-key\").length===0?new Qr({message:'No entry in pubKeyCredParams was of type \"public-key\"',code:\"ERROR_MALFORMED_PUBKEYCREDPARAMS\",cause:e}):new Qr({message:\"No available authenticator supported any of the specified pubKeyCredParams algorithms\",code:\"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG\",cause:e});if(e.name===\"SecurityError\"){const o=window.location.hostname;if(X3(o)){if(i.rp.id!==o)return new Qr({message:`The RP ID \"${i.rp.id}\" is invalid for this domain`,code:\"ERROR_INVALID_RP_ID\",cause:e})}else return new Qr({message:`${window.location.hostname} is an invalid domain`,code:\"ERROR_INVALID_DOMAIN\",cause:e})}else if(e.name===\"TypeError\"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Qr({message:\"User ID was not between 1 and 64 characters\",code:\"ERROR_INVALID_USER_ID_LENGTH\",cause:e})}else if(e.name===\"UnknownError\")return new Qr({message:\"The authenticator was unable to process the specified options, or could not create a new credential\",code:\"ERROR_AUTHENTICATOR_GENERAL_ERROR\",cause:e})}return new Qr({message:\"a Non-Webauthn related error has occurred\",code:\"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY\",cause:e})}function _K({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error(\"options was missing required publicKey property\");if(e.name===\"AbortError\"){if(t.signal instanceof AbortSignal)return new Qr({message:\"Authentication ceremony was sent an abort signal\",code:\"ERROR_CEREMONY_ABORTED\",cause:e})}else{if(e.name===\"NotAllowedError\")return new Qr({message:e.message,code:\"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY\",cause:e});if(e.name===\"SecurityError\"){const s=window.location.hostname;if(X3(s)){if(r.rpId!==s)return new Qr({message:`The RP ID \"${r.rpId}\" is invalid for this domain`,code:\"ERROR_INVALID_RP_ID\",cause:e})}else return new Qr({message:`${window.location.hostname} is an invalid domain`,code:\"ERROR_INVALID_DOMAIN\",cause:e})}else if(e.name===\"UnknownError\")return new Qr({message:\"The authenticator was unable to process the specified options, or could not create a new assertion signature\",code:\"ERROR_AUTHENTICATOR_GENERAL_ERROR\",cause:e})}return new Qr({message:\"a Non-Webauthn related error has occurred\",code:\"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY\",cause:e})}class SK{createNewAbortSignal(){if(this.controller){const r=new Error(\"Cancelling existing WebAuthn API call for new one\");r.name=\"AbortError\",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error(\"Manually cancelling existing WebAuthn API call\");t.name=\"AbortError\",this.controller.abort(t),this.controller=void 0}}}const kK=new SK;function CK(e){if(!e)throw new Error(\"Credential creation options are required\");if(typeof PublicKeyCredential<\"u\"&&\"parseCreationOptionsFromJSON\"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON==\"function\")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,a=Il(e,[\"challenge\",\"user\",\"excludeCredentials\"]),i=Zd(t).buffer,o=Object.assign(Object.assign({},r),{id:Zd(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(s&&s.length>0){l.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const d=s[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:Zd(d.id).buffer,type:d.type||\"public-key\",transports:d.transports})}}return l}function EK(e){if(!e)throw new Error(\"Credential request options are required\");if(typeof PublicKeyCredential<\"u\"&&\"parseRequestOptionsFromJSON\"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON==\"function\")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=Il(e,[\"challenge\",\"allowCredentials\"]),a=Zd(t).buffer,i=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Zd(l.id).buffer,type:l.type||\"public-key\",transports:l.transports})}}return i}function PK(e){var t;if(\"toJSON\"in e&&typeof e.toJSON==\"function\")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:hc(new Uint8Array(e.response.attestationObject)),clientDataJSON:hc(new Uint8Array(e.response.clientDataJSON))},type:\"public-key\",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function TK(e){var t;if(\"toJSON\"in e&&typeof e.toJSON==\"function\")return e.toJSON();const r=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:hc(new Uint8Array(a.authenticatorData)),clientDataJSON:hc(new Uint8Array(a.clientDataJSON)),signature:hc(new Uint8Array(a.signature)),userHandle:a.userHandle?hc(new Uint8Array(a.userHandle)):void 0},type:\"public-key\",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function X3(e){return e===\"localhost\"||/^([a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}$/i.test(e)}function yk(){var e,t;return!!(Ps()&&\"PublicKeyCredential\"in window&&window.PublicKeyCredential&&\"credentials\"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)==\"function\"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)==\"function\")}async function AK(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new vx(\"Browser returned unexpected credential type\",t)}:{data:null,error:new vx(\"Empty credential response\",t)}}catch(t){return{data:null,error:NK({error:t,options:e})}}}async function RK(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new vx(\"Browser returned unexpected credential type\",t)}:{data:null,error:new vx(\"Empty credential response\",t)}}catch(t){return{data:null,error:_K({error:t,options:e})}}}const OK={hints:[\"security-key\"],authenticatorSelection:{authenticatorAttachment:\"cross-platform\",requireResidentKey:!1,userVerification:\"preferred\",residentKey:\"discouraged\"},attestation:\"direct\"},IK={userVerification:\"preferred\",hints:[\"security-key\"],attestation:\"direct\"};function yx(...e){const t=a=>a!==null&&typeof a==\"object\"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(r(o))s[i]=o;else if(t(o)){const l=s[i];t(l)?s[i]=yx(l,o):s[i]=yx(o)}else s[i]=o}return s}function DK(e,t){return yx(OK,e,t||{})}function MK(e,t){return yx(IK,e,t||{})}class LK{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:\"webauthn\"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=a??kK.createNewAbortSignal();if(o.webauthn.type===\"create\"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${s}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case\"create\":{const d=DK(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:h}=await AK({publicKey:d,signal:c});return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case\"request\":{const d=MK(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:h}=await RK(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new zo(\"Unexpected error in challenge\",o)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<\"u\"?window.location.hostname:void 0,rpOrigins:s=typeof window<\"u\"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Ru(\"rpId is required for WebAuthn authentication\")};try{if(!yk())return{data:null,error:new zo(\"Browser does not support WebAuthn\",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:s,credential_response:c.credential_response}})}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new zo(\"Unexpected error in authenticate\",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<\"u\"?window.location.hostname:void 0,rpOrigins:s=typeof window<\"u\"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Ru(\"rpId is required for WebAuthn registration\")};try{if(!yk())return{data:null,error:new zo(\"Browser does not support WebAuthn\",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type===\"webauthn\"&&m.friendly_name===t&&m.status!==\"unverified\")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new zo(\"Unexpected error in register\",o)}}}}yK();const $K={url:$W,storageKey:FW,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:VW,flowType:\"implicit\",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function bk(e,t,r){return await r()}const fd={};let lN=class zw{get jwks(){var t,r;return(r=(t=fd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){fd[this.storageKey]=Object.assign(Object.assign({},fd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=fd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){fd[this.storageKey]=Object.assign(Object.assign({},fd[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},$K),t);if(this.storageKey=i.storageKey,this.instanceID=(r=zw.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,zw.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug==\"function\"&&(this.logger=i.debug),this.instanceID>0&&Ps()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new iN({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=K3(i.fetch),this.lock=i.lock||bk,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Ps()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Q3:this.lock=bk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new LK(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:W3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xk(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=xk(this.memoryStorage)),Ps()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error(\"Failed to create a new BroadcastChannel, multi-tab state changes will not be available\",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener(\"message\",async o=>{this._debug(\"received broadcast notification from other tab or client\",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${F3}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s=\"none\";if(Ps()&&(r=XW(window.location.href),this._isImplicitGrantCallback(r)?s=\"implicit\":await this._isPKCECallback(r)&&(s=\"pkce\")),Ps()&&this.detectSessionInUrl&&s!==\"none\"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug(\"#_initialize()\",\"error detecting session from URL\",i),q3(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c===\"identity_already_exists\"||c===\"identity_not_found\"||c===\"single_identity_not_deletable\")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug(\"#_initialize()\",\"detected session in URL\",o,\"redirect type\",l),await this._saveSession(o),setTimeout(async()=>{l===\"recovery\"?await this._notifyAllSubscribers(\"PASSWORD_RECOVERY\",o):await this._notifyAllSubscribers(\"SIGNED_IN\",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return We(r)?this._returnResult({error:r}):this._returnResult({error:new zo(\"Unexpected error during initialization\",r)})}finally{await this._handleVisibilityChange(),this._debug(\"#_initialize()\",\"end\")}}async signInAnonymously(t){var r,s,a;try{const i=await mt(this.fetch,\"POST\",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ta}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers(\"SIGNED_IN\",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(We(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,s,a;try{let i;if(\"email\"in t){const{email:u,password:h,options:m}=t;let g=null,v=null;this.flowType===\"pkce\"&&([g,v]=await hd(this.storage,this.storageKey)),i=await mt(this.fetch,\"POST\",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:Ta})}else if(\"phone\"in t){const{phone:u,password:h,options:m}=t;i=await mt(this.fetch,\"POST\",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:\"sms\",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ta})}else throw new Zh(\"You must provide either an email or phone number and a password\");const{data:o,error:l}=i;if(l||!o)return await Es(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers(\"SIGNED_IN\",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if(\"email\"in t){const{email:i,password:o,options:l}=t;r=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pk})}else if(\"phone\"in t){const{phone:i,password:o,options:l}=t;r=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pk})}else throw new Zh(\"You must provide either an email or phone number and a password\");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const i=new tc;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers(\"SIGNED_IN\",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(We(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case\"ethereum\":return await this.signInWithEthereum(t);case\"solana\":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain \"${r}\"`)}}async signInWithEthereum(t){var r,s,a,i,o,l,c,d,u,h,m;let g,v;if(\"message\"in t)g=t.message,v=t.signature;else{const{chain:x,wallet:w,statement:y,options:b}=t;let N;if(Ps())if(typeof w==\"object\")N=w;else{const A=window;if(\"ethereum\"in A&&typeof A.ethereum==\"object\"&&\"request\"in A.ethereum&&typeof A.ethereum.request==\"function\")N=A.ethereum;else throw new Error(\"@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.\")}else{if(typeof w!=\"object\"||!(b!=null&&b.url))throw new Error(\"@supabase/auth-js: Both wallet and url must be specified in non-browser environments.\");N=w}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),E=await N.request({method:\"eth_requestAccounts\"}).then(A=>A).catch(()=>{throw new Error(\"@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid\")});if(!E||E.length===0)throw new Error(\"@supabase/auth-js: No accounts available. Please ensure the wallet is connected.\");const k=J3(E[0]);let P=(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!P){const A=await N.request({method:\"eth_chainId\"});P=bK(A)}const C={domain:_.host,address:k,statement:y,uri:_.href,version:\"1\",chainId:P,nonce:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.resources};g=jK(C),v=await N.request({method:\"personal_sign\",params:[wK(g),k]})}try{const{data:x,error:w}=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:\"ethereum\",message:g,signature:v},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ta});if(w)throw w;if(!x||!x.session||!x.user){const y=new tc;return this._returnResult({data:{user:null,session:null},error:y})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers(\"SIGNED_IN\",x.session)),this._returnResult({data:Object.assign({},x),error:w})}catch(x){if(We(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(t){var r,s,a,i,o,l,c,d,u,h,m,g;let v,x;if(\"message\"in t)v=t.message,x=t.signature;else{const{chain:w,wallet:y,statement:b,options:N}=t;let _;if(Ps())if(typeof y==\"object\")_=y;else{const k=window;if(\"solana\"in k&&typeof k.solana==\"object\"&&(\"signIn\"in k.solana&&typeof k.solana.signIn==\"function\"||\"signMessage\"in k.solana&&typeof k.solana.signMessage==\"function\"))_=k.solana;else throw new Error(\"@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.\")}else{if(typeof y!=\"object\"||!(N!=null&&N.url))throw new Error(\"@supabase/auth-js: Both wallet and url must be specified in non-browser environments.\");_=y}const E=new URL((r=N==null?void 0:N.url)!==null&&r!==void 0?r:window.location.href);if(\"signIn\"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:\"1\",domain:E.host,uri:E.href}),b?{statement:b}:null));let P;if(Array.isArray(k)&&k[0]&&typeof k[0]==\"object\")P=k[0];else if(k&&typeof k==\"object\"&&\"signedMessage\"in k&&\"signature\"in k)P=k;else throw new Error(\"@supabase/auth-js: Wallet method signIn() returned unrecognized value\");if(\"signedMessage\"in P&&\"signature\"in P&&(typeof P.signedMessage==\"string\"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)v=typeof P.signedMessage==\"string\"?P.signedMessage:new TextDecoder().decode(P.signedMessage),x=P.signature;else throw new Error(\"@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields\")}else{if(!(\"signMessage\"in _)||typeof _.signMessage!=\"function\"||!(\"publicKey\"in _)||typeof _!=\"object\"||!_.publicKey||!(\"toBase58\"in _.publicKey)||typeof _.publicKey.toBase58!=\"function\")throw new Error(\"@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API\");v=[`${E.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?[\"\",b,\"\"]:[\"\"],\"Version: 1\",`URI: ${E.href}`,`Issued At: ${(a=(s=N==null?void 0:N.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=N==null?void 0:N.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((h=(u=N==null?void 0:N.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?[\"Resources\",...N.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`\n`);const k=await _.signMessage(new TextEncoder().encode(v),\"utf8\");if(!k||!(k instanceof Uint8Array))throw new Error(\"@supabase/auth-js: Wallet signMessage() API returned an recognized value\");x=k}}try{const{data:w,error:y}=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:\"solana\",message:v,signature:hc(x)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ta});if(y)throw y;if(!w||!w.session||!w.user){const b=new tc;return this._returnResult({data:{user:null,session:null},error:b})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers(\"SIGNED_IN\",w.session)),this._returnResult({data:Object.assign({},w),error:y})}catch(w){if(We(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const r=await Xl(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??\"\").split(\"/\");try{const{data:i,error:o}=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Ta});if(await Es(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new tc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers(\"SIGNED_IN\",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=t,l=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ta}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const u=new tc;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers(\"SIGNED_IN\",c.session)),this._returnResult({data:c,error:d})}catch(r){if(We(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,a,i,o;try{if(\"email\"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType===\"pkce\"&&([d,u]=await hd(this.storage,this.storageKey));const{error:h}=await mt(this.fetch,\"POST\",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if(\"phone\"in t){const{phone:l,options:c}=t,{data:d,error:u}=await mt(this.fetch,\"POST\",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:\"sms\"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u})}throw new Zh(\"You must provide either an email or phone number.\")}catch(l){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,s;try{let a,i;\"options\"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await mt(this.fetch,\"POST\",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ta});if(l)throw l;if(!o)throw new Error(\"An error occurred on token verification.\");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type==\"recovery\"?\"PASSWORD_RECOVERY\":\"SIGNED_IN\",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(We(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,s,a,i,o;try{let l=null,c=null;this.flowType===\"pkce\"&&([l,c]=await hd(this.storage,this.storageKey));const d=await mt(this.fetch,\"POST\",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},\"providerId\"in t?{provider_id:t.providerId}:null),\"domain\"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:fK});return!((i=d.data)===null||i===void 0)&&i.url&&Ps()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new yn;const{error:a}=await mt(this.fetch,\"GET\",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(We(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if(\"email\"in t){const{email:s,type:a,options:i}=t,{error:o}=await mt(this.fetch,\"POST\",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if(\"phone\"in t){const{phone:s,type:a,options:i}=t,{data:o,error:l}=await mt(this.fetch,\"POST\",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Zh(\"You must provide either an email or phone number and a type\")}catch(r){if(We(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug(\"#_acquireLock\",\"begin\",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug(\"#_acquireLock\",\"lock acquired for storage key\",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug(\"#_acquireLock\",\"lock released for storage key\",this.storageKey),this.lockAcquired=!1}})}finally{this._debug(\"#_acquireLock\",\"end\")}}async _useSession(t){this._debug(\"#_useSession\",\"begin\");try{const r=await this.__loadSession();return await t(r)}finally{this._debug(\"#_useSession\",\"end\")}}async __loadSession(){this._debug(\"#__loadSession()\",\"begin\"),this.lockAcquired||this._debug(\"#__loadSession()\",\"used outside of an acquired lock!\",new Error().stack);try{let t=null;const r=await Xl(this.storage,this.storageKey);if(this._debug(\"#getSession()\",\"session from storage\",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug(\"#getSession()\",\"session from storage is not valid\"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<pb:!1;if(this._debug(\"#__loadSession()\",`session has${s?\"\":\" not\"} expired`,\"expires_at\",t.expires_at),!s){if(this.userStorage){const o=await Xl(this.userStorage,this.storageKey+\"-user\");o!=null&&o.user?t.user=o.user:t.user=xb()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=dK(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug(\"#__loadSession()\",\"end\")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await mt(this.fetch,\"GET\",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Bo}):await this._useSession(async r=>{var s,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yn}:await mt(this.fetch,\"GET\",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Bo})})}catch(r){if(We(r))return U3(r)&&(await this._removeSession(),await Es(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new yn;const o=a.session;let l=null,c=null;this.flowType===\"pkce\"&&t.email!=null&&([l,c]=await hd(this.storage,this.storageKey));const{data:d,error:u}=await mt(this.fetch,\"PUT\",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Bo});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers(\"USER_UPDATED\",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new yn;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=gb(t.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:\"bearer\",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers(\"SIGNED_IN\",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(We(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new yn;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(We(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ps())throw new em(\"No browser detected.\");if(t.error||t.error_description||t.error_code)throw new em(t.error_description||\"Error in URL with unspecified error_description\",{error:t.error||\"unspecified_error\",code:t.error_code||\"unspecified_code\"});switch(r){case\"implicit\":if(this.flowType===\"pkce\")throw new Fw(\"Not a valid PKCE flow url.\");break;case\"pkce\":if(this.flowType===\"implicit\")throw new em(\"Not a valid implicit grant flow url.\");break;default:}if(r===\"pkce\"){if(this._debug(\"#_initialize()\",\"begin\",\"is PKCE flow\",!0),!t.code)throw new Fw(\"No code detected.\");const{data:b,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const _=new URL(window.location.href);return _.searchParams.delete(\"code\"),window.history.replaceState(window.history.state,\"\",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new em(\"No session defined in URL\");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;c&&(m=parseInt(c));const g=m-u;g*1e3<=Nd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const v=m-h;u-v>=120?console.warn(\"@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale\",v,m,u):u-v<0&&console.warn(\"@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew\",v,m,u);const{data:x,error:w}=await this._getUser(i);if(w)throw w;const y={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:d,user:x.user};return window.location.hash=\"\",this._debug(\"#_getSessionFromURL()\",\"clearing window.location.hash\"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(s){if(We(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Xl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:\"global\"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:\"global\"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(B3(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!==\"others\"&&(await this._removeSession(),await Es(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=JW(),s={id:r,callback:t,unsubscribe:()=>{this._debug(\"#unsubscribe()\",\"state change callback with id removed\",r),this.stateChangeEmitters.delete(r)}};return this._debug(\"#onAuthStateChange()\",\"registered callback with id\",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback(\"INITIAL_SESSION\",i)),this._debug(\"INITIAL_SESSION\",\"callback id\",t,\"session\",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback(\"INITIAL_SESSION\",null)),this._debug(\"INITIAL_SESSION\",\"callback id\",t,\"error\",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType===\"pkce\"&&([s,a]=await hd(this.storage,this.storageKey,!0));try{return await mt(this.fetch,\"POST\",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(We(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return\"token\"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:m}=i;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await mt(this.fetch,\"GET\",g,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Ps()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(We(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:d,nonce:u}=t,h=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:l,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ta}),{data:m,error:g}=h;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new tc}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers(\"USER_UPDATED\",m.session)),this._returnResult({data:m,error:g}))}catch(a){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await mt(this.fetch,\"DELETE\",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(We(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,\"begin\");try{const s=Date.now();return await eK(async a=>(a>0&&await ZW(200*Math.pow(2,a-1)),this._debug(r,\"refreshing attempt\",a),await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ta})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Ng(i)&&Date.now()+o-s<Nd})}catch(s){if(this._debug(r,\"error\",s),We(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,\"end\")}}_isValidSession(t){return typeof t==\"object\"&&t!==null&&\"access_token\"in t&&\"refresh_token\"in t&&\"expires_at\"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug(\"#_handleProviderSignIn()\",\"provider\",t,\"options\",r,\"url\",s),Ps()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s=\"#_recoverAndRefresh()\";this._debug(s,\"begin\");try{const a=await Xl(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Xl(this.userStorage,this.storageKey+\"-user\");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await _d(this.userStorage,this.storageKey+\"-user\",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:xb()}else if(a&&!a.user&&!a.user){const o=await Xl(this.storage,this.storageKey+\"-user\");o&&(o!=null&&o.user)?(a.user=o.user,await Es(this.storage,this.storageKey+\"-user\"),await _d(this.storage,this.storageKey,a)):a.user=xb()}if(this._debug(s,\"session from storage\",a),!this._isValidSession(a)){this._debug(s,\"session is not valid\"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<pb;if(this._debug(s,`session has${i?\"\":\" not\"} expired with margin of ${pb}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Ng(o)||(this._debug(s,\"refresh failed with a non-retryable error, removing the session\",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers(\"SIGNED_IN\",a)):this._debug(s,\"could not get user data, skipping SIGNED_IN notification\")}catch(o){console.error(\"Error getting user data:\",o),this._debug(s,\"error getting user data, skipping SIGNED_IN notification\",o)}else await this._notifyAllSubscribers(\"SIGNED_IN\",a)}catch(a){this._debug(s,\"error\",a),console.error(a);return}finally{this._debug(s,\"end\")}}async _callRefreshToken(t){var r,s;if(!t)throw new yn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,\"begin\");try{this.refreshingDeferred=new Iv;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new yn;await this._saveSession(i.session),await this._notifyAllSubscribers(\"TOKEN_REFRESHED\",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,\"error\",i),We(i)){const o={data:null,error:i};return Ng(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,\"end\")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,\"begin\",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,\"end\")}}async _saveSession(t){this._debug(\"#_saveSession()\",t),this.suppressGetSessionWarning=!0,await Es(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage)","path":null,"size_bytes":360000,"size_tokens":null},"android/app/src/main/assets/public/sw.js":{"content":"const CACHE_NAME = 'bibliasf-v1.1.0';\nconst STATIC_CACHE = 'bibliasf-static-v1.1.0';\nconst DYNAMIC_CACHE = 'bibliasf-dynamic-v1.1.0';\n\nconst STATIC_ASSETS = [\n  '/',\n  '/index.html',\n  '/manifest.json',\n  '/bible.db',\n  '/favicon.ico',\n  '/favicon.png',\n  '/android-chrome-192x192.png',\n  '/android-chrome-512x512.png',\n  '/apple-touch-icon.png'\n];\n\nconst API_CACHE_PATTERNS = [\n  /\\/api\\/bible\\//,\n  /\\/api\\/daily-verse/,\n  /\\/api\\/reading-plans/\n];\n\nself.addEventListener('install', (event) => {\n  console.log('[ServiceWorker] Install');\n  event.waitUntil(\n    caches.open(STATIC_CACHE)\n      .then((cache) => {\n        console.log('[ServiceWorker] Caching static assets');\n        return cache.addAll(STATIC_ASSETS);\n      })\n      .then(() => self.skipWaiting())\n  );\n});\n\nself.addEventListener('activate', (event) => {\n  console.log('[ServiceWorker] Activate');\n  event.waitUntil(\n    caches.keys()\n      .then((keys) => {\n        return Promise.all(\n          keys\n            .filter((key) => key !== STATIC_CACHE && key !== DYNAMIC_CACHE && key !== CACHE_NAME)\n            .map((key) => {\n              console.log('[ServiceWorker] Removing old cache:', key);\n              return caches.delete(key);\n            })\n        );\n      })\n      .then(() => clients.claim())\n  );\n});\n\nself.addEventListener('fetch', (event) => {\n  const { request } = event;\n  const url = new URL(request.url);\n\n  if (request.method !== 'GET') {\n    return;\n  }\n\n  if (url.origin !== location.origin) {\n    return;\n  }\n\n  const isApiRequest = url.pathname.startsWith('/api/');\n  const shouldCacheApi = API_CACHE_PATTERNS.some(pattern => pattern.test(url.pathname));\n\n  if (isApiRequest) {\n    if (shouldCacheApi) {\n      event.respondWith(networkFirstWithCache(request, DYNAMIC_CACHE));\n    } else {\n      event.respondWith(networkOnly(request));\n    }\n  } else {\n    event.respondWith(cacheFirstWithNetwork(request));\n  }\n});\n\nasync function cacheFirstWithNetwork(request) {\n  const cachedResponse = await caches.match(request);\n  if (cachedResponse) {\n    return cachedResponse;\n  }\n\n  try {\n    const networkResponse = await fetch(request);\n    if (networkResponse.ok) {\n      const cache = await caches.open(STATIC_CACHE);\n      cache.put(request, networkResponse.clone());\n    }\n    return networkResponse;\n  } catch (error) {\n    console.log('[ServiceWorker] Fetch failed, returning offline page:', error);\n    const offlineResponse = await caches.match('/');\n    if (offlineResponse) {\n      return offlineResponse;\n    }\n    return new Response('Offline', { status: 503, statusText: 'Service Unavailable' });\n  }\n}\n\nasync function networkFirstWithCache(request, cacheName) {\n  try {\n    const networkResponse = await fetch(request);\n    if (networkResponse.ok) {\n      const cache = await caches.open(cacheName);\n      cache.put(request, networkResponse.clone());\n    }\n    return networkResponse;\n  } catch (error) {\n    console.log('[ServiceWorker] Network failed, trying cache:', error);\n    const cachedResponse = await caches.match(request);\n    if (cachedResponse) {\n      return cachedResponse;\n    }\n    return new Response(JSON.stringify({ error: 'Offline' }), {\n      status: 503,\n      headers: { 'Content-Type': 'application/json' }\n    });\n  }\n}\n\nasync function networkOnly(request) {\n  try {\n    return await fetch(request);\n  } catch (error) {\n    return new Response(JSON.stringify({ error: 'Offline' }), {\n      status: 503,\n      headers: { 'Content-Type': 'application/json' }\n    });\n  }\n}\n\nself.addEventListener('push', (event) => {\n  console.log('[ServiceWorker] Push received');\n  \n  let data = {\n    title: 'BíbliaFS',\n    body: 'Você tem uma nova notificação',\n    icon: '/android-chrome-192x192.png',\n    badge: '/favicon.png',\n    tag: 'bibliasf-notification',\n    data: {}\n  };\n  \n  if (event.data) {\n    try {\n      data = { ...data, ...event.data.json() };\n    } catch (e) {\n      data.body = event.data.text();\n    }\n  }\n  \n  const options = {\n    body: data.body,\n    icon: data.icon || '/android-chrome-192x192.png',\n    badge: data.badge || '/favicon.png',\n    tag: data.tag || 'bibliasf-notification',\n    vibrate: [100, 50, 100],\n    data: data.data || {},\n    actions: data.actions || [\n      { action: 'open', title: 'Abrir' },\n      { action: 'dismiss', title: 'Fechar' }\n    ],\n    requireInteraction: data.requireInteraction || false\n  };\n  \n  event.waitUntil(\n    self.registration.showNotification(data.title, options)\n  );\n});\n\nself.addEventListener('notificationclick', (event) => {\n  console.log('[ServiceWorker] Notification click:', event.action);\n  \n  event.notification.close();\n  \n  if (event.action === 'dismiss') {\n    return;\n  }\n  \n  const urlToOpen = event.notification.data?.url || '/';\n  \n  event.waitUntil(\n    clients.matchAll({ type: 'window', includeUncontrolled: true })\n      .then((clientList) => {\n        for (const client of clientList) {\n          if (client.url.includes(self.location.origin) && 'focus' in client) {\n            client.navigate(urlToOpen);\n            return client.focus();\n          }\n        }\n        if (clients.openWindow) {\n          return clients.openWindow(urlToOpen);\n        }\n      })\n  );\n  \n  if (event.notification.data?.notificationId) {\n    fetch('/api/notifications/clicked', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ notificationId: event.notification.data.notificationId })\n    }).catch(console.error);\n  }\n});\n\nself.addEventListener('notificationclose', (event) => {\n  console.log('[ServiceWorker] Notification closed');\n});\n\nself.addEventListener('message', (event) => {\n  if (event.data && event.data.type === 'SKIP_WAITING') {\n    self.skipWaiting();\n  }\n});\n","path":null,"size_bytes":5736,"size_tokens":null},"ios/App/App/public/assets/index-0_GTpkvp.css":{"content":"*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: \"\"}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:Inter,var(--font-sans);font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--font-mono);font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}*{--tw-border-opacity: 1;border-color:hsl(var(--border) / var(--tw-border-opacity, 1))}body{--tw-bg-opacity: 1;background-color:hsl(var(--background) / var(--tw-bg-opacity, 1));font-family:Inter,var(--font-sans);--tw-text-opacity: 1;color:hsl(var(--foreground) / var(--tw-text-opacity, 1));-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:linear-gradient(160deg,hsl(var(--background)),#f8f6f1 40%,#fbf8f4)}.dark body{background:linear-gradient(160deg,hsl(var(--background)),#14181f 40%,#151a23)}.glass{border-width:1px;border-color:#fff6;background-color:#fff9;--tw-backdrop-blur: blur(24px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.glass.toggle-elevate:before{top:-1px;right:-1px;bottom:-1px;left:-1px}.glass.hover-elevate:not(.no-hover-interaction-elevate):after,.glass.active-elevate:not(.no-active-interaction-elevate):after,.glass.hover-elevate-2:not(.no-hover-interaction-elevate):after,.glass.active-elevate-2:not(.no-active-interaction-elevate):after{top:-1px;right:-1px;bottom:-1px;left:-1px}.glass:is(.dark *){border-color:#33415566;background-color:#0f172a80}.glass{box-shadow:0 8px 32px #0000000f}.verse-hero{position:relative;overflow:hidden;border-radius:1.5rem;background:linear-gradient(145deg,#fbf8f4,#f7f4ee)}.dark .verse-hero{background:linear-gradient(145deg,#1c212c,#171c26)}.verse-hero:before{content:\"\";position:absolute;top:0;right:0;bottom:0;left:0;background:url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");opacity:.5}.user-avatar-ring{position:relative;border-radius:9999px;padding:.125rem;background:conic-gradient(from 0deg,hsl(220 45% 48%) var(--xp-progress, 0%),hsl(40 20% 85%) var(--xp-progress, 0%))}.dark .user-avatar-ring{background:conic-gradient(from 0deg,hsl(38 85% 55%) var(--xp-progress, 0%),hsl(220 20% 25%) var(--xp-progress, 0%))}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em}.prose :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-links);text-decoration:underline;font-weight:500}.prose :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(a strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal;margin-top:1.25em;margin-bottom:1.25em;padding-inline-start:1.625em}.prose :where(ol[type=A]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=A s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=I]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=I s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=\"1\"]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal}.prose :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:disc;margin-top:1.25em;margin-bottom:1.25em;padding-inline-start:1.625em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{font-weight:400;color:var(--tw-prose-counters)}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.25em}.prose :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-top:3em;margin-bottom:3em}.prose :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:500;font-style:italic;color:var(--tw-prose-quotes);border-inline-start-width:.25rem;border-inline-start-color:var(--tw-prose-quote-borders);quotes:\"“\"\"”\"\"‘\"\"’\";margin-top:1.6em;margin-bottom:1.6em;padding-inline-start:1em}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}.prose :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.prose :where(h1 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:900;color:inherit}.prose :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose :where(h2 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:800;color:inherit}.prose :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.prose :where(h3 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:700;color:inherit}.prose :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.prose :where(h4 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:700;color:inherit}.prose :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){display:block;margin-top:2em;margin-bottom:2em}.prose :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:500;font-family:inherit;color:var(--tw-prose-kbd);box-shadow:0 0 0 1px rgb(var(--tw-prose-kbd-shadows) / 10%),0 3px rgb(var(--tw-prose-kbd-shadows) / 10%);font-size:.875em;border-radius:.3125rem;padding-top:.1875em;padding-inline-end:.375em;padding-bottom:.1875em;padding-inline-start:.375em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-code);font-weight:600;font-size:.875em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:\"`\"}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:\"`\"}.prose :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h1 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.875em}.prose :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(h4 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-pre-code);background-color:var(--tw-prose-pre-bg);overflow-x:auto;font-weight:400;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding-top:.8571429em;padding-inline-end:1.1428571em;padding-bottom:.8571429em;padding-inline-start:1.1428571em}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:none}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}.prose :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){width:100%;table-layout:auto;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}.prose :where(thead):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-th-borders)}.prose :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;vertical-align:bottom;padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-inline-start:.5714286em}.prose :where(tbody tr):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-td-borders)}.prose :where(tbody tr:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:0}.prose :where(tbody td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:baseline}.prose :where(tfoot):not(:where([class~=not-prose],[class~=not-prose] *)){border-top-width:1px;border-top-color:var(--tw-prose-th-borders)}.prose :where(tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:top}.prose :where(th,td):not(:where([class~=not-prose],[class~=not-prose] *)){text-align:start}.prose :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-captions);font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose{--tw-prose-body: #374151;--tw-prose-headings: #111827;--tw-prose-lead: #4b5563;--tw-prose-links: #111827;--tw-prose-bold: #111827;--tw-prose-counters: #6b7280;--tw-prose-bullets: #d1d5db;--tw-prose-hr: #e5e7eb;--tw-prose-quotes: #111827;--tw-prose-quote-borders: #e5e7eb;--tw-prose-captions: #6b7280;--tw-prose-kbd: #111827;--tw-prose-kbd-shadows: 17 24 39;--tw-prose-code: #111827;--tw-prose-pre-code: #e5e7eb;--tw-prose-pre-bg: #1f2937;--tw-prose-th-borders: #d1d5db;--tw-prose-td-borders: #e5e7eb;--tw-prose-invert-body: #d1d5db;--tw-prose-invert-headings: #fff;--tw-prose-invert-lead: #9ca3af;--tw-prose-invert-links: #fff;--tw-prose-invert-bold: #fff;--tw-prose-invert-counters: #9ca3af;--tw-prose-invert-bullets: #4b5563;--tw-prose-invert-hr: #374151;--tw-prose-invert-quotes: #f3f4f6;--tw-prose-invert-quote-borders: #374151;--tw-prose-invert-captions: #9ca3af;--tw-prose-invert-kbd: #fff;--tw-prose-invert-kbd-shadows: 255 255 255;--tw-prose-invert-code: #fff;--tw-prose-invert-pre-code: #d1d5db;--tw-prose-invert-pre-bg: rgb(0 0 0 / 50%);--tw-prose-invert-th-borders: #4b5563;--tw-prose-invert-td-borders: #374151;font-size:1rem;line-height:1.75}.prose :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;margin-bottom:.5em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(.prose>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.75em;margin-bottom:.75em}.prose :where(.prose>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.75em;margin-bottom:.75em}.prose :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em}.prose :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;padding-inline-start:1.625em}.prose :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.5714286em;padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-inline-start:.5714286em}.prose :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.prose-sm{font-size:.875rem;line-height:1.7142857}.prose-sm :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em;margin-bottom:1.1428571em}.prose-sm :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.2857143em;line-height:1.5555556;margin-top:.8888889em;margin-bottom:.8888889em}.prose-sm :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em;margin-bottom:1.3333333em;padding-inline-start:1.1111111em}.prose-sm :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:2.1428571em;margin-top:0;margin-bottom:.8em;line-height:1.2}.prose-sm :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.4285714em;margin-top:1.6em;margin-bottom:.8em;line-height:1.4}.prose-sm :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.2857143em;margin-top:1.5555556em;margin-bottom:.4444444em;line-height:1.5555556}.prose-sm :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.4285714em;margin-bottom:.5714286em;line-height:1.4285714}.prose-sm :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7142857em;margin-bottom:1.7142857em}.prose-sm :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7142857em;margin-bottom:1.7142857em}.prose-sm :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose-sm :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7142857em;margin-bottom:1.7142857em}.prose-sm :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8571429em;border-radius:.3125rem;padding-top:.1428571em;padding-inline-end:.3571429em;padding-bottom:.1428571em;padding-inline-start:.3571429em}.prose-sm :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8571429em}.prose-sm :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em}.prose-sm :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em}.prose-sm :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8571429em;line-height:1.6666667;margin-top:1.6666667em;margin-bottom:1.6666667em;border-radius:.25rem;padding-top:.6666667em;padding-inline-end:1em;padding-bottom:.6666667em;padding-inline-start:1em}.prose-sm :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em;margin-bottom:1.1428571em;padding-inline-start:1.5714286em}.prose-sm :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em;margin-bottom:1.1428571em;padding-inline-start:1.5714286em}.prose-sm :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.2857143em;margin-bottom:.2857143em}.prose-sm :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4285714em}.prose-sm :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4285714em}.prose-sm :where(.prose-sm>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5714286em;margin-bottom:.5714286em}.prose-sm :where(.prose-sm>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em}.prose-sm :where(.prose-sm>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.1428571em}.prose-sm :where(.prose-sm>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em}.prose-sm :where(.prose-sm>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.1428571em}.prose-sm :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5714286em;margin-bottom:.5714286em}.prose-sm :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em;margin-bottom:1.1428571em}.prose-sm :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em}.prose-sm :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.2857143em;padding-inline-start:1.5714286em}.prose-sm :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2.8571429em;margin-bottom:2.8571429em}.prose-sm :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-sm :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-sm :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-sm :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-sm :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8571429em;line-height:1.5}.prose-sm :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:1em;padding-bottom:.6666667em;padding-inline-start:1em}.prose-sm :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose-sm :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose-sm :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.6666667em;padding-inline-end:1em;padding-bottom:.6666667em;padding-inline-start:1em}.prose-sm :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose-sm :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose-sm :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7142857em;margin-bottom:1.7142857em}.prose-sm :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose-sm :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8571429em;line-height:1.3333333;margin-top:.6666667em}.prose-sm :where(.prose-sm>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-sm :where(.prose-sm>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.invisible{visibility:hidden}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.-inset-4{top:-1rem;right:-1rem;bottom:-1rem;left:-1rem}.inset-0{top:0;right:0;bottom:0;left:0}.inset-x-0{left:0;right:0}.inset-y-0{top:0;bottom:0}.-bottom-10{bottom:-2.5rem}.-bottom-12{bottom:-3rem}.-bottom-40{bottom:-10rem}.-left-10{left:-2.5rem}.-left-12{left:-3rem}.-left-40{left:-10rem}.-right-1{right:-.25rem}.-right-10{right:-2.5rem}.-right-12{right:-3rem}.-right-40{right:-10rem}.-top-1{top:-.25rem}.-top-10{top:-2.5rem}.-top-12{top:-3rem}.-top-40{top:-10rem}.bottom-0{bottom:0}.bottom-10{bottom:2.5rem}.bottom-20{bottom:5rem}.bottom-24{bottom:6rem}.bottom-4{bottom:1rem}.bottom-\\[-10\\%\\]{bottom:-10%}.bottom-\\[-20\\%\\]{bottom:-20%}.left-0{left:0}.left-1{left:.25rem}.left-1\\/2{left:50%}.left-10{left:2.5rem}.left-2{left:.5rem}.left-3{left:.75rem}.left-4{left:1rem}.left-\\[-10\\%\\]{left:-10%}.left-\\[50\\%\\]{left:50%}.right-0{right:0}.right-1{right:.25rem}.right-2{right:.5rem}.right-20{right:5rem}.right-3{right:.75rem}.right-4{right:1rem}.right-\\[-10\\%\\]{right:-10%}.top-0{top:0}.top-1\\.5{top:.375rem}.top-1\\/2{top:50%}.top-2{top:.5rem}.top-3\\.5{top:.875rem}.top-4{top:1rem}.top-40{top:10rem}.top-\\[-10\\%\\]{top:-10%}.top-\\[-20\\%\\]{top:-20%}.top-\\[1px\\]{top:1px}.top-\\[50\\%\\]{top:50%}.top-\\[60\\%\\]{top:60%}.top-full{top:100%}.-z-10{z-index:-10}.z-0{z-index:0}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.z-\\[100\\]{z-index:100}.z-\\[1\\]{z-index:1}.z-\\[60\\]{z-index:60}.order-1{order:1}.order-2{order:2}.col-span-2{grid-column:span 2 / span 2}.col-span-full{grid-column:1 / -1}.m-0{margin:0}.-mx-1{margin-left:-.25rem;margin-right:-.25rem}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-2{margin-left:.5rem;margin-right:.5rem}.mx-3\\.5{margin-left:.875rem;margin-right:.875rem}.mx-6{margin-left:1.5rem;margin-right:1.5rem}.mx-auto{margin-left:auto;margin-right:auto}.my-0\\.5{margin-top:.125rem;margin-bottom:.125rem}.my-1{margin-top:.25rem;margin-bottom:.25rem}.-ml-4{margin-left:-1rem}.-mr-16{margin-right:-4rem}.-mr-4{margin-right:-1rem}.-mt-16{margin-top:-4rem}.-mt-4{margin-top:-1rem}.mb-1{margin-bottom:.25rem}.mb-10{margin-bottom:2.5rem}.mb-12{margin-bottom:3rem}.mb-16{margin-bottom:4rem}.mb-2{margin-bottom:.5rem}.mb-24{margin-bottom:6rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-0\\.5{margin-left:.125rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.ml-auto{margin-left:auto}.mr-1{margin-right:.25rem}.mr-1\\.5{margin-right:.375rem}.mr-2{margin-right:.5rem}.mr-2\\.5{margin-right:.625rem}.mr-3{margin-right:.75rem}.mr-4{margin-right:1rem}.mt-0{margin-top:0}.mt-0\\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-1\\.5{margin-top:.375rem}.mt-10{margin-top:2.5rem}.mt-12{margin-top:3rem}.mt-2{margin-top:.5rem}.mt-20{margin-top:5rem}.mt-24{margin-top:6rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-5{margin-top:1.25rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mt-auto{margin-top:auto}.line-clamp-1{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.line-clamp-2{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.aspect-\\[9\\/16\\]{aspect-ratio:9/16}.aspect-square{aspect-ratio:1 / 1}.aspect-video{aspect-ratio:16 / 9}.size-4{width:1rem;height:1rem}.h-1\\.5{height:.375rem}.h-10{height:2.5rem}.h-11{height:2.75rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-16{height:4rem}.h-2{height:.5rem}.h-2\\.5{height:.625rem}.h-20{height:5rem}.h-24{height:6rem}.h-3{height:.75rem}.h-3\\.5{height:.875rem}.h-32{height:8rem}.h-4{height:1rem}.h-40{height:10rem}.h-48{height:12rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-60{height:15rem}.h-64{height:16rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-96{height:24rem}.h-\\[120\\%\\]{height:120%}.h-\\[1px\\]{height:1px}.h-\\[300px\\]{height:300px}.h-\\[400px\\]{height:400px}.h-\\[50\\%\\]{height:50%}.h-\\[500px\\]{height:500px}.h-\\[50vh\\]{height:50vh}.h-\\[60vh\\]{height:60vh}.h-\\[650px\\]{height:650px}.h-\\[80vh\\]{height:80vh}.h-\\[90vh\\]{height:90vh}.h-\\[calc\\(100vh-320px\\)\\]{height:calc(100vh - 320px)}.h-\\[var\\(--radix-navigation-menu-viewport-height\\)\\]{height:var(--radix-navigation-menu-viewport-height)}.h-\\[var\\(--radix-select-trigger-height\\)\\]{height:var(--radix-select-trigger-height)}.h-auto{height:auto}.h-full{height:100%}.h-px{height:1px}.h-screen{height:100vh}.h-svh{height:100svh}.max-h-60{max-height:15rem}.max-h-\\[--radix-context-menu-content-available-height\\]{max-height:var(--radix-context-menu-content-available-height)}.max-h-\\[--radix-select-content-available-height\\]{max-height:var(--radix-select-content-available-height)}.max-h-\\[300px\\]{max-height:300px}.max-h-\\[60vh\\]{max-height:60vh}.max-h-\\[70vh\\]{max-height:70vh}.max-h-\\[80vh\\]{max-height:80vh}.max-h-\\[85vh\\]{max-height:85vh}.max-h-\\[90vh\\]{max-height:90vh}.max-h-\\[var\\(--radix-dropdown-menu-content-available-height\\)\\]{max-height:var(--radix-dropdown-menu-content-available-height)}.max-h-screen{max-height:100vh}.min-h-0{min-height:0px}.min-h-10{min-height:2.5rem}.min-h-20{min-height:5rem}.min-h-24{min-height:6rem}.min-h-8{min-height:2rem}.min-h-9{min-height:2.25rem}.min-h-\\[100px\\]{min-height:100px}.min-h-\\[120px\\]{min-height:120px}.min-h-\\[220px\\]{min-height:220px}.min-h-\\[3rem\\]{min-height:3rem}.min-h-\\[400px\\]{min-height:400px}.min-h-\\[80px\\]{min-height:80px}.min-h-screen{min-height:100vh}.min-h-svh{min-height:100svh}.w-0{width:0px}.w-1{width:.25rem}.w-1\\.5{width:.375rem}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-14{width:3.5rem}.w-16{width:4rem}.w-2{width:.5rem}.w-2\\.5{width:.625rem}.w-2\\/3{width:66.666667%}.w-20{width:5rem}.w-24{width:6rem}.w-3{width:.75rem}.w-3\\.5{width:.875rem}.w-3\\/4{width:75%}.w-32{width:8rem}.w-4{width:1rem}.w-4\\/6{width:66.666667%}.w-40{width:10rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-5\\/6{width:83.333333%}.w-56{width:14rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-7{width:1.75rem}.w-72{width:18rem}.w-8{width:2rem}.w-80{width:20rem}.w-9{width:2.25rem}.w-96{width:24rem}.w-\\[100px\\]{width:100px}.w-\\[120\\%\\]{width:120%}.w-\\[1px\\]{width:1px}.w-\\[50\\%\\]{width:50%}.w-\\[500px\\]{width:500px}.w-\\[calc\\(100\\%-48px\\)\\]{width:calc(100% - 48px)}.w-\\[var\\(--sidebar-width\\)\\]{width:var(--sidebar-width)}.w-auto{width:auto}.w-fit{width:-moz-fit-content;width:fit-content}.w-full{width:100%}.w-max{width:-moz-max-content;width:max-content}.w-px{width:1px}.min-w-0{min-width:0px}.min-w-10{min-width:2.5rem}.min-w-11{min-width:2.75rem}.min-w-48{min-width:12rem}.min-w-5{min-width:1.25rem}.min-w-9{min-width:2.25rem}.min-w-\\[1\\.5rem\\]{min-width:1.5rem}.min-w-\\[12rem\\]{min-width:12rem}.min-w-\\[4rem\\]{min-width:4rem}.min-w-\\[60px\\]{min-width:60px}.min-w-\\[80px\\]{min-width:80px}.min-w-\\[8rem\\]{min-width:8rem}.min-w-\\[var\\(--radix-select-trigger-width\\)\\]{min-width:var(--radix-select-trigger-width)}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-5xl{max-width:64rem}.max-w-6xl{max-width:72rem}.max-w-7xl{max-width:80rem}.max-w-\\[180px\\]{max-width:180px}.max-w-\\[280px\\]{max-width:280px}.max-w-\\[80\\%\\]{max-width:80%}.max-w-\\[var\\(--skeleton-width\\)\\]{max-width:var(--skeleton-width)}.max-w-lg{max-width:32rem}.max-w-max{max-width:-moz-max-content;max-width:max-content}.max-w-md{max-width:28rem}.max-w-none{max-width:none}.max-w-screen-xl{max-width:1280px}.max-w-sm{max-width:24rem}.max-w-xl{max-width:36rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.flex-shrink-0,.shrink-0{flex-shrink:0}.grow{flex-grow:1}.grow-0{flex-grow:0}.basis-full{flex-basis:100%}.caption-bottom{caption-side:bottom}.border-collapse{border-collapse:collapse}.origin-\\[--radix-context-menu-content-transform-origin\\]{transform-origin:var(--radix-context-menu-content-transform-origin)}.origin-\\[--radix-dropdown-menu-content-transform-origin\\]{transform-origin:var(--radix-dropdown-menu-content-transform-origin)}.origin-\\[--radix-hover-card-content-transform-origin\\]{transform-origin:var(--radix-hover-card-content-transform-origin)}.origin-\\[--radix-menubar-content-transform-origin\\]{transform-origin:var(--radix-menubar-content-transform-origin)}.origin-\\[--radix-popover-content-transform-origin\\]{transform-origin:var(--radix-popover-content-transform-origin)}.origin-\\[--radix-select-content-transform-origin\\]{transform-origin:var(--radix-select-content-transform-origin)}.origin-\\[--radix-tooltip-content-transform-origin\\]{transform-origin:var(--radix-tooltip-content-transform-origin)}.origin-left{transform-origin:left}.-translate-x-1\\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-2{--tw-translate-x: -.5rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-px{--tw-translate-x: -1px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-1\\/2{--tw-translate-x: 50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-\\[-50\\%\\]{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-px{--tw-translate-x: 1px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-1\\/2{--tw-translate-y: 50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-\\[-50\\%\\]{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-12{--tw-rotate: 12deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-3{--tw-rotate: 3deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate: 45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-105{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-110{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes bounce{0%,to{transform:translateY(-25%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,.2,1)}}.animate-bounce{animation:bounce 1s infinite}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.touch-none{touch-action:none}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize-none{resize:none}.list-none{list-style-type:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-row-reverse{flex-direction:row-reverse}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.flex-wrap{flex-wrap:wrap}.flex-nowrap{flex-wrap:nowrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.items-baseline{align-items:baseline}.items-stretch{align-items:stretch}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-around{justify-content:space-around}.gap-1{gap:.25rem}.gap-1\\.5{gap:.375rem}.gap-10{gap:2.5rem}.gap-12{gap:3rem}.gap-2{gap:.5rem}.gap-20{gap:5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-5{gap:1.25rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-x-1>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.25rem * var(--tw-space-x-reverse));margin-left:calc(.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.space-y-0\\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.125rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.125rem * var(--tw-space-y-reverse))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-1\\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.375rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.375rem * var(--tw-space-y-reverse))}.space-y-10>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2.5rem * var(--tw-space-y-reverse))}.space-y-12>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(3rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(3rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.25rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.break-words{overflow-wrap:break-word}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-3xl,.rounded-\\[1\\.5rem\\]{border-radius:1.5rem}.rounded-\\[2\\.5rem\\]{border-radius:2.5rem}.rounded-\\[2px\\]{border-radius:2px}.rounded-\\[2rem\\]{border-radius:2rem}.rounded-\\[3rem\\]{border-radius:3rem}.rounded-\\[inherit\\]{border-radius:inherit}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5625rem}.rounded-md{border-radius:.375rem}.rounded-sm{border-radius:.1875rem}.rounded-xl{border-radius:.75rem}.rounded-b-3xl{border-bottom-right-radius:1.5rem;border-bottom-left-radius:1.5rem}.rounded-t-\\[10px\\]{border-top-left-radius:10px;border-top-right-radius:10px}.rounded-bl-full{border-bottom-left-radius:9999px}.rounded-tl-none{border-top-left-radius:0}.rounded-tl-sm{border-top-left-radius:.1875rem}.rounded-tr-full{border-top-right-radius:9999px}.rounded-tr-none{border-top-right-radius:0}.border{border-width:1px}.border-0{border-width:0px}.border-2{border-width:2px}.border-4{border-width:4px}.border-8{border-width:8px}.border-\\[1\\.5px\\]{border-width:1.5px}.border-y{border-top-width:1px;border-bottom-width:1px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-l-2{border-left-width:2px}.border-l-4{border-left-width:4px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-none{border-style:none}.border-\\[--color-border\\]{border-color:var(--color-border)}.border-amber-100{--tw-border-opacity: 1;border-color:rgb(254 243 199 / var(--tw-border-opacity, 1))}.border-amber-200{--tw-border-opacity: 1;border-color:rgb(253 230 138 / var(--tw-border-opacity, 1))}.border-amber-500\\/10{border-color:#f59e0b1a}.border-amber-500\\/15{border-color:#f59e0b26}.border-amber-500\\/20{border-color:#f59e0b33}.border-background{--tw-border-opacity: 1;border-color:hsl(var(--background) / var(--tw-border-opacity, 1))}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-500\\/20{border-color:#3b82f633}.border-border{--tw-border-opacity: 1;border-color:hsl(var(--border) / var(--tw-border-opacity, 1))}.border-border\\/30{border-color:hsl(var(--border) / .3)}.border-border\\/50{border-color:hsl(var(--border) / .5)}.border-card-border{--tw-border-opacity: 1;border-color:hsl(var(--card-border) / var(--tw-border-opacity, 1))}.border-current{border-color:currentColor}.border-destructive{--tw-border-opacity: 1;border-color:hsl(var(--destructive) / var(--tw-border-opacity, 1))}.border-destructive-border{border-color:var(--destructive-border)}.border-destructive\\/20{border-color:hsl(var(--destructive) / .2)}.border-destructive\\/50{border-color:hsl(var(--destructive) / .5)}.border-emerald-500\\/20{border-color:#10b98133}.border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-green-100{--tw-border-opacity: 1;border-color:rgb(220 252 231 / var(--tw-border-opacity, 1))}.border-green-200{--tw-border-opacity: 1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1))}.border-green-500\\/20{border-color:#22c55e33}.border-green-500\\/30{border-color:#22c55e4d}.border-input{--tw-border-opacity: 1;border-color:hsl(var(--input) / var(--tw-border-opacity, 1))}.border-muted-foreground\\/10{border-color:hsl(var(--muted-foreground) / .1)}.border-orange-200{--tw-border-opacity: 1;border-color:rgb(254 215 170 / var(--tw-border-opacity, 1))}.border-orange-500\\/20{border-color:#f9731633}.border-pink-100{--tw-border-opacity: 1;border-color:rgb(252 231 243 / var(--tw-border-opacity, 1))}.border-pink-500\\/20{border-color:#ec489933}.border-primary{--tw-border-opacity: 1;border-color:hsl(var(--primary) / var(--tw-border-opacity, 1))}.border-primary-border{border-color:var(--primary-border)}.border-primary-foreground\\/20{border-color:hsl(var(--primary-foreground) / .2)}.border-primary\\/10{border-color:hsl(var(--primary) / .1)}.border-primary\\/20{border-color:hsl(var(--primary) / .2)}.border-primary\\/30{border-color:hsl(var(--primary) / .3)}.border-primary\\/5{border-color:hsl(var(--primary) / .05)}.border-purple-500\\/20{border-color:#a855f733}.border-secondary-border{border-color:var(--secondary-border)}.border-sidebar-border{--tw-border-opacity: 1;border-color:hsl(var(--sidebar-border) / var(--tw-border-opacity, 1))}.border-sidebar-border\\/50{border-color:hsl(var(--sidebar-border) / .5)}.border-transparent{border-color:transparent}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.border-white\\/10{border-color:#ffffff1a}.border-white\\/20{border-color:#fff3}.border-white\\/5{border-color:#ffffff0d}.border-white\\/50{border-color:#ffffff80}.border-yellow-500\\/20{border-color:#eab30833}.border-b-border\\/30{border-bottom-color:hsl(var(--border) / .3)}.border-l-red-500{--tw-border-opacity: 1;border-left-color:rgb(239 68 68 / var(--tw-border-opacity, 1))}.border-l-transparent{border-left-color:transparent}.border-t-transparent{border-top-color:transparent}.bg-\\[\\#1a1a2e\\]{--tw-bg-opacity: 1;background-color:rgb(26 26 46 / var(--tw-bg-opacity, 1))}.bg-\\[\\#f4ecd8\\]{--tw-bg-opacity: 1;background-color:rgb(244 236 216 / var(--tw-bg-opacity, 1))}.bg-\\[\\#faf9f6\\]{--tw-bg-opacity: 1;background-color:rgb(250 249 246 / var(--tw-bg-opacity, 1))}.bg-\\[--color-bg\\]{background-color:var(--color-bg)}.bg-accent{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.bg-accent\\/30{background-color:hsl(var(--accent) / .3)}.bg-amber-400{--tw-bg-opacity: 1;background-color:rgb(251 191 36 / var(--tw-bg-opacity, 1))}.bg-amber-500{--tw-bg-opacity: 1;background-color:rgb(245 158 11 / var(--tw-bg-opacity, 1))}.bg-amber-500\\/10{background-color:#f59e0b1a}.bg-amber-500\\/20{background-color:#f59e0b33}.bg-amber-500\\/5{background-color:#f59e0b0d}.bg-background{--tw-bg-opacity: 1;background-color:hsl(var(--background) / var(--tw-bg-opacity, 1))}.bg-background\\/40{background-color:hsl(var(--background) / .4)}.bg-background\\/50{background-color:hsl(var(--background) / .5)}.bg-background\\/80{background-color:hsl(var(--background) / .8)}.bg-background\\/90{background-color:hsl(var(--background) / .9)}.bg-background\\/95{background-color:hsl(var(--background) / .95)}.bg-black\\/20{background-color:#0003}.bg-black\\/50{background-color:#00000080}.bg-black\\/80{background-color:#000c}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-200{--tw-bg-opacity: 1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.bg-blue-200\\/50{background-color:#bfdbfe80}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-500\\/10{background-color:#3b82f61a}.bg-blue-500\\/5{background-color:#3b82f60d}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-blue-800{--tw-bg-opacity: 1;background-color:rgb(30 64 175 / var(--tw-bg-opacity, 1))}.bg-border{--tw-bg-opacity: 1;background-color:hsl(var(--border) / var(--tw-bg-opacity, 1))}.bg-card{--tw-bg-opacity: 1;background-color:hsl(var(--card) / var(--tw-bg-opacity, 1))}.bg-card\\/10{background-color:hsl(var(--card) / .1)}.bg-card\\/20{background-color:hsl(var(--card) / .2)}.bg-card\\/40{background-color:hsl(var(--card) / .4)}.bg-card\\/5{background-color:hsl(var(--card) / .05)}.bg-card\\/50{background-color:hsl(var(--card) / .5)}.bg-card\\/80{background-color:hsl(var(--card) / .8)}.bg-card\\/90{background-color:hsl(var(--card) / .9)}.bg-card\\/95{background-color:hsl(var(--card) / .95)}.bg-destructive{--tw-bg-opacity: 1;background-color:hsl(var(--destructive) / var(--tw-bg-opacity, 1))}.bg-destructive\\/10{background-color:hsl(var(--destructive) / .1)}.bg-destructive\\/60{background-color:hsl(var(--destructive) / .6)}.bg-emerald-500\\/10{background-color:#10b9811a}.bg-emerald-500\\/15{background-color:#10b98126}.bg-foreground{--tw-bg-opacity: 1;background-color:hsl(var(--foreground) / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-200{--tw-bg-opacity: 1;background-color:rgb(187 247 208 / var(--tw-bg-opacity, 1))}.bg-green-200\\/50{background-color:#bbf7d080}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-500\\/10{background-color:#22c55e1a}.bg-green-500\\/20{background-color:#22c55e33}.bg-muted{--tw-bg-opacity: 1;background-color:hsl(var(--muted) / var(--tw-bg-opacity, 1))}.bg-muted-foreground{--tw-bg-opacity: 1;background-color:hsl(var(--muted-foreground) / var(--tw-bg-opacity, 1))}.bg-muted-foreground\\/10{background-color:hsl(var(--muted-foreground) / .1)}.bg-muted\\/10{background-color:hsl(var(--muted) / .1)}.bg-muted\\/20{background-color:hsl(var(--muted) / .2)}.bg-muted\\/30{background-color:hsl(var(--muted) / .3)}.bg-muted\\/40{background-color:hsl(var(--muted) / .4)}.bg-muted\\/50{background-color:hsl(var(--muted) / .5)}.bg-muted\\/80{background-color:hsl(var(--muted) / .8)}.bg-orange-100{--tw-bg-opacity: 1;background-color:rgb(255 237 213 / var(--tw-bg-opacity, 1))}.bg-orange-200{--tw-bg-opacity: 1;background-color:rgb(254 215 170 / var(--tw-bg-opacity, 1))}.bg-orange-200\\/50{background-color:#fed7aa80}.bg-orange-500{--tw-bg-opacity: 1;background-color:rgb(249 115 22 / var(--tw-bg-opacity, 1))}.bg-orange-500\\/10{background-color:#f973161a}.bg-orange-600{--tw-bg-opacity: 1;background-color:rgb(234 88 12 / var(--tw-bg-opacity, 1))}.bg-pink-200{--tw-bg-opacity: 1;background-color:rgb(251 207 232 / var(--tw-bg-opacity, 1))}.bg-pink-200\\/50{background-color:#fbcfe880}.bg-pink-500{--tw-bg-opacity: 1;background-color:rgb(236 72 153 / var(--tw-bg-opacity, 1))}.bg-pink-500\\/10{background-color:#ec48991a}.bg-popover{--tw-bg-opacity: 1;background-color:hsl(var(--popover) / var(--tw-bg-opacity, 1))}.bg-primary{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.bg-primary-foreground\\/10{background-color:hsl(var(--primary-foreground) / .1)}.bg-primary\\/10{background-color:hsl(var(--primary) / .1)}.bg-primary\\/20{background-color:hsl(var(--primary) / .2)}.bg-primary\\/30{background-color:hsl(var(--primary) / .3)}.bg-primary\\/40{background-color:hsl(var(--primary) / .4)}.bg-primary\\/5{background-color:hsl(var(--primary) / .05)}.bg-primary\\/60{background-color:hsl(var(--primary) / .6)}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-purple-200{--tw-bg-opacity: 1;background-color:rgb(233 213 255 / var(--tw-bg-opacity, 1))}.bg-purple-200\\/50{background-color:#e9d5ff80}.bg-purple-500{--tw-bg-opacity: 1;background-color:rgb(168 85 247 / var(--tw-bg-opacity, 1))}.bg-purple-500\\/10{background-color:#a855f71a}.bg-purple-600{--tw-bg-opacity: 1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-red-500\\/10{background-color:#ef44441a}.bg-red-500\\/5{background-color:#ef44440d}.bg-rose-100{--tw-bg-opacity: 1;background-color:rgb(255 228 230 / var(--tw-bg-opacity, 1))}.bg-rose-600{--tw-bg-opacity: 1;background-color:rgb(225 29 72 / var(--tw-bg-opacity, 1))}.bg-secondary{--tw-bg-opacity: 1;background-color:hsl(var(--secondary) / var(--tw-bg-opacity, 1))}.bg-sidebar{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar) / var(--tw-bg-opacity, 1))}.bg-sidebar-border{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar-border) / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\\/20{background-color:#fff3}.bg-white\\/80{background-color:#fffc}.bg-yellow-200{--tw-bg-opacity: 1;background-color:rgb(254 240 138 / var(--tw-bg-opacity, 1))}.bg-yellow-200\\/50{background-color:#fef08a80}.bg-yellow-500{--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-yellow-500\\/10{background-color:#eab3081a}.bg-\\[radial-gradient\\(circle_at_center\\,_var\\(--tw-gradient-stops\\)\\)\\]{background-image:radial-gradient(circle at center,var(--tw-gradient-stops))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.bg-gradient-to-bl{background-image:linear-gradient(to bottom left,var(--tw-gradient-stops))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.bg-gradient-to-l{background-image:linear-gradient(to left,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.bg-gradient-to-t{background-image:linear-gradient(to top,var(--tw-gradient-stops))}.bg-gradient-to-tr{background-image:linear-gradient(to top right,var(--tw-gradient-stops))}.from-\\[\\#6c5dd3\\]{--tw-gradient-from: #6c5dd3 var(--tw-gradient-from-position);--tw-gradient-to: rgb(108 93 211 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-400{--tw-gradient-from: #fbbf24 var(--tw-gradient-from-position);--tw-gradient-to: rgb(251 191 36 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-500{--tw-gradient-from: #f59e0b var(--tw-gradient-from-position);--tw-gradient-to: rgb(245 158 11 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-500\\/10{--tw-gradient-from: rgb(245 158 11 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(245 158 11 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-500\\/15{--tw-gradient-from: rgb(245 158 11 / .15) var(--tw-gradient-from-position);--tw-gradient-to: rgb(245 158 11 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-500\\/20{--tw-gradient-from: rgb(245 158 11 / .2) var(--tw-gradient-from-position);--tw-gradient-to: rgb(245 158 11 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-500\\/5{--tw-gradient-from: rgb(245 158 11 / .05) var(--tw-gradient-from-position);--tw-gradient-to: rgb(245 158 11 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-background{--tw-gradient-from: hsl(var(--background) / 1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--background) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-black\\/60{--tw-gradient-from: rgb(0 0 0 / .6) var(--tw-gradient-from-position);--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-400{--tw-gradient-from: #60a5fa var(--tw-gradient-from-position);--tw-gradient-to: rgb(96 165 250 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500{--tw-gradient-from: #3b82f6 var(--tw-gradient-from-position);--tw-gradient-to: rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500\\/10{--tw-gradient-from: rgb(59 130 246 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500\\/15{--tw-gradient-from: rgb(59 130 246 / .15) var(--tw-gradient-from-position);--tw-gradient-to: rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-600{--tw-gradient-from: #2563eb var(--tw-gradient-from-position);--tw-gradient-to: rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-600\\/5{--tw-gradient-from: rgb(37 99 235 / .05) var(--tw-gradient-from-position);--tw-gradient-to: rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-700{--tw-gradient-from: #1d4ed8 var(--tw-gradient-from-position);--tw-gradient-to: rgb(29 78 216 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-800{--tw-gradient-from: #1e40af var(--tw-gradient-from-position);--tw-gradient-to: rgb(30 64 175 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-cyan-500{--tw-gradient-from: #06b6d4 var(--tw-gradient-from-position);--tw-gradient-to: rgb(6 182 212 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-cyan-600{--tw-gradient-from: #0891b2 var(--tw-gradient-from-position);--tw-gradient-to: rgb(8 145 178 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-400{--tw-gradient-from: #34d399 var(--tw-gradient-from-position);--tw-gradient-to: rgb(52 211 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-500{--tw-gradient-from: #10b981 var(--tw-gradient-from-position);--tw-gradient-to: rgb(16 185 129 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-500\\/10{--tw-gradient-from: rgb(16 185 129 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(16 185 129 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-500\\/15{--tw-gradient-from: rgb(16 185 129 / .15) var(--tw-gradient-from-position);--tw-gradient-to: rgb(16 185 129 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-600{--tw-gradient-from: #059669 var(--tw-gradient-from-position);--tw-gradient-to: rgb(5 150 105 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-foreground{--tw-gradient-from: hsl(var(--foreground) / 1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--foreground) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-500{--tw-gradient-from: #22c55e var(--tw-gradient-from-position);--tw-gradient-to: rgb(34 197 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-500\\/10{--tw-gradient-from: rgb(34 197 94 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(34 197 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-500\\/15{--tw-gradient-from: rgb(34 197 94 / .15) var(--tw-gradient-from-position);--tw-gradient-to: rgb(34 197 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-500\\/20{--tw-gradient-from: rgb(34 197 94 / .2) var(--tw-gradient-from-position);--tw-gradient-to: rgb(34 197 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-400{--tw-gradient-from: #818cf8 var(--tw-gradient-from-position);--tw-gradient-to: rgb(129 140 248 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-50{--tw-gradient-from: #eef2ff var(--tw-gradient-from-position);--tw-gradient-to: rgb(238 242 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-500{--tw-gradient-from: #6366f1 var(--tw-gradient-from-position);--tw-gradient-to: rgb(99 102 241 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-500\\/10{--tw-gradient-from: rgb(99 102 241 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(99 102 241 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-500\\/15{--tw-gradient-from: rgb(99 102 241 / .15) var(--tw-gradient-from-position);--tw-gradient-to: rgb(99 102 241 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-600{--tw-gradient-from: #4f46e5 var(--tw-gradient-from-position);--tw-gradient-to: rgb(79 70 229 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-900{--tw-gradient-from: #312e81 var(--tw-gradient-from-position);--tw-gradient-to: rgb(49 46 129 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-950{--tw-gradient-from: #1e1b4b var(--tw-gradient-from-position);--tw-gradient-to: rgb(30 27 75 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-muted{--tw-gradient-from: hsl(var(--muted) / 1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--muted) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-muted-foreground{--tw-gradient-from: hsl(var(--muted-foreground) / 1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--muted-foreground) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-400{--tw-gradient-from: #fb923c var(--tw-gradient-from-position);--tw-gradient-to: rgb(251 146 60 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-500{--tw-gradient-from: #f97316 var(--tw-gradient-from-position);--tw-gradient-to: rgb(249 115 22 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-600{--tw-gradient-from: #ea580c var(--tw-gradient-from-position);--tw-gradient-to: rgb(234 88 12 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-pink-500\\/5{--tw-gradient-from: rgb(236 72 153 / .05) var(--tw-gradient-from-position);--tw-gradient-to: rgb(236 72 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary{--tw-gradient-from: hsl(var(--primary) / 1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary\\/10{--tw-gradient-from: hsl(var(--primary) / .1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary\\/20{--tw-gradient-from: hsl(var(--primary) / .2) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary\\/5{--tw-gradient-from: hsl(var(--primary) / .05) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary\\/80{--tw-gradient-from: hsl(var(--primary) / .8) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-500{--tw-gradient-from: #a855f7 var(--tw-gradient-from-position);--tw-gradient-to: rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-600{--tw-gradient-from: #9333ea var(--tw-gradient-from-position);--tw-gradient-to: rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-500{--tw-gradient-from: #f43f5e var(--tw-gradient-from-position);--tw-gradient-to: rgb(244 63 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-500\\/10{--tw-gradient-from: rgb(244 63 94 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(244 63 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-500\\/15{--tw-gradient-from: rgb(244 63 94 / .15) var(--tw-gradient-from-position);--tw-gradient-to: rgb(244 63 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-500\\/20{--tw-gradient-from: rgb(244 63 94 / .2) var(--tw-gradient-from-position);--tw-gradient-to: rgb(244 63 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-600{--tw-gradient-from: #e11d48 var(--tw-gradient-from-position);--tw-gradient-to: rgb(225 29 72 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-slate-300{--tw-gradient-from: #cbd5e1 var(--tw-gradient-from-position);--tw-gradient-to: rgb(203 213 225 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-slate-400{--tw-gradient-from: #94a3b8 var(--tw-gradient-from-position);--tw-gradient-to: rgb(148 163 184 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-slate-500{--tw-gradient-from: #64748b var(--tw-gradient-from-position);--tw-gradient-to: rgb(100 116 139 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-teal-500{--tw-gradient-from: #14b8a6 var(--tw-gradient-from-position);--tw-gradient-to: rgb(20 184 166 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-transparent{--tw-gradient-from: transparent var(--tw-gradient-from-position);--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-violet-500{--tw-gradient-from: #8b5cf6 var(--tw-gradient-from-position);--tw-gradient-to: rgb(139 92 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-white{--tw-gradient-from: #fff var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-white\\/20{--tw-gradient-from: rgb(255 255 255 / .2) var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-white\\/5{--tw-gradient-from: rgb(255 255 255 / .05) var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.via-amber-400{--tw-gradient-to: rgb(251 191 36 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #fbbf24 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-background{--tw-gradient-to: hsl(var(--background) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--background) / 1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-background\\/95{--tw-gradient-to: hsl(var(--background) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--background) / .95) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-card{--tw-gradient-to: hsl(var(--card) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--card) / 1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-green-500\\/5{--tw-gradient-to: rgb(34 197 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(34 197 94 / .05) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-indigo-500{--tw-gradient-to: rgb(99 102 241 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #6366f1 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-indigo-500\\/10{--tw-gradient-to: rgb(99 102 241 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(99 102 241 / .1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-indigo-600{--tw-gradient-to: rgb(79 70 229 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #4f46e5 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-indigo-700{--tw-gradient-to: rgb(67 56 202 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #4338ca var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-muted-foreground{--tw-gradient-to: hsl(var(--muted-foreground) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--muted-foreground) / 1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-orange-500\\/10{--tw-gradient-to: rgb(249 115 22 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(249 115 22 / .1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-500\\/10{--tw-gradient-to: rgb(236 72 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(236 72 153 / .1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-500\\/15{--tw-gradient-to: rgb(236 72 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(236 72 153 / .15) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-500\\/5{--tw-gradient-to: rgb(236 72 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(236 72 153 / .05) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-600{--tw-gradient-to: rgb(219 39 119 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #db2777 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-primary{--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--primary) / 1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-primary\\/5{--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--primary) / .05) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-primary\\/80{--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--primary) / .8) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-purple-500{--tw-gradient-to: rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #a855f7 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-purple-500\\/10{--tw-gradient-to: rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(168 85 247 / .1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-purple-500\\/5{--tw-gradient-to: rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(168 85 247 / .05) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-purple-600{--tw-gradient-to: rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #9333ea var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-transparent{--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), transparent var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-\\[\\#ff9e6d\\]{--tw-gradient-to: #ff9e6d var(--tw-gradient-to-position)}.to-accent{--tw-gradient-to: hsl(var(--accent) / 1) var(--tw-gradient-to-position)}.to-accent\\/10{--tw-gradient-to: hsl(var(--accent) / .1) var(--tw-gradient-to-position)}.to-accent\\/20{--tw-gradient-to: hsl(var(--accent) / .2) var(--tw-gradient-to-position)}.to-amber-500{--tw-gradient-to: #f59e0b var(--tw-gradient-to-position)}.to-amber-500\\/10{--tw-gradient-to: rgb(245 158 11 / .1) var(--tw-gradient-to-position)}.to-amber-500\\/50{--tw-gradient-to: rgb(245 158 11 / .5) var(--tw-gradient-to-position)}.to-amber-600{--tw-gradient-to: #d97706 var(--tw-gradient-to-position)}.to-amber-700{--tw-gradient-to: #b45309 var(--tw-gradient-to-position)}.to-amber-950\\/20{--tw-gradient-to: rgb(69 26 3 / .2) var(--tw-gradient-to-position)}.to-background\\/90{--tw-gradient-to: hsl(var(--background) / .9) var(--tw-gradient-to-position)}.to-blue-500\\/20{--tw-gradient-to: rgb(59 130 246 / .2) var(--tw-gradient-to-position)}.to-blue-600{--tw-gradient-to: #2563eb var(--tw-gradient-to-position)}.to-blue-700{--tw-gradient-to: #1d4ed8 var(--tw-gradient-to-position)}.to-blue-800{--tw-gradient-to: #1e40af var(--tw-gradient-to-position)}.to-emerald-500\\/20{--tw-gradient-to: rgb(16 185 129 / .2) var(--tw-gradient-to-position)}.to-emerald-600{--tw-gradient-to: #059669 var(--tw-gradient-to-position)}.to-emerald-700{--tw-gradient-to: #047857 var(--tw-gradient-to-position)}.to-foreground{--tw-gradient-to: hsl(var(--foreground) / 1) var(--tw-gradient-to-position)}.to-green-500\\/5{--tw-gradient-to: rgb(34 197 94 / .05) var(--tw-gradient-to-position)}.to-green-600{--tw-gradient-to: #16a34a var(--tw-gradient-to-position)}.to-indigo-500\\/5{--tw-gradient-to: rgb(99 102 241 / .05) var(--tw-gradient-to-position)}.to-indigo-600{--tw-gradient-to: #4f46e5 var(--tw-gradient-to-position)}.to-indigo-600\\/20{--tw-gradient-to: rgb(79 70 229 / .2) var(--tw-gradient-to-position)}.to-indigo-700{--tw-gradient-to: #4338ca var(--tw-gradient-to-position)}.to-indigo-800{--tw-gradient-to: #3730a3 var(--tw-gradient-to-position)}.to-indigo-900{--tw-gradient-to: #312e81 var(--tw-gradient-to-position)}.to-muted-foreground{--tw-gradient-to: hsl(var(--muted-foreground) / 1) var(--tw-gradient-to-position)}.to-orange-50{--tw-gradient-to: #fff7ed var(--tw-gradient-to-position)}.to-orange-500{--tw-gradient-to: #f97316 var(--tw-gradient-to-position)}.to-orange-500\\/20{--tw-gradient-to: rgb(249 115 22 / .2) var(--tw-gradient-to-position)}.to-orange-500\\/5{--tw-gradient-to: rgb(249 115 22 / .05) var(--tw-gradient-to-position)}.to-orange-600{--tw-gradient-to: #ea580c var(--tw-gradient-to-position)}.to-orange-700{--tw-gradient-to: #c2410c var(--tw-gradient-to-position)}.to-orange-800{--tw-gradient-to: #9a3412 var(--tw-gradient-to-position)}.to-pink-500\\/5{--tw-gradient-to: rgb(236 72 153 / .05) var(--tw-gradient-to-position)}.to-pink-600{--tw-gradient-to: #db2777 var(--tw-gradient-to-position)}.to-pink-700{--tw-gradient-to: #be185d var(--tw-gradient-to-position)}.to-pink-800{--tw-gradient-to: #9d174d var(--tw-gradient-to-position)}.to-primary\\/20{--tw-gradient-to: hsl(var(--primary) / .2) var(--tw-gradient-to-position)}.to-primary\\/5{--tw-gradient-to: hsl(var(--primary) / .05) var(--tw-gradient-to-position)}.to-primary\\/70{--tw-gradient-to: hsl(var(--primary) / .7) var(--tw-gradient-to-position)}.to-purple-500{--tw-gradient-to: #a855f7 var(--tw-gradient-to-position)}.to-purple-500\\/10{--tw-gradient-to: rgb(168 85 247 / .1) var(--tw-gradient-to-position)}.to-purple-500\\/20{--tw-gradient-to: rgb(168 85 247 / .2) var(--tw-gradient-to-position)}.to-purple-500\\/5{--tw-gradient-to: rgb(168 85 247 / .05) var(--tw-gradient-to-position)}.to-purple-600{--tw-gradient-to: #9333ea var(--tw-gradient-to-position)}.to-purple-800{--tw-gradient-to: #6b21a8 var(--tw-gradient-to-position)}.to-purple-900{--tw-gradient-to: #581c87 var(--tw-gradient-to-position)}.to-red-500{--tw-gradient-to: #ef4444 var(--tw-gradient-to-position)}.to-red-700{--tw-gradient-to: #b91c1c var(--tw-gradient-to-position)}.to-red-800{--tw-gradient-to: #991b1b var(--tw-gradient-to-position)}.to-slate-400{--tw-gradient-to: #94a3b8 var(--tw-gradient-to-position)}.to-slate-500{--tw-gradient-to: #64748b var(--tw-gradient-to-position)}.to-slate-700{--tw-gradient-to: #334155 var(--tw-gradient-to-position)}.to-slate-800{--tw-gradient-to: #1e293b var(--tw-gradient-to-position)}.to-teal-500\\/10{--tw-gradient-to: rgb(20 184 166 / .1) var(--tw-gradient-to-position)}.to-teal-500\\/5{--tw-gradient-to: rgb(20 184 166 / .05) var(--tw-gradient-to-position)}.to-teal-600{--tw-gradient-to: #0d9488 var(--tw-gradient-to-position)}.to-teal-700{--tw-gradient-to: #0f766e var(--tw-gradient-to-position)}.to-teal-800{--tw-gradient-to: #115e59 var(--tw-gradient-to-position)}.to-transparent{--tw-gradient-to: transparent var(--tw-gradient-to-position)}.to-violet-600{--tw-gradient-to: #7c3aed var(--tw-gradient-to-position)}.to-yellow-500\\/5{--tw-gradient-to: rgb(234 179 8 / .05) var(--tw-gradient-to-position)}.to-yellow-600{--tw-gradient-to: #ca8a04 var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.fill-amber-500{fill:#f59e0b}.fill-amber-500\\/30{fill:#f59e0b4d}.fill-current{fill:currentColor}.fill-orange-500{fill:#f97316}.fill-pink-600{fill:#db2777}.fill-rose-500{fill:#f43f5e}.fill-white{fill:#fff}.object-cover{-o-object-fit:cover;object-fit:cover}.p-0{padding:0}.p-0\\.5{padding:.125rem}.p-1{padding:.25rem}.p-1\\.5{padding:.375rem}.p-10{padding:2.5rem}.p-12{padding:3rem}.p-2{padding:.5rem}.p-2\\.5{padding:.625rem}.p-20{padding:5rem}.p-3{padding:.75rem}.p-3\\.5{padding:.875rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.p-\\[1px\\]{padding:1px}.px-1{padding-left:.25rem;padding-right:.25rem}.px-10{padding-left:2.5rem;padding-right:2.5rem}.px-12{padding-left:3rem;padding-right:3rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-0{padding-top:0;padding-bottom:0}.py-0\\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\\.5{padding-top:.375rem;padding-bottom:.375rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-16{padding-top:4rem;padding-bottom:4rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-2\\.5{padding-top:.625rem;padding-bottom:.625rem}.py-20{padding-top:5rem;padding-bottom:5rem}.py-24{padding-top:6rem;padding-bottom:6rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-32{padding-top:8rem;padding-bottom:8rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-5{padding-top:1.25rem;padding-bottom:1.25rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-0{padding-bottom:0}.pb-1{padding-bottom:.25rem}.pb-10{padding-bottom:2.5rem}.pb-12{padding-bottom:3rem}.pb-16{padding-bottom:4rem}.pb-2{padding-bottom:.5rem}.pb-3{padding-bottom:.75rem}.pb-32{padding-bottom:8rem}.pb-4{padding-bottom:1rem}.pb-40{padding-bottom:10rem}.pb-5{padding-bottom:1.25rem}.pb-6{padding-bottom:1.5rem}.pb-8{padding-bottom:2rem}.pl-10{padding-left:2.5rem}.pl-11{padding-left:2.75rem}.pl-12{padding-left:3rem}.pl-2\\.5{padding-left:.625rem}.pl-4{padding-left:1rem}.pl-8{padding-left:2rem}.pl-9{padding-left:2.25rem}.pr-10{padding-right:2.5rem}.pr-2{padding-right:.5rem}.pr-2\\.5{padding-right:.625rem}.pr-4{padding-right:1rem}.pr-6{padding-right:1.5rem}.pr-8{padding-right:2rem}.pt-0{padding-top:0}.pt-1{padding-top:.25rem}.pt-10{padding-top:2.5rem}.pt-12{padding-top:3rem}.pt-2{padding-top:.5rem}.pt-20{padding-top:5rem}.pt-3{padding-top:.75rem}.pt-4{padding-top:1rem}.pt-6{padding-top:1.5rem}.pt-8{padding-top:2rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.align-middle{vertical-align:middle}.font-display{font-family:Playfair Display,serif}.font-mono{font-family:var(--font-mono)}.font-sans{font-family:Inter,var(--font-sans)}.font-serif{font-family:Crimson Text,var(--font-serif)}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-5xl{font-size:3rem;line-height:1}.text-6xl{font-size:3.75rem;line-height:1}.text-8xl{font-size:6rem;line-height:1}.text-\\[0\\.65rem\\]{font-size:.65rem}.text-\\[0\\.8rem\\]{font-size:.8rem}.text-\\[10px\\]{font-size:10px}.text-\\[11px\\]{font-size:11px}.text-\\[12px\\]{font-size:12px}.text-\\[8px\\]{font-size:8px}.text-\\[9px\\]{font-size:9px}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-black{font-weight:900}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.lowercase{text-transform:lowercase}.capitalize{text-transform:capitalize}.italic{font-style:italic}.not-italic{font-style:normal}.tabular-nums{--tw-numeric-spacing: tabular-nums;font-variant-numeric:var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)}.leading-none{line-height:1}.leading-relaxed{line-height:1.625}.leading-snug{line-height:1.375}.leading-tight{line-height:1.25}.tracking-\\[0\\.2em\\]{letter-spacing:.2em}.tracking-\\[0\\.3em\\]{letter-spacing:.3em}.tracking-\\[0\\.5em\\]{letter-spacing:.5em}.tracking-tight{letter-spacing:-.025em}.tracking-tighter{letter-spacing:-.05em}.tracking-wide{letter-spacing:.025em}.tracking-wider{letter-spacing:.05em}.tracking-widest{letter-spacing:.1em}.text-\\[\\#333333\\]{--tw-text-opacity: 1;color:rgb(51 51 51 / var(--tw-text-opacity, 1))}.text-\\[\\#4285F4\\]{--tw-text-opacity: 1;color:rgb(66 133 244 / var(--tw-text-opacity, 1))}.text-\\[\\#5c4b37\\]{--tw-text-opacity: 1;color:rgb(92 75 55 / var(--tw-text-opacity, 1))}.text-\\[\\#6c5dd3\\]{--tw-text-opacity: 1;color:rgb(108 93 211 / var(--tw-text-opacity, 1))}.text-\\[\\#e8e8e8\\]{--tw-text-opacity: 1;color:rgb(232 232 232 / var(--tw-text-opacity, 1))}.text-accent-foreground{--tw-text-opacity: 1;color:hsl(var(--accent-foreground) / var(--tw-text-opacity, 1))}.text-amber-400{--tw-text-opacity: 1;color:rgb(251 191 36 / var(--tw-text-opacity, 1))}.text-amber-400\\/60{color:#fbbf2499}.text-amber-500{--tw-text-opacity: 1;color:rgb(245 158 11 / var(--tw-text-opacity, 1))}.text-amber-600{--tw-text-opacity: 1;color:rgb(217 119 6 / var(--tw-text-opacity, 1))}.text-amber-600\\/60{color:#d9770699}.text-amber-700{--tw-text-opacity: 1;color:rgb(180 83 9 / var(--tw-text-opacity, 1))}.text-amber-900{--tw-text-opacity: 1;color:rgb(120 53 15 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-card-foreground{--tw-text-opacity: 1;color:hsl(var(--card-foreground) / var(--tw-text-opacity, 1))}.text-current{color:currentColor}.text-cyan-500{--tw-text-opacity: 1;color:rgb(6 182 212 / var(--tw-text-opacity, 1))}.text-destructive{--tw-text-opacity: 1;color:hsl(var(--destructive) / var(--tw-text-opacity, 1))}.text-destructive-foreground{--tw-text-opacity: 1;color:hsl(var(--destructive-foreground) / var(--tw-text-opacity, 1))}.text-destructive\\/70{color:hsl(var(--destructive) / .7)}.text-emerald-500{--tw-text-opacity: 1;color:rgb(16 185 129 / var(--tw-text-opacity, 1))}.text-emerald-600{--tw-text-opacity: 1;color:rgb(5 150 105 / var(--tw-text-opacity, 1))}.text-emerald-700{--tw-text-opacity: 1;color:rgb(4 120 87 / var(--tw-text-opacity, 1))}.text-foreground{--tw-text-opacity: 1;color:hsl(var(--foreground) / var(--tw-text-opacity, 1))}.text-foreground\\/50{color:hsl(var(--foreground) / .5)}.text-foreground\\/70{color:hsl(var(--foreground) / .7)}.text-foreground\\/80{color:hsl(var(--foreground) / .8)}.text-foreground\\/90{color:hsl(var(--foreground) / .9)}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-green-900{--tw-text-opacity: 1;color:rgb(20 83 45 / var(--tw-text-opacity, 1))}.text-indigo-400{--tw-text-opacity: 1;color:rgb(129 140 248 / var(--tw-text-opacity, 1))}.text-indigo-500{--tw-text-opacity: 1;color:rgb(99 102 241 / var(--tw-text-opacity, 1))}.text-indigo-700{--tw-text-opacity: 1;color:rgb(67 56 202 / var(--tw-text-opacity, 1))}.text-muted-foreground{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.text-muted-foreground\\/60{color:hsl(var(--muted-foreground) / .6)}.text-muted-foreground\\/70{color:hsl(var(--muted-foreground) / .7)}.text-muted-foreground\\/80{color:hsl(var(--muted-foreground) / .8)}.text-orange-400{--tw-text-opacity: 1;color:rgb(251 146 60 / var(--tw-text-opacity, 1))}.text-orange-500{--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-orange-600{--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-orange-700{--tw-text-opacity: 1;color:rgb(194 65 12 / var(--tw-text-opacity, 1))}.text-orange-900{--tw-text-opacity: 1;color:rgb(124 45 18 / var(--tw-text-opacity, 1))}.text-pink-400{--tw-text-opacity: 1;color:rgb(244 114 182 / var(--tw-text-opacity, 1))}.text-pink-500{--tw-text-opacity: 1;color:rgb(236 72 153 / var(--tw-text-opacity, 1))}.text-pink-600{--tw-text-opacity: 1;color:rgb(219 39 119 / var(--tw-text-opacity, 1))}.text-pink-700{--tw-text-opacity: 1;color:rgb(190 24 93 / var(--tw-text-opacity, 1))}.text-pink-900{--tw-text-opacity: 1;color:rgb(131 24 67 / var(--tw-text-opacity, 1))}.text-popover-foreground{--tw-text-opacity: 1;color:hsl(var(--popover-foreground) / var(--tw-text-opacity, 1))}.text-primary{--tw-text-opacity: 1;color:hsl(var(--primary) / var(--tw-text-opacity, 1))}.text-primary-foreground{--tw-text-opacity: 1;color:hsl(var(--primary-foreground) / var(--tw-text-opacity, 1))}.text-primary-foreground\\/70{color:hsl(var(--primary-foreground) / .7)}.text-primary-foreground\\/80{color:hsl(var(--primary-foreground) / .8)}.text-primary\\/30{color:hsl(var(--primary) / .3)}.text-primary\\/40{color:hsl(var(--primary) / .4)}.text-primary\\/60{color:hsl(var(--primary) / .6)}.text-primary\\/70{color:hsl(var(--primary) / .7)}.text-purple-700{--tw-text-opacity: 1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-purple-900{--tw-text-opacity: 1;color:rgb(88 28 135 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-rose-400{--tw-text-opacity: 1;color:rgb(251 113 133 / var(--tw-text-opacity, 1))}.text-rose-500{--tw-text-opacity: 1;color:rgb(244 63 94 / var(--tw-text-opacity, 1))}.text-rose-700{--tw-text-opacity: 1;color:rgb(190 18 60 / var(--tw-text-opacity, 1))}.text-secondary-foreground{--tw-text-opacity: 1;color:hsl(var(--secondary-foreground) / var(--tw-text-opacity, 1))}.text-sidebar-foreground{--tw-text-opacity: 1;color:hsl(var(--sidebar-foreground) / var(--tw-text-opacity, 1))}.text-sidebar-foreground\\/70{color:hsl(var(--sidebar-foreground) / .7)}.text-slate-600{--tw-text-opacity: 1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.text-teal-500{--tw-text-opacity: 1;color:rgb(20 184 166 / var(--tw-text-opacity, 1))}.text-transparent{color:transparent}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-white\\/80{color:#fffc}.text-yellow-500{--tw-text-opacity: 1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.text-yellow-600{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity: 1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.text-yellow-900{--tw-text-opacity: 1;color:rgb(113 63 18 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.decoration-primary\\/10{text-decoration-color:hsl(var(--primary) / .1)}.underline-offset-4{text-underline-offset:4px}.underline-offset-8{text-underline-offset:8px}.opacity-0{opacity:0}.opacity-10{opacity:.1}.opacity-20{opacity:.2}.opacity-30{opacity:.3}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-80{opacity:.8}.opacity-90{opacity:.9}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0_0_1px_hsl\\(var\\(--sidebar-border\\)\\)\\]{--tw-shadow: 0 0 0 1px hsl(var(--sidebar-border));--tw-shadow-colored: 0 0 0 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0_15px_rgba\\(251\\,191\\,36\\,0\\.4\\)\\]{--tw-shadow: 0 0 15px rgba(251,191,36,.4);--tw-shadow-colored: 0 0 15px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0_15px_rgba\\(var\\(--primary\\)\\,0\\.4\\)\\]{--tw-shadow: 0 0 15px rgba(var(--primary),.4);--tw-shadow-colored: 0 0 15px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_20px_50px_rgba\\(0\\,0\\,0\\,0\\.1\\)\\]{--tw-shadow: 0 20px 50px rgba(0,0,0,.1);--tw-shadow-colored: 0 20px 50px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_20px_50px_rgba\\(79\\,70\\,229\\,0\\.3\\)\\]{--tw-shadow: 0 20px 50px rgba(79,70,229,.3);--tw-shadow-colored: 0 20px 50px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_50px_100px_rgba\\(0\\,0\\,0\\,0\\.5\\)\\]{--tw-shadow: 0 50px 100px rgba(0,0,0,.5);--tw-shadow-colored: 0 50px 100px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_50px_100px_rgba\\(79\\,70\\,229\\,0\\.4\\)\\]{--tw-shadow: 0 50px 100px rgba(79,70,229,.4);--tw-shadow-colored: 0 50px 100px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-none{--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-amber-500\\/20{--tw-shadow-color: rgb(245 158 11 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-amber-500\\/25{--tw-shadow-color: rgb(245 158 11 / .25);--tw-shadow: var(--tw-shadow-colored)}.shadow-amber-500\\/30{--tw-shadow-color: rgb(245 158 11 / .3);--tw-shadow: var(--tw-shadow-colored)}.shadow-amber-500\\/50{--tw-shadow-color: rgb(245 158 11 / .5);--tw-shadow: var(--tw-shadow-colored)}.shadow-blue-500\\/20{--tw-shadow-color: rgb(59 130 246 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-blue-500\\/30{--tw-shadow-color: rgb(59 130 246 / .3);--tw-shadow: var(--tw-shadow-colored)}.shadow-blue-600\\/50{--tw-shadow-color: rgb(37 99 235 / .5);--tw-shadow: var(--tw-shadow-colored)}.shadow-cyan-500\\/20{--tw-shadow-color: rgb(6 182 212 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-destructive\\/20{--tw-shadow-color: hsl(var(--destructive) / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-emerald-500\\/20{--tw-shadow-color: rgb(16 185 129 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-green-500\\/20{--tw-shadow-color: rgb(34 197 94 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-green-500\\/30{--tw-shadow-color: rgb(34 197 94 / .3);--tw-shadow: var(--tw-shadow-colored)}.shadow-indigo-500\\/50{--tw-shadow-color: rgb(99 102 241 / .5);--tw-shadow: var(--tw-shadow-colored)}.shadow-primary\\/10{--tw-shadow-color: hsl(var(--primary) / .1);--tw-shadow: var(--tw-shadow-colored)}.shadow-primary\\/20{--tw-shadow-color: hsl(var(--primary) / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-primary\\/30{--tw-shadow-color: hsl(var(--primary) / .3);--tw-shadow: var(--tw-shadow-colored)}.shadow-primary\\/40{--tw-shadow-color: hsl(var(--primary) / .4);--tw-shadow: var(--tw-shadow-colored)}.shadow-purple-500\\/20{--tw-shadow-color: rgb(168 85 247 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-rose-500\\/20{--tw-shadow-color: rgb(244 63 94 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-rose-500\\/30{--tw-shadow-color: rgb(244 63 94 / .3);--tw-shadow: var(--tw-shadow-colored)}.shadow-rose-500\\/40{--tw-shadow-color: rgb(244 63 94 / .4);--tw-shadow: var(--tw-shadow-colored)}.shadow-rose-600\\/50{--tw-shadow-color: rgb(225 29 72 / .5);--tw-shadow: var(--tw-shadow-colored)}.shadow-slate-600\\/50{--tw-shadow-color: rgb(71 85 105 / .5);--tw-shadow: var(--tw-shadow-colored)}.shadow-teal-500\\/30{--tw-shadow-color: rgb(20 184 166 / .3);--tw-shadow: var(--tw-shadow-colored)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.outline-2{outline-width:2px}.outline-offset-2{outline-offset:2px}.outline-transparent{outline-color:transparent}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-4{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-background{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--background) / var(--tw-ring-opacity, 1))}.ring-border{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--border) / var(--tw-ring-opacity, 1))}.ring-green-500\\/20{--tw-ring-color: rgb(34 197 94 / .2)}.ring-green-500\\/50{--tw-ring-color: rgb(34 197 94 / .5)}.ring-primary{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--primary) / var(--tw-ring-opacity, 1))}.ring-primary\\/10{--tw-ring-color: hsl(var(--primary) / .1)}.ring-primary\\/15{--tw-ring-color: hsl(var(--primary) / .15)}.ring-primary\\/20{--tw-ring-color: hsl(var(--primary) / .2)}.ring-ring{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--ring) / var(--tw-ring-opacity, 1))}.ring-sidebar-ring{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--sidebar-ring) / var(--tw-ring-opacity, 1))}.ring-slate-500\\/20{--tw-ring-color: rgb(100 116 139 / .2)}.ring-white\\/10{--tw-ring-color: rgb(255 255 255 / .1)}.ring-offset-background{--tw-ring-offset-color: hsl(var(--background) / 1)}.blur-2xl{--tw-blur: blur(40px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-3xl{--tw-blur: blur(64px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-\\[100px\\]{--tw-blur: blur(100px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-\\[120px\\]{--tw-blur: blur(120px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-\\[150px\\]{--tw-blur: blur(150px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-xl{--tw-blur: blur(24px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-\\[0_0_12px_rgba\\(245\\,158\\,11\\,0\\.7\\)\\]{--tw-drop-shadow: drop-shadow(0 0 12px rgba(245,158,11,.7));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-\\[0_0_20px_rgba\\(251\\,191\\,36\\,0\\.5\\)\\]{--tw-drop-shadow: drop-shadow(0 0 20px rgba(251,191,36,.5));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-md{--tw-drop-shadow: drop-shadow(0 4px 3px rgb(0 0 0 / .07)) drop-shadow(0 2px 2px rgb(0 0 0 / .06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-sm{--tw-drop-shadow: drop-shadow(0 1px 1px rgb(0 0 0 / .05));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.sepia{--tw-sepia: sepia(100%);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur{--tw-backdrop-blur: blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-2xl{--tw-backdrop-blur: blur(40px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-md{--tw-backdrop-blur: blur(12px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-xl{--tw-backdrop-blur: blur(24px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[left\\,right\\,width\\]{transition-property:left,right,width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[margin\\,opacity\\]{transition-property:margin,opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[width\\,height\\,padding\\]{transition-property:width,height,padding;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[width\\]{transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.delay-100{transition-delay:.1s}.duration-1000{transition-duration:1s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.duration-500{transition-duration:.5s}.duration-700{transition-duration:.7s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{transition-timing-function:linear}@keyframes enter{0%{opacity:var(--tw-enter-opacity, 1);transform:translate3d(var(--tw-enter-translate-x, 0),var(--tw-enter-translate-y, 0),0) scale3d(var(--tw-enter-scale, 1),var(--tw-enter-scale, 1),var(--tw-enter-scale, 1)) rotate(var(--tw-enter-rotate, 0))}}@keyframes exit{to{opacity:var(--tw-exit-opacity, 1);transform:translate3d(var(--tw-exit-translate-x, 0),var(--tw-exit-translate-y, 0),0) scale3d(var(--tw-exit-scale, 1),var(--tw-exit-scale, 1),var(--tw-exit-scale, 1)) rotate(var(--tw-exit-rotate, 0))}}.animate-in{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.fade-in-0{--tw-enter-opacity: 0}.fade-in-80{--tw-enter-opacity: .8}.zoom-in-95{--tw-enter-scale: .95}.slide-in-from-bottom{--tw-enter-translate-y: 100%}.duration-1000{animation-duration:1s}.duration-200{animation-duration:.2s}.duration-300{animation-duration:.3s}.duration-500{animation-duration:.5s}.duration-700{animation-duration:.7s}.delay-100{animation-delay:.1s}.ease-in-out{animation-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{animation-timing-function:linear}input[type=search]::-webkit-search-cancel-button{display:none}[contenteditable][data-placeholder]:empty:before{content:attr(data-placeholder);color:hsl(var(--muted-foreground));pointer-events:none}.toggle-elevate:before,.toggle-elevate-2:before{content:\"\";pointer-events:none;position:absolute;top:0;right:0;bottom:0;left:0;border-radius:inherit;z-index:-1}.toggle-elevate.toggle-elevated:before{background-color:var(--elevate-2)}.border.toggle-elevate:before{top:-1px;right:-1px;bottom:-1px;left:-1px}.hover-elevate:not(.no-default-hover-elevate),.active-elevate:not(.no-default-active-elevate),.hover-elevate-2:not(.no-default-hover-elevate),.active-elevate-2:not(.no-default-active-elevate){position:relative;z-index:0}.hover-elevate:not(.no-default-hover-elevate):after,.active-elevate:not(.no-default-active-elevate):after,.hover-elevate-2:not(.no-default-hover-elevate):after,.active-elevate-2:not(.no-default-active-elevate):after{content:\"\";pointer-events:none;position:absolute;top:0;right:0;bottom:0;left:0;border-radius:inherit;z-index:999}.hover-elevate:hover:not(.no-default-hover-elevate):after,.active-elevate:active:not(.no-default-active-elevate):after{background-color:var(--elevate-1)}.hover-elevate-2:hover:not(.no-default-hover-elevate):after,.active-elevate-2:active:not(.no-default-active-elevate):after{background-color:var(--elevate-2)}.border.hover-elevate:not(.no-hover-interaction-elevate):after,.border.active-elevate:not(.no-active-interaction-elevate):after,.border.hover-elevate-2:not(.no-hover-interaction-elevate):after,.border.active-elevate-2:not(.no-active-interaction-elevate):after{top:-1px;right:-1px;bottom:-1px;left:-1px}.reading-themed-content{color:var(--reading-text)}.reading-themed-content h1,.reading-themed-content .verse-text,.reading-themed-content .chapter-number,.reading-themed-content .book-name{color:var(--reading-text)!important}.reading-themed-content .verse-number{color:var(--reading-text)!important;opacity:.6}.\\[border-color\\:var\\(--badge-outline\\)\\]{border-color:var(--badge-outline)}.\\[border-color\\:var\\(--button-outline\\)\\]{border-color:var(--button-outline)}.glass-darker{background:linear-gradient(145deg,hsl(var(--card)),hsl(var(--background)));backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);box-shadow:0 20px 40px -10px #00000026,0 8px 16px -6px #0000001a,inset 0 1px #ffffff80;border:2px solid hsl(var(--border))}.dark .glass-darker{background:linear-gradient(145deg,#121223fa,#0c0c1cfc);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);box-shadow:0 25px 50px -12px #00000080,0 12px 20px -8px #00000059,inset 0 1px #ffffff14;border:1px solid rgba(255,255,255,.08)}.premium-card{background:linear-gradient(145deg,hsl(var(--card)),hsl(var(--background)));backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);box-shadow:0 20px 40px -10px #0000001f,0 8px 16px -6px #00000014,inset 0 1px #fff9;border:2px solid hsl(var(--border))}.dark .premium-card{background:linear-gradient(145deg,#0f0f20fa,#0a0a19fc);box-shadow:0 20px 40px -10px #00000073,0 8px 16px -6px #0000004d,inset 0 1px #ffffff0f;border:1px solid rgba(255,255,255,.06)}.stat-card-primary{background:linear-gradient(135deg,#6366f114,#8b5cf61f);border:1px solid rgba(99,102,241,.2);box-shadow:0 4px 15px -3px #6366f126}.stat-card-green{background:linear-gradient(135deg,#22c55e14,#10b9811f);border:1px solid rgba(34,197,94,.2);box-shadow:0 4px 15px -3px #22c55e26}.stat-card-amber{background:linear-gradient(135deg,#f59e0b14,#fbbf241f);border:1px solid rgba(245,158,11,.2);box-shadow:0 4px 15px -3px #f59e0b26}.stat-card-rose{background:linear-gradient(135deg,#f43f5e14,#fb71851f);border:1px solid rgba(244,63,94,.2);box-shadow:0 4px 15px -3px #f43f5e26}.stat-card-blue{background:linear-gradient(135deg,#3b82f614,#60a5fa1f);border:1px solid rgba(59,130,246,.2);box-shadow:0 4px 15px -3px #3b82f626}.profile-hero-card{background:linear-gradient(135deg,hsl(var(--card)),#fbf9f4,#f3f2f8);box-shadow:0 25px 50px -12px #0000001a,0 12px 24px -8px #0000000f,inset 0 1px #fffc}.dark .profile-hero-card{background:linear-gradient(135deg,hsl(var(--card)),#1e1e3ce6,#28193ce6);box-shadow:0 25px 50px -12px #0006,0 12px 24px -8px #0000004d,inset 0 1px #ffffff0d}.subtle-card{background:linear-gradient(145deg,hsl(var(--card)),#faf8f5,#f6f7f9)}.dark .subtle-card{background:linear-gradient(145deg,hsl(var(--card)),#19192df2,#1e1932f2)}.glass-premium{background:linear-gradient(135deg,hsl(var(--card) / .95),hsl(var(--background) / .85))!important;backdrop-filter:blur(24px) saturate(180%)!important;-webkit-backdrop-filter:blur(24px) saturate(180%)!important;border:1px solid hsl(var(--primary) / .3)!important;box-shadow:0 20px 40px -10px #0003,0 0 20px -5px hsl(var(--primary) / .2),inset 0 1px 2px #ffffff80!important}.dark .glass-premium{background:linear-gradient(135deg,#141628f2,#0c0e1ee6)!important;border:1px solid hsl(var(--primary) / .4)!important;box-shadow:0 25px 50px -12px #000000b3,0 0 40px -10px hsl(var(--primary) / .3),inset 0 1px 1px #ffffff14!important}.hover-premium{transition:all .5s cubic-bezier(.34,1.56,.64,1)!important;position:relative;z-index:10}.hover-premium:hover{transform:translateY(-10px) scale(1.02)!important;box-shadow:0 40px 80px -20px #0000004d,0 0 50px -10px hsl(var(--primary) / .4)!important;border-color:hsl(var(--primary) / .6)!important;z-index:50}.dark .hover-premium:hover{box-shadow:0 50px 100px -15px #000c,0 0 60px -12px hsl(var(--primary) / .5)!important;border-color:hsl(var(--primary) / .7)!important}.mesh-primary{background-color:hsl(var(--background))!important;background-image:radial-gradient(at 0% 0%,hsl(var(--primary) / .15) 0px,transparent 50%),radial-gradient(at 100% 0%,hsl(var(--accent) / .1) 0px,transparent 50%),radial-gradient(at 100% 100%,hsl(var(--primary) / .15) 0px,transparent 50%),radial-gradient(at 0% 100%,hsl(var(--accent) / .1) 0px,transparent 50%),radial-gradient(at 50% 50%,hsl(var(--primary) / .05) 0px,transparent 50%)!important;background-attachment:fixed!important}.card-accent-amber{background:linear-gradient(135deg,#f59e0b0f,#fbbf241a,hsl(var(--card) / .95));border:1px solid rgba(245,158,11,.2);box-shadow:0 8px 25px -5px #f59e0b1f}.card-accent-blue{background:linear-gradient(135deg,#3b82f60f,#6366f11a,hsl(var(--card) / .95));border:1px solid rgba(59,130,246,.2);box-shadow:0 8px 25px -5px #3b82f61f}.card-accent-emerald{background:linear-gradient(135deg,#10b9810f,#34d3991a,hsl(var(--card) / .95));border:1px solid rgba(16,185,129,.2);box-shadow:0 8px 25px -5px #10b9811f}.card-accent-rose{background:linear-gradient(135deg,#f43f5e0f,#fb71851a,hsl(var(--card) / .95));border:1px solid rgba(244,63,94,.2);box-shadow:0 8px 25px -5px #f43f5e1f}.card-accent-purple{background:linear-gradient(135deg,#8b5cf60f,#a855f71a,hsl(var(--card) / .95));border:1px solid rgba(139,92,246,.2);box-shadow:0 8px 25px -5px #8b5cf61f}:root{--button-outline: rgba(0,0,0, .08);--badge-outline: rgba(0,0,0, .04);--opaque-button-border-intensity: -6;--elevate-1: rgba(59, 82, 120, .06);--elevate-2: rgba(59, 82, 120, .12);--background: 40 30% 98%;--foreground: 220 15% 35%;--border: 40 15% 88%;--card: 40 40% 99%;--card-foreground: 220 15% 32%;--card-border: 40 20% 90%;--sidebar: 40 25% 97%;--sidebar-foreground: 220 15% 38%;--sidebar-border: 40 20% 88%;--sidebar-primary: 220 35% 38%;--sidebar-primary-foreground: 0 0% 100%;--sidebar-accent: 40 40% 94%;--sidebar-accent-foreground: 220 30% 32%;--sidebar-ring: 220 35% 38%;--popover: 40 35% 99%;--popover-foreground: 220 15% 32%;--popover-border: 40 20% 88%;--primary: 220 35% 38%;--primary-foreground: 0 0% 100%;--secondary: 40 25% 93%;--secondary-foreground: 220 30% 35%;--muted: 40 20% 95%;--muted-foreground: 220 15% 45%;--accent: 38 75% 48%;--accent-foreground: 220 30% 15%;--destructive: 0 70% 55%;--destructive-foreground: 0 0% 100%;--input: 40 20% 85%;--ring: 220 35% 38%;--chart-1: 220 40% 45%;--chart-2: 40 80% 50%;--chart-3: 16 75% 50%;--chart-4: 180 55% 42%;--chart-5: 330 70% 50%;--font-sans: Inter, sans-serif;--font-serif: Crimson Text, serif;--font-display: Playfair Display, serif;--font-mono: Menlo, monospace;--radius: .5rem;--shadow-2xs: 0px 1px 2px 0px hsl(220 20% 15% / .05);--shadow-xs: 0px 1px 2px 0px hsl(220 20% 15% / .08), 0px 1px 3px 0px hsl(220 20% 15% / .1);--shadow-sm: 0px 1px 3px 0px hsl(220 20% 15% / .1), 0px 1px 2px -1px hsl(220 20% 15% / .1);--shadow: 0px 2px 4px 0px hsl(220 20% 15% / .07), 0px 1px 2px -1px hsl(220 20% 15% / .06);--shadow-md: 0px 4px 6px -1px hsl(220 20% 15% / .1), 0px 2px 4px -2px hsl(220 20% 15% / .1);--shadow-lg: 0px 10px 15px -3px hsl(220 20% 15% / .1), 0px 4px 6px -4px hsl(220 20% 15% / .1);--shadow-xl: 0px 20px 25px -5px hsl(220 20% 15% / .12), 0px 8px 10px -6px hsl(220 20% 15% / .1);--shadow-2xl: 0px 25px 50px -12px hsl(220 20% 15% / .25), 0px 12px 20px -8px hsl(220 20% 15% / .15);--tracking-normal: 0em;--spacing: .25rem;--sidebar-primary-border: hsl(var(--sidebar-primary));--sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--sidebar-accent-border: hsl(var(--sidebar-accent));--sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--primary-border: hsl(var(--primary));--primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--secondary-border: hsl(var(--secondary));--secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--muted-border: hsl(var(--muted));--muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--accent-border: hsl(var(--accent));--accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--destructive-border: hsl(var(--destructive));--destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha)}.dark{--button-outline: rgba(255,255,255, .1);--badge-outline: rgba(255,255,255, .06);--opaque-button-border-intensity: 8;--elevate-1: rgba(130, 155, 195, .1);--elevate-2: rgba(130, 155, 195, .16);--background: 220 25% 10%;--foreground: 40 20% 92%;--border: 220 20% 18%;--card: 220 22% 13%;--card-foreground: 40 15% 90%;--card-border: 220 18% 16%;--sidebar: 220 25% 11%;--sidebar-foreground: 40 20% 90%;--sidebar-border: 220 20% 16%;--sidebar-primary: 38 70% 52%;--sidebar-primary-foreground: 220 30% 10%;--sidebar-accent: 220 25% 18%;--sidebar-accent-foreground: 38 70% 58%;--sidebar-ring: 38 70% 52%;--popover: 220 22% 13%;--popover-foreground: 40 15% 90%;--popover-border: 220 18% 16%;--primary: 220 45% 58%;--primary-foreground: 0 0% 100%;--secondary: 220 20% 16%;--secondary-foreground: 220 40% 75%;--muted: 220 18% 18%;--muted-foreground: 220 15% 60%;--accent: 38 70% 52%;--accent-foreground: 220 30% 10%;--destructive: 0 65% 55%;--destructive-foreground: 0 0% 100%;--input: 220 20% 18%;--ring: 220 45% 58%;--chart-1: 220 50% 55%;--chart-2: 40 80% 52%;--chart-3: 16 75% 52%;--chart-4: 170 55% 48%;--chart-5: 330 70% 55%;--shadow-2xs: 0px 1px 2px 0px hsl(220 20% 0% / .2);--shadow-xs: 0px 1px 2px 0px hsl(220 20% 0% / .25), 0px 1px 3px 0px hsl(220 20% 0% / .3);--shadow-sm: 0px 1px 3px 0px hsl(220 20% 0% / .3), 0px 1px 2px -1px hsl(220 20% 0% / .3);--shadow: 0px 2px 4px 0px hsl(220 20% 0% / .25), 0px 1px 2px -1px hsl(220 20% 0% / .2);--shadow-md: 0px 4px 6px -1px hsl(220 20% 0% / .3), 0px 2px 4px -2px hsl(220 20% 0% / .3);--shadow-lg: 0px 10px 15px -3px hsl(220 20% 0% / .35), 0px 4px 6px -4px hsl(220 20% 0% / .3);--shadow-xl: 0px 20px 25px -5px hsl(220 20% 0% / .4), 0px 8px 10px -6px hsl(220 20% 0% / .35);--shadow-2xl: 0px 25px 50px -12px hsl(220 20% 0% / .5), 0px 12px 20px -8px hsl(220 20% 0% / .4);--sidebar-primary-border: hsl(var(--sidebar-primary));--sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--sidebar-accent-border: hsl(var(--sidebar-accent));--sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--primary-border: hsl(var(--primary));--primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--secondary-border: hsl(var(--secondary));--secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--muted-border: hsl(var(--muted));--muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--accent-border: hsl(var(--accent));--accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--destructive-border: hsl(var(--destructive));--destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha)}.selection\\:bg-primary *::-moz-selection{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.selection\\:bg-primary *::selection{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.selection\\:bg-primary\\/30 *::-moz-selection{background-color:hsl(var(--primary) / .3)}.selection\\:bg-primary\\/30 *::selection{background-color:hsl(var(--primary) / .3)}.selection\\:text-white *::-moz-selection{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.selection\\:text-white *::selection{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.selection\\:bg-primary::-moz-selection{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.selection\\:bg-primary::selection{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.selection\\:bg-primary\\/30::-moz-selection{background-color:hsl(var(--primary) / .3)}.selection\\:bg-primary\\/30::selection{background-color:hsl(var(--primary) / .3)}.selection\\:text-white::-moz-selection{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.selection\\:text-white::selection{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.file\\:border-0::file-selector-button{border-width:0px}.file\\:bg-transparent::file-selector-button{background-color:transparent}.file\\:text-sm::file-selector-button{font-size:.875rem;line-height:1.25rem}.file\\:font-medium::file-selector-button{font-weight:500}.file\\:text-foreground::file-selector-button{--tw-text-opacity: 1;color:hsl(var(--foreground) / var(--tw-text-opacity, 1))}.placeholder\\:text-muted-foreground::-moz-placeholder{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.placeholder\\:text-muted-foreground::placeholder{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.after\\:pointer-events-none:after{content:var(--tw-content);pointer-events:none}.after\\:absolute:after{content:var(--tw-content);position:absolute}.after\\:-inset-2:after{content:var(--tw-content);top:-.5rem;right:-.5rem;bottom:-.5rem;left:-.5rem}.after\\:inset-0:after{content:var(--tw-content);top:0;right:0;bottom:0;left:0}.after\\:inset-y-0:after{content:var(--tw-content);top:0;bottom:0}.after\\:left-1\\/2:after{content:var(--tw-content);left:50%}.after\\:block:after{content:var(--tw-content);display:block}.after\\:w-1:after{content:var(--tw-content);width:.25rem}.after\\:w-\\[2px\\]:after{content:var(--tw-content);width:2px}.after\\:-translate-x-1\\/2:after{content:var(--tw-content);--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.after\\:rounded-full:after{content:var(--tw-content);border-radius:9999px}.after\\:border:after{content:var(--tw-content);border-width:1px}.after\\:border-black\\/10:after{content:var(--tw-content);border-color:#0000001a}.after\\:content-\\[\\'\\'\\]:after{--tw-content: \"\";content:var(--tw-content)}.after\\:border.toggle-elevate:after:before{content:var(--tw-content);top:-1px;right:-1px;bottom:-1px;left:-1px}.after\\:border.hover-elevate:not(.no-hover-interaction-elevate):after:after,.after\\:border.active-elevate:not(.no-active-interaction-elevate):after:after,.after\\:border.hover-elevate-2:not(.no-hover-interaction-elevate):after:after,.after\\:border.active-elevate-2:not(.no-active-interaction-elevate):after:after{content:var(--tw-content);top:-1px;right:-1px;bottom:-1px;left:-1px}.first\\:rounded-l-md:first-child{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem}.first\\:border-l:first-child{border-left-width:1px}.last\\:rounded-r-md:last-child{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem}.last\\:border-b-0:last-child{border-bottom-width:0px}.focus-within\\:relative:focus-within{position:relative}.focus-within\\:z-20:focus-within{z-index:20}.hover\\:scale-105:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-110:hover{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-\\[1\\.01\\]:hover{--tw-scale-x: 1.01;--tw-scale-y: 1.01;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-\\[1\\.02\\]:hover{--tw-scale-x: 1.02;--tw-scale-y: 1.02;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-\\[1\\.03\\]:hover{--tw-scale-x: 1.03;--tw-scale-y: 1.03;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:border-amber-500\\/30:hover{border-color:#f59e0b4d}.hover\\:border-primary:hover{--tw-border-opacity: 1;border-color:hsl(var(--primary) / var(--tw-border-opacity, 1))}.hover\\:border-primary\\/20:hover{border-color:hsl(var(--primary) / .2)}.hover\\:border-primary\\/40:hover{border-color:hsl(var(--primary) / .4)}.hover\\:border-primary\\/50:hover{border-color:hsl(var(--primary) / .5)}.hover\\:bg-accent:hover{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.hover\\:bg-accent\\/50:hover{background-color:hsl(var(--accent) / .5)}.hover\\:bg-black\\/40:hover{background-color:#0006}.hover\\:bg-blue-100:hover{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hover\\:bg-card:hover{--tw-bg-opacity: 1;background-color:hsl(var(--card) / var(--tw-bg-opacity, 1))}.hover\\:bg-card\\/5:hover{background-color:hsl(var(--card) / .05)}.hover\\:bg-card\\/60:hover{background-color:hsl(var(--card) / .6)}.hover\\:bg-card\\/90:hover{background-color:hsl(var(--card) / .9)}.hover\\:bg-destructive\\/10:hover{background-color:hsl(var(--destructive) / .1)}.hover\\:bg-destructive\\/90:hover{background-color:hsl(var(--destructive) / .9)}.hover\\:bg-green-100:hover{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.hover\\:bg-green-50:hover{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.hover\\:bg-green-600:hover{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\\:bg-muted:hover{--tw-bg-opacity: 1;background-color:hsl(var(--muted) / var(--tw-bg-opacity, 1))}.hover\\:bg-muted\\/50:hover{background-color:hsl(var(--muted) / .5)}.hover\\:bg-muted\\/80:hover{background-color:hsl(var(--muted) / .8)}.hover\\:bg-primary:hover{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.hover\\:bg-primary-foreground:hover{--tw-bg-opacity: 1;background-color:hsl(var(--primary-foreground) / var(--tw-bg-opacity, 1))}.hover\\:bg-primary\\/10:hover{background-color:hsl(var(--primary) / .1)}.hover\\:bg-primary\\/90:hover{background-color:hsl(var(--primary) / .9)}.hover\\:bg-secondary:hover{--tw-bg-opacity: 1;background-color:hsl(var(--secondary) / var(--tw-bg-opacity, 1))}.hover\\:bg-secondary\\/80:hover{background-color:hsl(var(--secondary) / .8)}.hover\\:bg-sidebar-accent:hover{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar-accent) / var(--tw-bg-opacity, 1))}.hover\\:bg-transparent:hover{background-color:transparent}.hover\\:from-amber-600:hover{--tw-gradient-from: #d97706 var(--tw-gradient-from-position);--tw-gradient-to: rgb(217 119 6 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.hover\\:from-primary\\/10:hover{--tw-gradient-from: hsl(var(--primary) / .1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.hover\\:from-primary\\/90:hover{--tw-gradient-from: hsl(var(--primary) / .9) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.hover\\:to-blue-700:hover{--tw-gradient-to: #1d4ed8 var(--tw-gradient-to-position)}.hover\\:to-orange-600:hover{--tw-gradient-to: #ea580c var(--tw-gradient-to-position)}.hover\\:to-transparent:hover{--tw-gradient-to: transparent var(--tw-gradient-to-position)}.hover\\:tracking-widest:hover{letter-spacing:.1em}.hover\\:text-accent-foreground:hover{--tw-text-opacity: 1;color:hsl(var(--accent-foreground) / var(--tw-text-opacity, 1))}.hover\\:text-destructive:hover{--tw-text-opacity: 1;color:hsl(var(--destructive) / var(--tw-text-opacity, 1))}.hover\\:text-foreground:hover{--tw-text-opacity: 1;color:hsl(var(--foreground) / var(--tw-text-opacity, 1))}.hover\\:text-green-700:hover{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.hover\\:text-muted-foreground:hover{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.hover\\:text-primary:hover{--tw-text-opacity: 1;color:hsl(var(--primary) / var(--tw-text-opacity, 1))}.hover\\:text-primary-foreground:hover{--tw-text-opacity: 1;color:hsl(var(--primary-foreground) / var(--tw-text-opacity, 1))}.hover\\:text-primary\\/80:hover{color:hsl(var(--primary) / .8)}.hover\\:text-sidebar-accent-foreground:hover{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}.hover\\:text-white:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:no-underline:hover{text-decoration-line:none}.hover\\:opacity-100:hover{opacity:1}.hover\\:shadow-2xl:hover{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-\\[0_0_0_1px_hsl\\(var\\(--sidebar-accent\\)\\)\\]:hover{--tw-shadow: 0 0 0 1px hsl(var(--sidebar-accent));--tw-shadow-colored: 0 0 0 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-lg:hover{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-md:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-xl:hover{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-primary\\/20:hover{--tw-shadow-color: hsl(var(--primary) / .2);--tw-shadow: var(--tw-shadow-colored)}.hover\\:shadow-primary\\/30:hover{--tw-shadow-color: hsl(var(--primary) / .3);--tw-shadow: var(--tw-shadow-colored)}.hover\\:ring-green-500\\/40:hover{--tw-ring-color: rgb(34 197 94 / .4)}.hover\\:ring-primary\\/30:hover{--tw-ring-color: hsl(var(--primary) / .3)}.hover\\:ring-primary\\/40:hover{--tw-ring-color: hsl(var(--primary) / .4)}.hover\\:after\\:bg-sidebar-border:hover:after{content:var(--tw-content);--tw-bg-opacity: 1;background-color:hsl(var(--sidebar-border) / var(--tw-bg-opacity, 1))}.focus\\:border-primary:focus{--tw-border-opacity: 1;border-color:hsl(var(--primary) / var(--tw-border-opacity, 1))}.focus\\:bg-accent:focus{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.focus\\:bg-destructive\\/10:focus{background-color:hsl(var(--destructive) / .1)}.focus\\:bg-destructive\\/5:focus{background-color:hsl(var(--destructive) / .05)}.focus\\:bg-primary:focus{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.focus\\:bg-primary\\/5:focus{background-color:hsl(var(--primary) / .05)}.focus\\:text-accent-foreground:focus{--tw-text-opacity: 1;color:hsl(var(--accent-foreground) / var(--tw-text-opacity, 1))}.focus\\:text-destructive:focus{--tw-text-opacity: 1;color:hsl(var(--destructive) / var(--tw-text-opacity, 1))}.focus\\:text-primary-foreground:focus{--tw-text-opacity: 1;color:hsl(var(--primary-foreground) / var(--tw-text-opacity, 1))}.focus\\:opacity-100:focus{opacity:1}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-primary\\/10:focus{--tw-ring-color: hsl(var(--primary) / .1)}.focus\\:ring-ring:focus{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--ring) / var(--tw-ring-opacity, 1))}.focus\\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.focus-visible\\:border-primary:focus-visible{--tw-border-opacity: 1;border-color:hsl(var(--primary) / var(--tw-border-opacity, 1))}.focus-visible\\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\\:ring-0:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-1:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-primary:focus-visible{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--primary) / var(--tw-ring-opacity, 1))}.focus-visible\\:ring-primary\\/30:focus-visible{--tw-ring-color: hsl(var(--primary) / .3)}.focus-visible\\:ring-ring:focus-visible{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--ring) / var(--tw-ring-opacity, 1))}.focus-visible\\:ring-offset-1:focus-visible{--tw-ring-offset-width: 1px}.focus-visible\\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.focus-visible\\:ring-offset-background:focus-visible{--tw-ring-offset-color: hsl(var(--background) / 1)}.active\\:scale-95:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:scale-\\[0\\.98\\]:active{--tw-scale-x: .98;--tw-scale-y: .98;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:scale-\\[0\\.99\\]:active{--tw-scale-x: .99;--tw-scale-y: .99;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:bg-sidebar-accent:active{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar-accent) / var(--tw-bg-opacity, 1))}.active\\:text-sidebar-accent-foreground:active{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}.active\\:shadow-none:active{--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.disabled\\:pointer-events-none:disabled{pointer-events:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.group:focus-within .group-focus-within\\:text-primary{--tw-text-opacity: 1;color:hsl(var(--primary) / var(--tw-text-opacity, 1))}.group\\/menu-item:focus-within .group-focus-within\\/menu-item\\:opacity-100{opacity:1}.group\\/link:hover .group-hover\\/link\\:translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\\:translate-x-1{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\\:scale-105{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\\:scale-110{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\\:bg-blue-500\\/10{background-color:#3b82f61a}.group:hover .group-hover\\:bg-primary{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.group:hover .group-hover\\:text-primary{--tw-text-opacity: 1;color:hsl(var(--primary) / var(--tw-text-opacity, 1))}.group:hover .group-hover\\:text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.group\\/link:hover .group-hover\\/link\\:opacity-100,.group\\/menu-item:hover .group-hover\\/menu-item\\:opacity-100,.group:hover .group-hover\\:opacity-100{opacity:1}.group:hover .group-hover\\:opacity-40{opacity:.4}.group:hover .group-hover\\:opacity-\\[0\\.05\\]{opacity:.05}.group.destructive .group-\\[\\.destructive\\]\\:border-muted\\/40{border-color:hsl(var(--muted) / .4)}.group.destructive .group-\\[\\.destructive\\]\\:text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:border-destructive\\/30:hover{border-color:hsl(var(--destructive) / .3)}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:bg-destructive:hover{--tw-bg-opacity: 1;background-color:hsl(var(--destructive) / var(--tw-bg-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:text-destructive-foreground:hover{--tw-text-opacity: 1;color:hsl(var(--destructive-foreground) / var(--tw-text-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:text-red-50:hover{--tw-text-opacity: 1;color:rgb(254 242 242 / var(--tw-text-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:focus\\:ring-destructive:focus{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--destructive) / var(--tw-ring-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:focus\\:ring-red-400:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(248 113 113 / var(--tw-ring-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:focus\\:ring-offset-red-600:focus{--tw-ring-offset-color: #dc2626}.peer\\/menu-button:hover~.peer-hover\\/menu-button\\:text-sidebar-accent-foreground{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}.peer:disabled~.peer-disabled\\:cursor-not-allowed{cursor:not-allowed}.peer:disabled~.peer-disabled\\:opacity-70{opacity:.7}.has-\\[\\:disabled\\]\\:opacity-50:has(:disabled){opacity:.5}.aria-disabled\\:pointer-events-none[aria-disabled=true]{pointer-events:none}.aria-disabled\\:opacity-50[aria-disabled=true]{opacity:.5}.aria-selected\\:bg-accent[aria-selected=true]{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.aria-selected\\:bg-accent\\/50[aria-selected=true]{background-color:hsl(var(--accent) / .5)}.aria-selected\\:text-accent-foreground[aria-selected=true]{--tw-text-opacity: 1;color:hsl(var(--accent-foreground) / var(--tw-text-opacity, 1))}.aria-selected\\:text-muted-foreground[aria-selected=true]{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.aria-selected\\:opacity-100[aria-selected=true]{opacity:1}.data-\\[disabled\\=true\\]\\:pointer-events-none[data-disabled=true],.data-\\[disabled\\]\\:pointer-events-none[data-disabled]{pointer-events:none}.data-\\[panel-group-direction\\=vertical\\]\\:h-px[data-panel-group-direction=vertical]{height:1px}.data-\\[panel-group-direction\\=vertical\\]\\:w-full[data-panel-group-direction=vertical]{width:100%}.data-\\[side\\=bottom\\]\\:translate-y-1[data-side=bottom]{--tw-translate-y: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=left\\]\\:-translate-x-1[data-side=left]{--tw-translate-x: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=right\\]\\:translate-x-1[data-side=right]{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=top\\]\\:-translate-y-1[data-side=top]{--tw-translate-y: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[state\\=checked\\]\\:translate-x-5[data-state=checked]{--tw-translate-x: 1.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[state\\=unchecked\\]\\:translate-x-0[data-state=unchecked],.data-\\[swipe\\=cancel\\]\\:translate-x-0[data-swipe=cancel]{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[swipe\\=end\\]\\:translate-x-\\[var\\(--radix-toast-swipe-end-x\\)\\][data-swipe=end]{--tw-translate-x: var(--radix-toast-swipe-end-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[swipe\\=move\\]\\:translate-x-\\[var\\(--radix-toast-swipe-move-x\\)\\][data-swipe=move]{--tw-translate-x: var(--radix-toast-swipe-move-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes accordion-up{0%{height:var(--radix-accordion-content-height)}to{height:0}}.data-\\[state\\=closed\\]\\:animate-accordion-up[data-state=closed]{animation:accordion-up .2s ease-out}@keyframes accordion-down{0%{height:0}to{height:var(--radix-accordion-content-height)}}.data-\\[state\\=open\\]\\:animate-accordion-down[data-state=open]{animation:accordion-down .2s ease-out}.data-\\[panel-group-direction\\=vertical\\]\\:flex-col[data-panel-group-direction=vertical]{flex-direction:column}.data-\\[active\\=true\\]\\:bg-sidebar-accent[data-active=true]{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar-accent) / var(--tw-bg-opacity, 1))}.data-\\[selected\\=\\'true\\'\\]\\:bg-accent[data-selected=true]{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.data-\\[state\\=active\\]\\:bg-background[data-state=active]{--tw-bg-opacity: 1;background-color:hsl(var(--background) / var(--tw-bg-opacity, 1))}.data-\\[state\\=active\\]\\:bg-primary[data-state=active]{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.data-\\[state\\=active\\]\\:bg-primary\\/10[data-state=active]{background-color:hsl(var(--primary) / .1)}.data-\\[state\\=checked\\]\\:bg-primary[data-state=checked]{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.data-\\[state\\=on\\]\\:bg-accent[data-state=on],.data-\\[state\\=open\\]\\:bg-accent[data-state=open]{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.data-\\[state\\=open\\]\\:bg-accent\\/50[data-state=open]{background-color:hsl(var(--accent) / .5)}.data-\\[state\\=open\\]\\:bg-secondary[data-state=open]{--tw-bg-opacity: 1;background-color:hsl(var(--secondary) / var(--tw-bg-opacity, 1))}.data-\\[state\\=selected\\]\\:bg-muted[data-state=selected]{--tw-bg-opacity: 1;background-color:hsl(var(--muted) / var(--tw-bg-opacity, 1))}.data-\\[state\\=unchecked\\]\\:bg-input[data-state=unchecked]{--tw-bg-opacity: 1;background-color:hsl(var(--input) / var(--tw-bg-opacity, 1))}.data-\\[active\\=true\\]\\:font-medium[data-active=true]{font-weight:500}.data-\\[active\\=true\\]\\:text-sidebar-accent-foreground[data-active=true]{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}.data-\\[placeholder\\]\\:text-muted-foreground[data-placeholder]{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.data-\\[selected\\=true\\]\\:text-accent-foreground[data-selected=true]{--tw-text-opacity: 1;color:hsl(var(--accent-foreground) / var(--tw-text-opacity, 1))}.data-\\[state\\=active\\]\\:text-foreground[data-state=active]{--tw-text-opacity: 1;color:hsl(var(--foreground) / var(--tw-text-opacity, 1))}.data-\\[state\\=active\\]\\:text-primary[data-state=active]{--tw-text-opacity: 1;color:hsl(var(--primary) / var(--tw-text-opacity, 1))}.data-\\[state\\=active\\]\\:text-primary-foreground[data-state=active],.data-\\[state\\=checked\\]\\:text-primary-foreground[data-state=checked]{--tw-text-opacity: 1;color:hsl(var(--primary-foreground) / var(--tw-text-opacity, 1))}.data-\\[state\\=on\\]\\:text-accent-foreground[data-state=on],.data-\\[state\\=open\\]\\:text-accent-foreground[data-state=open]{--tw-text-opacity: 1;color:hsl(var(--accent-foreground) / var(--tw-text-opacity, 1))}.data-\\[state\\=open\\]\\:text-muted-foreground[data-state=open]{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.data-\\[disabled\\=true\\]\\:opacity-50[data-disabled=true],.data-\\[disabled\\]\\:opacity-50[data-disabled]{opacity:.5}.data-\\[state\\=open\\]\\:opacity-100[data-state=open]{opacity:1}.data-\\[state\\=active\\]\\:shadow-lg[data-state=active]{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.data-\\[state\\=active\\]\\:shadow-md[data-state=active]{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.data-\\[state\\=active\\]\\:shadow-sm[data-state=active]{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.data-\\[swipe\\=move\\]\\:transition-none[data-swipe=move]{transition-property:none}.data-\\[state\\=closed\\]\\:duration-300[data-state=closed]{transition-duration:.3s}.data-\\[state\\=open\\]\\:duration-500[data-state=open]{transition-duration:.5s}.data-\\[motion\\^\\=from-\\]\\:animate-in[data-motion^=from-],.data-\\[state\\=open\\]\\:animate-in[data-state=open],.data-\\[state\\=visible\\]\\:animate-in[data-state=visible]{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.data-\\[motion\\^\\=to-\\]\\:animate-out[data-motion^=to-],.data-\\[state\\=closed\\]\\:animate-out[data-state=closed],.data-\\[state\\=hidden\\]\\:animate-out[data-state=hidden],.data-\\[swipe\\=end\\]\\:animate-out[data-swipe=end]{animation-name:exit;animation-duration:.15s;--tw-exit-opacity: initial;--tw-exit-scale: initial;--tw-exit-rotate: initial;--tw-exit-translate-x: initial;--tw-exit-translate-y: initial}.data-\\[motion\\^\\=from-\\]\\:fade-in[data-motion^=from-]{--tw-enter-opacity: 0}.data-\\[motion\\^\\=to-\\]\\:fade-out[data-motion^=to-],.data-\\[state\\=closed\\]\\:fade-out-0[data-state=closed]{--tw-exit-opacity: 0}.data-\\[state\\=closed\\]\\:fade-out-80[data-state=closed]{--tw-exit-opacity: .8}.data-\\[state\\=hidden\\]\\:fade-out[data-state=hidden]{--tw-exit-opacity: 0}.data-\\[state\\=open\\]\\:fade-in-0[data-state=open],.data-\\[state\\=visible\\]\\:fade-in[data-state=visible]{--tw-enter-opacity: 0}.data-\\[state\\=closed\\]\\:zoom-out-95[data-state=closed]{--tw-exit-scale: .95}.data-\\[state\\=open\\]\\:zoom-in-90[data-state=open]{--tw-enter-scale: .9}.data-\\[state\\=open\\]\\:zoom-in-95[data-state=open]{--tw-enter-scale: .95}.data-\\[motion\\=from-end\\]\\:slide-in-from-right-52[data-motion=from-end]{--tw-enter-translate-x: 13rem}.data-\\[motion\\=from-start\\]\\:slide-in-from-left-52[data-motion=from-start]{--tw-enter-translate-x: -13rem}.data-\\[motion\\=to-end\\]\\:slide-out-to-right-52[data-motion=to-end]{--tw-exit-translate-x: 13rem}.data-\\[motion\\=to-start\\]\\:slide-out-to-left-52[data-motion=to-start]{--tw-exit-translate-x: -13rem}.data-\\[side\\=bottom\\]\\:slide-in-from-top-2[data-side=bottom]{--tw-enter-translate-y: -.5rem}.data-\\[side\\=left\\]\\:slide-in-from-right-2[data-side=left]{--tw-enter-translate-x: .5rem}.data-\\[side\\=right\\]\\:slide-in-from-left-2[data-side=right]{--tw-enter-translate-x: -.5rem}.data-\\[side\\=top\\]\\:slide-in-from-bottom-2[data-side=top]{--tw-enter-translate-y: .5rem}.data-\\[state\\=closed\\]\\:slide-out-to-bottom[data-state=closed]{--tw-exit-translate-y: 100%}.data-\\[state\\=closed\\]\\:slide-out-to-left[data-state=closed]{--tw-exit-translate-x: -100%}.data-\\[state\\=closed\\]\\:slide-out-to-left-1\\/2[data-state=closed]{--tw-exit-translate-x: -50%}.data-\\[state\\=closed\\]\\:slide-out-to-right[data-state=closed],.data-\\[state\\=closed\\]\\:slide-out-to-right-full[data-state=closed]{--tw-exit-translate-x: 100%}.data-\\[state\\=closed\\]\\:slide-out-to-top[data-state=closed]{--tw-exit-translate-y: -100%}.data-\\[state\\=closed\\]\\:slide-out-to-top-\\[48\\%\\][data-state=closed]{--tw-exit-translate-y: -48%}.data-\\[state\\=open\\]\\:slide-in-from-bottom[data-state=open]{--tw-enter-translate-y: 100%}.data-\\[state\\=open\\]\\:slide-in-from-left[data-state=open]{--tw-enter-translate-x: -100%}.data-\\[state\\=open\\]\\:slide-in-from-left-1\\/2[data-state=open]{--tw-enter-translate-x: -50%}.data-\\[state\\=open\\]\\:slide-in-from-right[data-state=open]{--tw-enter-translate-x: 100%}.data-\\[state\\=open\\]\\:slide-in-from-top[data-state=open]{--tw-enter-translate-y: -100%}.data-\\[state\\=open\\]\\:slide-in-from-top-\\[48\\%\\][data-state=open]{--tw-enter-translate-y: -48%}.data-\\[state\\=open\\]\\:slide-in-from-top-full[data-state=open]{--tw-enter-translate-y: -100%}.data-\\[state\\=closed\\]\\:duration-300[data-state=closed]{animation-duration:.3s}.data-\\[state\\=open\\]\\:duration-500[data-state=open]{animation-duration:.5s}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:left-0[data-panel-group-direction=vertical]:after{content:var(--tw-content);left:0}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:h-1[data-panel-group-direction=vertical]:after{content:var(--tw-content);height:.25rem}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:w-full[data-panel-group-direction=vertical]:after{content:var(--tw-content);width:100%}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:-translate-y-1\\/2[data-panel-group-direction=vertical]:after{content:var(--tw-content);--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:translate-x-0[data-panel-group-direction=vertical]:after{content:var(--tw-content);--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[state\\=open\\]\\:hover\\:bg-accent:hover[data-state=open]{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.data-\\[state\\=open\\]\\:hover\\:bg-sidebar-accent:hover[data-state=open]{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar-accent) / var(--tw-bg-opacity, 1))}.data-\\[state\\=open\\]\\:hover\\:text-sidebar-accent-foreground:hover[data-state=open]{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}.data-\\[state\\=open\\]\\:focus\\:bg-accent:focus[data-state=open]{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:left-\\[calc\\(var\\(--sidebar-width\\)\\*-1\\)\\]{left:calc(var(--sidebar-width) * -1)}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:right-\\[calc\\(var\\(--sidebar-width\\)\\*-1\\)\\]{right:calc(var(--sidebar-width) * -1)}.group[data-side=left] .group-data-\\[side\\=left\\]\\:-right-4{right:-1rem}.group[data-side=right] .group-data-\\[side\\=right\\]\\:left-0{left:0}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:-mt-8{margin-top:-2rem}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:hidden{display:none}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:w-\\[calc\\(var\\(--sidebar-width-icon\\)\\+var\\(--spacing-4\\)\\)\\]{width:calc(var(--sidebar-width-icon) + var(--spacing-4))}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:w-\\[calc\\(var\\(--sidebar-width-icon\\)\\+var\\(--spacing-4\\)\\+2px\\)\\]{width:calc(var(--sidebar-width-icon) + var(--spacing-4) + 2px)}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:w-\\[var\\(--sidebar-width-icon\\)\\]{width:var(--sidebar-width-icon)}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:w-0{width:0px}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group[data-side=right] .group-data-\\[side\\=right\\]\\:rotate-180,.group[data-state=open] .group-data-\\[state\\=open\\]\\:rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:overflow-hidden{overflow:hidden}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:rounded-lg{border-radius:.5625rem}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border{border-width:1px}.group[data-side=left] .group-data-\\[side\\=left\\]\\:border-r{border-right-width:1px}.group[data-side=right] .group-data-\\[side\\=right\\]\\:border-l{border-left-width:1px}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border-sidebar-border{--tw-border-opacity: 1;border-color:hsl(var(--sidebar-border) / var(--tw-border-opacity, 1))}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:opacity-0{opacity:0}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border.toggle-elevate:before{top:-1px;right:-1px;bottom:-1px;left:-1px}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border.hover-elevate:not(.no-hover-interaction-elevate):after,.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border.active-elevate:not(.no-active-interaction-elevate):after,.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border.hover-elevate-2:not(.no-hover-interaction-elevate):after,.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border.active-elevate-2:not(.no-active-interaction-elevate):after{top:-1px;right:-1px;bottom:-1px;left:-1px}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:after\\:left-full:after{content:var(--tw-content);left:100%}.group[data-collapsible=offcanvas] .hover\\:group-data-\\[collapsible\\=offcanvas\\]\\:bg-sidebar:hover{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar) / var(--tw-bg-opacity, 1))}.peer\\/menu-button[data-size=default]~.peer-data-\\[size\\=default\\]\\/menu-button\\:top-1\\.5{top:.375rem}.peer\\/menu-button[data-size=lg]~.peer-data-\\[size\\=lg\\]\\/menu-button\\:top-2\\.5{top:.625rem}.peer\\/menu-button[data-size=sm]~.peer-data-\\[size\\=sm\\]\\/menu-button\\:top-1{top:.25rem}.peer\\/menu-button[data-active=true]~.peer-data-\\[active\\=true\\]\\/menu-button\\:text-sidebar-accent-foreground{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}@supports (backdrop-filter: var(--tw)){.supports-\\[backdrop-filter\\]\\:bg-background\\/80{background-color:hsl(var(--background) / .8)}}.dark\\:border-blue-800:is(.dark *){--tw-border-opacity: 1;border-color:rgb(30 64 175 / var(--tw-border-opacity, 1))}.dark\\:border-destructive:is(.dark *){--tw-border-opacity: 1;border-color:hsl(var(--destructive) / var(--tw-border-opacity, 1))}.dark\\:border-gray-800:is(.dark *){--tw-border-opacity: 1;border-color:rgb(31 41 55 / var(--tw-border-opacity, 1))}.dark\\:border-green-800:is(.dark *){--tw-border-opacity: 1;border-color:rgb(22 101 52 / var(--tw-border-opacity, 1))}.dark\\:border-orange-800:is(.dark *){--tw-border-opacity: 1;border-color:rgb(154 52 18 / var(--tw-border-opacity, 1))}.dark\\:border-primary\\/30:is(.dark *){border-color:hsl(var(--primary) / .3)}.dark\\:bg-blue-900\\/20:is(.dark *){background-color:#1e3a8a33}.dark\\:bg-blue-900\\/40:is(.dark *){background-color:#1e3a8a66}.dark\\:bg-blue-950:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(23 37 84 / var(--tw-bg-opacity, 1))}.dark\\:bg-card\\/40:is(.dark *){background-color:hsl(var(--card) / .4)}.dark\\:bg-gray-800\\/50:is(.dark *){background-color:#1f293780}.dark\\:bg-gray-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.dark\\:bg-green-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity, 1))}.dark\\:bg-green-900\\/20:is(.dark *){background-color:#14532d33}.dark\\:bg-green-900\\/30:is(.dark *){background-color:#14532d4d}.dark\\:bg-green-900\\/40:is(.dark *){background-color:#14532d66}.dark\\:bg-muted\\/30:is(.dark *){background-color:hsl(var(--muted) / .3)}.dark\\:bg-orange-900\\/40:is(.dark *){background-color:#7c2d1266}.dark\\:bg-orange-950:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(67 20 7 / var(--tw-bg-opacity, 1))}.dark\\:bg-pink-900\\/40:is(.dark *){background-color:#83184366}.dark\\:bg-primary\\/10:is(.dark *){background-color:hsl(var(--primary) / .1)}.dark\\:bg-primary\\/5:is(.dark *){background-color:hsl(var(--primary) / .05)}.dark\\:bg-purple-900\\/40:is(.dark *){background-color:#581c8766}.dark\\:bg-purple-950:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(59 7 100 / var(--tw-bg-opacity, 1))}.dark\\:bg-red-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity, 1))}.dark\\:bg-red-900\\/30:is(.dark *){background-color:#7f1d1d4d}.dark\\:bg-rose-950:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(76 5 25 / var(--tw-bg-opacity, 1))}.dark\\:bg-slate-900\\/80:is(.dark *){background-color:#0f172acc}.dark\\:bg-yellow-900\\/40:is(.dark *){background-color:#713f1266}.dark\\:bg-zinc-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity, 1))}.dark\\:from-indigo-950:is(.dark *){--tw-gradient-from: #1e1b4b var(--tw-gradient-from-position);--tw-gradient-to: rgb(30 27 75 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.dark\\:from-primary\\/20:is(.dark *){--tw-gradient-from: hsl(var(--primary) / .2) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.dark\\:from-slate-600:is(.dark *){--tw-gradient-from: #475569 var(--tw-gradient-from-position);--tw-gradient-to: rgb(71 85 105 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.dark\\:to-orange-950:is(.dark *){--tw-gradient-to: #431407 var(--tw-gradient-to-position)}.dark\\:to-primary\\/10:is(.dark *){--tw-gradient-to: hsl(var(--primary) / .1) var(--tw-gradient-to-position)}.dark\\:to-slate-700:is(.dark *){--tw-gradient-to: #334155 var(--tw-gradient-to-position)}.dark\\:text-amber-400:is(.dark *){--tw-text-opacity: 1;color:rgb(251 191 36 / var(--tw-text-opacity, 1))}.dark\\:text-amber-400\\/60:is(.dark *){color:#fbbf2499}.dark\\:text-amber-500:is(.dark *){--tw-text-opacity: 1;color:rgb(245 158 11 / var(--tw-text-opacity, 1))}.dark\\:text-blue-200:is(.dark *){--tw-text-opacity: 1;color:rgb(191 219 254 / var(--tw-text-opacity, 1))}.dark\\:text-blue-300:is(.dark *){--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.dark\\:text-emerald-400:is(.dark *){--tw-text-opacity: 1;color:rgb(52 211 153 / var(--tw-text-opacity, 1))}.dark\\:text-gray-300:is(.dark *){--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.dark\\:text-gray-400:is(.dark *){--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\\:text-gray-500:is(.dark *){--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.dark\\:text-green-200:is(.dark *){--tw-text-opacity: 1;color:rgb(187 247 208 / var(--tw-text-opacity, 1))}.dark\\:text-green-400:is(.dark *){--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.dark\\:text-indigo-300:is(.dark *){--tw-text-opacity: 1;color:rgb(165 180 252 / var(--tw-text-opacity, 1))}.dark\\:text-orange-200:is(.dark *){--tw-text-opacity: 1;color:rgb(254 215 170 / var(--tw-text-opacity, 1))}.dark\\:text-orange-300:is(.dark *){--tw-text-opacity: 1;color:rgb(253 186 116 / var(--tw-text-opacity, 1))}.dark\\:text-orange-400:is(.dark *){--tw-text-opacity: 1;color:rgb(251 146 60 / var(--tw-text-opacity, 1))}.dark\\:text-orange-500:is(.dark *){--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.dark\\:text-pink-200:is(.dark *){--tw-text-opacity: 1;color:rgb(251 207 232 / var(--tw-text-opacity, 1))}.dark\\:text-purple-200:is(.dark *){--tw-text-opacity: 1;color:rgb(233 213 255 / var(--tw-text-opacity, 1))}.dark\\:text-purple-300:is(.dark *){--tw-text-opacity: 1;color:rgb(216 180 254 / var(--tw-text-opacity, 1))}.dark\\:text-red-400:is(.dark *){--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.dark\\:text-rose-300:is(.dark *){--tw-text-opacity: 1;color:rgb(253 164 175 / var(--tw-text-opacity, 1))}.dark\\:text-white:is(.dark *){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.dark\\:text-yellow-200:is(.dark *){--tw-text-opacity: 1;color:rgb(254 240 138 / var(--tw-text-opacity, 1))}.dark\\:after\\:border-white\\/10:is(.dark *):after{content:var(--tw-content);border-color:#ffffff1a}.dark\\:hover\\:bg-blue-900\\/30:hover:is(.dark *){background-color:#1e3a8a4d}.dark\\:hover\\:bg-green-900\\/30:hover:is(.dark *){background-color:#14532d4d}.dark\\:hover\\:bg-primary\\/20:hover:is(.dark *){background-color:hsl(var(--primary) / .2)}@media (min-width: 640px){.sm\\:bottom-0{bottom:0}.sm\\:right-0{right:0}.sm\\:top-auto{top:auto}.sm\\:order-1{order:1}.sm\\:order-2{order:2}.sm\\:mb-10{margin-bottom:2.5rem}.sm\\:ml-1{margin-left:.25rem}.sm\\:ml-2{margin-left:.5rem}.sm\\:mr-2{margin-right:.5rem}.sm\\:mt-0{margin-top:0}.sm\\:block{display:block}.sm\\:inline{display:inline}.sm\\:flex{display:flex}.sm\\:hidden{display:none}.sm\\:h-10{height:2.5rem}.sm\\:h-16{height:4rem}.sm\\:h-32{height:8rem}.sm\\:h-4{height:1rem}.sm\\:h-5{height:1.25rem}.sm\\:w-10{width:2.5rem}.sm\\:w-12{width:3rem}.sm\\:w-16{width:4rem}.sm\\:w-24{width:6rem}.sm\\:w-28{width:7rem}.sm\\:w-32{width:8rem}.sm\\:w-4{width:1rem}.sm\\:w-40{width:10rem}.sm\\:w-5{width:1.25rem}.sm\\:w-56{width:14rem}.sm\\:w-auto{width:auto}.sm\\:max-w-\\[425px\\]{max-width:425px}.sm\\:max-w-md{max-width:28rem}.sm\\:max-w-sm{max-width:24rem}.sm\\:flex-none{flex:none}.sm\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.sm\\:flex-row{flex-direction:row}.sm\\:flex-col{flex-direction:column}.sm\\:items-center{align-items:center}.sm\\:justify-end{justify-content:flex-end}.sm\\:justify-center{justify-content:center}.sm\\:justify-between{justify-content:space-between}.sm\\:gap-0{gap:0px}.sm\\:gap-1\\.5{gap:.375rem}.sm\\:gap-2{gap:.5rem}.sm\\:gap-2\\.5{gap:.625rem}.sm\\:gap-3{gap:.75rem}.sm\\:gap-6{gap:1.5rem}.sm\\:space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.sm\\:space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.sm\\:space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.sm\\:rounded-lg{border-radius:.5625rem}.sm\\:border-t-0{border-top-width:0px}.sm\\:p-10{padding:2.5rem}.sm\\:p-5{padding:1.25rem}.sm\\:p-6{padding:1.5rem}.sm\\:p-8{padding:2rem}.sm\\:px-0{padding-left:0;padding-right:0}.sm\\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\\:px-8{padding-left:2rem;padding-right:2rem}.sm\\:py-10{padding-top:2.5rem;padding-bottom:2.5rem}.sm\\:py-12{padding-top:3rem;padding-bottom:3rem}.sm\\:py-8{padding-top:2rem;padding-bottom:2rem}.sm\\:pb-16{padding-bottom:4rem}.sm\\:pb-8{padding-bottom:2rem}.sm\\:pt-0{padding-top:0}.sm\\:pt-16{padding-top:4rem}.sm\\:text-left{text-align:left}.sm\\:text-2xl{font-size:1.5rem;line-height:2rem}.sm\\:text-3xl{font-size:1.875rem;line-height:2.25rem}.sm\\:text-4xl{font-size:2.25rem;line-height:2.5rem}.sm\\:text-base{font-size:1rem;line-height:1.5rem}.sm\\:text-lg{font-size:1.125rem;line-height:1.75rem}.sm\\:text-sm{font-size:.875rem;line-height:1.25rem}.sm\\:text-xl{font-size:1.25rem;line-height:1.75rem}.sm\\:text-xs{font-size:.75rem;line-height:1rem}.data-\\[state\\=open\\]\\:sm\\:slide-in-from-bottom-full[data-state=open]{--tw-enter-translate-y: 100%}}@media (min-width: 768px){.md\\:absolute{position:absolute}.md\\:bottom-4{bottom:1rem}.md\\:bottom-6{bottom:1.5rem}.md\\:bottom-8{bottom:2rem}.md\\:left-6{left:1.5rem}.md\\:left-auto{left:auto}.md\\:right-6{right:1.5rem}.md\\:right-8{right:2rem}.md\\:block{display:block}.md\\:flex{display:flex}.md\\:hidden{display:none}.md\\:h-11{height:2.75rem}.md\\:h-14{height:3.5rem}.md\\:h-5{height:1.25rem}.md\\:w-80{width:20rem}.md\\:w-96{width:24rem}.md\\:w-\\[var\\(--radix-navigation-menu-viewport-width\\)\\]{width:var(--radix-navigation-menu-viewport-width)}.md\\:w-auto{width:auto}.md\\:max-w-\\[420px\\]{max-width:420px}.md\\:flex-none{flex:none}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.md\\:flex-row{flex-direction:row}.md\\:flex-nowrap{flex-wrap:nowrap}.md\\:items-center{align-items:center}.md\\:gap-10{gap:2.5rem}.md\\:gap-3{gap:.75rem}.md\\:gap-6{gap:1.5rem}.md\\:gap-8{gap:2rem}.md\\:p-10{padding:2.5rem}.md\\:p-12{padding:3rem}.md\\:p-14{padding:3.5rem}.md\\:p-20{padding:5rem}.md\\:p-6{padding:1.5rem}.md\\:p-8{padding:2rem}.md\\:px-6{padding-left:1.5rem;padding-right:1.5rem}.md\\:py-20{padding-top:5rem;padding-bottom:5rem}.md\\:pb-0{padding-bottom:0}.md\\:pb-12{padding-bottom:3rem}.md\\:pb-16{padding-bottom:4rem}.md\\:text-2xl{font-size:1.5rem;line-height:2rem}.md\\:text-3xl{font-size:1.875rem;line-height:2.25rem}.md\\:text-4xl{font-size:2.25rem;line-height:2.5rem}.md\\:text-6xl{font-size:3.75rem;line-height:1}.md\\:text-7xl{font-size:4.5rem;line-height:1}.md\\:text-9xl{font-size:8rem;line-height:1}.md\\:text-sm{font-size:.875rem;line-height:1.25rem}.md\\:opacity-0{opacity:0}.md\\:after\\:hidden:after{content:var(--tw-content);display:none}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:m-2{margin:.5rem}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:ml-0{margin-left:0}.peer[data-variant=inset][data-state=collapsed]~.md\\:peer-data-\\[variant\\=inset\\]\\:peer-data-\\[state\\=collapsed\\]\\:ml-2{margin-left:.5rem}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:rounded-xl{border-radius:.75rem}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}}@media (min-width: 1024px){.lg\\:col-span-5{grid-column:span 5 / span 5}.lg\\:col-span-7{grid-column:span 7 / span 7}.lg\\:block{display:block}.lg\\:flex{display:flex}.lg\\:grid-cols-12{grid-template-columns:repeat(12,minmax(0,1fr))}.lg\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\\:flex-row{flex-direction:row}.lg\\:px-8{padding-left:2rem;padding-right:2rem}.lg\\:text-4xl{font-size:2.25rem;line-height:2.5rem}}.\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:bg-accent:has([aria-selected]){--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.first\\:\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:rounded-l-md:has([aria-selected]):first-child{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem}.last\\:\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:rounded-r-md:has([aria-selected]):last-child{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem}.\\[\\&\\:has\\(\\[aria-selected\\]\\.day-outside\\)\\]\\:bg-accent\\/50:has([aria-selected].day-outside){background-color:hsl(var(--accent) / .5)}.\\[\\&\\:has\\(\\[aria-selected\\]\\.day-range-end\\)\\]\\:rounded-r-md:has([aria-selected].day-range-end){border-top-right-radius:.375rem;border-bottom-right-radius:.375rem}.\\[\\&\\:has\\(\\[data-state\\=checked\\]\\)\\]\\:border-primary:has([data-state=checked]){--tw-border-opacity: 1;border-color:hsl(var(--primary) / var(--tw-border-opacity, 1))}.\\[\\&\\:has\\(\\[data-state\\=checked\\]\\)\\]\\:bg-primary\\/5:has([data-state=checked]){background-color:hsl(var(--primary) / .05)}.\\[\\&\\:has\\(\\[role\\=checkbox\\]\\)\\]\\:pr-0:has([role=checkbox]){padding-right:0}.\\[\\&\\>button\\]\\:hidden>button{display:none}.\\[\\&\\>span\\:last-child\\]\\:truncate>span:last-child{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.\\[\\&\\>span\\]\\:line-clamp-1>span{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.\\[\\&\\>svg\\+div\\]\\:translate-y-\\[-3px\\]>svg+div{--tw-translate-y: -3px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&\\>svg\\]\\:absolute>svg{position:absolute}.\\[\\&\\>svg\\]\\:left-4>svg{left:1rem}.\\[\\&\\>svg\\]\\:top-4>svg{top:1rem}.\\[\\&\\>svg\\]\\:size-4>svg{width:1rem;height:1rem}.\\[\\&\\>svg\\]\\:h-2\\.5>svg{height:.625rem}.\\[\\&\\>svg\\]\\:h-3>svg{height:.75rem}.\\[\\&\\>svg\\]\\:h-3\\.5>svg{height:.875rem}.\\[\\&\\>svg\\]\\:h-4>svg{height:1rem}.\\[\\&\\>svg\\]\\:w-2\\.5>svg{width:.625rem}.\\[\\&\\>svg\\]\\:w-3>svg{width:.75rem}.\\[\\&\\>svg\\]\\:w-3\\.5>svg{width:.875rem}.\\[\\&\\>svg\\]\\:w-4>svg{width:1rem}.\\[\\&\\>svg\\]\\:shrink-0>svg{flex-shrink:0}.\\[\\&\\>svg\\]\\:text-destructive>svg{--tw-text-opacity: 1;color:hsl(var(--destructive) / var(--tw-text-opacity, 1))}.\\[\\&\\>svg\\]\\:text-foreground>svg{--tw-text-opacity: 1;color:hsl(var(--foreground) / var(--tw-text-opacity, 1))}.\\[\\&\\>svg\\]\\:text-muted-foreground>svg{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.\\[\\&\\>svg\\]\\:text-sidebar-accent-foreground>svg{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}.\\[\\&\\>svg\\~\\*\\]\\:pl-7>svg~*{padding-left:1.75rem}.\\[\\&\\>tr\\]\\:last\\:border-b-0:last-child>tr{border-bottom-width:0px}.\\[\\&\\[data-panel-group-direction\\=vertical\\]\\>div\\]\\:rotate-90[data-panel-group-direction=vertical]>div{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&\\[data-state\\=open\\]\\>svg\\]\\:rotate-180[data-state=open]>svg{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&_\\.recharts-cartesian-axis-tick_text\\]\\:fill-muted-foreground .recharts-cartesian-axis-tick text{fill:hsl(var(--muted-foreground) / 1)}.\\[\\&_\\.recharts-cartesian-grid_line\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border\\/50 .recharts-cartesian-grid line[stroke=\"#ccc\"]{stroke:hsl(var(--border) / .5)}.\\[\\&_\\.recharts-curve\\.recharts-tooltip-cursor\\]\\:stroke-border .recharts-curve.recharts-tooltip-cursor{stroke:hsl(var(--border) / 1)}.\\[\\&_\\.recharts-dot\\[stroke\\=\\'\\#fff\\'\\]\\]\\:stroke-transparent .recharts-dot[stroke=\"#fff\"]{stroke:transparent}.\\[\\&_\\.recharts-layer\\]\\:outline-none .recharts-layer{outline:2px solid transparent;outline-offset:2px}.\\[\\&_\\.recharts-polar-grid_\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border .recharts-polar-grid [stroke=\"#ccc\"]{stroke:hsl(var(--border) / 1)}.\\[\\&_\\.recharts-radial-bar-background-sector\\]\\:fill-muted .recharts-radial-bar-background-sector,.\\[\\&_\\.recharts-rectangle\\.recharts-tooltip-cursor\\]\\:fill-muted .recharts-rectangle.recharts-tooltip-cursor{fill:hsl(var(--muted) / 1)}.\\[\\&_\\.recharts-reference-line_\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border .recharts-reference-line [stroke=\"#ccc\"]{stroke:hsl(var(--border) / 1)}.\\[\\&_\\.recharts-sector\\[stroke\\=\\'\\#fff\\'\\]\\]\\:stroke-transparent .recharts-sector[stroke=\"#fff\"]{stroke:transparent}.\\[\\&_\\.recharts-sector\\]\\:outline-none .recharts-sector,.\\[\\&_\\.recharts-surface\\]\\:outline-none .recharts-surface{outline:2px solid transparent;outline-offset:2px}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:px-2 [cmdk-group-heading]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:py-1\\.5 [cmdk-group-heading]{padding-top:.375rem;padding-bottom:.375rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:text-xs [cmdk-group-heading]{font-size:.75rem;line-height:1rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:font-medium [cmdk-group-heading]{font-weight:500}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:text-muted-foreground [cmdk-group-heading]{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.\\[\\&_\\[cmdk-group\\]\\:not\\(\\[hidden\\]\\)_\\~\\[cmdk-group\\]\\]\\:pt-0 [cmdk-group]:not([hidden])~[cmdk-group]{padding-top:0}.\\[\\&_\\[cmdk-group\\]\\]\\:px-2 [cmdk-group]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-input-wrapper\\]_svg\\]\\:h-5 [cmdk-input-wrapper] svg{height:1.25rem}.\\[\\&_\\[cmdk-input-wrapper\\]_svg\\]\\:w-5 [cmdk-input-wrapper] svg{width:1.25rem}.\\[\\&_\\[cmdk-input\\]\\]\\:h-12 [cmdk-input]{height:3rem}.\\[\\&_\\[cmdk-item\\]\\]\\:px-2 [cmdk-item]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-item\\]\\]\\:py-3 [cmdk-item]{padding-top:.75rem;padding-bottom:.75rem}.\\[\\&_\\[cmdk-item\\]_svg\\]\\:h-5 [cmdk-item] svg{height:1.25rem}.\\[\\&_\\[cmdk-item\\]_svg\\]\\:w-5 [cmdk-item] svg{width:1.25rem}.\\[\\&_p\\]\\:leading-relaxed p{line-height:1.625}.\\[\\&_svg\\]\\:pointer-events-none svg{pointer-events:none}.\\[\\&_svg\\]\\:size-4 svg{width:1rem;height:1rem}.\\[\\&_svg\\]\\:shrink-0 svg{flex-shrink:0}.\\[\\&_tr\\:last-child\\]\\:border-0 tr:last-child{border-width:0px}.\\[\\&_tr\\]\\:border-b tr{border-bottom-width:1px}[data-side=left][data-collapsible=offcanvas] .\\[\\[data-side\\=left\\]\\[data-collapsible\\=offcanvas\\]_\\&\\]\\:-right-2{right:-.5rem}[data-side=left][data-state=collapsed] .\\[\\[data-side\\=left\\]\\[data-state\\=collapsed\\]_\\&\\]\\:cursor-e-resize{cursor:e-resize}[data-side=right][data-collapsible=offcanvas] .\\[\\[data-side\\=right\\]\\[data-collapsible\\=offcanvas\\]_\\&\\]\\:-left-2{left:-.5rem}[data-side=right][data-state=collapsed] .\\[\\[data-side\\=right\\]\\[data-state\\=collapsed\\]_\\&\\]\\:cursor-w-resize{cursor:w-resize}\n","path":null,"size_bytes":180857,"size_tokens":null},"client/my-app/next-env.d.ts":{"content":"/// <reference types=\"next\" />\n/// <reference types=\"next/image-types/global\" />\n/// <reference path=\"./.next/types/routes.d.ts\" />\n\n// NOTE: This file should not be edited\n// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.\n","path":null,"size_bytes":262,"size_tokens":null},"ios/App/App/public/sw.js":{"content":"const CACHE_NAME = 'bibliasf-v1.1.0';\nconst STATIC_CACHE = 'bibliasf-static-v1.1.0';\nconst DYNAMIC_CACHE = 'bibliasf-dynamic-v1.1.0';\n\nconst STATIC_ASSETS = [\n  '/',\n  '/index.html',\n  '/manifest.json',\n  '/bible.db',\n  '/favicon.ico',\n  '/favicon.png',\n  '/android-chrome-192x192.png',\n  '/android-chrome-512x512.png',\n  '/apple-touch-icon.png'\n];\n\nconst API_CACHE_PATTERNS = [\n  /\\/api\\/bible\\//,\n  /\\/api\\/daily-verse/,\n  /\\/api\\/reading-plans/\n];\n\nself.addEventListener('install', (event) => {\n  console.log('[ServiceWorker] Install');\n  event.waitUntil(\n    caches.open(STATIC_CACHE)\n      .then((cache) => {\n        console.log('[ServiceWorker] Caching static assets');\n        return cache.addAll(STATIC_ASSETS);\n      })\n      .then(() => self.skipWaiting())\n  );\n});\n\nself.addEventListener('activate', (event) => {\n  console.log('[ServiceWorker] Activate');\n  event.waitUntil(\n    caches.keys()\n      .then((keys) => {\n        return Promise.all(\n          keys\n            .filter((key) => key !== STATIC_CACHE && key !== DYNAMIC_CACHE && key !== CACHE_NAME)\n            .map((key) => {\n              console.log('[ServiceWorker] Removing old cache:', key);\n              return caches.delete(key);\n            })\n        );\n      })\n      .then(() => clients.claim())\n  );\n});\n\nself.addEventListener('fetch', (event) => {\n  const { request } = event;\n  const url = new URL(request.url);\n\n  if (request.method !== 'GET') {\n    return;\n  }\n\n  if (url.origin !== location.origin) {\n    return;\n  }\n\n  const isApiRequest = url.pathname.startsWith('/api/');\n  const shouldCacheApi = API_CACHE_PATTERNS.some(pattern => pattern.test(url.pathname));\n\n  if (isApiRequest) {\n    if (shouldCacheApi) {\n      event.respondWith(networkFirstWithCache(request, DYNAMIC_CACHE));\n    } else {\n      event.respondWith(networkOnly(request));\n    }\n  } else {\n    event.respondWith(cacheFirstWithNetwork(request));\n  }\n});\n\nasync function cacheFirstWithNetwork(request) {\n  const cachedResponse = await caches.match(request);\n  if (cachedResponse) {\n    return cachedResponse;\n  }\n\n  try {\n    const networkResponse = await fetch(request);\n    if (networkResponse.ok) {\n      const cache = await caches.open(STATIC_CACHE);\n      cache.put(request, networkResponse.clone());\n    }\n    return networkResponse;\n  } catch (error) {\n    console.log('[ServiceWorker] Fetch failed, returning offline page:', error);\n    const offlineResponse = await caches.match('/');\n    if (offlineResponse) {\n      return offlineResponse;\n    }\n    return new Response('Offline', { status: 503, statusText: 'Service Unavailable' });\n  }\n}\n\nasync function networkFirstWithCache(request, cacheName) {\n  try {\n    const networkResponse = await fetch(request);\n    if (networkResponse.ok) {\n      const cache = await caches.open(cacheName);\n      cache.put(request, networkResponse.clone());\n    }\n    return networkResponse;\n  } catch (error) {\n    console.log('[ServiceWorker] Network failed, trying cache:', error);\n    const cachedResponse = await caches.match(request);\n    if (cachedResponse) {\n      return cachedResponse;\n    }\n    return new Response(JSON.stringify({ error: 'Offline' }), {\n      status: 503,\n      headers: { 'Content-Type': 'application/json' }\n    });\n  }\n}\n\nasync function networkOnly(request) {\n  try {\n    return await fetch(request);\n  } catch (error) {\n    return new Response(JSON.stringify({ error: 'Offline' }), {\n      status: 503,\n      headers: { 'Content-Type': 'application/json' }\n    });\n  }\n}\n\nself.addEventListener('push', (event) => {\n  console.log('[ServiceWorker] Push received');\n  \n  let data = {\n    title: 'BíbliaFS',\n    body: 'Você tem uma nova notificação',\n    icon: '/android-chrome-192x192.png',\n    badge: '/favicon.png',\n    tag: 'bibliasf-notification',\n    data: {}\n  };\n  \n  if (event.data) {\n    try {\n      data = { ...data, ...event.data.json() };\n    } catch (e) {\n      data.body = event.data.text();\n    }\n  }\n  \n  const options = {\n    body: data.body,\n    icon: data.icon || '/android-chrome-192x192.png',\n    badge: data.badge || '/favicon.png',\n    tag: data.tag || 'bibliasf-notification',\n    vibrate: [100, 50, 100],\n    data: data.data || {},\n    actions: data.actions || [\n      { action: 'open', title: 'Abrir' },\n      { action: 'dismiss', title: 'Fechar' }\n    ],\n    requireInteraction: data.requireInteraction || false\n  };\n  \n  event.waitUntil(\n    self.registration.showNotification(data.title, options)\n  );\n});\n\nself.addEventListener('notificationclick', (event) => {\n  console.log('[ServiceWorker] Notification click:', event.action);\n  \n  event.notification.close();\n  \n  if (event.action === 'dismiss') {\n    return;\n  }\n  \n  const urlToOpen = event.notification.data?.url || '/';\n  \n  event.waitUntil(\n    clients.matchAll({ type: 'window', includeUncontrolled: true })\n      .then((clientList) => {\n        for (const client of clientList) {\n          if (client.url.includes(self.location.origin) && 'focus' in client) {\n            client.navigate(urlToOpen);\n            return client.focus();\n          }\n        }\n        if (clients.openWindow) {\n          return clients.openWindow(urlToOpen);\n        }\n      })\n  );\n  \n  if (event.notification.data?.notificationId) {\n    fetch('/api/notifications/clicked', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ notificationId: event.notification.data.notificationId })\n    }).catch(console.error);\n  }\n});\n\nself.addEventListener('notificationclose', (event) => {\n  console.log('[ServiceWorker] Notification closed');\n});\n\nself.addEventListener('message', (event) => {\n  if (event.data && event.data.type === 'SKIP_WAITING') {\n    self.skipWaiting();\n  }\n});\n","path":null,"size_bytes":5736,"size_tokens":null},"client/src/components/AISearch.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, Loader2, BookOpen, Sparkles, X } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Link } from \"wouter\";\n\ninterface SearchResult {\n  reference: string;\n  book: string;\n  chapter: number;\n  verse: number;\n  text: string;\n  relevance: string;\n}\n\ninterface AISearchResponse {\n  query: string;\n  results: SearchResult[];\n  summary: string;\n}\n\nexport function AISearch() {\n  const [query, setQuery] = useState(\"\");\n  const [isOpen, setIsOpen] = useState(false);\n  const { toast } = useToast();\n\n  const searchMutation = useMutation({\n    mutationFn: async (searchQuery: string): Promise<AISearchResponse> => {\n      const response = await apiRequest(\"POST\", \"/api/bible/ai-search\", { query: searchQuery });\n      return response.json();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro na busca\",\n        description: error.message || \"Não foi possível realizar a busca.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (query.trim().length < 3) {\n      toast({\n        title: \"Busca muito curta\",\n        description: \"Digite pelo menos 3 caracteres para buscar.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    searchMutation.mutate(query);\n  };\n\n  return (\n    <div className=\"w-full\">\n      <form onSubmit={handleSearch} className=\"flex flex-col sm:flex-row gap-2\">\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            type=\"text\"\n            placeholder=\"Pergunte sobre qualquer tema bíblico...\"\n            value={query}\n            onChange={(e) => setQuery(e.target.value)}\n            onFocus={() => setIsOpen(true)}\n            className=\"pl-10 w-full\"\n            data-testid=\"input-ai-search\"\n          />\n        </div>\n        <Button\n          type=\"submit\"\n          size=\"sm\"\n          disabled={searchMutation.isPending || query.trim().length < 3}\n          className=\"h-9 px-4 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md shrink-0 w-full sm:w-auto\"\n          data-testid=\"button-ai-search\"\n        >\n          {searchMutation.isPending ? (\n            <Loader2 className=\"h-4 w-4 animate-spin\" />\n          ) : (\n            <>\n              <Sparkles className=\"h-4 w-4 mr-1\" />\n              Buscar\n            </>\n          )}\n        </Button>\n      </form>\n\n      {isOpen && (searchMutation.data || searchMutation.isPending) && (\n        <Card className=\"absolute z-50 w-full mt-2 shadow-xl border-primary/20\">\n          <CardHeader className=\"pb-2 flex flex-row items-center justify-between\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <Sparkles className=\"h-5 w-5 text-primary\" />\n              Resultados da Busca IA\n            </CardTitle>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={() => setIsOpen(false)}\n              data-testid=\"button-close-search\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </CardHeader>\n          <CardContent>\n            {searchMutation.isPending ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n                <span className=\"ml-3 text-muted-foreground\">Buscando versículos...</span>\n              </div>\n            ) : searchMutation.data ? (\n              <div className=\"space-y-4\">\n                {searchMutation.data.summary && (\n                  <div className=\"p-3 bg-primary/5 rounded-lg border border-primary/20\">\n                    <p className=\"text-sm text-muted-foreground\">{searchMutation.data.summary}</p>\n                  </div>\n                )}\n                \n                <ScrollArea className=\"h-[300px]\">\n                  <div className=\"space-y-3\">\n                    {searchMutation.data.results.map((result, index) => (\n                      <Link\n                        key={index}\n                        href={`/bible?book=${result.book}&chapter=${result.chapter}`}\n                        onClick={() => setIsOpen(false)}\n                      >\n                        <Card className=\"cursor-pointer hover-elevate transition-all\" data-testid={`card-search-result-${index}`}>\n                          <CardContent className=\"p-3\">\n                            <div className=\"flex items-start justify-between gap-2\">\n                              <div className=\"flex-1\">\n                                <div className=\"flex items-center gap-2 mb-1\">\n                                  <BookOpen className=\"h-4 w-4 text-primary\" />\n                                  <span className=\"font-semibold text-sm\">{result.reference}</span>\n                                  <Badge variant=\"secondary\" className=\"text-xs\">\n                                    {result.relevance}\n                                  </Badge>\n                                </div>\n                                <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                                  \"{result.text}\"\n                                </p>\n                              </div>\n                            </div>\n                          </CardContent>\n                        </Card>\n                      </Link>\n                    ))}\n                  </div>\n                </ScrollArea>\n\n                {searchMutation.data.results.length === 0 && (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    Nenhum versículo encontrado para sua busca.\n                  </div>\n                )}\n              </div>\n            ) : null}\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":6324,"size_tokens":null},"android/app/src/test/java/com/getcapacitor/myapp/ExampleUnitTest.java":{"content":"package com.getcapacitor.myapp;\n\nimport static org.junit.Assert.*;\n\nimport org.junit.Test;\n\n/**\n * Example local unit test, which will execute on the development machine (host).\n *\n * @see <a href=\"http://d.android.com/tools/testing\">Testing documentation</a>\n */\npublic class ExampleUnitTest {\n\n    @Test\n    public void addition_isCorrect() throws Exception {\n        assertEquals(4, 2 + 2);\n    }\n}\n","path":null,"size_bytes":402,"size_tokens":null},"client/src/service-worker.ts":{"content":"// Service worker to provide offline support for BíbliaFS\nconst CACHE_NAME = 'bibliafs-v1';\nconst ASSETS_TO_CACHE = [\n  '/',\n  '/index.html',\n  '/manifest.json',\n  '/favicon-32x32.png',\n  '/apple-touch-icon.png',\n  '/icon-192.png',\n  '/icon-512.png'\n];\n\nself.addEventListener('install', (event: any) => {\n  event.waitUntil(\n    caches.open(CACHE_NAME).then((cache) => {\n      return cache.addAll(ASSETS_TO_CACHE);\n    })\n  );\n});\n\nself.addEventListener('activate', (event: any) => {\n  event.waitUntil(\n    caches.keys().then((cacheNames) => {\n      return Promise.all(\n        cacheNames.map((cacheName) => {\n          if (cacheName !== CACHE_NAME) {\n            return caches.delete(cacheName);\n          }\n        })\n      );\n    })\n  );\n});\n\nself.addEventListener('fetch', (event: any) => {\n  // Only cache GET requests\n  if (event.request.method !== 'GET') return;\n\n  event.respondWith(\n    caches.match(event.request).then((response) => {\n      if (response) {\n        return response;\n      }\n\n      return fetch(event.request).then((fetchResponse) => {\n        // Don't cache if not a success response or if it's an API call we don't want to cache\n        if (!fetchResponse || fetchResponse.status !== 200 || fetchResponse.type !== 'basic') {\n          return fetchResponse;\n        }\n\n        const responseToCache = fetchResponse.clone();\n        caches.open(CACHE_NAME).then((cache) => {\n          cache.put(event.request, responseToCache);\n        });\n\n        return fetchResponse;\n      }).catch(() => {\n        // Fallback for when both cache and network fail\n        if (event.request.mode === 'navigate') {\n          return caches.match('/');\n        }\n        return null;\n      });\n    })\n  );\n});\n","path":null,"size_bytes":1718,"size_tokens":null},"client/src/pages/auth-callback.tsx":{"content":"import { useEffect, useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { supabase } from '@/lib/supabase';\nimport { Loader2 } from 'lucide-react';\nimport { persistentStorage } from '@/lib/persistentStorage';\n\nconst SESSION_KEY = 'supabase_session';\n\nasync function saveSessionToPersistentStorage(session: any) {\n  try {\n    await persistentStorage.setItem(SESSION_KEY, JSON.stringify(session));\n    localStorage.setItem(SESSION_KEY, JSON.stringify(session));\n    console.log('[AuthCallback] Session saved to persistent storage');\n  } catch (error) {\n    console.error('[AuthCallback] Error saving session:', error);\n  }\n}\n\nexport default function AuthCallback() {\n  const [, setLocation] = useLocation();\n  const [status, setStatus] = useState<'processing' | 'success' | 'error'>('processing');\n  const [errorMessage, setErrorMessage] = useState('');\n\n  useEffect(() => {\n    const handleCallback = async () => {\n      try {\n        const hashParams = new URLSearchParams(window.location.hash.substring(1));\n        const accessToken = hashParams.get('access_token');\n        const refreshToken = hashParams.get('refresh_token');\n\n        if (accessToken && refreshToken) {\n          console.log('[AuthCallback] Setting session from hash tokens');\n          const { error } = await supabase.auth.setSession({\n            access_token: accessToken,\n            refresh_token: refreshToken,\n          });\n\n          if (error) {\n            console.error('[AuthCallback] Error setting session:', error);\n            setStatus('error');\n            setErrorMessage(error.message);\n            return;\n          }\n\n          const { data: { session } } = await supabase.auth.getSession();\n          if (session) {\n            await saveSessionToPersistentStorage(session);\n          }\n\n          setStatus('success');\n          setTimeout(() => setLocation('/'), 1000);\n          return;\n        }\n\n        const code = new URLSearchParams(window.location.search).get('code');\n        if (code) {\n          console.log('[AuthCallback] Exchanging code for session');\n          const { error } = await supabase.auth.exchangeCodeForSession(code);\n          \n          if (error) {\n            console.error('[AuthCallback] Error exchanging code:', error);\n            setStatus('error');\n            setErrorMessage(error.message);\n            return;\n          }\n\n          const { data: { session } } = await supabase.auth.getSession();\n          if (session) {\n            await saveSessionToPersistentStorage(session);\n          }\n\n          setStatus('success');\n          setTimeout(() => setLocation('/'), 1000);\n          return;\n        }\n\n        const { data: { session } } = await supabase.auth.getSession();\n        if (session) {\n          await saveSessionToPersistentStorage(session);\n          setStatus('success');\n          setTimeout(() => setLocation('/'), 1000);\n        } else {\n          setStatus('error');\n          setErrorMessage('Nenhum token de autenticação encontrado');\n        }\n      } catch (err: any) {\n        console.error('[AuthCallback] Unexpected error:', err);\n        setStatus('error');\n        setErrorMessage(err.message || 'Erro inesperado');\n      }\n    };\n\n    handleCallback();\n  }, [setLocation]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background\">\n      <div className=\"text-center p-8\">\n        {status === 'processing' && (\n          <>\n            <Loader2 className=\"h-12 w-12 animate-spin text-primary mx-auto mb-4\" />\n            <h1 className=\"text-xl font-semibold text-foreground\">Autenticando...</h1>\n            <p className=\"text-muted-foreground mt-2\">Aguarde enquanto configuramos sua sessão</p>\n          </>\n        )}\n\n        {status === 'success' && (\n          <>\n            <div className=\"h-12 w-12 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"h-6 w-6 text-green-600 dark:text-green-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              </svg>\n            </div>\n            <h1 className=\"text-xl font-semibold text-foreground\">Login realizado!</h1>\n            <p className=\"text-muted-foreground mt-2\">Redirecionando...</p>\n          </>\n        )}\n\n        {status === 'error' && (\n          <>\n            <div className=\"h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"h-6 w-6 text-red-600 dark:text-red-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </div>\n            <h1 className=\"text-xl font-semibold text-foreground\">Erro na autenticação</h1>\n            <p className=\"text-muted-foreground mt-2\">{errorMessage}</p>\n            <button\n              onClick={() => setLocation('/login')}\n              className=\"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90\"\n            >\n              Voltar ao login\n            </button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":5304,"size_tokens":null},"client/src/components/seo/SEO.tsx":{"content":"import { useEffect } from \"react\";\n\ninterface SEOProps {\n  title?: string;\n  description?: string;\n  ogTitle?: string;\n  ogDescription?: string;\n  ogImage?: string;\n  ogType?: string;\n  canonical?: string;\n}\n\nexport function SEO({\n  title,\n  description,\n  ogTitle,\n  ogDescription,\n  ogImage,\n  ogType = \"website\",\n  canonical,\n}: SEOProps) {\n  const siteName = \"BíbliaFS v1.0.9\";\n  const fullTitle = title ? `${title} | ${siteName}` : siteName;\n  const defaultDescription = \"BíbliaFS - Um aplicativo bíblico premium com IA teológica, planos de leitura personalizados e comunidade espiritual.\";\n  const defaultOgImage = \"https://bibliafs.replit.app/og-image.png\"; // Placeholder for actual branding image\n\n  useEffect(() => {\n    // Update document title\n    document.title = fullTitle;\n\n    // Helper to update meta tags\n    const updateMeta = (name: string, content: string, attr = \"name\") => {\n      let element = document.querySelector(`meta[${attr}=\"${name}\"]`);\n      if (!element) {\n        element = document.createElement(\"meta\");\n        element.setAttribute(attr, name);\n        document.head.appendChild(element);\n      }\n      element.setAttribute(\"content\", content);\n    };\n\n    updateMeta(\"description\", description || defaultDescription);\n    updateMeta(\"og:title\", ogTitle || fullTitle, \"property\");\n    updateMeta(\"og:description\", ogDescription || description || defaultDescription, \"property\");\n    updateMeta(\"og:image\", ogImage || defaultOgImage, \"property\");\n    updateMeta(\"og:type\", ogType, \"property\");\n    updateMeta(\"og:site_name\", siteName, \"property\");\n\n    if (canonical) {\n      let link = document.querySelector('link[rel=\"canonical\"]');\n      if (!link) {\n        link = document.createElement(\"link\");\n        link.setAttribute(\"rel\", \"canonical\");\n        document.head.appendChild(link);\n      }\n      link.setAttribute(\"href\", canonical);\n    }\n  }, [title, description, ogTitle, ogDescription, ogImage, ogType, canonical]);\n\n  return null;\n}\n","path":null,"size_bytes":1987,"size_tokens":null},"android/app/src/androidTest/java/com/getcapacitor/myapp/ExampleInstrumentedTest.java":{"content":"package com.getcapacitor.myapp;\n\nimport static org.junit.Assert.*;\n\nimport android.content.Context;\nimport androidx.test.ext.junit.runners.AndroidJUnit4;\nimport androidx.test.platform.app.InstrumentationRegistry;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\n\n/**\n * Instrumented test, which will execute on an Android device.\n *\n * @see <a href=\"http://d.android.com/tools/testing\">Testing documentation</a>\n */\n@RunWith(AndroidJUnit4.class)\npublic class ExampleInstrumentedTest {\n\n    @Test\n    public void useAppContext() throws Exception {\n        // Context of the app under test.\n        Context appContext = InstrumentationRegistry.getInstrumentation().getTargetContext();\n\n        assertEquals(\"com.getcapacitor.app\", appContext.getPackageName());\n    }\n}\n","path":null,"size_bytes":774,"size_tokens":null},"ios/App/App/public/assets/index-UgX1grkG.js":{"content":"var ZU=Object.defineProperty;var TS=e=>{throw TypeError(e)};var e9=(e,t,r)=>t in e?ZU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var U=(e,t,r)=>e9(e,typeof t!=\"symbol\"?t+\"\":t,r),Ly=(e,t,r)=>t.has(e)||TS(\"Cannot \"+r);var B=(e,t,r)=>(Ly(e,t,\"read from private field\"),r?r.call(e):t.get(e)),lt=(e,t,r)=>t.has(e)?TS(\"Cannot add the same private member more than once\"):t instanceof WeakSet?t.add(e):t.set(e,r),De=(e,t,r,s)=>(Ly(e,t,\"write to private field\"),s?s.call(e,r):t.set(e,r),r),Ot=(e,t,r)=>(Ly(e,t,\"access private method\"),r);var mp=(e,t,r,s)=>({set _(a){De(e,t,a,r)},get _(){return B(e,t,s)}});function K4(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!=\"string\"&&!Array.isArray(s)){for(const a in s)if(a!==\"default\"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}))}(function(){const t=document.createElement(\"link\").relList;if(t&&t.supports&&t.supports(\"modulepreload\"))return;for(const a of document.querySelectorAll('link[rel=\"modulepreload\"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type===\"childList\")for(const o of i.addedNodes)o.tagName===\"LINK\"&&o.rel===\"modulepreload\"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin===\"use-credentials\"?i.credentials=\"include\":a.crossOrigin===\"anonymous\"?i.credentials=\"omit\":i.credentials=\"same-origin\",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var cd=typeof globalThis<\"u\"?globalThis:typeof window<\"u\"?window:typeof global<\"u\"?global:typeof self<\"u\"?self:{};function dv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}function Yu(e){if(e.__esModule)return e;var t=e.default;if(typeof t==\"function\"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,\"__esModule\",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var G4={exports:{}},uv={},Q4={exports:{}},Bt={};/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var _f=Symbol.for(\"react.element\"),t9=Symbol.for(\"react.portal\"),r9=Symbol.for(\"react.fragment\"),s9=Symbol.for(\"react.strict_mode\"),n9=Symbol.for(\"react.profiler\"),a9=Symbol.for(\"react.provider\"),i9=Symbol.for(\"react.context\"),o9=Symbol.for(\"react.forward_ref\"),l9=Symbol.for(\"react.suspense\"),c9=Symbol.for(\"react.memo\"),d9=Symbol.for(\"react.lazy\"),AS=Symbol.iterator;function u9(e){return e===null||typeof e!=\"object\"?null:(e=AS&&e[AS]||e[\"@@iterator\"],typeof e==\"function\"?e:null)}var J4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X4=Object.assign,Y4={};function Zu(e,t,r){this.props=e,this.context=t,this.refs=Y4,this.updater=r||J4}Zu.prototype.isReactComponent={};Zu.prototype.setState=function(e,t){if(typeof e!=\"object\"&&typeof e!=\"function\"&&e!=null)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,e,t,\"setState\")};Zu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,\"forceUpdate\")};function Z4(){}Z4.prototype=Zu.prototype;function Yj(e,t,r){this.props=e,this.context=t,this.refs=Y4,this.updater=r||J4}var Zj=Yj.prototype=new Z4;Zj.constructor=Yj;X4(Zj,Zu.prototype);Zj.isPureReactComponent=!0;var RS=Array.isArray,e5=Object.prototype.hasOwnProperty,e1={current:null},t5={key:!0,ref:!0,__self:!0,__source:!0};function r5(e,t,r){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=\"\"+t.key),t)e5.call(t,s)&&!t5.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:_f,type:e,key:i,ref:o,props:a,_owner:e1.current}}function h9(e,t){return{$$typeof:_f,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function t1(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===_f}function m9(e){var t={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+e.replace(/[=:]/g,function(r){return t[r]})}var OS=/\\/+/g;function $y(e,t){return typeof e==\"object\"&&e!==null&&e.key!=null?m9(\"\"+e.key):t.toString(36)}function lg(e,t,r,s,a){var i=typeof e;(i===\"undefined\"||i===\"boolean\")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case\"string\":case\"number\":o=!0;break;case\"object\":switch(e.$$typeof){case _f:case t9:o=!0}}if(o)return o=e,a=a(o),e=s===\"\"?\".\"+$y(o,0):s,RS(a)?(r=\"\",e!=null&&(r=e.replace(OS,\"$&/\")+\"/\"),lg(a,t,r,\"\",function(d){return d})):a!=null&&(t1(a)&&(a=h9(a,r+(!a.key||o&&o.key===a.key?\"\":(\"\"+a.key).replace(OS,\"$&/\")+\"/\")+e)),t.push(a)),1;if(o=0,s=s===\"\"?\".\":s+\":\",RS(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+$y(i,l);o+=lg(i,t,r,c,a)}else if(c=u9(e),typeof c==\"function\")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+$y(i,l++),o+=lg(i,t,r,c,a);else if(i===\"object\")throw t=String(e),Error(\"Objects are not valid as a React child (found: \"+(t===\"[object Object]\"?\"object with keys {\"+Object.keys(e).join(\", \")+\"}\":t)+\"). If you meant to render a collection of children, use an array instead.\");return o}function fp(e,t,r){if(e==null)return e;var s=[],a=0;return lg(e,s,\"\",\"\",function(i){return t.call(r,i,a++)}),s}function f9(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mn={current:null},cg={transition:null},p9={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:cg,ReactCurrentOwner:e1};function s5(){throw Error(\"act(...) is not supported in production builds of React.\")}Bt.Children={map:fp,forEach:function(e,t,r){fp(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return fp(e,function(){t++}),t},toArray:function(e){return fp(e,function(t){return t})||[]},only:function(e){if(!t1(e))throw Error(\"React.Children.only expected to receive a single React element child.\");return e}};Bt.Component=Zu;Bt.Fragment=r9;Bt.Profiler=n9;Bt.PureComponent=Yj;Bt.StrictMode=s9;Bt.Suspense=l9;Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p9;Bt.act=s5;Bt.cloneElement=function(e,t,r){if(e==null)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+e+\".\");var s=X4({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=e1.current),t.key!==void 0&&(a=\"\"+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)e5.call(t,c)&&!t5.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:_f,type:e.type,key:a,ref:i,props:s,_owner:o}};Bt.createContext=function(e){return e={$$typeof:i9,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:a9,_context:e},e.Consumer=e};Bt.createElement=r5;Bt.createFactory=function(e){var t=r5.bind(null,e);return t.type=e,t};Bt.createRef=function(){return{current:null}};Bt.forwardRef=function(e){return{$$typeof:o9,render:e}};Bt.isValidElement=t1;Bt.lazy=function(e){return{$$typeof:d9,_payload:{_status:-1,_result:e},_init:f9}};Bt.memo=function(e,t){return{$$typeof:c9,type:e,compare:t===void 0?null:t}};Bt.startTransition=function(e){var t=cg.transition;cg.transition={};try{e()}finally{cg.transition=t}};Bt.unstable_act=s5;Bt.useCallback=function(e,t){return mn.current.useCallback(e,t)};Bt.useContext=function(e){return mn.current.useContext(e)};Bt.useDebugValue=function(){};Bt.useDeferredValue=function(e){return mn.current.useDeferredValue(e)};Bt.useEffect=function(e,t){return mn.current.useEffect(e,t)};Bt.useId=function(){return mn.current.useId()};Bt.useImperativeHandle=function(e,t,r){return mn.current.useImperativeHandle(e,t,r)};Bt.useInsertionEffect=function(e,t){return mn.current.useInsertionEffect(e,t)};Bt.useLayoutEffect=function(e,t){return mn.current.useLayoutEffect(e,t)};Bt.useMemo=function(e,t){return mn.current.useMemo(e,t)};Bt.useReducer=function(e,t,r){return mn.current.useReducer(e,t,r)};Bt.useRef=function(e){return mn.current.useRef(e)};Bt.useState=function(e){return mn.current.useState(e)};Bt.useSyncExternalStore=function(e,t,r){return mn.current.useSyncExternalStore(e,t,r)};Bt.useTransition=function(){return mn.current.useTransition()};Bt.version=\"18.3.1\";Q4.exports=Bt;var f=Q4.exports;const He=dv(f),n5=K4({__proto__:null,default:He},[f]);/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var g9=f,x9=Symbol.for(\"react.element\"),v9=Symbol.for(\"react.fragment\"),y9=Object.prototype.hasOwnProperty,b9=g9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w9={key:!0,ref:!0,__self:!0,__source:!0};function a5(e,t,r){var s,a={},i=null,o=null;r!==void 0&&(i=\"\"+r),t.key!==void 0&&(i=\"\"+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)y9.call(t,s)&&!w9.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:x9,type:e,key:i,ref:o,props:a,_owner:b9.current}}uv.Fragment=v9;uv.jsx=a5;uv.jsxs=a5;G4.exports=uv;var n=G4.exports,i5={exports:{}},ra={},o5={exports:{}},l5={};/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */(function(e){function t(H,V){var oe=H.length;H.push(V);e:for(;0<oe;){var _e=oe-1>>>1,ke=H[_e];if(0<a(ke,V))H[_e]=V,H[oe]=ke,oe=_e;else break e}}function r(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var V=H[0],oe=H.pop();if(oe!==V){H[0]=oe;e:for(var _e=0,ke=H.length,at=ke>>>1;_e<at;){var it=2*(_e+1)-1,kt=H[it],wt=it+1,Ee=H[wt];if(0>a(kt,oe))wt<ke&&0>a(Ee,kt)?(H[_e]=Ee,H[wt]=oe,_e=wt):(H[_e]=kt,H[it]=oe,_e=it);else if(wt<ke&&0>a(Ee,oe))H[_e]=Ee,H[wt]=oe,_e=wt;else break e}}return V}function a(H,V){var oe=H.sortIndex-V.sortIndex;return oe!==0?oe:H.id-V.id}if(typeof performance==\"object\"&&typeof performance.now==\"function\"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,g=!1,v=!1,x=!1,w=typeof setTimeout==\"function\"?setTimeout:null,y=typeof clearTimeout==\"function\"?clearTimeout:null,b=typeof setImmediate<\"u\"?setImmediate:null;typeof navigator<\"u\"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(H){for(var V=r(d);V!==null;){if(V.callback===null)s(d);else if(V.startTime<=H)s(d),V.sortIndex=V.expirationTime,t(c,V);else break;V=r(d)}}function _(H){if(x=!1,N(H),!v)if(r(c)!==null)v=!0,F(E);else{var V=r(d);V!==null&&ce(_,V.startTime-H)}}function E(H,V){v=!1,x&&(x=!1,y(C),C=-1),g=!0;var oe=m;try{for(N(V),h=r(c);h!==null&&(!(h.expirationTime>V)||H&&!q());){var _e=h.callback;if(typeof _e==\"function\"){h.callback=null,m=h.priorityLevel;var ke=_e(h.expirationTime<=V);V=e.unstable_now(),typeof ke==\"function\"?h.callback=ke:h===r(c)&&s(c),N(V)}else s(c);h=r(c)}if(h!==null)var at=!0;else{var it=r(d);it!==null&&ce(_,it.startTime-V),at=!1}return at}finally{h=null,m=oe,g=!1}}var k=!1,P=null,C=-1,A=5,O=-1;function q(){return!(e.unstable_now()-O<A)}function K(){if(P!==null){var H=e.unstable_now();O=H;var V=!0;try{V=P(!0,H)}finally{V?D():(k=!1,P=null)}}else k=!1}var D;if(typeof b==\"function\")D=function(){b(K)};else if(typeof MessageChannel<\"u\"){var W=new MessageChannel,Q=W.port2;W.port1.onmessage=K,D=function(){Q.postMessage(null)}}else D=function(){w(K,0)};function F(H){P=H,k||(k=!0,D())}function ce(H,V){C=w(function(){H(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,F(E))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):A=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(H){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var oe=m;m=V;try{return H()}finally{m=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,V){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var oe=m;m=H;try{return V()}finally{m=oe}},e.unstable_scheduleCallback=function(H,V,oe){var _e=e.unstable_now();switch(typeof oe==\"object\"&&oe!==null?(oe=oe.delay,oe=typeof oe==\"number\"&&0<oe?_e+oe:_e):oe=_e,H){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=oe+ke,H={id:u++,callback:V,priorityLevel:H,startTime:oe,expirationTime:ke,sortIndex:-1},oe>_e?(H.sortIndex=oe,t(d,H),r(c)===null&&H===r(d)&&(x?(y(C),C=-1):x=!0,ce(_,oe-_e))):(H.sortIndex=ke,t(c,H),v||g||(v=!0,F(E))),H},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(H){var V=m;return function(){var oe=m;m=V;try{return H.apply(this,arguments)}finally{m=oe}}}})(l5);o5.exports=l5;var j9=o5.exports;/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var N9=f,Zn=j9;function be(e){for(var t=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+e,r=1;r<arguments.length;r++)t+=\"&args[]=\"+encodeURIComponent(arguments[r]);return\"Minified React error #\"+e+\"; visit \"+t+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var c5=new Set,_m={};function Gc(e,t){Nu(e,t),Nu(e+\"Capture\",t)}function Nu(e,t){for(_m[e]=t,e=0;e<t.length;e++)c5.add(t[e])}var ao=!(typeof window>\"u\"||typeof window.document>\"u\"||typeof window.document.createElement>\"u\"),v0=Object.prototype.hasOwnProperty,_9=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,IS={},DS={};function S9(e){return v0.call(DS,e)?!0:v0.call(IS,e)?!1:_9.test(e)?DS[e]=!0:(IS[e]=!0,!1)}function k9(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case\"function\":case\"symbol\":return!0;case\"boolean\":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!==\"data-\"&&e!==\"aria-\");default:return!1}}function C9(e,t,r,s){if(t===null||typeof t>\"u\"||k9(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function fn(e,t,r,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var $s={};\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(e){$s[e]=new fn(e,0,!1,e,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(e){var t=e[0];$s[t]=new fn(t,1,!1,e[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(e){$s[e]=new fn(e,2,!1,e.toLowerCase(),null,!1,!1)});[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(e){$s[e]=new fn(e,2,!1,e,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(e){$s[e]=new fn(e,3,!1,e.toLowerCase(),null,!1,!1)});[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(e){$s[e]=new fn(e,3,!0,e,null,!1,!1)});[\"capture\",\"download\"].forEach(function(e){$s[e]=new fn(e,4,!1,e,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(e){$s[e]=new fn(e,6,!1,e,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(e){$s[e]=new fn(e,5,!1,e.toLowerCase(),null,!1,!1)});var r1=/[\\-:]([a-z])/g;function s1(e){return e[1].toUpperCase()}\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(e){var t=e.replace(r1,s1);$s[t]=new fn(t,1,!1,e,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(e){var t=e.replace(r1,s1);$s[t]=new fn(t,1,!1,e,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(e){var t=e.replace(r1,s1);$s[t]=new fn(t,1,!1,e,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(e){$s[e]=new fn(e,1,!1,e.toLowerCase(),null,!1,!1)});$s.xlinkHref=new fn(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(e){$s[e]=new fn(e,1,!1,e.toLowerCase(),null,!0,!0)});function n1(e,t,r,s){var a=$s.hasOwnProperty(t)?$s[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!==\"o\"&&t[0]!==\"O\"||t[1]!==\"n\"&&t[1]!==\"N\")&&(C9(t,r,a,s)&&(r=null),s||a===null?S9(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,\"\"+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:\"\":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?\"\":\"\"+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var go=N9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pp=Symbol.for(\"react.element\"),kd=Symbol.for(\"react.portal\"),Cd=Symbol.for(\"react.fragment\"),a1=Symbol.for(\"react.strict_mode\"),y0=Symbol.for(\"react.profiler\"),d5=Symbol.for(\"react.provider\"),u5=Symbol.for(\"react.context\"),i1=Symbol.for(\"react.forward_ref\"),b0=Symbol.for(\"react.suspense\"),w0=Symbol.for(\"react.suspense_list\"),o1=Symbol.for(\"react.memo\"),Lo=Symbol.for(\"react.lazy\"),h5=Symbol.for(\"react.offscreen\"),MS=Symbol.iterator;function Ph(e){return e===null||typeof e!=\"object\"?null:(e=MS&&e[MS]||e[\"@@iterator\"],typeof e==\"function\"?e:null)}var Rr=Object.assign,Fy;function Kh(e){if(Fy===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\\n( *(at )?)/);Fy=t&&t[1]||\"\"}return`\n`+Fy+e}var Vy=!1;function zy(e,t){if(!e||Vy)return\"\";Vy=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack==\"string\"){for(var a=d.stack.split(`\n`),i=s.stack.split(`\n`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`\n`+a[o].replace(\" at new \",\" at \");return e.displayName&&c.includes(\"<anonymous>\")&&(c=c.replace(\"<anonymous>\",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Vy=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:\"\")?Kh(e):\"\"}function E9(e){switch(e.tag){case 5:return Kh(e.type);case 16:return Kh(\"Lazy\");case 13:return Kh(\"Suspense\");case 19:return Kh(\"SuspenseList\");case 0:case 2:case 15:return e=zy(e.type,!1),e;case 11:return e=zy(e.type.render,!1),e;case 1:return e=zy(e.type,!0),e;default:return\"\"}}function j0(e){if(e==null)return null;if(typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case Cd:return\"Fragment\";case kd:return\"Portal\";case y0:return\"Profiler\";case a1:return\"StrictMode\";case b0:return\"Suspense\";case w0:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case u5:return(e.displayName||\"Context\")+\".Consumer\";case d5:return(e._context.displayName||\"Context\")+\".Provider\";case i1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||\"\",e=e!==\"\"?\"ForwardRef(\"+e+\")\":\"ForwardRef\"),e;case o1:return t=e.displayName||null,t!==null?t:j0(e.type)||\"Memo\";case Lo:t=e._payload,e=e._init;try{return j0(e(t))}catch{}}return null}function P9(e){var t=e.type;switch(e.tag){case 24:return\"Cache\";case 9:return(t.displayName||\"Context\")+\".Consumer\";case 10:return(t._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return e=t.render,e=e.displayName||e.name||\"\",t.displayName||(e!==\"\"?\"ForwardRef(\"+e+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return t;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return j0(t);case 8:return t===a1?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";case 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t==\"function\")return t.displayName||t.name||null;if(typeof t==\"string\")return t}return null}function bl(e){switch(typeof e){case\"boolean\":case\"number\":case\"string\":case\"undefined\":return e;case\"object\":return e;default:return\"\"}}function m5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===\"input\"&&(t===\"checkbox\"||t===\"radio\")}function T9(e){var t=m5(e)?\"checked\":\"value\",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=\"\"+e[t];if(!e.hasOwnProperty(t)&&typeof r<\"u\"&&typeof r.get==\"function\"&&typeof r.set==\"function\"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=\"\"+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=\"\"+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gp(e){e._valueTracker||(e._valueTracker=T9(e))}function f5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s=\"\";return e&&(s=m5(e)?e.checked?\"true\":\"false\":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Fg(e){if(e=e||(typeof document<\"u\"?document:void 0),typeof e>\"u\")return null;try{return e.activeElement||e.body}catch{return e.body}}function N0(e,t){var r=t.checked;return Rr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function LS(e,t){var r=t.defaultValue==null?\"\":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=bl(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type===\"checkbox\"||t.type===\"radio\"?t.checked!=null:t.value!=null}}function p5(e,t){t=t.checked,t!=null&&n1(e,\"checked\",t,!1)}function _0(e,t){p5(e,t);var r=bl(t.value),s=t.type;if(r!=null)s===\"number\"?(r===0&&e.value===\"\"||e.value!=r)&&(e.value=\"\"+r):e.value!==\"\"+r&&(e.value=\"\"+r);else if(s===\"submit\"||s===\"reset\"){e.removeAttribute(\"value\");return}t.hasOwnProperty(\"value\")?S0(e,t.type,r):t.hasOwnProperty(\"defaultValue\")&&S0(e,t.type,bl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $S(e,t,r){if(t.hasOwnProperty(\"value\")||t.hasOwnProperty(\"defaultValue\")){var s=t.type;if(!(s!==\"submit\"&&s!==\"reset\"||t.value!==void 0&&t.value!==null))return;t=\"\"+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==\"\"&&(e.name=\"\"),e.defaultChecked=!!e._wrapperState.initialChecked,r!==\"\"&&(e.name=r)}function S0(e,t,r){(t!==\"number\"||Fg(e.ownerDocument)!==e)&&(r==null?e.defaultValue=\"\"+e._wrapperState.initialValue:e.defaultValue!==\"\"+r&&(e.defaultValue=\"\"+r))}var Gh=Array.isArray;function Hd(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t[\"$\"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty(\"$\"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=\"\"+bl(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function k0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(be(91));return Rr({},t,{value:void 0,defaultValue:void 0,children:\"\"+e._wrapperState.initialValue})}function FS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(be(92));if(Gh(r)){if(1<r.length)throw Error(be(93));r=r[0]}t=r}t==null&&(t=\"\"),r=t}e._wrapperState={initialValue:bl(r)}}function g5(e,t){var r=bl(t.value),s=bl(t.defaultValue);r!=null&&(r=\"\"+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=\"\"+s)}function VS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==\"\"&&t!==null&&(e.value=t)}function x5(e){switch(e){case\"svg\":return\"http://www.w3.org/2000/svg\";case\"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function C0(e,t){return e==null||e===\"http://www.w3.org/1999/xhtml\"?x5(t):e===\"http://www.w3.org/2000/svg\"&&t===\"foreignObject\"?\"http://www.w3.org/1999/xhtml\":e}var xp,v5=function(e){return typeof MSApp<\"u\"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!==\"http://www.w3.org/2000/svg\"||\"innerHTML\"in e)e.innerHTML=t;else{for(xp=xp||document.createElement(\"div\"),xp.innerHTML=\"<svg>\"+t.valueOf().toString()+\"</svg>\",t=xp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sm(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var am={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A9=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(am).forEach(function(e){A9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),am[t]=am[e]})});function y5(e,t,r){return t==null||typeof t==\"boolean\"||t===\"\"?\"\":r||typeof t!=\"number\"||t===0||am.hasOwnProperty(e)&&am[e]?(\"\"+t).trim():t+\"px\"}function b5(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf(\"--\")===0,a=y5(r,t[r],s);r===\"float\"&&(r=\"cssFloat\"),s?e.setProperty(r,a):e[r]=a}}var R9=Rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function E0(e,t){if(t){if(R9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(be(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(be(60));if(typeof t.dangerouslySetInnerHTML!=\"object\"||!(\"__html\"in t.dangerouslySetInnerHTML))throw Error(be(61))}if(t.style!=null&&typeof t.style!=\"object\")throw Error(be(62))}}function P0(e,t){if(e.indexOf(\"-\")===-1)return typeof t.is==\"string\";switch(e){case\"annotation-xml\":case\"color-profile\":case\"font-face\":case\"font-face-src\":case\"font-face-uri\":case\"font-face-format\":case\"font-face-name\":case\"missing-glyph\":return!1;default:return!0}}var T0=null;function l1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var A0=null,Wd=null,Kd=null;function zS(e){if(e=Cf(e)){if(typeof A0!=\"function\")throw Error(be(280));var t=e.stateNode;t&&(t=gv(t),A0(e.stateNode,e.type,t))}}function w5(e){Wd?Kd?Kd.push(e):Kd=[e]:Wd=e}function j5(){if(Wd){var e=Wd,t=Kd;if(Kd=Wd=null,zS(e),t)for(e=0;e<t.length;e++)zS(t[e])}}function N5(e,t){return e(t)}function _5(){}var By=!1;function S5(e,t,r){if(By)return e(t,r);By=!0;try{return N5(e,t,r)}finally{By=!1,(Wd!==null||Kd!==null)&&(_5(),j5())}}function km(e,t){var r=e.stateNode;if(r===null)return null;var s=gv(r);if(s===null)return null;r=s[t];e:switch(t){case\"onClick\":case\"onClickCapture\":case\"onDoubleClick\":case\"onDoubleClickCapture\":case\"onMouseDown\":case\"onMouseDownCapture\":case\"onMouseMove\":case\"onMouseMoveCapture\":case\"onMouseUp\":case\"onMouseUpCapture\":case\"onMouseEnter\":(s=!s.disabled)||(e=e.type,s=!(e===\"button\"||e===\"input\"||e===\"select\"||e===\"textarea\")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!=\"function\")throw Error(be(231,t,typeof r));return r}var R0=!1;if(ao)try{var Th={};Object.defineProperty(Th,\"passive\",{get:function(){R0=!0}}),window.addEventListener(\"test\",Th,Th),window.removeEventListener(\"test\",Th,Th)}catch{R0=!1}function O9(e,t,r,s,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var im=!1,Vg=null,zg=!1,O0=null,I9={onError:function(e){im=!0,Vg=e}};function D9(e,t,r,s,a,i,o,l,c){im=!1,Vg=null,O9.apply(I9,arguments)}function M9(e,t,r,s,a,i,o,l,c){if(D9.apply(this,arguments),im){if(im){var d=Vg;im=!1,Vg=null}else throw Error(be(198));zg||(zg=!0,O0=d)}}function Qc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function k5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function BS(e){if(Qc(e)!==e)throw Error(be(188))}function L9(e){var t=e.alternate;if(!t){if(t=Qc(e),t===null)throw Error(be(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return BS(a),e;if(i===s)return BS(a),t;i=i.sibling}throw Error(be(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(be(189))}}if(r.alternate!==s)throw Error(be(190))}if(r.tag!==3)throw Error(be(188));return r.stateNode.current===r?e:t}function C5(e){return e=L9(e),e!==null?E5(e):null}function E5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=E5(e);if(t!==null)return t;e=e.sibling}return null}var P5=Zn.unstable_scheduleCallback,US=Zn.unstable_cancelCallback,$9=Zn.unstable_shouldYield,F9=Zn.unstable_requestPaint,qr=Zn.unstable_now,V9=Zn.unstable_getCurrentPriorityLevel,c1=Zn.unstable_ImmediatePriority,T5=Zn.unstable_UserBlockingPriority,Bg=Zn.unstable_NormalPriority,z9=Zn.unstable_LowPriority,A5=Zn.unstable_IdlePriority,hv=null,xi=null;function B9(e){if(xi&&typeof xi.onCommitFiberRoot==\"function\")try{xi.onCommitFiberRoot(hv,e,void 0,(e.current.flags&128)===128)}catch{}}var Ha=Math.clz32?Math.clz32:H9,U9=Math.log,q9=Math.LN2;function H9(e){return e>>>=0,e===0?32:31-(U9(e)/q9|0)|0}var vp=64,yp=4194304;function Qh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ug(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?s=Qh(l):(i&=o,i!==0&&(s=Qh(i)))}else o=r&~a,o!==0?s=Qh(o):i!==0&&(s=Qh(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Ha(t),a=1<<r,s|=e[r],t&=~a;return s}function W9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K9(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ha(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&s)&&(a[o]=W9(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function I0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function R5(){var e=vp;return vp<<=1,!(vp&4194240)&&(vp=64),e}function Uy(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Sf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ha(t),e[t]=r}function G9(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ha(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function d1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Ha(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var dr=0;function O5(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var I5,u1,D5,M5,L5,D0=!1,bp=[],ol=null,ll=null,cl=null,Cm=new Map,Em=new Map,Fo=[],Q9=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");function qS(e,t){switch(e){case\"focusin\":case\"focusout\":ol=null;break;case\"dragenter\":case\"dragleave\":ll=null;break;case\"mouseover\":case\"mouseout\":cl=null;break;case\"pointerover\":case\"pointerout\":Cm.delete(t.pointerId);break;case\"gotpointercapture\":case\"lostpointercapture\":Em.delete(t.pointerId)}}function Ah(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Cf(t),t!==null&&u1(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function J9(e,t,r,s,a){switch(t){case\"focusin\":return ol=Ah(ol,e,t,r,s,a),!0;case\"dragenter\":return ll=Ah(ll,e,t,r,s,a),!0;case\"mouseover\":return cl=Ah(cl,e,t,r,s,a),!0;case\"pointerover\":var i=a.pointerId;return Cm.set(i,Ah(Cm.get(i)||null,e,t,r,s,a)),!0;case\"gotpointercapture\":return i=a.pointerId,Em.set(i,Ah(Em.get(i)||null,e,t,r,s,a)),!0}return!1}function $5(e){var t=cc(e.target);if(t!==null){var r=Qc(t);if(r!==null){if(t=r.tag,t===13){if(t=k5(r),t!==null){e.blockedOn=t,L5(e.priority,function(){D5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function dg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=M0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);T0=s,r.target.dispatchEvent(s),T0=null}else return t=Cf(r),t!==null&&u1(t),e.blockedOn=r,!1;t.shift()}return!0}function HS(e,t,r){dg(e)&&r.delete(t)}function X9(){D0=!1,ol!==null&&dg(ol)&&(ol=null),ll!==null&&dg(ll)&&(ll=null),cl!==null&&dg(cl)&&(cl=null),Cm.forEach(HS),Em.forEach(HS)}function Rh(e,t){e.blockedOn===t&&(e.blockedOn=null,D0||(D0=!0,Zn.unstable_scheduleCallback(Zn.unstable_NormalPriority,X9)))}function Pm(e){function t(a){return Rh(a,e)}if(0<bp.length){Rh(bp[0],e);for(var r=1;r<bp.length;r++){var s=bp[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ol!==null&&Rh(ol,e),ll!==null&&Rh(ll,e),cl!==null&&Rh(cl,e),Cm.forEach(t),Em.forEach(t),r=0;r<Fo.length;r++)s=Fo[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Fo.length&&(r=Fo[0],r.blockedOn===null);)$5(r),r.blockedOn===null&&Fo.shift()}var Gd=go.ReactCurrentBatchConfig,qg=!0;function Y9(e,t,r,s){var a=dr,i=Gd.transition;Gd.transition=null;try{dr=1,h1(e,t,r,s)}finally{dr=a,Gd.transition=i}}function Z9(e,t,r,s){var a=dr,i=Gd.transition;Gd.transition=null;try{dr=4,h1(e,t,r,s)}finally{dr=a,Gd.transition=i}}function h1(e,t,r,s){if(qg){var a=M0(e,t,r,s);if(a===null)Zy(e,t,s,Hg,r),qS(e,s);else if(J9(a,e,t,r,s))s.stopPropagation();else if(qS(e,s),t&4&&-1<Q9.indexOf(e)){for(;a!==null;){var i=Cf(a);if(i!==null&&I5(i),i=M0(e,t,r,s),i===null&&Zy(e,t,s,Hg,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else Zy(e,t,s,null,r)}}var Hg=null;function M0(e,t,r,s){if(Hg=null,e=l1(s),e=cc(e),e!==null)if(t=Qc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=k5(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hg=e,null}function F5(e){switch(e){case\"cancel\":case\"click\":case\"close\":case\"contextmenu\":case\"copy\":case\"cut\":case\"auxclick\":case\"dblclick\":case\"dragend\":case\"dragstart\":case\"drop\":case\"focusin\":case\"focusout\":case\"input\":case\"invalid\":case\"keydown\":case\"keypress\":case\"keyup\":case\"mousedown\":case\"mouseup\":case\"paste\":case\"pause\":case\"play\":case\"pointercancel\":case\"pointerdown\":case\"pointerup\":case\"ratechange\":case\"reset\":case\"resize\":case\"seeked\":case\"submit\":case\"touchcancel\":case\"touchend\":case\"touchstart\":case\"volumechange\":case\"change\":case\"selectionchange\":case\"textInput\":case\"compositionstart\":case\"compositionend\":case\"compositionupdate\":case\"beforeblur\":case\"afterblur\":case\"beforeinput\":case\"blur\":case\"fullscreenchange\":case\"focus\":case\"hashchange\":case\"popstate\":case\"select\":case\"selectstart\":return 1;case\"drag\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"mousemove\":case\"mouseout\":case\"mouseover\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"scroll\":case\"toggle\":case\"touchmove\":case\"wheel\":case\"mouseenter\":case\"mouseleave\":case\"pointerenter\":case\"pointerleave\":return 4;case\"message\":switch(V9()){case c1:return 1;case T5:return 4;case Bg:case z9:return 16;case A5:return 536870912;default:return 16}default:return 16}}var el=null,m1=null,ug=null;function V5(){if(ug)return ug;var e,t=m1,r=t.length,s,a=\"value\"in el?el.value:el.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===a[i-s];s++);return ug=a.slice(e,1<s?1-s:void 0)}function hg(e){var t=e.keyCode;return\"charCode\"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wp(){return!0}function WS(){return!1}function sa(e){function t(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wp:WS,this.isPropagationStopped=WS,this}return Rr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!=\"unknown\"&&(r.returnValue=!1),this.isDefaultPrevented=wp)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!=\"unknown\"&&(r.cancelBubble=!0),this.isPropagationStopped=wp)},persist:function(){},isPersistent:wp}),t}var eh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},f1=sa(eh),kf=Rr({},eh,{view:0,detail:0}),eq=sa(kf),qy,Hy,Oh,mv=Rr({},kf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:p1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return\"movementX\"in e?e.movementX:(e!==Oh&&(Oh&&e.type===\"mousemove\"?(qy=e.screenX-Oh.screenX,Hy=e.screenY-Oh.screenY):Hy=qy=0,Oh=e),qy)},movementY:function(e){return\"movementY\"in e?e.movementY:Hy}}),KS=sa(mv),tq=Rr({},mv,{dataTransfer:0}),rq=sa(tq),sq=Rr({},kf,{relatedTarget:0}),Wy=sa(sq),nq=Rr({},eh,{animationName:0,elapsedTime:0,pseudoElement:0}),aq=sa(nq),iq=Rr({},eh,{clipboardData:function(e){return\"clipboardData\"in e?e.clipboardData:window.clipboardData}}),oq=sa(iq),lq=Rr({},eh,{data:0}),GS=sa(lq),cq={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},dq={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},uq={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function hq(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uq[e])?!!t[e]:!1}function p1(){return hq}var mq=Rr({},kf,{key:function(e){if(e.key){var t=cq[e.key]||e.key;if(t!==\"Unidentified\")return t}return e.type===\"keypress\"?(e=hg(e),e===13?\"Enter\":String.fromCharCode(e)):e.type===\"keydown\"||e.type===\"keyup\"?dq[e.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:p1,charCode:function(e){return e.type===\"keypress\"?hg(e):0},keyCode:function(e){return e.type===\"keydown\"||e.type===\"keyup\"?e.keyCode:0},which:function(e){return e.type===\"keypress\"?hg(e):e.type===\"keydown\"||e.type===\"keyup\"?e.keyCode:0}}),fq=sa(mq),pq=Rr({},mv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QS=sa(pq),gq=Rr({},kf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:p1}),xq=sa(gq),vq=Rr({},eh,{propertyName:0,elapsedTime:0,pseudoElement:0}),yq=sa(vq),bq=Rr({},mv,{deltaX:function(e){return\"deltaX\"in e?e.deltaX:\"wheelDeltaX\"in e?-e.wheelDeltaX:0},deltaY:function(e){return\"deltaY\"in e?e.deltaY:\"wheelDeltaY\"in e?-e.wheelDeltaY:\"wheelDelta\"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wq=sa(bq),jq=[9,13,27,32],g1=ao&&\"CompositionEvent\"in window,om=null;ao&&\"documentMode\"in document&&(om=document.documentMode);var Nq=ao&&\"TextEvent\"in window&&!om,z5=ao&&(!g1||om&&8<om&&11>=om),JS=\" \",XS=!1;function B5(e,t){switch(e){case\"keyup\":return jq.indexOf(t.keyCode)!==-1;case\"keydown\":return t.keyCode!==229;case\"keypress\":case\"mousedown\":case\"focusout\":return!0;default:return!1}}function U5(e){return e=e.detail,typeof e==\"object\"&&\"data\"in e?e.data:null}var Ed=!1;function _q(e,t){switch(e){case\"compositionend\":return U5(t);case\"keypress\":return t.which!==32?null:(XS=!0,JS);case\"textInput\":return e=t.data,e===JS&&XS?null:e;default:return null}}function Sq(e,t){if(Ed)return e===\"compositionend\"||!g1&&B5(e,t)?(e=V5(),ug=m1=el=null,Ed=!1,e):null;switch(e){case\"paste\":return null;case\"keypress\":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case\"compositionend\":return z5&&t.locale!==\"ko\"?null:t.data;default:return null}}var kq={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===\"input\"?!!kq[e.type]:t===\"textarea\"}function q5(e,t,r,s){w5(s),t=Wg(t,\"onChange\"),0<t.length&&(r=new f1(\"onChange\",\"change\",null,r,s),e.push({event:r,listeners:t}))}var lm=null,Tm=null;function Cq(e){tO(e,0)}function fv(e){var t=Ad(e);if(f5(t))return e}function Eq(e,t){if(e===\"change\")return t}var H5=!1;if(ao){var Ky;if(ao){var Gy=\"oninput\"in document;if(!Gy){var ZS=document.createElement(\"div\");ZS.setAttribute(\"oninput\",\"return;\"),Gy=typeof ZS.oninput==\"function\"}Ky=Gy}else Ky=!1;H5=Ky&&(!document.documentMode||9<document.documentMode)}function e2(){lm&&(lm.detachEvent(\"onpropertychange\",W5),Tm=lm=null)}function W5(e){if(e.propertyName===\"value\"&&fv(Tm)){var t=[];q5(t,Tm,e,l1(e)),S5(Cq,t)}}function Pq(e,t,r){e===\"focusin\"?(e2(),lm=t,Tm=r,lm.attachEvent(\"onpropertychange\",W5)):e===\"focusout\"&&e2()}function Tq(e){if(e===\"selectionchange\"||e===\"keyup\"||e===\"keydown\")return fv(Tm)}function Aq(e,t){if(e===\"click\")return fv(t)}function Rq(e,t){if(e===\"input\"||e===\"change\")return fv(t)}function Oq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qa=typeof Object.is==\"function\"?Object.is:Oq;function Am(e,t){if(Qa(e,t))return!0;if(typeof e!=\"object\"||e===null||typeof t!=\"object\"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!v0.call(t,a)||!Qa(e[a],t[a]))return!1}return!0}function t2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r2(e,t){var r=t2(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=t2(r)}}function K5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?K5(e,t.parentNode):\"contains\"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function G5(){for(var e=window,t=Fg();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href==\"string\"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Fg(e.document)}return t}function x1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===\"input\"&&(e.type===\"text\"||e.type===\"search\"||e.type===\"tel\"||e.type===\"url\"||e.type===\"password\")||t===\"textarea\"||e.contentEditable===\"true\")}function Iq(e){var t=G5(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&K5(r.ownerDocument.documentElement,r)){if(s!==null&&x1(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),\"selectionStart\"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=r2(r,i);var o=r2(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus==\"function\"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Dq=ao&&\"documentMode\"in document&&11>=document.documentMode,Pd=null,L0=null,cm=null,$0=!1;function s2(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;$0||Pd==null||Pd!==Fg(s)||(s=Pd,\"selectionStart\"in s&&x1(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),cm&&Am(cm,s)||(cm=s,s=Wg(L0,\"onSelect\"),0<s.length&&(t=new f1(\"onSelect\",\"select\",null,t,r),e.push({event:t,listeners:s}),t.target=Pd)))}function jp(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r[\"Webkit\"+e]=\"webkit\"+t,r[\"Moz\"+e]=\"moz\"+t,r}var Td={animationend:jp(\"Animation\",\"AnimationEnd\"),animationiteration:jp(\"Animation\",\"AnimationIteration\"),animationstart:jp(\"Animation\",\"AnimationStart\"),transitionend:jp(\"Transition\",\"TransitionEnd\")},Qy={},Q5={};ao&&(Q5=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Td.animationend.animation,delete Td.animationiteration.animation,delete Td.animationstart.animation),\"TransitionEvent\"in window||delete Td.transitionend.transition);function pv(e){if(Qy[e])return Qy[e];if(!Td[e])return e;var t=Td[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Q5)return Qy[e]=t[r];return e}var J5=pv(\"animationend\"),X5=pv(\"animationiteration\"),Y5=pv(\"animationstart\"),Z5=pv(\"transitionend\"),eO=new Map,n2=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");function Al(e,t){eO.set(e,t),Gc(t,[e])}for(var Jy=0;Jy<n2.length;Jy++){var Xy=n2[Jy],Mq=Xy.toLowerCase(),Lq=Xy[0].toUpperCase()+Xy.slice(1);Al(Mq,\"on\"+Lq)}Al(J5,\"onAnimationEnd\");Al(X5,\"onAnimationIteration\");Al(Y5,\"onAnimationStart\");Al(\"dblclick\",\"onDoubleClick\");Al(\"focusin\",\"onFocus\");Al(\"focusout\",\"onBlur\");Al(Z5,\"onTransitionEnd\");Nu(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);Nu(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);Nu(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);Nu(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);Gc(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));Gc(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));Gc(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);Gc(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));Gc(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));Gc(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var Jh=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),$q=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(Jh));function a2(e,t,r){var s=e.type||\"unknown-event\";e.currentTarget=r,M9(s,t,void 0,e),e.currentTarget=null}function tO(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;a2(a,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;a2(a,l,d),i=c}}}if(zg)throw e=O0,zg=!1,O0=null,e}function xr(e,t){var r=t[U0];r===void 0&&(r=t[U0]=new Set);var s=e+\"__bubble\";r.has(s)||(rO(t,e,2,!1),r.add(s))}function Yy(e,t,r){var s=0;t&&(s|=4),rO(r,e,s,t)}var Np=\"_reactListening\"+Math.random().toString(36).slice(2);function Rm(e){if(!e[Np]){e[Np]=!0,c5.forEach(function(r){r!==\"selectionchange\"&&($q.has(r)||Yy(r,!1,e),Yy(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Np]||(t[Np]=!0,Yy(\"selectionchange\",!1,t))}}function rO(e,t,r,s){switch(F5(t)){case 1:var a=Y9;break;case 4:a=Z9;break;default:a=h1}r=a.bind(null,t,r,e),a=void 0,!R0||t!==\"touchstart\"&&t!==\"touchmove\"&&t!==\"wheel\"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Zy(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=cc(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}S5(function(){var d=i,u=l1(r),h=[];e:{var m=eO.get(e);if(m!==void 0){var g=f1,v=e;switch(e){case\"keypress\":if(hg(r)===0)break e;case\"keydown\":case\"keyup\":g=fq;break;case\"focusin\":v=\"focus\",g=Wy;break;case\"focusout\":v=\"blur\",g=Wy;break;case\"beforeblur\":case\"afterblur\":g=Wy;break;case\"click\":if(r.button===2)break e;case\"auxclick\":case\"dblclick\":case\"mousedown\":case\"mousemove\":case\"mouseup\":case\"mouseout\":case\"mouseover\":case\"contextmenu\":g=KS;break;case\"drag\":case\"dragend\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"dragstart\":case\"drop\":g=rq;break;case\"touchcancel\":case\"touchend\":case\"touchmove\":case\"touchstart\":g=xq;break;case J5:case X5:case Y5:g=aq;break;case Z5:g=yq;break;case\"scroll\":g=eq;break;case\"wheel\":g=wq;break;case\"copy\":case\"cut\":case\"paste\":g=oq;break;case\"gotpointercapture\":case\"lostpointercapture\":case\"pointercancel\":case\"pointerdown\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"pointerup\":g=QS}var x=(t&4)!==0,w=!x&&e===\"scroll\",y=x?m!==null?m+\"Capture\":null:m;x=[];for(var b=d,N;b!==null;){N=b;var _=N.stateNode;if(N.tag===5&&_!==null&&(N=_,y!==null&&(_=km(b,y),_!=null&&x.push(Om(b,_,N)))),w)break;b=b.return}0<x.length&&(m=new g(m,v,null,r,u),h.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e===\"mouseover\"||e===\"pointerover\",g=e===\"mouseout\"||e===\"pointerout\",m&&r!==T0&&(v=r.relatedTarget||r.fromElement)&&(cc(v)||v[io]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=r.relatedTarget||r.toElement,g=d,v=v?cc(v):null,v!==null&&(w=Qc(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=d),g!==v)){if(x=KS,_=\"onMouseLeave\",y=\"onMouseEnter\",b=\"mouse\",(e===\"pointerout\"||e===\"pointerover\")&&(x=QS,_=\"onPointerLeave\",y=\"onPointerEnter\",b=\"pointer\"),w=g==null?m:Ad(g),N=v==null?m:Ad(v),m=new x(_,b+\"leave\",g,r,u),m.target=w,m.relatedTarget=N,_=null,cc(u)===d&&(x=new x(y,b+\"enter\",v,r,u),x.target=N,x.relatedTarget=w,_=x),w=_,g&&v)t:{for(x=g,y=v,b=0,N=x;N;N=dd(N))b++;for(N=0,_=y;_;_=dd(_))N++;for(;0<b-N;)x=dd(x),b--;for(;0<N-b;)y=dd(y),N--;for(;b--;){if(x===y||y!==null&&x===y.alternate)break t;x=dd(x),y=dd(y)}x=null}else x=null;g!==null&&i2(h,m,g,x,!1),v!==null&&w!==null&&i2(h,w,v,x,!0)}}e:{if(m=d?Ad(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g===\"select\"||g===\"input\"&&m.type===\"file\")var E=Eq;else if(YS(m))if(H5)E=Rq;else{E=Tq;var k=Pq}else(g=m.nodeName)&&g.toLowerCase()===\"input\"&&(m.type===\"checkbox\"||m.type===\"radio\")&&(E=Aq);if(E&&(E=E(e,d))){q5(h,E,r,u);break e}k&&k(e,m,d),e===\"focusout\"&&(k=m._wrapperState)&&k.controlled&&m.type===\"number\"&&S0(m,\"number\",m.value)}switch(k=d?Ad(d):window,e){case\"focusin\":(YS(k)||k.contentEditable===\"true\")&&(Pd=k,L0=d,cm=null);break;case\"focusout\":cm=L0=Pd=null;break;case\"mousedown\":$0=!0;break;case\"contextmenu\":case\"mouseup\":case\"dragend\":$0=!1,s2(h,r,u);break;case\"selectionchange\":if(Dq)break;case\"keydown\":case\"keyup\":s2(h,r,u)}var P;if(g1)e:{switch(e){case\"compositionstart\":var C=\"onCompositionStart\";break e;case\"compositionend\":C=\"onCompositionEnd\";break e;case\"compositionupdate\":C=\"onCompositionUpdate\";break e}C=void 0}else Ed?B5(e,r)&&(C=\"onCompositionEnd\"):e===\"keydown\"&&r.keyCode===229&&(C=\"onCompositionStart\");C&&(z5&&r.locale!==\"ko\"&&(Ed||C!==\"onCompositionStart\"?C===\"onCompositionEnd\"&&Ed&&(P=V5()):(el=u,m1=\"value\"in el?el.value:el.textContent,Ed=!0)),k=Wg(d,C),0<k.length&&(C=new GS(C,e,null,r,u),h.push({event:C,listeners:k}),P?C.data=P:(P=U5(r),P!==null&&(C.data=P)))),(P=Nq?_q(e,r):Sq(e,r))&&(d=Wg(d,\"onBeforeInput\"),0<d.length&&(u=new GS(\"onBeforeInput\",\"beforeinput\",null,r,u),h.push({event:u,listeners:d}),u.data=P))}tO(h,t)})}function Om(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Wg(e,t){for(var r=t+\"Capture\",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=km(e,r),i!=null&&s.unshift(Om(e,i,a)),i=km(e,t),i!=null&&s.push(Om(e,i,a))),e=e.return}return s}function dd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function i2(e,t,r,s,a){for(var i=t._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,a?(c=km(r,i),c!=null&&o.unshift(Om(r,c,l))):a||(c=km(r,i),c!=null&&o.push(Om(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Fq=/\\r\\n?/g,Vq=/\\u0000|\\uFFFD/g;function o2(e){return(typeof e==\"string\"?e:\"\"+e).replace(Fq,`\n`).replace(Vq,\"\")}function _p(e,t,r){if(t=o2(t),o2(e)!==t&&r)throw Error(be(425))}function Kg(){}var F0=null,V0=null;function z0(e,t){return e===\"textarea\"||e===\"noscript\"||typeof t.children==\"string\"||typeof t.children==\"number\"||typeof t.dangerouslySetInnerHTML==\"object\"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var B0=typeof setTimeout==\"function\"?setTimeout:void 0,zq=typeof clearTimeout==\"function\"?clearTimeout:void 0,l2=typeof Promise==\"function\"?Promise:void 0,Bq=typeof queueMicrotask==\"function\"?queueMicrotask:typeof l2<\"u\"?function(e){return l2.resolve(null).then(e).catch(Uq)}:B0;function Uq(e){setTimeout(function(){throw e})}function eb(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r===\"/$\"){if(s===0){e.removeChild(a),Pm(t);return}s--}else r!==\"$\"&&r!==\"$?\"&&r!==\"$!\"||s++;r=a}while(r);Pm(t)}function dl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===\"$\"||t===\"$!\"||t===\"$?\")break;if(t===\"/$\")return null}}return e}function c2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r===\"$\"||r===\"$!\"||r===\"$?\"){if(t===0)return e;t--}else r===\"/$\"&&t++}e=e.previousSibling}return null}var th=Math.random().toString(36).slice(2),ui=\"__reactFiber$\"+th,Im=\"__reactProps$\"+th,io=\"__reactContainer$\"+th,U0=\"__reactEvents$\"+th,qq=\"__reactListeners$\"+th,Hq=\"__reactHandles$\"+th;function cc(e){var t=e[ui];if(t)return t;for(var r=e.parentNode;r;){if(t=r[io]||r[ui]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=c2(e);e!==null;){if(r=e[ui])return r;e=c2(e)}return t}e=r,r=e.parentNode}return null}function Cf(e){return e=e[ui]||e[io],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ad(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(be(33))}function gv(e){return e[Im]||null}var q0=[],Rd=-1;function Rl(e){return{current:e}}function vr(e){0>Rd||(e.current=q0[Rd],q0[Rd]=null,Rd--)}function fr(e,t){Rd++,q0[Rd]=e.current,e.current=t}var wl={},Ys=Rl(wl),An=Rl(!1),Pc=wl;function _u(e,t){var r=e.type.contextTypes;if(!r)return wl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Rn(e){return e=e.childContextTypes,e!=null}function Gg(){vr(An),vr(Ys)}function d2(e,t,r){if(Ys.current!==wl)throw Error(be(168));fr(Ys,t),fr(An,r)}function sO(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!=\"function\")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(be(108,P9(e)||\"Unknown\",a));return Rr({},r,s)}function Qg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wl,Pc=Ys.current,fr(Ys,e),fr(An,An.current),!0}function u2(e,t,r){var s=e.stateNode;if(!s)throw Error(be(169));r?(e=sO(e,t,Pc),s.__reactInternalMemoizedMergedChildContext=e,vr(An),vr(Ys),fr(Ys,e)):vr(An),fr(An,r)}var zi=null,xv=!1,tb=!1;function nO(e){zi===null?zi=[e]:zi.push(e)}function Wq(e){xv=!0,nO(e)}function Ol(){if(!tb&&zi!==null){tb=!0;var e=0,t=dr;try{var r=zi;for(dr=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}zi=null,xv=!1}catch(a){throw zi!==null&&(zi=zi.slice(e+1)),P5(c1,Ol),a}finally{dr=t,tb=!1}}return null}var Od=[],Id=0,Jg=null,Xg=0,fa=[],pa=0,Tc=null,Wi=1,Ki=\"\";function Zl(e,t){Od[Id++]=Xg,Od[Id++]=Jg,Jg=e,Xg=t}function aO(e,t,r){fa[pa++]=Wi,fa[pa++]=Ki,fa[pa++]=Tc,Tc=e;var s=Wi;e=Ki;var a=32-Ha(s)-1;s&=~(1<<a),r+=1;var i=32-Ha(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Wi=1<<32-Ha(t)+a|r<<a|s,Ki=i+e}else Wi=1<<i|r<<a|s,Ki=e}function v1(e){e.return!==null&&(Zl(e,1),aO(e,1,0))}function y1(e){for(;e===Jg;)Jg=Od[--Id],Od[Id]=null,Xg=Od[--Id],Od[Id]=null;for(;e===Tc;)Tc=fa[--pa],fa[pa]=null,Ki=fa[--pa],fa[pa]=null,Wi=fa[--pa],fa[pa]=null}var Jn=null,Qn=null,_r=!1,$a=null;function iO(e,t){var r=xa(5,null,null,0);r.elementType=\"DELETED\",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function h2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jn=e,Qn=dl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===\"\"||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jn=e,Qn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Tc!==null?{id:Wi,overflow:Ki}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=xa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Jn=e,Qn=null,!0):!1;default:return!1}}function H0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function W0(e){if(_r){var t=Qn;if(t){var r=t;if(!h2(e,t)){if(H0(e))throw Error(be(418));t=dl(r.nextSibling);var s=Jn;t&&h2(e,t)?iO(s,r):(e.flags=e.flags&-4097|2,_r=!1,Jn=e)}}else{if(H0(e))throw Error(be(418));e.flags=e.flags&-4097|2,_r=!1,Jn=e}}}function m2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jn=e}function Sp(e){if(e!==Jn)return!1;if(!_r)return m2(e),_r=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!==\"head\"&&t!==\"body\"&&!z0(e.type,e.memoizedProps)),t&&(t=Qn)){if(H0(e))throw oO(),Error(be(418));for(;t;)iO(e,t),t=dl(t.nextSibling)}if(m2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(be(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r===\"/$\"){if(t===0){Qn=dl(e.nextSibling);break e}t--}else r!==\"$\"&&r!==\"$!\"&&r!==\"$?\"||t++}e=e.nextSibling}Qn=null}}else Qn=Jn?dl(e.stateNode.nextSibling):null;return!0}function oO(){for(var e=Qn;e;)e=dl(e.nextSibling)}function Su(){Qn=Jn=null,_r=!1}function b1(e){$a===null?$a=[e]:$a.push(e)}var Kq=go.ReactCurrentBatchConfig;function Ih(e,t,r){if(e=r.ref,e!==null&&typeof e!=\"function\"&&typeof e!=\"object\"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(be(309));var s=r.stateNode}if(!s)throw Error(be(147,e));var a=s,i=\"\"+e;return t!==null&&t.ref!==null&&typeof t.ref==\"function\"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!=\"string\")throw Error(be(284));if(!r._owner)throw Error(be(290,e))}return e}function kp(e,t){throw e=Object.prototype.toString.call(t),Error(be(31,e===\"[object Object]\"?\"object with keys {\"+Object.keys(t).join(\", \")+\"}\":e))}function f2(e){var t=e._init;return t(e._payload)}function lO(e){function t(y,b){if(e){var N=y.deletions;N===null?(y.deletions=[b],y.flags|=16):N.push(b)}}function r(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function s(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function a(y,b){return y=fl(y,b),y.index=0,y.sibling=null,y}function i(y,b,N){return y.index=N,e?(N=y.alternate,N!==null?(N=N.index,N<b?(y.flags|=2,b):N):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,b,N,_){return b===null||b.tag!==6?(b=lb(N,y.mode,_),b.return=y,b):(b=a(b,N),b.return=y,b)}function c(y,b,N,_){var E=N.type;return E===Cd?u(y,b,N.props.children,_,N.key):b!==null&&(b.elementType===E||typeof E==\"object\"&&E!==null&&E.$$typeof===Lo&&f2(E)===b.type)?(_=a(b,N.props),_.ref=Ih(y,b,N),_.return=y,_):(_=yg(N.type,N.key,N.props,null,y.mode,_),_.ref=Ih(y,b,N),_.return=y,_)}function d(y,b,N,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==N.containerInfo||b.stateNode.implementation!==N.implementation?(b=cb(N,y.mode,_),b.return=y,b):(b=a(b,N.children||[]),b.return=y,b)}function u(y,b,N,_,E){return b===null||b.tag!==7?(b=Sc(N,y.mode,_,E),b.return=y,b):(b=a(b,N),b.return=y,b)}function h(y,b,N){if(typeof b==\"string\"&&b!==\"\"||typeof b==\"number\")return b=lb(\"\"+b,y.mode,N),b.return=y,b;if(typeof b==\"object\"&&b!==null){switch(b.$$typeof){case pp:return N=yg(b.type,b.key,b.props,null,y.mode,N),N.ref=Ih(y,null,b),N.return=y,N;case kd:return b=cb(b,y.mode,N),b.return=y,b;case Lo:var _=b._init;return h(y,_(b._payload),N)}if(Gh(b)||Ph(b))return b=Sc(b,y.mode,N,null),b.return=y,b;kp(y,b)}return null}function m(y,b,N,_){var E=b!==null?b.key:null;if(typeof N==\"string\"&&N!==\"\"||typeof N==\"number\")return E!==null?null:l(y,b,\"\"+N,_);if(typeof N==\"object\"&&N!==null){switch(N.$$typeof){case pp:return N.key===E?c(y,b,N,_):null;case kd:return N.key===E?d(y,b,N,_):null;case Lo:return E=N._init,m(y,b,E(N._payload),_)}if(Gh(N)||Ph(N))return E!==null?null:u(y,b,N,_,null);kp(y,N)}return null}function g(y,b,N,_,E){if(typeof _==\"string\"&&_!==\"\"||typeof _==\"number\")return y=y.get(N)||null,l(b,y,\"\"+_,E);if(typeof _==\"object\"&&_!==null){switch(_.$$typeof){case pp:return y=y.get(_.key===null?N:_.key)||null,c(b,y,_,E);case kd:return y=y.get(_.key===null?N:_.key)||null,d(b,y,_,E);case Lo:var k=_._init;return g(y,b,N,k(_._payload),E)}if(Gh(_)||Ph(_))return y=y.get(N)||null,u(b,y,_,E,null);kp(b,_)}return null}function v(y,b,N,_){for(var E=null,k=null,P=b,C=b=0,A=null;P!==null&&C<N.length;C++){P.index>C?(A=P,P=null):A=P.sibling;var O=m(y,P,N[C],_);if(O===null){P===null&&(P=A);break}e&&P&&O.alternate===null&&t(y,P),b=i(O,b,C),k===null?E=O:k.sibling=O,k=O,P=A}if(C===N.length)return r(y,P),_r&&Zl(y,C),E;if(P===null){for(;C<N.length;C++)P=h(y,N[C],_),P!==null&&(b=i(P,b,C),k===null?E=P:k.sibling=P,k=P);return _r&&Zl(y,C),E}for(P=s(y,P);C<N.length;C++)A=g(P,y,C,N[C],_),A!==null&&(e&&A.alternate!==null&&P.delete(A.key===null?C:A.key),b=i(A,b,C),k===null?E=A:k.sibling=A,k=A);return e&&P.forEach(function(q){return t(y,q)}),_r&&Zl(y,C),E}function x(y,b,N,_){var E=Ph(N);if(typeof E!=\"function\")throw Error(be(150));if(N=E.call(N),N==null)throw Error(be(151));for(var k=E=null,P=b,C=b=0,A=null,O=N.next();P!==null&&!O.done;C++,O=N.next()){P.index>C?(A=P,P=null):A=P.sibling;var q=m(y,P,O.value,_);if(q===null){P===null&&(P=A);break}e&&P&&q.alternate===null&&t(y,P),b=i(q,b,C),k===null?E=q:k.sibling=q,k=q,P=A}if(O.done)return r(y,P),_r&&Zl(y,C),E;if(P===null){for(;!O.done;C++,O=N.next())O=h(y,O.value,_),O!==null&&(b=i(O,b,C),k===null?E=O:k.sibling=O,k=O);return _r&&Zl(y,C),E}for(P=s(y,P);!O.done;C++,O=N.next())O=g(P,y,C,O.value,_),O!==null&&(e&&O.alternate!==null&&P.delete(O.key===null?C:O.key),b=i(O,b,C),k===null?E=O:k.sibling=O,k=O);return e&&P.forEach(function(K){return t(y,K)}),_r&&Zl(y,C),E}function w(y,b,N,_){if(typeof N==\"object\"&&N!==null&&N.type===Cd&&N.key===null&&(N=N.props.children),typeof N==\"object\"&&N!==null){switch(N.$$typeof){case pp:e:{for(var E=N.key,k=b;k!==null;){if(k.key===E){if(E=N.type,E===Cd){if(k.tag===7){r(y,k.sibling),b=a(k,N.props.children),b.return=y,y=b;break e}}else if(k.elementType===E||typeof E==\"object\"&&E!==null&&E.$$typeof===Lo&&f2(E)===k.type){r(y,k.sibling),b=a(k,N.props),b.ref=Ih(y,k,N),b.return=y,y=b;break e}r(y,k);break}else t(y,k);k=k.sibling}N.type===Cd?(b=Sc(N.props.children,y.mode,_,N.key),b.return=y,y=b):(_=yg(N.type,N.key,N.props,null,y.mode,_),_.ref=Ih(y,b,N),_.return=y,y=_)}return o(y);case kd:e:{for(k=N.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===N.containerInfo&&b.stateNode.implementation===N.implementation){r(y,b.sibling),b=a(b,N.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else t(y,b);b=b.sibling}b=cb(N,y.mode,_),b.return=y,y=b}return o(y);case Lo:return k=N._init,w(y,b,k(N._payload),_)}if(Gh(N))return v(y,b,N,_);if(Ph(N))return x(y,b,N,_);kp(y,N)}return typeof N==\"string\"&&N!==\"\"||typeof N==\"number\"?(N=\"\"+N,b!==null&&b.tag===6?(r(y,b.sibling),b=a(b,N),b.return=y,y=b):(r(y,b),b=lb(N,y.mode,_),b.return=y,y=b),o(y)):r(y,b)}return w}var ku=lO(!0),cO=lO(!1),Yg=Rl(null),Zg=null,Dd=null,w1=null;function j1(){w1=Dd=Zg=null}function N1(e){var t=Yg.current;vr(Yg),e._currentValue=t}function K0(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Qd(e,t){Zg=e,w1=Dd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pn=!0),e.firstContext=null)}function ja(e){var t=e._currentValue;if(w1!==e)if(e={context:e,memoizedValue:t,next:null},Dd===null){if(Zg===null)throw Error(be(308));Dd=e,Zg.dependencies={lanes:0,firstContext:e}}else Dd=Dd.next=e;return t}var dc=null;function _1(e){dc===null?dc=[e]:dc.push(e)}function dO(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,_1(t)):(r.next=a.next,a.next=r),t.interleaved=r,oo(e,s)}function oo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var $o=!1;function S1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ul(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Qt&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,oo(e,r)}return a=s.interleaved,a===null?(t.next=t,_1(s)):(t.next=a.next,a.next=t),s.interleaved=t,oo(e,r)}function mg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,d1(e,r)}}function p2(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ex(e,t,r,s){var a=e.updateQueue;$o=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,u=d=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((s&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,x=l;switch(m=t,g=r,x.tag){case 1:if(v=x.payload,typeof v==\"function\"){h=v.call(g,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,m=typeof v==\"function\"?v.call(g,h,m):v,m==null)break e;h=Rr({},h,m);break e;case 2:$o=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=g,c=h):u=u.next=g,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Rc|=o,e.lanes=o,e.memoizedState=h}}function g2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!=\"function\")throw Error(be(191,a));a.call(s)}}}var Ef={},vi=Rl(Ef),Dm=Rl(Ef),Mm=Rl(Ef);function uc(e){if(e===Ef)throw Error(be(174));return e}function k1(e,t){switch(fr(Mm,t),fr(Dm,e),fr(vi,Ef),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:C0(null,\"\");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=C0(t,e)}vr(vi),fr(vi,t)}function Cu(){vr(vi),vr(Dm),vr(Mm)}function hO(e){uc(Mm.current);var t=uc(vi.current),r=C0(t,e.type);t!==r&&(fr(Dm,e),fr(vi,r))}function C1(e){Dm.current===e&&(vr(vi),vr(Dm))}var Er=Rl(0);function tx(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data===\"$?\"||r.data===\"$!\"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rb=[];function E1(){for(var e=0;e<rb.length;e++)rb[e]._workInProgressVersionPrimary=null;rb.length=0}var fg=go.ReactCurrentDispatcher,sb=go.ReactCurrentBatchConfig,Ac=0,Ar=null,is=null,fs=null,rx=!1,dm=!1,Lm=0,Gq=0;function Bs(){throw Error(be(321))}function P1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Qa(e[r],t[r]))return!1;return!0}function T1(e,t,r,s,a,i){if(Ac=i,Ar=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fg.current=e===null||e.memoizedState===null?Yq:Zq,e=r(s,a),dm){i=0;do{if(dm=!1,Lm=0,25<=i)throw Error(be(301));i+=1,fs=is=null,t.updateQueue=null,fg.current=e7,e=r(s,a)}while(dm)}if(fg.current=sx,t=is!==null&&is.next!==null,Ac=0,fs=is=Ar=null,rx=!1,t)throw Error(be(300));return e}function A1(){var e=Lm!==0;return Lm=0,e}function ai(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fs===null?Ar.memoizedState=fs=e:fs=fs.next=e,fs}function Na(){if(is===null){var e=Ar.alternate;e=e!==null?e.memoizedState:null}else e=is.next;var t=fs===null?Ar.memoizedState:fs.next;if(t!==null)fs=t,is=e;else{if(e===null)throw Error(be(310));is=e,e={memoizedState:is.memoizedState,baseState:is.baseState,baseQueue:is.baseQueue,queue:is.queue,next:null},fs===null?Ar.memoizedState=fs=e:fs=fs.next=e}return fs}function $m(e,t){return typeof t==\"function\"?t(e):t}function nb(e){var t=Na(),r=t.queue;if(r===null)throw Error(be(311));r.lastRenderedReducer=e;var s=is,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Ac&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,Ar.lanes|=u,Rc|=u}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,Qa(s,t.memoizedState)||(Pn=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Ar.lanes|=i,Rc|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ab(e){var t=Na(),r=t.queue;if(r===null)throw Error(be(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Qa(i,t.memoizedState)||(Pn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function mO(){}function fO(e,t){var r=Ar,s=Na(),a=t(),i=!Qa(s.memoizedState,a);if(i&&(s.memoizedState=a,Pn=!0),s=s.queue,R1(xO.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||fs!==null&&fs.memoizedState.tag&1){if(r.flags|=2048,Fm(9,gO.bind(null,r,s,a,t),void 0,null),bs===null)throw Error(be(349));Ac&30||pO(r,t,a)}return a}function pO(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ar.updateQueue,t===null?(t={lastEffect:null,stores:null},Ar.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function gO(e,t,r,s){t.value=r,t.getSnapshot=s,vO(t)&&yO(e)}function xO(e,t,r){return r(function(){vO(t)&&yO(e)})}function vO(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Qa(e,r)}catch{return!0}}function yO(e){var t=oo(e,1);t!==null&&Wa(t,e,1,-1)}function x2(e){var t=ai();return typeof e==\"function\"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$m,lastRenderedState:e},t.queue=e,e=e.dispatch=Xq.bind(null,Ar,e),[t.memoizedState,e]}function Fm(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ar.updateQueue,t===null?(t={lastEffect:null,stores:null},Ar.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function bO(){return Na().memoizedState}function pg(e,t,r,s){var a=ai();Ar.flags|=e,a.memoizedState=Fm(1|t,r,void 0,s===void 0?null:s)}function vv(e,t,r,s){var a=Na();s=s===void 0?null:s;var i=void 0;if(is!==null){var o=is.memoizedState;if(i=o.destroy,s!==null&&P1(s,o.deps)){a.memoizedState=Fm(t,r,i,s);return}}Ar.flags|=e,a.memoizedState=Fm(1|t,r,i,s)}function v2(e,t){return pg(8390656,8,e,t)}function R1(e,t){return vv(2048,8,e,t)}function wO(e,t){return vv(4,2,e,t)}function jO(e,t){return vv(4,4,e,t)}function NO(e,t){if(typeof t==\"function\")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _O(e,t,r){return r=r!=null?r.concat([e]):null,vv(4,4,NO.bind(null,t,e),r)}function O1(){}function SO(e,t){var r=Na();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&P1(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function kO(e,t){var r=Na();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&P1(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function CO(e,t,r){return Ac&21?(Qa(r,t)||(r=R5(),Ar.lanes|=r,Rc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pn=!0),e.memoizedState=r)}function Qq(e,t){var r=dr;dr=r!==0&&4>r?r:4,e(!0);var s=sb.transition;sb.transition={};try{e(!1),t()}finally{dr=r,sb.transition=s}}function EO(){return Na().memoizedState}function Jq(e,t,r){var s=ml(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},PO(e))TO(t,r);else if(r=dO(e,t,r,s),r!==null){var a=un();Wa(r,e,s,a),AO(r,t,s)}}function Xq(e,t,r){var s=ml(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(PO(e))TO(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Qa(l,o)){var c=t.interleaved;c===null?(a.next=a,_1(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=dO(e,t,a,s),r!==null&&(a=un(),Wa(r,e,s,a),AO(r,t,s))}}function PO(e){var t=e.alternate;return e===Ar||t!==null&&t===Ar}function TO(e,t){dm=rx=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function AO(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,d1(e,r)}}var sx={readContext:ja,useCallback:Bs,useContext:Bs,useEffect:Bs,useImperativeHandle:Bs,useInsertionEffect:Bs,useLayoutEffect:Bs,useMemo:Bs,useReducer:Bs,useRef:Bs,useState:Bs,useDebugValue:Bs,useDeferredValue:Bs,useTransition:Bs,useMutableSource:Bs,useSyncExternalStore:Bs,useId:Bs,unstable_isNewReconciler:!1},Yq={readContext:ja,useCallback:function(e,t){return ai().memoizedState=[e,t===void 0?null:t],e},useContext:ja,useEffect:v2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,pg(4194308,4,NO.bind(null,t,e),r)},useLayoutEffect:function(e,t){return pg(4194308,4,e,t)},useInsertionEffect:function(e,t){return pg(4,2,e,t)},useMemo:function(e,t){var r=ai();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=ai();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Jq.bind(null,Ar,e),[s.memoizedState,e]},useRef:function(e){var t=ai();return e={current:e},t.memoizedState=e},useState:x2,useDebugValue:O1,useDeferredValue:function(e){return ai().memoizedState=e},useTransition:function(){var e=x2(!1),t=e[0];return e=Qq.bind(null,e[1]),ai().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ar,a=ai();if(_r){if(r===void 0)throw Error(be(407));r=r()}else{if(r=t(),bs===null)throw Error(be(349));Ac&30||pO(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,v2(xO.bind(null,s,i,e),[e]),s.flags|=2048,Fm(9,gO.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=ai(),t=bs.identifierPrefix;if(_r){var r=Ki,s=Wi;r=(s&~(1<<32-Ha(s)-1)).toString(32)+r,t=\":\"+t+\"R\"+r,r=Lm++,0<r&&(t+=\"H\"+r.toString(32)),t+=\":\"}else r=Gq++,t=\":\"+t+\"r\"+r.toString(32)+\":\";return e.memoizedState=t},unstable_isNewReconciler:!1},Zq={readContext:ja,useCallback:SO,useContext:ja,useEffect:R1,useImperativeHandle:_O,useInsertionEffect:wO,useLayoutEffect:jO,useMemo:kO,useReducer:nb,useRef:bO,useState:function(){return nb($m)},useDebugValue:O1,useDeferredValue:function(e){var t=Na();return CO(t,is.memoizedState,e)},useTransition:function(){var e=nb($m)[0],t=Na().memoizedState;return[e,t]},useMutableSource:mO,useSyncExternalStore:fO,useId:EO,unstable_isNewReconciler:!1},e7={readContext:ja,useCallback:SO,useContext:ja,useEffect:R1,useImperativeHandle:_O,useInsertionEffect:wO,useLayoutEffect:jO,useMemo:kO,useReducer:ab,useRef:bO,useState:function(){return ab($m)},useDebugValue:O1,useDeferredValue:function(e){var t=Na();return is===null?t.memoizedState=e:CO(t,is.memoizedState,e)},useTransition:function(){var e=ab($m)[0],t=Na().memoizedState;return[e,t]},useMutableSource:mO,useSyncExternalStore:fO,useId:EO,unstable_isNewReconciler:!1};function Oa(e,t){if(e&&e.defaultProps){t=Rr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function G0(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Rr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var yv={isMounted:function(e){return(e=e._reactInternals)?Qc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=un(),a=ml(e),i=Yi(s,a);i.payload=t,r!=null&&(i.callback=r),t=ul(e,i,a),t!==null&&(Wa(t,e,a,s),mg(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=un(),a=ml(e),i=Yi(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ul(e,i,a),t!==null&&(Wa(t,e,a,s),mg(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=un(),s=ml(e),a=Yi(r,s);a.tag=2,t!=null&&(a.callback=t),t=ul(e,a,s),t!==null&&(Wa(t,e,s,r),mg(t,e,s))}};function y2(e,t,r,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate==\"function\"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!Am(r,s)||!Am(a,i):!0}function RO(e,t,r){var s=!1,a=wl,i=t.contextType;return typeof i==\"object\"&&i!==null?i=ja(i):(a=Rn(t)?Pc:Ys.current,s=t.contextTypes,i=(s=s!=null)?_u(e,a):wl),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yv,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function b2(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps==\"function\"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps==\"function\"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&yv.enqueueReplaceState(t,t.state,null)}function Q0(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},S1(e);var i=t.contextType;typeof i==\"object\"&&i!==null?a.context=ja(i):(i=Rn(t)?Pc:Ys.current,a.context=_u(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i==\"function\"&&(G0(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps==\"function\"||typeof a.getSnapshotBeforeUpdate==\"function\"||typeof a.UNSAFE_componentWillMount!=\"function\"&&typeof a.componentWillMount!=\"function\"||(t=a.state,typeof a.componentWillMount==\"function\"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==\"function\"&&a.UNSAFE_componentWillMount(),t!==a.state&&yv.enqueueReplaceState(a,a.state,null),ex(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount==\"function\"&&(e.flags|=4194308)}function Eu(e,t){try{var r=\"\",s=t;do r+=E9(s),s=s.return;while(s);var a=r}catch(i){a=`\nError generating stack: `+i.message+`\n`+i.stack}return{value:e,source:t,stack:a,digest:null}}function ib(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function J0(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var t7=typeof WeakMap==\"function\"?WeakMap:Map;function OO(e,t,r){r=Yi(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){ax||(ax=!0,iw=s),J0(e,t)},r}function IO(e,t,r){r=Yi(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s==\"function\"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){J0(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch==\"function\"&&(r.callback=function(){J0(e,t),typeof s!=\"function\"&&(hl===null?hl=new Set([this]):hl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:\"\"})}),r}function w2(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new t7;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=p7.bind(null,e,t,r),t.then(e,e))}function j2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function N2(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Yi(-1,1),t.tag=2,ul(r,t,1))),r.lanes|=1),e)}var r7=go.ReactCurrentOwner,Pn=!1;function nn(e,t,r,s){t.child=e===null?cO(t,null,r,s):ku(t,e.child,r,s)}function _2(e,t,r,s,a){r=r.render;var i=t.ref;return Qd(t,a),s=T1(e,t,r,s,i,a),r=A1(),e!==null&&!Pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,lo(e,t,a)):(_r&&r&&v1(t),t.flags|=1,nn(e,t,s,a),t.child)}function S2(e,t,r,s,a){if(e===null){var i=r.type;return typeof i==\"function\"&&!z1(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,DO(e,t,i,s,a)):(e=yg(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Am,r(o,s)&&e.ref===t.ref)return lo(e,t,a)}return t.flags|=1,e=fl(i,s),e.ref=t.ref,e.return=t,t.child=e}function DO(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(Am(i,s)&&e.ref===t.ref)if(Pn=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Pn=!0);else return t.lanes=e.lanes,lo(e,t,a)}return X0(e,t,r,s,a)}function MO(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode===\"hidden\")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fr(Ld,qn),qn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fr(Ld,qn),qn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,fr(Ld,qn),qn|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,fr(Ld,qn),qn|=s;return nn(e,t,a,r),t.child}function LO(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function X0(e,t,r,s,a){var i=Rn(r)?Pc:Ys.current;return i=_u(t,i),Qd(t,a),r=T1(e,t,r,s,i,a),s=A1(),e!==null&&!Pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,lo(e,t,a)):(_r&&s&&v1(t),t.flags|=1,nn(e,t,r,a),t.child)}function k2(e,t,r,s,a){if(Rn(r)){var i=!0;Qg(t)}else i=!1;if(Qd(t,a),t.stateNode===null)gg(e,t),RO(t,r,s),Q0(t,r,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d==\"object\"&&d!==null?d=ja(d):(d=Rn(r)?Pc:Ys.current,d=_u(t,d));var u=r.getDerivedStateFromProps,h=typeof u==\"function\"||typeof o.getSnapshotBeforeUpdate==\"function\";h||typeof o.UNSAFE_componentWillReceiveProps!=\"function\"&&typeof o.componentWillReceiveProps!=\"function\"||(l!==s||c!==d)&&b2(t,o,s,d),$o=!1;var m=t.memoizedState;o.state=m,ex(t,s,o,a),c=t.memoizedState,l!==s||m!==c||An.current||$o?(typeof u==\"function\"&&(G0(t,r,u,s),c=t.memoizedState),(l=$o||y2(t,r,l,s,m,c,d))?(h||typeof o.UNSAFE_componentWillMount!=\"function\"&&typeof o.componentWillMount!=\"function\"||(typeof o.componentWillMount==\"function\"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount==\"function\"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount==\"function\"&&(t.flags|=4194308)):(typeof o.componentDidMount==\"function\"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount==\"function\"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,uO(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Oa(t.type,l),o.props=d,h=t.pendingProps,m=o.context,c=r.contextType,typeof c==\"object\"&&c!==null?c=ja(c):(c=Rn(r)?Pc:Ys.current,c=_u(t,c));var g=r.getDerivedStateFromProps;(u=typeof g==\"function\"||typeof o.getSnapshotBeforeUpdate==\"function\")||typeof o.UNSAFE_componentWillReceiveProps!=\"function\"&&typeof o.componentWillReceiveProps!=\"function\"||(l!==h||m!==c)&&b2(t,o,s,c),$o=!1,m=t.memoizedState,o.state=m,ex(t,s,o,a);var v=t.memoizedState;l!==h||m!==v||An.current||$o?(typeof g==\"function\"&&(G0(t,r,g,s),v=t.memoizedState),(d=$o||y2(t,r,d,s,m,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!=\"function\"&&typeof o.componentWillUpdate!=\"function\"||(typeof o.componentWillUpdate==\"function\"&&o.componentWillUpdate(s,v,c),typeof o.UNSAFE_componentWillUpdate==\"function\"&&o.UNSAFE_componentWillUpdate(s,v,c)),typeof o.componentDidUpdate==\"function\"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate==\"function\"&&(t.flags|=1024)):(typeof o.componentDidUpdate!=\"function\"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!=\"function\"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),o.props=s,o.state=v,o.context=c,s=d):(typeof o.componentDidUpdate!=\"function\"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!=\"function\"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return Y0(e,t,r,s,i,a)}function Y0(e,t,r,s,a,i){LO(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&u2(t,r,!1),lo(e,t,i);s=t.stateNode,r7.current=t;var l=o&&typeof r.getDerivedStateFromError!=\"function\"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=ku(t,e.child,null,i),t.child=ku(t,null,l,i)):nn(e,t,l,i),t.memoizedState=s.state,a&&u2(t,r,!0),t.child}function $O(e){var t=e.stateNode;t.pendingContext?d2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&d2(e,t.context,!1),k1(e,t.containerInfo)}function C2(e,t,r,s,a){return Su(),b1(a),t.flags|=256,nn(e,t,r,s),t.child}var Z0={dehydrated:null,treeContext:null,retryLane:0};function ew(e){return{baseLanes:e,cachePool:null,transitions:null}}function FO(e,t,r){var s=t.pendingProps,a=Er.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),fr(Er,a&1),e===null)return W0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data===\"$!\"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:\"hidden\",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jv(o,s,0,null),e=Sc(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ew(r),t.memoizedState=Z0,e):I1(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return s7(e,t,o,s,l,a,r);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:\"hidden\",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=fl(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=fl(l,i):(i=Sc(i,o,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?ew(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Z0,s}return i=e.child,e=i.sibling,s=fl(i,{mode:\"visible\",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function I1(e,t){return t=jv({mode:\"visible\",children:t},e.mode,0,null),t.return=e,e.child=t}function Cp(e,t,r,s){return s!==null&&b1(s),ku(t,e.child,null,r),e=I1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function s7(e,t,r,s,a,i,o){if(r)return t.flags&256?(t.flags&=-257,s=ib(Error(be(422))),Cp(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=jv({mode:\"visible\",children:s.children},a,0,null),i=Sc(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&ku(t,e.child,null,o),t.child.memoizedState=ew(o),t.memoizedState=Z0,i);if(!(t.mode&1))return Cp(e,t,o,null);if(a.data===\"$!\"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(be(419)),s=ib(i,s,void 0),Cp(e,t,o,s)}if(l=(o&e.childLanes)!==0,Pn||l){if(s=bs,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,oo(e,a),Wa(s,e,a,-1))}return V1(),s=ib(Error(be(421))),Cp(e,t,o,s)}return a.data===\"$?\"?(t.flags|=128,t.child=e.child,t=g7.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Qn=dl(a.nextSibling),Jn=t,_r=!0,$a=null,e!==null&&(fa[pa++]=Wi,fa[pa++]=Ki,fa[pa++]=Tc,Wi=e.id,Ki=e.overflow,Tc=t),t=I1(t,s.children),t.flags|=4096,t)}function E2(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),K0(e.return,t,r)}function ob(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function VO(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(nn(e,t,s.children,r),s=Er.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&E2(e,r,t);else if(e.tag===19)E2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(fr(Er,s),!(t.mode&1))t.memoizedState=null;else switch(a){case\"forwards\":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&tx(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ob(t,!1,a,r,i);break;case\"backwards\":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&tx(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ob(t,!0,r,null,i);break;case\"together\":ob(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Rc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(be(153));if(t.child!==null){for(e=t.child,r=fl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=fl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function n7(e,t,r){switch(t.tag){case 3:$O(t),Su();break;case 5:hO(t);break;case 1:Rn(t.type)&&Qg(t);break;case 4:k1(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;fr(Yg,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(fr(Er,Er.current&1),t.flags|=128,null):r&t.child.childLanes?FO(e,t,r):(fr(Er,Er.current&1),e=lo(e,t,r),e!==null?e.sibling:null);fr(Er,Er.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return VO(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),fr(Er,Er.current),s)break;return null;case 22:case 23:return t.lanes=0,MO(e,t,r)}return lo(e,t,r)}var zO,tw,BO,UO;zO=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tw=function(){};BO=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,uc(vi.current);var i=null;switch(r){case\"input\":a=N0(e,a),s=N0(e,s),i=[];break;case\"select\":a=Rr({},a,{value:void 0}),s=Rr({},s,{value:void 0}),i=[];break;case\"textarea\":a=k0(e,a),s=k0(e,s),i=[];break;default:typeof a.onClick!=\"function\"&&typeof s.onClick==\"function\"&&(e.onclick=Kg)}E0(r,s);var o;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d===\"style\"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]=\"\")}else d!==\"dangerouslySetInnerHTML\"&&d!==\"children\"&&d!==\"suppressContentEditableWarning\"&&d!==\"suppressHydrationWarning\"&&d!==\"autoFocus\"&&(_m.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d===\"style\")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]=\"\");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d===\"dangerouslySetInnerHTML\"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d===\"children\"?typeof c!=\"string\"&&typeof c!=\"number\"||(i=i||[]).push(d,\"\"+c):d!==\"suppressContentEditableWarning\"&&d!==\"suppressHydrationWarning\"&&(_m.hasOwnProperty(d)?(c!=null&&d===\"onScroll\"&&xr(\"scroll\",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push(\"style\",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};UO=function(e,t,r,s){r!==s&&(t.flags|=4)};function Dh(e,t){if(!_r)switch(e.tailMode){case\"hidden\":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case\"collapsed\":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Us(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function a7(e,t,r){var s=t.pendingProps;switch(y1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Us(t),null;case 1:return Rn(t.type)&&Gg(),Us(t),null;case 3:return s=t.stateNode,Cu(),vr(An),vr(Ys),E1(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Sp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$a!==null&&(cw($a),$a=null))),tw(e,t),Us(t),null;case 5:C1(t);var a=uc(Mm.current);if(r=t.type,e!==null&&t.stateNode!=null)BO(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(be(166));return Us(t),null}if(e=uc(vi.current),Sp(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[ui]=t,s[Im]=i,e=(t.mode&1)!==0,r){case\"dialog\":xr(\"cancel\",s),xr(\"close\",s);break;case\"iframe\":case\"object\":case\"embed\":xr(\"load\",s);break;case\"video\":case\"audio\":for(a=0;a<Jh.length;a++)xr(Jh[a],s);break;case\"source\":xr(\"error\",s);break;case\"img\":case\"image\":case\"link\":xr(\"error\",s),xr(\"load\",s);break;case\"details\":xr(\"toggle\",s);break;case\"input\":LS(s,i),xr(\"invalid\",s);break;case\"select\":s._wrapperState={wasMultiple:!!i.multiple},xr(\"invalid\",s);break;case\"textarea\":FS(s,i),xr(\"invalid\",s)}E0(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o===\"children\"?typeof l==\"string\"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&_p(s.textContent,l,e),a=[\"children\",l]):typeof l==\"number\"&&s.textContent!==\"\"+l&&(i.suppressHydrationWarning!==!0&&_p(s.textContent,l,e),a=[\"children\",\"\"+l]):_m.hasOwnProperty(o)&&l!=null&&o===\"onScroll\"&&xr(\"scroll\",s)}switch(r){case\"input\":gp(s),$S(s,i,!0);break;case\"textarea\":gp(s),VS(s);break;case\"select\":case\"option\":break;default:typeof i.onClick==\"function\"&&(s.onclick=Kg)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e===\"http://www.w3.org/1999/xhtml\"&&(e=x5(r)),e===\"http://www.w3.org/1999/xhtml\"?r===\"script\"?(e=o.createElement(\"div\"),e.innerHTML=\"<script><\\/script>\",e=e.removeChild(e.firstChild)):typeof s.is==\"string\"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r===\"select\"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[ui]=t,e[Im]=s,zO(e,t,!1,!1),t.stateNode=e;e:{switch(o=P0(r,s),r){case\"dialog\":xr(\"cancel\",e),xr(\"close\",e),a=s;break;case\"iframe\":case\"object\":case\"embed\":xr(\"load\",e),a=s;break;case\"video\":case\"audio\":for(a=0;a<Jh.length;a++)xr(Jh[a],e);a=s;break;case\"source\":xr(\"error\",e),a=s;break;case\"img\":case\"image\":case\"link\":xr(\"error\",e),xr(\"load\",e),a=s;break;case\"details\":xr(\"toggle\",e),a=s;break;case\"input\":LS(e,s),a=N0(e,s),xr(\"invalid\",e);break;case\"option\":a=s;break;case\"select\":e._wrapperState={wasMultiple:!!s.multiple},a=Rr({},s,{value:void 0}),xr(\"invalid\",e);break;case\"textarea\":FS(e,s),a=k0(e,s),xr(\"invalid\",e);break;default:a=s}E0(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i===\"style\"?b5(e,c):i===\"dangerouslySetInnerHTML\"?(c=c?c.__html:void 0,c!=null&&v5(e,c)):i===\"children\"?typeof c==\"string\"?(r!==\"textarea\"||c!==\"\")&&Sm(e,c):typeof c==\"number\"&&Sm(e,\"\"+c):i!==\"suppressContentEditableWarning\"&&i!==\"suppressHydrationWarning\"&&i!==\"autoFocus\"&&(_m.hasOwnProperty(i)?c!=null&&i===\"onScroll\"&&xr(\"scroll\",e):c!=null&&n1(e,i,c,o))}switch(r){case\"input\":gp(e),$S(e,s,!1);break;case\"textarea\":gp(e),VS(e);break;case\"option\":s.value!=null&&e.setAttribute(\"value\",\"\"+bl(s.value));break;case\"select\":e.multiple=!!s.multiple,i=s.value,i!=null?Hd(e,!!s.multiple,i,!1):s.defaultValue!=null&&Hd(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick==\"function\"&&(e.onclick=Kg)}switch(r){case\"button\":case\"input\":case\"select\":case\"textarea\":s=!!s.autoFocus;break e;case\"img\":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Us(t),null;case 6:if(e&&t.stateNode!=null)UO(e,t,e.memoizedProps,s);else{if(typeof s!=\"string\"&&t.stateNode===null)throw Error(be(166));if(r=uc(Mm.current),uc(vi.current),Sp(t)){if(s=t.stateNode,r=t.memoizedProps,s[ui]=t,(i=s.nodeValue!==r)&&(e=Jn,e!==null))switch(e.tag){case 3:_p(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_p(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[ui]=t,t.stateNode=s}return Us(t),null;case 13:if(vr(Er),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_r&&Qn!==null&&t.mode&1&&!(t.flags&128))oO(),Su(),t.flags|=98560,i=!1;else if(i=Sp(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(be(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(be(317));i[ui]=t}else Su(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Us(t),i=!1}else $a!==null&&(cw($a),$a=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Er.current&1?ds===0&&(ds=3):V1())),t.updateQueue!==null&&(t.flags|=4),Us(t),null);case 4:return Cu(),tw(e,t),e===null&&Rm(t.stateNode.containerInfo),Us(t),null;case 10:return N1(t.type._context),Us(t),null;case 17:return Rn(t.type)&&Gg(),Us(t),null;case 19:if(vr(Er),i=t.memoizedState,i===null)return Us(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)Dh(i,!1);else{if(ds!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=tx(e),o!==null){for(t.flags|=128,Dh(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return fr(Er,Er.current&1|2),t.child}e=e.sibling}i.tail!==null&&qr()>Pu&&(t.flags|=128,s=!0,Dh(i,!1),t.lanes=4194304)}else{if(!s)if(e=tx(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Dh(i,!0),i.tail===null&&i.tailMode===\"hidden\"&&!o.alternate&&!_r)return Us(t),null}else 2*qr()-i.renderingStartTime>Pu&&r!==1073741824&&(t.flags|=128,s=!0,Dh(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=qr(),t.sibling=null,r=Er.current,fr(Er,s?r&1|2:r&1),t):(Us(t),null);case 22:case 23:return F1(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?qn&1073741824&&(Us(t),t.subtreeFlags&6&&(t.flags|=8192)):Us(t),null;case 24:return null;case 25:return null}throw Error(be(156,t.tag))}function i7(e,t){switch(y1(t),t.tag){case 1:return Rn(t.type)&&Gg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cu(),vr(An),vr(Ys),E1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return C1(t),null;case 13:if(vr(Er),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(be(340));Su()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vr(Er),null;case 4:return Cu(),null;case 10:return N1(t.type._context),null;case 22:case 23:return F1(),null;case 24:return null;default:return null}}var Ep=!1,Gs=!1,o7=typeof WeakSet==\"function\"?WeakSet:Set,Le=null;function Md(e,t){var r=e.ref;if(r!==null)if(typeof r==\"function\")try{r(null)}catch(s){Mr(e,t,s)}else r.current=null}function rw(e,t,r){try{r()}catch(s){Mr(e,t,s)}}var P2=!1;function l7(e,t){if(F0=qg,e=G5(),x1(e)){if(\"selectionStart\"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var g;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==i||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===e)break t;if(m===r&&++d===a&&(l=o),m===i&&++u===s&&(c=o),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(V0={focusedElem:e,selectionRange:r},qg=!1,Le=t;Le!==null;)if(t=Le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Le=e;else for(;Le!==null;){t=Le;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,w=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:Oa(t.type,x),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent=\"\":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(_){Mr(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Le=e;break}Le=t.return}return v=P2,P2=!1,v}function um(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&rw(t,r,i)}a=a.next}while(a!==s)}}function bv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function sw(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t==\"function\"?t(e):t.current=e}}function qO(e){var t=e.alternate;t!==null&&(e.alternate=null,qO(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ui],delete t[Im],delete t[U0],delete t[qq],delete t[Hq])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function HO(e){return e.tag===5||e.tag===3||e.tag===4}function T2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||HO(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nw(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Kg));else if(s!==4&&(e=e.child,e!==null))for(nw(e,t,r),e=e.sibling;e!==null;)nw(e,t,r),e=e.sibling}function aw(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(aw(e,t,r),e=e.sibling;e!==null;)aw(e,t,r),e=e.sibling}var As=null,Ma=!1;function Eo(e,t,r){for(r=r.child;r!==null;)WO(e,t,r),r=r.sibling}function WO(e,t,r){if(xi&&typeof xi.onCommitFiberUnmount==\"function\")try{xi.onCommitFiberUnmount(hv,r)}catch{}switch(r.tag){case 5:Gs||Md(r,t);case 6:var s=As,a=Ma;As=null,Eo(e,t,r),As=s,Ma=a,As!==null&&(Ma?(e=As,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):As.removeChild(r.stateNode));break;case 18:As!==null&&(Ma?(e=As,r=r.stateNode,e.nodeType===8?eb(e.parentNode,r):e.nodeType===1&&eb(e,r),Pm(e)):eb(As,r.stateNode));break;case 4:s=As,a=Ma,As=r.stateNode.containerInfo,Ma=!0,Eo(e,t,r),As=s,Ma=a;break;case 0:case 11:case 14:case 15:if(!Gs&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&rw(r,t,o),a=a.next}while(a!==s)}Eo(e,t,r);break;case 1:if(!Gs&&(Md(r,t),s=r.stateNode,typeof s.componentWillUnmount==\"function\"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Mr(r,t,l)}Eo(e,t,r);break;case 21:Eo(e,t,r);break;case 22:r.mode&1?(Gs=(s=Gs)||r.memoizedState!==null,Eo(e,t,r),Gs=s):Eo(e,t,r);break;default:Eo(e,t,r)}}function A2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new o7),t.forEach(function(s){var a=x7.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Pa(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:As=l.stateNode,Ma=!1;break e;case 3:As=l.stateNode.containerInfo,Ma=!0;break e;case 4:As=l.stateNode.containerInfo,Ma=!0;break e}l=l.return}if(As===null)throw Error(be(160));WO(i,o,a),As=null,Ma=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Mr(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)KO(t,e),t=t.sibling}function KO(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pa(t,e),si(e),s&4){try{um(3,e,e.return),bv(3,e)}catch(x){Mr(e,e.return,x)}try{um(5,e,e.return)}catch(x){Mr(e,e.return,x)}}break;case 1:Pa(t,e),si(e),s&512&&r!==null&&Md(r,r.return);break;case 5:if(Pa(t,e),si(e),s&512&&r!==null&&Md(r,r.return),e.flags&32){var a=e.stateNode;try{Sm(a,\"\")}catch(x){Mr(e,e.return,x)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l===\"input\"&&i.type===\"radio\"&&i.name!=null&&p5(a,i),P0(l,o);var d=P0(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u===\"style\"?b5(a,h):u===\"dangerouslySetInnerHTML\"?v5(a,h):u===\"children\"?Sm(a,h):n1(a,u,h,d)}switch(l){case\"input\":_0(a,i);break;case\"textarea\":g5(a,i);break;case\"select\":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Hd(a,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Hd(a,!!i.multiple,i.defaultValue,!0):Hd(a,!!i.multiple,i.multiple?[]:\"\",!1))}a[Im]=i}catch(x){Mr(e,e.return,x)}}break;case 6:if(Pa(t,e),si(e),s&4){if(e.stateNode===null)throw Error(be(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){Mr(e,e.return,x)}}break;case 3:if(Pa(t,e),si(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Pm(t.containerInfo)}catch(x){Mr(e,e.return,x)}break;case 4:Pa(t,e),si(e);break;case 13:Pa(t,e),si(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(L1=qr())),s&4&&A2(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Gs=(d=Gs)||u,Pa(t,e),Gs=d):Pa(t,e),si(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Le=e,u=e.child;u!==null;){for(h=Le=u;Le!==null;){switch(m=Le,g=m.child,m.tag){case 0:case 11:case 14:case 15:um(4,m,m.return);break;case 1:Md(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount==\"function\"){s=m,r=m.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){Mr(s,r,x)}}break;case 5:Md(m,m.return);break;case 22:if(m.memoizedState!==null){O2(h);continue}}g!==null?(g.return=m,Le=g):O2(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty==\"function\"?i.setProperty(\"display\",\"none\",\"important\"):i.display=\"none\"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty(\"display\")?c.display:null,l.style.display=y5(\"display\",o))}catch(x){Mr(e,e.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?\"\":h.memoizedProps}catch(x){Mr(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Pa(t,e),si(e),s&4&&A2(e);break;case 21:break;default:Pa(t,e),si(e)}}function si(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(HO(r)){var s=r;break e}r=r.return}throw Error(be(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Sm(a,\"\"),s.flags&=-33);var i=T2(e);aw(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=T2(e);nw(e,l,o);break;default:throw Error(be(161))}}catch(c){Mr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function c7(e,t,r){Le=e,GO(e)}function GO(e,t,r){for(var s=(e.mode&1)!==0;Le!==null;){var a=Le,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Ep;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Gs;l=Ep;var d=Gs;if(Ep=o,(Gs=c)&&!d)for(Le=a;Le!==null;)o=Le,c=o.child,o.tag===22&&o.memoizedState!==null?I2(a):c!==null?(c.return=o,Le=c):I2(a);for(;i!==null;)Le=i,GO(i),i=i.sibling;Le=a,Ep=l,Gs=d}R2(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Le=i):R2(e)}}function R2(e){for(;Le!==null;){var t=Le;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gs||bv(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Gs)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Oa(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&g2(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}g2(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case\"button\":case\"input\":case\"select\":case\"textarea\":c.autoFocus&&r.focus();break;case\"img\":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Pm(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}Gs||t.flags&512&&sw(t)}catch(m){Mr(t,t.return,m)}}if(t===e){Le=null;break}if(r=t.sibling,r!==null){r.return=t.return,Le=r;break}Le=t.return}}function O2(e){for(;Le!==null;){var t=Le;if(t===e){Le=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Le=r;break}Le=t.return}}function I2(e){for(;Le!==null;){var t=Le;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{bv(4,t)}catch(c){Mr(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount==\"function\"){var a=t.return;try{s.componentDidMount()}catch(c){Mr(t,a,c)}}var i=t.return;try{sw(t)}catch(c){Mr(t,i,c)}break;case 5:var o=t.return;try{sw(t)}catch(c){Mr(t,o,c)}}}catch(c){Mr(t,t.return,c)}if(t===e){Le=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Le=l;break}Le=t.return}}var d7=Math.ceil,nx=go.ReactCurrentDispatcher,D1=go.ReactCurrentOwner,va=go.ReactCurrentBatchConfig,Qt=0,bs=null,Xr=null,Ls=0,qn=0,Ld=Rl(0),ds=0,Vm=null,Rc=0,wv=0,M1=0,hm=null,_n=null,L1=0,Pu=1/0,Vi=null,ax=!1,iw=null,hl=null,Pp=!1,tl=null,ix=0,mm=0,ow=null,xg=-1,vg=0;function un(){return Qt&6?qr():xg!==-1?xg:xg=qr()}function ml(e){return e.mode&1?Qt&2&&Ls!==0?Ls&-Ls:Kq.transition!==null?(vg===0&&(vg=R5()),vg):(e=dr,e!==0||(e=window.event,e=e===void 0?16:F5(e.type)),e):1}function Wa(e,t,r,s){if(50<mm)throw mm=0,ow=null,Error(be(185));Sf(e,r,s),(!(Qt&2)||e!==bs)&&(e===bs&&(!(Qt&2)&&(wv|=r),ds===4&&Vo(e,Ls)),On(e,s),r===1&&Qt===0&&!(t.mode&1)&&(Pu=qr()+500,xv&&Ol()))}function On(e,t){var r=e.callbackNode;K9(e,t);var s=Ug(e,e===bs?Ls:0);if(s===0)r!==null&&US(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&US(r),t===1)e.tag===0?Wq(D2.bind(null,e)):nO(D2.bind(null,e)),Bq(function(){!(Qt&6)&&Ol()}),r=null;else{switch(O5(s)){case 1:r=c1;break;case 4:r=T5;break;case 16:r=Bg;break;case 536870912:r=A5;break;default:r=Bg}r=rI(r,QO.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function QO(e,t){if(xg=-1,vg=0,Qt&6)throw Error(be(327));var r=e.callbackNode;if(Jd()&&e.callbackNode!==r)return null;var s=Ug(e,e===bs?Ls:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=ox(e,s);else{t=s;var a=Qt;Qt|=2;var i=XO();(bs!==e||Ls!==t)&&(Vi=null,Pu=qr()+500,_c(e,t));do try{m7();break}catch(l){JO(e,l)}while(!0);j1(),nx.current=i,Qt=a,Xr!==null?t=0:(bs=null,Ls=0,t=ds)}if(t!==0){if(t===2&&(a=I0(e),a!==0&&(s=a,t=lw(e,a))),t===1)throw r=Vm,_c(e,0),Vo(e,s),On(e,qr()),r;if(t===6)Vo(e,s);else{if(a=e.current.alternate,!(s&30)&&!u7(a)&&(t=ox(e,s),t===2&&(i=I0(e),i!==0&&(s=i,t=lw(e,i))),t===1))throw r=Vm,_c(e,0),Vo(e,s),On(e,qr()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(be(345));case 2:ec(e,_n,Vi);break;case 3:if(Vo(e,s),(s&130023424)===s&&(t=L1+500-qr(),10<t)){if(Ug(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){un(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=B0(ec.bind(null,e,_n,Vi),t);break}ec(e,_n,Vi);break;case 4:if(Vo(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-Ha(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=qr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*d7(s/1960))-s,10<s){e.timeoutHandle=B0(ec.bind(null,e,_n,Vi),s);break}ec(e,_n,Vi);break;case 5:ec(e,_n,Vi);break;default:throw Error(be(329))}}}return On(e,qr()),e.callbackNode===r?QO.bind(null,e):null}function lw(e,t){var r=hm;return e.current.memoizedState.isDehydrated&&(_c(e,t).flags|=256),e=ox(e,t),e!==2&&(t=_n,_n=r,t!==null&&cw(t)),e}function cw(e){_n===null?_n=e:_n.push.apply(_n,e)}function u7(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!Qa(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vo(e,t){for(t&=~M1,t&=~wv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ha(t),s=1<<r;e[r]=-1,t&=~s}}function D2(e){if(Qt&6)throw Error(be(327));Jd();var t=Ug(e,0);if(!(t&1))return On(e,qr()),null;var r=ox(e,t);if(e.tag!==0&&r===2){var s=I0(e);s!==0&&(t=s,r=lw(e,s))}if(r===1)throw r=Vm,_c(e,0),Vo(e,t),On(e,qr()),r;if(r===6)throw Error(be(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ec(e,_n,Vi),On(e,qr()),null}function $1(e,t){var r=Qt;Qt|=1;try{return e(t)}finally{Qt=r,Qt===0&&(Pu=qr()+500,xv&&Ol())}}function Oc(e){tl!==null&&tl.tag===0&&!(Qt&6)&&Jd();var t=Qt;Qt|=1;var r=va.transition,s=dr;try{if(va.transition=null,dr=1,e)return e()}finally{dr=s,va.transition=r,Qt=t,!(Qt&6)&&Ol()}}function F1(){qn=Ld.current,vr(Ld)}function _c(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,zq(r)),Xr!==null)for(r=Xr.return;r!==null;){var s=r;switch(y1(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Gg();break;case 3:Cu(),vr(An),vr(Ys),E1();break;case 5:C1(s);break;case 4:Cu();break;case 13:vr(Er);break;case 19:vr(Er);break;case 10:N1(s.type._context);break;case 22:case 23:F1()}r=r.return}if(bs=e,Xr=e=fl(e.current,null),Ls=qn=t,ds=0,Vm=null,M1=wv=Rc=0,_n=hm=null,dc!==null){for(t=0;t<dc.length;t++)if(r=dc[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}dc=null}return e}function JO(e,t){do{var r=Xr;try{if(j1(),fg.current=sx,rx){for(var s=Ar.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}rx=!1}if(Ac=0,fs=is=Ar=null,dm=!1,Lm=0,D1.current=null,r===null||r.return===null){ds=1,Vm=t,Xr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Ls,l.flags|=32768,c!==null&&typeof c==\"object\"&&typeof c.then==\"function\"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=j2(o);if(g!==null){g.flags&=-257,N2(g,o,l,i,t),g.mode&1&&w2(i,d,t),t=g,c=d;var v=t.updateQueue;if(v===null){var x=new Set;x.add(c),t.updateQueue=x}else v.add(c);break e}else{if(!(t&1)){w2(i,d,t),V1();break e}c=Error(be(426))}}else if(_r&&l.mode&1){var w=j2(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),N2(w,o,l,i,t),b1(Eu(c,l));break e}}i=c=Eu(c,l),ds!==4&&(ds=2),hm===null?hm=[i]:hm.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=OO(i,c,t);p2(i,y);break e;case 1:l=c;var b=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError==\"function\"||N!==null&&typeof N.componentDidCatch==\"function\"&&(hl===null||!hl.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=IO(i,l,t);p2(i,_);break e}}i=i.return}while(i!==null)}ZO(r)}catch(E){t=E,Xr===r&&r!==null&&(Xr=r=r.return);continue}break}while(!0)}function XO(){var e=nx.current;return nx.current=sx,e===null?sx:e}function V1(){(ds===0||ds===3||ds===2)&&(ds=4),bs===null||!(Rc&268435455)&&!(wv&268435455)||Vo(bs,Ls)}function ox(e,t){var r=Qt;Qt|=2;var s=XO();(bs!==e||Ls!==t)&&(Vi=null,_c(e,t));do try{h7();break}catch(a){JO(e,a)}while(!0);if(j1(),Qt=r,nx.current=s,Xr!==null)throw Error(be(261));return bs=null,Ls=0,ds}function h7(){for(;Xr!==null;)YO(Xr)}function m7(){for(;Xr!==null&&!$9();)YO(Xr)}function YO(e){var t=tI(e.alternate,e,qn);e.memoizedProps=e.pendingProps,t===null?ZO(e):Xr=t,D1.current=null}function ZO(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=i7(r,t),r!==null){r.flags&=32767,Xr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ds=6,Xr=null;return}}else if(r=a7(r,t,qn),r!==null){Xr=r;return}if(t=t.sibling,t!==null){Xr=t;return}Xr=t=e}while(t!==null);ds===0&&(ds=5)}function ec(e,t,r){var s=dr,a=va.transition;try{va.transition=null,dr=1,f7(e,t,r,s)}finally{va.transition=a,dr=s}return null}function f7(e,t,r,s){do Jd();while(tl!==null);if(Qt&6)throw Error(be(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(be(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(G9(e,i),e===bs&&(Xr=bs=null,Ls=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Pp||(Pp=!0,rI(Bg,function(){return Jd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=va.transition,va.transition=null;var o=dr;dr=1;var l=Qt;Qt|=4,D1.current=null,l7(e,r),KO(r,e),Iq(V0),qg=!!F0,V0=F0=null,e.current=r,c7(r),F9(),Qt=l,dr=o,va.transition=i}else e.current=r;if(Pp&&(Pp=!1,tl=e,ix=a),i=e.pendingLanes,i===0&&(hl=null),B9(r.stateNode),On(e,qr()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(ax)throw ax=!1,e=iw,iw=null,e;return ix&1&&e.tag!==0&&Jd(),i=e.pendingLanes,i&1?e===ow?mm++:(mm=0,ow=e):mm=0,Ol(),null}function Jd(){if(tl!==null){var e=O5(ix),t=va.transition,r=dr;try{if(va.transition=null,dr=16>e?16:e,tl===null)var s=!1;else{if(e=tl,tl=null,ix=0,Qt&6)throw Error(be(331));var a=Qt;for(Qt|=4,Le=e.current;Le!==null;){var i=Le,o=i.child;if(Le.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Le=d;Le!==null;){var u=Le;switch(u.tag){case 0:case 11:case 15:um(8,u,i)}var h=u.child;if(h!==null)h.return=u,Le=h;else for(;Le!==null;){u=Le;var m=u.sibling,g=u.return;if(qO(u),u===d){Le=null;break}if(m!==null){m.return=g,Le=m;break}Le=g}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}Le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Le=o;else e:for(;Le!==null;){if(i=Le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:um(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Le=y;break e}Le=i.return}}var b=e.current;for(Le=b;Le!==null;){o=Le;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,Le=N;else e:for(o=b;Le!==null;){if(l=Le,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:bv(9,l)}}catch(E){Mr(l,l.return,E)}if(l===o){Le=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Le=_;break e}Le=l.return}}if(Qt=a,Ol(),xi&&typeof xi.onPostCommitFiberRoot==\"function\")try{xi.onPostCommitFiberRoot(hv,e)}catch{}s=!0}return s}finally{dr=r,va.transition=t}}return!1}function M2(e,t,r){t=Eu(r,t),t=OO(e,t,1),e=ul(e,t,1),t=un(),e!==null&&(Sf(e,1,t),On(e,t))}function Mr(e,t,r){if(e.tag===3)M2(e,e,r);else for(;t!==null;){if(t.tag===3){M2(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError==\"function\"||typeof s.componentDidCatch==\"function\"&&(hl===null||!hl.has(s))){e=Eu(r,e),e=IO(t,e,1),t=ul(t,e,1),e=un(),t!==null&&(Sf(t,1,e),On(t,e));break}}t=t.return}}function p7(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=un(),e.pingedLanes|=e.suspendedLanes&r,bs===e&&(Ls&r)===r&&(ds===4||ds===3&&(Ls&130023424)===Ls&&500>qr()-L1?_c(e,0):M1|=r),On(e,t)}function eI(e,t){t===0&&(e.mode&1?(t=yp,yp<<=1,!(yp&130023424)&&(yp=4194304)):t=1);var r=un();e=oo(e,t),e!==null&&(Sf(e,t,r),On(e,r))}function g7(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),eI(e,r)}function x7(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(be(314))}s!==null&&s.delete(t),eI(e,r)}var tI;tI=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||An.current)Pn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Pn=!1,n7(e,t,r);Pn=!!(e.flags&131072)}else Pn=!1,_r&&t.flags&1048576&&aO(t,Xg,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;gg(e,t),e=t.pendingProps;var a=_u(t,Ys.current);Qd(t,r),a=T1(null,t,s,e,a,r);var i=A1();return t.flags|=1,typeof a==\"object\"&&a!==null&&typeof a.render==\"function\"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rn(s)?(i=!0,Qg(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,S1(t),a.updater=yv,t.stateNode=a,a._reactInternals=t,Q0(t,s,e,r),t=Y0(null,t,s,!0,i,r)):(t.tag=0,_r&&i&&v1(t),nn(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(gg(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=y7(s),e=Oa(s,e),a){case 0:t=X0(null,t,s,e,r);break e;case 1:t=k2(null,t,s,e,r);break e;case 11:t=_2(null,t,s,e,r);break e;case 14:t=S2(null,t,s,Oa(s.type,e),r);break e}throw Error(be(306,s,\"\"))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Oa(s,a),X0(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Oa(s,a),k2(e,t,s,a,r);case 3:e:{if($O(t),e===null)throw Error(be(387));s=t.pendingProps,i=t.memoizedState,a=i.element,uO(e,t),ex(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Eu(Error(be(423)),t),t=C2(e,t,s,r,a);break e}else if(s!==a){a=Eu(Error(be(424)),t),t=C2(e,t,s,r,a);break e}else for(Qn=dl(t.stateNode.containerInfo.firstChild),Jn=t,_r=!0,$a=null,r=cO(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Su(),s===a){t=lo(e,t,r);break e}nn(e,t,s,r)}t=t.child}return t;case 5:return hO(t),e===null&&W0(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,z0(s,a)?o=null:i!==null&&z0(s,i)&&(t.flags|=32),LO(e,t),nn(e,t,o,r),t.child;case 6:return e===null&&W0(t),null;case 13:return FO(e,t,r);case 4:return k1(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ku(t,null,s,r):nn(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Oa(s,a),_2(e,t,s,a,r);case 7:return nn(e,t,t.pendingProps,r),t.child;case 8:return nn(e,t,t.pendingProps.children,r),t.child;case 12:return nn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,fr(Yg,s._currentValue),s._currentValue=o,i!==null)if(Qa(i.value,o)){if(i.children===a.children&&!An.current){t=lo(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Yi(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),K0(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(be(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),K0(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}nn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Qd(t,r),a=ja(a),s=s(a),t.flags|=1,nn(e,t,s,r),t.child;case 14:return s=t.type,a=Oa(s,t.pendingProps),a=Oa(s.type,a),S2(e,t,s,a,r);case 15:return DO(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Oa(s,a),gg(e,t),t.tag=1,Rn(s)?(e=!0,Qg(t)):e=!1,Qd(t,r),RO(t,s,a),Q0(t,s,a,r),Y0(null,t,s,!0,e,r);case 19:return VO(e,t,r);case 22:return MO(e,t,r)}throw Error(be(156,t.tag))};function rI(e,t){return P5(e,t)}function v7(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xa(e,t,r,s){return new v7(e,t,r,s)}function z1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function y7(e){if(typeof e==\"function\")return z1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===i1)return 11;if(e===o1)return 14}return 2}function fl(e,t){var r=e.alternate;return r===null?(r=xa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function yg(e,t,r,s,a,i){var o=2;if(s=e,typeof e==\"function\")z1(e)&&(o=1);else if(typeof e==\"string\")o=5;else e:switch(e){case Cd:return Sc(r.children,a,i,t);case a1:o=8,a|=8;break;case y0:return e=xa(12,r,t,a|2),e.elementType=y0,e.lanes=i,e;case b0:return e=xa(13,r,t,a),e.elementType=b0,e.lanes=i,e;case w0:return e=xa(19,r,t,a),e.elementType=w0,e.lanes=i,e;case h5:return jv(r,a,i,t);default:if(typeof e==\"object\"&&e!==null)switch(e.$$typeof){case d5:o=10;break e;case u5:o=9;break e;case i1:o=11;break e;case o1:o=14;break e;case Lo:o=16,s=null;break e}throw Error(be(130,e==null?e:typeof e,\"\"))}return t=xa(o,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function Sc(e,t,r,s){return e=xa(7,e,s,t),e.lanes=r,e}function jv(e,t,r,s){return e=xa(22,e,s,t),e.elementType=h5,e.lanes=r,e.stateNode={isHidden:!1},e}function lb(e,t,r){return e=xa(6,e,null,t),e.lanes=r,e}function cb(e,t,r){return t=xa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function b7(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uy(0),this.expirationTimes=Uy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uy(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function B1(e,t,r,s,a,i,o,l,c){return e=new b7(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xa(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},S1(i),e}function w7(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kd,key:s==null?null:\"\"+s,children:e,containerInfo:t,implementation:r}}function sI(e){if(!e)return wl;e=e._reactInternals;e:{if(Qc(e)!==e||e.tag!==1)throw Error(be(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(be(171))}if(e.tag===1){var r=e.type;if(Rn(r))return sO(e,r,t)}return t}function nI(e,t,r,s,a,i,o,l,c){return e=B1(r,s,!0,e,a,i,o,l,c),e.context=sI(null),r=e.current,s=un(),a=ml(r),i=Yi(s,a),i.callback=t??null,ul(r,i,a),e.current.lanes=a,Sf(e,a,s),On(e,s),e}function Nv(e,t,r,s){var a=t.current,i=un(),o=ml(a);return r=sI(r),t.context===null?t.context=r:t.pendingContext=r,t=Yi(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ul(a,t,o),e!==null&&(Wa(e,a,o,i),mg(e,a,o)),o}function lx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function L2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function U1(e,t){L2(e,t),(e=e.alternate)&&L2(e,t)}function j7(){return null}var aI=typeof reportError==\"function\"?reportError:function(e){console.error(e)};function q1(e){this._internalRoot=e}_v.prototype.render=q1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(be(409));Nv(e,t,null,null)};_v.prototype.unmount=q1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Oc(function(){Nv(null,e,null,null)}),t[io]=null}};function _v(e){this._internalRoot=e}_v.prototype.unstable_scheduleHydration=function(e){if(e){var t=M5();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Fo.length&&t!==0&&t<Fo[r].priority;r++);Fo.splice(r,0,e),r===0&&$5(e)}};function H1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==\" react-mount-point-unstable \"))}function $2(){}function N7(e,t,r,s,a){if(a){if(typeof s==\"function\"){var i=s;s=function(){var d=lx(o);i.call(d)}}var o=nI(t,s,e,0,null,!1,!1,\"\",$2);return e._reactRootContainer=o,e[io]=o.current,Rm(e.nodeType===8?e.parentNode:e),Oc(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s==\"function\"){var l=s;s=function(){var d=lx(c);l.call(d)}}var c=B1(e,0,!1,null,null,!1,!1,\"\",$2);return e._reactRootContainer=c,e[io]=c.current,Rm(e.nodeType===8?e.parentNode:e),Oc(function(){Nv(t,c,r,s)}),c}function kv(e,t,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a==\"function\"){var l=a;a=function(){var c=lx(o);l.call(c)}}Nv(t,o,e,a)}else o=N7(r,t,e,a,s);return lx(o)}I5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Qh(t.pendingLanes);r!==0&&(d1(t,r|1),On(t,qr()),!(Qt&6)&&(Pu=qr()+500,Ol()))}break;case 13:Oc(function(){var s=oo(e,1);if(s!==null){var a=un();Wa(s,e,1,a)}}),U1(e,1)}};u1=function(e){if(e.tag===13){var t=oo(e,134217728);if(t!==null){var r=un();Wa(t,e,134217728,r)}U1(e,134217728)}};D5=function(e){if(e.tag===13){var t=ml(e),r=oo(e,t);if(r!==null){var s=un();Wa(r,e,t,s)}U1(e,t)}};M5=function(){return dr};L5=function(e,t){var r=dr;try{return dr=e,t()}finally{dr=r}};A0=function(e,t,r){switch(t){case\"input\":if(_0(e,r),t=r.name,r.type===\"radio\"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+t)+'][type=\"radio\"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=gv(s);if(!a)throw Error(be(90));f5(s),_0(s,a)}}}break;case\"textarea\":g5(e,r);break;case\"select\":t=r.value,t!=null&&Hd(e,!!r.multiple,t,!1)}};N5=$1;_5=Oc;var _7={usingClientEntryPoint:!1,Events:[Cf,Ad,gv,w5,j5,$1]},Mh={findFiberByHostInstance:cc,bundleType:0,version:\"18.3.1\",rendererPackageName:\"react-dom\"},S7={bundleType:Mh.bundleType,version:Mh.version,rendererPackageName:Mh.rendererPackageName,rendererConfig:Mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:go.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=C5(e),e===null?null:e.stateNode},findFiberByHostInstance:Mh.findFiberByHostInstance||j7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.3.1-next-f1338f8080-20240426\"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<\"u\"){var Tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tp.isDisabled&&Tp.supportsFiber)try{hv=Tp.inject(S7),xi=Tp}catch{}}ra.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_7;ra.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H1(t))throw Error(be(200));return w7(e,t,null,r)};ra.createRoot=function(e,t){if(!H1(e))throw Error(be(299));var r=!1,s=\"\",a=aI;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=B1(e,1,!1,null,null,r,!1,s,a),e[io]=t.current,Rm(e.nodeType===8?e.parentNode:e),new q1(t)};ra.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render==\"function\"?Error(be(188)):(e=Object.keys(e).join(\",\"),Error(be(268,e)));return e=C5(t),e=e===null?null:e.stateNode,e};ra.flushSync=function(e){return Oc(e)};ra.hydrate=function(e,t,r){if(!Sv(t))throw Error(be(200));return kv(null,e,t,!0,r)};ra.hydrateRoot=function(e,t,r){if(!H1(e))throw Error(be(405));var s=r!=null&&r.hydratedSources||null,a=!1,i=\"\",o=aI;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=nI(t,null,e,1,r??null,a,!1,i,o),e[io]=t.current,Rm(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new _v(t)};ra.render=function(e,t,r){if(!Sv(t))throw Error(be(200));return kv(null,e,t,!1,r)};ra.unmountComponentAtNode=function(e){if(!Sv(e))throw Error(be(40));return e._reactRootContainer?(Oc(function(){kv(null,null,e,!1,function(){e._reactRootContainer=null,e[io]=null})}),!0):!1};ra.unstable_batchedUpdates=$1;ra.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Sv(r))throw Error(be(200));if(e==null||e._reactInternals===void 0)throw Error(be(38));return kv(e,t,r,!1,s)};ra.version=\"18.3.1-next-f1338f8080-20240426\";function iI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>\"u\"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=\"function\"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iI)}catch(e){console.error(e)}}iI(),i5.exports=ra;var Jc=i5.exports;const k7=dv(Jc);var oI,F2=Jc;oI=F2.createRoot,F2.hydrateRoot;function C7(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,s,a,i,o=[],l=\"\",c=e.split(\"/\");for(c[0]||c.shift();a=c.shift();)r=a[0],r===\"*\"?(o.push(r),l+=a[1]===\"?\"?\"(?:/(.*))?\":\"/(.*)\"):r===\":\"?(s=a.indexOf(\"?\",1),i=a.indexOf(\".\",1),o.push(a.substring(1,~s?s:~i?i:a.length)),l+=~s&&!~i?\"(?:/([^/]+?))?\":\"/([^/]+?)\",~i&&(l+=(~s?\"?\":\"\")+\"\\\\\"+a.substring(i))):l+=\"/\"+a;return{keys:o,pattern:new RegExp(\"^\"+l+(t?\"(?=$|/)\":\"/?$\"),\"i\")}}var lI={exports:{}},cI={};/**\n * @license React\n * use-sync-external-store-shim.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var Tu=f;function E7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var P7=typeof Object.is==\"function\"?Object.is:E7,T7=Tu.useState,A7=Tu.useEffect,R7=Tu.useLayoutEffect,O7=Tu.useDebugValue;function I7(e,t){var r=t(),s=T7({inst:{value:r,getSnapshot:t}}),a=s[0].inst,i=s[1];return R7(function(){a.value=r,a.getSnapshot=t,db(a)&&i({inst:a})},[e,r,t]),A7(function(){return db(a)&&i({inst:a}),e(function(){db(a)&&i({inst:a})})},[e]),O7(r),r}function db(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!P7(e,r)}catch{return!0}}function D7(e,t){return t()}var M7=typeof window>\"u\"||typeof window.document>\"u\"||typeof window.document.createElement>\"u\"?D7:I7;cI.useSyncExternalStore=Tu.useSyncExternalStore!==void 0?Tu.useSyncExternalStore:M7;lI.exports=cI;var L7=lI.exports;const $7=n5.useInsertionEffect,F7=typeof window<\"u\"&&typeof window.document<\"u\"&&typeof window.document.createElement<\"u\",V7=F7?f.useLayoutEffect:f.useEffect,z7=$7||V7,dI=e=>{const t=f.useRef([e,(...r)=>t[0](...r)]).current;return z7(()=>{t[0]=e}),t[1]},B7=\"popstate\",W1=\"pushState\",K1=\"replaceState\",U7=\"hashchange\",V2=[B7,W1,K1,U7],q7=e=>{for(const t of V2)addEventListener(t,e);return()=>{for(const t of V2)removeEventListener(t,e)}},uI=(e,t)=>L7.useSyncExternalStore(q7,e,t),H7=()=>location.search,W7=({ssrSearch:e=\"\"}={})=>uI(H7,()=>e),z2=()=>location.pathname,K7=({ssrPath:e}={})=>uI(z2,e?()=>e:z2),G7=(e,{replace:t=!1,state:r=null}={})=>history[t?K1:W1](r,\"\",e),Q7=(e={})=>[K7(e),G7],B2=Symbol.for(\"wouter_v3\");if(typeof history<\"u\"&&typeof window[B2]>\"u\"){for(const e of[W1,K1]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),r}}Object.defineProperty(window,B2,{value:!0})}const J7=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?\"~\"+t:t.slice(e.length)||\"/\",hI=(e=\"\")=>e===\"/\"?\"\":e,X7=(e,t)=>e[0]===\"~\"?e.slice(1):hI(t)+e,Y7=(e=\"\",t)=>J7(dw(hI(e)),dw(t)),Z7=e=>e[0]===\"?\"?e.slice(1):e,dw=e=>{try{return decodeURI(e)}catch{return e}},eH=e=>dw(Z7(e)),mI={hook:Q7,searchHook:W7,parser:C7,base:\"\",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},fI=f.createContext(mI),rh=()=>f.useContext(fI),pI={},gI=f.createContext(pI),tH=()=>f.useContext(gI),Cv=e=>{const[t,r]=e.hook(e);return[Y7(e.base,t),dI((s,a)=>r(X7(s,e.base),a))]},Za=()=>Cv(rh()),rH=()=>{const e=rh();return eH(e.searchHook(e))},xI=(e,t,r,s)=>{const{pattern:a,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||\"*\",s),o=a.exec(r)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((h,m)=>[h,c[m]])):o.groups;let u={...c};return d&&Object.assign(u,d),u})(),...s?[l]:[]]:[!1,null]},sH=({children:e,...t})=>{var u,h;const r=rh(),s=t.hook?mI:r;let a=s;const[i,o]=((u=t.ssrPath)==null?void 0:u.split(\"?\"))??[];o&&(t.ssrSearch=o,t.ssrPath=i),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let l=f.useRef({}),c=l.current,d=c;for(let m in s){const g=m===\"base\"?s[m]+(t[m]||\"\"):t[m]||s[m];c===d&&g!==d[m]&&(l.current=d={...d}),d[m]=g,g!==s[m]&&(a=d)}return f.createElement(fI.Provider,{value:a,children:e})},U2=({children:e,component:t},r)=>t?f.createElement(t,{params:r}):typeof e==\"function\"?e(r):e,nH=e=>{let t=f.useRef(pI),r=t.current;for(const s in e)e[s]!==r[s]&&(r=e);return Object.keys(e).length===0&&(r=e),t.current=r},ze=({path:e,nest:t,match:r,...s})=>{const a=rh(),[i]=Cv(a),[o,l,c]=r??xI(a.parser,e,i,t),d=nH({...tH(),...l});if(!o)return null;const u=c?f.createElement(sH,{base:c},U2(s,d)):U2(s,d);return f.createElement(gI.Provider,{value:d,children:u})},Oe=f.forwardRef((e,t)=>{const r=rh(),[s,a]=Cv(r),{to:i=\"\",href:o=i,onClick:l,asChild:c,children:d,className:u,replace:h,state:m,...g}=e,v=dI(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(l==null||l(w),w.defaultPrevented||(w.preventDefault(),a(o,e)))}),x=r.hrefs(o[0]===\"~\"?o.slice(1):r.base+o,r);return c&&f.isValidElement(d)?f.cloneElement(d,{onClick:v,href:x}):f.createElement(\"a\",{...g,onClick:v,href:x,className:u!=null&&u.call?u(s===o):u,children:d,ref:t})}),vI=e=>Array.isArray(e)?e.flatMap(t=>vI(t&&t.type===f.Fragment?t.props.children:t)):[e],q2=({children:e,location:t})=>{const r=rh(),[s]=Cv(r);for(const a of vI(e)){let i=0;if(f.isValidElement(a)&&(i=xI(r.parser,a.props.path,t||s,a.props.nest))[0])return f.cloneElement(a,{match:i})}return null};var sh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ic=typeof window>\"u\"||\"Deno\"in globalThis;function ha(){}function aH(e,t){return typeof e==\"function\"?e(t):e}function uw(e){return typeof e==\"number\"&&e>=0&&e!==1/0}function yI(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Xd(e,t){return typeof e==\"function\"?e(t):e}function Fa(e,t){return typeof e==\"function\"?e(t):e}function H2(e,t){const{type:r=\"all\",exact:s,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==G1(o,t.options))return!1}else if(!zm(t.queryKey,o))return!1}if(r!==\"all\"){const c=t.isActive();if(r===\"active\"&&!c||r===\"inactive\"&&c)return!1}return!(typeof l==\"boolean\"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function W2(e,t){const{exact:r,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Dc(t.options.mutationKey)!==Dc(i))return!1}else if(!zm(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function G1(e,t){return((t==null?void 0:t.queryKeyHashFn)||Dc)(e)}function Dc(e){return JSON.stringify(e,(t,r)=>hw(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function zm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e==\"object\"&&typeof t==\"object\"?!Object.keys(t).some(r=>!zm(e[r],t[r])):!1}function bI(e,t){if(e===t)return e;const r=K2(e)&&K2(t);if(r||hw(e)&&hw(t)){const s=r?e:Object.keys(e),a=s.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d];(!r&&s.includes(u)||r)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=bI(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return a===o&&c===a?e:l}return t}function cx(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function K2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function hw(e){if(!G2(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!G2(r)||!r.hasOwnProperty(\"isPrototypeOf\")||Object.getPrototypeOf(e)!==Object.prototype)}function G2(e){return Object.prototype.toString.call(e)===\"[object Object]\"}function iH(e){return new Promise(t=>{setTimeout(t,e)})}function mw(e,t,r){return typeof r.structuralSharing==\"function\"?r.structuralSharing(e,t):r.structuralSharing!==!1?bI(e,t):t}function oH(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function lH(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var Q1=Symbol();function wI(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Q1?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var xc,Ho,du,GP,cH=(GP=class extends sh{constructor(){super();lt(this,xc);lt(this,Ho);lt(this,du);De(this,du,t=>{if(!Ic&&window.addEventListener){const r=()=>t();return window.addEventListener(\"visibilitychange\",r,!1),()=>{window.removeEventListener(\"visibilitychange\",r)}}})}onSubscribe(){B(this,Ho)||this.setEventListener(B(this,du))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,Ho))==null||t.call(this),De(this,Ho,void 0))}setEventListener(t){var r;De(this,du,t),(r=B(this,Ho))==null||r.call(this),De(this,Ho,t(s=>{typeof s==\"boolean\"?this.setFocused(s):this.onFocus()}))}setFocused(t){B(this,xc)!==t&&(De(this,xc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof B(this,xc)==\"boolean\"?B(this,xc):((t=globalThis.document)==null?void 0:t.visibilityState)!==\"hidden\"}},xc=new WeakMap,Ho=new WeakMap,du=new WeakMap,GP),J1=new cH,uu,Wo,hu,QP,dH=(QP=class extends sh{constructor(){super();lt(this,uu,!0);lt(this,Wo);lt(this,hu);De(this,hu,t=>{if(!Ic&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener(\"online\",r,!1),window.addEventListener(\"offline\",s,!1),()=>{window.removeEventListener(\"online\",r),window.removeEventListener(\"offline\",s)}}})}onSubscribe(){B(this,Wo)||this.setEventListener(B(this,hu))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,Wo))==null||t.call(this),De(this,Wo,void 0))}setEventListener(t){var r;De(this,hu,t),(r=B(this,Wo))==null||r.call(this),De(this,Wo,t(this.setOnline.bind(this)))}setOnline(t){B(this,uu)!==t&&(De(this,uu,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return B(this,uu)}},uu=new WeakMap,Wo=new WeakMap,hu=new WeakMap,QP),dx=new dH;function fw(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status=\"pending\",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:\"fulfilled\",value:a}),e(a)},r.reject=a=>{s({status:\"rejected\",reason:a}),t(a)},r}function uH(e){return Math.min(1e3*2**e,3e4)}function jI(e){return(e??\"online\")===\"online\"?dx.isOnline():!0}var NI=class extends Error{constructor(e){super(\"CancelledError\"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ub(e){return e instanceof NI}function _I(e){let t=!1,r=0,s=!1,a;const i=fw(),o=x=>{var w;s||(m(new NI(x)),(w=e.abort)==null||w.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>J1.isFocused()&&(e.networkMode===\"always\"||dx.isOnline())&&e.canRun(),u=()=>jI(e.networkMode)&&e.canRun(),h=x=>{var w;s||(s=!0,(w=e.onSuccess)==null||w.call(e,x),a==null||a(),i.resolve(x))},m=x=>{var w;s||(s=!0,(w=e.onError)==null||w.call(e,x),a==null||a(),i.reject(x))},g=()=>new Promise(x=>{var w;a=y=>{(s||d())&&x(y)},(w=e.onPause)==null||w.call(e)}).then(()=>{var x;a=void 0,s||(x=e.onContinue)==null||x.call(e)}),v=()=>{if(s)return;let x;const w=r===0?e.initialPromise:void 0;try{x=w??e.fn()}catch(y){x=Promise.reject(y)}Promise.resolve(x).then(h).catch(y=>{var k;if(s)return;const b=e.retry??(Ic?0:3),N=e.retryDelay??uH,_=typeof N==\"function\"?N(r,y):N,E=b===!0||typeof b==\"number\"&&r<b||typeof b==\"function\"&&b(r,y);if(t||!E){m(y);return}r++,(k=e.onFail)==null||k.call(e,r,y),iH(_).then(()=>d()?void 0:g()).then(()=>{t?m(y):v()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?v():g().then(v),i)}}function hH(){let e=[],t=0,r=l=>{l()},s=l=>{l()},a=l=>setTimeout(l,0);const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var cs=hH(),vc,JP,SI=(JP=class{constructor(){lt(this,vc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),uw(this.gcTime)&&De(this,vc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ic?1/0:5*60*1e3))}clearGcTimeout(){B(this,vc)&&(clearTimeout(B(this,vc)),De(this,vc,void 0))}},vc=new WeakMap,JP),mu,fu,ua,qs,bf,yc,Da,$i,XP,mH=(XP=class extends SI{constructor(t){super();lt(this,Da);lt(this,mu);lt(this,fu);lt(this,ua);lt(this,qs);lt(this,bf);lt(this,yc);De(this,yc,!1),De(this,bf,t.defaultOptions),this.setOptions(t.options),this.observers=[],De(this,ua,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,De(this,mu,fH(this.options)),this.state=t.state??B(this,mu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=B(this,qs))==null?void 0:t.promise}setOptions(t){this.options={...B(this,bf),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus===\"idle\"&&B(this,ua).remove(this)}setData(t,r){const s=mw(this.state.data,t,this.options);return Ot(this,Da,$i).call(this,{data:s,type:\"success\",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){Ot(this,Da,$i).call(this,{type:\"setState\",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=B(this,qs))==null?void 0:s.promise;return(a=B(this,qs))==null||a.cancel(t),r?r.then(ha).catch(ha):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,mu))}isActive(){return this.observers.some(t=>Fa(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Q1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!yI(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=B(this,qs))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=B(this,qs))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),B(this,ua).notify({type:\"observerAdded\",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(B(this,qs)&&(B(this,yc)?B(this,qs).cancel({revert:!0}):B(this,qs).cancelRetry()),this.scheduleGc()),B(this,ua).notify({type:\"observerRemoved\",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ot(this,Da,$i).call(this,{type:\"invalidate\"})}fetch(t,r){var c,d,u;if(this.state.fetchStatus!==\"idle\"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(B(this,qs))return B(this,qs).continueRetry(),B(this,qs).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,a=h=>{Object.defineProperty(h,\"signal\",{enumerable:!0,get:()=>(De(this,yc,!0),s.signal)})},i=()=>{const h=wI(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return a(m),De(this,yc,!1),this.options.persister?this.options.persister(h,m,this):h(m)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),De(this,fu,this.state),(this.state.fetchStatus===\"idle\"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&Ot(this,Da,$i).call(this,{type:\"fetch\",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=h=>{var m,g,v,x;ub(h)&&h.silent||Ot(this,Da,$i).call(this,{type:\"error\",error:h}),ub(h)||((g=(m=B(this,ua).config).onError)==null||g.call(m,h,this),(x=(v=B(this,ua).config).onSettled)==null||x.call(v,this.state.data,h,this)),this.scheduleGc()};return De(this,qs,_I({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:h=>{var m,g,v,x;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){l(w);return}(g=(m=B(this,ua).config).onSuccess)==null||g.call(m,h,this),(x=(v=B(this,ua).config).onSettled)==null||x.call(v,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,m)=>{Ot(this,Da,$i).call(this,{type:\"failed\",failureCount:h,error:m})},onPause:()=>{Ot(this,Da,$i).call(this,{type:\"pause\"})},onContinue:()=>{Ot(this,Da,$i).call(this,{type:\"continue\"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),B(this,qs).start()}},mu=new WeakMap,fu=new WeakMap,ua=new WeakMap,qs=new WeakMap,bf=new WeakMap,yc=new WeakMap,Da=new WeakSet,$i=function(t){const r=s=>{switch(t.type){case\"failed\":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case\"pause\":return{...s,fetchStatus:\"paused\"};case\"continue\":return{...s,fetchStatus:\"fetching\"};case\"fetch\":return{...s,...kI(s.data,this.options),fetchMeta:t.meta??null};case\"success\":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:\"success\",...!t.manual&&{fetchStatus:\"idle\",fetchFailureCount:0,fetchFailureReason:null}};case\"error\":const a=t.error;return ub(a)&&a.revert&&B(this,fu)?{...B(this,fu),fetchStatus:\"idle\"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:\"idle\",status:\"error\"};case\"invalidate\":return{...s,isInvalidated:!0};case\"setState\":return{...s,...t.state}}};this.state=r(this.state),cs.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),B(this,ua).notify({query:this,type:\"updated\",action:t})})},XP);function kI(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jI(t.networkMode)?\"fetching\":\"paused\",...e===void 0&&{error:null,status:\"pending\"}}}function fH(e){const t=typeof e.initialData==\"function\"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt==\"function\"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?\"success\":\"pending\",fetchStatus:\"idle\"}}var oi,YP,pH=(YP=class extends sh{constructor(t={}){super();lt(this,oi);this.config=t,De(this,oi,new Map)}build(t,r,s){const a=r.queryKey,i=r.queryHash??G1(a,r);let o=this.get(i);return o||(o=new mH({cache:this,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){B(this,oi).has(t.queryHash)||(B(this,oi).set(t.queryHash,t),this.notify({type:\"added\",query:t}))}remove(t){const r=B(this,oi).get(t.queryHash);r&&(t.destroy(),r===t&&B(this,oi).delete(t.queryHash),this.notify({type:\"removed\",query:t}))}clear(){cs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return B(this,oi).get(t)}getAll(){return[...B(this,oi).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>H2(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>H2(t,s)):r}notify(t){cs.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){cs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){cs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},oi=new WeakMap,YP),li,tn,bc,ci,Oo,ZP,gH=(ZP=class extends SI{constructor(t){super();lt(this,ci);lt(this,li);lt(this,tn);lt(this,bc);this.mutationId=t.mutationId,De(this,tn,t.mutationCache),De(this,li,[]),this.state=t.state||CI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){B(this,li).includes(t)||(B(this,li).push(t),this.clearGcTimeout(),B(this,tn).notify({type:\"observerAdded\",mutation:this,observer:t}))}removeObserver(t){De(this,li,B(this,li).filter(r=>r!==t)),this.scheduleGc(),B(this,tn).notify({type:\"observerRemoved\",mutation:this,observer:t})}optionalRemove(){B(this,li).length||(this.state.status===\"pending\"?this.scheduleGc():B(this,tn).remove(this))}continue(){var t;return((t=B(this,bc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,o,l,c,d,u,h,m,g,v,x,w,y,b,N,_,E,k,P;De(this,bc,_I({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error(\"No mutationFn found\")),onFail:(C,A)=>{Ot(this,ci,Oo).call(this,{type:\"failed\",failureCount:C,error:A})},onPause:()=>{Ot(this,ci,Oo).call(this,{type:\"pause\"})},onContinue:()=>{Ot(this,ci,Oo).call(this,{type:\"continue\"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,tn).canRun(this)}));const r=this.state.status===\"pending\",s=!B(this,bc).canStart();try{if(!r){Ot(this,ci,Oo).call(this,{type:\"pending\",variables:t,isPaused:s}),await((i=(a=B(this,tn).config).onMutate)==null?void 0:i.call(a,t,this));const A=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));A!==this.state.context&&Ot(this,ci,Oo).call(this,{type:\"pending\",context:A,variables:t,isPaused:s})}const C=await B(this,bc).start();return await((d=(c=B(this,tn).config).onSuccess)==null?void 0:d.call(c,C,t,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,C,t,this.state.context)),await((g=(m=B(this,tn).config).onSettled)==null?void 0:g.call(m,C,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,C,null,t,this.state.context)),Ot(this,ci,Oo).call(this,{type:\"success\",data:C}),C}catch(C){try{throw await((y=(w=B(this,tn).config).onError)==null?void 0:y.call(w,C,t,this.state.context,this)),await((N=(b=this.options).onError)==null?void 0:N.call(b,C,t,this.state.context)),await((E=(_=B(this,tn).config).onSettled)==null?void 0:E.call(_,void 0,C,this.state.variables,this.state.context,this)),await((P=(k=this.options).onSettled)==null?void 0:P.call(k,void 0,C,t,this.state.context)),C}finally{Ot(this,ci,Oo).call(this,{type:\"error\",error:C})}}finally{B(this,tn).runNext(this)}}},li=new WeakMap,tn=new WeakMap,bc=new WeakMap,ci=new WeakSet,Oo=function(t){const r=s=>{switch(t.type){case\"failed\":return{...s,failureCount:t.failureCount,failureReason:t.error};case\"pause\":return{...s,isPaused:!0};case\"continue\":return{...s,isPaused:!1};case\"pending\":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:\"pending\",variables:t.variables,submittedAt:Date.now()};case\"success\":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:\"success\",isPaused:!1};case\"error\":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:\"error\"}}};this.state=r(this.state),cs.batch(()=>{B(this,li).forEach(s=>{s.onMutationUpdate(t)}),B(this,tn).notify({mutation:this,type:\"updated\",action:t})})},ZP);function CI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:\"idle\",variables:void 0,submittedAt:0}}var Un,wf,eT,xH=(eT=class extends sh{constructor(t={}){super();lt(this,Un);lt(this,wf);this.config=t,De(this,Un,new Map),De(this,wf,Date.now())}build(t,r,s){const a=new gH({mutationCache:this,mutationId:++mp(this,wf)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){const r=Ap(t),s=B(this,Un).get(r)??[];s.push(t),B(this,Un).set(r,s),this.notify({type:\"added\",mutation:t})}remove(t){var s;const r=Ap(t);if(B(this,Un).has(r)){const a=(s=B(this,Un).get(r))==null?void 0:s.filter(i=>i!==t);a&&(a.length===0?B(this,Un).delete(r):B(this,Un).set(r,a))}this.notify({type:\"removed\",mutation:t})}canRun(t){var s;const r=(s=B(this,Un).get(Ap(t)))==null?void 0:s.find(a=>a.state.status===\"pending\");return!r||r===t}runNext(t){var s;const r=(s=B(this,Un).get(Ap(t)))==null?void 0:s.find(a=>a!==t&&a.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){cs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...B(this,Un).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(s=>W2(r,s))}findAll(t={}){return this.getAll().filter(r=>W2(t,r))}notify(t){cs.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return cs.batch(()=>Promise.all(t.map(r=>r.continue().catch(ha))))}},Un=new WeakMap,wf=new WeakMap,eT);function Ap(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Q2(e){return{onFetch:(t,r)=>{var u,h,m,g,v;const s=t.options,a=(m=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,i=((g=t.state.data)==null?void 0:g.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const w=N=>{Object.defineProperty(N,\"signal\",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener(\"abort\",()=>{x=!0}),t.signal)})},y=wI(t.options,t.fetchOptions),b=async(N,_,E)=>{if(x)return Promise.reject();if(_==null&&N.pages.length)return Promise.resolve(N);const k={queryKey:t.queryKey,pageParam:_,direction:E?\"backward\":\"forward\",meta:t.options.meta};w(k);const P=await y(k),{maxPages:C}=t.options,A=E?lH:oH;return{pages:A(N.pages,P,C),pageParams:A(N.pageParams,_,C)}};if(a&&i.length){const N=a===\"backward\",_=N?vH:J2,E={pages:i,pageParams:o},k=_(s,E);l=await b(E,k,N)}else{const N=e??i.length;do{const _=c===0?o[0]??s.initialPageParam:J2(s,l);if(c>0&&_==null)break;l=await b(l,_),c++}while(c<N)}return l};t.options.persister?t.fetchFn=()=>{var x,w;return(w=(x=t.options).persister)==null?void 0:w.call(x,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function J2(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function vH(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var Ir,Ko,Go,pu,gu,Qo,xu,vu,tT,yH=(tT=class{constructor(e={}){lt(this,Ir);lt(this,Ko);lt(this,Go);lt(this,pu);lt(this,gu);lt(this,Qo);lt(this,xu);lt(this,vu);De(this,Ir,e.queryCache||new pH),De(this,Ko,e.mutationCache||new xH),De(this,Go,e.defaultOptions||{}),De(this,pu,new Map),De(this,gu,new Map),De(this,Qo,0)}mount(){mp(this,Qo)._++,B(this,Qo)===1&&(De(this,xu,J1.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Ir).onFocus())})),De(this,vu,dx.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Ir).onOnline())})))}unmount(){var e,t;mp(this,Qo)._--,B(this,Qo)===0&&((e=B(this,xu))==null||e.call(this),De(this,xu,void 0),(t=B(this,vu))==null||t.call(this),De(this,vu,void 0))}isFetching(e){return B(this,Ir).findAll({...e,fetchStatus:\"fetching\"}).length}isMutating(e){return B(this,Ko).findAll({...e,status:\"pending\"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=B(this,Ir).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),s=B(this,Ir).build(this,r);return e.revalidateIfStale&&s.isStaleByTime(Xd(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return B(this,Ir).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=B(this,Ir).get(s.queryHash),i=a==null?void 0:a.state.data,o=aH(t,i);if(o!==void 0)return B(this,Ir).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return cs.batch(()=>B(this,Ir).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=B(this,Ir).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=B(this,Ir);cs.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=B(this,Ir),s={type:\"active\",...e};return cs.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},s=cs.batch(()=>B(this,Ir).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(ha).catch(ha)}invalidateQueries(e={},t={}){return cs.batch(()=>{if(B(this,Ir).findAll(e).forEach(s=>{s.invalidate()}),e.refetchType===\"none\")return Promise.resolve();const r={...e,type:e.refetchType??e.type??\"active\"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},s=cs.batch(()=>B(this,Ir).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(ha)),a.state.fetchStatus===\"paused\"?Promise.resolve():i}));return Promise.all(s).then(ha)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=B(this,Ir).build(this,t);return r.isStaleByTime(Xd(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ha).catch(ha)}fetchInfiniteQuery(e){return e.behavior=Q2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ha).catch(ha)}ensureInfiniteQueryData(e){return e.behavior=Q2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return dx.isOnline()?B(this,Ko).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,Ir)}getMutationCache(){return B(this,Ko)}getDefaultOptions(){return B(this,Go)}setDefaultOptions(e){De(this,Go,e)}setQueryDefaults(e,t){B(this,pu).set(Dc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...B(this,pu).values()];let r={};return t.forEach(s=>{zm(e,s.queryKey)&&(r={...r,...s.defaultOptions})}),r}setMutationDefaults(e,t){B(this,gu).set(Dc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...B(this,gu).values()];let r={};return t.forEach(s=>{zm(e,s.mutationKey)&&(r={...r,...s.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...B(this,Go).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=G1(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!==\"always\"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode=\"offlineFirst\"),t.enabled!==!0&&t.queryFn===Q1&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,Go).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,Ir).clear(),B(this,Ko).clear()}},Ir=new WeakMap,Ko=new WeakMap,Go=new WeakMap,pu=new WeakMap,gu=new WeakMap,Qo=new WeakMap,xu=new WeakMap,vu=new WeakMap,tT),bn,Ut,jf,rn,wc,yu,Jo,di,Nf,bu,wu,jc,Nc,Xo,ju,ar,Xh,pw,gw,xw,vw,yw,bw,ww,EI,rT,bH=(rT=class extends sh{constructor(t,r){super();lt(this,ar);lt(this,bn);lt(this,Ut);lt(this,jf);lt(this,rn);lt(this,wc);lt(this,yu);lt(this,Jo);lt(this,di);lt(this,Nf);lt(this,bu);lt(this,wu);lt(this,jc);lt(this,Nc);lt(this,Xo);lt(this,ju,new Set);this.options=r,De(this,bn,t),De(this,di,null),De(this,Jo,fw()),this.options.experimental_prefetchInRender||B(this,Jo).reject(new Error(\"experimental_prefetchInRender feature flag is not enabled\")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(B(this,Ut).addObserver(this),X2(B(this,Ut),this.options)?Ot(this,ar,Xh).call(this):this.updateResult(),Ot(this,ar,vw).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jw(B(this,Ut),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jw(B(this,Ut),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ot(this,ar,yw).call(this),Ot(this,ar,bw).call(this),B(this,Ut).removeObserver(this)}setOptions(t,r){const s=this.options,a=B(this,Ut);if(this.options=B(this,bn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!=\"boolean\"&&typeof this.options.enabled!=\"function\"&&typeof Fa(this.options.enabled,B(this,Ut))!=\"boolean\")throw new Error(\"Expected enabled to be a boolean or a callback that returns a boolean\");Ot(this,ar,ww).call(this),B(this,Ut).setOptions(this.options),s._defaulted&&!cx(this.options,s)&&B(this,bn).getQueryCache().notify({type:\"observerOptionsUpdated\",query:B(this,Ut),observer:this});const i=this.hasListeners();i&&Y2(B(this,Ut),a,this.options,s)&&Ot(this,ar,Xh).call(this),this.updateResult(r),i&&(B(this,Ut)!==a||Fa(this.options.enabled,B(this,Ut))!==Fa(s.enabled,B(this,Ut))||Xd(this.options.staleTime,B(this,Ut))!==Xd(s.staleTime,B(this,Ut)))&&Ot(this,ar,pw).call(this);const o=Ot(this,ar,gw).call(this);i&&(B(this,Ut)!==a||Fa(this.options.enabled,B(this,Ut))!==Fa(s.enabled,B(this,Ut))||o!==B(this,Xo))&&Ot(this,ar,xw).call(this,o)}getOptimisticResult(t){const r=B(this,bn).getQueryCache().build(B(this,bn),t),s=this.createResult(r,t);return jH(this,s)&&(De(this,rn,s),De(this,yu,this.options),De(this,wc,B(this,Ut).state)),s}getCurrentResult(){return B(this,rn)}trackResult(t,r){const s={};return Object.keys(t).forEach(a=>{Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),r==null||r(a),t[a])})}),s}trackProp(t){B(this,ju).add(t)}getCurrentQuery(){return B(this,Ut)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=B(this,bn).defaultQueryOptions(t),s=B(this,bn).getQueryCache().build(B(this,bn),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return Ot(this,ar,Xh).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),B(this,rn)))}createResult(t,r){var C;const s=B(this,Ut),a=this.options,i=B(this,rn),o=B(this,wc),l=B(this,yu),d=t!==s?t.state:B(this,jf),{state:u}=t;let h={...u},m=!1,g;if(r._optimisticResults){const A=this.hasListeners(),O=!A&&X2(t,r),q=A&&Y2(t,s,r,a);(O||q)&&(h={...h,...kI(u.data,t.options)}),r._optimisticResults===\"isRestoring\"&&(h.fetchStatus=\"idle\")}let{error:v,errorUpdatedAt:x,status:w}=h;if(r.select&&h.data!==void 0)if(i&&h.data===(o==null?void 0:o.data)&&r.select===B(this,Nf))g=B(this,bu);else try{De(this,Nf,r.select),g=r.select(h.data),g=mw(i==null?void 0:i.data,g,r),De(this,bu,g),De(this,di,null)}catch(A){De(this,di,A)}else g=h.data;if(r.placeholderData!==void 0&&g===void 0&&w===\"pending\"){let A;if(i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))A=i.data;else if(A=typeof r.placeholderData==\"function\"?r.placeholderData((C=B(this,wu))==null?void 0:C.state.data,B(this,wu)):r.placeholderData,r.select&&A!==void 0)try{A=r.select(A),De(this,di,null)}catch(O){De(this,di,O)}A!==void 0&&(w=\"success\",g=mw(i==null?void 0:i.data,A,r),m=!0)}B(this,di)&&(v=B(this,di),g=B(this,bu),x=Date.now(),w=\"error\");const y=h.fetchStatus===\"fetching\",b=w===\"pending\",N=w===\"error\",_=b&&y,E=g!==void 0,P={status:w,fetchStatus:h.fetchStatus,isPending:b,isSuccess:w===\"success\",isError:N,isInitialLoading:_,isLoading:_,data:g,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:N&&!E,isPaused:h.fetchStatus===\"paused\",isPlaceholderData:m,isRefetchError:N&&E,isStale:X1(t,r),refetch:this.refetch,promise:B(this,Jo)};if(this.options.experimental_prefetchInRender){const A=K=>{P.status===\"error\"?K.reject(P.error):P.data!==void 0&&K.resolve(P.data)},O=()=>{const K=De(this,Jo,P.promise=fw());A(K)},q=B(this,Jo);switch(q.status){case\"pending\":t.queryHash===s.queryHash&&A(q);break;case\"fulfilled\":(P.status===\"error\"||P.data!==q.value)&&O();break;case\"rejected\":(P.status!==\"error\"||P.error!==q.reason)&&O();break}}return P}updateResult(t){const r=B(this,rn),s=this.createResult(B(this,Ut),this.options);if(De(this,wc,B(this,Ut).state),De(this,yu,this.options),B(this,wc).data!==void 0&&De(this,wu,B(this,Ut)),cx(s,r))return;De(this,rn,s);const a={},i=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o==\"function\"?o():o;if(l===\"all\"||!l&&!B(this,ju).size)return!0;const c=new Set(l??B(this,ju));return this.options.throwOnError&&c.add(\"error\"),Object.keys(B(this,rn)).some(d=>{const u=d;return B(this,rn)[u]!==r[u]&&c.has(u)})};(t==null?void 0:t.listeners)!==!1&&i()&&(a.listeners=!0),Ot(this,ar,EI).call(this,{...a,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ot(this,ar,vw).call(this)}},bn=new WeakMap,Ut=new WeakMap,jf=new WeakMap,rn=new WeakMap,wc=new WeakMap,yu=new WeakMap,Jo=new WeakMap,di=new WeakMap,Nf=new WeakMap,bu=new WeakMap,wu=new WeakMap,jc=new WeakMap,Nc=new WeakMap,Xo=new WeakMap,ju=new WeakMap,ar=new WeakSet,Xh=function(t){Ot(this,ar,ww).call(this);let r=B(this,Ut).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(ha)),r},pw=function(){Ot(this,ar,yw).call(this);const t=Xd(this.options.staleTime,B(this,Ut));if(Ic||B(this,rn).isStale||!uw(t))return;const s=yI(B(this,rn).dataUpdatedAt,t)+1;De(this,jc,setTimeout(()=>{B(this,rn).isStale||this.updateResult()},s))},gw=function(){return(typeof this.options.refetchInterval==\"function\"?this.options.refetchInterval(B(this,Ut)):this.options.refetchInterval)??!1},xw=function(t){Ot(this,ar,bw).call(this),De(this,Xo,t),!(Ic||Fa(this.options.enabled,B(this,Ut))===!1||!uw(B(this,Xo))||B(this,Xo)===0)&&De(this,Nc,setInterval(()=>{(this.options.refetchIntervalInBackground||J1.isFocused())&&Ot(this,ar,Xh).call(this)},B(this,Xo)))},vw=function(){Ot(this,ar,pw).call(this),Ot(this,ar,xw).call(this,Ot(this,ar,gw).call(this))},yw=function(){B(this,jc)&&(clearTimeout(B(this,jc)),De(this,jc,void 0))},bw=function(){B(this,Nc)&&(clearInterval(B(this,Nc)),De(this,Nc,void 0))},ww=function(){const t=B(this,bn).getQueryCache().build(B(this,bn),this.options);if(t===B(this,Ut))return;const r=B(this,Ut);De(this,Ut,t),De(this,jf,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},EI=function(t){cs.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(B(this,rn))}),B(this,bn).getQueryCache().notify({query:B(this,Ut),type:\"observerResultsUpdated\"})})},rT);function wH(e,t){return Fa(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status===\"error\"&&t.retryOnMount===!1)}function X2(e,t){return wH(e,t)||e.state.data!==void 0&&jw(e,t,t.refetchOnMount)}function jw(e,t,r){if(Fa(t.enabled,e)!==!1){const s=typeof r==\"function\"?r(e):r;return s===\"always\"||s!==!1&&X1(e,t)}return!1}function Y2(e,t,r,s){return(e!==t||Fa(s.enabled,e)===!1)&&(!r.suspense||e.state.status!==\"error\")&&X1(e,r)}function X1(e,t){return Fa(t.enabled,e)!==!1&&e.isStaleByTime(Xd(t.staleTime,e))}function jH(e,t){return!cx(e.getCurrentResult(),t)}var Yo,Zo,wn,Ui,no,bg,Nw,sT,NH=(sT=class extends sh{constructor(r,s){super();lt(this,no);lt(this,Yo);lt(this,Zo);lt(this,wn);lt(this,Ui);De(this,Yo,r),this.setOptions(s),this.bindMethods(),Ot(this,no,bg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const s=this.options;this.options=B(this,Yo).defaultMutationOptions(r),cx(this.options,s)||B(this,Yo).getMutationCache().notify({type:\"observerOptionsUpdated\",mutation:B(this,wn),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Dc(s.mutationKey)!==Dc(this.options.mutationKey)?this.reset():((a=B(this,wn))==null?void 0:a.state.status)===\"pending\"&&B(this,wn).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=B(this,wn))==null||r.removeObserver(this)}onMutationUpdate(r){Ot(this,no,bg).call(this),Ot(this,no,Nw).call(this,r)}getCurrentResult(){return B(this,Zo)}reset(){var r;(r=B(this,wn))==null||r.removeObserver(this),De(this,wn,void 0),Ot(this,no,bg).call(this),Ot(this,no,Nw).call(this)}mutate(r,s){var a;return De(this,Ui,s),(a=B(this,wn))==null||a.removeObserver(this),De(this,wn,B(this,Yo).getMutationCache().build(B(this,Yo),this.options)),B(this,wn).addObserver(this),B(this,wn).execute(r)}},Yo=new WeakMap,Zo=new WeakMap,wn=new WeakMap,Ui=new WeakMap,no=new WeakSet,bg=function(){var s;const r=((s=B(this,wn))==null?void 0:s.state)??CI();De(this,Zo,{...r,isPending:r.status===\"pending\",isSuccess:r.status===\"success\",isError:r.status===\"error\",isIdle:r.status===\"idle\",mutate:this.mutate,reset:this.reset})},Nw=function(r){cs.batch(()=>{var s,a,i,o,l,c,d,u;if(B(this,Ui)&&this.hasListeners()){const h=B(this,Zo).variables,m=B(this,Zo).context;(r==null?void 0:r.type)===\"success\"?((a=(s=B(this,Ui)).onSuccess)==null||a.call(s,r.data,h,m),(o=(i=B(this,Ui)).onSettled)==null||o.call(i,r.data,null,h,m)):(r==null?void 0:r.type)===\"error\"&&((c=(l=B(this,Ui)).onError)==null||c.call(l,r.error,h,m),(u=(d=B(this,Ui)).onSettled)==null||u.call(d,void 0,r.error,h,m))}this.listeners.forEach(h=>{h(B(this,Zo))})})},sT),PI=f.createContext(void 0),Ev=e=>{const t=f.useContext(PI);if(!t)throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");return t},_H=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(PI.Provider,{value:e,children:t})),TI=f.createContext(!1),SH=()=>f.useContext(TI);TI.Provider;function kH(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var CH=f.createContext(kH()),EH=()=>f.useContext(CH);function AI(e,t){return typeof e==\"function\"?e(...t):!!e}function _w(){}var PH=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},TH=e=>{f.useEffect(()=>{e.clearReset()},[e])},AH=({result:e,errorResetBoundary:t,throwOnError:r,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&AI(r,[e.error,s]),RH=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime==\"number\"&&(e.gcTime=Math.max(e.gcTime,1e3)))},OH=(e,t)=>e.isLoading&&e.isFetching&&!t,IH=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Z2=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function DH(e,t,r){var u,h,m,g,v;const s=Ev(),a=SH(),i=EH(),o=s.defaultQueryOptions(e);(h=(u=s.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||h.call(u,o),o._optimisticResults=a?\"isRestoring\":\"optimistic\",RH(o),PH(o,i),TH(i);const l=!s.getQueryCache().get(o.queryHash),[c]=f.useState(()=>new t(s,o)),d=c.getOptimisticResult(o);if(f.useSyncExternalStore(f.useCallback(x=>{const w=a?_w:c.subscribe(cs.batchCalls(x));return c.updateResult(),w},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),IH(o,d))throw Z2(o,c,i);if(AH({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash)}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!Ic&&OH(d,a)){const x=l?Z2(o,c,i):(v=s.getQueryCache().get(o.queryHash))==null?void 0:v.promise;x==null||x.catch(_w).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Ct(e,t){return DH(e,bH)}function qe(e,t){const r=Ev(),[s]=f.useState(()=>new NH(r,e));f.useEffect(()=>{s.setOptions(e)},[s,e]);const a=f.useSyncExternalStore(f.useCallback(o=>s.subscribe(cs.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=f.useCallback((o,l)=>{s.mutate(o,l).catch(_w)},[s]);if(a.error&&AI(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}var Y1={},ux={},Sw=function(e,t){return Sw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},Sw(e,t)};function RI(e,t){if(typeof t!=\"function\"&&t!==null)throw new TypeError(\"Class extends value \"+String(t)+\" is not a constructor or null\");Sw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ga=function(){return ga=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ga.apply(this,arguments)};function Il(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols==\"function\")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function OI(e,t,r,s){var a=arguments.length,i=a<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,r):s,o;if(typeof Reflect==\"object\"&&typeof Reflect.decorate==\"function\")i=Reflect.decorate(e,t,r,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function II(e,t){return function(r,s){t(r,s,e)}}function DI(e,t,r,s,a,i){function o(y){if(y!==void 0&&typeof y!=\"function\")throw new TypeError(\"Function expected\");return y}for(var l=s.kind,c=l===\"getter\"?\"get\":l===\"setter\"?\"set\":\"value\",d=!t&&e?s.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,s.name):{}),h,m=!1,g=r.length-1;g>=0;g--){var v={};for(var x in s)v[x]=x===\"access\"?{}:s[x];for(var x in s.access)v.access[x]=s.access[x];v.addInitializer=function(y){if(m)throw new TypeError(\"Cannot add initializers after decoration has completed\");i.push(o(y||null))};var w=(0,r[g])(l===\"accessor\"?{get:u.get,set:u.set}:u[c],v);if(l===\"accessor\"){if(w===void 0)continue;if(w===null||typeof w!=\"object\")throw new TypeError(\"Object expected\");(h=o(w.get))&&(u.get=h),(h=o(w.set))&&(u.set=h),(h=o(w.init))&&a.unshift(h)}else(h=o(w))&&(l===\"field\"?a.unshift(h):u[c]=h)}d&&Object.defineProperty(d,s.name,u),m=!0}function MI(e,t,r){for(var s=arguments.length>2,a=0;a<t.length;a++)r=s?t[a].call(e,r):t[a].call(e);return s?r:void 0}function LI(e){return typeof e==\"symbol\"?e:\"\".concat(e)}function $I(e,t,r){return typeof t==\"symbol\"&&(t=t.description?\"[\".concat(t.description,\"]\"):\"\"),Object.defineProperty(e,\"name\",{configurable:!0,value:r?\"\".concat(r,\" \",t):t})}function FI(e,t){if(typeof Reflect==\"object\"&&typeof Reflect.metadata==\"function\")return Reflect.metadata(e,t)}function Fe(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})}function VI(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,a,i,o=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol==\"function\"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(s)throw new TypeError(\"Generator is already executing.\");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(s=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],a=0}finally{s=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Pv=Object.create?function(e,t,r,s){s===void 0&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||(\"get\"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]};function zI(e,t){for(var r in e)r!==\"default\"&&!Object.prototype.hasOwnProperty.call(t,r)&&Pv(t,e,r)}function hx(e){var t=typeof Symbol==\"function\"&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&typeof e.length==\"number\")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}function Z1(e,t){var r=typeof Symbol==\"function\"&&e[Symbol.iterator];if(!r)return e;var s=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}function BI(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Z1(arguments[t]));return e}function UI(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var s=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,a++)s[a]=i[o];return s}function eN(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}function Au(e){return this instanceof Au?(this.v=e,this):new Au(e)}function qI(e,t,r){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var s=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator==\"function\"?AsyncIterator:Object).prototype),l(\"next\"),l(\"throw\"),l(\"return\",o),a[Symbol.asyncIterator]=function(){return this},a;function o(g){return function(v){return Promise.resolve(v).then(g,h)}}function l(g,v){s[g]&&(a[g]=function(x){return new Promise(function(w,y){i.push([g,x,w,y])>1||c(g,x)})},v&&(a[g]=v(a[g])))}function c(g,v){try{d(s[g](v))}catch(x){m(i[0][3],x)}}function d(g){g.value instanceof Au?Promise.resolve(g.value.v).then(u,h):m(i[0][2],g)}function u(g){c(\"next\",g)}function h(g){c(\"throw\",g)}function m(g,v){g(v),i.shift(),i.length&&c(i[0][0],i[0][1])}}function HI(e){var t,r;return t={},s(\"next\"),s(\"throw\",function(a){throw a}),s(\"return\"),t[Symbol.iterator]=function(){return this},t;function s(a,i){t[a]=e[a]?function(o){return(r=!r)?{value:Au(e[a](o)),done:!1}:i?i(o):o}:i}}function WI(e){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof hx==\"function\"?hx(e):e[Symbol.iterator](),r={},s(\"next\"),s(\"throw\"),s(\"return\"),r[Symbol.asyncIterator]=function(){return this},r);function s(i){r[i]=e[i]&&function(o){return new Promise(function(l,c){o=e[i](o),a(l,c,o.done,o.value)})}}function a(i,o,l,c){Promise.resolve(c).then(function(d){i({value:d,done:l})},o)}}function KI(e,t){return Object.defineProperty?Object.defineProperty(e,\"raw\",{value:t}):e.raw=t,e}var MH=Object.create?function(e,t){Object.defineProperty(e,\"default\",{enumerable:!0,value:t})}:function(e,t){e.default=t},kw=function(e){return kw=Object.getOwnPropertyNames||function(t){var r=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[r.length]=s);return r},kw(e)};function GI(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=kw(e),s=0;s<r.length;s++)r[s]!==\"default\"&&Pv(t,e,r[s]);return MH(t,e),t}function QI(e){return e&&e.__esModule?e:{default:e}}function JI(e,t,r,s){if(r===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t==\"function\"?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return r===\"m\"?s:r===\"a\"?s.call(e):s?s.value:t.get(e)}function XI(e,t,r,s,a){if(s===\"m\")throw new TypeError(\"Private method is not writable\");if(s===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t==\"function\"?e!==t||!a:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return s===\"a\"?a.call(e,r):a?a.value=r:t.set(e,r),r}function YI(e,t){if(t===null||typeof t!=\"object\"&&typeof t!=\"function\")throw new TypeError(\"Cannot use 'in' operator on non-object\");return typeof e==\"function\"?t===e:e.has(t)}function ZI(e,t,r){if(t!=null){if(typeof t!=\"object\"&&typeof t!=\"function\")throw new TypeError(\"Object expected.\");var s,a;if(r){if(!Symbol.asyncDispose)throw new TypeError(\"Symbol.asyncDispose is not defined.\");s=t[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError(\"Symbol.dispose is not defined.\");s=t[Symbol.dispose],r&&(a=s)}if(typeof s!=\"function\")throw new TypeError(\"Object not disposable.\");a&&(s=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:s,async:r})}else r&&e.stack.push({async:!0});return t}var LH=typeof SuppressedError==\"function\"?SuppressedError:function(e,t,r){var s=new Error(r);return s.name=\"SuppressedError\",s.error=e,s.suppressed=t,s};function e3(e){function t(i){e.error=e.hasError?new LH(i,e.error,\"An error was suppressed during disposal.\"):i,e.hasError=!0}var r,s=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&s===1)return s=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(i).then(a,function(o){return t(o),a()})}else s|=1}catch(o){t(o)}if(s===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function t3(e,t){return typeof e==\"string\"&&/^\\.\\.?\\//.test(e)?e.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i,function(r,s,a,i,o){return s?t?\".jsx\":\".js\":a&&(!i||!o)?r:a+i+\".\"+o.toLowerCase()+\"js\"}):e}const $H={__extends:RI,__assign:ga,__rest:Il,__decorate:OI,__param:II,__esDecorate:DI,__runInitializers:MI,__propKey:LI,__setFunctionName:$I,__metadata:FI,__awaiter:Fe,__generator:VI,__createBinding:Pv,__exportStar:zI,__values:hx,__read:Z1,__spread:BI,__spreadArrays:UI,__spreadArray:eN,__await:Au,__asyncGenerator:qI,__asyncDelegator:HI,__asyncValues:WI,__makeTemplateObject:KI,__importStar:GI,__importDefault:QI,__classPrivateFieldGet:JI,__classPrivateFieldSet:XI,__classPrivateFieldIn:YI,__addDisposableResource:ZI,__disposeResources:e3,__rewriteRelativeImportExtension:t3},FH=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:ZI,get __assign(){return ga},__asyncDelegator:HI,__asyncGenerator:qI,__asyncValues:WI,__await:Au,__awaiter:Fe,__classPrivateFieldGet:JI,__classPrivateFieldIn:YI,__classPrivateFieldSet:XI,__createBinding:Pv,__decorate:OI,__disposeResources:e3,__esDecorate:DI,__exportStar:zI,__extends:RI,__generator:VI,__importDefault:QI,__importStar:GI,__makeTemplateObject:KI,__metadata:FI,__param:II,__propKey:LI,__read:Z1,__rest:Il,__rewriteRelativeImportExtension:t3,__runInitializers:MI,__setFunctionName:$I,__spread:BI,__spreadArray:eN,__spreadArrays:UI,__values:hx,default:$H},Symbol.toStringTag,{value:\"Module\"})),VH=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Tv=class extends Error{constructor(t,r=\"FunctionsError\",s){super(t),this.name=r,this.context=s}},r3=class extends Tv{constructor(t){super(\"Failed to send a request to the Edge Function\",\"FunctionsFetchError\",t)}},Cw=class extends Tv{constructor(t){super(\"Relay Error invoking the Edge Function\",\"FunctionsRelayError\",t)}},Ew=class extends Tv{constructor(t){super(\"Edge Function returned a non-2xx status code\",\"FunctionsHttpError\",t)}};var mx;(function(e){e.Any=\"any\",e.ApNortheast1=\"ap-northeast-1\",e.ApNortheast2=\"ap-northeast-2\",e.ApSouth1=\"ap-south-1\",e.ApSoutheast1=\"ap-southeast-1\",e.ApSoutheast2=\"ap-southeast-2\",e.CaCentral1=\"ca-central-1\",e.EuCentral1=\"eu-central-1\",e.EuWest1=\"eu-west-1\",e.EuWest2=\"eu-west-2\",e.EuWest3=\"eu-west-3\",e.SaEast1=\"sa-east-1\",e.UsEast1=\"us-east-1\",e.UsWest1=\"us-west-1\",e.UsWest2=\"us-west-2\"})(mx||(mx={}));class zH{constructor(t,{headers:r={},customFetch:s,region:a=mx.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=VH(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Fe(this,arguments,void 0,function*(r,s={}){var a;let i,o;try{const{headers:l,method:c,body:d,signal:u,timeout:h}=s;let m={},{region:g}=s;g||(g=this.region);const v=new URL(`${this.url}/${r}`);g&&g!==\"any\"&&(m[\"x-region\"]=g,v.searchParams.set(\"forceFunctionRegion\",g));let x;d&&(l&&!Object.prototype.hasOwnProperty.call(l,\"Content-Type\")||!l)?typeof Blob<\"u\"&&d instanceof Blob||d instanceof ArrayBuffer?(m[\"Content-Type\"]=\"application/octet-stream\",x=d):typeof d==\"string\"?(m[\"Content-Type\"]=\"text/plain\",x=d):typeof FormData<\"u\"&&d instanceof FormData?x=d:(m[\"Content-Type\"]=\"application/json\",x=JSON.stringify(d)):x=d;let w=u;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),u?(w=o.signal,u.addEventListener(\"abort\",()=>o.abort())):w=o.signal);const y=yield this.fetch(v.toString(),{method:c||\"POST\",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:x,signal:w}).catch(E=>{throw new r3(E)}),b=y.headers.get(\"x-relay-error\");if(b&&b===\"true\")throw new Cw(y);if(!y.ok)throw new Ew(y);let N=((a=y.headers.get(\"Content-Type\"))!==null&&a!==void 0?a:\"text/plain\").split(\";\")[0].trim(),_;return N===\"application/json\"?_=yield y.json():N===\"application/octet-stream\"||N===\"application/pdf\"?_=yield y.blob():N===\"text/event-stream\"?_=y:N===\"multipart/form-data\"?_=yield y.formData():_=yield y.text(),{data:_,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof Ew||l instanceof Cw?l.context:void 0}}finally{i&&clearTimeout(i)}})}}const BH=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return mx},FunctionsClient:zH,FunctionsError:Tv,FunctionsFetchError:r3,FunctionsHttpError:Ew,FunctionsRelayError:Cw},Symbol.toStringTag,{value:\"Module\"})),s3=Yu(BH);var Qs={};const nh=Yu(FH);var Rp={},Op={},Ip={},Dp={},Mp={},Lp={},ek;function n3(){if(ek)return Lp;ek=1,Object.defineProperty(Lp,\"__esModule\",{value:!0});class e extends Error{constructor(r){super(r.message),this.name=\"PostgrestError\",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Lp.default=e,Lp}var tk;function a3(){if(tk)return Mp;tk=1,Object.defineProperty(Mp,\"__esModule\",{value:!0});const t=nh.__importDefault(n3());let r=class{constructor(a){var i,o;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(o=a.isMaybeSingle)!==null&&o!==void 0?o:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||([\"GET\",\"HEAD\"].includes(this.method)?this.headers.set(\"Accept-Profile\",this.schema):this.headers.set(\"Content-Profile\",this.schema)),this.method!==\"GET\"&&this.method!==\"HEAD\"&&this.headers.set(\"Content-Type\",\"application/json\");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,u,h,m;let g=null,v=null,x=null,w=c.status,y=c.statusText;if(c.ok){if(this.method!==\"HEAD\"){const E=await c.text();E===\"\"||(this.headers.get(\"Accept\")===\"text/csv\"||this.headers.get(\"Accept\")&&(!((d=this.headers.get(\"Accept\"))===null||d===void 0)&&d.includes(\"application/vnd.pgrst.plan+text\"))?v=E:v=JSON.parse(E))}const N=(u=this.headers.get(\"Prefer\"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),_=(h=c.headers.get(\"content-range\"))===null||h===void 0?void 0:h.split(\"/\");N&&_&&_.length>1&&(x=parseInt(_[1])),this.isMaybeSingle&&this.method===\"GET\"&&Array.isArray(v)&&(v.length>1?(g={code:\"PGRST116\",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:\"JSON object requested, multiple (or no) rows returned\"},v=null,x=null,w=406,y=\"Not Acceptable\"):v.length===1?v=v[0]:v=null)}else{const N=await c.text();try{g=JSON.parse(N),Array.isArray(g)&&c.status===404&&(v=[],g=null,w=200,y=\"OK\")}catch{c.status===404&&N===\"\"?(w=204,y=\"No Content\"):g={message:N}}if(g&&this.isMaybeSingle&&(!((m=g==null?void 0:g.details)===null||m===void 0)&&m.includes(\"0 rows\"))&&(g=null,w=200,y=\"OK\"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:v,count:x,status:w,statusText:y}});return this.shouldThrowOnError||(l=l.catch(c=>{var d,u,h,m,g,v;let x=\"\";const w=c==null?void 0:c.cause;if(w){const y=(d=w==null?void 0:w.message)!==null&&d!==void 0?d:\"\",b=(u=w==null?void 0:w.code)!==null&&u!==void 0?u:\"\";x=`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:\"FetchError\"}: ${c==null?void 0:c.message}`,x+=`\n\nCaused by: ${(m=w==null?void 0:w.name)!==null&&m!==void 0?m:\"Error\"}: ${y}`,b&&(x+=` (${b})`),w!=null&&w.stack&&(x+=`\n${w.stack}`)}else x=(g=c==null?void 0:c.stack)!==null&&g!==void 0?g:\"\";return{error:{message:`${(v=c==null?void 0:c.name)!==null&&v!==void 0?v:\"FetchError\"}: ${c==null?void 0:c.message}`,details:x,hint:\"\",code:\"\"},data:null,count:null,status:0,statusText:\"\"}})),l.then(a,i)}returns(){return this}overrideTypes(){return this}};return Mp.default=r,Mp}var rk;function i3(){if(rk)return Dp;rk=1,Object.defineProperty(Dp,\"__esModule\",{value:!0});const t=nh.__importDefault(a3());let r=class extends t.default{select(a){let i=!1;const o=(a??\"*\").split(\"\").map(l=>/\\s/.test(l)&&!i?\"\":(l==='\"'&&(i=!i),l)).join(\"\");return this.url.searchParams.set(\"select\",o),this.headers.append(\"Prefer\",\"return=representation\"),this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:\"order\",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:\"\"}${a}.${i?\"asc\":\"desc\"}${o===void 0?\"\":o?\".nullsfirst\":\".nullslast\"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>\"u\"?\"limit\":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>\"u\"?\"offset\":`${l}.offset`,d=typeof l>\"u\"?\"limit\":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(d,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set(\"Accept\",\"application/vnd.pgrst.object+json\"),this}maybeSingle(){return this.method===\"GET\"?this.headers.set(\"Accept\",\"application/json\"):this.headers.set(\"Accept\",\"application/vnd.pgrst.object+json\"),this.isMaybeSingle=!0,this}csv(){return this.headers.set(\"Accept\",\"text/csv\"),this}geojson(){return this.headers.set(\"Accept\",\"application/geo+json\"),this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:d=\"text\"}={}){var u;const h=[a?\"analyze\":null,i?\"verbose\":null,o?\"settings\":null,l?\"buffers\":null,c?\"wal\":null].filter(Boolean).join(\"|\"),m=(u=this.headers.get(\"Accept\"))!==null&&u!==void 0?u:\"application/json\";return this.headers.set(\"Accept\",`application/vnd.pgrst.plan+${d}; for=\"${m}\"; options=${h};`),d===\"json\"?this:this}rollback(){return this.headers.append(\"Prefer\",\"tx=rollback\"),this}returns(){return this}maxAffected(a){return this.headers.append(\"Prefer\",\"handling=strict\"),this.headers.append(\"Prefer\",`max-affected=${a}`),this}};return Dp.default=r,Dp}var sk;function tN(){if(sk)return Ip;sk=1,Object.defineProperty(Ip,\"__esModule\",{value:!0});const t=nh.__importDefault(i3()),r=new RegExp(\"[,()]\");let s=class extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(\",\")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(\",\")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(\",\")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(\",\")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(c=>typeof c==\"string\"&&r.test(c)?`\"${c}\"`:`${c}`).join(\",\");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o==\"string\"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(\",\")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o==\"string\"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(\",\")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o==\"string\"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(\",\")}}`),this}textSearch(i,o,{config:l,type:c}={}){let d=\"\";c===\"plain\"?d=\"pl\":c===\"phrase\"?d=\"ph\":c===\"websearch\"&&(d=\"w\");const u=l===void 0?\"\":`(${l})`;return this.url.searchParams.append(i,`${d}fts${u}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:\"or\";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}};return Ip.default=s,Ip}var nk;function o3(){if(nk)return Op;nk=1,Object.defineProperty(Op,\"__esModule\",{value:!0});const t=nh.__importDefault(tN());let r=class{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(a,i){const{head:o=!1,count:l}=i??{},c=o?\"HEAD\":\"GET\";let d=!1;const u=(a??\"*\").split(\"\").map(h=>/\\s/.test(h)&&!d?\"\":(h==='\"'&&(d=!d),h)).join(\"\");return this.url.searchParams.set(\"select\",u),l&&this.headers.append(\"Prefer\",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:o=!0}={}){var l;const c=\"POST\";if(i&&this.headers.append(\"Prefer\",`count=${i}`),o||this.headers.append(\"Prefer\",\"missing=default\"),Array.isArray(a)){const d=a.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(d.length>0){const u=[...new Set(d)].map(h=>`\"${h}\"`);this.url.searchParams.set(\"columns\",u.join(\",\"))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var d;const u=\"POST\";if(this.headers.append(\"Prefer\",`resolution=${o?\"ignore\":\"merge\"}-duplicates`),i!==void 0&&this.url.searchParams.set(\"on_conflict\",i),l&&this.headers.append(\"Prefer\",`count=${l}`),c||this.headers.append(\"Prefer\",\"missing=default\"),Array.isArray(a)){const h=a.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(h.length>0){const m=[...new Set(h)].map(g=>`\"${g}\"`);this.url.searchParams.set(\"columns\",m.join(\",\"))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(a,{count:i}={}){var o;const l=\"PATCH\";return i&&this.headers.append(\"Prefer\",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:a}={}){var i;const o=\"DELETE\";return a&&this.headers.append(\"Prefer\",`count=${a}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};return Op.default=r,Op}var ak;function UH(){if(ak)return Rp;ak=1,Object.defineProperty(Rp,\"__esModule\",{value:!0});const e=nh,t=e.__importDefault(o3()),r=e.__importDefault(tN());let s=class l3{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){if(!i||typeof i!=\"string\"||i.trim()===\"\")throw new Error(\"Invalid relation name: relation must be a non-empty string.\");const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new l3(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:d}={}){var u;let h;const m=new URL(`${this.url}/rpc/${i}`);let g;l||c?(h=l?\"HEAD\":\"GET\",Object.entries(o).filter(([x,w])=>w!==void 0).map(([x,w])=>[x,Array.isArray(w)?`{${w.join(\",\")}}`:`${w}`]).forEach(([x,w])=>{m.searchParams.append(x,w)})):(h=\"POST\",g=o);const v=new Headers(this.headers);return d&&v.set(\"Prefer\",`count=${d}`),new r.default({method:h,url:m,headers:v,schema:this.schemaName,body:g,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};return Rp.default=s,Rp}Object.defineProperty(Qs,\"__esModule\",{value:!0});Qs.PostgrestError=Qs.PostgrestBuilder=Qs.PostgrestTransformBuilder=Qs.PostgrestFilterBuilder=Qs.PostgrestQueryBuilder=Qs.PostgrestClient=void 0;const ah=nh,c3=ah.__importDefault(UH());Qs.PostgrestClient=c3.default;const d3=ah.__importDefault(o3());Qs.PostgrestQueryBuilder=d3.default;const u3=ah.__importDefault(tN());Qs.PostgrestFilterBuilder=u3.default;const h3=ah.__importDefault(i3());Qs.PostgrestTransformBuilder=h3.default;const m3=ah.__importDefault(a3());Qs.PostgrestBuilder=m3.default;const f3=ah.__importDefault(n3());Qs.PostgrestError=f3.default;Qs.default={PostgrestClient:c3.default,PostgrestQueryBuilder:d3.default,PostgrestFilterBuilder:u3.default,PostgrestTransformBuilder:h3.default,PostgrestBuilder:m3.default,PostgrestError:f3.default};class p3{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<\"u\")return{type:\"native\",constructor:WebSocket};if(typeof globalThis<\"u\"&&typeof globalThis.WebSocket<\"u\")return{type:\"native\",constructor:globalThis.WebSocket};if(typeof global<\"u\"&&typeof global.WebSocket<\"u\")return{type:\"native\",constructor:global.WebSocket};if(typeof globalThis<\"u\"&&typeof globalThis.WebSocketPair<\"u\"&&typeof globalThis.WebSocket>\"u\")return{type:\"cloudflare\",error:\"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.\",workaround:\"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.\"};if(typeof globalThis<\"u\"&&globalThis.EdgeRuntime||typeof navigator<\"u\"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes(\"Vercel-Edge\")))return{type:\"unsupported\",error:\"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.\",workaround:\"Use serverless functions or a different deployment target for WebSocket functionality.\"};if(typeof process<\"u\"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,\"\").split(\".\")[0]);return a>=22?typeof globalThis.WebSocket<\"u\"?{type:\"native\",constructor:globalThis.WebSocket}:{type:\"unsupported\",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:\"Provide a WebSocket implementation via the transport option.\"}:{type:\"unsupported\",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install \"ws\" package and provide it via the transport option:\nimport ws from \"ws\"\nnew RealtimeClient(url, { transport: ws })`}}}return{type:\"unsupported\",error:\"Unknown JavaScript runtime without WebSocket support.\",workaround:\"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||\"WebSocket not supported in this environment.\";throw t.workaround&&(r+=`\n\nSuggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type===\"native\"||t.type===\"ws\"}catch{return!1}}}const qH=\"2.87.1\",HH=`realtime-js/${qH}`,g3=\"1.0.0\",WH=\"2.0.0\",ik=g3,Pw=1e4,KH=1e3,GH=100;var ic;(function(e){e[e.connecting=0]=\"connecting\",e[e.open=1]=\"open\",e[e.closing=2]=\"closing\",e[e.closed=3]=\"closed\"})(ic||(ic={}));var Gr;(function(e){e.closed=\"closed\",e.errored=\"errored\",e.joined=\"joined\",e.joining=\"joining\",e.leaving=\"leaving\"})(Gr||(Gr={}));var La;(function(e){e.close=\"phx_close\",e.error=\"phx_error\",e.join=\"phx_join\",e.reply=\"phx_reply\",e.leave=\"phx_leave\",e.access_token=\"access_token\"})(La||(La={}));var Tw;(function(e){e.websocket=\"websocket\"})(Tw||(Tw={}));var oc;(function(e){e.Connecting=\"connecting\",e.Open=\"open\",e.Closing=\"closing\",e.Closed=\"closed\"})(oc||(oc={}));class QH{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT=\"broadcast\",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event==\"string\")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s;const a=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,s;const a=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,s){var a,i;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:\"\",c=(i=t.join_ref)!==null&&i!==void 0?i:\"\",d=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?\"\":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+d.length+h.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(g),x=0;v.setUint8(x++,this.KINDS.userBroadcastPush),v.setUint8(x++,c.length),v.setUint8(x++,l.length),v.setUint8(x++,o.length),v.setUint8(x++,d.length),v.setUint8(x++,h.length),v.setUint8(x++,r),Array.from(c,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(l,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(o,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(d,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(h,y=>v.setUint8(x++,y.charCodeAt(0)));var w=new Uint8Array(g.byteLength+s.byteLength);return w.set(new Uint8Array(g),0),w.set(new Uint8Array(s),g.byteLength),w.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t==\"string\"){const s=JSON.parse(t),[a,i,o,l,c]=s;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,s){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const d=s.decode(t.slice(c,c+a));c=c+a;const u=s.decode(t.slice(c,c+i));c=c+i;const h=s.decode(t.slice(c,c+o));c=c+o;const m=t.slice(c,t.byteLength),g=l===this.JSON_ENCODING?JSON.parse(s.decode(m)):m,v={type:this.BROADCAST_EVENT,event:u,payload:g};return o>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)===\"ArrayBuffer\"}_pick(t,r){return!t||typeof t!=\"object\"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>r.includes(s)))}}class x3{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mr;(function(e){e.abstime=\"abstime\",e.bool=\"bool\",e.date=\"date\",e.daterange=\"daterange\",e.float4=\"float4\",e.float8=\"float8\",e.int2=\"int2\",e.int4=\"int4\",e.int4range=\"int4range\",e.int8=\"int8\",e.int8range=\"int8range\",e.json=\"json\",e.jsonb=\"jsonb\",e.money=\"money\",e.numeric=\"numeric\",e.oid=\"oid\",e.reltime=\"reltime\",e.text=\"text\",e.time=\"time\",e.timestamp=\"timestamp\",e.timestamptz=\"timestamptz\",e.timetz=\"timetz\",e.tsrange=\"tsrange\",e.tstzrange=\"tstzrange\"})(mr||(mr={}));const ok=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=JH(o,e,t,a),i),{}):{}},JH=(e,t,r,s)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!s.includes(i)?v3(i,o):Aw(o)},v3=(e,t)=>{if(e.charAt(0)===\"_\"){const r=e.slice(1,e.length);return eW(t,r)}switch(e){case mr.bool:return XH(t);case mr.float4:case mr.float8:case mr.int2:case mr.int4:case mr.int8:case mr.numeric:case mr.oid:return YH(t);case mr.json:case mr.jsonb:return ZH(t);case mr.timestamp:return tW(t);case mr.abstime:case mr.date:case mr.daterange:case mr.int4range:case mr.int8range:case mr.money:case mr.reltime:case mr.text:case mr.time:case mr.timestamptz:case mr.timetz:case mr.tsrange:case mr.tstzrange:return Aw(t);default:return Aw(t)}},Aw=e=>e,XH=e=>{switch(e){case\"t\":return!0;case\"f\":return!1;default:return e}},YH=e=>{if(typeof e==\"string\"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ZH=e=>{if(typeof e==\"string\")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},eW=(e,t)=>{if(typeof e!=\"string\")return e;const r=e.length-1,s=e[r];if(e[0]===\"{\"&&s===\"}\"){let i;const o=e.slice(1,r);try{i=JSON.parse(\"[\"+o+\"]\")}catch{i=o?o.split(\",\"):[]}return i.map(l=>v3(t,l))}return e},tW=e=>typeof e==\"string\"?e.replace(\" \",\"T\"):e,y3=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,\"http\"),t.pathname=t.pathname.replace(/\\/+$/,\"\").replace(/\\/socket\\/websocket$/i,\"\").replace(/\\/socket$/i,\"\").replace(/\\/websocket$/i,\"\"),t.pathname===\"\"||t.pathname===\"/\"?t.pathname=\"/api/broadcast\":t.pathname=t.pathname+\"/api/broadcast\",t.href};class hb{constructor(t,r,s={},a=Pw){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref=\"\",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref=\"\",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived(\"timeout\")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger(\"timeout\",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Rw;(function(e){e.SYNC=\"sync\",e.JOIN=\"join\",e.LEAVE=\"leave\"})(Rw||(Rw={}));let b3=class wg{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:\"presence_state\",diff:\"presence_diff\"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wg.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=wg.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=wg.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger(\"presence\",{event:\"join\",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger(\"presence\",{event:\"leave\",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger(\"presence\",{event:\"sync\"})})}static syncState(t,r,s,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const m=u.map(w=>w.presence_ref),g=h.map(w=>w.presence_ref),v=u.filter(w=>g.indexOf(w.presence_ref)<0),x=h.filter(w=>m.indexOf(w.presence_ref)<0);v.length>0&&(l[d]=v),x.length>0&&(c[d]=x)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(t,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(g=>g.presence_ref),m=u.filter(g=>h.indexOf(g.presence_ref)<0);t[l].unshift(...m)}s(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return\"metas\"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Ow;(function(e){e.ALL=\"*\",e.INSERT=\"INSERT\",e.UPDATE=\"UPDATE\",e.DELETE=\"DELETE\"})(Ow||(Ow={}));var Yd;(function(e){e.BROADCAST=\"broadcast\",e.PRESENCE=\"presence\",e.POSTGRES_CHANGES=\"postgres_changes\",e.SYSTEM=\"system\"})(Yd||(Yd={}));var ii;(function(e){e.SUBSCRIBED=\"SUBSCRIBED\",e.TIMED_OUT=\"TIMED_OUT\",e.CLOSED=\"CLOSED\",e.CHANNEL_ERROR=\"CHANNEL_ERROR\"})(ii||(ii={}));const rW=Gr;let w3=class Yh{constructor(t,r={config:{}},s){var a,i;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Gr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,\"\"),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:\"\",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new hb(this,La.join,this.params,this.timeout),this.rejoinTimer=new x3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive(\"ok\",()=>{this.state=Gr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log(\"channel\",`close ${this.topic} ${this._joinRef()}`),this.state=Gr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log(\"channel\",`error ${this.topic}`,o),this.state=Gr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive(\"timeout\",()=>{this._isJoining()&&(this.socket.log(\"channel\",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive(\"error\",o=>{this._isLeaving()||this._isClosed()||(this.socket.log(\"channel\",`error ${this.topic}`,o),this.state=Gr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(La.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new b3(this),this.broadcastEndpointURL=y3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Gr.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(g=>g.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Yd.PRESENCE]&&this.bindings[Yd.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(ii.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(ii.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive(\"ok\",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){t==null||t(ii.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,w=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,y=[];for(let b=0;b<w;b++){const N=x[b],{filter:{event:_,schema:E,table:k,filter:P}}=N,C=g&&g[b];if(C&&C.event===_&&Yh.isFilterValueEqual(C.schema,E)&&Yh.isFilterValueEqual(C.table,k)&&Yh.isFilterValueEqual(C.filter,P))y.push(Object.assign(Object.assign({},N),{id:C.id}));else{this.unsubscribe(),this.state=Gr.errored,t==null||t(ii.CHANNEL_ERROR,new Error(\"mismatch between server and client bindings for postgres changes\"));return}}this.bindings.postgres_changes=y,t&&t(ii.SUBSCRIBED);return}}).receive(\"error\",g=>{this.state=Gr.errored,t==null||t(ii.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(\", \")||\"error\")))}).receive(\"timeout\",()=>{t==null||t(ii.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:\"presence\",event:\"track\",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:\"presence\",event:\"untrack\"},t)}on(t,r,s){return this.state===Gr.joined&&t===Yd.PRESENCE&&(this.socket.log(\"channel\",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:\"\";if(r==null)return Promise.reject(\"Payload is required for httpSend()\");const o={method:\"POST\",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:\"\",\"Content-Type\":\"application/json\"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var s,a;if(!this._canPush()&&t.type===\"broadcast\"){console.warn(\"Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.\");const{event:i,payload:o}=t,c={method:\"POST\",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:\"\",apikey:this.socket.apiKey?this.socket.apiKey:\"\",\"Content-Type\":\"application/json\"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?\"ok\":\"error\"}catch(d){return d.name===\"AbortError\"?\"timed out\":\"error\"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type===\"broadcast\"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i(\"ok\"),d.receive(\"ok\",()=>i(\"ok\")),d.receive(\"error\",()=>i(\"error\")),d.receive(\"timeout\",()=>i(\"timed out\"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Gr.leaving;const r=()=>{this.socket.log(\"channel\",`leave ${this.topic}`),this._trigger(La.close,\"leave\",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new hb(this,La.leave,{},t),s.receive(\"ok\",()=>{r(),a(\"ok\")}).receive(\"timeout\",()=>{r(),a(\"timed out\")}).receive(\"error\",()=>{a(\"error\")}),s.send(),this._canPush()||s.trigger(\"ok\",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Gr.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new hb(this,t,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>GH){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log(\"channel\",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=La;if(s&&[l,c,d,u].indexOf(o)>=0&&s!==this._joinRef())return;let m=this._onMessage(o,r,s);if(r&&!m)throw\"channel onMessage callbacks must return the payload, modified or unmodified\";[\"insert\",\"update\",\"delete\"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var v,x,w;return((v=g.filter)===null||v===void 0?void 0:v.event)===\"*\"||((w=(x=g.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(g=>g.callback(m,s)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var v,x,w,y,b,N;if([\"broadcast\",\"presence\",\"postgres_changes\"].includes(o))if(\"id\"in g){const _=g.id,E=(v=g.filter)===null||v===void 0?void 0:v.event;return _&&((x=r.ids)===null||x===void 0?void 0:x.includes(_))&&(E===\"*\"||(E==null?void 0:E.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(b=(y=g==null?void 0:g.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _===\"*\"||_===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m==\"object\"&&\"ids\"in m){const v=m.data,{schema:x,table:w,commit_timestamp:y,type:b,errors:N}=v;m=Object.assign(Object.assign({},{schema:x,table:w,commit_timestamp:y,eventType:b,new:{},old:{},errors:N}),this._getPayloadRecords(v))}g.callback(m,s)})}_isClosed(){return this.state===Gr.closed}_isJoined(){return this.state===Gr.joined}_isJoining(){return this.state===Gr.joining}_isLeaving(){return this.state===Gr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Yh.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(La.close,{},t)}_onError(t){this._on(La.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type===\"INSERT\"||t.type===\"UPDATE\")&&(r.new=ok(t.columns,t.record)),(t.type===\"UPDATE\"||t.type===\"DELETE\")&&(r.old=ok(t.columns,t.old_record)),r}};const mb=()=>{},$p={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sW=[1e3,2e3,5e3,1e4],nW=1e4,aW=`\n  addEventListener(\"message\", (e) => {\n    if (e.data.event === \"start\") {\n      setInterval(() => postMessage({ event: \"keepAlive\" }), e.data.interval);\n    }\n  });`;let iW=class{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint=\"\",this.httpEndpoint=\"\",this.headers={},this.params={},this.timeout=Pw,this.transport=null,this.heartbeatIntervalMs=$p.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=mb,this.ref=0,this.reconnectTimer=null,this.vsn=ik,this.logger=mb,this.conn=null,this.sendBuffer=[],this.serializer=new QH,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState=\"disconnected\",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error(\"API key is required to connect to Realtime\");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Tw.websocket}`,this.httpEndpoint=y3(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState(\"connecting\"),this.accessToken&&!this._authPromise&&this._setAuthSafely(\"connect\"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=p3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState(\"disconnected\");const r=t.message;throw r.includes(\"Node.js\")?new Error(`${r}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the \"ws\" package:\n\n  npm install ws\n\n  import ws from \"ws\"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState(\"disconnecting\",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState(\"disconnected\")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState(\"disconnected\")},typeof this.conn.close==\"function\"&&(t?this.conn.close(t,r??\"\"):this.conn.close()),this._teardownConnection()}else this._setConnectionState(\"disconnected\")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ic.connecting:return oc.Connecting;case ic.open:return oc.Open;case ic.closing:return oc.Closing;default:return oc.Closed}}isConnected(){return this.connectionState()===oc.Open}isConnecting(){return this._connectionState===\"connecting\"}isDisconnecting(){return this._connectionState===\"disconnecting\"}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new w3(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log(\"push\",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback(\"disconnected\")}catch(r){this.log(\"error\",\"error in heartbeat callback\",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log(\"transport\",\"heartbeat timeout. Attempting to re-establish connection\");try{this.heartbeatCallback(\"timeout\")}catch(r){this.log(\"error\",\"error in heartbeat callback\",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(KH,\"heartbeat timeout\"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},$p.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:\"phoenix\",event:\"heartbeat\",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback(\"sent\")}catch(r){this.log(\"error\",\"error in heartbeat callback\",r)}this._setAuthSafely(\"heartbeat\")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log(\"transport\",`leaving duplicate topic \"${t}\"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic===\"phoenix\"&&r.event===\"phx_reply\")try{this.heartbeatCallback(r.payload.status===\"ok\"?\"ok\":\"error\")}catch(d){this.log(\"error\",\"error in heartbeat callback\",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:i,ref:o}=r,l=o?`(${o})`:\"\",c=i.status||\"\";this.log(\"receive\",`${c} ${s} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(s)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks(\"message\",r)})}_clearTimer(t){var r;t===\"heartbeat\"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t===\"reconnect\"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer(\"heartbeat\"),this._clearTimer(\"reconnect\")}_setupConnectionHandlers(){this.conn&&(\"binaryType\"in this.conn&&(this.conn.binaryType=\"arraybuffer\"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ic.open||this.conn.readyState===ic.connecting)try{this.conn.close()}catch(t){this.log(\"error\",\"Error closing connection\",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState(\"connected\"),this.log(\"transport\",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log(\"error\",\"error waiting for auth on connect\",r),this.flushSendBuffer()}),this._clearTimer(\"reconnect\"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks(\"open\")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log(\"worker\",`starting worker for from ${this.workerUrl}`):this.log(\"worker\",\"starting default worker\");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log(\"worker\",\"worker error\",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event===\"keepAlive\"&&this.sendHeartbeat()},this.workerRef.postMessage({event:\"start\",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState(\"disconnected\"),this.log(\"transport\",\"close\",t),this._triggerChanError(),this._clearTimer(\"heartbeat\"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks(\"close\",t)}_onConnError(t){this._setConnectionState(\"disconnected\"),this.log(\"transport\",`${t}`),this._triggerChanError(),this._triggerStateCallbacks(\"error\",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(La.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\\?/)?\"&\":\"?\",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([aW],{type:\"application/javascript\"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t===\"connecting\"?this._wasManualDisconnect=!1:t===\"disconnecting\"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,s=!1;if(t)r=t,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log(\"error\",\"Error fetching access token from callback\",a),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:HH};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(La.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t=\"general\"){this._isManualToken()||this.setAuth().catch(r=>{this.log(\"error\",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(a){this.log(\"error\",`error in ${t} callback`,a)}})}catch(s){this.log(\"error\",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new x3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$p.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,a,i,o,l,c,d,u,h,m,g;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:Pw,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:$p.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:mb,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:ik,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:v=>sW[v-1]||nW,this.vsn){case g3:this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(v,x)=>x(JSON.stringify(v)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(v,x)=>x(JSON.parse(v));break;case WH:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<\"u\"&&!window.Worker)throw new Error(\"Web Worker is not supported\");this.workerUrl=t==null?void 0:t.workerUrl}}};const oW=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:rW,get REALTIME_LISTEN_TYPES(){return Yd},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Ow},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Rw},get REALTIME_SUBSCRIBE_STATES(){return ii},RealtimeChannel:w3,RealtimeClient:iW,RealtimePresence:b3,WebSocketFactory:p3},Symbol.toStringTag,{value:\"Module\"})),j3=Yu(oW);class Pf extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name=\"StorageError\"}}function Nr(e){return typeof e==\"object\"&&e!==null&&\"__isStorageError\"in e}class N3 extends Pf{constructor(t,r,s){super(t),this.name=\"StorageApiError\",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fx extends Pf{constructor(t,r){super(t),this.name=\"StorageUnknownError\",this.originalError=r}}const rN=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),lW=()=>Response,Iw=e=>{if(Array.isArray(e))return e.map(r=>Iw(r));if(typeof e==\"function\"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,\"\"));t[a]=Iw(s)}),t},cW=e=>{if(typeof e!=\"object\"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},dW=e=>!e||typeof e!=\"string\"||e.length===0||e.length>100||e.trim()!==e||e.includes(\"/\")||e.includes(\"\\\\\")?!1:/^[\\w!.\\*'() &$@=;:+,?-]+$/.test(e),fb=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error==\"string\"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},uW=(e,t,r)=>Fe(void 0,void 0,void 0,function*(){const s=yield lW();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+\"\";t(new N3(fb(a),i,o))}).catch(a=>{t(new fx(fb(a),a))}):t(new fx(fb(e),e))}),hW=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e===\"GET\"||!s?a:(cW(s)?(a.headers=Object.assign({\"Content-Type\":\"application/json\"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Tf(e,t,r,s,a,i){return Fe(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,hW(t,s,a,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>uW(c,l,s))})})}function Bm(e,t,r,s){return Fe(this,void 0,void 0,function*(){return Tf(e,\"GET\",t,r,s)})}function Ia(e,t,r,s,a){return Fe(this,void 0,void 0,function*(){return Tf(e,\"POST\",t,s,a,r)})}function Dw(e,t,r,s,a){return Fe(this,void 0,void 0,function*(){return Tf(e,\"PUT\",t,s,a,r)})}function mW(e,t,r,s){return Fe(this,void 0,void 0,function*(){return Tf(e,\"HEAD\",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function sN(e,t,r,s,a){return Fe(this,void 0,void 0,function*(){return Tf(e,\"DELETE\",t,s,a,r)})}class fW{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nr(t))return{data:null,error:t};throw t}})}}var _3;class pW{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[_3]=\"BlobDownloadBuilder\",this.promise=null}asStream(){return new fW(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nr(t))return{data:null,error:t};throw t}})}}_3=Symbol.toStringTag;const gW={limit:100,offset:0,sortBy:{column:\"name\",order:\"asc\"}},lk={cacheControl:\"3600\",contentType:\"text/plain;charset=UTF-8\",upsert:!1};class xW{constructor(t,r={},s,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=rN(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,s,a){return Fe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},lk),a);let l=Object.assign(Object.assign({},this.headers),t===\"POST\"&&{\"x-upsert\":String(o.upsert)});const c=o.metadata;typeof Blob<\"u\"&&s instanceof Blob?(i=new FormData,i.append(\"cacheControl\",o.cacheControl),c&&i.append(\"metadata\",this.encodeMetadata(c)),i.append(\"\",s)):typeof FormData<\"u\"&&s instanceof FormData?(i=s,i.has(\"cacheControl\")||i.append(\"cacheControl\",o.cacheControl),c&&!i.has(\"metadata\")&&i.append(\"metadata\",this.encodeMetadata(c))):(i=s,l[\"cache-control\"]=`max-age=${o.cacheControl}`,l[\"content-type\"]=o.contentType,c&&(l[\"x-metadata\"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<\"u\"&&i instanceof ReadableStream||i&&typeof i==\"object\"&&\"pipe\"in i&&typeof i.pipe==\"function\")&&!o.duplex&&(o.duplex=\"half\")),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield(t==\"PUT\"?Dw:Ia)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nr(i))return{data:null,error:i};throw i}})}upload(t,r,s){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate(\"POST\",t,r,s)})}uploadToSignedUrl(t,r,s,a){return Fe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set(\"token\",r);try{let c;const d=Object.assign({upsert:lk.upsert},a),u=Object.assign(Object.assign({},this.headers),{\"x-upsert\":String(d.upsert)});typeof Blob<\"u\"&&s instanceof Blob?(c=new FormData,c.append(\"cacheControl\",d.cacheControl),c.append(\"\",s)):typeof FormData<\"u\"&&s instanceof FormData?(c=s,c.append(\"cacheControl\",d.cacheControl)):(c=s,u[\"cache-control\"]=`max-age=${d.cacheControl}`,u[\"content-type\"]=d.contentType);const h=yield Dw(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Nr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Fe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a[\"x-upsert\"]=\"true\");const i=yield Ia(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get(\"token\");if(!l)throw new Pf(\"No token returned by API\");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}update(t,r,s){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate(\"PUT\",t,r,s)})}move(t,r,s){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}copy(t,r,s){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield Ia(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,s){return Fe(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Ia(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?\"\":s.download}`:\"\";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,s){return Fe(this,void 0,void 0,function*(){try{const a=yield Ia(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?\"\":s.download}`:\"\";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<\"u\"?\"render/image/authenticated\":\"object\",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:\"\",l=this._getFinalPath(t),c=()=>Bm(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new pW(c,this.shouldThrowOnError)}info(t){return Fe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield Bm(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Iw(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}exists(t){return Fe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield mW(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s)&&s instanceof fx){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?\"\":r.download}`:\"\";i!==\"\"&&a.push(i);const l=typeof(r==null?void 0:r.transform)<\"u\"?\"render/image\":\"object\",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==\"\"&&a.push(c);let d=a.join(\"&\");return d!==\"\"&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield sN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}list(t,r,s){return Fe(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},gW),r),{prefix:t||\"\"});return{data:yield Ia(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}listV2(t,r){return Fe(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield Ia(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<\"u\"?Buffer.from(t).toString(\"base64\"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\\/+/,\"\")}`}_removeEmptyFolders(t){return t.replace(/^\\/|\\/$/g,\"\").replace(/\\/+/g,\"/\")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join(\"&\")}}const S3=\"2.87.1\",k3={\"X-Client-Info\":`storage-js/${S3}`};class vW{constructor(t,r={},s,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes(\"storage.supabase.\")&&(i.hostname=i.hostname.replace(\"supabase.\",\"storage.supabase.\")),this.url=i.href.replace(/\\/$/,\"\"),this.headers=Object.assign(Object.assign({},k3),r),this.fetch=rN(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Fe(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Bm(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}getBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Bm(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}createBucket(t){return Fe(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield Ia(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nr(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Fe(this,void 0,void 0,function*(){try{return{data:yield Dw(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield sN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&(\"limit\"in t&&(r.limit=String(t.limit)),\"offset\"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?\"?\"+new URLSearchParams(r).toString():\"\"}}var Um=class extends Error{constructor(e,t){var r;super(e),this.name=\"IcebergError\",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType===\"CommitStateUnknownException\"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes(\"CommitState\"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function yW(e,t,r){const s=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&s.searchParams.set(a,i);return s.toString()}async function bW(e){return!e||e.type===\"none\"?{}:e.type===\"bearer\"?{Authorization:`Bearer ${e.token}`}:e.type===\"header\"?{[e.name]:e.value}:e.type===\"custom\"?await e.getHeaders():{}}function wW(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:a,body:i,headers:o}){const l=yW(e.baseUrl,s,a),c=await bW(e.auth),d=await t(l,{method:r,headers:{...i?{\"Content-Type\":\"application/json\"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),u=await d.text(),h=(d.headers.get(\"content-type\")||\"\").includes(\"application/json\"),m=h&&u?JSON.parse(u):u;if(!d.ok){const g=h?m:void 0,v=g==null?void 0:g.error;throw new Um((v==null?void 0:v.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:g})}return{status:d.status,headers:d.headers,data:m}}}}function Fp(e){return e.join(\"\u001f\")}var jW=class{constructor(e,t=\"\"){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Fp(e.namespace)}:void 0;return(await this.client.request({method:\"GET\",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:\"POST\",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:\"DELETE\",path:`${this.prefix}/namespaces/${Fp(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:\"GET\",path:`${this.prefix}/namespaces/${Fp(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:\"HEAD\",path:`${this.prefix}/namespaces/${Fp(e.namespace)}`}),!0}catch(t){if(t instanceof Um&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Um&&r.status===409)return;throw r}}};function ud(e){return e.join(\"\u001f\")}var NW=class{constructor(e,t=\"\",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:\"GET\",path:`${this.prefix}/namespaces/${ud(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r[\"X-Iceberg-Access-Delegation\"]=this.accessDelegation),(await this.client.request({method:\"POST\",path:`${this.prefix}/namespaces/${ud(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:\"POST\",path:`${this.prefix}/namespaces/${ud(e.namespace)}/tables/${e.name}`,body:t});return{\"metadata-location\":r.data[\"metadata-location\"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:\"DELETE\",path:`${this.prefix}/namespaces/${ud(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t[\"X-Iceberg-Access-Delegation\"]=this.accessDelegation),(await this.client.request({method:\"GET\",path:`${this.prefix}/namespaces/${ud(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t[\"X-Iceberg-Access-Delegation\"]=this.accessDelegation);try{return await this.client.request({method:\"HEAD\",path:`${this.prefix}/namespaces/${ud(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Um&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Um&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},_W=class{constructor(e){var s;let t=\"v1\";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith(\"/\")?e.baseUrl:`${e.baseUrl}/`;this.client=wW({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(\",\"),this.namespaceOps=new jW(this.client,t),this.tableOps=new NW(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class C3{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\\/$/,\"\"),this.headers=Object.assign(Object.assign({},k3),r),this.fetch=rN(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}listBuckets(t){return Fe(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set(\"limit\",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set(\"offset\",t.offset.toString()),t!=null&&t.sortColumn&&r.set(\"sortColumn\",t.sortColumn),t!=null&&t.sortOrder&&r.set(\"sortOrder\",t.sortOrder),t!=null&&t.search&&r.set(\"search\",t.search);const s=r.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Bm(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield sN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}from(t){if(!dW(t))throw new Pf(\"Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.\");const r=new _W({baseUrl:this.url,catalogName:t,auth:{type:\"custom\",getHeaders:()=>Fe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(i,o){const l=i[o];return typeof l!=\"function\"?l:(...c)=>Fe(this,void 0,void 0,function*(){try{return{data:yield l.apply(i,c),error:null}}catch(d){if(s)throw d;return{data:null,error:d}}})}})}}const nN={\"X-Client-Info\":`storage-js/${S3}`,\"Content-Type\":\"application/json\"};class aN extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name=\"StorageVectorsError\"}}function kn(e){return typeof e==\"object\"&&e!==null&&\"__isStorageVectorsError\"in e}class jg extends aN{constructor(t,r,s){super(t),this.name=\"StorageVectorsApiError\",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class E3 extends aN{constructor(t,r){super(t),this.name=\"StorageVectorsUnknownError\",this.originalError=r}}var Mw;(function(e){e.InternalError=\"InternalError\",e.S3VectorConflictException=\"S3VectorConflictException\",e.S3VectorNotFoundException=\"S3VectorNotFoundException\",e.S3VectorBucketNotEmpty=\"S3VectorBucketNotEmpty\",e.S3VectorMaxBucketsExceeded=\"S3VectorMaxBucketsExceeded\",e.S3VectorMaxIndexesExceeded=\"S3VectorMaxIndexesExceeded\"})(Mw||(Mw={}));const Av=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),SW=()=>Response,P3=e=>{if(typeof e!=\"object\"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},kW=e=>Array.from(new Float32Array(e)),CW=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},ck=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),EW=(e,t,r)=>Fe(void 0,void 0,void 0,function*(){if(e&&typeof e==\"object\"&&\"status\"in e&&\"ok\"in e&&typeof e.status==\"number\"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json==\"function\")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||a+\"\";t(new jg(ck(o),a,l))}).catch(()=>{const o=a+\"\",l=i.statusText||`HTTP ${a} error`;t(new jg(l,a,o))});else{const o=a+\"\",l=i.statusText||`HTTP ${a} error`;t(new jg(l,a,o))}}else t(new E3(ck(e),e))}),PW=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(P3(s)?(a.headers=Object.assign({\"Content-Type\":\"application/json\"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),r)):a};function TW(e,t,r,s,a,i){return Fe(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,PW(t,s,a,i)).then(c=>{if(!c.ok)throw c;if(s!=null&&s.noResolveJson)return c;const d=c.headers.get(\"content-type\");return!d||!d.includes(\"application/json\")?{}:c.json()}).then(c=>o(c)).catch(c=>EW(c,l,s))})})}function Gn(e,t,r,s,a){return Fe(this,void 0,void 0,function*(){return TW(e,\"POST\",t,s,a,r)})}class T3{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\\/$/,\"\"),this.headers=Object.assign(Object.assign({},nN),r),this.fetch=Av(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Gn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}getIndex(t,r){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(kn(s))return{data:null,error:s};throw s}})}listIndexes(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Gn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(kn(s))return{data:null,error:s};throw s}})}}class A3{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\\/$/,\"\"),this.headers=Object.assign(Object.assign({},nN),r),this.fetch=Av(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error(\"Vector batch size must be between 1 and 500 items\");return{data:(yield Gn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}getVectors(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}listVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error(\"segmentCount must be between 1 and 16\");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Gn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}queryVectors(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}deleteVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error(\"Keys batch size must be between 1 and 500 items\");return{data:(yield Gn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}}class R3{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\\/$/,\"\"),this.headers=Object.assign(Object.assign({},nN),r),this.fetch=Av(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Gn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}getBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}listBuckets(){return Fe(this,arguments,void 0,function*(t={}){try{return{data:yield Gn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield Gn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}}class O3 extends R3{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new I3(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Fe(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Fe(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Fe(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Fe(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class I3 extends T3{constructor(t,r,s,a){super(t,r,a),this.vectorBucketName=s}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Fe(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Fe(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Fe(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Fe(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new D3(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class D3 extends A3{constructor(t,r,s,a,i){super(t,r,i),this.vectorBucketName=s,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Fe(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Fe(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Fe(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Fe(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Fe(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class AW extends vW{constructor(t,r={},s,a){super(t,r,s,a)}from(t){return new xW(this.url,this.headers,t,this.fetch)}get vectors(){return new O3(this.url+\"/vector\",{headers:this.headers,fetch:this.fetch})}get analytics(){return new C3(this.url+\"/iceberg\",this.headers,this.fetch)}}const RW=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:C3,StorageApiError:N3,StorageClient:AW,StorageError:Pf,StorageUnknownError:fx,StorageVectorsApiError:jg,StorageVectorsClient:O3,StorageVectorsError:aN,get StorageVectorsErrorCode(){return Mw},StorageVectorsUnknownError:E3,VectorBucketApi:R3,VectorBucketScope:I3,VectorDataApi:A3,VectorIndexApi:T3,VectorIndexScope:D3,isPlainObject:P3,isStorageError:Nr,isStorageVectorsError:kn,normalizeToFloat32:kW,resolveFetch:Av,resolveResponse:SW,validateVectorDimension:CW},Symbol.toStringTag,{value:\"Module\"})),OW=Yu(RW);var M3={},Rv={};Object.defineProperty(Rv,\"__esModule\",{value:!0});Rv.version=void 0;Rv.version=\"2.87.1\";(function(e){Object.defineProperty(e,\"__esModule\",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=Rv;let r=\"\";typeof Deno<\"u\"?r=\"deno\":typeof document<\"u\"?r=\"web\":typeof navigator<\"u\"&&navigator.product===\"ReactNative\"?r=\"react-native\":r=\"node\",e.DEFAULT_HEADERS={\"X-Client-Info\":`supabase-js-${r}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:\"public\"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:\"implicit\"},e.DEFAULT_REALTIME_OPTIONS={}})(M3);var L3={};(function(e){Object.defineProperty(e,\"__esModule\",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=a=>a?(...i)=>a(...i):(...i)=>fetch(...i);e.resolveFetch=t;const r=()=>Headers;e.resolveHeadersConstructor=r;const s=(a,i,o)=>{const l=(0,e.resolveFetch)(o),c=(0,e.resolveHeadersConstructor)();return async(d,u)=>{var h;const m=(h=await i())!==null&&h!==void 0?h:a;let g=new c(u==null?void 0:u.headers);return g.has(\"apikey\")||g.set(\"apikey\",a),g.has(\"Authorization\")||g.set(\"Authorization\",`Bearer ${m}`),l(d,Object.assign(Object.assign({},u),{headers:g}))}};e.fetchWithAuth=s})(L3);var Dl={};Object.defineProperty(Dl,\"__esModule\",{value:!0});Dl.isBrowser=void 0;Dl.uuid=IW;Dl.ensureTrailingSlash=$3;Dl.applySettingDefaults=MW;Dl.validateSupabaseUrl=LW;function IW(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(e){var t=Math.random()*16|0,r=e==\"x\"?t:t&3|8;return r.toString(16)})}function $3(e){return e.endsWith(\"/\")?e:e+\"/\"}const DW=()=>typeof window<\"u\";Dl.isBrowser=DW;function MW(e,t){var r,s;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:h}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>\"\"};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function LW(e){const t=e==null?void 0:e.trim();if(!t)throw new Error(\"supabaseUrl is required.\");if(!t.match(/^https?:\\/\\//i))throw new Error(\"Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.\");try{return new URL($3(t))}catch{throw Error(\"Invalid supabaseUrl: Provided URL is malformed.\")}}var Ov={};const F3=\"2.87.1\",Nd=30*1e3,Lw=3,pb=Lw*Nd,$W=\"http://localhost:9999\",FW=\"supabase.auth.token\",VW={\"X-Client-Info\":`gotrue-js/${F3}`},$w=\"X-Supabase-Api-Version\",V3={\"2024-01-01\":{timestamp:Date.parse(\"2024-01-01T00:00:00.0Z\"),name:\"2024-01-01\"}},zW=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,BW=10*60*1e3;let Ru=class extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name=\"AuthError\",this.status=r,this.code=s}};function We(e){return typeof e==\"object\"&&e!==null&&\"__isAuthError\"in e}let z3=class extends Ru{constructor(t,r,s){super(t,r,s),this.name=\"AuthApiError\",this.status=r,this.code=s}};function B3(e){return We(e)&&e.name===\"AuthApiError\"}let zo=class extends Ru{constructor(t,r){super(t),this.name=\"AuthUnknownError\",this.originalError=r}},xo=class extends Ru{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}},yn=class extends xo{constructor(){super(\"Auth session missing!\",\"AuthSessionMissingError\",400,void 0)}};function U3(e){return We(e)&&e.name===\"AuthSessionMissingError\"}let tc=class extends xo{constructor(){super(\"Auth session or user missing\",\"AuthInvalidTokenResponseError\",500,void 0)}},Zh=class extends xo{constructor(t){super(t,\"AuthInvalidCredentialsError\",400,void 0)}},em=class extends xo{constructor(t,r=null){super(t,\"AuthImplicitGrantRedirectError\",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function q3(e){return We(e)&&e.name===\"AuthImplicitGrantRedirectError\"}let Fw=class extends xo{constructor(t,r=null){super(t,\"AuthPKCEGrantCodeExchangeError\",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},px=class extends xo{constructor(t,r){super(t,\"AuthRetryableFetchError\",r,void 0)}};function Ng(e){return We(e)&&e.name===\"AuthRetryableFetchError\"}let Vw=class extends xo{constructor(t,r,s){super(t,\"AuthWeakPasswordError\",r,\"weak_password\"),this.reasons=s}};function UW(e){return We(e)&&e.name===\"AuthWeakPasswordError\"}let gx=class extends xo{constructor(t){super(t,\"AuthInvalidJwtError\",400,\"invalid_jwt\")}};const xx=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\".split(\"\"),dk=` \t\n\\r=`.split(\"\"),qW=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<dk.length;t+=1)e[dk[t].charCodeAt(0)]=-2;for(let t=0;t<xx.length;t+=1)e[xx[t].charCodeAt(0)]=t;return e})();function uk(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(xx[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(xx[s]),t.queuedBits-=6}}function H3(e,t,r){const s=qW[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character \"${String.fromCharCode(e)}\"`)}}function hk(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{KW(o,s,r)};for(let o=0;o<e.length;o+=1)H3(e.charCodeAt(o),a,i);return t.join(\"\")}function HW(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function WW(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}HW(s,t)}}function KW(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error(\"Invalid UTF-8 sequence\");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error(\"Invalid UTF-8 sequence\");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Zd(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)H3(e.charCodeAt(a),r,s);return new Uint8Array(t)}function GW(e){const t=[];return WW(e,r=>t.push(r)),new Uint8Array(t)}function hc(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>uk(a,r,s)),uk(null,r,s),t.join(\"\")}function QW(e){return Math.round(Date.now()/1e3)+e}function JW(){return Symbol(\"auth-callback\")}const Ps=()=>typeof window<\"u\"&&typeof document<\"u\",Jl={tested:!1,writable:!1},W3=()=>{if(!Ps())return!1;try{if(typeof globalThis.localStorage!=\"object\")return!1}catch{return!1}if(Jl.tested)return Jl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Jl.tested=!0,Jl.writable=!0}catch{Jl.tested=!0,Jl.writable=!1}return Jl.writable};function XW(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]===\"#\")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const K3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),YW=e=>typeof e==\"object\"&&e!==null&&\"status\"in e&&\"ok\"in e&&\"json\"in e&&typeof e.json==\"function\",_d=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Xl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Es=async(e,t)=>{await e.removeItem(t)};class Iv{constructor(){this.promise=new Iv.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Iv.promiseConstructor=Promise;function gb(e){const t=e.split(\".\");if(t.length!==3)throw new gx(\"Invalid JWT structure\");for(let s=0;s<t.length;s++)if(!zW.test(t[s]))throw new gx(\"JWT not in base64url format\");return{header:JSON.parse(hk(t[0])),payload:JSON.parse(hk(t[1])),signature:Zd(t[2]),raw:{header:t[0],payload:t[1]}}}async function ZW(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function eK(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){s(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function tK(e){return(\"0\"+e.toString(16)).substr(-2)}function rK(){const t=new Uint32Array(56);if(typeof crypto>\"u\"){const r=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~\",s=r.length;let a=\"\";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,tK).join(\"\")}async function sK(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest(\"SHA-256\",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join(\"\")}async function nK(e){if(!(typeof crypto<\"u\"&&typeof crypto.subtle<\"u\"&&typeof TextEncoder<\"u\"))return console.warn(\"WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256.\"),e;const r=await sK(e);return btoa(r).replace(/\\+/g,\"-\").replace(/\\//g,\"_\").replace(/=+$/,\"\")}async function hd(e,t,r=!1){const s=rK();let a=s;r&&(a+=\"/PASSWORD_RECOVERY\"),await _d(e,`${t}-code-verifier`,a);const i=await nK(s);return[i,s===i?\"plain\":\"s256\"]}const aK=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function iK(e){const t=e.headers.get($w);if(!t||!t.match(aK))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function oK(e){if(!e)throw new Error(\"Missing exp claim\");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error(\"JWT has expired\")}function lK(e){switch(e){case\"RS256\":return{name:\"RSASSA-PKCS1-v1_5\",hash:{name:\"SHA-256\"}};case\"ES256\":return{name:\"ECDSA\",namedCurve:\"P-256\",hash:{name:\"SHA-256\"}};default:throw new Error(\"Invalid alg claim\")}}const cK=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function md(e){if(!cK.test(e))throw new Error(\"@supabase/auth-js: Expected parameter to be UUID but is not\")}function xb(){const e={};return new Proxy(e,{get:(t,r)=>{if(r===\"__isUserNotAvailableProxy\")return!0;if(typeof r==\"symbol\"){const s=r.toString();if(s===\"Symbol(Symbol.toPrimitive)\"||s===\"Symbol(Symbol.toStringTag)\"||s===\"Symbol(util.inspect.custom)\")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the \"${r}\" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the \"${r}\" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the \"${r}\" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dK(e,t){return new Proxy(e,{get:(r,s,a)=>{if(s===\"__isInsecureUserWarningProxy\")return!0;if(typeof s==\"symbol\"){const i=s.toString();if(i===\"Symbol(Symbol.toPrimitive)\"||i===\"Symbol(Symbol.toStringTag)\"||i===\"Symbol(util.inspect.custom)\"||i===\"Symbol(nodejs.util.inspect.custom)\")return Reflect.get(r,s,a)}return!t.value&&typeof s==\"string\"&&(console.warn(\"Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.\"),t.value=!0),Reflect.get(r,s,a)}})}function mk(e){return JSON.parse(JSON.stringify(e))}const rc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),uK=[502,503,504];async function fk(e){var t;if(!YW(e))throw new px(rc(e),0);if(uK.includes(e.status))throw new px(rc(e),e.status);let r;try{r=await e.json()}catch(i){throw new zo(rc(i),i)}let s;const a=iK(e);if(a&&a.getTime()>=V3[\"2024-01-01\"].timestamp&&typeof r==\"object\"&&r&&typeof r.code==\"string\"?s=r.code:typeof r==\"object\"&&r&&typeof r.error_code==\"string\"&&(s=r.error_code),s){if(s===\"weak_password\")throw new Vw(rc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s===\"session_not_found\")throw new yn}else if(typeof r==\"object\"&&r&&typeof r.weak_password==\"object\"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o==\"string\",!0))throw new Vw(rc(r),e.status,r.weak_password.reasons);throw new z3(rc(r),e.status||500,s)}const hK=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e===\"GET\"?a:(a.headers=Object.assign({\"Content-Type\":\"application/json;charset=UTF-8\"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function mt(e,t,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[$w]||(i[$w]=V3[\"2024-01-01\"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?\"?\"+new URLSearchParams(o).toString():\"\",c=await mK(e,t,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function mK(e,t,r,s,a,i){const o=hK(t,s,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new px(rc(c),0)}if(l.ok||await fk(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await fk(c)}}function Ta(e){var t;let r=null;gK(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=QW(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function pk(e){const t=Ta(e);return!t.error&&e.weak_password&&typeof e.weak_password==\"object\"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message==\"string\"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s==\"string\",!0)&&(t.data.weak_password=e.weak_password),t}function Bo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function fK(e){return{data:e,error:null}}function pK(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=e,o=Il(e,[\"action_link\",\"email_otp\",\"hashed_token\",\"redirect_to\",\"verification_type\"]),l={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function gk(e){return e}function gK(e){return e.access_token&&e.refresh_token&&e.expires_in}const _g=[\"global\",\"local\",\"others\"];let iN=class{constructor({url:t=\"\",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=K3(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=_g[0]){if(_g.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_g.join(\", \")}`);try{return await mt(this.fetch,\"POST\",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await mt(this.fetch,\"POST\",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Bo})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=Il(t,[\"options\"]),a=Object.assign(Object.assign({},s),r);return\"newEmail\"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await mt(this.fetch,\"POST\",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:pK,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(We(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await mt(this.fetch,\"POST\",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Bo})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await mt(this.fetch,\"GET\",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:\"\",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:\"\"},xform:gk});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get(\"x-total-count\"))!==null&&o!==void 0?o:0,g=(c=(l=u.headers.get(\"link\"))===null||l===void 0?void 0:l.split(\",\"))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(\";\")[0].split(\"=\")[1].substring(0,1)),w=JSON.parse(v.split(\";\")[1].split(\"=\")[1]);d[`${w}Page`]=x}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(We(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){md(t);try{return await mt(this.fetch,\"GET\",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Bo})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){md(t);try{return await mt(this.fetch,\"PUT\",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Bo})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){md(t);try{return await mt(this.fetch,\"DELETE\",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Bo})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){md(t.userId);try{const{data:r,error:s}=await mt(this.fetch,\"GET\",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(We(r))return{data:null,error:r};throw r}}async _deleteFactor(t){md(t.userId),md(t.id);try{return{data:await mt(this.fetch,\"DELETE\",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await mt(this.fetch,\"GET\",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:\"\",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:\"\"},xform:gk});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get(\"x-total-count\"))!==null&&o!==void 0?o:0,g=(c=(l=u.headers.get(\"link\"))===null||l===void 0?void 0:l.split(\",\"))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(\";\")[0].split(\"=\")[1].substring(0,1)),w=JSON.parse(v.split(\";\")[1].split(\"=\")[1]);d[`${w}Page`]=x}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(We(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await mt(this.fetch,\"POST\",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(We(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await mt(this.fetch,\"GET\",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(We(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await mt(this.fetch,\"PUT\",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(We(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await mt(this.fetch,\"DELETE\",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await mt(this.fetch,\"POST\",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(We(r))return{data:null,error:r};throw r}}};function xk(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const sc={debug:!!(globalThis&&W3()&&globalThis.localStorage&&globalThis.localStorage.getItem(\"supabase.gotrue-js.locks.debug\")===\"true\")};class oN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let G3=class extends oN{};class xK extends oN{}async function Q3(e,t,r){sc.debug&&console.log(\"@supabase/gotrue-js: navigatorLock: acquire lock\",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),sc.debug&&console.log(\"@supabase/gotrue-js: navigatorLock acquire timed out\",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:\"exclusive\",ifAvailable:!0}:{mode:\"exclusive\",signal:s.signal},async a=>{if(a){sc.debug&&console.log(\"@supabase/gotrue-js: navigatorLock: acquired\",e,a.name);try{return await r()}finally{sc.debug&&console.log(\"@supabase/gotrue-js: navigatorLock: released\",e,a.name)}}else{if(t===0)throw sc.debug&&console.log(\"@supabase/gotrue-js: navigatorLock: not immediately available\",e),new G3(`Acquiring an exclusive Navigator LockManager lock \"${e}\" immediately failed`);if(sc.debug)try{const i=await globalThis.navigator.locks.query();console.log(\"@supabase/gotrue-js: Navigator LockManager state\",JSON.stringify(i,null,\"  \"))}catch(i){console.warn(\"@supabase/gotrue-js: Error when querying Navigator LockManager state\",i)}return console.warn(\"@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request\"),await r()}}))}const vk={};async function vK(e,t,r){var s;const a=(s=vk[e])!==null&&s!==void 0?s:Promise.resolve(),i=Promise.race([a.catch(()=>null),t>=0?new Promise((o,l)=>{setTimeout(()=>{l(new xK(`Acquring process lock with name \"${e}\" timed out`))},t)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await r());return vk[e]=i.catch(async o=>{if(o&&o.isAcquireTimeout)return await a,null;throw o}),await i}function yK(){if(typeof globalThis!=\"object\")try{Object.defineProperty(Object.prototype,\"__magic__\",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<\"u\"&&(self.globalThis=self)}}function J3(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address \"${e}\" is invalid.`);return e.toLowerCase()}function bK(e){return parseInt(e,16)}function wK(e){const t=new TextEncoder().encode(e);return\"0x\"+Array.from(t,s=>s.toString(16).padStart(2,\"0\")).join(\"\")}function jK(e){var t;const{chainId:r,domain:s,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:u,uri:h,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field \"chainId\". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field \"domain\". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field \"nonce\". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field \"uri\". URI must be provided.');if(m!==\"1\")throw new Error(`@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`\n`))throw new Error(`@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\\\n'. Provided value: ${e.statement}`)}const g=J3(e.address),v=u?`${u}://${s}`:s,x=e.statement?`${e.statement}\n`:\"\",w=`${v} wants you to sign in with your Ethereum account:\n${g}\n\n${x}`;let y=`URI: ${h}\nVersion: ${m}\nChain ID: ${r}${o?`\nNonce: ${o}`:\"\"}\nIssued At: ${i.toISOString()}`;if(a&&(y+=`\nExpiration Time: ${a.toISOString()}`),l&&(y+=`\nNot Before: ${l.toISOString()}`),c&&(y+=`\nRequest ID: ${c}`),d){let b=`\nResources:`;for(const N of d){if(!N||typeof N!=\"string\")throw new Error(`@supabase/auth-js: Invalid SIWE message field \"resources\". Every resource must be a valid string. Provided value: ${N}`);b+=`\n- ${N}`}y+=b}return`${w}\n${y}`}class Qr extends Error{constructor({message:t,code:r,cause:s,name:a}){var i;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=a??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:\"Unknown Error\",this.code=r}}class vx extends Qr{constructor(t,r){super({code:\"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY\",cause:r,message:t}),this.name=\"WebAuthnUnknownError\",this.originalError=r}}function NK({error:e,options:t}){var r,s,a;const{publicKey:i}=t;if(!i)throw Error(\"options was missing required publicKey property\");if(e.name===\"AbortError\"){if(t.signal instanceof AbortSignal)return new Qr({message:\"Registration ceremony was sent an abort signal\",code:\"ERROR_CEREMONY_ABORTED\",cause:e})}else if(e.name===\"ConstraintError\"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Qr({message:\"Discoverable credentials were required but no available authenticator supported it\",code:\"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT\",cause:e});if(t.mediation===\"conditional\"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)===\"required\")return new Qr({message:\"User verification was required during automatic registration but it could not be performed\",code:\"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE\",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)===\"required\")return new Qr({message:\"User verification was required but no available authenticator supported it\",code:\"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT\",cause:e})}else{if(e.name===\"InvalidStateError\")return new Qr({message:\"The authenticator was previously registered\",code:\"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED\",cause:e});if(e.name===\"NotAllowedError\")return new Qr({message:e.message,code:\"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY\",cause:e});if(e.name===\"NotSupportedError\")return i.pubKeyCredParams.filter(l=>l.type===\"public-key\").length===0?new Qr({message:'No entry in pubKeyCredParams was of type \"public-key\"',code:\"ERROR_MALFORMED_PUBKEYCREDPARAMS\",cause:e}):new Qr({message:\"No available authenticator supported any of the specified pubKeyCredParams algorithms\",code:\"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG\",cause:e});if(e.name===\"SecurityError\"){const o=window.location.hostname;if(X3(o)){if(i.rp.id!==o)return new Qr({message:`The RP ID \"${i.rp.id}\" is invalid for this domain`,code:\"ERROR_INVALID_RP_ID\",cause:e})}else return new Qr({message:`${window.location.hostname} is an invalid domain`,code:\"ERROR_INVALID_DOMAIN\",cause:e})}else if(e.name===\"TypeError\"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Qr({message:\"User ID was not between 1 and 64 characters\",code:\"ERROR_INVALID_USER_ID_LENGTH\",cause:e})}else if(e.name===\"UnknownError\")return new Qr({message:\"The authenticator was unable to process the specified options, or could not create a new credential\",code:\"ERROR_AUTHENTICATOR_GENERAL_ERROR\",cause:e})}return new Qr({message:\"a Non-Webauthn related error has occurred\",code:\"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY\",cause:e})}function _K({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error(\"options was missing required publicKey property\");if(e.name===\"AbortError\"){if(t.signal instanceof AbortSignal)return new Qr({message:\"Authentication ceremony was sent an abort signal\",code:\"ERROR_CEREMONY_ABORTED\",cause:e})}else{if(e.name===\"NotAllowedError\")return new Qr({message:e.message,code:\"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY\",cause:e});if(e.name===\"SecurityError\"){const s=window.location.hostname;if(X3(s)){if(r.rpId!==s)return new Qr({message:`The RP ID \"${r.rpId}\" is invalid for this domain`,code:\"ERROR_INVALID_RP_ID\",cause:e})}else return new Qr({message:`${window.location.hostname} is an invalid domain`,code:\"ERROR_INVALID_DOMAIN\",cause:e})}else if(e.name===\"UnknownError\")return new Qr({message:\"The authenticator was unable to process the specified options, or could not create a new assertion signature\",code:\"ERROR_AUTHENTICATOR_GENERAL_ERROR\",cause:e})}return new Qr({message:\"a Non-Webauthn related error has occurred\",code:\"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY\",cause:e})}class SK{createNewAbortSignal(){if(this.controller){const r=new Error(\"Cancelling existing WebAuthn API call for new one\");r.name=\"AbortError\",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error(\"Manually cancelling existing WebAuthn API call\");t.name=\"AbortError\",this.controller.abort(t),this.controller=void 0}}}const kK=new SK;function CK(e){if(!e)throw new Error(\"Credential creation options are required\");if(typeof PublicKeyCredential<\"u\"&&\"parseCreationOptionsFromJSON\"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON==\"function\")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,a=Il(e,[\"challenge\",\"user\",\"excludeCredentials\"]),i=Zd(t).buffer,o=Object.assign(Object.assign({},r),{id:Zd(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(s&&s.length>0){l.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const d=s[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:Zd(d.id).buffer,type:d.type||\"public-key\",transports:d.transports})}}return l}function EK(e){if(!e)throw new Error(\"Credential request options are required\");if(typeof PublicKeyCredential<\"u\"&&\"parseRequestOptionsFromJSON\"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON==\"function\")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=Il(e,[\"challenge\",\"allowCredentials\"]),a=Zd(t).buffer,i=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Zd(l.id).buffer,type:l.type||\"public-key\",transports:l.transports})}}return i}function PK(e){var t;if(\"toJSON\"in e&&typeof e.toJSON==\"function\")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:hc(new Uint8Array(e.response.attestationObject)),clientDataJSON:hc(new Uint8Array(e.response.clientDataJSON))},type:\"public-key\",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function TK(e){var t;if(\"toJSON\"in e&&typeof e.toJSON==\"function\")return e.toJSON();const r=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:hc(new Uint8Array(a.authenticatorData)),clientDataJSON:hc(new Uint8Array(a.clientDataJSON)),signature:hc(new Uint8Array(a.signature)),userHandle:a.userHandle?hc(new Uint8Array(a.userHandle)):void 0},type:\"public-key\",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function X3(e){return e===\"localhost\"||/^([a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}$/i.test(e)}function yk(){var e,t;return!!(Ps()&&\"PublicKeyCredential\"in window&&window.PublicKeyCredential&&\"credentials\"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)==\"function\"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)==\"function\")}async function AK(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new vx(\"Browser returned unexpected credential type\",t)}:{data:null,error:new vx(\"Empty credential response\",t)}}catch(t){return{data:null,error:NK({error:t,options:e})}}}async function RK(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new vx(\"Browser returned unexpected credential type\",t)}:{data:null,error:new vx(\"Empty credential response\",t)}}catch(t){return{data:null,error:_K({error:t,options:e})}}}const OK={hints:[\"security-key\"],authenticatorSelection:{authenticatorAttachment:\"cross-platform\",requireResidentKey:!1,userVerification:\"preferred\",residentKey:\"discouraged\"},attestation:\"direct\"},IK={userVerification:\"preferred\",hints:[\"security-key\"],attestation:\"direct\"};function yx(...e){const t=a=>a!==null&&typeof a==\"object\"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(r(o))s[i]=o;else if(t(o)){const l=s[i];t(l)?s[i]=yx(l,o):s[i]=yx(o)}else s[i]=o}return s}function DK(e,t){return yx(OK,e,t||{})}function MK(e,t){return yx(IK,e,t||{})}class LK{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:\"webauthn\"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=a??kK.createNewAbortSignal();if(o.webauthn.type===\"create\"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${s}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case\"create\":{const d=DK(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:h}=await AK({publicKey:d,signal:c});return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case\"request\":{const d=MK(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:h}=await RK(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new zo(\"Unexpected error in challenge\",o)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<\"u\"?window.location.hostname:void 0,rpOrigins:s=typeof window<\"u\"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Ru(\"rpId is required for WebAuthn authentication\")};try{if(!yk())return{data:null,error:new zo(\"Browser does not support WebAuthn\",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:s,credential_response:c.credential_response}})}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new zo(\"Unexpected error in authenticate\",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<\"u\"?window.location.hostname:void 0,rpOrigins:s=typeof window<\"u\"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Ru(\"rpId is required for WebAuthn registration\")};try{if(!yk())return{data:null,error:new zo(\"Browser does not support WebAuthn\",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type===\"webauthn\"&&m.friendly_name===t&&m.status!==\"unverified\")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new zo(\"Unexpected error in register\",o)}}}}yK();const $K={url:$W,storageKey:FW,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:VW,flowType:\"implicit\",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function bk(e,t,r){return await r()}const fd={};let lN=class zw{get jwks(){var t,r;return(r=(t=fd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){fd[this.storageKey]=Object.assign(Object.assign({},fd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=fd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){fd[this.storageKey]=Object.assign(Object.assign({},fd[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},$K),t);if(this.storageKey=i.storageKey,this.instanceID=(r=zw.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,zw.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug==\"function\"&&(this.logger=i.debug),this.instanceID>0&&Ps()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new iN({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=K3(i.fetch),this.lock=i.lock||bk,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Ps()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Q3:this.lock=bk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new LK(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:W3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xk(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=xk(this.memoryStorage)),Ps()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error(\"Failed to create a new BroadcastChannel, multi-tab state changes will not be available\",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener(\"message\",async o=>{this._debug(\"received broadcast notification from other tab or client\",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${F3}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s=\"none\";if(Ps()&&(r=XW(window.location.href),this._isImplicitGrantCallback(r)?s=\"implicit\":await this._isPKCECallback(r)&&(s=\"pkce\")),Ps()&&this.detectSessionInUrl&&s!==\"none\"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug(\"#_initialize()\",\"error detecting session from URL\",i),q3(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c===\"identity_already_exists\"||c===\"identity_not_found\"||c===\"single_identity_not_deletable\")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug(\"#_initialize()\",\"detected session in URL\",o,\"redirect type\",l),await this._saveSession(o),setTimeout(async()=>{l===\"recovery\"?await this._notifyAllSubscribers(\"PASSWORD_RECOVERY\",o):await this._notifyAllSubscribers(\"SIGNED_IN\",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return We(r)?this._returnResult({error:r}):this._returnResult({error:new zo(\"Unexpected error during initialization\",r)})}finally{await this._handleVisibilityChange(),this._debug(\"#_initialize()\",\"end\")}}async signInAnonymously(t){var r,s,a;try{const i=await mt(this.fetch,\"POST\",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ta}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers(\"SIGNED_IN\",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(We(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,s,a;try{let i;if(\"email\"in t){const{email:u,password:h,options:m}=t;let g=null,v=null;this.flowType===\"pkce\"&&([g,v]=await hd(this.storage,this.storageKey)),i=await mt(this.fetch,\"POST\",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:Ta})}else if(\"phone\"in t){const{phone:u,password:h,options:m}=t;i=await mt(this.fetch,\"POST\",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:\"sms\",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ta})}else throw new Zh(\"You must provide either an email or phone number and a password\");const{data:o,error:l}=i;if(l||!o)return await Es(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers(\"SIGNED_IN\",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if(\"email\"in t){const{email:i,password:o,options:l}=t;r=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pk})}else if(\"phone\"in t){const{phone:i,password:o,options:l}=t;r=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pk})}else throw new Zh(\"You must provide either an email or phone number and a password\");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const i=new tc;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers(\"SIGNED_IN\",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(We(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case\"ethereum\":return await this.signInWithEthereum(t);case\"solana\":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain \"${r}\"`)}}async signInWithEthereum(t){var r,s,a,i,o,l,c,d,u,h,m;let g,v;if(\"message\"in t)g=t.message,v=t.signature;else{const{chain:x,wallet:w,statement:y,options:b}=t;let N;if(Ps())if(typeof w==\"object\")N=w;else{const A=window;if(\"ethereum\"in A&&typeof A.ethereum==\"object\"&&\"request\"in A.ethereum&&typeof A.ethereum.request==\"function\")N=A.ethereum;else throw new Error(\"@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.\")}else{if(typeof w!=\"object\"||!(b!=null&&b.url))throw new Error(\"@supabase/auth-js: Both wallet and url must be specified in non-browser environments.\");N=w}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),E=await N.request({method:\"eth_requestAccounts\"}).then(A=>A).catch(()=>{throw new Error(\"@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid\")});if(!E||E.length===0)throw new Error(\"@supabase/auth-js: No accounts available. Please ensure the wallet is connected.\");const k=J3(E[0]);let P=(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!P){const A=await N.request({method:\"eth_chainId\"});P=bK(A)}const C={domain:_.host,address:k,statement:y,uri:_.href,version:\"1\",chainId:P,nonce:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.resources};g=jK(C),v=await N.request({method:\"personal_sign\",params:[wK(g),k]})}try{const{data:x,error:w}=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:\"ethereum\",message:g,signature:v},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ta});if(w)throw w;if(!x||!x.session||!x.user){const y=new tc;return this._returnResult({data:{user:null,session:null},error:y})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers(\"SIGNED_IN\",x.session)),this._returnResult({data:Object.assign({},x),error:w})}catch(x){if(We(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(t){var r,s,a,i,o,l,c,d,u,h,m,g;let v,x;if(\"message\"in t)v=t.message,x=t.signature;else{const{chain:w,wallet:y,statement:b,options:N}=t;let _;if(Ps())if(typeof y==\"object\")_=y;else{const k=window;if(\"solana\"in k&&typeof k.solana==\"object\"&&(\"signIn\"in k.solana&&typeof k.solana.signIn==\"function\"||\"signMessage\"in k.solana&&typeof k.solana.signMessage==\"function\"))_=k.solana;else throw new Error(\"@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.\")}else{if(typeof y!=\"object\"||!(N!=null&&N.url))throw new Error(\"@supabase/auth-js: Both wallet and url must be specified in non-browser environments.\");_=y}const E=new URL((r=N==null?void 0:N.url)!==null&&r!==void 0?r:window.location.href);if(\"signIn\"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:\"1\",domain:E.host,uri:E.href}),b?{statement:b}:null));let P;if(Array.isArray(k)&&k[0]&&typeof k[0]==\"object\")P=k[0];else if(k&&typeof k==\"object\"&&\"signedMessage\"in k&&\"signature\"in k)P=k;else throw new Error(\"@supabase/auth-js: Wallet method signIn() returned unrecognized value\");if(\"signedMessage\"in P&&\"signature\"in P&&(typeof P.signedMessage==\"string\"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)v=typeof P.signedMessage==\"string\"?P.signedMessage:new TextDecoder().decode(P.signedMessage),x=P.signature;else throw new Error(\"@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields\")}else{if(!(\"signMessage\"in _)||typeof _.signMessage!=\"function\"||!(\"publicKey\"in _)||typeof _!=\"object\"||!_.publicKey||!(\"toBase58\"in _.publicKey)||typeof _.publicKey.toBase58!=\"function\")throw new Error(\"@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API\");v=[`${E.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?[\"\",b,\"\"]:[\"\"],\"Version: 1\",`URI: ${E.href}`,`Issued At: ${(a=(s=N==null?void 0:N.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=N==null?void 0:N.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((h=(u=N==null?void 0:N.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?[\"Resources\",...N.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`\n`);const k=await _.signMessage(new TextEncoder().encode(v),\"utf8\");if(!k||!(k instanceof Uint8Array))throw new Error(\"@supabase/auth-js: Wallet signMessage() API returned an recognized value\");x=k}}try{const{data:w,error:y}=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:\"solana\",message:v,signature:hc(x)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ta});if(y)throw y;if(!w||!w.session||!w.user){const b=new tc;return this._returnResult({data:{user:null,session:null},error:b})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers(\"SIGNED_IN\",w.session)),this._returnResult({data:Object.assign({},w),error:y})}catch(w){if(We(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const r=await Xl(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??\"\").split(\"/\");try{const{data:i,error:o}=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Ta});if(await Es(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new tc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers(\"SIGNED_IN\",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=t,l=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ta}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const u=new tc;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers(\"SIGNED_IN\",c.session)),this._returnResult({data:c,error:d})}catch(r){if(We(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,a,i,o;try{if(\"email\"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType===\"pkce\"&&([d,u]=await hd(this.storage,this.storageKey));const{error:h}=await mt(this.fetch,\"POST\",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if(\"phone\"in t){const{phone:l,options:c}=t,{data:d,error:u}=await mt(this.fetch,\"POST\",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:\"sms\"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u})}throw new Zh(\"You must provide either an email or phone number.\")}catch(l){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,s;try{let a,i;\"options\"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await mt(this.fetch,\"POST\",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ta});if(l)throw l;if(!o)throw new Error(\"An error occurred on token verification.\");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type==\"recovery\"?\"PASSWORD_RECOVERY\":\"SIGNED_IN\",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(We(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,s,a,i,o;try{let l=null,c=null;this.flowType===\"pkce\"&&([l,c]=await hd(this.storage,this.storageKey));const d=await mt(this.fetch,\"POST\",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},\"providerId\"in t?{provider_id:t.providerId}:null),\"domain\"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:fK});return!((i=d.data)===null||i===void 0)&&i.url&&Ps()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new yn;const{error:a}=await mt(this.fetch,\"GET\",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(We(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if(\"email\"in t){const{email:s,type:a,options:i}=t,{error:o}=await mt(this.fetch,\"POST\",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if(\"phone\"in t){const{phone:s,type:a,options:i}=t,{data:o,error:l}=await mt(this.fetch,\"POST\",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Zh(\"You must provide either an email or phone number and a type\")}catch(r){if(We(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug(\"#_acquireLock\",\"begin\",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug(\"#_acquireLock\",\"lock acquired for storage key\",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug(\"#_acquireLock\",\"lock released for storage key\",this.storageKey),this.lockAcquired=!1}})}finally{this._debug(\"#_acquireLock\",\"end\")}}async _useSession(t){this._debug(\"#_useSession\",\"begin\");try{const r=await this.__loadSession();return await t(r)}finally{this._debug(\"#_useSession\",\"end\")}}async __loadSession(){this._debug(\"#__loadSession()\",\"begin\"),this.lockAcquired||this._debug(\"#__loadSession()\",\"used outside of an acquired lock!\",new Error().stack);try{let t=null;const r=await Xl(this.storage,this.storageKey);if(this._debug(\"#getSession()\",\"session from storage\",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug(\"#getSession()\",\"session from storage is not valid\"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<pb:!1;if(this._debug(\"#__loadSession()\",`session has${s?\"\":\" not\"} expired`,\"expires_at\",t.expires_at),!s){if(this.userStorage){const o=await Xl(this.userStorage,this.storageKey+\"-user\");o!=null&&o.user?t.user=o.user:t.user=xb()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=dK(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug(\"#__loadSession()\",\"end\")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await mt(this.fetch,\"GET\",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Bo}):await this._useSession(async r=>{var s,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yn}:await mt(this.fetch,\"GET\",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Bo})})}catch(r){if(We(r))return U3(r)&&(await this._removeSession(),await Es(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new yn;const o=a.session;let l=null,c=null;this.flowType===\"pkce\"&&t.email!=null&&([l,c]=await hd(this.storage,this.storageKey));const{data:d,error:u}=await mt(this.fetch,\"PUT\",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Bo});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers(\"USER_UPDATED\",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new yn;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=gb(t.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:\"bearer\",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers(\"SIGNED_IN\",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(We(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new yn;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(We(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ps())throw new em(\"No browser detected.\");if(t.error||t.error_description||t.error_code)throw new em(t.error_description||\"Error in URL with unspecified error_description\",{error:t.error||\"unspecified_error\",code:t.error_code||\"unspecified_code\"});switch(r){case\"implicit\":if(this.flowType===\"pkce\")throw new Fw(\"Not a valid PKCE flow url.\");break;case\"pkce\":if(this.flowType===\"implicit\")throw new em(\"Not a valid implicit grant flow url.\");break;default:}if(r===\"pkce\"){if(this._debug(\"#_initialize()\",\"begin\",\"is PKCE flow\",!0),!t.code)throw new Fw(\"No code detected.\");const{data:b,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const _=new URL(window.location.href);return _.searchParams.delete(\"code\"),window.history.replaceState(window.history.state,\"\",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new em(\"No session defined in URL\");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;c&&(m=parseInt(c));const g=m-u;g*1e3<=Nd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const v=m-h;u-v>=120?console.warn(\"@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale\",v,m,u):u-v<0&&console.warn(\"@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew\",v,m,u);const{data:x,error:w}=await this._getUser(i);if(w)throw w;const y={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:d,user:x.user};return window.location.hash=\"\",this._debug(\"#_getSessionFromURL()\",\"clearing window.location.hash\"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(s){if(We(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Xl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:\"global\"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:\"global\"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(B3(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!==\"others\"&&(await this._removeSession(),await Es(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=JW(),s={id:r,callback:t,unsubscribe:()=>{this._debug(\"#unsubscribe()\",\"state change callback with id removed\",r),this.stateChangeEmitters.delete(r)}};return this._debug(\"#onAuthStateChange()\",\"registered callback with id\",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback(\"INITIAL_SESSION\",i)),this._debug(\"INITIAL_SESSION\",\"callback id\",t,\"session\",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback(\"INITIAL_SESSION\",null)),this._debug(\"INITIAL_SESSION\",\"callback id\",t,\"error\",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType===\"pkce\"&&([s,a]=await hd(this.storage,this.storageKey,!0));try{return await mt(this.fetch,\"POST\",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(We(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return\"token\"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:m}=i;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await mt(this.fetch,\"GET\",g,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Ps()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(We(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:d,nonce:u}=t,h=await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:l,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ta}),{data:m,error:g}=h;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new tc}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers(\"USER_UPDATED\",m.session)),this._returnResult({data:m,error:g}))}catch(a){if(await Es(this.storage,`${this.storageKey}-code-verifier`),We(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await mt(this.fetch,\"DELETE\",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(We(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,\"begin\");try{const s=Date.now();return await eK(async a=>(a>0&&await ZW(200*Math.pow(2,a-1)),this._debug(r,\"refreshing attempt\",a),await mt(this.fetch,\"POST\",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ta})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Ng(i)&&Date.now()+o-s<Nd})}catch(s){if(this._debug(r,\"error\",s),We(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,\"end\")}}_isValidSession(t){return typeof t==\"object\"&&t!==null&&\"access_token\"in t&&\"refresh_token\"in t&&\"expires_at\"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug(\"#_handleProviderSignIn()\",\"provider\",t,\"options\",r,\"url\",s),Ps()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s=\"#_recoverAndRefresh()\";this._debug(s,\"begin\");try{const a=await Xl(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Xl(this.userStorage,this.storageKey+\"-user\");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await _d(this.userStorage,this.storageKey+\"-user\",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:xb()}else if(a&&!a.user&&!a.user){const o=await Xl(this.storage,this.storageKey+\"-user\");o&&(o!=null&&o.user)?(a.user=o.user,await Es(this.storage,this.storageKey+\"-user\"),await _d(this.storage,this.storageKey,a)):a.user=xb()}if(this._debug(s,\"session from storage\",a),!this._isValidSession(a)){this._debug(s,\"session is not valid\"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<pb;if(this._debug(s,`session has${i?\"\":\" not\"} expired with margin of ${pb}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Ng(o)||(this._debug(s,\"refresh failed with a non-retryable error, removing the session\",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers(\"SIGNED_IN\",a)):this._debug(s,\"could not get user data, skipping SIGNED_IN notification\")}catch(o){console.error(\"Error getting user data:\",o),this._debug(s,\"error getting user data, skipping SIGNED_IN notification\",o)}else await this._notifyAllSubscribers(\"SIGNED_IN\",a)}catch(a){this._debug(s,\"error\",a),console.error(a);return}finally{this._debug(s,\"end\")}}async _callRefreshToken(t){var r,s;if(!t)throw new yn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,\"begin\");try{this.refreshingDeferred=new Iv;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new yn;await this._saveSession(i.session),await this._notifyAllSubscribers(\"TOKEN_REFRESHED\",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,\"error\",i),We(i)){const o={data:null,error:i};return Ng(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,\"end\")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,\"begin\",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,\"end\")}}async _saveSession(t){this._debug(\"#_saveSession()\",t),this.suppressGetSessionWarning=!0,await Es(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage)","path":null,"size_bytes":360000,"size_tokens":null},"client/src/components/install-prompt/InstallPrompt.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { Share, Download, X, Smartphone, Monitor } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { isNative } from '@/lib/config';\n\nexport function InstallPrompt() {\n  const [deferredPrompt, setDeferredPrompt] = useState<any>(null);\n  const [showPrompt, setShowPrompt] = useState(false);\n  const [platform, setPlatform] = useState<'android' | 'ios' | 'desktop' | 'unknown'>('unknown');\n\n  useEffect(() => {\n    // Don't show if already in native app\n    if (isNative) return;\n\n    // Detect if already installed/standalone\n    const isStandalone = window.matchMedia('(display-mode: standalone)').matches \n      || (window.navigator as any).standalone \n      || document.referrer.includes('android-app://');\n\n    if (isStandalone) return;\n    \n    // Platform detection\n    const ua = window.navigator.userAgent.toLowerCase();\n    const isIOS = /iphone|ipad|ipod/.test(ua);\n    const isAndroid = /android/.test(ua);\n    \n    // Disable for Android as requested\n    if (isAndroid) return;\n    \n    if (isIOS) setPlatform('ios');\n    else if (isAndroid) setPlatform('android');\n    else setPlatform('desktop');\n\n    // Handle PWA install prompt (Chrome/Android/Desktop)\n    const handleBeforeInstallPrompt = (e: any) => {\n      e.preventDefault();\n      setDeferredPrompt(e);\n      // Show prompt after a short delay\n      setTimeout(() => setShowPrompt(true), 3000);\n    };\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n\n    // For iOS, we show the prompt manually since beforeinstallprompt isn't supported\n    if (isIOS) {\n      setTimeout(() => setShowPrompt(true), 5000);\n    }\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    };\n  }, []);\n\n  const handleInstall = async () => {\n    if (!deferredPrompt) return;\n    \n    deferredPrompt.prompt();\n    const { outcome } = await deferredPrompt.userChoice;\n    \n    if (outcome === 'accepted') {\n      setDeferredPrompt(null);\n      setShowPrompt(false);\n    }\n  };\n\n  if (!showPrompt) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ y: 100, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        exit={{ y: 100, opacity: 0 }}\n        className=\"fixed bottom-20 left-4 right-4 z-[100] md:bottom-8 md:right-8 md:left-auto md:w-96\"\n      >\n        <Card className=\"border-none shadow-2xl bg-card/95 backdrop-blur-xl rounded-3xl overflow-hidden border border-primary/20\">\n          <CardContent className=\"p-6\">\n            <button \n              onClick={() => setShowPrompt(false)}\n              className=\"absolute top-4 right-4 text-muted-foreground hover:text-foreground\"\n            >\n              <X className=\"h-5 w-5\" />\n            </button>\n\n            <div className=\"flex items-start gap-4\">\n              <div className=\"h-12 w-12 rounded-2xl bg-primary/10 flex items-center justify-center shrink-0\">\n                {platform === 'desktop' ? (\n                  <Monitor className=\"h-6 w-6 text-primary\" />\n                ) : (\n                  <Smartphone className=\"h-6 w-6 text-primary\" />\n                )}\n              </div>\n              \n              <div className=\"flex-1 pr-6\">\n                <h3 className=\"font-bold text-lg leading-tight mb-1\">\n                  Instalar BíbliaFS\n                </h3>\n                <p className=\"text-sm text-muted-foreground mb-4\">\n                  Tenha acesso rápido e offline instalando o aplicativo em seu dispositivo.\n                </p>\n\n                {platform === 'ios' ? (\n                  <div className=\"space-y-4 bg-primary/5 p-4 rounded-2xl border border-primary/10\">\n                    <p className=\"font-bold text-sm text-primary flex items-center gap-2\">\n                      Passos para instalar no iPhone:\n                    </p>\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"h-6 w-6 rounded-full bg-primary/20 flex items-center justify-center text-xs font-bold text-primary shrink-0\">1</div>\n                        <p className=\"text-sm\">Toque no botão <Share className=\"h-4 w-4 text-blue-500 inline mx-1\" /> (Compartilhar) na barra inferior do Safari.</p>\n                      </div>\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"h-6 w-6 rounded-full bg-primary/20 flex items-center justify-center text-xs font-bold text-primary shrink-0\">2</div>\n                        <p className=\"text-sm\">Role a lista para baixo e toque em <span className=\"font-bold\">\"Adicionar à Tela de Início\"</span>.</p>\n                      </div>\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"h-6 w-6 rounded-full bg-primary/20 flex items-center justify-center text-xs font-bold text-primary shrink-0\">3</div>\n                        <p className=\"text-sm\">Toque em <span className=\"font-bold text-primary\">\"Adicionar\"</span> no canto superior direito.</p>\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <Button \n                    onClick={handleInstall}\n                    className=\"w-full rounded-2xl h-12 font-bold shadow-lg shadow-primary/20\"\n                  >\n                    <Download className=\"h-4 w-4 mr-2\" />\n                    Instalar Agora\n                  </Button>\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","path":null,"size_bytes":5797,"size_tokens":null},"android/app/src/main/assets/public/cordova.js":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"client/src/components/GamificationBanner.tsx":{"content":"import { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Flame, \n  Trophy, \n  Star, \n  Target,\n  ChevronRight,\n  Zap,\n  Crown,\n  Sparkles\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { motion } from \"framer-motion\";\nimport { getLevelByXp, getXpProgressInLevel } from \"@/lib/gamification-levels\";\n\ninterface Achievement {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  category: string;\n  xpReward: number;\n}\n\ninterface UserAchievement {\n  id: string;\n  achievementId: string;\n  isUnlocked: boolean;\n  progress: number;\n  unlockedAt?: string;\n  achievement: Achievement;\n}\n\nexport function GamificationBanner() {\n  const { user } = useAuth();\n\n  const { data: userAchievements } = useQuery<UserAchievement[]>({\n    queryKey: [\"/api/achievements/user\"],\n    enabled: !!user,\n  });\n\n  if (!user) return null;\n\n  const streak = user.readingStreak || 0;\n  const xp = user.experiencePoints || 0;\n\n  // Use detailed 50-level system - imported at top of file\n  const detailedLevel = getLevelByXp(xp);\n  const xpProgress = getXpProgressInLevel(xp, detailedLevel.level);\n  \n  // Color gradients based on level tiers (soft navy blue palette)\n  const getLevelGradient = (level: number) => {\n    if (level <= 5) return \"from-slate-400 to-slate-500\";\n    if (level <= 10) return \"from-emerald-400 to-emerald-600\";\n    if (level <= 20) return \"from-blue-400 to-blue-600\";\n    if (level <= 30) return \"from-amber-400 to-amber-600\";\n    if (level <= 40) return \"from-slate-500 to-slate-700\";\n    return \"from-amber-500 to-amber-700\";\n  };\n  \n  const getLevelIcon = (level: number) => {\n    if (level <= 5) return Star;\n    if (level <= 10) return Sparkles;\n    if (level <= 20) return Crown;\n    if (level <= 30) return Crown;\n    if (level <= 40) return Trophy;\n    return Trophy;\n  };\n  \n  const progressToNextLevel = xpProgress.percent;\n  const LevelIcon = getLevelIcon(detailedLevel.level);\n  const currentLevelGradient = getLevelGradient(detailedLevel.level);\n\n  const unlockedCount = userAchievements?.filter(a => a.isUnlocked).length || 0;\n  const totalAchievements = userAchievements?.length || 0;\n\n  const recentAchievements = userAchievements\n    ?.filter(a => a.isUnlocked)\n    .sort((a, b) => new Date(b.unlockedAt || 0).getTime() - new Date(a.unlockedAt || 0).getTime())\n    .slice(0, 3);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"glass rounded-2xl p-4 sm:p-5\"\n    >\n      <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4 sm:gap-6\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"relative\">\n            <div className={`p-2.5 rounded-xl bg-gradient-to-br ${streak > 0 ? \"from-orange-400 to-red-500\" : \"from-slate-300 to-slate-400 dark:from-slate-600 dark:to-slate-700\"} shadow-md`}>\n              <Flame className=\"h-5 w-5 text-white\" />\n            </div>\n            {streak >= 7 && (\n              <div className=\"absolute -top-1 -right-1 h-4 w-4 rounded-full bg-amber-400 flex items-center justify-center shadow-sm\">\n                <Zap className=\"h-2.5 w-2.5 text-amber-900\" />\n              </div>\n            )}\n          </div>\n          <div>\n            <p className=\"text-2xl font-bold text-foreground\" data-testid=\"text-streak-value\">{streak}</p>\n            <p className=\"text-[10px] text-muted-foreground font-medium uppercase tracking-wide\">Dias seguidos</p>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <div className={`p-2.5 rounded-xl bg-gradient-to-br ${currentLevelGradient} shadow-md`}>\n            <LevelIcon className=\"h-5 w-5 text-white\" />\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center justify-between gap-2\">\n              <p className=\"font-semibold text-sm text-foreground truncate\" data-testid=\"text-level-name\">{detailedLevel.title}</p>\n              <span className=\"text-[10px] text-muted-foreground font-medium\">{xp} XP</span>\n            </div>\n            <Progress value={progressToNextLevel} className=\"h-1.5 mt-1\" />\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-amber-400 to-amber-600 shadow-md\">\n            <Trophy className=\"h-5 w-5 text-white\" />\n          </div>\n          <div>\n            <p className=\"text-2xl font-bold text-foreground\" data-testid=\"text-achievements-count\">{unlockedCount}<span className=\"text-base text-muted-foreground font-normal\">/{totalAchievements}</span></p>\n            <p className=\"text-[10px] text-muted-foreground font-medium uppercase tracking-wide\">Conquistas</p>\n          </div>\n        </div>\n\n        <div className=\"flex items-center justify-between gap-2\">\n          <div className=\"flex gap-1.5\">\n            {recentAchievements?.slice(0, 3).map((ua) => (\n              <div\n                key={ua.id}\n                className=\"h-8 w-8 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center text-white text-xs font-bold shadow-md ring-2 ring-background\"\n                title={ua.achievement.name}\n              >\n                {ua.achievement.icon || <Trophy className=\"h-3.5 w-3.5\" />}\n              </div>\n            ))}\n            {(!recentAchievements || recentAchievements.length === 0) && (\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                <Target className=\"h-4 w-4\" />\n                <span className=\"text-xs\">Continue lendo!</span>\n              </div>\n            )}\n          </div>\n          <Link href=\"/achievements\">\n            <Button variant=\"ghost\" size=\"sm\" className=\"text-primary rounded-full px-3\" data-testid=\"button-view-achievements\">\n              <span className=\"hidden sm:inline text-xs\">Ver todas</span>\n              <ChevronRight className=\"h-4 w-4 sm:ml-1\" />\n            </Button>\n          </Link>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n","path":null,"size_bytes":6229,"size_tokens":null},"client/src/lib/env-config.ts":{"content":"// Environment configuration for Capacitor Android builds\n// These values are used as fallbacks when environment variables are not available\n// Note: These are PUBLIC keys (anon key, publishable key) that are safe for client-side use\n\nconst envDefaults = {\n  VITE_SUPABASE_URL: \"https://olvumxgyoazdftdyasmx.supabase.co\",\n  VITE_SUPABASE_ANON_KEY: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9sdnVteGd5b2F6ZGZ0ZHlhc214Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2NzI1MzQsImV4cCI6MjA4MTI0ODUzNH0.HHIeS1T7PRyUrYF0yDkxAL9GktTPUFF2o9F99fx5vlI\",\n  VITE_STRIPE_PUBLIC_KEY: \"pk_live_51SdzfMLxcUHgdisLzNsUtr1jq8xohiZHoX4maFI9ZOFGiCihZLO3BC3XOMj7kMgwC4HDVmyAXnP0iQGOSC9xNXx900BwbqTRuc\",\n  VITE_STRIPE_MONTHLY_PRICE_ID: \"price_1SoqxJLxcUHgdisLSjzqs9kP\",\n  VITE_STRIPE_YEARLY_PRICE_ID: \"price_1SoqxOLxcUHgdisLsfxoxyj7\",\n  VITE_STRIPE_PREMIUM_PLUS_PRICE_ID: \"price_1SoqxQLxcUHgdisLPywByiTk\",\n  VITE_STRIPE_DONATION_10_PRICE_ID: \"price_1SoqxTLxcUHgdisL2oKZfTFV\",\n  VITE_STRIPE_DONATION_25_PRICE_ID: \"price_1SoqxWLxcUHgdisLvXAn7mar\",\n  VITE_STRIPE_DONATION_50_PRICE_ID: \"price_1SoqxYLxcUHgdisLJgKRDloE\",\n  VITE_STRIPE_DONATION_100_PRICE_ID: \"price_1SoqxZLxcUHgdisLYgHEFqgT\",\n  VITE_STRIPE_DONATION_CUSTOM_PRICE_ID: \"price_1SoqxbLxcUHgdisLbln2YRd7\",\n  VITE_APP_URL: \"https://bibliafs.com.br\",\n  VITE_GOOGLE_CLIENT_ID: \"\",\n};\n\n// Get environment variable with fallback to default\nexport function getEnv(key: keyof typeof envDefaults): string {\n  // Try to get from import.meta.env first\n  const envValue = (import.meta as any).env?.[key];\n  if (envValue && envValue !== '' && !envValue.includes('import.meta')) {\n    return envValue;\n  }\n  // Fallback to defaults for Capacitor builds\n  return envDefaults[key];\n}\n\n// Export individual values for convenience\nexport const SUPABASE_URL = getEnv('VITE_SUPABASE_URL');\nexport const SUPABASE_ANON_KEY = getEnv('VITE_SUPABASE_ANON_KEY');\nexport const STRIPE_PUBLIC_KEY = getEnv('VITE_STRIPE_PUBLIC_KEY');\nexport const APP_URL = getEnv('VITE_APP_URL');\nexport const STRIPE_MONTHLY_PRICE_ID = getEnv('VITE_STRIPE_MONTHLY_PRICE_ID');\nexport const STRIPE_YEARLY_PRICE_ID = getEnv('VITE_STRIPE_YEARLY_PRICE_ID');\nexport const STRIPE_PREMIUM_PLUS_PRICE_ID = getEnv('VITE_STRIPE_PREMIUM_PLUS_PRICE_ID');\nexport const GOOGLE_CLIENT_ID = getEnv('VITE_GOOGLE_CLIENT_ID');\n","path":null,"size_bytes":2310,"size_tokens":null},"android/app/src/main/assets/public/assets/index-0_GTpkvp.css":{"content":"*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: \"\"}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:Inter,var(--font-sans);font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--font-mono);font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}*{--tw-border-opacity: 1;border-color:hsl(var(--border) / var(--tw-border-opacity, 1))}body{--tw-bg-opacity: 1;background-color:hsl(var(--background) / var(--tw-bg-opacity, 1));font-family:Inter,var(--font-sans);--tw-text-opacity: 1;color:hsl(var(--foreground) / var(--tw-text-opacity, 1));-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:linear-gradient(160deg,hsl(var(--background)),#f8f6f1 40%,#fbf8f4)}.dark body{background:linear-gradient(160deg,hsl(var(--background)),#14181f 40%,#151a23)}.glass{border-width:1px;border-color:#fff6;background-color:#fff9;--tw-backdrop-blur: blur(24px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.glass.toggle-elevate:before{top:-1px;right:-1px;bottom:-1px;left:-1px}.glass.hover-elevate:not(.no-hover-interaction-elevate):after,.glass.active-elevate:not(.no-active-interaction-elevate):after,.glass.hover-elevate-2:not(.no-hover-interaction-elevate):after,.glass.active-elevate-2:not(.no-active-interaction-elevate):after{top:-1px;right:-1px;bottom:-1px;left:-1px}.glass:is(.dark *){border-color:#33415566;background-color:#0f172a80}.glass{box-shadow:0 8px 32px #0000000f}.verse-hero{position:relative;overflow:hidden;border-radius:1.5rem;background:linear-gradient(145deg,#fbf8f4,#f7f4ee)}.dark .verse-hero{background:linear-gradient(145deg,#1c212c,#171c26)}.verse-hero:before{content:\"\";position:absolute;top:0;right:0;bottom:0;left:0;background:url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");opacity:.5}.user-avatar-ring{position:relative;border-radius:9999px;padding:.125rem;background:conic-gradient(from 0deg,hsl(220 45% 48%) var(--xp-progress, 0%),hsl(40 20% 85%) var(--xp-progress, 0%))}.dark .user-avatar-ring{background:conic-gradient(from 0deg,hsl(38 85% 55%) var(--xp-progress, 0%),hsl(220 20% 25%) var(--xp-progress, 0%))}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em}.prose :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-links);text-decoration:underline;font-weight:500}.prose :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(a strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal;margin-top:1.25em;margin-bottom:1.25em;padding-inline-start:1.625em}.prose :where(ol[type=A]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=A s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=I]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=I s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=\"1\"]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal}.prose :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:disc;margin-top:1.25em;margin-bottom:1.25em;padding-inline-start:1.625em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{font-weight:400;color:var(--tw-prose-counters)}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.25em}.prose :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-top:3em;margin-bottom:3em}.prose :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:500;font-style:italic;color:var(--tw-prose-quotes);border-inline-start-width:.25rem;border-inline-start-color:var(--tw-prose-quote-borders);quotes:\"“\"\"”\"\"‘\"\"’\";margin-top:1.6em;margin-bottom:1.6em;padding-inline-start:1em}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}.prose :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.prose :where(h1 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:900;color:inherit}.prose :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose :where(h2 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:800;color:inherit}.prose :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.prose :where(h3 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:700;color:inherit}.prose :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.prose :where(h4 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:700;color:inherit}.prose :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){display:block;margin-top:2em;margin-bottom:2em}.prose :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:500;font-family:inherit;color:var(--tw-prose-kbd);box-shadow:0 0 0 1px rgb(var(--tw-prose-kbd-shadows) / 10%),0 3px rgb(var(--tw-prose-kbd-shadows) / 10%);font-size:.875em;border-radius:.3125rem;padding-top:.1875em;padding-inline-end:.375em;padding-bottom:.1875em;padding-inline-start:.375em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-code);font-weight:600;font-size:.875em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:\"`\"}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:\"`\"}.prose :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h1 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.875em}.prose :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(h4 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-pre-code);background-color:var(--tw-prose-pre-bg);overflow-x:auto;font-weight:400;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding-top:.8571429em;padding-inline-end:1.1428571em;padding-bottom:.8571429em;padding-inline-start:1.1428571em}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:none}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}.prose :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){width:100%;table-layout:auto;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}.prose :where(thead):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-th-borders)}.prose :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;vertical-align:bottom;padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-inline-start:.5714286em}.prose :where(tbody tr):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-td-borders)}.prose :where(tbody tr:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:0}.prose :where(tbody td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:baseline}.prose :where(tfoot):not(:where([class~=not-prose],[class~=not-prose] *)){border-top-width:1px;border-top-color:var(--tw-prose-th-borders)}.prose :where(tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:top}.prose :where(th,td):not(:where([class~=not-prose],[class~=not-prose] *)){text-align:start}.prose :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-captions);font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose{--tw-prose-body: #374151;--tw-prose-headings: #111827;--tw-prose-lead: #4b5563;--tw-prose-links: #111827;--tw-prose-bold: #111827;--tw-prose-counters: #6b7280;--tw-prose-bullets: #d1d5db;--tw-prose-hr: #e5e7eb;--tw-prose-quotes: #111827;--tw-prose-quote-borders: #e5e7eb;--tw-prose-captions: #6b7280;--tw-prose-kbd: #111827;--tw-prose-kbd-shadows: 17 24 39;--tw-prose-code: #111827;--tw-prose-pre-code: #e5e7eb;--tw-prose-pre-bg: #1f2937;--tw-prose-th-borders: #d1d5db;--tw-prose-td-borders: #e5e7eb;--tw-prose-invert-body: #d1d5db;--tw-prose-invert-headings: #fff;--tw-prose-invert-lead: #9ca3af;--tw-prose-invert-links: #fff;--tw-prose-invert-bold: #fff;--tw-prose-invert-counters: #9ca3af;--tw-prose-invert-bullets: #4b5563;--tw-prose-invert-hr: #374151;--tw-prose-invert-quotes: #f3f4f6;--tw-prose-invert-quote-borders: #374151;--tw-prose-invert-captions: #9ca3af;--tw-prose-invert-kbd: #fff;--tw-prose-invert-kbd-shadows: 255 255 255;--tw-prose-invert-code: #fff;--tw-prose-invert-pre-code: #d1d5db;--tw-prose-invert-pre-bg: rgb(0 0 0 / 50%);--tw-prose-invert-th-borders: #4b5563;--tw-prose-invert-td-borders: #374151;font-size:1rem;line-height:1.75}.prose :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;margin-bottom:.5em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(.prose>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.75em;margin-bottom:.75em}.prose :where(.prose>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.75em;margin-bottom:.75em}.prose :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em}.prose :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;padding-inline-start:1.625em}.prose :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.5714286em;padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-inline-start:.5714286em}.prose :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.prose-sm{font-size:.875rem;line-height:1.7142857}.prose-sm :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em;margin-bottom:1.1428571em}.prose-sm :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.2857143em;line-height:1.5555556;margin-top:.8888889em;margin-bottom:.8888889em}.prose-sm :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em;margin-bottom:1.3333333em;padding-inline-start:1.1111111em}.prose-sm :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:2.1428571em;margin-top:0;margin-bottom:.8em;line-height:1.2}.prose-sm :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.4285714em;margin-top:1.6em;margin-bottom:.8em;line-height:1.4}.prose-sm :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.2857143em;margin-top:1.5555556em;margin-bottom:.4444444em;line-height:1.5555556}.prose-sm :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.4285714em;margin-bottom:.5714286em;line-height:1.4285714}.prose-sm :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7142857em;margin-bottom:1.7142857em}.prose-sm :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7142857em;margin-bottom:1.7142857em}.prose-sm :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose-sm :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7142857em;margin-bottom:1.7142857em}.prose-sm :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8571429em;border-radius:.3125rem;padding-top:.1428571em;padding-inline-end:.3571429em;padding-bottom:.1428571em;padding-inline-start:.3571429em}.prose-sm :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8571429em}.prose-sm :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em}.prose-sm :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em}.prose-sm :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8571429em;line-height:1.6666667;margin-top:1.6666667em;margin-bottom:1.6666667em;border-radius:.25rem;padding-top:.6666667em;padding-inline-end:1em;padding-bottom:.6666667em;padding-inline-start:1em}.prose-sm :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em;margin-bottom:1.1428571em;padding-inline-start:1.5714286em}.prose-sm :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em;margin-bottom:1.1428571em;padding-inline-start:1.5714286em}.prose-sm :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.2857143em;margin-bottom:.2857143em}.prose-sm :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4285714em}.prose-sm :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4285714em}.prose-sm :where(.prose-sm>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5714286em;margin-bottom:.5714286em}.prose-sm :where(.prose-sm>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em}.prose-sm :where(.prose-sm>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.1428571em}.prose-sm :where(.prose-sm>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em}.prose-sm :where(.prose-sm>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.1428571em}.prose-sm :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5714286em;margin-bottom:.5714286em}.prose-sm :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em;margin-bottom:1.1428571em}.prose-sm :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.1428571em}.prose-sm :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.2857143em;padding-inline-start:1.5714286em}.prose-sm :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2.8571429em;margin-bottom:2.8571429em}.prose-sm :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-sm :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-sm :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-sm :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-sm :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8571429em;line-height:1.5}.prose-sm :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:1em;padding-bottom:.6666667em;padding-inline-start:1em}.prose-sm :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose-sm :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose-sm :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.6666667em;padding-inline-end:1em;padding-bottom:.6666667em;padding-inline-start:1em}.prose-sm :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose-sm :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose-sm :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7142857em;margin-bottom:1.7142857em}.prose-sm :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose-sm :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8571429em;line-height:1.3333333;margin-top:.6666667em}.prose-sm :where(.prose-sm>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose-sm :where(.prose-sm>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.invisible{visibility:hidden}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.-inset-4{top:-1rem;right:-1rem;bottom:-1rem;left:-1rem}.inset-0{top:0;right:0;bottom:0;left:0}.inset-x-0{left:0;right:0}.inset-y-0{top:0;bottom:0}.-bottom-10{bottom:-2.5rem}.-bottom-12{bottom:-3rem}.-bottom-40{bottom:-10rem}.-left-10{left:-2.5rem}.-left-12{left:-3rem}.-left-40{left:-10rem}.-right-1{right:-.25rem}.-right-10{right:-2.5rem}.-right-12{right:-3rem}.-right-40{right:-10rem}.-top-1{top:-.25rem}.-top-10{top:-2.5rem}.-top-12{top:-3rem}.-top-40{top:-10rem}.bottom-0{bottom:0}.bottom-10{bottom:2.5rem}.bottom-20{bottom:5rem}.bottom-24{bottom:6rem}.bottom-4{bottom:1rem}.bottom-\\[-10\\%\\]{bottom:-10%}.bottom-\\[-20\\%\\]{bottom:-20%}.left-0{left:0}.left-1{left:.25rem}.left-1\\/2{left:50%}.left-10{left:2.5rem}.left-2{left:.5rem}.left-3{left:.75rem}.left-4{left:1rem}.left-\\[-10\\%\\]{left:-10%}.left-\\[50\\%\\]{left:50%}.right-0{right:0}.right-1{right:.25rem}.right-2{right:.5rem}.right-20{right:5rem}.right-3{right:.75rem}.right-4{right:1rem}.right-\\[-10\\%\\]{right:-10%}.top-0{top:0}.top-1\\.5{top:.375rem}.top-1\\/2{top:50%}.top-2{top:.5rem}.top-3\\.5{top:.875rem}.top-4{top:1rem}.top-40{top:10rem}.top-\\[-10\\%\\]{top:-10%}.top-\\[-20\\%\\]{top:-20%}.top-\\[1px\\]{top:1px}.top-\\[50\\%\\]{top:50%}.top-\\[60\\%\\]{top:60%}.top-full{top:100%}.-z-10{z-index:-10}.z-0{z-index:0}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.z-\\[100\\]{z-index:100}.z-\\[1\\]{z-index:1}.z-\\[60\\]{z-index:60}.order-1{order:1}.order-2{order:2}.col-span-2{grid-column:span 2 / span 2}.col-span-full{grid-column:1 / -1}.m-0{margin:0}.-mx-1{margin-left:-.25rem;margin-right:-.25rem}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-2{margin-left:.5rem;margin-right:.5rem}.mx-3\\.5{margin-left:.875rem;margin-right:.875rem}.mx-6{margin-left:1.5rem;margin-right:1.5rem}.mx-auto{margin-left:auto;margin-right:auto}.my-0\\.5{margin-top:.125rem;margin-bottom:.125rem}.my-1{margin-top:.25rem;margin-bottom:.25rem}.-ml-4{margin-left:-1rem}.-mr-16{margin-right:-4rem}.-mr-4{margin-right:-1rem}.-mt-16{margin-top:-4rem}.-mt-4{margin-top:-1rem}.mb-1{margin-bottom:.25rem}.mb-10{margin-bottom:2.5rem}.mb-12{margin-bottom:3rem}.mb-16{margin-bottom:4rem}.mb-2{margin-bottom:.5rem}.mb-24{margin-bottom:6rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-0\\.5{margin-left:.125rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.ml-auto{margin-left:auto}.mr-1{margin-right:.25rem}.mr-1\\.5{margin-right:.375rem}.mr-2{margin-right:.5rem}.mr-2\\.5{margin-right:.625rem}.mr-3{margin-right:.75rem}.mr-4{margin-right:1rem}.mt-0{margin-top:0}.mt-0\\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-1\\.5{margin-top:.375rem}.mt-10{margin-top:2.5rem}.mt-12{margin-top:3rem}.mt-2{margin-top:.5rem}.mt-20{margin-top:5rem}.mt-24{margin-top:6rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-5{margin-top:1.25rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mt-auto{margin-top:auto}.line-clamp-1{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.line-clamp-2{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.aspect-\\[9\\/16\\]{aspect-ratio:9/16}.aspect-square{aspect-ratio:1 / 1}.aspect-video{aspect-ratio:16 / 9}.size-4{width:1rem;height:1rem}.h-1\\.5{height:.375rem}.h-10{height:2.5rem}.h-11{height:2.75rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-16{height:4rem}.h-2{height:.5rem}.h-2\\.5{height:.625rem}.h-20{height:5rem}.h-24{height:6rem}.h-3{height:.75rem}.h-3\\.5{height:.875rem}.h-32{height:8rem}.h-4{height:1rem}.h-40{height:10rem}.h-48{height:12rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-60{height:15rem}.h-64{height:16rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-96{height:24rem}.h-\\[120\\%\\]{height:120%}.h-\\[1px\\]{height:1px}.h-\\[300px\\]{height:300px}.h-\\[400px\\]{height:400px}.h-\\[50\\%\\]{height:50%}.h-\\[500px\\]{height:500px}.h-\\[50vh\\]{height:50vh}.h-\\[60vh\\]{height:60vh}.h-\\[650px\\]{height:650px}.h-\\[80vh\\]{height:80vh}.h-\\[90vh\\]{height:90vh}.h-\\[calc\\(100vh-320px\\)\\]{height:calc(100vh - 320px)}.h-\\[var\\(--radix-navigation-menu-viewport-height\\)\\]{height:var(--radix-navigation-menu-viewport-height)}.h-\\[var\\(--radix-select-trigger-height\\)\\]{height:var(--radix-select-trigger-height)}.h-auto{height:auto}.h-full{height:100%}.h-px{height:1px}.h-screen{height:100vh}.h-svh{height:100svh}.max-h-60{max-height:15rem}.max-h-\\[--radix-context-menu-content-available-height\\]{max-height:var(--radix-context-menu-content-available-height)}.max-h-\\[--radix-select-content-available-height\\]{max-height:var(--radix-select-content-available-height)}.max-h-\\[300px\\]{max-height:300px}.max-h-\\[60vh\\]{max-height:60vh}.max-h-\\[70vh\\]{max-height:70vh}.max-h-\\[80vh\\]{max-height:80vh}.max-h-\\[85vh\\]{max-height:85vh}.max-h-\\[90vh\\]{max-height:90vh}.max-h-\\[var\\(--radix-dropdown-menu-content-available-height\\)\\]{max-height:var(--radix-dropdown-menu-content-available-height)}.max-h-screen{max-height:100vh}.min-h-0{min-height:0px}.min-h-10{min-height:2.5rem}.min-h-20{min-height:5rem}.min-h-24{min-height:6rem}.min-h-8{min-height:2rem}.min-h-9{min-height:2.25rem}.min-h-\\[100px\\]{min-height:100px}.min-h-\\[120px\\]{min-height:120px}.min-h-\\[220px\\]{min-height:220px}.min-h-\\[3rem\\]{min-height:3rem}.min-h-\\[400px\\]{min-height:400px}.min-h-\\[80px\\]{min-height:80px}.min-h-screen{min-height:100vh}.min-h-svh{min-height:100svh}.w-0{width:0px}.w-1{width:.25rem}.w-1\\.5{width:.375rem}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-14{width:3.5rem}.w-16{width:4rem}.w-2{width:.5rem}.w-2\\.5{width:.625rem}.w-2\\/3{width:66.666667%}.w-20{width:5rem}.w-24{width:6rem}.w-3{width:.75rem}.w-3\\.5{width:.875rem}.w-3\\/4{width:75%}.w-32{width:8rem}.w-4{width:1rem}.w-4\\/6{width:66.666667%}.w-40{width:10rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-5\\/6{width:83.333333%}.w-56{width:14rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-7{width:1.75rem}.w-72{width:18rem}.w-8{width:2rem}.w-80{width:20rem}.w-9{width:2.25rem}.w-96{width:24rem}.w-\\[100px\\]{width:100px}.w-\\[120\\%\\]{width:120%}.w-\\[1px\\]{width:1px}.w-\\[50\\%\\]{width:50%}.w-\\[500px\\]{width:500px}.w-\\[calc\\(100\\%-48px\\)\\]{width:calc(100% - 48px)}.w-\\[var\\(--sidebar-width\\)\\]{width:var(--sidebar-width)}.w-auto{width:auto}.w-fit{width:-moz-fit-content;width:fit-content}.w-full{width:100%}.w-max{width:-moz-max-content;width:max-content}.w-px{width:1px}.min-w-0{min-width:0px}.min-w-10{min-width:2.5rem}.min-w-11{min-width:2.75rem}.min-w-48{min-width:12rem}.min-w-5{min-width:1.25rem}.min-w-9{min-width:2.25rem}.min-w-\\[1\\.5rem\\]{min-width:1.5rem}.min-w-\\[12rem\\]{min-width:12rem}.min-w-\\[4rem\\]{min-width:4rem}.min-w-\\[60px\\]{min-width:60px}.min-w-\\[80px\\]{min-width:80px}.min-w-\\[8rem\\]{min-width:8rem}.min-w-\\[var\\(--radix-select-trigger-width\\)\\]{min-width:var(--radix-select-trigger-width)}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-5xl{max-width:64rem}.max-w-6xl{max-width:72rem}.max-w-7xl{max-width:80rem}.max-w-\\[180px\\]{max-width:180px}.max-w-\\[280px\\]{max-width:280px}.max-w-\\[80\\%\\]{max-width:80%}.max-w-\\[var\\(--skeleton-width\\)\\]{max-width:var(--skeleton-width)}.max-w-lg{max-width:32rem}.max-w-max{max-width:-moz-max-content;max-width:max-content}.max-w-md{max-width:28rem}.max-w-none{max-width:none}.max-w-screen-xl{max-width:1280px}.max-w-sm{max-width:24rem}.max-w-xl{max-width:36rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.flex-shrink-0,.shrink-0{flex-shrink:0}.grow{flex-grow:1}.grow-0{flex-grow:0}.basis-full{flex-basis:100%}.caption-bottom{caption-side:bottom}.border-collapse{border-collapse:collapse}.origin-\\[--radix-context-menu-content-transform-origin\\]{transform-origin:var(--radix-context-menu-content-transform-origin)}.origin-\\[--radix-dropdown-menu-content-transform-origin\\]{transform-origin:var(--radix-dropdown-menu-content-transform-origin)}.origin-\\[--radix-hover-card-content-transform-origin\\]{transform-origin:var(--radix-hover-card-content-transform-origin)}.origin-\\[--radix-menubar-content-transform-origin\\]{transform-origin:var(--radix-menubar-content-transform-origin)}.origin-\\[--radix-popover-content-transform-origin\\]{transform-origin:var(--radix-popover-content-transform-origin)}.origin-\\[--radix-select-content-transform-origin\\]{transform-origin:var(--radix-select-content-transform-origin)}.origin-\\[--radix-tooltip-content-transform-origin\\]{transform-origin:var(--radix-tooltip-content-transform-origin)}.origin-left{transform-origin:left}.-translate-x-1\\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-2{--tw-translate-x: -.5rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-px{--tw-translate-x: -1px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-1\\/2{--tw-translate-x: 50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-\\[-50\\%\\]{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-px{--tw-translate-x: 1px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-1\\/2{--tw-translate-y: 50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-\\[-50\\%\\]{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-12{--tw-rotate: 12deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-3{--tw-rotate: 3deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate: 45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-105{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-110{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes bounce{0%,to{transform:translateY(-25%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,.2,1)}}.animate-bounce{animation:bounce 1s infinite}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.touch-none{touch-action:none}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize-none{resize:none}.list-none{list-style-type:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-row-reverse{flex-direction:row-reverse}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.flex-wrap{flex-wrap:wrap}.flex-nowrap{flex-wrap:nowrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.items-baseline{align-items:baseline}.items-stretch{align-items:stretch}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-around{justify-content:space-around}.gap-1{gap:.25rem}.gap-1\\.5{gap:.375rem}.gap-10{gap:2.5rem}.gap-12{gap:3rem}.gap-2{gap:.5rem}.gap-20{gap:5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-5{gap:1.25rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-x-1>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.25rem * var(--tw-space-x-reverse));margin-left:calc(.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.space-y-0\\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.125rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.125rem * var(--tw-space-y-reverse))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-1\\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.375rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.375rem * var(--tw-space-y-reverse))}.space-y-10>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2.5rem * var(--tw-space-y-reverse))}.space-y-12>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(3rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(3rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.25rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.break-words{overflow-wrap:break-word}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-3xl,.rounded-\\[1\\.5rem\\]{border-radius:1.5rem}.rounded-\\[2\\.5rem\\]{border-radius:2.5rem}.rounded-\\[2px\\]{border-radius:2px}.rounded-\\[2rem\\]{border-radius:2rem}.rounded-\\[3rem\\]{border-radius:3rem}.rounded-\\[inherit\\]{border-radius:inherit}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5625rem}.rounded-md{border-radius:.375rem}.rounded-sm{border-radius:.1875rem}.rounded-xl{border-radius:.75rem}.rounded-b-3xl{border-bottom-right-radius:1.5rem;border-bottom-left-radius:1.5rem}.rounded-t-\\[10px\\]{border-top-left-radius:10px;border-top-right-radius:10px}.rounded-bl-full{border-bottom-left-radius:9999px}.rounded-tl-none{border-top-left-radius:0}.rounded-tl-sm{border-top-left-radius:.1875rem}.rounded-tr-full{border-top-right-radius:9999px}.rounded-tr-none{border-top-right-radius:0}.border{border-width:1px}.border-0{border-width:0px}.border-2{border-width:2px}.border-4{border-width:4px}.border-8{border-width:8px}.border-\\[1\\.5px\\]{border-width:1.5px}.border-y{border-top-width:1px;border-bottom-width:1px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-l-2{border-left-width:2px}.border-l-4{border-left-width:4px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-none{border-style:none}.border-\\[--color-border\\]{border-color:var(--color-border)}.border-amber-100{--tw-border-opacity: 1;border-color:rgb(254 243 199 / var(--tw-border-opacity, 1))}.border-amber-200{--tw-border-opacity: 1;border-color:rgb(253 230 138 / var(--tw-border-opacity, 1))}.border-amber-500\\/10{border-color:#f59e0b1a}.border-amber-500\\/15{border-color:#f59e0b26}.border-amber-500\\/20{border-color:#f59e0b33}.border-background{--tw-border-opacity: 1;border-color:hsl(var(--background) / var(--tw-border-opacity, 1))}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-500\\/20{border-color:#3b82f633}.border-border{--tw-border-opacity: 1;border-color:hsl(var(--border) / var(--tw-border-opacity, 1))}.border-border\\/30{border-color:hsl(var(--border) / .3)}.border-border\\/50{border-color:hsl(var(--border) / .5)}.border-card-border{--tw-border-opacity: 1;border-color:hsl(var(--card-border) / var(--tw-border-opacity, 1))}.border-current{border-color:currentColor}.border-destructive{--tw-border-opacity: 1;border-color:hsl(var(--destructive) / var(--tw-border-opacity, 1))}.border-destructive-border{border-color:var(--destructive-border)}.border-destructive\\/20{border-color:hsl(var(--destructive) / .2)}.border-destructive\\/50{border-color:hsl(var(--destructive) / .5)}.border-emerald-500\\/20{border-color:#10b98133}.border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-green-100{--tw-border-opacity: 1;border-color:rgb(220 252 231 / var(--tw-border-opacity, 1))}.border-green-200{--tw-border-opacity: 1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1))}.border-green-500\\/20{border-color:#22c55e33}.border-green-500\\/30{border-color:#22c55e4d}.border-input{--tw-border-opacity: 1;border-color:hsl(var(--input) / var(--tw-border-opacity, 1))}.border-muted-foreground\\/10{border-color:hsl(var(--muted-foreground) / .1)}.border-orange-200{--tw-border-opacity: 1;border-color:rgb(254 215 170 / var(--tw-border-opacity, 1))}.border-orange-500\\/20{border-color:#f9731633}.border-pink-100{--tw-border-opacity: 1;border-color:rgb(252 231 243 / var(--tw-border-opacity, 1))}.border-pink-500\\/20{border-color:#ec489933}.border-primary{--tw-border-opacity: 1;border-color:hsl(var(--primary) / var(--tw-border-opacity, 1))}.border-primary-border{border-color:var(--primary-border)}.border-primary-foreground\\/20{border-color:hsl(var(--primary-foreground) / .2)}.border-primary\\/10{border-color:hsl(var(--primary) / .1)}.border-primary\\/20{border-color:hsl(var(--primary) / .2)}.border-primary\\/30{border-color:hsl(var(--primary) / .3)}.border-primary\\/5{border-color:hsl(var(--primary) / .05)}.border-purple-500\\/20{border-color:#a855f733}.border-secondary-border{border-color:var(--secondary-border)}.border-sidebar-border{--tw-border-opacity: 1;border-color:hsl(var(--sidebar-border) / var(--tw-border-opacity, 1))}.border-sidebar-border\\/50{border-color:hsl(var(--sidebar-border) / .5)}.border-transparent{border-color:transparent}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.border-white\\/10{border-color:#ffffff1a}.border-white\\/20{border-color:#fff3}.border-white\\/5{border-color:#ffffff0d}.border-white\\/50{border-color:#ffffff80}.border-yellow-500\\/20{border-color:#eab30833}.border-b-border\\/30{border-bottom-color:hsl(var(--border) / .3)}.border-l-red-500{--tw-border-opacity: 1;border-left-color:rgb(239 68 68 / var(--tw-border-opacity, 1))}.border-l-transparent{border-left-color:transparent}.border-t-transparent{border-top-color:transparent}.bg-\\[\\#1a1a2e\\]{--tw-bg-opacity: 1;background-color:rgb(26 26 46 / var(--tw-bg-opacity, 1))}.bg-\\[\\#f4ecd8\\]{--tw-bg-opacity: 1;background-color:rgb(244 236 216 / var(--tw-bg-opacity, 1))}.bg-\\[\\#faf9f6\\]{--tw-bg-opacity: 1;background-color:rgb(250 249 246 / var(--tw-bg-opacity, 1))}.bg-\\[--color-bg\\]{background-color:var(--color-bg)}.bg-accent{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.bg-accent\\/30{background-color:hsl(var(--accent) / .3)}.bg-amber-400{--tw-bg-opacity: 1;background-color:rgb(251 191 36 / var(--tw-bg-opacity, 1))}.bg-amber-500{--tw-bg-opacity: 1;background-color:rgb(245 158 11 / var(--tw-bg-opacity, 1))}.bg-amber-500\\/10{background-color:#f59e0b1a}.bg-amber-500\\/20{background-color:#f59e0b33}.bg-amber-500\\/5{background-color:#f59e0b0d}.bg-background{--tw-bg-opacity: 1;background-color:hsl(var(--background) / var(--tw-bg-opacity, 1))}.bg-background\\/40{background-color:hsl(var(--background) / .4)}.bg-background\\/50{background-color:hsl(var(--background) / .5)}.bg-background\\/80{background-color:hsl(var(--background) / .8)}.bg-background\\/90{background-color:hsl(var(--background) / .9)}.bg-background\\/95{background-color:hsl(var(--background) / .95)}.bg-black\\/20{background-color:#0003}.bg-black\\/50{background-color:#00000080}.bg-black\\/80{background-color:#000c}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-200{--tw-bg-opacity: 1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.bg-blue-200\\/50{background-color:#bfdbfe80}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-500\\/10{background-color:#3b82f61a}.bg-blue-500\\/5{background-color:#3b82f60d}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-blue-800{--tw-bg-opacity: 1;background-color:rgb(30 64 175 / var(--tw-bg-opacity, 1))}.bg-border{--tw-bg-opacity: 1;background-color:hsl(var(--border) / var(--tw-bg-opacity, 1))}.bg-card{--tw-bg-opacity: 1;background-color:hsl(var(--card) / var(--tw-bg-opacity, 1))}.bg-card\\/10{background-color:hsl(var(--card) / .1)}.bg-card\\/20{background-color:hsl(var(--card) / .2)}.bg-card\\/40{background-color:hsl(var(--card) / .4)}.bg-card\\/5{background-color:hsl(var(--card) / .05)}.bg-card\\/50{background-color:hsl(var(--card) / .5)}.bg-card\\/80{background-color:hsl(var(--card) / .8)}.bg-card\\/90{background-color:hsl(var(--card) / .9)}.bg-card\\/95{background-color:hsl(var(--card) / .95)}.bg-destructive{--tw-bg-opacity: 1;background-color:hsl(var(--destructive) / var(--tw-bg-opacity, 1))}.bg-destructive\\/10{background-color:hsl(var(--destructive) / .1)}.bg-destructive\\/60{background-color:hsl(var(--destructive) / .6)}.bg-emerald-500\\/10{background-color:#10b9811a}.bg-emerald-500\\/15{background-color:#10b98126}.bg-foreground{--tw-bg-opacity: 1;background-color:hsl(var(--foreground) / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-200{--tw-bg-opacity: 1;background-color:rgb(187 247 208 / var(--tw-bg-opacity, 1))}.bg-green-200\\/50{background-color:#bbf7d080}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-500\\/10{background-color:#22c55e1a}.bg-green-500\\/20{background-color:#22c55e33}.bg-muted{--tw-bg-opacity: 1;background-color:hsl(var(--muted) / var(--tw-bg-opacity, 1))}.bg-muted-foreground{--tw-bg-opacity: 1;background-color:hsl(var(--muted-foreground) / var(--tw-bg-opacity, 1))}.bg-muted-foreground\\/10{background-color:hsl(var(--muted-foreground) / .1)}.bg-muted\\/10{background-color:hsl(var(--muted) / .1)}.bg-muted\\/20{background-color:hsl(var(--muted) / .2)}.bg-muted\\/30{background-color:hsl(var(--muted) / .3)}.bg-muted\\/40{background-color:hsl(var(--muted) / .4)}.bg-muted\\/50{background-color:hsl(var(--muted) / .5)}.bg-muted\\/80{background-color:hsl(var(--muted) / .8)}.bg-orange-100{--tw-bg-opacity: 1;background-color:rgb(255 237 213 / var(--tw-bg-opacity, 1))}.bg-orange-200{--tw-bg-opacity: 1;background-color:rgb(254 215 170 / var(--tw-bg-opacity, 1))}.bg-orange-200\\/50{background-color:#fed7aa80}.bg-orange-500{--tw-bg-opacity: 1;background-color:rgb(249 115 22 / var(--tw-bg-opacity, 1))}.bg-orange-500\\/10{background-color:#f973161a}.bg-orange-600{--tw-bg-opacity: 1;background-color:rgb(234 88 12 / var(--tw-bg-opacity, 1))}.bg-pink-200{--tw-bg-opacity: 1;background-color:rgb(251 207 232 / var(--tw-bg-opacity, 1))}.bg-pink-200\\/50{background-color:#fbcfe880}.bg-pink-500{--tw-bg-opacity: 1;background-color:rgb(236 72 153 / var(--tw-bg-opacity, 1))}.bg-pink-500\\/10{background-color:#ec48991a}.bg-popover{--tw-bg-opacity: 1;background-color:hsl(var(--popover) / var(--tw-bg-opacity, 1))}.bg-primary{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.bg-primary-foreground\\/10{background-color:hsl(var(--primary-foreground) / .1)}.bg-primary\\/10{background-color:hsl(var(--primary) / .1)}.bg-primary\\/20{background-color:hsl(var(--primary) / .2)}.bg-primary\\/30{background-color:hsl(var(--primary) / .3)}.bg-primary\\/40{background-color:hsl(var(--primary) / .4)}.bg-primary\\/5{background-color:hsl(var(--primary) / .05)}.bg-primary\\/60{background-color:hsl(var(--primary) / .6)}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-purple-200{--tw-bg-opacity: 1;background-color:rgb(233 213 255 / var(--tw-bg-opacity, 1))}.bg-purple-200\\/50{background-color:#e9d5ff80}.bg-purple-500{--tw-bg-opacity: 1;background-color:rgb(168 85 247 / var(--tw-bg-opacity, 1))}.bg-purple-500\\/10{background-color:#a855f71a}.bg-purple-600{--tw-bg-opacity: 1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-red-500\\/10{background-color:#ef44441a}.bg-red-500\\/5{background-color:#ef44440d}.bg-rose-100{--tw-bg-opacity: 1;background-color:rgb(255 228 230 / var(--tw-bg-opacity, 1))}.bg-rose-600{--tw-bg-opacity: 1;background-color:rgb(225 29 72 / var(--tw-bg-opacity, 1))}.bg-secondary{--tw-bg-opacity: 1;background-color:hsl(var(--secondary) / var(--tw-bg-opacity, 1))}.bg-sidebar{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar) / var(--tw-bg-opacity, 1))}.bg-sidebar-border{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar-border) / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\\/20{background-color:#fff3}.bg-white\\/80{background-color:#fffc}.bg-yellow-200{--tw-bg-opacity: 1;background-color:rgb(254 240 138 / var(--tw-bg-opacity, 1))}.bg-yellow-200\\/50{background-color:#fef08a80}.bg-yellow-500{--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-yellow-500\\/10{background-color:#eab3081a}.bg-\\[radial-gradient\\(circle_at_center\\,_var\\(--tw-gradient-stops\\)\\)\\]{background-image:radial-gradient(circle at center,var(--tw-gradient-stops))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.bg-gradient-to-bl{background-image:linear-gradient(to bottom left,var(--tw-gradient-stops))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.bg-gradient-to-l{background-image:linear-gradient(to left,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.bg-gradient-to-t{background-image:linear-gradient(to top,var(--tw-gradient-stops))}.bg-gradient-to-tr{background-image:linear-gradient(to top right,var(--tw-gradient-stops))}.from-\\[\\#6c5dd3\\]{--tw-gradient-from: #6c5dd3 var(--tw-gradient-from-position);--tw-gradient-to: rgb(108 93 211 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-400{--tw-gradient-from: #fbbf24 var(--tw-gradient-from-position);--tw-gradient-to: rgb(251 191 36 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-500{--tw-gradient-from: #f59e0b var(--tw-gradient-from-position);--tw-gradient-to: rgb(245 158 11 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-500\\/10{--tw-gradient-from: rgb(245 158 11 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(245 158 11 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-500\\/15{--tw-gradient-from: rgb(245 158 11 / .15) var(--tw-gradient-from-position);--tw-gradient-to: rgb(245 158 11 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-500\\/20{--tw-gradient-from: rgb(245 158 11 / .2) var(--tw-gradient-from-position);--tw-gradient-to: rgb(245 158 11 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-amber-500\\/5{--tw-gradient-from: rgb(245 158 11 / .05) var(--tw-gradient-from-position);--tw-gradient-to: rgb(245 158 11 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-background{--tw-gradient-from: hsl(var(--background) / 1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--background) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-black\\/60{--tw-gradient-from: rgb(0 0 0 / .6) var(--tw-gradient-from-position);--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-400{--tw-gradient-from: #60a5fa var(--tw-gradient-from-position);--tw-gradient-to: rgb(96 165 250 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500{--tw-gradient-from: #3b82f6 var(--tw-gradient-from-position);--tw-gradient-to: rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500\\/10{--tw-gradient-from: rgb(59 130 246 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500\\/15{--tw-gradient-from: rgb(59 130 246 / .15) var(--tw-gradient-from-position);--tw-gradient-to: rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-600{--tw-gradient-from: #2563eb var(--tw-gradient-from-position);--tw-gradient-to: rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-600\\/5{--tw-gradient-from: rgb(37 99 235 / .05) var(--tw-gradient-from-position);--tw-gradient-to: rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-700{--tw-gradient-from: #1d4ed8 var(--tw-gradient-from-position);--tw-gradient-to: rgb(29 78 216 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-800{--tw-gradient-from: #1e40af var(--tw-gradient-from-position);--tw-gradient-to: rgb(30 64 175 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-cyan-500{--tw-gradient-from: #06b6d4 var(--tw-gradient-from-position);--tw-gradient-to: rgb(6 182 212 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-cyan-600{--tw-gradient-from: #0891b2 var(--tw-gradient-from-position);--tw-gradient-to: rgb(8 145 178 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-400{--tw-gradient-from: #34d399 var(--tw-gradient-from-position);--tw-gradient-to: rgb(52 211 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-500{--tw-gradient-from: #10b981 var(--tw-gradient-from-position);--tw-gradient-to: rgb(16 185 129 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-500\\/10{--tw-gradient-from: rgb(16 185 129 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(16 185 129 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-500\\/15{--tw-gradient-from: rgb(16 185 129 / .15) var(--tw-gradient-from-position);--tw-gradient-to: rgb(16 185 129 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-600{--tw-gradient-from: #059669 var(--tw-gradient-from-position);--tw-gradient-to: rgb(5 150 105 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-foreground{--tw-gradient-from: hsl(var(--foreground) / 1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--foreground) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-500{--tw-gradient-from: #22c55e var(--tw-gradient-from-position);--tw-gradient-to: rgb(34 197 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-500\\/10{--tw-gradient-from: rgb(34 197 94 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(34 197 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-500\\/15{--tw-gradient-from: rgb(34 197 94 / .15) var(--tw-gradient-from-position);--tw-gradient-to: rgb(34 197 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-500\\/20{--tw-gradient-from: rgb(34 197 94 / .2) var(--tw-gradient-from-position);--tw-gradient-to: rgb(34 197 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-400{--tw-gradient-from: #818cf8 var(--tw-gradient-from-position);--tw-gradient-to: rgb(129 140 248 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-50{--tw-gradient-from: #eef2ff var(--tw-gradient-from-position);--tw-gradient-to: rgb(238 242 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-500{--tw-gradient-from: #6366f1 var(--tw-gradient-from-position);--tw-gradient-to: rgb(99 102 241 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-500\\/10{--tw-gradient-from: rgb(99 102 241 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(99 102 241 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-500\\/15{--tw-gradient-from: rgb(99 102 241 / .15) var(--tw-gradient-from-position);--tw-gradient-to: rgb(99 102 241 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-600{--tw-gradient-from: #4f46e5 var(--tw-gradient-from-position);--tw-gradient-to: rgb(79 70 229 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-900{--tw-gradient-from: #312e81 var(--tw-gradient-from-position);--tw-gradient-to: rgb(49 46 129 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-950{--tw-gradient-from: #1e1b4b var(--tw-gradient-from-position);--tw-gradient-to: rgb(30 27 75 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-muted{--tw-gradient-from: hsl(var(--muted) / 1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--muted) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-muted-foreground{--tw-gradient-from: hsl(var(--muted-foreground) / 1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--muted-foreground) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-400{--tw-gradient-from: #fb923c var(--tw-gradient-from-position);--tw-gradient-to: rgb(251 146 60 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-500{--tw-gradient-from: #f97316 var(--tw-gradient-from-position);--tw-gradient-to: rgb(249 115 22 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-600{--tw-gradient-from: #ea580c var(--tw-gradient-from-position);--tw-gradient-to: rgb(234 88 12 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-pink-500\\/5{--tw-gradient-from: rgb(236 72 153 / .05) var(--tw-gradient-from-position);--tw-gradient-to: rgb(236 72 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary{--tw-gradient-from: hsl(var(--primary) / 1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary\\/10{--tw-gradient-from: hsl(var(--primary) / .1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary\\/20{--tw-gradient-from: hsl(var(--primary) / .2) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary\\/5{--tw-gradient-from: hsl(var(--primary) / .05) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary\\/80{--tw-gradient-from: hsl(var(--primary) / .8) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-500{--tw-gradient-from: #a855f7 var(--tw-gradient-from-position);--tw-gradient-to: rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-600{--tw-gradient-from: #9333ea var(--tw-gradient-from-position);--tw-gradient-to: rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-500{--tw-gradient-from: #f43f5e var(--tw-gradient-from-position);--tw-gradient-to: rgb(244 63 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-500\\/10{--tw-gradient-from: rgb(244 63 94 / .1) var(--tw-gradient-from-position);--tw-gradient-to: rgb(244 63 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-500\\/15{--tw-gradient-from: rgb(244 63 94 / .15) var(--tw-gradient-from-position);--tw-gradient-to: rgb(244 63 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-500\\/20{--tw-gradient-from: rgb(244 63 94 / .2) var(--tw-gradient-from-position);--tw-gradient-to: rgb(244 63 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-600{--tw-gradient-from: #e11d48 var(--tw-gradient-from-position);--tw-gradient-to: rgb(225 29 72 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-slate-300{--tw-gradient-from: #cbd5e1 var(--tw-gradient-from-position);--tw-gradient-to: rgb(203 213 225 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-slate-400{--tw-gradient-from: #94a3b8 var(--tw-gradient-from-position);--tw-gradient-to: rgb(148 163 184 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-slate-500{--tw-gradient-from: #64748b var(--tw-gradient-from-position);--tw-gradient-to: rgb(100 116 139 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-teal-500{--tw-gradient-from: #14b8a6 var(--tw-gradient-from-position);--tw-gradient-to: rgb(20 184 166 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-transparent{--tw-gradient-from: transparent var(--tw-gradient-from-position);--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-violet-500{--tw-gradient-from: #8b5cf6 var(--tw-gradient-from-position);--tw-gradient-to: rgb(139 92 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-white{--tw-gradient-from: #fff var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-white\\/20{--tw-gradient-from: rgb(255 255 255 / .2) var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-white\\/5{--tw-gradient-from: rgb(255 255 255 / .05) var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.via-amber-400{--tw-gradient-to: rgb(251 191 36 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #fbbf24 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-background{--tw-gradient-to: hsl(var(--background) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--background) / 1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-background\\/95{--tw-gradient-to: hsl(var(--background) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--background) / .95) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-card{--tw-gradient-to: hsl(var(--card) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--card) / 1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-green-500\\/5{--tw-gradient-to: rgb(34 197 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(34 197 94 / .05) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-indigo-500{--tw-gradient-to: rgb(99 102 241 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #6366f1 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-indigo-500\\/10{--tw-gradient-to: rgb(99 102 241 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(99 102 241 / .1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-indigo-600{--tw-gradient-to: rgb(79 70 229 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #4f46e5 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-indigo-700{--tw-gradient-to: rgb(67 56 202 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #4338ca var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-muted-foreground{--tw-gradient-to: hsl(var(--muted-foreground) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--muted-foreground) / 1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-orange-500\\/10{--tw-gradient-to: rgb(249 115 22 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(249 115 22 / .1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-500\\/10{--tw-gradient-to: rgb(236 72 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(236 72 153 / .1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-500\\/15{--tw-gradient-to: rgb(236 72 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(236 72 153 / .15) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-500\\/5{--tw-gradient-to: rgb(236 72 153 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(236 72 153 / .05) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-pink-600{--tw-gradient-to: rgb(219 39 119 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #db2777 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-primary{--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--primary) / 1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-primary\\/5{--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--primary) / .05) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-primary\\/80{--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--primary) / .8) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-purple-500{--tw-gradient-to: rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #a855f7 var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-purple-500\\/10{--tw-gradient-to: rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(168 85 247 / .1) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-purple-500\\/5{--tw-gradient-to: rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), rgb(168 85 247 / .05) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-purple-600{--tw-gradient-to: rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #9333ea var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-transparent{--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), transparent var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-\\[\\#ff9e6d\\]{--tw-gradient-to: #ff9e6d var(--tw-gradient-to-position)}.to-accent{--tw-gradient-to: hsl(var(--accent) / 1) var(--tw-gradient-to-position)}.to-accent\\/10{--tw-gradient-to: hsl(var(--accent) / .1) var(--tw-gradient-to-position)}.to-accent\\/20{--tw-gradient-to: hsl(var(--accent) / .2) var(--tw-gradient-to-position)}.to-amber-500{--tw-gradient-to: #f59e0b var(--tw-gradient-to-position)}.to-amber-500\\/10{--tw-gradient-to: rgb(245 158 11 / .1) var(--tw-gradient-to-position)}.to-amber-500\\/50{--tw-gradient-to: rgb(245 158 11 / .5) var(--tw-gradient-to-position)}.to-amber-600{--tw-gradient-to: #d97706 var(--tw-gradient-to-position)}.to-amber-700{--tw-gradient-to: #b45309 var(--tw-gradient-to-position)}.to-amber-950\\/20{--tw-gradient-to: rgb(69 26 3 / .2) var(--tw-gradient-to-position)}.to-background\\/90{--tw-gradient-to: hsl(var(--background) / .9) var(--tw-gradient-to-position)}.to-blue-500\\/20{--tw-gradient-to: rgb(59 130 246 / .2) var(--tw-gradient-to-position)}.to-blue-600{--tw-gradient-to: #2563eb var(--tw-gradient-to-position)}.to-blue-700{--tw-gradient-to: #1d4ed8 var(--tw-gradient-to-position)}.to-blue-800{--tw-gradient-to: #1e40af var(--tw-gradient-to-position)}.to-emerald-500\\/20{--tw-gradient-to: rgb(16 185 129 / .2) var(--tw-gradient-to-position)}.to-emerald-600{--tw-gradient-to: #059669 var(--tw-gradient-to-position)}.to-emerald-700{--tw-gradient-to: #047857 var(--tw-gradient-to-position)}.to-foreground{--tw-gradient-to: hsl(var(--foreground) / 1) var(--tw-gradient-to-position)}.to-green-500\\/5{--tw-gradient-to: rgb(34 197 94 / .05) var(--tw-gradient-to-position)}.to-green-600{--tw-gradient-to: #16a34a var(--tw-gradient-to-position)}.to-indigo-500\\/5{--tw-gradient-to: rgb(99 102 241 / .05) var(--tw-gradient-to-position)}.to-indigo-600{--tw-gradient-to: #4f46e5 var(--tw-gradient-to-position)}.to-indigo-600\\/20{--tw-gradient-to: rgb(79 70 229 / .2) var(--tw-gradient-to-position)}.to-indigo-700{--tw-gradient-to: #4338ca var(--tw-gradient-to-position)}.to-indigo-800{--tw-gradient-to: #3730a3 var(--tw-gradient-to-position)}.to-indigo-900{--tw-gradient-to: #312e81 var(--tw-gradient-to-position)}.to-muted-foreground{--tw-gradient-to: hsl(var(--muted-foreground) / 1) var(--tw-gradient-to-position)}.to-orange-50{--tw-gradient-to: #fff7ed var(--tw-gradient-to-position)}.to-orange-500{--tw-gradient-to: #f97316 var(--tw-gradient-to-position)}.to-orange-500\\/20{--tw-gradient-to: rgb(249 115 22 / .2) var(--tw-gradient-to-position)}.to-orange-500\\/5{--tw-gradient-to: rgb(249 115 22 / .05) var(--tw-gradient-to-position)}.to-orange-600{--tw-gradient-to: #ea580c var(--tw-gradient-to-position)}.to-orange-700{--tw-gradient-to: #c2410c var(--tw-gradient-to-position)}.to-orange-800{--tw-gradient-to: #9a3412 var(--tw-gradient-to-position)}.to-pink-500\\/5{--tw-gradient-to: rgb(236 72 153 / .05) var(--tw-gradient-to-position)}.to-pink-600{--tw-gradient-to: #db2777 var(--tw-gradient-to-position)}.to-pink-700{--tw-gradient-to: #be185d var(--tw-gradient-to-position)}.to-pink-800{--tw-gradient-to: #9d174d var(--tw-gradient-to-position)}.to-primary\\/20{--tw-gradient-to: hsl(var(--primary) / .2) var(--tw-gradient-to-position)}.to-primary\\/5{--tw-gradient-to: hsl(var(--primary) / .05) var(--tw-gradient-to-position)}.to-primary\\/70{--tw-gradient-to: hsl(var(--primary) / .7) var(--tw-gradient-to-position)}.to-purple-500{--tw-gradient-to: #a855f7 var(--tw-gradient-to-position)}.to-purple-500\\/10{--tw-gradient-to: rgb(168 85 247 / .1) var(--tw-gradient-to-position)}.to-purple-500\\/20{--tw-gradient-to: rgb(168 85 247 / .2) var(--tw-gradient-to-position)}.to-purple-500\\/5{--tw-gradient-to: rgb(168 85 247 / .05) var(--tw-gradient-to-position)}.to-purple-600{--tw-gradient-to: #9333ea var(--tw-gradient-to-position)}.to-purple-800{--tw-gradient-to: #6b21a8 var(--tw-gradient-to-position)}.to-purple-900{--tw-gradient-to: #581c87 var(--tw-gradient-to-position)}.to-red-500{--tw-gradient-to: #ef4444 var(--tw-gradient-to-position)}.to-red-700{--tw-gradient-to: #b91c1c var(--tw-gradient-to-position)}.to-red-800{--tw-gradient-to: #991b1b var(--tw-gradient-to-position)}.to-slate-400{--tw-gradient-to: #94a3b8 var(--tw-gradient-to-position)}.to-slate-500{--tw-gradient-to: #64748b var(--tw-gradient-to-position)}.to-slate-700{--tw-gradient-to: #334155 var(--tw-gradient-to-position)}.to-slate-800{--tw-gradient-to: #1e293b var(--tw-gradient-to-position)}.to-teal-500\\/10{--tw-gradient-to: rgb(20 184 166 / .1) var(--tw-gradient-to-position)}.to-teal-500\\/5{--tw-gradient-to: rgb(20 184 166 / .05) var(--tw-gradient-to-position)}.to-teal-600{--tw-gradient-to: #0d9488 var(--tw-gradient-to-position)}.to-teal-700{--tw-gradient-to: #0f766e var(--tw-gradient-to-position)}.to-teal-800{--tw-gradient-to: #115e59 var(--tw-gradient-to-position)}.to-transparent{--tw-gradient-to: transparent var(--tw-gradient-to-position)}.to-violet-600{--tw-gradient-to: #7c3aed var(--tw-gradient-to-position)}.to-yellow-500\\/5{--tw-gradient-to: rgb(234 179 8 / .05) var(--tw-gradient-to-position)}.to-yellow-600{--tw-gradient-to: #ca8a04 var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.fill-amber-500{fill:#f59e0b}.fill-amber-500\\/30{fill:#f59e0b4d}.fill-current{fill:currentColor}.fill-orange-500{fill:#f97316}.fill-pink-600{fill:#db2777}.fill-rose-500{fill:#f43f5e}.fill-white{fill:#fff}.object-cover{-o-object-fit:cover;object-fit:cover}.p-0{padding:0}.p-0\\.5{padding:.125rem}.p-1{padding:.25rem}.p-1\\.5{padding:.375rem}.p-10{padding:2.5rem}.p-12{padding:3rem}.p-2{padding:.5rem}.p-2\\.5{padding:.625rem}.p-20{padding:5rem}.p-3{padding:.75rem}.p-3\\.5{padding:.875rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.p-\\[1px\\]{padding:1px}.px-1{padding-left:.25rem;padding-right:.25rem}.px-10{padding-left:2.5rem;padding-right:2.5rem}.px-12{padding-left:3rem;padding-right:3rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-0{padding-top:0;padding-bottom:0}.py-0\\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\\.5{padding-top:.375rem;padding-bottom:.375rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-16{padding-top:4rem;padding-bottom:4rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-2\\.5{padding-top:.625rem;padding-bottom:.625rem}.py-20{padding-top:5rem;padding-bottom:5rem}.py-24{padding-top:6rem;padding-bottom:6rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-32{padding-top:8rem;padding-bottom:8rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-5{padding-top:1.25rem;padding-bottom:1.25rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-0{padding-bottom:0}.pb-1{padding-bottom:.25rem}.pb-10{padding-bottom:2.5rem}.pb-12{padding-bottom:3rem}.pb-16{padding-bottom:4rem}.pb-2{padding-bottom:.5rem}.pb-3{padding-bottom:.75rem}.pb-32{padding-bottom:8rem}.pb-4{padding-bottom:1rem}.pb-40{padding-bottom:10rem}.pb-5{padding-bottom:1.25rem}.pb-6{padding-bottom:1.5rem}.pb-8{padding-bottom:2rem}.pl-10{padding-left:2.5rem}.pl-11{padding-left:2.75rem}.pl-12{padding-left:3rem}.pl-2\\.5{padding-left:.625rem}.pl-4{padding-left:1rem}.pl-8{padding-left:2rem}.pl-9{padding-left:2.25rem}.pr-10{padding-right:2.5rem}.pr-2{padding-right:.5rem}.pr-2\\.5{padding-right:.625rem}.pr-4{padding-right:1rem}.pr-6{padding-right:1.5rem}.pr-8{padding-right:2rem}.pt-0{padding-top:0}.pt-1{padding-top:.25rem}.pt-10{padding-top:2.5rem}.pt-12{padding-top:3rem}.pt-2{padding-top:.5rem}.pt-20{padding-top:5rem}.pt-3{padding-top:.75rem}.pt-4{padding-top:1rem}.pt-6{padding-top:1.5rem}.pt-8{padding-top:2rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.align-middle{vertical-align:middle}.font-display{font-family:Playfair Display,serif}.font-mono{font-family:var(--font-mono)}.font-sans{font-family:Inter,var(--font-sans)}.font-serif{font-family:Crimson Text,var(--font-serif)}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-5xl{font-size:3rem;line-height:1}.text-6xl{font-size:3.75rem;line-height:1}.text-8xl{font-size:6rem;line-height:1}.text-\\[0\\.65rem\\]{font-size:.65rem}.text-\\[0\\.8rem\\]{font-size:.8rem}.text-\\[10px\\]{font-size:10px}.text-\\[11px\\]{font-size:11px}.text-\\[12px\\]{font-size:12px}.text-\\[8px\\]{font-size:8px}.text-\\[9px\\]{font-size:9px}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-black{font-weight:900}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.lowercase{text-transform:lowercase}.capitalize{text-transform:capitalize}.italic{font-style:italic}.not-italic{font-style:normal}.tabular-nums{--tw-numeric-spacing: tabular-nums;font-variant-numeric:var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)}.leading-none{line-height:1}.leading-relaxed{line-height:1.625}.leading-snug{line-height:1.375}.leading-tight{line-height:1.25}.tracking-\\[0\\.2em\\]{letter-spacing:.2em}.tracking-\\[0\\.3em\\]{letter-spacing:.3em}.tracking-\\[0\\.5em\\]{letter-spacing:.5em}.tracking-tight{letter-spacing:-.025em}.tracking-tighter{letter-spacing:-.05em}.tracking-wide{letter-spacing:.025em}.tracking-wider{letter-spacing:.05em}.tracking-widest{letter-spacing:.1em}.text-\\[\\#333333\\]{--tw-text-opacity: 1;color:rgb(51 51 51 / var(--tw-text-opacity, 1))}.text-\\[\\#4285F4\\]{--tw-text-opacity: 1;color:rgb(66 133 244 / var(--tw-text-opacity, 1))}.text-\\[\\#5c4b37\\]{--tw-text-opacity: 1;color:rgb(92 75 55 / var(--tw-text-opacity, 1))}.text-\\[\\#6c5dd3\\]{--tw-text-opacity: 1;color:rgb(108 93 211 / var(--tw-text-opacity, 1))}.text-\\[\\#e8e8e8\\]{--tw-text-opacity: 1;color:rgb(232 232 232 / var(--tw-text-opacity, 1))}.text-accent-foreground{--tw-text-opacity: 1;color:hsl(var(--accent-foreground) / var(--tw-text-opacity, 1))}.text-amber-400{--tw-text-opacity: 1;color:rgb(251 191 36 / var(--tw-text-opacity, 1))}.text-amber-400\\/60{color:#fbbf2499}.text-amber-500{--tw-text-opacity: 1;color:rgb(245 158 11 / var(--tw-text-opacity, 1))}.text-amber-600{--tw-text-opacity: 1;color:rgb(217 119 6 / var(--tw-text-opacity, 1))}.text-amber-600\\/60{color:#d9770699}.text-amber-700{--tw-text-opacity: 1;color:rgb(180 83 9 / var(--tw-text-opacity, 1))}.text-amber-900{--tw-text-opacity: 1;color:rgb(120 53 15 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-card-foreground{--tw-text-opacity: 1;color:hsl(var(--card-foreground) / var(--tw-text-opacity, 1))}.text-current{color:currentColor}.text-cyan-500{--tw-text-opacity: 1;color:rgb(6 182 212 / var(--tw-text-opacity, 1))}.text-destructive{--tw-text-opacity: 1;color:hsl(var(--destructive) / var(--tw-text-opacity, 1))}.text-destructive-foreground{--tw-text-opacity: 1;color:hsl(var(--destructive-foreground) / var(--tw-text-opacity, 1))}.text-destructive\\/70{color:hsl(var(--destructive) / .7)}.text-emerald-500{--tw-text-opacity: 1;color:rgb(16 185 129 / var(--tw-text-opacity, 1))}.text-emerald-600{--tw-text-opacity: 1;color:rgb(5 150 105 / var(--tw-text-opacity, 1))}.text-emerald-700{--tw-text-opacity: 1;color:rgb(4 120 87 / var(--tw-text-opacity, 1))}.text-foreground{--tw-text-opacity: 1;color:hsl(var(--foreground) / var(--tw-text-opacity, 1))}.text-foreground\\/50{color:hsl(var(--foreground) / .5)}.text-foreground\\/70{color:hsl(var(--foreground) / .7)}.text-foreground\\/80{color:hsl(var(--foreground) / .8)}.text-foreground\\/90{color:hsl(var(--foreground) / .9)}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-green-900{--tw-text-opacity: 1;color:rgb(20 83 45 / var(--tw-text-opacity, 1))}.text-indigo-400{--tw-text-opacity: 1;color:rgb(129 140 248 / var(--tw-text-opacity, 1))}.text-indigo-500{--tw-text-opacity: 1;color:rgb(99 102 241 / var(--tw-text-opacity, 1))}.text-indigo-700{--tw-text-opacity: 1;color:rgb(67 56 202 / var(--tw-text-opacity, 1))}.text-muted-foreground{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.text-muted-foreground\\/60{color:hsl(var(--muted-foreground) / .6)}.text-muted-foreground\\/70{color:hsl(var(--muted-foreground) / .7)}.text-muted-foreground\\/80{color:hsl(var(--muted-foreground) / .8)}.text-orange-400{--tw-text-opacity: 1;color:rgb(251 146 60 / var(--tw-text-opacity, 1))}.text-orange-500{--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-orange-600{--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-orange-700{--tw-text-opacity: 1;color:rgb(194 65 12 / var(--tw-text-opacity, 1))}.text-orange-900{--tw-text-opacity: 1;color:rgb(124 45 18 / var(--tw-text-opacity, 1))}.text-pink-400{--tw-text-opacity: 1;color:rgb(244 114 182 / var(--tw-text-opacity, 1))}.text-pink-500{--tw-text-opacity: 1;color:rgb(236 72 153 / var(--tw-text-opacity, 1))}.text-pink-600{--tw-text-opacity: 1;color:rgb(219 39 119 / var(--tw-text-opacity, 1))}.text-pink-700{--tw-text-opacity: 1;color:rgb(190 24 93 / var(--tw-text-opacity, 1))}.text-pink-900{--tw-text-opacity: 1;color:rgb(131 24 67 / var(--tw-text-opacity, 1))}.text-popover-foreground{--tw-text-opacity: 1;color:hsl(var(--popover-foreground) / var(--tw-text-opacity, 1))}.text-primary{--tw-text-opacity: 1;color:hsl(var(--primary) / var(--tw-text-opacity, 1))}.text-primary-foreground{--tw-text-opacity: 1;color:hsl(var(--primary-foreground) / var(--tw-text-opacity, 1))}.text-primary-foreground\\/70{color:hsl(var(--primary-foreground) / .7)}.text-primary-foreground\\/80{color:hsl(var(--primary-foreground) / .8)}.text-primary\\/30{color:hsl(var(--primary) / .3)}.text-primary\\/40{color:hsl(var(--primary) / .4)}.text-primary\\/60{color:hsl(var(--primary) / .6)}.text-primary\\/70{color:hsl(var(--primary) / .7)}.text-purple-700{--tw-text-opacity: 1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-purple-900{--tw-text-opacity: 1;color:rgb(88 28 135 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-rose-400{--tw-text-opacity: 1;color:rgb(251 113 133 / var(--tw-text-opacity, 1))}.text-rose-500{--tw-text-opacity: 1;color:rgb(244 63 94 / var(--tw-text-opacity, 1))}.text-rose-700{--tw-text-opacity: 1;color:rgb(190 18 60 / var(--tw-text-opacity, 1))}.text-secondary-foreground{--tw-text-opacity: 1;color:hsl(var(--secondary-foreground) / var(--tw-text-opacity, 1))}.text-sidebar-foreground{--tw-text-opacity: 1;color:hsl(var(--sidebar-foreground) / var(--tw-text-opacity, 1))}.text-sidebar-foreground\\/70{color:hsl(var(--sidebar-foreground) / .7)}.text-slate-600{--tw-text-opacity: 1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.text-teal-500{--tw-text-opacity: 1;color:rgb(20 184 166 / var(--tw-text-opacity, 1))}.text-transparent{color:transparent}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-white\\/80{color:#fffc}.text-yellow-500{--tw-text-opacity: 1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.text-yellow-600{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity: 1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.text-yellow-900{--tw-text-opacity: 1;color:rgb(113 63 18 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.decoration-primary\\/10{text-decoration-color:hsl(var(--primary) / .1)}.underline-offset-4{text-underline-offset:4px}.underline-offset-8{text-underline-offset:8px}.opacity-0{opacity:0}.opacity-10{opacity:.1}.opacity-20{opacity:.2}.opacity-30{opacity:.3}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-80{opacity:.8}.opacity-90{opacity:.9}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0_0_1px_hsl\\(var\\(--sidebar-border\\)\\)\\]{--tw-shadow: 0 0 0 1px hsl(var(--sidebar-border));--tw-shadow-colored: 0 0 0 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0_15px_rgba\\(251\\,191\\,36\\,0\\.4\\)\\]{--tw-shadow: 0 0 15px rgba(251,191,36,.4);--tw-shadow-colored: 0 0 15px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0_15px_rgba\\(var\\(--primary\\)\\,0\\.4\\)\\]{--tw-shadow: 0 0 15px rgba(var(--primary),.4);--tw-shadow-colored: 0 0 15px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_20px_50px_rgba\\(0\\,0\\,0\\,0\\.1\\)\\]{--tw-shadow: 0 20px 50px rgba(0,0,0,.1);--tw-shadow-colored: 0 20px 50px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_20px_50px_rgba\\(79\\,70\\,229\\,0\\.3\\)\\]{--tw-shadow: 0 20px 50px rgba(79,70,229,.3);--tw-shadow-colored: 0 20px 50px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_50px_100px_rgba\\(0\\,0\\,0\\,0\\.5\\)\\]{--tw-shadow: 0 50px 100px rgba(0,0,0,.5);--tw-shadow-colored: 0 50px 100px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_50px_100px_rgba\\(79\\,70\\,229\\,0\\.4\\)\\]{--tw-shadow: 0 50px 100px rgba(79,70,229,.4);--tw-shadow-colored: 0 50px 100px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-none{--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-amber-500\\/20{--tw-shadow-color: rgb(245 158 11 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-amber-500\\/25{--tw-shadow-color: rgb(245 158 11 / .25);--tw-shadow: var(--tw-shadow-colored)}.shadow-amber-500\\/30{--tw-shadow-color: rgb(245 158 11 / .3);--tw-shadow: var(--tw-shadow-colored)}.shadow-amber-500\\/50{--tw-shadow-color: rgb(245 158 11 / .5);--tw-shadow: var(--tw-shadow-colored)}.shadow-blue-500\\/20{--tw-shadow-color: rgb(59 130 246 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-blue-500\\/30{--tw-shadow-color: rgb(59 130 246 / .3);--tw-shadow: var(--tw-shadow-colored)}.shadow-blue-600\\/50{--tw-shadow-color: rgb(37 99 235 / .5);--tw-shadow: var(--tw-shadow-colored)}.shadow-cyan-500\\/20{--tw-shadow-color: rgb(6 182 212 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-destructive\\/20{--tw-shadow-color: hsl(var(--destructive) / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-emerald-500\\/20{--tw-shadow-color: rgb(16 185 129 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-green-500\\/20{--tw-shadow-color: rgb(34 197 94 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-green-500\\/30{--tw-shadow-color: rgb(34 197 94 / .3);--tw-shadow: var(--tw-shadow-colored)}.shadow-indigo-500\\/50{--tw-shadow-color: rgb(99 102 241 / .5);--tw-shadow: var(--tw-shadow-colored)}.shadow-primary\\/10{--tw-shadow-color: hsl(var(--primary) / .1);--tw-shadow: var(--tw-shadow-colored)}.shadow-primary\\/20{--tw-shadow-color: hsl(var(--primary) / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-primary\\/30{--tw-shadow-color: hsl(var(--primary) / .3);--tw-shadow: var(--tw-shadow-colored)}.shadow-primary\\/40{--tw-shadow-color: hsl(var(--primary) / .4);--tw-shadow: var(--tw-shadow-colored)}.shadow-purple-500\\/20{--tw-shadow-color: rgb(168 85 247 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-rose-500\\/20{--tw-shadow-color: rgb(244 63 94 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-rose-500\\/30{--tw-shadow-color: rgb(244 63 94 / .3);--tw-shadow: var(--tw-shadow-colored)}.shadow-rose-500\\/40{--tw-shadow-color: rgb(244 63 94 / .4);--tw-shadow: var(--tw-shadow-colored)}.shadow-rose-600\\/50{--tw-shadow-color: rgb(225 29 72 / .5);--tw-shadow: var(--tw-shadow-colored)}.shadow-slate-600\\/50{--tw-shadow-color: rgb(71 85 105 / .5);--tw-shadow: var(--tw-shadow-colored)}.shadow-teal-500\\/30{--tw-shadow-color: rgb(20 184 166 / .3);--tw-shadow: var(--tw-shadow-colored)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.outline-2{outline-width:2px}.outline-offset-2{outline-offset:2px}.outline-transparent{outline-color:transparent}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-4{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-background{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--background) / var(--tw-ring-opacity, 1))}.ring-border{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--border) / var(--tw-ring-opacity, 1))}.ring-green-500\\/20{--tw-ring-color: rgb(34 197 94 / .2)}.ring-green-500\\/50{--tw-ring-color: rgb(34 197 94 / .5)}.ring-primary{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--primary) / var(--tw-ring-opacity, 1))}.ring-primary\\/10{--tw-ring-color: hsl(var(--primary) / .1)}.ring-primary\\/15{--tw-ring-color: hsl(var(--primary) / .15)}.ring-primary\\/20{--tw-ring-color: hsl(var(--primary) / .2)}.ring-ring{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--ring) / var(--tw-ring-opacity, 1))}.ring-sidebar-ring{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--sidebar-ring) / var(--tw-ring-opacity, 1))}.ring-slate-500\\/20{--tw-ring-color: rgb(100 116 139 / .2)}.ring-white\\/10{--tw-ring-color: rgb(255 255 255 / .1)}.ring-offset-background{--tw-ring-offset-color: hsl(var(--background) / 1)}.blur-2xl{--tw-blur: blur(40px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-3xl{--tw-blur: blur(64px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-\\[100px\\]{--tw-blur: blur(100px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-\\[120px\\]{--tw-blur: blur(120px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-\\[150px\\]{--tw-blur: blur(150px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-xl{--tw-blur: blur(24px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-\\[0_0_12px_rgba\\(245\\,158\\,11\\,0\\.7\\)\\]{--tw-drop-shadow: drop-shadow(0 0 12px rgba(245,158,11,.7));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-\\[0_0_20px_rgba\\(251\\,191\\,36\\,0\\.5\\)\\]{--tw-drop-shadow: drop-shadow(0 0 20px rgba(251,191,36,.5));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-md{--tw-drop-shadow: drop-shadow(0 4px 3px rgb(0 0 0 / .07)) drop-shadow(0 2px 2px rgb(0 0 0 / .06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-sm{--tw-drop-shadow: drop-shadow(0 1px 1px rgb(0 0 0 / .05));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.sepia{--tw-sepia: sepia(100%);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur{--tw-backdrop-blur: blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-2xl{--tw-backdrop-blur: blur(40px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-md{--tw-backdrop-blur: blur(12px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-xl{--tw-backdrop-blur: blur(24px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[left\\,right\\,width\\]{transition-property:left,right,width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[margin\\,opacity\\]{transition-property:margin,opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[width\\,height\\,padding\\]{transition-property:width,height,padding;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[width\\]{transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.delay-100{transition-delay:.1s}.duration-1000{transition-duration:1s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.duration-500{transition-duration:.5s}.duration-700{transition-duration:.7s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{transition-timing-function:linear}@keyframes enter{0%{opacity:var(--tw-enter-opacity, 1);transform:translate3d(var(--tw-enter-translate-x, 0),var(--tw-enter-translate-y, 0),0) scale3d(var(--tw-enter-scale, 1),var(--tw-enter-scale, 1),var(--tw-enter-scale, 1)) rotate(var(--tw-enter-rotate, 0))}}@keyframes exit{to{opacity:var(--tw-exit-opacity, 1);transform:translate3d(var(--tw-exit-translate-x, 0),var(--tw-exit-translate-y, 0),0) scale3d(var(--tw-exit-scale, 1),var(--tw-exit-scale, 1),var(--tw-exit-scale, 1)) rotate(var(--tw-exit-rotate, 0))}}.animate-in{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.fade-in-0{--tw-enter-opacity: 0}.fade-in-80{--tw-enter-opacity: .8}.zoom-in-95{--tw-enter-scale: .95}.slide-in-from-bottom{--tw-enter-translate-y: 100%}.duration-1000{animation-duration:1s}.duration-200{animation-duration:.2s}.duration-300{animation-duration:.3s}.duration-500{animation-duration:.5s}.duration-700{animation-duration:.7s}.delay-100{animation-delay:.1s}.ease-in-out{animation-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{animation-timing-function:linear}input[type=search]::-webkit-search-cancel-button{display:none}[contenteditable][data-placeholder]:empty:before{content:attr(data-placeholder);color:hsl(var(--muted-foreground));pointer-events:none}.toggle-elevate:before,.toggle-elevate-2:before{content:\"\";pointer-events:none;position:absolute;top:0;right:0;bottom:0;left:0;border-radius:inherit;z-index:-1}.toggle-elevate.toggle-elevated:before{background-color:var(--elevate-2)}.border.toggle-elevate:before{top:-1px;right:-1px;bottom:-1px;left:-1px}.hover-elevate:not(.no-default-hover-elevate),.active-elevate:not(.no-default-active-elevate),.hover-elevate-2:not(.no-default-hover-elevate),.active-elevate-2:not(.no-default-active-elevate){position:relative;z-index:0}.hover-elevate:not(.no-default-hover-elevate):after,.active-elevate:not(.no-default-active-elevate):after,.hover-elevate-2:not(.no-default-hover-elevate):after,.active-elevate-2:not(.no-default-active-elevate):after{content:\"\";pointer-events:none;position:absolute;top:0;right:0;bottom:0;left:0;border-radius:inherit;z-index:999}.hover-elevate:hover:not(.no-default-hover-elevate):after,.active-elevate:active:not(.no-default-active-elevate):after{background-color:var(--elevate-1)}.hover-elevate-2:hover:not(.no-default-hover-elevate):after,.active-elevate-2:active:not(.no-default-active-elevate):after{background-color:var(--elevate-2)}.border.hover-elevate:not(.no-hover-interaction-elevate):after,.border.active-elevate:not(.no-active-interaction-elevate):after,.border.hover-elevate-2:not(.no-hover-interaction-elevate):after,.border.active-elevate-2:not(.no-active-interaction-elevate):after{top:-1px;right:-1px;bottom:-1px;left:-1px}.reading-themed-content{color:var(--reading-text)}.reading-themed-content h1,.reading-themed-content .verse-text,.reading-themed-content .chapter-number,.reading-themed-content .book-name{color:var(--reading-text)!important}.reading-themed-content .verse-number{color:var(--reading-text)!important;opacity:.6}.\\[border-color\\:var\\(--badge-outline\\)\\]{border-color:var(--badge-outline)}.\\[border-color\\:var\\(--button-outline\\)\\]{border-color:var(--button-outline)}.glass-darker{background:linear-gradient(145deg,hsl(var(--card)),hsl(var(--background)));backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);box-shadow:0 20px 40px -10px #00000026,0 8px 16px -6px #0000001a,inset 0 1px #ffffff80;border:2px solid hsl(var(--border))}.dark .glass-darker{background:linear-gradient(145deg,#121223fa,#0c0c1cfc);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);box-shadow:0 25px 50px -12px #00000080,0 12px 20px -8px #00000059,inset 0 1px #ffffff14;border:1px solid rgba(255,255,255,.08)}.premium-card{background:linear-gradient(145deg,hsl(var(--card)),hsl(var(--background)));backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);box-shadow:0 20px 40px -10px #0000001f,0 8px 16px -6px #00000014,inset 0 1px #fff9;border:2px solid hsl(var(--border))}.dark .premium-card{background:linear-gradient(145deg,#0f0f20fa,#0a0a19fc);box-shadow:0 20px 40px -10px #00000073,0 8px 16px -6px #0000004d,inset 0 1px #ffffff0f;border:1px solid rgba(255,255,255,.06)}.stat-card-primary{background:linear-gradient(135deg,#6366f114,#8b5cf61f);border:1px solid rgba(99,102,241,.2);box-shadow:0 4px 15px -3px #6366f126}.stat-card-green{background:linear-gradient(135deg,#22c55e14,#10b9811f);border:1px solid rgba(34,197,94,.2);box-shadow:0 4px 15px -3px #22c55e26}.stat-card-amber{background:linear-gradient(135deg,#f59e0b14,#fbbf241f);border:1px solid rgba(245,158,11,.2);box-shadow:0 4px 15px -3px #f59e0b26}.stat-card-rose{background:linear-gradient(135deg,#f43f5e14,#fb71851f);border:1px solid rgba(244,63,94,.2);box-shadow:0 4px 15px -3px #f43f5e26}.stat-card-blue{background:linear-gradient(135deg,#3b82f614,#60a5fa1f);border:1px solid rgba(59,130,246,.2);box-shadow:0 4px 15px -3px #3b82f626}.profile-hero-card{background:linear-gradient(135deg,hsl(var(--card)),#fbf9f4,#f3f2f8);box-shadow:0 25px 50px -12px #0000001a,0 12px 24px -8px #0000000f,inset 0 1px #fffc}.dark .profile-hero-card{background:linear-gradient(135deg,hsl(var(--card)),#1e1e3ce6,#28193ce6);box-shadow:0 25px 50px -12px #0006,0 12px 24px -8px #0000004d,inset 0 1px #ffffff0d}.subtle-card{background:linear-gradient(145deg,hsl(var(--card)),#faf8f5,#f6f7f9)}.dark .subtle-card{background:linear-gradient(145deg,hsl(var(--card)),#19192df2,#1e1932f2)}.glass-premium{background:linear-gradient(135deg,hsl(var(--card) / .95),hsl(var(--background) / .85))!important;backdrop-filter:blur(24px) saturate(180%)!important;-webkit-backdrop-filter:blur(24px) saturate(180%)!important;border:1px solid hsl(var(--primary) / .3)!important;box-shadow:0 20px 40px -10px #0003,0 0 20px -5px hsl(var(--primary) / .2),inset 0 1px 2px #ffffff80!important}.dark .glass-premium{background:linear-gradient(135deg,#141628f2,#0c0e1ee6)!important;border:1px solid hsl(var(--primary) / .4)!important;box-shadow:0 25px 50px -12px #000000b3,0 0 40px -10px hsl(var(--primary) / .3),inset 0 1px 1px #ffffff14!important}.hover-premium{transition:all .5s cubic-bezier(.34,1.56,.64,1)!important;position:relative;z-index:10}.hover-premium:hover{transform:translateY(-10px) scale(1.02)!important;box-shadow:0 40px 80px -20px #0000004d,0 0 50px -10px hsl(var(--primary) / .4)!important;border-color:hsl(var(--primary) / .6)!important;z-index:50}.dark .hover-premium:hover{box-shadow:0 50px 100px -15px #000c,0 0 60px -12px hsl(var(--primary) / .5)!important;border-color:hsl(var(--primary) / .7)!important}.mesh-primary{background-color:hsl(var(--background))!important;background-image:radial-gradient(at 0% 0%,hsl(var(--primary) / .15) 0px,transparent 50%),radial-gradient(at 100% 0%,hsl(var(--accent) / .1) 0px,transparent 50%),radial-gradient(at 100% 100%,hsl(var(--primary) / .15) 0px,transparent 50%),radial-gradient(at 0% 100%,hsl(var(--accent) / .1) 0px,transparent 50%),radial-gradient(at 50% 50%,hsl(var(--primary) / .05) 0px,transparent 50%)!important;background-attachment:fixed!important}.card-accent-amber{background:linear-gradient(135deg,#f59e0b0f,#fbbf241a,hsl(var(--card) / .95));border:1px solid rgba(245,158,11,.2);box-shadow:0 8px 25px -5px #f59e0b1f}.card-accent-blue{background:linear-gradient(135deg,#3b82f60f,#6366f11a,hsl(var(--card) / .95));border:1px solid rgba(59,130,246,.2);box-shadow:0 8px 25px -5px #3b82f61f}.card-accent-emerald{background:linear-gradient(135deg,#10b9810f,#34d3991a,hsl(var(--card) / .95));border:1px solid rgba(16,185,129,.2);box-shadow:0 8px 25px -5px #10b9811f}.card-accent-rose{background:linear-gradient(135deg,#f43f5e0f,#fb71851a,hsl(var(--card) / .95));border:1px solid rgba(244,63,94,.2);box-shadow:0 8px 25px -5px #f43f5e1f}.card-accent-purple{background:linear-gradient(135deg,#8b5cf60f,#a855f71a,hsl(var(--card) / .95));border:1px solid rgba(139,92,246,.2);box-shadow:0 8px 25px -5px #8b5cf61f}:root{--button-outline: rgba(0,0,0, .08);--badge-outline: rgba(0,0,0, .04);--opaque-button-border-intensity: -6;--elevate-1: rgba(59, 82, 120, .06);--elevate-2: rgba(59, 82, 120, .12);--background: 40 30% 98%;--foreground: 220 15% 35%;--border: 40 15% 88%;--card: 40 40% 99%;--card-foreground: 220 15% 32%;--card-border: 40 20% 90%;--sidebar: 40 25% 97%;--sidebar-foreground: 220 15% 38%;--sidebar-border: 40 20% 88%;--sidebar-primary: 220 35% 38%;--sidebar-primary-foreground: 0 0% 100%;--sidebar-accent: 40 40% 94%;--sidebar-accent-foreground: 220 30% 32%;--sidebar-ring: 220 35% 38%;--popover: 40 35% 99%;--popover-foreground: 220 15% 32%;--popover-border: 40 20% 88%;--primary: 220 35% 38%;--primary-foreground: 0 0% 100%;--secondary: 40 25% 93%;--secondary-foreground: 220 30% 35%;--muted: 40 20% 95%;--muted-foreground: 220 15% 45%;--accent: 38 75% 48%;--accent-foreground: 220 30% 15%;--destructive: 0 70% 55%;--destructive-foreground: 0 0% 100%;--input: 40 20% 85%;--ring: 220 35% 38%;--chart-1: 220 40% 45%;--chart-2: 40 80% 50%;--chart-3: 16 75% 50%;--chart-4: 180 55% 42%;--chart-5: 330 70% 50%;--font-sans: Inter, sans-serif;--font-serif: Crimson Text, serif;--font-display: Playfair Display, serif;--font-mono: Menlo, monospace;--radius: .5rem;--shadow-2xs: 0px 1px 2px 0px hsl(220 20% 15% / .05);--shadow-xs: 0px 1px 2px 0px hsl(220 20% 15% / .08), 0px 1px 3px 0px hsl(220 20% 15% / .1);--shadow-sm: 0px 1px 3px 0px hsl(220 20% 15% / .1), 0px 1px 2px -1px hsl(220 20% 15% / .1);--shadow: 0px 2px 4px 0px hsl(220 20% 15% / .07), 0px 1px 2px -1px hsl(220 20% 15% / .06);--shadow-md: 0px 4px 6px -1px hsl(220 20% 15% / .1), 0px 2px 4px -2px hsl(220 20% 15% / .1);--shadow-lg: 0px 10px 15px -3px hsl(220 20% 15% / .1), 0px 4px 6px -4px hsl(220 20% 15% / .1);--shadow-xl: 0px 20px 25px -5px hsl(220 20% 15% / .12), 0px 8px 10px -6px hsl(220 20% 15% / .1);--shadow-2xl: 0px 25px 50px -12px hsl(220 20% 15% / .25), 0px 12px 20px -8px hsl(220 20% 15% / .15);--tracking-normal: 0em;--spacing: .25rem;--sidebar-primary-border: hsl(var(--sidebar-primary));--sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--sidebar-accent-border: hsl(var(--sidebar-accent));--sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--primary-border: hsl(var(--primary));--primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--secondary-border: hsl(var(--secondary));--secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--muted-border: hsl(var(--muted));--muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--accent-border: hsl(var(--accent));--accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--destructive-border: hsl(var(--destructive));--destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha)}.dark{--button-outline: rgba(255,255,255, .1);--badge-outline: rgba(255,255,255, .06);--opaque-button-border-intensity: 8;--elevate-1: rgba(130, 155, 195, .1);--elevate-2: rgba(130, 155, 195, .16);--background: 220 25% 10%;--foreground: 40 20% 92%;--border: 220 20% 18%;--card: 220 22% 13%;--card-foreground: 40 15% 90%;--card-border: 220 18% 16%;--sidebar: 220 25% 11%;--sidebar-foreground: 40 20% 90%;--sidebar-border: 220 20% 16%;--sidebar-primary: 38 70% 52%;--sidebar-primary-foreground: 220 30% 10%;--sidebar-accent: 220 25% 18%;--sidebar-accent-foreground: 38 70% 58%;--sidebar-ring: 38 70% 52%;--popover: 220 22% 13%;--popover-foreground: 40 15% 90%;--popover-border: 220 18% 16%;--primary: 220 45% 58%;--primary-foreground: 0 0% 100%;--secondary: 220 20% 16%;--secondary-foreground: 220 40% 75%;--muted: 220 18% 18%;--muted-foreground: 220 15% 60%;--accent: 38 70% 52%;--accent-foreground: 220 30% 10%;--destructive: 0 65% 55%;--destructive-foreground: 0 0% 100%;--input: 220 20% 18%;--ring: 220 45% 58%;--chart-1: 220 50% 55%;--chart-2: 40 80% 52%;--chart-3: 16 75% 52%;--chart-4: 170 55% 48%;--chart-5: 330 70% 55%;--shadow-2xs: 0px 1px 2px 0px hsl(220 20% 0% / .2);--shadow-xs: 0px 1px 2px 0px hsl(220 20% 0% / .25), 0px 1px 3px 0px hsl(220 20% 0% / .3);--shadow-sm: 0px 1px 3px 0px hsl(220 20% 0% / .3), 0px 1px 2px -1px hsl(220 20% 0% / .3);--shadow: 0px 2px 4px 0px hsl(220 20% 0% / .25), 0px 1px 2px -1px hsl(220 20% 0% / .2);--shadow-md: 0px 4px 6px -1px hsl(220 20% 0% / .3), 0px 2px 4px -2px hsl(220 20% 0% / .3);--shadow-lg: 0px 10px 15px -3px hsl(220 20% 0% / .35), 0px 4px 6px -4px hsl(220 20% 0% / .3);--shadow-xl: 0px 20px 25px -5px hsl(220 20% 0% / .4), 0px 8px 10px -6px hsl(220 20% 0% / .35);--shadow-2xl: 0px 25px 50px -12px hsl(220 20% 0% / .5), 0px 12px 20px -8px hsl(220 20% 0% / .4);--sidebar-primary-border: hsl(var(--sidebar-primary));--sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--sidebar-accent-border: hsl(var(--sidebar-accent));--sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--primary-border: hsl(var(--primary));--primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--secondary-border: hsl(var(--secondary));--secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--muted-border: hsl(var(--muted));--muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--accent-border: hsl(var(--accent));--accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);--destructive-border: hsl(var(--destructive));--destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha)}.selection\\:bg-primary *::-moz-selection{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.selection\\:bg-primary *::selection{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.selection\\:bg-primary\\/30 *::-moz-selection{background-color:hsl(var(--primary) / .3)}.selection\\:bg-primary\\/30 *::selection{background-color:hsl(var(--primary) / .3)}.selection\\:text-white *::-moz-selection{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.selection\\:text-white *::selection{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.selection\\:bg-primary::-moz-selection{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.selection\\:bg-primary::selection{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.selection\\:bg-primary\\/30::-moz-selection{background-color:hsl(var(--primary) / .3)}.selection\\:bg-primary\\/30::selection{background-color:hsl(var(--primary) / .3)}.selection\\:text-white::-moz-selection{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.selection\\:text-white::selection{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.file\\:border-0::file-selector-button{border-width:0px}.file\\:bg-transparent::file-selector-button{background-color:transparent}.file\\:text-sm::file-selector-button{font-size:.875rem;line-height:1.25rem}.file\\:font-medium::file-selector-button{font-weight:500}.file\\:text-foreground::file-selector-button{--tw-text-opacity: 1;color:hsl(var(--foreground) / var(--tw-text-opacity, 1))}.placeholder\\:text-muted-foreground::-moz-placeholder{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.placeholder\\:text-muted-foreground::placeholder{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.after\\:pointer-events-none:after{content:var(--tw-content);pointer-events:none}.after\\:absolute:after{content:var(--tw-content);position:absolute}.after\\:-inset-2:after{content:var(--tw-content);top:-.5rem;right:-.5rem;bottom:-.5rem;left:-.5rem}.after\\:inset-0:after{content:var(--tw-content);top:0;right:0;bottom:0;left:0}.after\\:inset-y-0:after{content:var(--tw-content);top:0;bottom:0}.after\\:left-1\\/2:after{content:var(--tw-content);left:50%}.after\\:block:after{content:var(--tw-content);display:block}.after\\:w-1:after{content:var(--tw-content);width:.25rem}.after\\:w-\\[2px\\]:after{content:var(--tw-content);width:2px}.after\\:-translate-x-1\\/2:after{content:var(--tw-content);--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.after\\:rounded-full:after{content:var(--tw-content);border-radius:9999px}.after\\:border:after{content:var(--tw-content);border-width:1px}.after\\:border-black\\/10:after{content:var(--tw-content);border-color:#0000001a}.after\\:content-\\[\\'\\'\\]:after{--tw-content: \"\";content:var(--tw-content)}.after\\:border.toggle-elevate:after:before{content:var(--tw-content);top:-1px;right:-1px;bottom:-1px;left:-1px}.after\\:border.hover-elevate:not(.no-hover-interaction-elevate):after:after,.after\\:border.active-elevate:not(.no-active-interaction-elevate):after:after,.after\\:border.hover-elevate-2:not(.no-hover-interaction-elevate):after:after,.after\\:border.active-elevate-2:not(.no-active-interaction-elevate):after:after{content:var(--tw-content);top:-1px;right:-1px;bottom:-1px;left:-1px}.first\\:rounded-l-md:first-child{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem}.first\\:border-l:first-child{border-left-width:1px}.last\\:rounded-r-md:last-child{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem}.last\\:border-b-0:last-child{border-bottom-width:0px}.focus-within\\:relative:focus-within{position:relative}.focus-within\\:z-20:focus-within{z-index:20}.hover\\:scale-105:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-110:hover{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-\\[1\\.01\\]:hover{--tw-scale-x: 1.01;--tw-scale-y: 1.01;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-\\[1\\.02\\]:hover{--tw-scale-x: 1.02;--tw-scale-y: 1.02;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-\\[1\\.03\\]:hover{--tw-scale-x: 1.03;--tw-scale-y: 1.03;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:border-amber-500\\/30:hover{border-color:#f59e0b4d}.hover\\:border-primary:hover{--tw-border-opacity: 1;border-color:hsl(var(--primary) / var(--tw-border-opacity, 1))}.hover\\:border-primary\\/20:hover{border-color:hsl(var(--primary) / .2)}.hover\\:border-primary\\/40:hover{border-color:hsl(var(--primary) / .4)}.hover\\:border-primary\\/50:hover{border-color:hsl(var(--primary) / .5)}.hover\\:bg-accent:hover{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.hover\\:bg-accent\\/50:hover{background-color:hsl(var(--accent) / .5)}.hover\\:bg-black\\/40:hover{background-color:#0006}.hover\\:bg-blue-100:hover{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hover\\:bg-card:hover{--tw-bg-opacity: 1;background-color:hsl(var(--card) / var(--tw-bg-opacity, 1))}.hover\\:bg-card\\/5:hover{background-color:hsl(var(--card) / .05)}.hover\\:bg-card\\/60:hover{background-color:hsl(var(--card) / .6)}.hover\\:bg-card\\/90:hover{background-color:hsl(var(--card) / .9)}.hover\\:bg-destructive\\/10:hover{background-color:hsl(var(--destructive) / .1)}.hover\\:bg-destructive\\/90:hover{background-color:hsl(var(--destructive) / .9)}.hover\\:bg-green-100:hover{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.hover\\:bg-green-50:hover{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.hover\\:bg-green-600:hover{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\\:bg-muted:hover{--tw-bg-opacity: 1;background-color:hsl(var(--muted) / var(--tw-bg-opacity, 1))}.hover\\:bg-muted\\/50:hover{background-color:hsl(var(--muted) / .5)}.hover\\:bg-muted\\/80:hover{background-color:hsl(var(--muted) / .8)}.hover\\:bg-primary:hover{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.hover\\:bg-primary-foreground:hover{--tw-bg-opacity: 1;background-color:hsl(var(--primary-foreground) / var(--tw-bg-opacity, 1))}.hover\\:bg-primary\\/10:hover{background-color:hsl(var(--primary) / .1)}.hover\\:bg-primary\\/90:hover{background-color:hsl(var(--primary) / .9)}.hover\\:bg-secondary:hover{--tw-bg-opacity: 1;background-color:hsl(var(--secondary) / var(--tw-bg-opacity, 1))}.hover\\:bg-secondary\\/80:hover{background-color:hsl(var(--secondary) / .8)}.hover\\:bg-sidebar-accent:hover{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar-accent) / var(--tw-bg-opacity, 1))}.hover\\:bg-transparent:hover{background-color:transparent}.hover\\:from-amber-600:hover{--tw-gradient-from: #d97706 var(--tw-gradient-from-position);--tw-gradient-to: rgb(217 119 6 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.hover\\:from-primary\\/10:hover{--tw-gradient-from: hsl(var(--primary) / .1) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.hover\\:from-primary\\/90:hover{--tw-gradient-from: hsl(var(--primary) / .9) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.hover\\:to-blue-700:hover{--tw-gradient-to: #1d4ed8 var(--tw-gradient-to-position)}.hover\\:to-orange-600:hover{--tw-gradient-to: #ea580c var(--tw-gradient-to-position)}.hover\\:to-transparent:hover{--tw-gradient-to: transparent var(--tw-gradient-to-position)}.hover\\:tracking-widest:hover{letter-spacing:.1em}.hover\\:text-accent-foreground:hover{--tw-text-opacity: 1;color:hsl(var(--accent-foreground) / var(--tw-text-opacity, 1))}.hover\\:text-destructive:hover{--tw-text-opacity: 1;color:hsl(var(--destructive) / var(--tw-text-opacity, 1))}.hover\\:text-foreground:hover{--tw-text-opacity: 1;color:hsl(var(--foreground) / var(--tw-text-opacity, 1))}.hover\\:text-green-700:hover{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.hover\\:text-muted-foreground:hover{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.hover\\:text-primary:hover{--tw-text-opacity: 1;color:hsl(var(--primary) / var(--tw-text-opacity, 1))}.hover\\:text-primary-foreground:hover{--tw-text-opacity: 1;color:hsl(var(--primary-foreground) / var(--tw-text-opacity, 1))}.hover\\:text-primary\\/80:hover{color:hsl(var(--primary) / .8)}.hover\\:text-sidebar-accent-foreground:hover{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}.hover\\:text-white:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:no-underline:hover{text-decoration-line:none}.hover\\:opacity-100:hover{opacity:1}.hover\\:shadow-2xl:hover{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-\\[0_0_0_1px_hsl\\(var\\(--sidebar-accent\\)\\)\\]:hover{--tw-shadow: 0 0 0 1px hsl(var(--sidebar-accent));--tw-shadow-colored: 0 0 0 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-lg:hover{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-md:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-xl:hover{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\\:shadow-primary\\/20:hover{--tw-shadow-color: hsl(var(--primary) / .2);--tw-shadow: var(--tw-shadow-colored)}.hover\\:shadow-primary\\/30:hover{--tw-shadow-color: hsl(var(--primary) / .3);--tw-shadow: var(--tw-shadow-colored)}.hover\\:ring-green-500\\/40:hover{--tw-ring-color: rgb(34 197 94 / .4)}.hover\\:ring-primary\\/30:hover{--tw-ring-color: hsl(var(--primary) / .3)}.hover\\:ring-primary\\/40:hover{--tw-ring-color: hsl(var(--primary) / .4)}.hover\\:after\\:bg-sidebar-border:hover:after{content:var(--tw-content);--tw-bg-opacity: 1;background-color:hsl(var(--sidebar-border) / var(--tw-bg-opacity, 1))}.focus\\:border-primary:focus{--tw-border-opacity: 1;border-color:hsl(var(--primary) / var(--tw-border-opacity, 1))}.focus\\:bg-accent:focus{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.focus\\:bg-destructive\\/10:focus{background-color:hsl(var(--destructive) / .1)}.focus\\:bg-destructive\\/5:focus{background-color:hsl(var(--destructive) / .05)}.focus\\:bg-primary:focus{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.focus\\:bg-primary\\/5:focus{background-color:hsl(var(--primary) / .05)}.focus\\:text-accent-foreground:focus{--tw-text-opacity: 1;color:hsl(var(--accent-foreground) / var(--tw-text-opacity, 1))}.focus\\:text-destructive:focus{--tw-text-opacity: 1;color:hsl(var(--destructive) / var(--tw-text-opacity, 1))}.focus\\:text-primary-foreground:focus{--tw-text-opacity: 1;color:hsl(var(--primary-foreground) / var(--tw-text-opacity, 1))}.focus\\:opacity-100:focus{opacity:1}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-primary\\/10:focus{--tw-ring-color: hsl(var(--primary) / .1)}.focus\\:ring-ring:focus{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--ring) / var(--tw-ring-opacity, 1))}.focus\\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.focus-visible\\:border-primary:focus-visible{--tw-border-opacity: 1;border-color:hsl(var(--primary) / var(--tw-border-opacity, 1))}.focus-visible\\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\\:ring-0:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-1:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-primary:focus-visible{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--primary) / var(--tw-ring-opacity, 1))}.focus-visible\\:ring-primary\\/30:focus-visible{--tw-ring-color: hsl(var(--primary) / .3)}.focus-visible\\:ring-ring:focus-visible{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--ring) / var(--tw-ring-opacity, 1))}.focus-visible\\:ring-offset-1:focus-visible{--tw-ring-offset-width: 1px}.focus-visible\\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.focus-visible\\:ring-offset-background:focus-visible{--tw-ring-offset-color: hsl(var(--background) / 1)}.active\\:scale-95:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:scale-\\[0\\.98\\]:active{--tw-scale-x: .98;--tw-scale-y: .98;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:scale-\\[0\\.99\\]:active{--tw-scale-x: .99;--tw-scale-y: .99;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:bg-sidebar-accent:active{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar-accent) / var(--tw-bg-opacity, 1))}.active\\:text-sidebar-accent-foreground:active{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}.active\\:shadow-none:active{--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.disabled\\:pointer-events-none:disabled{pointer-events:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.group:focus-within .group-focus-within\\:text-primary{--tw-text-opacity: 1;color:hsl(var(--primary) / var(--tw-text-opacity, 1))}.group\\/menu-item:focus-within .group-focus-within\\/menu-item\\:opacity-100{opacity:1}.group\\/link:hover .group-hover\\/link\\:translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\\:translate-x-1{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\\:scale-105{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\\:scale-110{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\\:bg-blue-500\\/10{background-color:#3b82f61a}.group:hover .group-hover\\:bg-primary{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.group:hover .group-hover\\:text-primary{--tw-text-opacity: 1;color:hsl(var(--primary) / var(--tw-text-opacity, 1))}.group:hover .group-hover\\:text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.group\\/link:hover .group-hover\\/link\\:opacity-100,.group\\/menu-item:hover .group-hover\\/menu-item\\:opacity-100,.group:hover .group-hover\\:opacity-100{opacity:1}.group:hover .group-hover\\:opacity-40{opacity:.4}.group:hover .group-hover\\:opacity-\\[0\\.05\\]{opacity:.05}.group.destructive .group-\\[\\.destructive\\]\\:border-muted\\/40{border-color:hsl(var(--muted) / .4)}.group.destructive .group-\\[\\.destructive\\]\\:text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:border-destructive\\/30:hover{border-color:hsl(var(--destructive) / .3)}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:bg-destructive:hover{--tw-bg-opacity: 1;background-color:hsl(var(--destructive) / var(--tw-bg-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:text-destructive-foreground:hover{--tw-text-opacity: 1;color:hsl(var(--destructive-foreground) / var(--tw-text-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:hover\\:text-red-50:hover{--tw-text-opacity: 1;color:rgb(254 242 242 / var(--tw-text-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:focus\\:ring-destructive:focus{--tw-ring-opacity: 1;--tw-ring-color: hsl(var(--destructive) / var(--tw-ring-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:focus\\:ring-red-400:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(248 113 113 / var(--tw-ring-opacity, 1))}.group.destructive .group-\\[\\.destructive\\]\\:focus\\:ring-offset-red-600:focus{--tw-ring-offset-color: #dc2626}.peer\\/menu-button:hover~.peer-hover\\/menu-button\\:text-sidebar-accent-foreground{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}.peer:disabled~.peer-disabled\\:cursor-not-allowed{cursor:not-allowed}.peer:disabled~.peer-disabled\\:opacity-70{opacity:.7}.has-\\[\\:disabled\\]\\:opacity-50:has(:disabled){opacity:.5}.aria-disabled\\:pointer-events-none[aria-disabled=true]{pointer-events:none}.aria-disabled\\:opacity-50[aria-disabled=true]{opacity:.5}.aria-selected\\:bg-accent[aria-selected=true]{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.aria-selected\\:bg-accent\\/50[aria-selected=true]{background-color:hsl(var(--accent) / .5)}.aria-selected\\:text-accent-foreground[aria-selected=true]{--tw-text-opacity: 1;color:hsl(var(--accent-foreground) / var(--tw-text-opacity, 1))}.aria-selected\\:text-muted-foreground[aria-selected=true]{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.aria-selected\\:opacity-100[aria-selected=true]{opacity:1}.data-\\[disabled\\=true\\]\\:pointer-events-none[data-disabled=true],.data-\\[disabled\\]\\:pointer-events-none[data-disabled]{pointer-events:none}.data-\\[panel-group-direction\\=vertical\\]\\:h-px[data-panel-group-direction=vertical]{height:1px}.data-\\[panel-group-direction\\=vertical\\]\\:w-full[data-panel-group-direction=vertical]{width:100%}.data-\\[side\\=bottom\\]\\:translate-y-1[data-side=bottom]{--tw-translate-y: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=left\\]\\:-translate-x-1[data-side=left]{--tw-translate-x: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=right\\]\\:translate-x-1[data-side=right]{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=top\\]\\:-translate-y-1[data-side=top]{--tw-translate-y: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[state\\=checked\\]\\:translate-x-5[data-state=checked]{--tw-translate-x: 1.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[state\\=unchecked\\]\\:translate-x-0[data-state=unchecked],.data-\\[swipe\\=cancel\\]\\:translate-x-0[data-swipe=cancel]{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[swipe\\=end\\]\\:translate-x-\\[var\\(--radix-toast-swipe-end-x\\)\\][data-swipe=end]{--tw-translate-x: var(--radix-toast-swipe-end-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[swipe\\=move\\]\\:translate-x-\\[var\\(--radix-toast-swipe-move-x\\)\\][data-swipe=move]{--tw-translate-x: var(--radix-toast-swipe-move-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes accordion-up{0%{height:var(--radix-accordion-content-height)}to{height:0}}.data-\\[state\\=closed\\]\\:animate-accordion-up[data-state=closed]{animation:accordion-up .2s ease-out}@keyframes accordion-down{0%{height:0}to{height:var(--radix-accordion-content-height)}}.data-\\[state\\=open\\]\\:animate-accordion-down[data-state=open]{animation:accordion-down .2s ease-out}.data-\\[panel-group-direction\\=vertical\\]\\:flex-col[data-panel-group-direction=vertical]{flex-direction:column}.data-\\[active\\=true\\]\\:bg-sidebar-accent[data-active=true]{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar-accent) / var(--tw-bg-opacity, 1))}.data-\\[selected\\=\\'true\\'\\]\\:bg-accent[data-selected=true]{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.data-\\[state\\=active\\]\\:bg-background[data-state=active]{--tw-bg-opacity: 1;background-color:hsl(var(--background) / var(--tw-bg-opacity, 1))}.data-\\[state\\=active\\]\\:bg-primary[data-state=active]{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.data-\\[state\\=active\\]\\:bg-primary\\/10[data-state=active]{background-color:hsl(var(--primary) / .1)}.data-\\[state\\=checked\\]\\:bg-primary[data-state=checked]{--tw-bg-opacity: 1;background-color:hsl(var(--primary) / var(--tw-bg-opacity, 1))}.data-\\[state\\=on\\]\\:bg-accent[data-state=on],.data-\\[state\\=open\\]\\:bg-accent[data-state=open]{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.data-\\[state\\=open\\]\\:bg-accent\\/50[data-state=open]{background-color:hsl(var(--accent) / .5)}.data-\\[state\\=open\\]\\:bg-secondary[data-state=open]{--tw-bg-opacity: 1;background-color:hsl(var(--secondary) / var(--tw-bg-opacity, 1))}.data-\\[state\\=selected\\]\\:bg-muted[data-state=selected]{--tw-bg-opacity: 1;background-color:hsl(var(--muted) / var(--tw-bg-opacity, 1))}.data-\\[state\\=unchecked\\]\\:bg-input[data-state=unchecked]{--tw-bg-opacity: 1;background-color:hsl(var(--input) / var(--tw-bg-opacity, 1))}.data-\\[active\\=true\\]\\:font-medium[data-active=true]{font-weight:500}.data-\\[active\\=true\\]\\:text-sidebar-accent-foreground[data-active=true]{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}.data-\\[placeholder\\]\\:text-muted-foreground[data-placeholder]{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.data-\\[selected\\=true\\]\\:text-accent-foreground[data-selected=true]{--tw-text-opacity: 1;color:hsl(var(--accent-foreground) / var(--tw-text-opacity, 1))}.data-\\[state\\=active\\]\\:text-foreground[data-state=active]{--tw-text-opacity: 1;color:hsl(var(--foreground) / var(--tw-text-opacity, 1))}.data-\\[state\\=active\\]\\:text-primary[data-state=active]{--tw-text-opacity: 1;color:hsl(var(--primary) / var(--tw-text-opacity, 1))}.data-\\[state\\=active\\]\\:text-primary-foreground[data-state=active],.data-\\[state\\=checked\\]\\:text-primary-foreground[data-state=checked]{--tw-text-opacity: 1;color:hsl(var(--primary-foreground) / var(--tw-text-opacity, 1))}.data-\\[state\\=on\\]\\:text-accent-foreground[data-state=on],.data-\\[state\\=open\\]\\:text-accent-foreground[data-state=open]{--tw-text-opacity: 1;color:hsl(var(--accent-foreground) / var(--tw-text-opacity, 1))}.data-\\[state\\=open\\]\\:text-muted-foreground[data-state=open]{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.data-\\[disabled\\=true\\]\\:opacity-50[data-disabled=true],.data-\\[disabled\\]\\:opacity-50[data-disabled]{opacity:.5}.data-\\[state\\=open\\]\\:opacity-100[data-state=open]{opacity:1}.data-\\[state\\=active\\]\\:shadow-lg[data-state=active]{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.data-\\[state\\=active\\]\\:shadow-md[data-state=active]{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.data-\\[state\\=active\\]\\:shadow-sm[data-state=active]{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.data-\\[swipe\\=move\\]\\:transition-none[data-swipe=move]{transition-property:none}.data-\\[state\\=closed\\]\\:duration-300[data-state=closed]{transition-duration:.3s}.data-\\[state\\=open\\]\\:duration-500[data-state=open]{transition-duration:.5s}.data-\\[motion\\^\\=from-\\]\\:animate-in[data-motion^=from-],.data-\\[state\\=open\\]\\:animate-in[data-state=open],.data-\\[state\\=visible\\]\\:animate-in[data-state=visible]{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.data-\\[motion\\^\\=to-\\]\\:animate-out[data-motion^=to-],.data-\\[state\\=closed\\]\\:animate-out[data-state=closed],.data-\\[state\\=hidden\\]\\:animate-out[data-state=hidden],.data-\\[swipe\\=end\\]\\:animate-out[data-swipe=end]{animation-name:exit;animation-duration:.15s;--tw-exit-opacity: initial;--tw-exit-scale: initial;--tw-exit-rotate: initial;--tw-exit-translate-x: initial;--tw-exit-translate-y: initial}.data-\\[motion\\^\\=from-\\]\\:fade-in[data-motion^=from-]{--tw-enter-opacity: 0}.data-\\[motion\\^\\=to-\\]\\:fade-out[data-motion^=to-],.data-\\[state\\=closed\\]\\:fade-out-0[data-state=closed]{--tw-exit-opacity: 0}.data-\\[state\\=closed\\]\\:fade-out-80[data-state=closed]{--tw-exit-opacity: .8}.data-\\[state\\=hidden\\]\\:fade-out[data-state=hidden]{--tw-exit-opacity: 0}.data-\\[state\\=open\\]\\:fade-in-0[data-state=open],.data-\\[state\\=visible\\]\\:fade-in[data-state=visible]{--tw-enter-opacity: 0}.data-\\[state\\=closed\\]\\:zoom-out-95[data-state=closed]{--tw-exit-scale: .95}.data-\\[state\\=open\\]\\:zoom-in-90[data-state=open]{--tw-enter-scale: .9}.data-\\[state\\=open\\]\\:zoom-in-95[data-state=open]{--tw-enter-scale: .95}.data-\\[motion\\=from-end\\]\\:slide-in-from-right-52[data-motion=from-end]{--tw-enter-translate-x: 13rem}.data-\\[motion\\=from-start\\]\\:slide-in-from-left-52[data-motion=from-start]{--tw-enter-translate-x: -13rem}.data-\\[motion\\=to-end\\]\\:slide-out-to-right-52[data-motion=to-end]{--tw-exit-translate-x: 13rem}.data-\\[motion\\=to-start\\]\\:slide-out-to-left-52[data-motion=to-start]{--tw-exit-translate-x: -13rem}.data-\\[side\\=bottom\\]\\:slide-in-from-top-2[data-side=bottom]{--tw-enter-translate-y: -.5rem}.data-\\[side\\=left\\]\\:slide-in-from-right-2[data-side=left]{--tw-enter-translate-x: .5rem}.data-\\[side\\=right\\]\\:slide-in-from-left-2[data-side=right]{--tw-enter-translate-x: -.5rem}.data-\\[side\\=top\\]\\:slide-in-from-bottom-2[data-side=top]{--tw-enter-translate-y: .5rem}.data-\\[state\\=closed\\]\\:slide-out-to-bottom[data-state=closed]{--tw-exit-translate-y: 100%}.data-\\[state\\=closed\\]\\:slide-out-to-left[data-state=closed]{--tw-exit-translate-x: -100%}.data-\\[state\\=closed\\]\\:slide-out-to-left-1\\/2[data-state=closed]{--tw-exit-translate-x: -50%}.data-\\[state\\=closed\\]\\:slide-out-to-right[data-state=closed],.data-\\[state\\=closed\\]\\:slide-out-to-right-full[data-state=closed]{--tw-exit-translate-x: 100%}.data-\\[state\\=closed\\]\\:slide-out-to-top[data-state=closed]{--tw-exit-translate-y: -100%}.data-\\[state\\=closed\\]\\:slide-out-to-top-\\[48\\%\\][data-state=closed]{--tw-exit-translate-y: -48%}.data-\\[state\\=open\\]\\:slide-in-from-bottom[data-state=open]{--tw-enter-translate-y: 100%}.data-\\[state\\=open\\]\\:slide-in-from-left[data-state=open]{--tw-enter-translate-x: -100%}.data-\\[state\\=open\\]\\:slide-in-from-left-1\\/2[data-state=open]{--tw-enter-translate-x: -50%}.data-\\[state\\=open\\]\\:slide-in-from-right[data-state=open]{--tw-enter-translate-x: 100%}.data-\\[state\\=open\\]\\:slide-in-from-top[data-state=open]{--tw-enter-translate-y: -100%}.data-\\[state\\=open\\]\\:slide-in-from-top-\\[48\\%\\][data-state=open]{--tw-enter-translate-y: -48%}.data-\\[state\\=open\\]\\:slide-in-from-top-full[data-state=open]{--tw-enter-translate-y: -100%}.data-\\[state\\=closed\\]\\:duration-300[data-state=closed]{animation-duration:.3s}.data-\\[state\\=open\\]\\:duration-500[data-state=open]{animation-duration:.5s}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:left-0[data-panel-group-direction=vertical]:after{content:var(--tw-content);left:0}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:h-1[data-panel-group-direction=vertical]:after{content:var(--tw-content);height:.25rem}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:w-full[data-panel-group-direction=vertical]:after{content:var(--tw-content);width:100%}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:-translate-y-1\\/2[data-panel-group-direction=vertical]:after{content:var(--tw-content);--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[panel-group-direction\\=vertical\\]\\:after\\:translate-x-0[data-panel-group-direction=vertical]:after{content:var(--tw-content);--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[state\\=open\\]\\:hover\\:bg-accent:hover[data-state=open]{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.data-\\[state\\=open\\]\\:hover\\:bg-sidebar-accent:hover[data-state=open]{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar-accent) / var(--tw-bg-opacity, 1))}.data-\\[state\\=open\\]\\:hover\\:text-sidebar-accent-foreground:hover[data-state=open]{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}.data-\\[state\\=open\\]\\:focus\\:bg-accent:focus[data-state=open]{--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:left-\\[calc\\(var\\(--sidebar-width\\)\\*-1\\)\\]{left:calc(var(--sidebar-width) * -1)}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:right-\\[calc\\(var\\(--sidebar-width\\)\\*-1\\)\\]{right:calc(var(--sidebar-width) * -1)}.group[data-side=left] .group-data-\\[side\\=left\\]\\:-right-4{right:-1rem}.group[data-side=right] .group-data-\\[side\\=right\\]\\:left-0{left:0}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:-mt-8{margin-top:-2rem}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:hidden{display:none}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:w-\\[calc\\(var\\(--sidebar-width-icon\\)\\+var\\(--spacing-4\\)\\)\\]{width:calc(var(--sidebar-width-icon) + var(--spacing-4))}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:w-\\[calc\\(var\\(--sidebar-width-icon\\)\\+var\\(--spacing-4\\)\\+2px\\)\\]{width:calc(var(--sidebar-width-icon) + var(--spacing-4) + 2px)}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:w-\\[var\\(--sidebar-width-icon\\)\\]{width:var(--sidebar-width-icon)}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:w-0{width:0px}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group[data-side=right] .group-data-\\[side\\=right\\]\\:rotate-180,.group[data-state=open] .group-data-\\[state\\=open\\]\\:rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:overflow-hidden{overflow:hidden}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:rounded-lg{border-radius:.5625rem}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border{border-width:1px}.group[data-side=left] .group-data-\\[side\\=left\\]\\:border-r{border-right-width:1px}.group[data-side=right] .group-data-\\[side\\=right\\]\\:border-l{border-left-width:1px}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border-sidebar-border{--tw-border-opacity: 1;border-color:hsl(var(--sidebar-border) / var(--tw-border-opacity, 1))}.group[data-collapsible=icon] .group-data-\\[collapsible\\=icon\\]\\:opacity-0{opacity:0}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border.toggle-elevate:before{top:-1px;right:-1px;bottom:-1px;left:-1px}.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border.hover-elevate:not(.no-hover-interaction-elevate):after,.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border.active-elevate:not(.no-active-interaction-elevate):after,.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border.hover-elevate-2:not(.no-hover-interaction-elevate):after,.group[data-variant=floating] .group-data-\\[variant\\=floating\\]\\:border.active-elevate-2:not(.no-active-interaction-elevate):after{top:-1px;right:-1px;bottom:-1px;left:-1px}.group[data-collapsible=offcanvas] .group-data-\\[collapsible\\=offcanvas\\]\\:after\\:left-full:after{content:var(--tw-content);left:100%}.group[data-collapsible=offcanvas] .hover\\:group-data-\\[collapsible\\=offcanvas\\]\\:bg-sidebar:hover{--tw-bg-opacity: 1;background-color:hsl(var(--sidebar) / var(--tw-bg-opacity, 1))}.peer\\/menu-button[data-size=default]~.peer-data-\\[size\\=default\\]\\/menu-button\\:top-1\\.5{top:.375rem}.peer\\/menu-button[data-size=lg]~.peer-data-\\[size\\=lg\\]\\/menu-button\\:top-2\\.5{top:.625rem}.peer\\/menu-button[data-size=sm]~.peer-data-\\[size\\=sm\\]\\/menu-button\\:top-1{top:.25rem}.peer\\/menu-button[data-active=true]~.peer-data-\\[active\\=true\\]\\/menu-button\\:text-sidebar-accent-foreground{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}@supports (backdrop-filter: var(--tw)){.supports-\\[backdrop-filter\\]\\:bg-background\\/80{background-color:hsl(var(--background) / .8)}}.dark\\:border-blue-800:is(.dark *){--tw-border-opacity: 1;border-color:rgb(30 64 175 / var(--tw-border-opacity, 1))}.dark\\:border-destructive:is(.dark *){--tw-border-opacity: 1;border-color:hsl(var(--destructive) / var(--tw-border-opacity, 1))}.dark\\:border-gray-800:is(.dark *){--tw-border-opacity: 1;border-color:rgb(31 41 55 / var(--tw-border-opacity, 1))}.dark\\:border-green-800:is(.dark *){--tw-border-opacity: 1;border-color:rgb(22 101 52 / var(--tw-border-opacity, 1))}.dark\\:border-orange-800:is(.dark *){--tw-border-opacity: 1;border-color:rgb(154 52 18 / var(--tw-border-opacity, 1))}.dark\\:border-primary\\/30:is(.dark *){border-color:hsl(var(--primary) / .3)}.dark\\:bg-blue-900\\/20:is(.dark *){background-color:#1e3a8a33}.dark\\:bg-blue-900\\/40:is(.dark *){background-color:#1e3a8a66}.dark\\:bg-blue-950:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(23 37 84 / var(--tw-bg-opacity, 1))}.dark\\:bg-card\\/40:is(.dark *){background-color:hsl(var(--card) / .4)}.dark\\:bg-gray-800\\/50:is(.dark *){background-color:#1f293780}.dark\\:bg-gray-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.dark\\:bg-green-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity, 1))}.dark\\:bg-green-900\\/20:is(.dark *){background-color:#14532d33}.dark\\:bg-green-900\\/30:is(.dark *){background-color:#14532d4d}.dark\\:bg-green-900\\/40:is(.dark *){background-color:#14532d66}.dark\\:bg-muted\\/30:is(.dark *){background-color:hsl(var(--muted) / .3)}.dark\\:bg-orange-900\\/40:is(.dark *){background-color:#7c2d1266}.dark\\:bg-orange-950:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(67 20 7 / var(--tw-bg-opacity, 1))}.dark\\:bg-pink-900\\/40:is(.dark *){background-color:#83184366}.dark\\:bg-primary\\/10:is(.dark *){background-color:hsl(var(--primary) / .1)}.dark\\:bg-primary\\/5:is(.dark *){background-color:hsl(var(--primary) / .05)}.dark\\:bg-purple-900\\/40:is(.dark *){background-color:#581c8766}.dark\\:bg-purple-950:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(59 7 100 / var(--tw-bg-opacity, 1))}.dark\\:bg-red-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity, 1))}.dark\\:bg-red-900\\/30:is(.dark *){background-color:#7f1d1d4d}.dark\\:bg-rose-950:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(76 5 25 / var(--tw-bg-opacity, 1))}.dark\\:bg-slate-900\\/80:is(.dark *){background-color:#0f172acc}.dark\\:bg-yellow-900\\/40:is(.dark *){background-color:#713f1266}.dark\\:bg-zinc-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity, 1))}.dark\\:from-indigo-950:is(.dark *){--tw-gradient-from: #1e1b4b var(--tw-gradient-from-position);--tw-gradient-to: rgb(30 27 75 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.dark\\:from-primary\\/20:is(.dark *){--tw-gradient-from: hsl(var(--primary) / .2) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.dark\\:from-slate-600:is(.dark *){--tw-gradient-from: #475569 var(--tw-gradient-from-position);--tw-gradient-to: rgb(71 85 105 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.dark\\:to-orange-950:is(.dark *){--tw-gradient-to: #431407 var(--tw-gradient-to-position)}.dark\\:to-primary\\/10:is(.dark *){--tw-gradient-to: hsl(var(--primary) / .1) var(--tw-gradient-to-position)}.dark\\:to-slate-700:is(.dark *){--tw-gradient-to: #334155 var(--tw-gradient-to-position)}.dark\\:text-amber-400:is(.dark *){--tw-text-opacity: 1;color:rgb(251 191 36 / var(--tw-text-opacity, 1))}.dark\\:text-amber-400\\/60:is(.dark *){color:#fbbf2499}.dark\\:text-amber-500:is(.dark *){--tw-text-opacity: 1;color:rgb(245 158 11 / var(--tw-text-opacity, 1))}.dark\\:text-blue-200:is(.dark *){--tw-text-opacity: 1;color:rgb(191 219 254 / var(--tw-text-opacity, 1))}.dark\\:text-blue-300:is(.dark *){--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.dark\\:text-emerald-400:is(.dark *){--tw-text-opacity: 1;color:rgb(52 211 153 / var(--tw-text-opacity, 1))}.dark\\:text-gray-300:is(.dark *){--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.dark\\:text-gray-400:is(.dark *){--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\\:text-gray-500:is(.dark *){--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.dark\\:text-green-200:is(.dark *){--tw-text-opacity: 1;color:rgb(187 247 208 / var(--tw-text-opacity, 1))}.dark\\:text-green-400:is(.dark *){--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.dark\\:text-indigo-300:is(.dark *){--tw-text-opacity: 1;color:rgb(165 180 252 / var(--tw-text-opacity, 1))}.dark\\:text-orange-200:is(.dark *){--tw-text-opacity: 1;color:rgb(254 215 170 / var(--tw-text-opacity, 1))}.dark\\:text-orange-300:is(.dark *){--tw-text-opacity: 1;color:rgb(253 186 116 / var(--tw-text-opacity, 1))}.dark\\:text-orange-400:is(.dark *){--tw-text-opacity: 1;color:rgb(251 146 60 / var(--tw-text-opacity, 1))}.dark\\:text-orange-500:is(.dark *){--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.dark\\:text-pink-200:is(.dark *){--tw-text-opacity: 1;color:rgb(251 207 232 / var(--tw-text-opacity, 1))}.dark\\:text-purple-200:is(.dark *){--tw-text-opacity: 1;color:rgb(233 213 255 / var(--tw-text-opacity, 1))}.dark\\:text-purple-300:is(.dark *){--tw-text-opacity: 1;color:rgb(216 180 254 / var(--tw-text-opacity, 1))}.dark\\:text-red-400:is(.dark *){--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.dark\\:text-rose-300:is(.dark *){--tw-text-opacity: 1;color:rgb(253 164 175 / var(--tw-text-opacity, 1))}.dark\\:text-white:is(.dark *){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.dark\\:text-yellow-200:is(.dark *){--tw-text-opacity: 1;color:rgb(254 240 138 / var(--tw-text-opacity, 1))}.dark\\:after\\:border-white\\/10:is(.dark *):after{content:var(--tw-content);border-color:#ffffff1a}.dark\\:hover\\:bg-blue-900\\/30:hover:is(.dark *){background-color:#1e3a8a4d}.dark\\:hover\\:bg-green-900\\/30:hover:is(.dark *){background-color:#14532d4d}.dark\\:hover\\:bg-primary\\/20:hover:is(.dark *){background-color:hsl(var(--primary) / .2)}@media (min-width: 640px){.sm\\:bottom-0{bottom:0}.sm\\:right-0{right:0}.sm\\:top-auto{top:auto}.sm\\:order-1{order:1}.sm\\:order-2{order:2}.sm\\:mb-10{margin-bottom:2.5rem}.sm\\:ml-1{margin-left:.25rem}.sm\\:ml-2{margin-left:.5rem}.sm\\:mr-2{margin-right:.5rem}.sm\\:mt-0{margin-top:0}.sm\\:block{display:block}.sm\\:inline{display:inline}.sm\\:flex{display:flex}.sm\\:hidden{display:none}.sm\\:h-10{height:2.5rem}.sm\\:h-16{height:4rem}.sm\\:h-32{height:8rem}.sm\\:h-4{height:1rem}.sm\\:h-5{height:1.25rem}.sm\\:w-10{width:2.5rem}.sm\\:w-12{width:3rem}.sm\\:w-16{width:4rem}.sm\\:w-24{width:6rem}.sm\\:w-28{width:7rem}.sm\\:w-32{width:8rem}.sm\\:w-4{width:1rem}.sm\\:w-40{width:10rem}.sm\\:w-5{width:1.25rem}.sm\\:w-56{width:14rem}.sm\\:w-auto{width:auto}.sm\\:max-w-\\[425px\\]{max-width:425px}.sm\\:max-w-md{max-width:28rem}.sm\\:max-w-sm{max-width:24rem}.sm\\:flex-none{flex:none}.sm\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.sm\\:flex-row{flex-direction:row}.sm\\:flex-col{flex-direction:column}.sm\\:items-center{align-items:center}.sm\\:justify-end{justify-content:flex-end}.sm\\:justify-center{justify-content:center}.sm\\:justify-between{justify-content:space-between}.sm\\:gap-0{gap:0px}.sm\\:gap-1\\.5{gap:.375rem}.sm\\:gap-2{gap:.5rem}.sm\\:gap-2\\.5{gap:.625rem}.sm\\:gap-3{gap:.75rem}.sm\\:gap-6{gap:1.5rem}.sm\\:space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.sm\\:space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.sm\\:space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.sm\\:rounded-lg{border-radius:.5625rem}.sm\\:border-t-0{border-top-width:0px}.sm\\:p-10{padding:2.5rem}.sm\\:p-5{padding:1.25rem}.sm\\:p-6{padding:1.5rem}.sm\\:p-8{padding:2rem}.sm\\:px-0{padding-left:0;padding-right:0}.sm\\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\\:px-8{padding-left:2rem;padding-right:2rem}.sm\\:py-10{padding-top:2.5rem;padding-bottom:2.5rem}.sm\\:py-12{padding-top:3rem;padding-bottom:3rem}.sm\\:py-8{padding-top:2rem;padding-bottom:2rem}.sm\\:pb-16{padding-bottom:4rem}.sm\\:pb-8{padding-bottom:2rem}.sm\\:pt-0{padding-top:0}.sm\\:pt-16{padding-top:4rem}.sm\\:text-left{text-align:left}.sm\\:text-2xl{font-size:1.5rem;line-height:2rem}.sm\\:text-3xl{font-size:1.875rem;line-height:2.25rem}.sm\\:text-4xl{font-size:2.25rem;line-height:2.5rem}.sm\\:text-base{font-size:1rem;line-height:1.5rem}.sm\\:text-lg{font-size:1.125rem;line-height:1.75rem}.sm\\:text-sm{font-size:.875rem;line-height:1.25rem}.sm\\:text-xl{font-size:1.25rem;line-height:1.75rem}.sm\\:text-xs{font-size:.75rem;line-height:1rem}.data-\\[state\\=open\\]\\:sm\\:slide-in-from-bottom-full[data-state=open]{--tw-enter-translate-y: 100%}}@media (min-width: 768px){.md\\:absolute{position:absolute}.md\\:bottom-4{bottom:1rem}.md\\:bottom-6{bottom:1.5rem}.md\\:bottom-8{bottom:2rem}.md\\:left-6{left:1.5rem}.md\\:left-auto{left:auto}.md\\:right-6{right:1.5rem}.md\\:right-8{right:2rem}.md\\:block{display:block}.md\\:flex{display:flex}.md\\:hidden{display:none}.md\\:h-11{height:2.75rem}.md\\:h-14{height:3.5rem}.md\\:h-5{height:1.25rem}.md\\:w-80{width:20rem}.md\\:w-96{width:24rem}.md\\:w-\\[var\\(--radix-navigation-menu-viewport-width\\)\\]{width:var(--radix-navigation-menu-viewport-width)}.md\\:w-auto{width:auto}.md\\:max-w-\\[420px\\]{max-width:420px}.md\\:flex-none{flex:none}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.md\\:flex-row{flex-direction:row}.md\\:flex-nowrap{flex-wrap:nowrap}.md\\:items-center{align-items:center}.md\\:gap-10{gap:2.5rem}.md\\:gap-3{gap:.75rem}.md\\:gap-6{gap:1.5rem}.md\\:gap-8{gap:2rem}.md\\:p-10{padding:2.5rem}.md\\:p-12{padding:3rem}.md\\:p-14{padding:3.5rem}.md\\:p-20{padding:5rem}.md\\:p-6{padding:1.5rem}.md\\:p-8{padding:2rem}.md\\:px-6{padding-left:1.5rem;padding-right:1.5rem}.md\\:py-20{padding-top:5rem;padding-bottom:5rem}.md\\:pb-0{padding-bottom:0}.md\\:pb-12{padding-bottom:3rem}.md\\:pb-16{padding-bottom:4rem}.md\\:text-2xl{font-size:1.5rem;line-height:2rem}.md\\:text-3xl{font-size:1.875rem;line-height:2.25rem}.md\\:text-4xl{font-size:2.25rem;line-height:2.5rem}.md\\:text-6xl{font-size:3.75rem;line-height:1}.md\\:text-7xl{font-size:4.5rem;line-height:1}.md\\:text-9xl{font-size:8rem;line-height:1}.md\\:text-sm{font-size:.875rem;line-height:1.25rem}.md\\:opacity-0{opacity:0}.md\\:after\\:hidden:after{content:var(--tw-content);display:none}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:m-2{margin:.5rem}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:ml-0{margin-left:0}.peer[data-variant=inset][data-state=collapsed]~.md\\:peer-data-\\[variant\\=inset\\]\\:peer-data-\\[state\\=collapsed\\]\\:ml-2{margin-left:.5rem}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:rounded-xl{border-radius:.75rem}.peer[data-variant=inset]~.md\\:peer-data-\\[variant\\=inset\\]\\:shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}}@media (min-width: 1024px){.lg\\:col-span-5{grid-column:span 5 / span 5}.lg\\:col-span-7{grid-column:span 7 / span 7}.lg\\:block{display:block}.lg\\:flex{display:flex}.lg\\:grid-cols-12{grid-template-columns:repeat(12,minmax(0,1fr))}.lg\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\\:flex-row{flex-direction:row}.lg\\:px-8{padding-left:2rem;padding-right:2rem}.lg\\:text-4xl{font-size:2.25rem;line-height:2.5rem}}.\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:bg-accent:has([aria-selected]){--tw-bg-opacity: 1;background-color:hsl(var(--accent) / var(--tw-bg-opacity, 1))}.first\\:\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:rounded-l-md:has([aria-selected]):first-child{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem}.last\\:\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:rounded-r-md:has([aria-selected]):last-child{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem}.\\[\\&\\:has\\(\\[aria-selected\\]\\.day-outside\\)\\]\\:bg-accent\\/50:has([aria-selected].day-outside){background-color:hsl(var(--accent) / .5)}.\\[\\&\\:has\\(\\[aria-selected\\]\\.day-range-end\\)\\]\\:rounded-r-md:has([aria-selected].day-range-end){border-top-right-radius:.375rem;border-bottom-right-radius:.375rem}.\\[\\&\\:has\\(\\[data-state\\=checked\\]\\)\\]\\:border-primary:has([data-state=checked]){--tw-border-opacity: 1;border-color:hsl(var(--primary) / var(--tw-border-opacity, 1))}.\\[\\&\\:has\\(\\[data-state\\=checked\\]\\)\\]\\:bg-primary\\/5:has([data-state=checked]){background-color:hsl(var(--primary) / .05)}.\\[\\&\\:has\\(\\[role\\=checkbox\\]\\)\\]\\:pr-0:has([role=checkbox]){padding-right:0}.\\[\\&\\>button\\]\\:hidden>button{display:none}.\\[\\&\\>span\\:last-child\\]\\:truncate>span:last-child{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.\\[\\&\\>span\\]\\:line-clamp-1>span{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.\\[\\&\\>svg\\+div\\]\\:translate-y-\\[-3px\\]>svg+div{--tw-translate-y: -3px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&\\>svg\\]\\:absolute>svg{position:absolute}.\\[\\&\\>svg\\]\\:left-4>svg{left:1rem}.\\[\\&\\>svg\\]\\:top-4>svg{top:1rem}.\\[\\&\\>svg\\]\\:size-4>svg{width:1rem;height:1rem}.\\[\\&\\>svg\\]\\:h-2\\.5>svg{height:.625rem}.\\[\\&\\>svg\\]\\:h-3>svg{height:.75rem}.\\[\\&\\>svg\\]\\:h-3\\.5>svg{height:.875rem}.\\[\\&\\>svg\\]\\:h-4>svg{height:1rem}.\\[\\&\\>svg\\]\\:w-2\\.5>svg{width:.625rem}.\\[\\&\\>svg\\]\\:w-3>svg{width:.75rem}.\\[\\&\\>svg\\]\\:w-3\\.5>svg{width:.875rem}.\\[\\&\\>svg\\]\\:w-4>svg{width:1rem}.\\[\\&\\>svg\\]\\:shrink-0>svg{flex-shrink:0}.\\[\\&\\>svg\\]\\:text-destructive>svg{--tw-text-opacity: 1;color:hsl(var(--destructive) / var(--tw-text-opacity, 1))}.\\[\\&\\>svg\\]\\:text-foreground>svg{--tw-text-opacity: 1;color:hsl(var(--foreground) / var(--tw-text-opacity, 1))}.\\[\\&\\>svg\\]\\:text-muted-foreground>svg{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.\\[\\&\\>svg\\]\\:text-sidebar-accent-foreground>svg{--tw-text-opacity: 1;color:hsl(var(--sidebar-accent-foreground) / var(--tw-text-opacity, 1))}.\\[\\&\\>svg\\~\\*\\]\\:pl-7>svg~*{padding-left:1.75rem}.\\[\\&\\>tr\\]\\:last\\:border-b-0:last-child>tr{border-bottom-width:0px}.\\[\\&\\[data-panel-group-direction\\=vertical\\]\\>div\\]\\:rotate-90[data-panel-group-direction=vertical]>div{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&\\[data-state\\=open\\]\\>svg\\]\\:rotate-180[data-state=open]>svg{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&_\\.recharts-cartesian-axis-tick_text\\]\\:fill-muted-foreground .recharts-cartesian-axis-tick text{fill:hsl(var(--muted-foreground) / 1)}.\\[\\&_\\.recharts-cartesian-grid_line\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border\\/50 .recharts-cartesian-grid line[stroke=\"#ccc\"]{stroke:hsl(var(--border) / .5)}.\\[\\&_\\.recharts-curve\\.recharts-tooltip-cursor\\]\\:stroke-border .recharts-curve.recharts-tooltip-cursor{stroke:hsl(var(--border) / 1)}.\\[\\&_\\.recharts-dot\\[stroke\\=\\'\\#fff\\'\\]\\]\\:stroke-transparent .recharts-dot[stroke=\"#fff\"]{stroke:transparent}.\\[\\&_\\.recharts-layer\\]\\:outline-none .recharts-layer{outline:2px solid transparent;outline-offset:2px}.\\[\\&_\\.recharts-polar-grid_\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border .recharts-polar-grid [stroke=\"#ccc\"]{stroke:hsl(var(--border) / 1)}.\\[\\&_\\.recharts-radial-bar-background-sector\\]\\:fill-muted .recharts-radial-bar-background-sector,.\\[\\&_\\.recharts-rectangle\\.recharts-tooltip-cursor\\]\\:fill-muted .recharts-rectangle.recharts-tooltip-cursor{fill:hsl(var(--muted) / 1)}.\\[\\&_\\.recharts-reference-line_\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border .recharts-reference-line [stroke=\"#ccc\"]{stroke:hsl(var(--border) / 1)}.\\[\\&_\\.recharts-sector\\[stroke\\=\\'\\#fff\\'\\]\\]\\:stroke-transparent .recharts-sector[stroke=\"#fff\"]{stroke:transparent}.\\[\\&_\\.recharts-sector\\]\\:outline-none .recharts-sector,.\\[\\&_\\.recharts-surface\\]\\:outline-none .recharts-surface{outline:2px solid transparent;outline-offset:2px}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:px-2 [cmdk-group-heading]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:py-1\\.5 [cmdk-group-heading]{padding-top:.375rem;padding-bottom:.375rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:text-xs [cmdk-group-heading]{font-size:.75rem;line-height:1rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:font-medium [cmdk-group-heading]{font-weight:500}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:text-muted-foreground [cmdk-group-heading]{--tw-text-opacity: 1;color:hsl(var(--muted-foreground) / var(--tw-text-opacity, 1))}.\\[\\&_\\[cmdk-group\\]\\:not\\(\\[hidden\\]\\)_\\~\\[cmdk-group\\]\\]\\:pt-0 [cmdk-group]:not([hidden])~[cmdk-group]{padding-top:0}.\\[\\&_\\[cmdk-group\\]\\]\\:px-2 [cmdk-group]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-input-wrapper\\]_svg\\]\\:h-5 [cmdk-input-wrapper] svg{height:1.25rem}.\\[\\&_\\[cmdk-input-wrapper\\]_svg\\]\\:w-5 [cmdk-input-wrapper] svg{width:1.25rem}.\\[\\&_\\[cmdk-input\\]\\]\\:h-12 [cmdk-input]{height:3rem}.\\[\\&_\\[cmdk-item\\]\\]\\:px-2 [cmdk-item]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-item\\]\\]\\:py-3 [cmdk-item]{padding-top:.75rem;padding-bottom:.75rem}.\\[\\&_\\[cmdk-item\\]_svg\\]\\:h-5 [cmdk-item] svg{height:1.25rem}.\\[\\&_\\[cmdk-item\\]_svg\\]\\:w-5 [cmdk-item] svg{width:1.25rem}.\\[\\&_p\\]\\:leading-relaxed p{line-height:1.625}.\\[\\&_svg\\]\\:pointer-events-none svg{pointer-events:none}.\\[\\&_svg\\]\\:size-4 svg{width:1rem;height:1rem}.\\[\\&_svg\\]\\:shrink-0 svg{flex-shrink:0}.\\[\\&_tr\\:last-child\\]\\:border-0 tr:last-child{border-width:0px}.\\[\\&_tr\\]\\:border-b tr{border-bottom-width:1px}[data-side=left][data-collapsible=offcanvas] .\\[\\[data-side\\=left\\]\\[data-collapsible\\=offcanvas\\]_\\&\\]\\:-right-2{right:-.5rem}[data-side=left][data-state=collapsed] .\\[\\[data-side\\=left\\]\\[data-state\\=collapsed\\]_\\&\\]\\:cursor-e-resize{cursor:e-resize}[data-side=right][data-collapsible=offcanvas] .\\[\\[data-side\\=right\\]\\[data-collapsible\\=offcanvas\\]_\\&\\]\\:-left-2{left:-.5rem}[data-side=right][data-state=collapsed] .\\[\\[data-side\\=right\\]\\[data-state\\=collapsed\\]_\\&\\]\\:cursor-w-resize{cursor:w-resize}\n","path":null,"size_bytes":180857,"size_tokens":null},"client/src/components/NPSDialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Star } from \"lucide-react\";\n\nexport function NPSDialog() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [open, setOpen] = useState(false);\n  const [score, setScore] = useState<number | null>(null);\n  const [comment, setComment] = useState(\"\");\n\n  useEffect(() => {\n    const handleOpen = () => setOpen(true);\n    const handleOpenWithScore = (e: any) => {\n      const receivedScore = e.detail?.score;\n      console.log(\"[NPSDialog] Event received with score:\", receivedScore);\n      if (receivedScore !== undefined && receivedScore !== null) {\n        setScore(Number(receivedScore));\n        setOpen(true);\n      }\n    };\n\n    // Global listener for cross-platform compatibility (APK/PWA)\n    const handleGlobalClick = (e: MouseEvent) => {\n      const target = e.target as HTMLElement;\n      const scoreBtn = target.closest('[data-nps-score]');\n      if (scoreBtn) {\n        const score = scoreBtn.getAttribute('data-nps-score');\n        if (score !== null) {\n          console.log(\"[NPSDialog] Global capture score:\", score);\n          setScore(Number(score));\n          setOpen(true);\n        }\n      }\n    };\n\n    window.addEventListener('open-nps-dialog', handleOpen);\n    window.addEventListener('open-nps-score', handleOpenWithScore);\n    document.addEventListener('click', handleGlobalClick);\n\n    return () => {\n      window.removeEventListener('open-nps-dialog', handleOpen);\n      window.removeEventListener('open-nps-score', handleOpenWithScore);\n      document.removeEventListener('click', handleGlobalClick);\n    };\n  }, []);\n\n  const feedbackMutation = useMutation({\n    mutationFn: async (data: { type: string; score?: number; comment?: string }) => {\n      // If user is not logged in, we still want to allow feedback\n      // The backend endpoint might require authentication, let's check\n      return await apiRequest(\"POST\", \"/api/feedback\", data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Obrigado pelo seu feedback!\",\n        description: \"Sua opinião nos ajuda a melhorar o BíbliaFS.\",\n      });\n      if (user) {\n        localStorage.setItem(`nps_responded_${user.id}`, \"true\");\n      } else {\n        localStorage.setItem(`nps_responded_anonymous`, \"true\");\n      }\n      setOpen(false);\n      setScore(null);\n      setComment(\"\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao enviar feedback\",\n        description: error.message || \"Tente novamente mais tarde.\",\n        variant: \"destructive\",\n      });\n    }\n  });\n\n  const handleSubmit = () => {\n    if (score === null) return;\n    feedbackMutation.mutate({\n      type: \"nps\",\n      score,\n      comment,\n    });\n  };\n\n  const scoreButtons = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>Como está sua experiência?</DialogTitle>\n          <DialogDescription>\n            Em uma escala de 0 a 10, o quanto você recomendaria o BíbliaFS para um amigo?\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"grid gap-4 py-4\">\n          <div className=\"flex justify-between gap-1 flex-wrap\">\n            {scoreButtons.map((num) => (\n              <button\n                key={num}\n                type=\"button\"\n                onClick={() => setScore(num)}\n                className={`w-8 h-8 rounded-full text-xs font-bold transition-all transform hover:scale-110 ${\n                  score === num\n                    ? \"bg-primary text-primary-foreground shadow-md scale-110\"\n                    : \"bg-muted hover:bg-muted/80 text-muted-foreground\"\n                }`}\n              >\n                {num}\n              </button>\n            ))}\n          </div>\n          <div className=\"grid gap-2\">\n            <Label htmlFor=\"comment\">Conte-nos mais (opcional)</Label>\n            <Textarea\n              id=\"comment\"\n              placeholder=\"O que você mais gosta ou o que poderíamos melhorar?\"\n              value={comment}\n              onChange={(e) => setComment(e.target.value)}\n            />\n          </div>\n        </div>\n        <DialogFooter>\n          <Button variant=\"ghost\" onClick={() => setOpen(false)}>Depois</Button>\n          <Button onClick={handleSubmit} disabled={score === null || feedbackMutation.isPending}>\n            Enviar Feedback\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":5017,"size_tokens":null},"scripts/fix-capacitor-paths.js":{"content":"import fs from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\nconst distPath = path.resolve(__dirname, '../dist/public');\n\nfunction fixPaths(content) {\n  return content\n    .replace(/src=\"\\/assets\\//g, 'src=\"./assets/')\n    .replace(/href=\"\\/assets\\//g, 'href=\"./assets/')\n    .replace(/href=\"\\/favicon/g, 'href=\"./favicon')\n    .replace(/href=\"\\/apple-touch-icon/g, 'href=\"./apple-touch-icon')\n    .replace(/href=\"\\/manifest/g, 'href=\"./manifest')\n    .replace(/\"\\/assets\\//g, '\"./assets/')\n    .replace(/new URL\\(\"\\/assets\\//g, 'new URL(\"./assets/')\n    .replace(/url\\(\"\\/assets\\//g, 'url(\"./assets/')\n    .replace(/from\"\\/assets\\//g, 'from\"./assets/')\n    .replace(/import\\(\"\\/assets\\//g, 'import(\"./assets/');\n}\n\ntry {\n  const indexPath = path.join(distPath, 'index.html');\n  if (fs.existsSync(indexPath)) {\n    let content = fs.readFileSync(indexPath, 'utf8');\n    content = fixPaths(content);\n    fs.writeFileSync(indexPath, content);\n    console.log('Fixed paths in index.html');\n  }\n\n  const assetsDir = path.join(distPath, 'assets');\n  if (fs.existsSync(assetsDir)) {\n    const jsFiles = fs.readdirSync(assetsDir).filter(f => f.endsWith('.js'));\n    for (const file of jsFiles) {\n      const filePath = path.join(assetsDir, file);\n      let content = fs.readFileSync(filePath, 'utf8');\n      const originalContent = content;\n      content = fixPaths(content);\n      if (content !== originalContent) {\n        fs.writeFileSync(filePath, content);\n        console.log(`Fixed paths in ${file}`);\n      }\n    }\n  }\n\n  console.log('All paths fixed for Capacitor');\n} catch (error) {\n  console.error('Error fixing paths:', error);\n  process.exit(1);\n}\n","path":null,"size_bytes":1741,"size_tokens":null},"client/src/pages/achievements.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Loader2, Trophy, Star, Sparkles, Lock, Crown, Flame, BookOpen, Users, Target, Zap, Award, Medal, Gift, Check } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Progress as ProgressBar } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\n\ninterface Achievement {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  unlockedAt: string | null;\n  requirementValue: number;\n  currentValue: number;\n  category?: string;\n  xpReward?: number;\n}\n\nconst getAchievementIcon = (icon: string, isUnlocked: boolean) => {\n  const iconClass = isUnlocked ? \"h-7 w-7 text-white\" : \"h-7 w-7 text-muted-foreground\";\n  switch (icon) {\n    case \"flame\": return <Flame className={iconClass} />;\n    case \"book\": return <BookOpen className={iconClass} />;\n    case \"users\": return <Users className={iconClass} />;\n    case \"star\": return <Star className={iconClass} />;\n    case \"crown\": return <Crown className={iconClass} />;\n    case \"zap\": return <Zap className={iconClass} />;\n    case \"award\": return <Award className={iconClass} />;\n    case \"medal\": return <Medal className={iconClass} />;\n    case \"gift\": return <Gift className={iconClass} />;\n    case \"target\": return <Target className={iconClass} />;\n    default: return isUnlocked ? <Trophy className={iconClass} /> : <Lock className={iconClass} />;\n  }\n};\n\nconst cardAccents = [\n  { gradient: \"from-amber-500 to-orange-600\", shadow: \"shadow-amber-500/20\", accent: \"card-accent-amber\" },\n  { gradient: \"from-emerald-500 to-teal-600\", shadow: \"shadow-emerald-500/20\", accent: \"card-accent-emerald\" },\n  { gradient: \"from-blue-500 to-indigo-600\", shadow: \"shadow-blue-500/20\", accent: \"card-accent-blue\" },\n  { gradient: \"from-purple-500 to-violet-600\", shadow: \"shadow-purple-500/20\", accent: \"card-accent-purple\" },\n  { gradient: \"from-rose-500 to-pink-600\", shadow: \"shadow-rose-500/20\", accent: \"card-accent-rose\" },\n  { gradient: \"from-cyan-500 to-blue-600\", shadow: \"shadow-cyan-500/20\", accent: \"card-accent-blue\" },\n];\n\nconst categoryNames: Record<string, string> = {\n  community: \"Comunidade\",\n  study: \"Destaques\",\n  exploration: \"Exploração\",\n  reading: \"Leitura\",\n  prayer: \"Oração\",\n  general: \"Geral\",\n};\n\nconst categoryIcons: Record<string, typeof Users> = {\n  community: Users,\n  study: Star,\n  exploration: Trophy,\n  reading: BookOpen,\n  prayer: Sparkles,\n  general: Award,\n};\n\nexport default function Achievements() {\n  const { t } = useLanguage();\n  const { data: achievements, isLoading } = useQuery<Achievement[]>({\n    queryKey: [\"/api/achievements/user\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center space-y-4\">\n          <Loader2 className=\"h-10 w-10 animate-spin text-primary mx-auto\" />\n          <p className=\"text-sm font-semibold uppercase tracking-[0.2em] text-muted-foreground animate-pulse\" data-testid=\"text-loading\">Carregando conquistas...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const allAchievements = achievements || [];\n  const unlockedCount = allAchievements.filter((a) => a.unlockedAt).length;\n  const totalCount = allAchievements.length;\n  const progressPercent = totalCount > 0 ? (unlockedCount / totalCount) * 100 : 0;\n\n  const categories = allAchievements.reduce<Record<string, Achievement[]>>((acc, a) => {\n    const cat = a.category || \"general\";\n    if (!acc[cat]) acc[cat] = [];\n    acc[cat].push(a);\n    return acc;\n  }, {});\n\n  return (\n    <div className=\"min-h-screen relative overflow-hidden mesh-primary\">\n      <div className=\"relative z-10 max-w-5xl mx-auto px-4 sm:px-6 py-8 sm:py-12 space-y-10\">\n        {/* Header */}\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"flex items-center gap-5\"\n        >\n          <div className=\"p-4 rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 shadow-xl shadow-amber-500/30\" data-testid=\"icon-trophy-header\">\n            <Trophy className=\"h-8 w-8 text-white\" />\n          </div>\n          <div>\n            <h1 className=\"font-display text-3xl sm:text-4xl font-black tracking-tight text-foreground\" data-testid=\"text-page-title\">\n              CONQUISTAS\n            </h1>\n            <p className=\"text-muted-foreground font-medium mt-1\">Domine as escrituras e desbloqueie tesouros</p>\n          </div>\n        </motion.div>\n\n        {/* Progress Overview Card */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n        >\n          <Card className=\"glass-premium hover-premium rounded-2xl border-none overflow-hidden\" data-testid=\"card-progress-overview\">\n            <CardContent className=\"p-6 sm:p-8\">\n              <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"p-3 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 shadow-lg shadow-amber-500/25\">\n                    <Sparkles className=\"h-6 w-6 text-white\" />\n                  </div>\n                  <div>\n                    <h2 className=\"text-xl font-bold text-foreground tracking-tight\" data-testid=\"text-progress-title\">Progresso Geral</h2>\n                    <p className=\"text-xs font-medium text-muted-foreground uppercase tracking-wider mt-0.5\">Nível de domínio das escrituras</p>\n                  </div>\n                </div>\n                <Badge className=\"bg-gradient-to-r from-amber-500 to-orange-600 text-white border-none font-bold text-xs px-4 py-1.5 shadow-lg shadow-amber-500/20\" data-testid=\"badge-progress-count\">\n                  {unlockedCount} / {totalCount}\n                </Badge>\n              </div>\n              <div className=\"relative\">\n                <ProgressBar value={progressPercent} className=\"h-4 rounded-full\" />\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <span className=\"text-[10px] font-bold text-foreground/70 uppercase tracking-wider\">\n                    {progressPercent.toFixed(0)}% concluído\n                  </span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        {/* Category Sections */}\n        {Object.entries(categories).map(([category, categoryAchievements], catIndex) => {\n          const CatIcon = categoryIcons[category] || Award;\n          const unlockedInCat = categoryAchievements.filter(a => a.unlockedAt).length;\n\n          return (\n            <motion.section\n              key={category}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.15 + catIndex * 0.08 }}\n              className=\"space-y-5\"\n            >\n              <div className=\"flex items-center gap-3 flex-wrap\">\n                <CatIcon className=\"h-5 w-5 text-primary\" />\n                <h2 className=\"text-lg font-bold text-foreground tracking-tight\" data-testid={`text-category-${category}`}>\n                  {categoryNames[category] || category}\n                </h2>\n                <Badge variant=\"secondary\" className=\"bg-primary/10 text-primary font-bold text-xs\" data-testid={`badge-category-count-${category}`}>\n                  {unlockedInCat} / {categoryAchievements.length}\n                </Badge>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <AnimatePresence mode=\"popLayout\">\n                  {categoryAchievements.map((achievement, idx) => {\n                    const isUnlocked = !!achievement.unlockedAt;\n                    const style = cardAccents[(catIndex * 3 + idx) % cardAccents.length];\n\n                    return (\n                      <motion.div\n                        key={achievement.id}\n                        layout\n                        initial={{ opacity: 0, scale: 0.95 }}\n                        animate={{ opacity: 1, scale: 1 }}\n                        transition={{ delay: idx * 0.04 }}\n                      >\n                        <Card\n                          className={`rounded-2xl border-none overflow-hidden hover-premium transition-all duration-300 ${\n                            isUnlocked ? style.accent : 'glass-premium opacity-70'\n                          }`}\n                          data-testid={`card-achievement-${achievement.id}`}\n                        >\n                          <CardContent className=\"p-5 sm:p-6\">\n                            <div className=\"flex items-start gap-4\">\n                              <div className={`p-3.5 rounded-xl shrink-0 ${\n                                isUnlocked \n                                  ? `bg-gradient-to-br ${style.gradient} shadow-lg ${style.shadow}` \n                                  : 'bg-muted/80 border border-border'\n                              }`}>\n                                {getAchievementIcon(achievement.icon, isUnlocked)}\n                              </div>\n                              <div className=\"flex-1 min-w-0\">\n                                <h3 className={`text-base font-bold tracking-tight leading-tight ${\n                                  isUnlocked ? 'text-foreground' : 'text-muted-foreground'\n                                }`} data-testid={`text-achievement-name-${achievement.id}`}>\n                                  {achievement.name}\n                                </h3>\n                                <p className=\"text-sm text-muted-foreground mt-1 leading-relaxed\" data-testid={`text-achievement-desc-${achievement.id}`}>\n                                  {achievement.description}\n                                </p>\n                                <div className=\"flex items-center justify-between mt-3 flex-wrap gap-2\">\n                                  {isUnlocked ? (\n                                    <Badge className=\"bg-emerald-500/15 text-emerald-700 dark:text-emerald-400 border border-emerald-500/20 font-bold text-[10px] uppercase tracking-wider\" data-testid={`badge-unlocked-${achievement.id}`}>\n                                      <Check className=\"h-3 w-3 mr-1.5\" />\n                                      Conquistado\n                                    </Badge>\n                                  ) : (\n                                    <span className=\"text-[10px] font-bold text-muted-foreground/60 uppercase tracking-widest\" data-testid={`text-locked-${achievement.id}`}>\n                                      Bloqueado\n                                    </span>\n                                  )}\n                                  <div className=\"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-amber-500/10 border border-amber-500/15\" data-testid={`badge-xp-${achievement.id}`}>\n                                    <Star className=\"h-3 w-3 text-amber-500 fill-amber-500\" />\n                                    <span className=\"font-bold text-amber-600 dark:text-amber-400 text-[11px]\">+{achievement.xpReward || 50} XP</span>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </CardContent>\n                        </Card>\n                      </motion.div>\n                    );\n                  })}\n                </AnimatePresence>\n              </div>\n            </motion.section>\n          );\n        })}\n\n        {totalCount === 0 && (\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n          >\n            <Card className=\"glass-premium rounded-2xl border-none\" data-testid=\"card-empty-achievements\">\n              <CardContent className=\"flex flex-col items-center justify-center py-16 text-center\">\n                <div className=\"h-20 w-20 rounded-2xl bg-muted/80 flex items-center justify-center mb-6 border border-border\">\n                  <Trophy className=\"h-10 w-10 text-muted-foreground\" />\n                </div>\n                <h3 className=\"font-bold text-xl mb-2 text-foreground\">Nenhuma conquista ainda</h3>\n                <p className=\"text-muted-foreground max-w-sm text-sm\">\n                  Abra as Escrituras e comece sua jornada para desbloquear conquistas.\n                </p>\n              </CardContent>\n            </Card>\n          </motion.div>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":12779,"size_tokens":null},"client/src/components/ShareSheet.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  Copy,\n  Share2,\n  MessageCircle,\n  Send,\n} from \"lucide-react\";\nimport { SiWhatsapp, SiFacebook } from \"react-icons/si\";\nimport {\n  shareContent,\n  copyToClipboard,\n  generateVerseShareText,\n  generateVerseShareUrl,\n  getWhatsAppShareUrl,\n  getTelegramShareUrl,\n  getTwitterShareUrl,\n  getFacebookShareUrl,\n} from \"@/lib/shareUtils\";\n\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface ShareSheetProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  bookName: string;\n  bookAbbrev: string;\n  chapter: number;\n  verseNumber: number;\n  verseText: string;\n  version: string;\n}\n\nexport function ShareSheet({\n  open,\n  onOpenChange,\n  bookName,\n  bookAbbrev,\n  chapter,\n  verseNumber,\n  verseText,\n  version,\n}: ShareSheetProps) {\n  const { toast } = useToast();\n\n  const shareMutation = useMutation({\n    mutationFn: async (platform: string) => {\n      return await apiRequest(\"POST\", \"/api/bible/share\", {\n        book: bookAbbrev,\n        chapter,\n        verse: verseNumber,\n        version,\n        platform\n      });\n    }\n  });\n\n  const shareText = generateVerseShareText(bookName, chapter, verseNumber, verseText, version);\n  const shareUrl = generateVerseShareUrl(bookAbbrev, chapter, verseNumber, version);\n  const fullShareText = `${shareText}\\n${shareUrl}`;\n\n  const handleNativeShare = async () => {\n    shareMutation.mutate(\"native\");\n    const success = await shareContent({\n      title: `${bookName} ${chapter}:${verseNumber}`,\n      text: shareText,\n      url: shareUrl,\n    });\n    if (success) {\n      onOpenChange(false);\n    } else {\n      handleCopy();\n    }\n  };\n\n  const handleCopy = async () => {\n    shareMutation.mutate(\"copy\");\n    const success = await copyToClipboard(fullShareText);\n    toast({\n      title: success ? \"Copiado!\" : \"Erro ao copiar\",\n      description: success ? \"Versículo copiado para a área de transferência\" : \"Não foi possível copiar\",\n      variant: success ? \"default\" : \"destructive\",\n    });\n    if (success) onOpenChange(false);\n  };\n\n  const handleWhatsApp = () => {\n    shareMutation.mutate(\"whatsapp\");\n    window.open(getWhatsAppShareUrl(fullShareText), \"_blank\");\n    onOpenChange(false);\n  };\n\n  const handleTelegram = () => {\n    shareMutation.mutate(\"telegram\");\n    window.open(getTelegramShareUrl(shareText, shareUrl), \"_blank\");\n    onOpenChange(false);\n  };\n\n  const handleTwitter = () => {\n    shareMutation.mutate(\"twitter\");\n    window.open(getTwitterShareUrl(shareText, shareUrl), \"_blank\");\n    onOpenChange(false);\n  };\n\n  const handleFacebook = () => {\n    shareMutation.mutate(\"facebook\");\n    window.open(getFacebookShareUrl(shareUrl), \"_blank\");\n    onOpenChange(false);\n  };\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent side=\"bottom\" className=\"h-auto max-h-[60vh]\">\n        <SheetHeader>\n          <SheetTitle>Compartilhar Versículo</SheetTitle>\n        </SheetHeader>\n        \n        <div className=\"mt-4 space-y-4\">\n          <div className=\"p-4 bg-muted rounded-lg\">\n            <p className=\"text-sm font-serif italic\">\"{verseText}\"</p>\n            <p className=\"text-xs text-muted-foreground mt-2\">\n              — {bookName} {chapter}:{verseNumber} ({version.toUpperCase()})\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-3\">\n            {\"share\" in navigator && (\n              <Button\n                variant=\"outline\"\n                className=\"flex items-center gap-2\"\n                onClick={handleNativeShare}\n                data-testid=\"button-share-native\"\n              >\n                <Share2 className=\"h-4 w-4\" />\n                Compartilhar\n              </Button>\n            )}\n            \n            <Button\n              variant=\"outline\"\n              className=\"flex items-center gap-2\"\n              onClick={handleCopy}\n              data-testid=\"button-share-copy\"\n            >\n              <Copy className=\"h-4 w-4\" />\n              Copiar\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              className=\"flex items-center gap-2 bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/30 border-green-200 dark:border-green-800\"\n              onClick={handleWhatsApp}\n              data-testid=\"button-share-whatsapp\"\n            >\n              <SiWhatsapp className=\"h-4 w-4 text-green-600\" />\n              WhatsApp\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              className=\"flex items-center gap-2 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 border-blue-200 dark:border-blue-800\"\n              onClick={handleTelegram}\n              data-testid=\"button-share-telegram\"\n            >\n              <Send className=\"h-4 w-4 text-blue-500\" />\n              Telegram\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              className=\"flex items-center gap-2\"\n              onClick={handleTwitter}\n              data-testid=\"button-share-twitter\"\n            >\n              <MessageCircle className=\"h-4 w-4\" />\n              X (Twitter)\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              className=\"flex items-center gap-2 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 border-blue-200 dark:border-blue-800\"\n              onClick={handleFacebook}\n              data-testid=\"button-share-facebook\"\n            >\n              <SiFacebook className=\"h-4 w-4 text-blue-600\" />\n              Facebook\n            </Button>\n          </div>\n        </div>\n      </SheetContent>\n    </Sheet>\n  );\n}\n","path":null,"size_bytes":5891,"size_tokens":null},"server/data/daily-verses.ts":{"content":"export const curatedVerses = [\n  // JANEIRO - Novo Começo e Esperança (1-31)\n  { book: \"is\", chapter: 43, verse: 19, version: \"nvi\", theme: \"Novo Começo\", text: \"Eis que farei uma coisa nova; agora sairá à luz; porventura não a percebeis?\" },\n  { book: \"lm\", chapter: 3, verse: 22, version: \"nvi\", theme: \"Misericórdia\", text: \"As misericórdias do Senhor são a causa de não sermos consumidos; porque as suas misericórdias não têm fim.\" },\n  { book: \"jr\", chapter: 29, verse: 11, version: \"nvi\", theme: \"Esperança\", text: \"Porque sou eu que conheço os planos que tenho para vocês, planos de fazê-los prosperar e não de causar dano, planos de dar a vocês esperança e um futuro.\" },\n  { book: \"sl\", chapter: 118, verse: 24, version: \"nvi\", theme: \"Gratidão\", text: \"Este é o dia que o Senhor fez; regozijemo-nos e alegremo-nos nele.\" },\n  { book: \"fp\", chapter: 3, verse: 13, version: \"nvi\", theme: \"Foco\", text: \"Irmãos, quanto a mim, não julgo que o haja alcançado; mas uma coisa faço, esquecendo-me das coisas que atrás ficam.\" },\n  { book: \"is\", chapter: 40, verse: 31, version: \"nvi\", theme: \"Renovação\", text: \"Mas os que esperam no Senhor renovarão as suas forças; subirão com asas como águias.\" },\n  { book: \"sl\", chapter: 37, verse: 4, version: \"nvi\", theme: \"Desejos\", text: \"Deleita-te também no Senhor, e ele te concederá os desejos do teu coração.\" },\n  { book: \"pv\", chapter: 16, verse: 3, version: \"nvi\", theme: \"Planos\", text: \"Confia ao Senhor as tuas obras, e os teus pensamentos serão estabelecidos.\" },\n  { book: \"2co\", chapter: 5, verse: 17, version: \"nvi\", theme: \"Nova Criatura\", text: \"Assim que, se alguém está em Cristo, nova criatura é: as coisas velhas já passaram; eis que tudo se fez novo.\" },\n  { book: \"sl\", chapter: 90, verse: 12, version: \"nvi\", theme: \"Sabedoria\", text: \"Ensina-nos a contar os nossos dias, para que alcancemos coração sábio.\" },\n  { book: \"rm\", chapter: 12, verse: 2, version: \"nvi\", theme: \"Transformação\", text: \"E não vos conformeis com este mundo, mas transformai-vos pela renovação do vosso entendimento.\" },\n  { book: \"sl\", chapter: 1, verse: 1, version: \"nvi\", theme: \"Bem-aventurança\", text: \"Bem-aventurado o homem que não anda segundo o conselho dos ímpios.\" },\n  { book: \"js\", chapter: 1, verse: 9, version: \"nvi\", theme: \"Coragem\", text: \"Não to mandei eu? Esforça-te, e tem bom ânimo; não temas, nem te espantes, porque o Senhor teu Deus é contigo.\" },\n  { book: \"sl\", chapter: 27, verse: 1, version: \"nvi\", theme: \"Luz\", text: \"O Senhor é a minha luz e a minha salvação; a quem temerei?\" },\n  { book: \"is\", chapter: 41, verse: 10, version: \"nvi\", theme: \"Coragem\", text: \"Não temas, porque eu sou contigo; não te assombres, porque eu sou o teu Deus.\" },\n  { book: \"sl\", chapter: 23, verse: 1, version: \"nvi\", theme: \"Provisão\", text: \"O Senhor é o meu pastor, nada me faltará.\" },\n  { book: \"mt\", chapter: 6, verse: 33, version: \"nvi\", theme: \"Prioridades\", text: \"Mas buscai primeiro o reino de Deus, e a sua justiça, e todas estas coisas vos serão acrescentadas.\" },\n  { book: \"pv\", chapter: 3, verse: 5, version: \"nvi\", theme: \"Confiança\", text: \"Confia no Senhor de todo o teu coração e não te estribes no teu próprio entendimento.\" },\n  { book: \"sl\", chapter: 46, verse: 1, version: \"nvi\", theme: \"Refúgio\", text: \"Deus é o nosso refúgio e fortaleza, socorro bem presente na angústia.\" },\n  { book: \"rm\", chapter: 8, verse: 28, version: \"nvi\", theme: \"Providência\", text: \"E sabemos que todas as coisas contribuem juntamente para o bem daqueles que amam a Deus.\" },\n  { book: \"fp\", chapter: 4, verse: 13, version: \"nvi\", theme: \"Força\", text: \"Posso todas as coisas naquele que me fortalece.\" },\n  { book: \"sl\", chapter: 91, verse: 1, version: \"nvi\", theme: \"Proteção\", text: \"Aquele que habita no abrigo do Altíssimo descansará à sombra do Todo-Poderoso.\" },\n  { book: \"jo\", chapter: 3, verse: 16, version: \"nvi\", theme: \"Amor de Deus\", text: \"Porque Deus amou o mundo de tal maneira que deu o seu Filho unigênito, para que todo aquele que nele crê não pereça, mas tenha a vida eterna.\" },\n  { book: \"hb\", chapter: 11, verse: 1, version: \"nvi\", theme: \"Fé\", text: \"Ora, a fé é a certeza daquilo que esperamos e a prova das coisas que não vemos.\" },\n  { book: \"sl\", chapter: 119, verse: 105, version: \"nvi\", theme: \"Direção\", text: \"Lâmpada para os meus pés é a tua palavra, e luz para o meu caminho.\" },\n  { book: \"mt\", chapter: 11, verse: 28, version: \"nvi\", theme: \"Descanso\", text: \"Vinde a mim, todos os que estais cansados e oprimidos, e eu vos aliviarei.\" },\n  { book: \"1co\", chapter: 13, verse: 4, version: \"nvi\", theme: \"Amor\", text: \"O amor é paciente, o amor é bondoso. Não inveja, não se vangloria, não se orgulha.\" },\n  { book: \"gl\", chapter: 5, verse: 22, version: \"nvi\", theme: \"Fruto do Espírito\", text: \"Mas o fruto do Espírito é: amor, alegria, paz, longanimidade, benignidade, bondade, fidelidade.\" },\n  { book: \"ef\", chapter: 6, verse: 10, version: \"nvi\", theme: \"Batalha Espiritual\", text: \"No demais, fortalecei-vos no Senhor e na força do seu poder.\" },\n  { book: \"tg\", chapter: 1, verse: 2, version: \"nvi\", theme: \"Provações\", text: \"Meus irmãos, tende por motivo de toda alegria quando cairdes em várias provações.\" },\n  { book: \"1pe\", chapter: 5, verse: 7, version: \"nvi\", theme: \"Cuidado\", text: \"Lançando sobre ele toda a vossa ansiedade, porque ele tem cuidado de vós.\" },\n  \n  // FEVEREIRO - Amor e Relacionamentos (32-59)\n  { book: \"1jo\", chapter: 4, verse: 8, version: \"nvi\", theme: \"Amor\", text: \"Aquele que não ama não conhece a Deus, porque Deus é amor.\" },\n  { book: \"1co\", chapter: 13, verse: 13, version: \"nvi\", theme: \"Amor Maior\", text: \"Agora, pois, permanecem a fé, a esperança e o amor, estes três; mas o maior destes é o amor.\" },\n  { book: \"jo\", chapter: 15, verse: 12, version: \"nvi\", theme: \"Mandamento\", text: \"O meu mandamento é este: Que vos ameis uns aos outros, assim como eu vos amei.\" },\n  { book: \"1jo\", chapter: 4, verse: 19, version: \"nvi\", theme: \"Amor Primeiro\", text: \"Nós amamos porque ele nos amou primeiro.\" },\n  { book: \"rm\", chapter: 5, verse: 8, version: \"nvi\", theme: \"Amor Incondicional\", text: \"Mas Deus prova o seu amor para conosco, em que Cristo morreu por nós, sendo nós ainda pecadores.\" },\n  { book: \"ef\", chapter: 4, verse: 2, version: \"nvi\", theme: \"Humildade\", text: \"Com toda a humildade e mansidão, com longanimidade, suportando-vos uns aos outros em amor.\" },\n  { book: \"cl\", chapter: 3, verse: 14, version: \"nvi\", theme: \"Vínculo Perfeito\", text: \"E, sobre tudo isto, revesti-vos de amor, que é o vínculo da perfeição.\" },\n  { book: \"1co\", chapter: 16, verse: 14, version: \"nvi\", theme: \"Motivação\", text: \"Todas as vossas coisas sejam feitas com amor.\" },\n  { book: \"pv\", chapter: 17, verse: 17, version: \"nvi\", theme: \"Amizade\", text: \"O amigo ama em todos os momentos; é um irmão na adversidade.\" },\n  { book: \"1ts\", chapter: 5, verse: 11, version: \"nvi\", theme: \"Encorajamento\", text: \"Pelo que exortai-vos uns aos outros e edificai-vos uns aos outros.\" },\n  { book: \"rm\", chapter: 12, verse: 10, version: \"nvi\", theme: \"Amor Fraternal\", text: \"Amai-vos cordialmente uns aos outros com amor fraternal, preferindo-vos em honra uns aos outros.\" },\n  { book: \"1pe\", chapter: 4, verse: 8, version: \"nvi\", theme: \"Amor Fervoroso\", text: \"Mas, sobretudo, tende ardente amor uns para com os outros.\" },\n  { book: \"jo\", chapter: 13, verse: 34, version: \"nvi\", theme: \"Novo Mandamento\", text: \"Um novo mandamento vos dou: Que vos ameis uns aos outros.\" },\n  { book: \"1co\", chapter: 13, verse: 7, version: \"nvi\", theme: \"Amor Perseverante\", text: \"Tudo sofre, tudo crê, tudo espera, tudo suporta.\" },\n  { book: \"rm\", chapter: 13, verse: 10, version: \"nvi\", theme: \"Cumprimento da Lei\", text: \"O amor não faz mal ao próximo. De sorte que o cumprimento da lei é o amor.\" },\n  { book: \"1jo\", chapter: 3, verse: 18, version: \"nvi\", theme: \"Amor em Ação\", text: \"Filhinhos, não amemos de palavra, nem de língua, mas por obra e em verdade.\" },\n  { book: \"pv\", chapter: 10, verse: 12, version: \"nvi\", theme: \"Amor Cobre\", text: \"O ódio excita contendas, mas o amor cobre todas as transgressões.\" },\n  { book: \"ct\", chapter: 8, verse: 7, version: \"nvi\", theme: \"Amor Forte\", text: \"As muitas águas não poderiam apagar este amor, nem os rios afogá-lo.\" },\n  { book: \"ef\", chapter: 5, verse: 2, version: \"nvi\", theme: \"Andar em Amor\", text: \"E andai em amor, como também Cristo vos amou.\" },\n  { book: \"1jo\", chapter: 4, verse: 11, version: \"nvi\", theme: \"Amar uns aos Outros\", text: \"Amados, se Deus assim nos amou, também nós devemos amar uns aos outros.\" },\n  { book: \"mt\", chapter: 22, verse: 39, version: \"nvi\", theme: \"Segundo Mandamento\", text: \"Amarás o teu próximo como a ti mesmo.\" },\n  { book: \"gl\", chapter: 5, verse: 13, version: \"nvi\", theme: \"Servir em Amor\", text: \"Servi-vos uns aos outros pelo amor.\" },\n  { book: \"pv\", chapter: 27, verse: 9, version: \"nvi\", theme: \"Doce Amizade\", text: \"O óleo e o perfume alegram o coração; assim a doçura do amigo pelo conselho cordial.\" },\n  { book: \"ec\", chapter: 4, verse: 9, version: \"nvi\", theme: \"Companheirismo\", text: \"Melhor é serem dois do que um, porque têm melhor paga do seu trabalho.\" },\n  { book: \"rm\", chapter: 15, verse: 7, version: \"nvi\", theme: \"Acolhimento\", text: \"Portanto, acolhei-vos uns aos outros, como também Cristo nos acolheu.\" },\n  { book: \"hb\", chapter: 10, verse: 24, version: \"nvi\", theme: \"Estimular\", text: \"E consideremo-nos uns aos outros, para nos estimularmos ao amor e às boas obras.\" },\n  { book: \"fp\", chapter: 2, verse: 3, version: \"nvi\", theme: \"Humildade\", text: \"Nada façais por contenda ou por vanglória, mas por humildade.\" },\n  { book: \"cl\", chapter: 3, verse: 13, version: \"nvi\", theme: \"Perdão\", text: \"Suportai-vos uns aos outros, e perdoai-vos uns aos outros.\" },\n  \n  // MARÇO - Fé e Confiança (60-90)\n  { book: \"hb\", chapter: 11, verse: 6, version: \"nvi\", theme: \"Agradar a Deus\", text: \"Ora, sem fé é impossível agradar a Deus.\" },\n  { book: \"mc\", chapter: 11, verse: 24, version: \"nvi\", theme: \"Oração com Fé\", text: \"Por isso vos digo que tudo o que pedirdes, orando, crede que o recebereis.\" },\n  { book: \"rm\", chapter: 10, verse: 17, version: \"nvi\", theme: \"Origem da Fé\", text: \"De sorte que a fé é pelo ouvir, e o ouvir pela palavra de Deus.\" },\n  { book: \"tg\", chapter: 2, verse: 17, version: \"nvi\", theme: \"Fé e Obras\", text: \"Assim também a fé, se não tiver as obras, é morta em si mesma.\" },\n  { book: \"mt\", chapter: 17, verse: 20, version: \"nvi\", theme: \"Fé como Grão\", text: \"Se tiverdes fé como um grão de mostarda, direis a este monte: Passa daqui para acolá.\" },\n  { book: \"gl\", chapter: 2, verse: 20, version: \"nvi\", theme: \"Viver pela Fé\", text: \"Já estou crucificado com Cristo; e vivo, não mais eu, mas Cristo vive em mim.\" },\n  { book: \"2co\", chapter: 5, verse: 7, version: \"nvi\", theme: \"Andar pela Fé\", text: \"Porque andamos por fé e não por vista.\" },\n  { book: \"hb\", chapter: 10, verse: 23, version: \"nvi\", theme: \"Esperança Firme\", text: \"Retenhamos firmes a confissão da nossa esperança, porque fiel é o que prometeu.\" },\n  { book: \"1pe\", chapter: 1, verse: 7, version: \"nvi\", theme: \"Fé Provada\", text: \"Para que a prova da vossa fé, muito mais preciosa do que o ouro que perece.\" },\n  { book: \"rm\", chapter: 4, verse: 20, version: \"nvi\", theme: \"Fé de Abraão\", text: \"E não duvidou da promessa de Deus por incredulidade, mas foi fortificado na fé.\" },\n  { book: \"hb\", chapter: 12, verse: 2, version: \"nvi\", theme: \"Autor da Fé\", text: \"Olhando para Jesus, autor e consumador da fé.\" },\n  { book: \"ef\", chapter: 2, verse: 8, version: \"nvi\", theme: \"Graça e Fé\", text: \"Porque pela graça sois salvos, por meio da fé; e isto não vem de vós, é dom de Deus.\" },\n  { book: \"1jo\", chapter: 5, verse: 4, version: \"nvi\", theme: \"Vitória da Fé\", text: \"Porque todo o que é nascido de Deus vence o mundo; e esta é a vitória: a nossa fé.\" },\n  { book: \"sl\", chapter: 56, verse: 3, version: \"nvi\", theme: \"Confiar sem Medo\", text: \"No dia em que eu temer, hei de confiar em ti.\" },\n  { book: \"pv\", chapter: 3, verse: 6, version: \"nvi\", theme: \"Reconhecer a Deus\", text: \"Reconhece-o em todos os teus caminhos, e ele endireitará as tuas veredas.\" },\n  { book: \"sl\", chapter: 62, verse: 8, version: \"nvi\", theme: \"Refúgio\", text: \"Confiai nele em todo o tempo, ó povo; derramai perante ele o vosso coração.\" },\n  { book: \"is\", chapter: 26, verse: 3, version: \"nvi\", theme: \"Paz Perfeita\", text: \"Tu conservarás em paz aquele cuja mente está firme em ti.\" },\n  { book: \"sl\", chapter: 28, verse: 7, version: \"nvi\", theme: \"Escudo\", text: \"O Senhor é a minha força e o meu escudo; nele confiou o meu coração.\" },\n  { book: \"na\", chapter: 1, verse: 7, version: \"nvi\", theme: \"Fortaleza\", text: \"O Senhor é bom, ele é uma fortaleza no dia da angústia.\" },\n  { book: \"sl\", chapter: 125, verse: 1, version: \"nvi\", theme: \"Inabalável\", text: \"Os que confiam no Senhor serão como o monte de Sião, que não se abala.\" },\n  { book: \"sl\", chapter: 40, verse: 4, version: \"nvi\", theme: \"Bem-aventurado\", text: \"Bem-aventurado o homem que põe no Senhor a sua confiança.\" },\n  { book: \"is\", chapter: 12, verse: 2, version: \"nvi\", theme: \"Salvação\", text: \"Eis que Deus é a minha salvação; confiarei e não temerei.\" },\n  { book: \"sl\", chapter: 112, verse: 7, version: \"nvi\", theme: \"Sem Temor\", text: \"Não temerá más notícias; o seu coração está firme, confiando no Senhor.\" },\n  { book: \"pv\", chapter: 29, verse: 25, version: \"nvi\", theme: \"Temor do Homem\", text: \"O temor do homem armará laços, mas o que confia no Senhor está seguro.\" },\n  { book: \"sl\", chapter: 20, verse: 7, version: \"nvi\", theme: \"Confiar no Nome\", text: \"Uns confiam em carros e outros em cavalos, mas nós faremos menção do nome do Senhor.\" },\n  { book: \"sl\", chapter: 32, verse: 10, version: \"nvi\", theme: \"Misericórdia\", text: \"O que confia no Senhor, a misericórdia o cercará.\" },\n  { book: \"is\", chapter: 30, verse: 15, version: \"nvi\", theme: \"Descanso\", text: \"Porque assim diz o Senhor: No arrependimento e no descanso está a vossa salvação.\" },\n  { book: \"sl\", chapter: 9, verse: 10, version: \"nvi\", theme: \"Conhecer o Nome\", text: \"E em ti confiarão os que conhecem o teu nome.\" },\n  { book: \"sl\", chapter: 37, verse: 5, version: \"nvi\", theme: \"Entregar o Caminho\", text: \"Entrega o teu caminho ao Senhor; confia nele, e ele tudo fará.\" },\n  { book: \"sl\", chapter: 84, verse: 12, version: \"nvi\", theme: \"Confiar é Felicidade\", text: \"Senhor dos Exércitos, feliz o homem que em ti confia.\" },\n  { book: \"jr\", chapter: 17, verse: 7, version: \"nvi\", theme: \"Bendito Quem Confia\", text: \"Bendito o homem que confia no Senhor, e cuja esperança é o Senhor.\" },\n  \n  // ABRIL - Oração e Comunhão (91-120)\n  { book: \"fp\", chapter: 4, verse: 6, version: \"nvi\", theme: \"Oração\", text: \"Não andeis ansiosos por coisa alguma; antes, em tudo, vossas petições sejam conhecidas diante de Deus.\" },\n  { book: \"1ts\", chapter: 5, verse: 17, version: \"nvi\", theme: \"Oração Constante\", text: \"Orai sem cessar.\" },\n  { book: \"mt\", chapter: 7, verse: 7, version: \"nvi\", theme: \"Pedir\", text: \"Pedi, e dar-se-vos-á; buscai, e encontrareis; batei, e abrir-se-vos-á.\" },\n  { book: \"tg\", chapter: 5, verse: 16, version: \"nvi\", theme: \"Oração Eficaz\", text: \"A oração feita por um justo pode muito em seus efeitos.\" },\n  { book: \"sl\", chapter: 145, verse: 18, version: \"nvi\", theme: \"Deus Perto\", text: \"Perto está o Senhor de todos os que o invocam, de todos os que o invocam em verdade.\" },\n  { book: \"jr\", chapter: 33, verse: 3, version: \"nvi\", theme: \"Clamar\", text: \"Clama a mim, e responder-te-ei, e anunciar-te-ei coisas grandes e ocultas.\" },\n  { book: \"sl\", chapter: 55, verse: 17, version: \"nvi\", theme: \"Manhã, Tarde, Noite\", text: \"De tarde, de manhã e ao meio-dia, orarei e clamarei, e ele ouvirá a minha voz.\" },\n  { book: \"mt\", chapter: 6, verse: 6, version: \"nvi\", theme: \"Oração Secreta\", text: \"Tu, porém, quando orares, entra no teu aposento e, fechando a tua porta, ora a teu Pai.\" },\n  { book: \"lc\", chapter: 11, verse: 9, version: \"nvi\", theme: \"Buscar\", text: \"E eu vos digo a vós: Pedi, e dar-se-vos-á; buscai, e achareis; batei, e abrir-se-vos-á.\" },\n  { book: \"jo\", chapter: 15, verse: 7, version: \"nvi\", theme: \"Permanecer\", text: \"Se vós estiverdes em mim, e as minhas palavras estiverem em vós, pedireis tudo o que quiserdes.\" },\n  { book: \"sl\", chapter: 50, verse: 15, version: \"nvi\", theme: \"Invocar\", text: \"E invoca-me no dia da angústia; eu te livrarei, e tu me glorificarás.\" },\n  { book: \"1jo\", chapter: 5, verse: 14, version: \"nvi\", theme: \"Confiança na Oração\", text: \"E esta é a confiança que temos nele: que, se pedirmos alguma coisa segundo a sua vontade, ele nos ouve.\" },\n  { book: \"rm\", chapter: 8, verse: 26, version: \"nvi\", theme: \"Espírito Intercede\", text: \"O Espírito ajuda as nossas fraquezas; pois não sabemos o que havemos de pedir.\" },\n  { book: \"sl\", chapter: 34, verse: 17, version: \"nvi\", theme: \"Deus Ouve\", text: \"Os justos clamam, e o Senhor os ouve e os livra de todas as suas angústias.\" },\n  { book: \"sl\", chapter: 86, verse: 6, version: \"nvi\", theme: \"Ouvir Súplica\", text: \"Dá ouvidos, Senhor, à minha oração e atende à voz das minhas súplicas.\" },\n  { book: \"mt\", chapter: 18, verse: 20, version: \"nvi\", theme: \"Presença de Deus\", text: \"Porque onde estiverem dois ou três reunidos em meu nome, aí estou eu no meio deles.\" },\n  { book: \"sl\", chapter: 5, verse: 3, version: \"nvi\", theme: \"Oração Matinal\", text: \"De manhã ouvirás a minha voz; de manhã te apresentarei a minha oração.\" },\n  { book: \"cl\", chapter: 4, verse: 2, version: \"nvi\", theme: \"Perseverar\", text: \"Perseverai em oração, velando nela com ação de graças.\" },\n  { book: \"hb\", chapter: 4, verse: 16, version: \"nvi\", theme: \"Trono da Graça\", text: \"Cheguemos, pois, com confiança ao trono da graça.\" },\n  { book: \"sl\", chapter: 42, verse: 1, version: \"nvi\", theme: \"Sede de Deus\", text: \"Como o cervo brama pelas correntes das águas, assim suspira a minha alma por ti, ó Deus.\" },\n  { book: \"sl\", chapter: 63, verse: 1, version: \"nvi\", theme: \"Buscar de Madrugada\", text: \"Ó Deus, tu és o meu Deus; de madrugada te buscarei.\" },\n  { book: \"sl\", chapter: 73, verse: 28, version: \"nvi\", theme: \"Aproximar de Deus\", text: \"Mas para mim, bom é aproximar-me de Deus.\" },\n  { book: \"sl\", chapter: 16, verse: 11, version: \"nvi\", theme: \"Plenitude\", text: \"Far-me-ás ver a vereda da vida; na tua presença há fartura de alegrias.\" },\n  { book: \"tg\", chapter: 4, verse: 8, version: \"nvi\", theme: \"Chegai-vos\", text: \"Chegai-vos a Deus, e ele se chegará a vós.\" },\n  { book: \"sl\", chapter: 27, verse: 4, version: \"nvi\", theme: \"Uma Coisa Pedi\", text: \"Uma coisa pedi ao Senhor, e a buscarei: que possa morar na casa do Senhor todos os dias da minha vida.\" },\n  { book: \"sl\", chapter: 84, verse: 10, version: \"nvi\", theme: \"Presença de Deus\", text: \"Porque um dia nos teus átrios vale mais do que mil.\" },\n  { book: \"ap\", chapter: 3, verse: 20, version: \"nvi\", theme: \"Cear com Cristo\", text: \"Eis que estou à porta e bato; se alguém ouvir a minha voz e abrir a porta, entrarei em sua casa.\" },\n  { book: \"sl\", chapter: 100, verse: 4, version: \"nvi\", theme: \"Entrar com Gratidão\", text: \"Entrai pelas portas dele com gratidão, e em seus átrios com louvor.\" },\n  { book: \"sl\", chapter: 95, verse: 6, version: \"nvi\", theme: \"Adoração\", text: \"Vinde, adoremos e prostremo-nos; ajoelhemos diante do Senhor que nos criou.\" },\n  { book: \"is\", chapter: 55, verse: 6, version: \"nvi\", theme: \"Buscar Enquanto Perto\", text: \"Buscai ao Senhor enquanto se pode achar, invocai-o enquanto está perto.\" },\n  \n  // MAIO - Sabedoria e Direção (121-151)\n  { book: \"tg\", chapter: 1, verse: 5, version: \"nvi\", theme: \"Pedir Sabedoria\", text: \"E, se algum de vós tem falta de sabedoria, peça-a a Deus, que a todos dá liberalmente.\" },\n  { book: \"pv\", chapter: 2, verse: 6, version: \"nvi\", theme: \"Fonte da Sabedoria\", text: \"Porque o Senhor dá a sabedoria; da sua boca vem o conhecimento e o entendimento.\" },\n  { book: \"pv\", chapter: 4, verse: 7, version: \"nvi\", theme: \"Principal Coisa\", text: \"A sabedoria é a coisa principal; adquire pois a sabedoria.\" },\n  { book: \"pv\", chapter: 9, verse: 10, version: \"nvi\", theme: \"Temor do Senhor\", text: \"O temor do Senhor é o princípio da sabedoria.\" },\n  { book: \"cl\", chapter: 3, verse: 16, version: \"nvi\", theme: \"Palavra de Cristo\", text: \"A palavra de Cristo habite em vós abundantemente, em toda a sabedoria.\" },\n  { book: \"pv\", chapter: 16, verse: 16, version: \"nvi\", theme: \"Melhor que Ouro\", text: \"Quanto melhor é adquirir a sabedoria do que o ouro!\" },\n  { book: \"pv\", chapter: 24, verse: 14, version: \"nvi\", theme: \"Doce Sabedoria\", text: \"Assim será para a tua alma o conhecimento da sabedoria.\" },\n  { book: \"ec\", chapter: 7, verse: 12, version: \"nvi\", theme: \"Sombra da Sabedoria\", text: \"Porque a sabedoria serve de defesa, como de defesa serve o dinheiro.\" },\n  { book: \"pv\", chapter: 1, verse: 7, version: \"nvi\", theme: \"Princípio do Conhecimento\", text: \"O temor do Senhor é o princípio do conhecimento.\" },\n  { book: \"pv\", chapter: 11, verse: 2, version: \"nvi\", theme: \"Sabedoria e Humildade\", text: \"Vinda a soberba, virá também a afronta; mas com os humildes está a sabedoria.\" },\n  { book: \"sl\", chapter: 32, verse: 8, version: \"nvi\", theme: \"Ensinar o Caminho\", text: \"Instruir-te-ei e ensinar-te-ei o caminho que deves seguir.\" },\n  { book: \"pv\", chapter: 3, verse: 7, version: \"nvi\", theme: \"Não Ser Sábio aos Próprios Olhos\", text: \"Não sejas sábio aos teus próprios olhos; teme ao Senhor e aparta-te do mal.\" },\n  { book: \"sl\", chapter: 25, verse: 4, version: \"nvi\", theme: \"Mostrar Caminhos\", text: \"Faze-me saber os teus caminhos, Senhor; ensina-me as tuas veredas.\" },\n  { book: \"sl\", chapter: 25, verse: 9, version: \"nvi\", theme: \"Guiar Mansos\", text: \"Guiará os mansos retamente; e aos mansos ensinará o seu caminho.\" },\n  { book: \"is\", chapter: 30, verse: 21, version: \"nvi\", theme: \"Voz Atrás\", text: \"E os teus ouvidos ouvirão a palavra que dirá: Este é o caminho; andai nele.\" },\n  { book: \"sl\", chapter: 73, verse: 24, version: \"nvi\", theme: \"Guiar com Conselho\", text: \"Guiar-me-ás com o teu conselho e depois me receberás em glória.\" },\n  { book: \"pv\", chapter: 16, verse: 9, version: \"nvi\", theme: \"Coração Planeja\", text: \"O coração do homem planeja o seu caminho, mas o Senhor lhe dirige os passos.\" },\n  { book: \"sl\", chapter: 48, verse: 14, version: \"nvi\", theme: \"Guia para Sempre\", text: \"Porque este Deus é o nosso Deus para todo o sempre; ele será nosso guia até à morte.\" },\n  { book: \"sl\", chapter: 31, verse: 3, version: \"nvi\", theme: \"Guiar pelo Nome\", text: \"Pelo teu nome me guiarás e me encaminharás.\" },\n  { book: \"is\", chapter: 48, verse: 17, version: \"nvi\", theme: \"Ensinar a Aproveitar\", text: \"Eu sou o Senhor, teu Deus, que te ensina o que é útil e te guia pelo caminho em que deves andar.\" },\n  { book: \"sl\", chapter: 23, verse: 3, version: \"nvi\", theme: \"Veredas da Justiça\", text: \"Refrigera a minha alma; guia-me pelas veredas da justiça por amor do seu nome.\" },\n  { book: \"jo\", chapter: 16, verse: 13, version: \"nvi\", theme: \"Espírito da Verdade\", text: \"Quando vier aquele Espírito de verdade, ele vos guiará em toda a verdade.\" },\n  { book: \"sl\", chapter: 143, verse: 10, version: \"nvi\", theme: \"Fazer Vontade\", text: \"Ensina-me a fazer a tua vontade, pois tu és o meu Deus.\" },\n  { book: \"rm\", chapter: 8, verse: 14, version: \"nvi\", theme: \"Guiados pelo Espírito\", text: \"Porque todos os que são guiados pelo Espírito de Deus, esses são filhos de Deus.\" },\n  { book: \"pv\", chapter: 12, verse: 15, version: \"nvi\", theme: \"Ouvir Conselho\", text: \"O caminho do tolo é reto aos seus olhos, mas o que ouve conselhos é sábio.\" },\n  { book: \"pv\", chapter: 15, verse: 22, version: \"nvi\", theme: \"Multidão de Conselheiros\", text: \"Onde não há conselho os projetos fracassam, mas com os muitos conselheiros há bom êxito.\" },\n  { book: \"pv\", chapter: 19, verse: 20, version: \"nvi\", theme: \"Aceitar Instrução\", text: \"Ouve o conselho e recebe a instrução, para que sejas sábio nos teus últimos dias.\" },\n  { book: \"pv\", chapter: 20, verse: 18, version: \"nvi\", theme: \"Confirmar Planos\", text: \"Os planos mediante conselhos se confirmam.\" },\n  { book: \"sl\", chapter: 16, verse: 7, version: \"nvi\", theme: \"Instrução na Noite\", text: \"Louvarei ao Senhor que me aconselhou; até de noite o meu coração me ensina.\" },\n  { book: \"pv\", chapter: 8, verse: 10, version: \"nvi\", theme: \"Instrução Melhor\", text: \"Aceitai a minha instrução, e não a prata; e o conhecimento, mais do que o ouro fino.\" },\n  { book: \"sl\", chapter: 94, verse: 12, version: \"nvi\", theme: \"Bem-aventurado Instruído\", text: \"Bem-aventurado o homem a quem tu, Senhor, ensinas.\" },\n  \n  // JUNHO - Força e Vitória (152-181)\n  { book: \"is\", chapter: 40, verse: 29, version: \"nvi\", theme: \"Força ao Cansado\", text: \"Dá força ao cansado e aumenta o vigor ao que não tem nenhum vigor.\" },\n  { book: \"sl\", chapter: 18, verse: 32, version: \"nvi\", theme: \"Deus dá Força\", text: \"Deus é o que me cinge de força e aperfeiçoa o meu caminho.\" },\n  { book: \"2tm\", chapter: 4, verse: 17, version: \"nvi\", theme: \"Senhor me Fortaleceu\", text: \"Mas o Senhor assistiu-me e fortaleceu-me.\" },\n  { book: \"ef\", chapter: 3, verse: 16, version: \"nvi\", theme: \"Fortalecidos pelo Espírito\", text: \"Para que, segundo as riquezas da sua glória, vos conceda que sejais corroborados com poder pelo seu Espírito.\" },\n  { book: \"sl\", chapter: 28, verse: 8, version: \"nvi\", theme: \"Força do Povo\", text: \"O Senhor é a força do seu povo.\" },\n  { book: \"hc\", chapter: 3, verse: 19, version: \"nvi\", theme: \"Pés como Corças\", text: \"O Senhor Deus é a minha força; fará meus pés como os das corças.\" },\n  { book: \"2co\", chapter: 12, verse: 9, version: \"nvi\", theme: \"Graça Basta\", text: \"A minha graça te basta, porque o meu poder se aperfeiçoa na fraqueza.\" },\n  { book: \"sl\", chapter: 73, verse: 26, version: \"nvi\", theme: \"Força do Coração\", text: \"A minha carne e o meu coração desfalecem; mas Deus é a fortaleza do meu coração.\" },\n  { book: \"ne\", chapter: 8, verse: 10, version: \"nvi\", theme: \"Alegria é Força\", text: \"A alegria do Senhor é a vossa força.\" },\n  { book: \"sl\", chapter: 29, verse: 11, version: \"nvi\", theme: \"Dá Força ao Povo\", text: \"O Senhor dará força ao seu povo; o Senhor abençoará o seu povo com paz.\" },\n  { book: \"sl\", chapter: 68, verse: 35, version: \"nvi\", theme: \"Força e Poder\", text: \"Ó Deus, tu és tremendo desde os teus santuários; o Deus de Israel é o que dá força e poder ao povo.\" },\n  { book: \"1co\", chapter: 15, verse: 57, version: \"nvi\", theme: \"Vitória em Cristo\", text: \"Mas graças a Deus, que nos dá a vitória por nosso Senhor Jesus Cristo.\" },\n  { book: \"rm\", chapter: 8, verse: 37, version: \"nvi\", theme: \"Mais que Vencedores\", text: \"Mas em todas estas coisas somos mais do que vencedores, por aquele que nos amou.\" },\n  { book: \"1jo\", chapter: 5, verse: 4, version: \"nvi\", theme: \"Vencer o Mundo\", text: \"Porque todo o que é nascido de Deus vence o mundo.\" },\n  { book: \"2co\", chapter: 2, verse: 14, version: \"nvi\", theme: \"Triunfar em Cristo\", text: \"Graças a Deus, que sempre nos faz triunfar em Cristo.\" },\n  { book: \"sl\", chapter: 44, verse: 5, version: \"nvi\", theme: \"Derrubar Adversários\", text: \"Por ti derrubaremos os nossos adversários.\" },\n  { book: \"dt\", chapter: 20, verse: 4, version: \"nvi\", theme: \"Deus Peleja\", text: \"Pois o Senhor, vosso Deus, é o que vai convosco, a pelejar contra os vossos inimigos.\" },\n  { book: \"sl\", chapter: 60, verse: 12, version: \"nvi\", theme: \"Fazer Proezas\", text: \"Em Deus faremos proezas, porque ele calcará os nossos inimigos.\" },\n  { book: \"sl\", chapter: 118, verse: 15, version: \"nvi\", theme: \"Destra Faz Proezas\", text: \"A destra do Senhor faz proezas.\" },\n  { book: \"ex\", chapter: 15, verse: 2, version: \"nvi\", theme: \"Força e Cântico\", text: \"O Senhor é a minha força e o meu cântico; ele me foi por salvação.\" },\n  { book: \"sl\", chapter: 18, verse: 39, version: \"nvi\", theme: \"Cingir de Força\", text: \"Pois tu me cingiste de força para a peleja.\" },\n  { book: \"is\", chapter: 40, verse: 31, version: \"nvi\", theme: \"Renovar Forças\", text: \"Mas os que esperam no Senhor renovarão as suas forças; subirão com asas como águias.\" },\n  { book: \"sl\", chapter: 27, verse: 14, version: \"nvi\", theme: \"Bom Ânimo\", text: \"Espera no Senhor, tem bom ânimo, e ele fortalecerá o teu coração.\" },\n  { book: \"sl\", chapter: 31, verse: 24, version: \"nvi\", theme: \"Esforçar o Coração\", text: \"Sede fortes, e robustecei o vosso coração, vós todos que esperais no Senhor.\" },\n  { book: \"js\", chapter: 1, verse: 7, version: \"nvi\", theme: \"Esforçar e Animar\", text: \"Tão-somente esforça-te e tem mui bom ânimo.\" },\n  { book: \"1cr\", chapter: 28, verse: 20, version: \"nvi\", theme: \"Não Temer\", text: \"Esforça-te e tem bom ânimo, e faze a obra; não temas, nem te desanimes.\" },\n  { book: \"ag\", chapter: 2, verse: 4, version: \"nvi\", theme: \"Sede Fortes\", text: \"Mas agora esforça-te, ó Zorobabel, e esforça-te, ó Josué; esforçai-vos, todo o povo da terra.\" },\n  { book: \"1co\", chapter: 16, verse: 13, version: \"nvi\", theme: \"Vigiar e Ser Forte\", text: \"Vigiai, estai firmes na fé, portai-vos varonilmente, sede fortes.\" },\n  { book: \"ef\", chapter: 6, verse: 10, version: \"nvi\", theme: \"Fortalecei-vos\", text: \"No demais, fortalecei-vos no Senhor e na força do seu poder.\" },\n  { book: \"2tm\", chapter: 2, verse: 1, version: \"nvi\", theme: \"Fortifica-te na Graça\", text: \"Tu, pois, meu filho, fortifica-te na graça que há em Cristo Jesus.\" },\n  \n  // JULHO - Paz e Descanso (182-212)\n  { book: \"jo\", chapter: 14, verse: 27, version: \"nvi\", theme: \"Paz de Cristo\", text: \"Deixo-vos a paz, a minha paz vos dou; não vo-la dou como o mundo a dá.\" },\n  { book: \"fp\", chapter: 4, verse: 7, version: \"nvi\", theme: \"Paz que Excede\", text: \"E a paz de Deus, que excede todo o entendimento, guardará os vossos corações.\" },\n  { book: \"cl\", chapter: 3, verse: 15, version: \"nvi\", theme: \"Paz Reine\", text: \"E a paz de Deus, para a qual também fostes chamados em um corpo, reine em vossos corações.\" },\n  { book: \"is\", chapter: 26, verse: 3, version: \"nvi\", theme: \"Paz Perfeita\", text: \"Tu conservarás em paz aquele cuja mente está firme em ti.\" },\n  { book: \"rm\", chapter: 5, verse: 1, version: \"nvi\", theme: \"Paz com Deus\", text: \"Tendo sido, pois, justificados pela fé, temos paz com Deus, por nosso Senhor Jesus Cristo.\" },\n  { book: \"sl\", chapter: 4, verse: 8, version: \"nvi\", theme: \"Dormir em Paz\", text: \"Em paz também me deitarei e dormirei, porque só tu, Senhor, me fazes habitar em segurança.\" },\n  { book: \"sl\", chapter: 29, verse: 11, version: \"nvi\", theme: \"Abençoar com Paz\", text: \"O Senhor abençoará o seu povo com paz.\" },\n  { book: \"sl\", chapter: 37, verse: 11, version: \"nvi\", theme: \"Abundância de Paz\", text: \"Mas os mansos herdarão a terra e se deleitarão na abundância de paz.\" },\n  { book: \"sl\", chapter: 85, verse: 8, version: \"nvi\", theme: \"Deus Fala Paz\", text: \"Escutarei o que Deus, o Senhor, falar, pois falará de paz ao seu povo.\" },\n  { book: \"sl\", chapter: 119, verse: 165, version: \"nvi\", theme: \"Paz aos que Amam\", text: \"Grande paz têm os que amam a tua lei, e para eles não há tropeço.\" },\n  { book: \"is\", chapter: 32, verse: 17, version: \"nvi\", theme: \"Efeito da Justiça\", text: \"E o efeito da justiça será paz, e a operação da justiça, repouso e segurança para sempre.\" },\n  { book: \"is\", chapter: 54, verse: 10, version: \"nvi\", theme: \"Aliança de Paz\", text: \"Mas a minha benignidade não se apartará de ti, e a aliança da minha paz não será removida.\" },\n  { book: \"rm\", chapter: 14, verse: 17, version: \"nvi\", theme: \"Reino é Paz\", text: \"Porque o reino de Deus não é comida nem bebida, mas justiça, e paz, e alegria no Espírito Santo.\" },\n  { book: \"2ts\", chapter: 3, verse: 16, version: \"nvi\", theme: \"Senhor da Paz\", text: \"Ora, o mesmo Senhor da paz vos dê a paz em todo o tempo, por todo o modo.\" },\n  { book: \"nm\", chapter: 6, verse: 26, version: \"nvi\", theme: \"Bênção de Paz\", text: \"O Senhor sobre ti levante o seu rosto e te dê a paz.\" },\n  { book: \"mt\", chapter: 11, verse: 28, version: \"nvi\", theme: \"Descanso\", text: \"Vinde a mim, todos os que estais cansados e oprimidos, e eu vos aliviarei.\" },\n  { book: \"mt\", chapter: 11, verse: 29, version: \"nvi\", theme: \"Jugo Suave\", text: \"Tomai sobre vós o meu jugo, e aprendei de mim, que sou manso e humilde de coração.\" },\n  { book: \"sl\", chapter: 23, verse: 2, version: \"nvi\", theme: \"Pastos Verdes\", text: \"Deitar-me faz em verdes pastos, guia-me mansamente a águas tranquilas.\" },\n  { book: \"sl\", chapter: 116, verse: 7, version: \"nvi\", theme: \"Volta ao Descanso\", text: \"Volta, ó minha alma, ao teu descanso, pois o Senhor te fez muito bem.\" },\n  { book: \"is\", chapter: 30, verse: 15, version: \"nvi\", theme: \"Sossego e Confiança\", text: \"No sossego e na confiança está a vossa força.\" },\n  { book: \"sl\", chapter: 37, verse: 7, version: \"nvi\", theme: \"Descansa no Senhor\", text: \"Descansa no Senhor e espera nele.\" },\n  { book: \"hb\", chapter: 4, verse: 9, version: \"nvi\", theme: \"Descanso para o Povo\", text: \"Portanto, resta ainda um repouso para o povo de Deus.\" },\n  { book: \"ex\", chapter: 33, verse: 14, version: \"nvi\", theme: \"Minha Presença Irá\", text: \"A minha presença irá contigo, e eu te darei descanso.\" },\n  { book: \"sl\", chapter: 62, verse: 1, version: \"nvi\", theme: \"Em Deus Descansa\", text: \"A minha alma espera somente em Deus; dele vem a minha salvação.\" },\n  { book: \"sl\", chapter: 91, verse: 1, version: \"nvi\", theme: \"Abrigo do Altíssimo\", text: \"Aquele que habita no abrigo do Altíssimo descansará à sombra do Todo-Poderoso.\" },\n  { book: \"jr\", chapter: 6, verse: 16, version: \"nvi\", theme: \"Descanso para Alma\", text: \"Perguntai pelas veredas antigas; andai por elas; e achareis descanso para as vossas almas.\" },\n  { book: \"sl\", chapter: 55, verse: 22, version: \"nvi\", theme: \"Lançar sobre o Senhor\", text: \"Lança o teu cuidado sobre o Senhor, e ele te susterá.\" },\n  { book: \"1pe\", chapter: 5, verse: 7, version: \"nvi\", theme: \"Ele Cuida\", text: \"Lançando sobre ele toda a vossa ansiedade, porque ele tem cuidado de vós.\" },\n  { book: \"sl\", chapter: 46, verse: 10, version: \"nvi\", theme: \"Aquietai-vos\", text: \"Aquietai-vos e sabei que eu sou Deus.\" },\n  { book: \"mc\", chapter: 6, verse: 31, version: \"nvi\", theme: \"Lugar Deserto\", text: \"Vinde vós, aqui à parte, a um lugar deserto, e repousai um pouco.\" },\n  { book: \"sl\", chapter: 131, verse: 2, version: \"nvi\", theme: \"Alma Sossegada\", text: \"Certamente me tenho portado e sossegado, como uma criança desmamada de sua mãe.\" },\n  \n  // AGOSTO - Graça e Misericórdia (213-243)\n  { book: \"ef\", chapter: 2, verse: 8, version: \"nvi\", theme: \"Salvos pela Graça\", text: \"Porque pela graça sois salvos, por meio da fé; e isto não vem de vós, é dom de Deus.\" },\n  { book: \"2co\", chapter: 9, verse: 8, version: \"nvi\", theme: \"Graça Abundante\", text: \"E Deus é poderoso para fazer abundar em vós toda a graça.\" },\n  { book: \"rm\", chapter: 5, verse: 20, version: \"nvi\", theme: \"Graça Superabundou\", text: \"Onde o pecado abundou, superabundou a graça.\" },\n  { book: \"tt\", chapter: 2, verse: 11, version: \"nvi\", theme: \"Graça Salvadora\", text: \"Porque a graça de Deus se manifestou, trazendo salvação a todos os homens.\" },\n  { book: \"hb\", chapter: 4, verse: 16, version: \"nvi\", theme: \"Trono da Graça\", text: \"Cheguemos, pois, com confiança ao trono da graça, para que alcancemos misericórdia.\" },\n  { book: \"1pe\", chapter: 5, verse: 10, version: \"nvi\", theme: \"Deus de Toda Graça\", text: \"E o Deus de toda a graça, que em Cristo Jesus vos chamou à sua eterna glória.\" },\n  { book: \"jo\", chapter: 1, verse: 16, version: \"nvi\", theme: \"Graça sobre Graça\", text: \"E todos nós recebemos da sua plenitude, e graça sobre graça.\" },\n  { book: \"rm\", chapter: 6, verse: 14, version: \"nvi\", theme: \"Sob a Graça\", text: \"Porque o pecado não terá domínio sobre vós, pois não estais debaixo da lei, mas debaixo da graça.\" },\n  { book: \"2co\", chapter: 12, verse: 9, version: \"nvi\", theme: \"Graça Basta\", text: \"A minha graça te basta, porque o meu poder se aperfeiçoa na fraqueza.\" },\n  { book: \"rm\", chapter: 11, verse: 6, version: \"nvi\", theme: \"Graça não Obras\", text: \"Mas se é por graça, já não é pelas obras; de outra maneira, a graça já não é graça.\" },\n  { book: \"sl\", chapter: 103, verse: 8, version: \"nvi\", theme: \"Misericordioso\", text: \"Misericordioso e piedoso é o Senhor; longânimo e grande em benignidade.\" },\n  { book: \"lm\", chapter: 3, verse: 22, version: \"nvi\", theme: \"Misericórdias Infinitas\", text: \"As misericórdias do Senhor são a causa de não sermos consumidos.\" },\n  { book: \"sl\", chapter: 86, verse: 5, version: \"nvi\", theme: \"Pronto a Perdoar\", text: \"Pois tu, Senhor, és bom e pronto a perdoar, e abundante em benignidade para todos os que te invocam.\" },\n  { book: \"mq\", chapter: 7, verse: 18, version: \"nvi\", theme: \"Deleita em Misericórdia\", text: \"Quem, ó Deus, é semelhante a ti, que perdoas a iniquidade?\" },\n  { book: \"sl\", chapter: 136, verse: 1, version: \"nvi\", theme: \"Misericórdia Eterna\", text: \"Louvai ao Senhor porque ele é bom, porque a sua misericórdia dura para sempre.\" },\n  { book: \"sl\", chapter: 51, verse: 1, version: \"nvi\", theme: \"Grande Misericórdia\", text: \"Tem misericórdia de mim, ó Deus, segundo a tua benignidade.\" },\n  { book: \"ef\", chapter: 2, verse: 4, version: \"nvi\", theme: \"Rico em Misericórdia\", text: \"Mas Deus, que é riquíssimo em misericórdia, pelo seu muito amor com que nos amou.\" },\n  { book: \"sl\", chapter: 145, verse: 8, version: \"nvi\", theme: \"Gracioso e Misericordioso\", text: \"Gracioso e misericordioso é o Senhor, sofredor e de grande benignidade.\" },\n  { book: \"hb\", chapter: 2, verse: 17, version: \"nvi\", theme: \"Sumo Sacerdote Misericordioso\", text: \"Para que se tornasse misericordioso e fiel sumo sacerdote.\" },\n  { book: \"sl\", chapter: 103, verse: 4, version: \"nvi\", theme: \"Coroa de Misericórdia\", text: \"Quem te coroa de benignidade e de misericórdias.\" },\n  { book: \"rm\", chapter: 9, verse: 15, version: \"nvi\", theme: \"Compaixão\", text: \"Terei misericórdia de quem eu tiver misericórdia.\" },\n  { book: \"sl\", chapter: 23, verse: 6, version: \"nvi\", theme: \"Bondade me Seguirá\", text: \"Certamente que a bondade e a misericórdia me seguirão todos os dias da minha vida.\" },\n  { book: \"sl\", chapter: 57, verse: 10, version: \"nvi\", theme: \"Grande Misericórdia\", text: \"Pois a tua misericórdia se eleva até aos céus.\" },\n  { book: \"sl\", chapter: 89, verse: 1, version: \"nvi\", theme: \"Cantar Misericórdias\", text: \"As misericórdias do Senhor cantarei eternamente.\" },\n  { book: \"sl\", chapter: 106, verse: 1, version: \"nvi\", theme: \"Louvai ao Senhor\", text: \"Louvai ao Senhor, porque ele é bom, porque a sua benignidade dura para sempre.\" },\n  { book: \"sl\", chapter: 107, verse: 1, version: \"nvi\", theme: \"Deem Graças\", text: \"Deem graças ao Senhor, porque ele é bom; o seu amor dura para sempre.\" },\n  { book: \"sl\", chapter: 118, verse: 1, version: \"nvi\", theme: \"Amor Permanente\", text: \"Deem graças ao Senhor porque ele é bom; o seu amor dura para sempre.\" },\n  { book: \"sl\", chapter: 130, verse: 7, version: \"nvi\", theme: \"Abundante Redenção\", text: \"Espera, ó Israel, no Senhor, pois no Senhor há misericórdia.\" },\n  { book: \"is\", chapter: 54, verse: 8, version: \"nvi\", theme: \"Eterna Benignidade\", text: \"Mas com eterna benignidade me compadecerei de ti, diz o Senhor.\" },\n  { book: \"jr\", chapter: 31, verse: 3, version: \"nvi\", theme: \"Amor Eterno\", text: \"Com amor eterno te amei; por isso, com benignidade te atraí.\" },\n  { book: \"os\", chapter: 2, verse: 19, version: \"nvi\", theme: \"Desposar para Sempre\", text: \"E desposar-te-ei comigo para sempre.\" },\n  \n  // SETEMBRO - Santidade e Pureza (244-273)\n  { book: \"1pe\", chapter: 1, verse: 16, version: \"nvi\", theme: \"Sede Santos\", text: \"Sede santos, porque eu sou santo.\" },\n  { book: \"hb\", chapter: 12, verse: 14, version: \"nvi\", theme: \"Santificação\", text: \"Segui a paz com todos e a santificação, sem a qual ninguém verá o Senhor.\" },\n  { book: \"1ts\", chapter: 4, verse: 7, version: \"nvi\", theme: \"Chamados para Santidade\", text: \"Porque não nos chamou Deus para a imundícia, mas para a santificação.\" },\n  { book: \"2co\", chapter: 7, verse: 1, version: \"nvi\", theme: \"Aperfeiçoar Santidade\", text: \"Purifiquemo-nos de toda imundícia da carne e do espírito, aperfeiçoando a santificação no temor de Deus.\" },\n  { book: \"rm\", chapter: 12, verse: 1, version: \"nvi\", theme: \"Sacrifício Vivo\", text: \"Apresenteis os vossos corpos em sacrifício vivo, santo e agradável a Deus.\" },\n  { book: \"sl\", chapter: 24, verse: 3, version: \"nvi\", theme: \"Subir ao Monte\", text: \"Quem subirá ao monte do Senhor? Quem estará no seu lugar santo?\" },\n  { book: \"sl\", chapter: 51, verse: 10, version: \"nvi\", theme: \"Coração Puro\", text: \"Cria em mim, ó Deus, um coração puro e renova em mim um espírito reto.\" },\n  { book: \"mt\", chapter: 5, verse: 8, version: \"nvi\", theme: \"Limpos de Coração\", text: \"Bem-aventurados os limpos de coração, porque eles verão a Deus.\" },\n  { book: \"sl\", chapter: 119, verse: 9, version: \"nvi\", theme: \"Purificar Caminho\", text: \"Como purificará o jovem o seu caminho? Observando-o conforme a tua palavra.\" },\n  { book: \"1jo\", chapter: 1, verse: 9, version: \"nvi\", theme: \"Confessar Pecados\", text: \"Se confessarmos os nossos pecados, ele é fiel e justo para nos perdoar os pecados.\" },\n  { book: \"ez\", chapter: 36, verse: 26, version: \"nvi\", theme: \"Novo Coração\", text: \"E dar-vos-ei um coração novo e porei dentro de vós um espírito novo.\" },\n  { book: \"sl\", chapter: 139, verse: 23, version: \"nvi\", theme: \"Sonda-me\", text: \"Sonda-me, ó Deus, e conhece o meu coração.\" },\n  { book: \"tg\", chapter: 4, verse: 8, version: \"nvi\", theme: \"Purificai Corações\", text: \"Chegai-vos a Deus, e ele se chegará a vós. Limpai as mãos, pecadores.\" },\n  { book: \"1jo\", chapter: 3, verse: 3, version: \"nvi\", theme: \"Purifica-se\", text: \"E qualquer que nele tem esta esperança purifica-se a si mesmo.\" },\n  { book: \"2tm\", chapter: 2, verse: 21, version: \"nvi\", theme: \"Vaso para Honra\", text: \"Se alguém se purificar destas coisas, será vaso para honra, santificado e idôneo.\" },\n  { book: \"sl\", chapter: 26, verse: 2, version: \"nvi\", theme: \"Examina-me\", text: \"Examina-me, Senhor, e prova-me; purifica os meus rins e o meu coração.\" },\n  { book: \"pv\", chapter: 4, verse: 23, version: \"nvi\", theme: \"Guarda o Coração\", text: \"Sobre tudo o que se deve guardar, guarda o teu coração, porque dele procedem as fontes da vida.\" },\n  { book: \"ef\", chapter: 5, verse: 3, version: \"nvi\", theme: \"Nem Seja Nomeada\", text: \"Mas a prostituição e toda impureza ou avareza nem ainda se nomeie entre vós.\" },\n  { book: \"cl\", chapter: 3, verse: 5, version: \"nvi\", theme: \"Fazei Morrer\", text: \"Fazei, pois, morrer os vossos membros que estão sobre a terra.\" },\n  { book: \"tt\", chapter: 2, verse: 14, version: \"nvi\", theme: \"Povo Zeloso\", text: \"O qual se deu a si mesmo por nós, para nos remir de toda iniquidade.\" },\n  { book: \"2co\", chapter: 6, verse: 17, version: \"nvi\", theme: \"Separai-vos\", text: \"Pelo que saí do meio deles, e apartai-vos, diz o Senhor.\" },\n  { book: \"rm\", chapter: 6, verse: 12, version: \"nvi\", theme: \"Não Reine o Pecado\", text: \"Não reine, portanto, o pecado em vosso corpo mortal.\" },\n  { book: \"gl\", chapter: 5, verse: 16, version: \"nvi\", theme: \"Andar no Espírito\", text: \"Andai em Espírito e não cumprireis a concupiscência da carne.\" },\n  { book: \"fp\", chapter: 4, verse: 8, version: \"nvi\", theme: \"Pensai Nestas Coisas\", text: \"Finalmente, irmãos, tudo o que é verdadeiro, tudo o que é honesto, tudo o que é justo.\" },\n  { book: \"1co\", chapter: 6, verse: 19, version: \"nvi\", theme: \"Templo do Espírito\", text: \"Não sabeis que o vosso corpo é o templo do Espírito Santo?\" },\n  { book: \"1ts\", chapter: 5, verse: 22, version: \"nvi\", theme: \"Abstende-vos\", text: \"Abstende-vos de toda aparência do mal.\" },\n  { book: \"rm\", chapter: 13, verse: 14, version: \"nvi\", theme: \"Revesti-vos\", text: \"Mas revesti-vos do Senhor Jesus Cristo e não tenhais cuidado da carne.\" },\n  { book: \"ef\", chapter: 4, verse: 24, version: \"nvi\", theme: \"Novo Homem\", text: \"E vos revistais do novo homem, que segundo Deus é criado em verdadeira justiça e santidade.\" },\n  { book: \"is\", chapter: 1, verse: 18, version: \"nvi\", theme: \"Brancos como Neve\", text: \"Vinde e argui-me, diz o Senhor: ainda que os vossos pecados sejam como a escarlate, eles se tornarão brancos como a neve.\" },\n  { book: \"ap\", chapter: 3, verse: 5, version: \"nvi\", theme: \"Vestidos Brancos\", text: \"O que vencer será vestido de vestes brancas.\" },\n  \n  // OUTUBRO - Gratidão e Louvor (274-304)\n  { book: \"sl\", chapter: 100, verse: 4, version: \"nvi\", theme: \"Entrai com Gratidão\", text: \"Entrai pelas portas dele com gratidão, e em seus átrios com louvor.\" },\n  { book: \"1ts\", chapter: 5, verse: 18, version: \"nvi\", theme: \"Dar Graças\", text: \"Em tudo dai graças, porque esta é a vontade de Deus em Cristo Jesus para convosco.\" },\n  { book: \"sl\", chapter: 107, verse: 1, version: \"nvi\", theme: \"Louvai ao Senhor\", text: \"Deem graças ao Senhor, porque ele é bom; o seu amor dura para sempre.\" },\n  { book: \"cl\", chapter: 3, verse: 17, version: \"nvi\", theme: \"Fazer com Gratidão\", text: \"Tudo quanto fizerdes, por palavras ou por obras, fazei tudo em nome do Senhor Jesus, dando por ele graças.\" },\n  { book: \"sl\", chapter: 103, verse: 1, version: \"nvi\", theme: \"Bendize ao Senhor\", text: \"Bendize, ó minha alma, ao Senhor, e tudo o que há em mim bendiga o seu santo nome.\" },\n  { book: \"sl\", chapter: 34, verse: 1, version: \"nvi\", theme: \"Bendirei em Todo Tempo\", text: \"Bendirei ao Senhor em todo o tempo; o seu louvor estará continuamente na minha boca.\" },\n  { book: \"sl\", chapter: 95, verse: 2, version: \"nvi\", theme: \"Ação de Graças\", text: \"Apresentemo-nos ante a sua face com louvores e celebremo-lo com salmos.\" },\n  { book: \"sl\", chapter: 150, verse: 6, version: \"nvi\", theme: \"Tudo que Respira\", text: \"Tudo quanto tem fôlego louve ao Senhor. Louvai ao Senhor!\" },\n  { book: \"hb\", chapter: 13, verse: 15, version: \"nvi\", theme: \"Sacrifício de Louvor\", text: \"Ofereçamos sempre por ele a Deus sacrifício de louvor.\" },\n  { book: \"sl\", chapter: 9, verse: 1, version: \"nvi\", theme: \"Louvar de Todo Coração\", text: \"Eu te louvarei, Senhor, de todo o meu coração.\" },\n  { book: \"sl\", chapter: 92, verse: 1, version: \"nvi\", theme: \"Bom é Louvar\", text: \"Bom é louvar ao Senhor e cantar louvores ao teu nome, ó Altíssimo.\" },\n  { book: \"sl\", chapter: 111, verse: 1, version: \"nvi\", theme: \"Louvarei ao Senhor\", text: \"Louvarei ao Senhor de todo o coração.\" },\n  { book: \"sl\", chapter: 145, verse: 3, version: \"nvi\", theme: \"Digno de Louvor\", text: \"Grande é o Senhor e digníssimo de louvor.\" },\n  { book: \"sl\", chapter: 147, verse: 1, version: \"nvi\", theme: \"Agradável Louvar\", text: \"Louvai ao Senhor, porque é bom cantar louvores ao nosso Deus.\" },\n  { book: \"sl\", chapter: 148, verse: 1, version: \"nvi\", theme: \"Louvai dos Céus\", text: \"Louvai ao Senhor! Louvai ao Senhor desde os céus.\" },\n  { book: \"sl\", chapter: 149, verse: 1, version: \"nvi\", theme: \"Cântico Novo\", text: \"Louvai ao Senhor! Cantai ao Senhor um cântico novo.\" },\n  { book: \"ef\", chapter: 5, verse: 20, version: \"nvi\", theme: \"Sempre Dando Graças\", text: \"Dando sempre graças por tudo a nosso Deus e Pai.\" },\n  { book: \"sl\", chapter: 16, verse: 7, version: \"nvi\", theme: \"Abençoar ao Senhor\", text: \"Bendirei ao Senhor que me aconselha.\" },\n  { book: \"sl\", chapter: 28, verse: 7, version: \"nvi\", theme: \"Louvarei com Cântico\", text: \"O Senhor é a minha força e o meu escudo; por isso meu coração se regozija.\" },\n  { book: \"sl\", chapter: 33, verse: 1, version: \"nvi\", theme: \"Regozijai-vos\", text: \"Regozijai-vos no Senhor, ó justos.\" },\n  { book: \"sl\", chapter: 66, verse: 1, version: \"nvi\", theme: \"Aclamai a Deus\", text: \"Aclamai a Deus, toda a terra.\" },\n  { book: \"sl\", chapter: 67, verse: 3, version: \"nvi\", theme: \"Povos Te Louvem\", text: \"Louvem-te os povos, ó Deus; louvem-te os povos todos.\" },\n  { book: \"sl\", chapter: 96, verse: 1, version: \"nvi\", theme: \"Cantai Cântico Novo\", text: \"Cantai ao Senhor um cântico novo; cantai ao Senhor, toda a terra.\" },\n  { book: \"sl\", chapter: 98, verse: 1, version: \"nvi\", theme: \"Coisas Maravilhosas\", text: \"Cantai ao Senhor um cântico novo, porque fez maravilhas.\" },\n  { book: \"sl\", chapter: 104, verse: 33, version: \"nvi\", theme: \"Cantarei ao Senhor\", text: \"Cantarei ao Senhor enquanto eu viver.\" },\n  { book: \"sl\", chapter: 113, verse: 3, version: \"nvi\", theme: \"Do Nascer ao Pôr do Sol\", text: \"Desde o nascente do sol até o poente, seja louvado o nome do Senhor.\" },\n  { book: \"sl\", chapter: 117, verse: 1, version: \"nvi\", theme: \"Louvai Todas as Nações\", text: \"Louvai ao Senhor, todas as nações.\" },\n  { book: \"sl\", chapter: 135, verse: 3, version: \"nvi\", theme: \"Nome Amável\", text: \"Louvai ao Senhor, porque o Senhor é bom; cantai louvores ao seu nome, porque é amável.\" },\n  { book: \"ap\", chapter: 19, verse: 5, version: \"nvi\", theme: \"Louvai o Nosso Deus\", text: \"Louvai o nosso Deus, vós, todos os seus servos.\" },\n  { book: \"sl\", chapter: 69, verse: 30, version: \"nvi\", theme: \"Louvar com Cântico\", text: \"Louvarei o nome de Deus com cântico e o engrandecerei com ação de graças.\" },\n  { book: \"sl\", chapter: 71, verse: 8, version: \"nvi\", theme: \"Boca Cheia de Louvor\", text: \"Encha-se a minha boca do teu louvor, e da tua glória todo o dia.\" },\n  \n  // NOVEMBRO - Provisão e Cuidado (305-334)\n  { book: \"fp\", chapter: 4, verse: 19, version: \"nvi\", theme: \"Deus Suprirá\", text: \"O meu Deus suprirá todas as vossas necessidades, segundo as suas riquezas na glória.\" },\n  { book: \"sl\", chapter: 37, verse: 25, version: \"nvi\", theme: \"Nunca Vi Justo Desamparado\", text: \"Fui moço e agora sou velho; porém nunca vi desamparado o justo.\" },\n  { book: \"mt\", chapter: 6, verse: 26, version: \"nvi\", theme: \"Aves do Céu\", text: \"Olhai para as aves do céu, que nem semeiam, nem segam; e vosso Pai celestial as alimenta.\" },\n  { book: \"sl\", chapter: 23, verse: 1, version: \"nvi\", theme: \"Nada Faltará\", text: \"O Senhor é o meu pastor, nada me faltará.\" },\n  { book: \"sl\", chapter: 34, verse: 10, version: \"nvi\", theme: \"Não Terá Falta\", text: \"Os leõezinhos têm falta e sofrem fome, mas aos que buscam ao Senhor bem nenhum faltará.\" },\n  { book: \"2co\", chapter: 9, verse: 8, version: \"nvi\", theme: \"Graça Abundante\", text: \"E Deus é poderoso para fazer abundar em vós toda a graça.\" },\n  { book: \"dt\", chapter: 8, verse: 18, version: \"nvi\", theme: \"Poder para Adquirir\", text: \"Mas te lembrarás do Senhor, teu Deus, porque ele é o que te dá força para adquirires riqueza.\" },\n  { book: \"sl\", chapter: 145, verse: 15, version: \"nvi\", theme: \"Olhos Esperam\", text: \"Os olhos de todos esperam em ti, e tu lhes dás o seu sustento a seu tempo.\" },\n  { book: \"sl\", chapter: 111, verse: 5, version: \"nvi\", theme: \"Dá Mantimento\", text: \"Dá mantimento aos que o temem; lembra-se sempre do seu pacto.\" },\n  { book: \"sl\", chapter: 65, verse: 9, version: \"nvi\", theme: \"Visitas a Terra\", text: \"Visitas a terra e a regas; tu a enriqueces grandemente.\" },\n  { book: \"sl\", chapter: 104, verse: 28, version: \"nvi\", theme: \"Abre a Mão\", text: \"Dando-lhes tu, eles o recolhem; abres a tua mão e se enchem de bens.\" },\n  { book: \"sl\", chapter: 132, verse: 15, version: \"nvi\", theme: \"Abençoar Provisão\", text: \"Abençoarei abundantemente a sua provisão.\" },\n  { book: \"sl\", chapter: 136, verse: 25, version: \"nvi\", theme: \"Dá Mantimento\", text: \"Aquele que dá mantimento a toda carne, porque a sua benignidade dura para sempre.\" },\n  { book: \"lc\", chapter: 12, verse: 24, version: \"nvi\", theme: \"Corvos\", text: \"Considerai os corvos, que nem semeiam, nem segam; Deus os alimenta.\" },\n  { book: \"mt\", chapter: 6, verse: 33, version: \"nvi\", theme: \"Buscai Primeiro\", text: \"Mas buscai primeiro o reino de Deus, e todas estas coisas vos serão acrescentadas.\" },\n  { book: \"is\", chapter: 58, verse: 11, version: \"nvi\", theme: \"Guiar Continuamente\", text: \"O Senhor te guiará continuamente, e fartará a tua alma em lugares secos.\" },\n  { book: \"sl\", chapter: 84, verse: 11, version: \"nvi\", theme: \"Não Negará Bem\", text: \"O Senhor Deus é sol e escudo; o Senhor dará graça e glória; não negará bem aos que andam na retidão.\" },\n  { book: \"pv\", chapter: 10, verse: 22, version: \"nvi\", theme: \"Bênção Enriquece\", text: \"A bênção do Senhor é que enriquece; e não acrescenta dores.\" },\n  { book: \"ml\", chapter: 3, verse: 10, version: \"nvi\", theme: \"Bênção sem Medida\", text: \"Derramarei sobre vós uma bênção tal, que dela vos advirá a maior abastança.\" },\n  { book: \"sl\", chapter: 68, verse: 19, version: \"nvi\", theme: \"Carrega Nossos Fardos\", text: \"Bendito seja o Senhor, que de dia em dia leva o nosso fardo.\" },\n  { book: \"sl\", chapter: 55, verse: 22, version: \"nvi\", theme: \"Lança sobre o Senhor\", text: \"Lança o teu cuidado sobre o Senhor, e ele te susterá.\" },\n  { book: \"1pe\", chapter: 5, verse: 7, version: \"nvi\", theme: \"Ele Cuida de Vós\", text: \"Lançando sobre ele toda a vossa ansiedade, porque ele tem cuidado de vós.\" },\n  { book: \"mt\", chapter: 10, verse: 29, version: \"nvi\", theme: \"Pardais\", text: \"Não se vendem dois passarinhos por um asse? E nenhum deles cairá em terra sem a vontade de vosso Pai.\" },\n  { book: \"mt\", chapter: 10, verse: 31, version: \"nvi\", theme: \"Valeis Mais\", text: \"Não temais, pois; bem mais valeis vós do que muitos pardais.\" },\n  { book: \"sl\", chapter: 121, verse: 3, version: \"nvi\", theme: \"Não Deixará Resvalar\", text: \"Não deixará vacilar o teu pé; aquele que te guarda não dormitará.\" },\n  { book: \"sl\", chapter: 121, verse: 7, version: \"nvi\", theme: \"Guardará de Todo Mal\", text: \"O Senhor te guardará de todo o mal; guardará a tua alma.\" },\n  { book: \"is\", chapter: 46, verse: 4, version: \"nvi\", theme: \"Até a Velhice\", text: \"Até à vossa velhice eu serei o mesmo; e até às cãs eu vos carregarei.\" },\n  { book: \"dt\", chapter: 33, verse: 27, version: \"nvi\", theme: \"Braços Eternos\", text: \"O Deus eterno é a tua habitação, e por baixo de ti estão os braços eternos.\" },\n  { book: \"sl\", chapter: 46, verse: 1, version: \"nvi\", theme: \"Refúgio e Fortaleza\", text: \"Deus é o nosso refúgio e fortaleza, socorro bem presente na angústia.\" },\n  { book: \"sl\", chapter: 91, verse: 4, version: \"nvi\", theme: \"Sob Suas Asas\", text: \"Ele te cobrirá com as suas penas, e debaixo das suas asas te confiarás.\" },\n  \n  // DEZEMBRO - Esperança e Promessas (335-365)\n  { book: \"rm\", chapter: 15, verse: 13, version: \"nvi\", theme: \"Deus da Esperança\", text: \"O Deus de esperança vos encha de todo o gozo e paz em crença.\" },\n  { book: \"jr\", chapter: 29, verse: 11, version: \"nvi\", theme: \"Planos de Esperança\", text: \"Porque sou eu que conheço os planos que tenho para vocês, planos de dar esperança e um futuro.\" },\n  { book: \"hb\", chapter: 10, verse: 23, version: \"nvi\", theme: \"Esperança Firme\", text: \"Retenhamos firmes a confissão da nossa esperança, porque fiel é o que prometeu.\" },\n  { book: \"rm\", chapter: 8, verse: 24, version: \"nvi\", theme: \"Salvos na Esperança\", text: \"Porque em esperança fomos salvos.\" },\n  { book: \"sl\", chapter: 42, verse: 5, version: \"nvi\", theme: \"Espera em Deus\", text: \"Por que estás abatida, ó minha alma? Espera em Deus, pois ainda o louvarei.\" },\n  { book: \"sl\", chapter: 62, verse: 5, version: \"nvi\", theme: \"Expectação de Deus\", text: \"Ó minha alma, espera somente em Deus, porque dele vem a minha expectação.\" },\n  { book: \"sl\", chapter: 130, verse: 5, version: \"nvi\", theme: \"Espero no Senhor\", text: \"Aguardo ao Senhor; a minha alma o aguarda, e espero na sua palavra.\" },\n  { book: \"sl\", chapter: 146, verse: 5, version: \"nvi\", theme: \"Feliz Quem Espera\", text: \"Bem-aventurado aquele que tem o Deus de Jacó por seu auxílio e cuja esperança está no Senhor.\" },\n  { book: \"is\", chapter: 40, verse: 31, version: \"nvi\", theme: \"Os que Esperam\", text: \"Mas os que esperam no Senhor renovarão as suas forças.\" },\n  { book: \"lm\", chapter: 3, verse: 24, version: \"nvi\", theme: \"Minha Porção\", text: \"A minha porção é o Senhor, diz a minha alma; portanto, esperarei nele.\" },\n  { book: \"2pe\", chapter: 3, verse: 9, version: \"nvi\", theme: \"Paciência\", text: \"O Senhor não retarda a sua promessa, mas é longânimo para convosco.\" },\n  { book: \"hb\", chapter: 6, verse: 18, version: \"nvi\", theme: \"Firme Esperança\", text: \"Para que tenhamos a firme consolação, nós os que pomos o nosso refúgio em lançar mão da esperança.\" },\n  { book: \"tt\", chapter: 2, verse: 13, version: \"nvi\", theme: \"Bendita Esperança\", text: \"Aguardando a bendita esperança e a manifestação da glória do grande Deus.\" },\n  { book: \"1pe\", chapter: 1, verse: 3, version: \"nvi\", theme: \"Viva Esperança\", text: \"Bendito seja o Deus e Pai de nosso Senhor Jesus Cristo, que nos gerou de novo para uma viva esperança.\" },\n  { book: \"cl\", chapter: 1, verse: 27, version: \"nvi\", theme: \"Cristo em Vós\", text: \"Cristo em vós, a esperança da glória.\" },\n  { book: \"2co\", chapter: 1, verse: 20, version: \"nvi\", theme: \"Promessas em Cristo\", text: \"Porque quantas são as promessas de Deus, tantas têm nele o sim.\" },\n  { book: \"2pe\", chapter: 1, verse: 4, version: \"nvi\", theme: \"Grandes Promessas\", text: \"Pelas quais ele nos tem dado grandíssimas e preciosas promessas.\" },\n  { book: \"rm\", chapter: 4, verse: 21, version: \"nvi\", theme: \"Poderoso para Cumprir\", text: \"E estando certíssimo de que o que ele tinha prometido também era poderoso para o fazer.\" },\n  { book: \"js\", chapter: 21, verse: 45, version: \"nvi\", theme: \"Nenhuma Falhou\", text: \"Palavra alguma falhou de todas as boas coisas que o Senhor falou.\" },\n  { book: \"js\", chapter: 23, verse: 14, version: \"nvi\", theme: \"Todas se Cumpriram\", text: \"Nem uma só coisa falhou de todas as boas coisas que o Senhor falou.\" },\n  { book: \"1rs\", chapter: 8, verse: 56, version: \"nvi\", theme: \"Nenhuma Palavra Caiu\", text: \"Nem uma só palavra caiu de todas as suas boas palavras.\" },\n  { book: \"sl\", chapter: 119, verse: 89, version: \"nvi\", theme: \"Palavra Firmada\", text: \"Para sempre, ó Senhor, a tua palavra permanece no céu.\" },\n  { book: \"is\", chapter: 55, verse: 11, version: \"nvi\", theme: \"Palavra não Volta Vazia\", text: \"Assim será a palavra que sair da minha boca; ela não voltará para mim vazia.\" },\n  { book: \"mt\", chapter: 24, verse: 35, version: \"nvi\", theme: \"Palavras não Passarão\", text: \"O céu e a terra passarão, mas as minhas palavras não hão de passar.\" },\n  { book: \"nm\", chapter: 23, verse: 19, version: \"nvi\", theme: \"Deus Não Mente\", text: \"Deus não é homem, para que minta; nem filho do homem, para que se arrependa.\" },\n  { book: \"is\", chapter: 46, verse: 10, version: \"nvi\", theme: \"Conselho Permanecerá\", text: \"O meu conselho será firme, e farei toda a minha vontade.\" },\n  { book: \"ap\", chapter: 21, verse: 4, version: \"nvi\", theme: \"Sem Lágrimas\", text: \"E Deus limpará de seus olhos toda lágrima; e não haverá mais morte.\" },\n  { book: \"ap\", chapter: 21, verse: 5, version: \"nvi\", theme: \"Novas Todas as Coisas\", text: \"E o que estava assentado sobre o trono disse: Eis que faço novas todas as coisas.\" },\n  { book: \"jo\", chapter: 14, verse: 2, version: \"nvi\", theme: \"Muitas Moradas\", text: \"Na casa de meu Pai há muitas moradas; se não fosse assim, eu vo-lo teria dito.\" },\n  { book: \"jo\", chapter: 14, verse: 3, version: \"nvi\", theme: \"Virei Outra Vez\", text: \"E, se eu for e vos preparar lugar, virei outra vez e vos levarei para mim mesmo.\" },\n  { book: \"1ts\", chapter: 4, verse: 17, version: \"nvi\", theme: \"Sempre com o Senhor\", text: \"Então nós, os que ficarmos vivos, seremos arrebatados juntamente com eles... e assim estaremos sempre com o Senhor.\" }\n];\n\nexport const bookNames: Record<string, string> = {\n  \"gn\": \"Gênesis\", \"ex\": \"Êxodo\", \"lv\": \"Levítico\", \"nm\": \"Números\", \"dt\": \"Deuteronômio\",\n  \"js\": \"Josué\", \"jz\": \"Juízes\", \"rt\": \"Rute\", \"1sm\": \"1 Samuel\", \"2sm\": \"2 Samuel\",\n  \"1rs\": \"1 Reis\", \"2rs\": \"2 Reis\", \"1cr\": \"1 Crônicas\", \"2cr\": \"2 Crônicas\",\n  \"ed\": \"Esdras\", \"ne\": \"Neemias\", \"et\": \"Ester\", \"jó\": \"Jó\", \"sl\": \"Salmos\",\n  \"pv\": \"Provérbios\", \"ec\": \"Eclesiastes\", \"ct\": \"Cânticos\", \"is\": \"Isaías\",\n  \"jr\": \"Jeremias\", \"lm\": \"Lamentações\", \"ez\": \"Ezequiel\", \"dn\": \"Daniel\",\n  \"os\": \"Oséias\", \"jl\": \"Joel\", \"am\": \"Amós\", \"ob\": \"Obadias\", \"jn\": \"Jonas\",\n  \"mq\": \"Miquéias\", \"na\": \"Naum\", \"hc\": \"Habacuque\", \"sf\": \"Sofonias\", \"ag\": \"Ageu\",\n  \"zc\": \"Zacarias\", \"ml\": \"Malaquias\", \"mt\": \"Mateus\", \"mc\": \"Marcos\", \"lc\": \"Lucas\",\n  \"jo\": \"João\", \"at\": \"Atos\", \"rm\": \"Romanos\", \"1co\": \"1 Coríntios\", \"2co\": \"2 Coríntios\",\n  \"gl\": \"Gálatas\", \"ef\": \"Efésios\", \"fp\": \"Filipenses\", \"cl\": \"Colossenses\",\n  \"1ts\": \"1 Tessalonicenses\", \"2ts\": \"2 Tessalonicenses\", \"1tm\": \"1 Timóteo\",\n  \"2tm\": \"2 Timóteo\", \"tt\": \"Tito\", \"fm\": \"Filemom\", \"hb\": \"Hebreus\", \"tg\": \"Tiago\",\n  \"1pe\": \"1 Pedro\", \"2pe\": \"2 Pedro\", \"1jo\": \"1 João\", \"2jo\": \"2 João\", \"3jo\": \"3 João\",\n  \"jd\": \"Judas\", \"ap\": \"Apocalipse\"\n};\n","path":null,"size_bytes":61941,"size_tokens":null},"ios/App/App/public/cordova_plugins.js":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"ios/App/App/AppDelegate.swift":{"content":"import UIKit\nimport Capacitor\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate {\n\n    var window: UIWindow?\n\n    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {\n        // Override point for customization after application launch.\n        return true\n    }\n\n    func applicationWillResignActive(_ application: UIApplication) {\n        // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.\n        // Use this method to pause ongoing tasks, disable timers, and invalidate graphics rendering callbacks. Games should use this method to pause the game.\n    }\n\n    func applicationDidEnterBackground(_ application: UIApplication) {\n        // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.\n        // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.\n    }\n\n    func applicationWillEnterForeground(_ application: UIApplication) {\n        // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.\n    }\n\n    func applicationDidBecomeActive(_ application: UIApplication) {\n        // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.\n    }\n\n    func applicationWillTerminate(_ application: UIApplication) {\n        // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.\n    }\n\n    func application(_ app: UIApplication, open url: URL, options: [UIApplication.OpenURLOptionsKey: Any] = [:]) -> Bool {\n        // Called when the app was launched with a url. Feel free to add additional processing here,\n        // but if you want the App API to support tracking app url opens, make sure to keep this call\n        return ApplicationDelegateProxy.shared.application(app, open: url, options: options)\n    }\n\n    func application(_ application: UIApplication, continue userActivity: NSUserActivity, restorationHandler: @escaping ([UIUserActivityRestoring]?) -> Void) -> Bool {\n        // Called when the app was launched with an activity, including Universal Links.\n        // Feel free to add additional processing here, but if you want the App API to support\n        // tracking app url opens, make sure to keep this call\n        return ApplicationDelegateProxy.shared.application(application, continue: userActivity, restorationHandler: restorationHandler)\n    }\n\n}\n","path":null,"size_bytes":3031,"size_tokens":null},"capacitor.config.ts":{"content":"import type { CapacitorConfig } from '@capacitor/cli';\n\nconst config: CapacitorConfig = {\n  appId: 'com.bibliafullstack.app',\n  appName: 'BíbliaFS',\n  webDir: 'dist/public',\n  server: {\n    androidScheme: 'https',\n    iosScheme: 'https',\n    allowNavigation: [\n      'https://bibliafs.com.br/*',\n      'https://*.supabase.co/*',\n      'https://olvumxgyoazdftdyasmx.supabase.co/*',\n      'https://accounts.google.com/*'\n    ]\n  },\n  plugins: {\n    CapacitorHttp: {\n      enabled: true\n    },\n    SplashScreen: {\n      launchShowDuration: 2000,\n      launchAutoHide: true,\n      backgroundColor: '#1a1a2e',\n      showSpinner: true,\n      spinnerColor: '#d4a574',\n      androidScaleType: 'CENTER_CROP',\n      splashFullScreen: true,\n      splashImmersive: true\n    },\n    StatusBar: {\n      style: 'DARK',\n      backgroundColor: '#1a1a2e'\n    },\n    Keyboard: {\n      resize: 'body',\n      resizeOnFullScreen: true\n    }\n  },\n  android: {\n    allowMixedContent: false,\n    buildOptions: {\n      keystorePath: undefined,\n      keystorePassword: undefined,\n      keystoreAlias: undefined,\n      keystoreAliasPassword: undefined,\n    }\n  },\n  ios: {\n    contentInset: 'automatic',\n    scrollEnabled: true,\n    allowsLinkPreview: true\n  }\n};\n\nexport default config;\n","path":null,"size_bytes":1260,"size_tokens":null},"ios/App/App/public/cordova.js":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"ios/App/App/public/assets/web-C8I059dS.js":{"content":"import{W as t}from\"./index-UgX1grkG.js\";class s extends t{constructor(){super(),this.handleVisibilityChange=()=>{const e={isActive:document.hidden!==!0};this.notifyListeners(\"appStateChange\",e),document.hidden?this.notifyListeners(\"pause\",null):this.notifyListeners(\"resume\",null)},document.addEventListener(\"visibilitychange\",this.handleVisibilityChange,!1)}exitApp(){throw this.unimplemented(\"Not implemented on web.\")}async getInfo(){throw this.unimplemented(\"Not implemented on web.\")}async getLaunchUrl(){return{url:\"\"}}async getState(){return{isActive:document.hidden!==!0}}async minimizeApp(){throw this.unimplemented(\"Not implemented on web.\")}async toggleBackButtonHandler(){throw this.unimplemented(\"Not implemented on web.\")}}export{s as AppWeb};\n","path":null,"size_bytes":758,"size_tokens":null},"android/app/src/main/java/com/bibliafullstack/app/MainActivity.java":{"content":"package com.bibliafullstack.app;\n\nimport com.getcapacitor.BridgeActivity;\n\npublic class MainActivity extends BridgeActivity {}\n","path":null,"size_bytes":127,"size_tokens":null},"client/src/components/bible-reader/audio-player.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Loader2, Play, Pause, X, SkipBack, SkipForward } from \"lucide-react\";\nimport { formatTime } from \"@/lib/audioService\";\nimport { Slider } from \"@/components/ui/slider\";\n\ninterface AudioPlayerProps {\n  isPlaying: boolean;\n  isLoading: boolean;\n  onToggle: () => void;\n  onStop: () => void;\n  title: string;\n  currentTime: number;\n  duration: number;\n  onSeek: (value: number) => void;\n}\n\nexport function AudioPlayer({\n  isPlaying,\n  isLoading,\n  onToggle,\n  onStop,\n  title,\n  currentTime,\n  duration,\n  onSeek\n}: AudioPlayerProps) {\n  if (!isPlaying && !isLoading && currentTime === 0) return null;\n\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 z-50 bg-background/95 backdrop-blur border-t p-4 shadow-lg animate-in slide-in-from-bottom duration-300\">\n      <div className=\"max-w-4xl mx-auto flex flex-col gap-2\">\n        <div className=\"flex items-center justify-between gap-4\">\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm font-medium truncate\">{title}</p>\n            <p className=\"text-xs text-muted-foreground\">\n              {formatTime(currentTime)} / {formatTime(duration)}\n            </p>\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8\" onClick={() => onSeek(Math.max(0, currentTime - 10))}>\n              <SkipBack className=\"h-4 w-4\" />\n            </Button>\n            \n            <Button \n              size=\"icon\" \n              className=\"h-10 w-10 rounded-full\" \n              onClick={onToggle}\n              disabled={isLoading}\n            >\n              {isLoading ? (\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\n              ) : isPlaying ? (\n                <Pause className=\"h-5 w-5\" />\n              ) : (\n                <Play className=\"h-5 w-5 ml-0.5\" />\n              )}\n            </Button>\n            \n            <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8\" onClick={() => onSeek(Math.min(duration, currentTime + 10))}>\n              <SkipForward className=\"h-4 w-4\" />\n            </Button>\n\n            <div className=\"w-px h-4 bg-border mx-2\" />\n            \n            <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 text-muted-foreground hover:text-foreground\" onClick={onStop}>\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n        \n        <Slider\n          value={[currentTime]}\n          max={duration || 100}\n          step={1}\n          onValueChange={([val]) => onSeek(val)}\n          className=\"w-full\"\n        />\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":2684,"size_tokens":null}},"version":2}